which: no ctags in (/bin:/usr/bin:/sbin:/usr/sbin)
make -C conf device-mapper
make[1]: Entering directory '/lfskernel/sources/boot/LVM2.2.02.177/conf'
make[1]: Nothing to be done for 'device-mapper'.
make[1]: Leaving directory '/lfskernel/sources/boot/LVM2.2.02.177/conf'
make -C include device-mapper
make[1]: Entering directory '/lfskernel/sources/boot/LVM2.2.02.177/include'
make[1]: Nothing to be done for 'device-mapper'.
make[1]: Leaving directory '/lfskernel/sources/boot/LVM2.2.02.177/include'
make -C libdm device-mapper
make[1]: Entering directory '/lfskernel/sources/boot/LVM2.2.02.177/libdm'
make[1]: Nothing to be done for 'device-mapper'.
make[1]: Leaving directory '/lfskernel/sources/boot/LVM2.2.02.177/libdm'
make -C daemons device-mapper
make[1]: Entering directory '/lfskernel/sources/boot/LVM2.2.02.177/daemons'
make[1]: Nothing to be done for 'device-mapper'.
make[1]: Leaving directory '/lfskernel/sources/boot/LVM2.2.02.177/daemons'
make -C lib device-mapper
make[1]: Entering directory '/lfskernel/sources/boot/LVM2.2.02.177/lib'
make[1]: Nothing to be done for 'device-mapper'.
make[1]: Leaving directory '/lfskernel/sources/boot/LVM2.2.02.177/lib'
make -C libdaemon device-mapper
make[1]: Entering directory '/lfskernel/sources/boot/LVM2.2.02.177/libdaemon'
make[1]: Nothing to be done for 'device-mapper'.
make[1]: Leaving directory '/lfskernel/sources/boot/LVM2.2.02.177/libdaemon'
make -C man device-mapper
make[1]: Entering directory '/lfskernel/sources/boot/LVM2.2.02.177/man'
make[1]: Nothing to be done for 'device-mapper'.
make[1]: Leaving directory '/lfskernel/sources/boot/LVM2.2.02.177/man'
make -C scripts device-mapper
make[1]: Entering directory '/lfskernel/sources/boot/LVM2.2.02.177/scripts'
make[1]: Nothing to be done for 'device-mapper'.
make[1]: Leaving directory '/lfskernel/sources/boot/LVM2.2.02.177/scripts'
make -C tools device-mapper
make[1]: Entering directory '/lfskernel/sources/boot/LVM2.2.02.177/tools'
make[1]: Nothing to be done for 'device-mapper'.
make[1]: Leaving directory '/lfskernel/sources/boot/LVM2.2.02.177/tools'
make -C udev device-mapper
make[1]: Entering directory '/lfskernel/sources/boot/LVM2.2.02.177/udev'
make[1]: Nothing to be done for 'device-mapper'.
make[1]: Leaving directory '/lfskernel/sources/boot/LVM2.2.02.177/udev'
make -C liblvm device-mapper
make[1]: Entering directory '/lfskernel/sources/boot/LVM2.2.02.177/liblvm'
make[1]: Nothing to be done for 'device-mapper'.
make[1]: Leaving directory '/lfskernel/sources/boot/LVM2.2.02.177/liblvm'
make -C conf
make[1]: Entering directory '/lfskernel/sources/boot/LVM2.2.02.177/conf'
make[1]: Nothing to be done for 'all'.
make[1]: Leaving directory '/lfskernel/sources/boot/LVM2.2.02.177/conf'
make -C include
make[1]: Entering directory '/lfskernel/sources/boot/LVM2.2.02.177/include'
make[1]: Nothing to be done for 'all'.
make[1]: Leaving directory '/lfskernel/sources/boot/LVM2.2.02.177/include'
make -C libdm
make[1]: Entering directory '/lfskernel/sources/boot/LVM2.2.02.177/libdm'
make[1]: Nothing to be done for 'all'.
make[1]: Leaving directory '/lfskernel/sources/boot/LVM2.2.02.177/libdm'
make -C libdaemon
make[1]: Entering directory '/lfskernel/sources/boot/LVM2.2.02.177/libdaemon'
make -C client device-mapper
make[2]: Entering directory '/lfskernel/sources/boot/LVM2.2.02.177/libdaemon/client'
make[2]: Nothing to be done for 'device-mapper'.
make[2]: Leaving directory '/lfskernel/sources/boot/LVM2.2.02.177/libdaemon/client'
make -C client
make[2]: Entering directory '/lfskernel/sources/boot/LVM2.2.02.177/libdaemon/client'
make[2]: Nothing to be done for 'all'.
make[2]: Leaving directory '/lfskernel/sources/boot/LVM2.2.02.177/libdaemon/client'
make[1]: Leaving directory '/lfskernel/sources/boot/LVM2.2.02.177/libdaemon'
make -C lib
make[1]: Entering directory '/lfskernel/sources/boot/LVM2.2.02.177/lib'
make[1]: Nothing to be done for 'all'.
make[1]: Leaving directory '/lfskernel/sources/boot/LVM2.2.02.177/lib'
make -C tools
make[1]: Entering directory '/lfskernel/sources/boot/LVM2.2.02.177/tools'
make[1]: Nothing to be done for 'all'.
make[1]: Leaving directory '/lfskernel/sources/boot/LVM2.2.02.177/tools'
make -C daemons
make[1]: Entering directory '/lfskernel/sources/boot/LVM2.2.02.177/daemons'
make[1]: Nothing to be done for 'all'.
make[1]: Leaving directory '/lfskernel/sources/boot/LVM2.2.02.177/daemons'
make -C man
make[1]: Entering directory '/lfskernel/sources/boot/LVM2.2.02.177/man'
make[1]: Nothing to be done for 'all'.
make[1]: Leaving directory '/lfskernel/sources/boot/LVM2.2.02.177/man'
make -C liblvm
make[1]: Entering directory '/lfskernel/sources/boot/LVM2.2.02.177/liblvm'
make[1]: Nothing to be done for 'all'.
make[1]: Leaving directory '/lfskernel/sources/boot/LVM2.2.02.177/liblvm'
make -C scripts
make[1]: Entering directory '/lfskernel/sources/boot/LVM2.2.02.177/scripts'
make[1]: Nothing to be done for 'all'.
make[1]: Leaving directory '/lfskernel/sources/boot/LVM2.2.02.177/scripts'
make -C udev
make[1]: Entering directory '/lfskernel/sources/boot/LVM2.2.02.177/udev'
make[1]: Nothing to be done for 'all'.
make[1]: Leaving directory '/lfskernel/sources/boot/LVM2.2.02.177/udev'
make -C test check_local
make[1]: Entering directory '/lfskernel/sources/boot/LVM2.2.02.177/test'
/bin/mkdir -p lib
for i in lvm lvchange lvconvert lvcreate lvdisplay lvextend lvmconfig lvmdiskscan lvmsadc lvmsar lvreduce lvremove lvrename lvresize lvs lvscan pvchange pvresize pvck pvcreate pvdisplay pvmove pvremove pvs pvscan vgcfgbackup vgcfgrestore vgchange vgck vgconvert vgcreate vgdisplay vgexport vgextend vgimport vgimportclone vgmerge vgmknodes vgreduce vgremove vgrename vgs vgscan vgsplit; do ln -s -f lvm-wrapper lib/$i; done
for i in daemons/clvmd/clvmd daemons/dmeventd/dmeventd \
	tools/dmsetup daemons/lvmetad/lvmetad \
	daemons/lvmpolld/lvmpolld ; do \
	ln -s -f /sources/boot/LVM2.2.02.177/$i lib/; done
ln -s -f /sources/boot/LVM2.2.02.177/tools/dmsetup lib/dmstats
ln -s -f /sources/boot/LVM2.2.02.177/conf/lvmdbusd.profile lib/
ln -s -f /sources/boot/LVM2.2.02.177/conf/thin-performance.profile lib/
ln -s -f /sources/boot/LVM2.2.02.177/scripts/fsadm.sh lib/fsadm
test "." = . || for i in test-corosync-conf test-dlm-conf test-sanlock-conf; do \
	ln -s -f /sources/boot/LVM2.2.02.177/test/lib/$i lib/; done
touch .lib-dir-stamp
cp lib/check.sh lib/check
/bin/chmod +x lib/check
cp lib/aux.sh lib/aux
/bin/chmod +x lib/aux
cp lib/inittest.sh lib/inittest
/bin/chmod +x lib/inittest
cp lib/utils.sh lib/utils
/bin/chmod +x lib/utils
cp lib/get.sh lib/get
/bin/chmod +x lib/get
cp lib/lvm-wrapper.sh lib/lvm-wrapper
/bin/chmod +x lib/lvm-wrapper
echo 'DM_UDEV_SYNCHRONISATION=1' >> lib/paths-common-t
echo 'THIN=internal' >> lib/paths-common-t
echo 'RAID=internal' >> lib/paths-common-t
echo 'CACHE=internal' >> lib/paths-common-t
echo 'LVMETAD_PIDFILE=""' >> lib/paths-common-t
echo 'LVMPOLLD_PIDFILE=""' >> lib/paths-common-t
echo 'DMEVENTD_PIDFILE=""' >> lib/paths-common-t
echo 'CLVMD_PIDFILE=""' >> lib/paths-common-t
echo 'LVM_TEST_THIN_CHECK_CMD=${LVM_TEST_THIN_CHECK_CMD-/usr/sbin/thin_check}' >> lib/paths-common-t
echo 'LVM_TEST_THIN_DUMP_CMD=${LVM_TEST_THIN_DUMP_CMD-/usr/sbin/thin_dump}' >> lib/paths-common-t
echo 'LVM_TEST_THIN_REPAIR_CMD=${LVM_TEST_THIN_REPAIR_CMD-/usr/sbin/thin_repair}' >> lib/paths-common-t
echo 'LVM_TEST_THIN_RESTORE_CMD=${LVM_TEST_THIN_RESTORE_CMD-/usr/sbin/thin_restore}' >> lib/paths-common-t
echo 'LVM_TEST_CACHE_CHECK_CMD=${LVM_TEST_CACHE_CHECK_CMD-/usr/sbin/cache_check}' >> lib/paths-common-t
echo 'LVM_TEST_CACHE_DUMP_CMD=${LVM_TEST_CACHE_DUMP_CMD-/usr/sbin/cache_dump}' >> lib/paths-common-t
echo 'LVM_TEST_CACHE_REPAIR_CMD=${LVM_TEST_CACHE_REPAIR_CMD-/usr/sbin/cache_repair}' >> lib/paths-common-t
echo 'LVM_TEST_CACHE_RESTORE_CMD=${LVM_TEST_CACHE_RESTORE_CMD-/usr/sbin/cache_restore}' >> lib/paths-common-t
echo 'export DM_UDEV_SYNCHRONISATION THIN RAID CACHE\' >> lib/paths-common-t
echo ' LVMETAD_PIDFILE LVMPOLLD_PIDFILE DMEVENTD_PIDFILE CLVMD_PIDFILE\' >> lib/paths-common-t
echo ' LVM_TEST_THIN_CHECK_CMD LVM_TEST_THIN_DUMP_CMD LVM_TEST_THIN_REPAIR_CMD LVM_TEST_THIN_RESTORE_CMD\' >> lib/paths-common-t
echo ' LVM_TEST_CACHE_CHECK_CMD LVM_TEST_CACHE_DUMP_CMD LVM_TEST_CACHE_REPAIR_CMD LVM_TEST_CACHE_RESTORE_CMD' >> lib/paths-common-t
mv lib/paths-common-t lib/paths-common
rm -f lib/paths-t
cat lib/paths-common > lib/paths-t
echo 'top_srcdir=".."' >> lib/paths-t
echo 'abs_top_builddir="/sources/boot/LVM2.2.02.177"' >> lib/paths-t
echo 'abs_top_srcdir="/sources/boot/LVM2.2.02.177"' >> lib/paths-t
echo 'abs_srcdir="/sources/boot/LVM2.2.02.177/test"' >> lib/paths-t
echo 'abs_builddir="/sources/boot/LVM2.2.02.177/test"' >> lib/paths-t
mv lib/paths-t lib/paths
g++ -c -I. -I../include  -DHAVE_CONFIG_H -D_BUILDING_LVM  -Wall -Wcast-align -Wfloat-equal -Wformat-security -Winline -Wmissing-format-attribute -Wmissing-include-dirs -Wmissing-noreturn -Wpointer-arith -Wredundant-decls -Wshadow -Wundef -Wwrite-strings -Wclobbered -Wempty-body -Wignored-qualifiers -Wlogical-op -Wtype-limits -Wsync-nand -fPIE  lib/runner.cpp -o lib/runner.o
g++  -L../libdm -L../lib -L../libdaemon/client -Wl,-z,relro,-z,now -pie -fPIE -Wl,--export-dynamic -o lib/runner lib/runner.o
gcc -c -I. -I../include   -DHAVE_CONFIG_H -D_BUILDING_LVM  -Wall -Wcast-align -Wfloat-equal -Wformat-security -Winline -Wmissing-format-attribute -Wmissing-include-dirs -Wmissing-noreturn -Wpointer-arith -Wredundant-decls -Wshadow -Wundef -Wwrite-strings -Wclobbered -Wempty-body -Wignored-qualifiers -Wlogical-op -Wtype-limits -Wsync-nand -Wmissing-declarations -Wmissing-prototypes -Wnested-externs -Wold-style-definition -Wstrict-prototypes -Wuninitialized -Wjump-misses-init -Wmissing-parameter-type -Wold-style-declaration -Woverride-init -O2  -fPIC  lib/not.c -o lib/not.o
gcc -O2  -fPIC  -L../libdm -L../lib -L../libdaemon/client -Wl,--export-dynamic -o lib/not lib/not.o
ln -s -f not lib/invalid
ln -s -f not lib/fail
ln -s -f not lib/should
cp lib/flavour-ndev-cluster-lvmpolld.sh lib/flavour-ndev-cluster-lvmpolld
cp lib/flavour-ndev-cluster.sh lib/flavour-ndev-cluster
cp lib/flavour-ndev-lvmetad-lvmpolld.sh lib/flavour-ndev-lvmetad-lvmpolld
cp lib/flavour-ndev-lvmetad.sh lib/flavour-ndev-lvmetad
cp lib/flavour-ndev-lvmpolld.sh lib/flavour-ndev-lvmpolld
cp lib/flavour-ndev-vanilla.sh lib/flavour-ndev-vanilla
cp lib/flavour-udev-cluster-lvmpolld.sh lib/flavour-udev-cluster-lvmpolld
cp lib/flavour-udev-cluster.sh lib/flavour-udev-cluster
cp lib/flavour-udev-lvmetad-lvmpolld.sh lib/flavour-udev-lvmetad-lvmpolld
cp lib/flavour-udev-lvmetad.sh lib/flavour-udev-lvmetad
cp lib/flavour-udev-lvmpolld.sh lib/flavour-udev-lvmpolld
cp lib/flavour-udev-lvmlockd-sanlock.sh lib/flavour-udev-lvmlockd-sanlock
cp lib/flavour-udev-lvmlockd-dlm.sh lib/flavour-udev-lvmlockd-dlm
cp lib/flavour-udev-lvmlockd-test.sh lib/flavour-udev-lvmlockd-test
cp lib/flavour-udev-vanilla.sh lib/flavour-udev-vanilla
make -C api device-mapper
make[2]: Entering directory '/lfskernel/sources/boot/LVM2.2.02.177/test/api'
/bin/mkdir -p ./; \
set -e; \
FILE=`echo vgtest.d | sed 's/\\//\\\\\\//g;s/\\.d//g'`; \
DEPS=`echo ../../make.tmpl ../../VERSION ../../Makefile ../../include/.symlinks_created | sed -e 's/\\//\\\\\\//g'`; \
gcc -MM -I. -I../../include   -DHAVE_CONFIG_H -D_BUILDING_LVM -D_REENTRANT -o vgtest.d vgtest.c; \
sed -i "s/\(.*\)\.o[ :]*/$FILE.o $FILE.d $FILE.pot: $DEPS /g" vgtest.d; \
DEPLIST=`sed 's/ \\\\//;s/.*://;' < vgtest.d`; \
echo $DEPLIST | fmt -1 | sed 's/ //g;s/\(.*\)/\1:/' >> vgtest.d; \
[ -s vgtest.d ] || rm -f vgtest.d
/bin/mkdir -p ./; \
set -e; \
FILE=`echo thin_percent.d | sed 's/\\//\\\\\\//g;s/\\.d//g'`; \
DEPS=`echo ../../make.tmpl ../../VERSION ../../Makefile ../../include/.symlinks_created | sed -e 's/\\//\\\\\\//g'`; \
gcc -MM -I. -I../../include   -DHAVE_CONFIG_H -D_BUILDING_LVM -D_REENTRANT -o thin_percent.d thin_percent.c; \
sed -i "s/\(.*\)\.o[ :]*/$FILE.o $FILE.d $FILE.pot: $DEPS /g" thin_percent.d; \
DEPLIST=`sed 's/ \\\\//;s/.*://;' < thin_percent.d`; \
echo $DEPLIST | fmt -1 | sed 's/ //g;s/\(.*\)/\1:/' >> thin_percent.d; \
[ -s thin_percent.d ] || rm -f thin_percent.d
/bin/mkdir -p ./; \
set -e; \
FILE=`echo pe_start.d | sed 's/\\//\\\\\\//g;s/\\.d//g'`; \
DEPS=`echo ../../make.tmpl ../../VERSION ../../Makefile ../../include/.symlinks_created | sed -e 's/\\//\\\\\\//g'`; \
gcc -MM -I. -I../../include   -DHAVE_CONFIG_H -D_BUILDING_LVM -D_REENTRANT -o pe_start.d pe_start.c; \
sed -i "s/\(.*\)\.o[ :]*/$FILE.o $FILE.d $FILE.pot: $DEPS /g" pe_start.d; \
DEPLIST=`sed 's/ \\\\//;s/.*://;' < pe_start.d`; \
echo $DEPLIST | fmt -1 | sed 's/ //g;s/\(.*\)/\1:/' >> pe_start.d; \
[ -s pe_start.d ] || rm -f pe_start.d
/bin/mkdir -p ./; \
set -e; \
FILE=`echo percent.d | sed 's/\\//\\\\\\//g;s/\\.d//g'`; \
DEPS=`echo ../../make.tmpl ../../VERSION ../../Makefile ../../include/.symlinks_created | sed -e 's/\\//\\\\\\//g'`; \
gcc -MM -I. -I../../include   -DHAVE_CONFIG_H -D_BUILDING_LVM -D_REENTRANT -o percent.d percent.c; \
sed -i "s/\(.*\)\.o[ :]*/$FILE.o $FILE.d $FILE.pot: $DEPS /g" percent.d; \
DEPLIST=`sed 's/ \\\\//;s/.*://;' < percent.d`; \
echo $DEPLIST | fmt -1 | sed 's/ //g;s/\(.*\)/\1:/' >> percent.d; \
[ -s percent.d ] || rm -f percent.d
/bin/mkdir -p ./; \
set -e; \
FILE=`echo vglist.d | sed 's/\\//\\\\\\//g;s/\\.d//g'`; \
DEPS=`echo ../../make.tmpl ../../VERSION ../../Makefile ../../include/.symlinks_created | sed -e 's/\\//\\\\\\//g'`; \
gcc -MM -I. -I../../include   -DHAVE_CONFIG_H -D_BUILDING_LVM -D_REENTRANT -o vglist.d vglist.c; \
sed -i "s/\(.*\)\.o[ :]*/$FILE.o $FILE.d $FILE.pot: $DEPS /g" vglist.d; \
DEPLIST=`sed 's/ \\\\//;s/.*://;' < vglist.d`; \
echo $DEPLIST | fmt -1 | sed 's/ //g;s/\(.*\)/\1:/' >> vglist.d; \
[ -s vglist.d ] || rm -f vglist.d
/bin/mkdir -p ./; \
set -e; \
FILE=`echo lvtest.d | sed 's/\\//\\\\\\//g;s/\\.d//g'`; \
DEPS=`echo ../../make.tmpl ../../VERSION ../../Makefile ../../include/.symlinks_created | sed -e 's/\\//\\\\\\//g'`; \
gcc -MM -I. -I../../include   -DHAVE_CONFIG_H -D_BUILDING_LVM -D_REENTRANT -o lvtest.d lvtest.c; \
sed -i "s/\(.*\)\.o[ :]*/$FILE.o $FILE.d $FILE.pot: $DEPS /g" lvtest.d; \
DEPLIST=`sed 's/ \\\\//;s/.*://;' < lvtest.d`; \
echo $DEPLIST | fmt -1 | sed 's/ //g;s/\(.*\)/\1:/' >> lvtest.d; \
[ -s lvtest.d ] || rm -f lvtest.d
/bin/mkdir -p ./; \
set -e; \
FILE=`echo test.d | sed 's/\\//\\\\\\//g;s/\\.d//g'`; \
DEPS=`echo ../../make.tmpl ../../VERSION ../../Makefile ../../include/.symlinks_created | sed -e 's/\\//\\\\\\//g'`; \
gcc -MM -I. -I../../include   -DHAVE_CONFIG_H -D_BUILDING_LVM -D_REENTRANT -o test.d test.c; \
sed -i "s/\(.*\)\.o[ :]*/$FILE.o $FILE.d $FILE.pot: $DEPS /g" test.d; \
DEPLIST=`sed 's/ \\\\//;s/.*://;' < test.d`; \
echo $DEPLIST | fmt -1 | sed 's/ //g;s/\(.*\)/\1:/' >> test.d; \
[ -s test.d ] || rm -f test.d
make[2]: Nothing to be done for 'device-mapper'.
make[2]: Leaving directory '/lfskernel/sources/boot/LVM2.2.02.177/test/api'
make -C unit device-mapper
make[2]: Entering directory '/lfskernel/sources/boot/LVM2.2.02.177/test/unit'
make[2]: Nothing to be done for 'device-mapper'.
make[2]: Leaving directory '/lfskernel/sources/boot/LVM2.2.02.177/test/unit'
make -C api
make[2]: Entering directory '/lfskernel/sources/boot/LVM2.2.02.177/test/api'
gcc -c -I. -I../../include   -DHAVE_CONFIG_H -D_BUILDING_LVM -D_REENTRANT  -Wall -Wcast-align -Wfloat-equal -Wformat-security -Winline -Wmissing-format-attribute -Wmissing-include-dirs -Wmissing-noreturn -Wpointer-arith -Wredundant-decls -Wshadow -Wundef -Wwrite-strings -Wclobbered -Wempty-body -Wignored-qualifiers -Wlogical-op -Wtype-limits -Wsync-nand -Wmissing-declarations -Wmissing-prototypes -Wnested-externs -Wold-style-definition -Wstrict-prototypes -Wuninitialized -Wjump-misses-init -Wmissing-parameter-type -Wold-style-declaration -Woverride-init -O2  -fPIC  test.c -o test.o
gcc -o test test.o  -O2  -fPIC  -L../../libdm -L../../lib -L../../libdaemon/client -L../../liblvm -L../../daemons/dmeventd -Wl,--export-dynamic  -llvm2app  -ldevmapper -lreadline
gcc -c -I. -I../../include   -DHAVE_CONFIG_H -D_BUILDING_LVM -D_REENTRANT  -Wall -Wcast-align -Wfloat-equal -Wformat-security -Winline -Wmissing-format-attribute -Wmissing-include-dirs -Wmissing-noreturn -Wpointer-arith -Wredundant-decls -Wshadow -Wundef -Wwrite-strings -Wclobbered -Wempty-body -Wignored-qualifiers -Wlogical-op -Wtype-limits -Wsync-nand -Wmissing-declarations -Wmissing-prototypes -Wnested-externs -Wold-style-definition -Wstrict-prototypes -Wuninitialized -Wjump-misses-init -Wmissing-parameter-type -Wold-style-declaration -Woverride-init -O2  -fPIC  lvtest.c -o lvtest.o
gcc -o lvtest.t lvtest.o -O2  -fPIC  -L../../libdm -L../../lib -L../../libdaemon/client -L../../liblvm -L../../daemons/dmeventd -Wl,--export-dynamic  -llvm2app  -ldevmapper
gcc -c -I. -I../../include   -DHAVE_CONFIG_H -D_BUILDING_LVM -D_REENTRANT  -Wall -Wcast-align -Wfloat-equal -Wformat-security -Winline -Wmissing-format-attribute -Wmissing-include-dirs -Wmissing-noreturn -Wpointer-arith -Wredundant-decls -Wshadow -Wundef -Wwrite-strings -Wclobbered -Wempty-body -Wignored-qualifiers -Wlogical-op -Wtype-limits -Wsync-nand -Wmissing-declarations -Wmissing-prototypes -Wnested-externs -Wold-style-definition -Wstrict-prototypes -Wuninitialized -Wjump-misses-init -Wmissing-parameter-type -Wold-style-declaration -Woverride-init -O2  -fPIC  vglist.c -o vglist.o
gcc -o vglist.t vglist.o -O2  -fPIC  -L../../libdm -L../../lib -L../../libdaemon/client -L../../liblvm -L../../daemons/dmeventd -Wl,--export-dynamic  -llvm2app  -ldevmapper
gcc -c -I. -I../../include   -DHAVE_CONFIG_H -D_BUILDING_LVM -D_REENTRANT  -Wall -Wcast-align -Wfloat-equal -Wformat-security -Winline -Wmissing-format-attribute -Wmissing-include-dirs -Wmissing-noreturn -Wpointer-arith -Wredundant-decls -Wshadow -Wundef -Wwrite-strings -Wclobbered -Wempty-body -Wignored-qualifiers -Wlogical-op -Wtype-limits -Wsync-nand -Wmissing-declarations -Wmissing-prototypes -Wnested-externs -Wold-style-definition -Wstrict-prototypes -Wuninitialized -Wjump-misses-init -Wmissing-parameter-type -Wold-style-declaration -Woverride-init -O2  -fPIC  percent.c -o percent.o
gcc -o percent.t percent.o -O2  -fPIC  -L../../libdm -L../../lib -L../../libdaemon/client -L../../liblvm -L../../daemons/dmeventd -Wl,--export-dynamic  -llvm2app  -ldevmapper
gcc -c -I. -I../../include   -DHAVE_CONFIG_H -D_BUILDING_LVM -D_REENTRANT  -Wall -Wcast-align -Wfloat-equal -Wformat-security -Winline -Wmissing-format-attribute -Wmissing-include-dirs -Wmissing-noreturn -Wpointer-arith -Wredundant-decls -Wshadow -Wundef -Wwrite-strings -Wclobbered -Wempty-body -Wignored-qualifiers -Wlogical-op -Wtype-limits -Wsync-nand -Wmissing-declarations -Wmissing-prototypes -Wnested-externs -Wold-style-definition -Wstrict-prototypes -Wuninitialized -Wjump-misses-init -Wmissing-parameter-type -Wold-style-declaration -Woverride-init -O2  -fPIC  pe_start.c -o pe_start.o
gcc -o pe_start.t pe_start.o -O2  -fPIC  -L../../libdm -L../../lib -L../../libdaemon/client -L../../liblvm -L../../daemons/dmeventd -Wl,--export-dynamic  -llvm2app  -ldevmapper
gcc -c -I. -I../../include   -DHAVE_CONFIG_H -D_BUILDING_LVM -D_REENTRANT  -Wall -Wcast-align -Wfloat-equal -Wformat-security -Winline -Wmissing-format-attribute -Wmissing-include-dirs -Wmissing-noreturn -Wpointer-arith -Wredundant-decls -Wshadow -Wundef -Wwrite-strings -Wclobbered -Wempty-body -Wignored-qualifiers -Wlogical-op -Wtype-limits -Wsync-nand -Wmissing-declarations -Wmissing-prototypes -Wnested-externs -Wold-style-definition -Wstrict-prototypes -Wuninitialized -Wjump-misses-init -Wmissing-parameter-type -Wold-style-declaration -Woverride-init -O2  -fPIC  thin_percent.c -o thin_percent.o
gcc -o thin_percent.t thin_percent.o -O2  -fPIC  -L../../libdm -L../../lib -L../../libdaemon/client -L../../liblvm -L../../daemons/dmeventd -Wl,--export-dynamic  -llvm2app  -ldevmapper
gcc -c -I. -I../../include   -DHAVE_CONFIG_H -D_BUILDING_LVM -D_REENTRANT  -Wall -Wcast-align -Wfloat-equal -Wformat-security -Winline -Wmissing-format-attribute -Wmissing-include-dirs -Wmissing-noreturn -Wpointer-arith -Wredundant-decls -Wshadow -Wundef -Wwrite-strings -Wclobbered -Wempty-body -Wignored-qualifiers -Wlogical-op -Wtype-limits -Wsync-nand -Wmissing-declarations -Wmissing-prototypes -Wnested-externs -Wold-style-definition -Wstrict-prototypes -Wuninitialized -Wjump-misses-init -Wmissing-parameter-type -Wold-style-declaration -Woverride-init -O2  -fPIC  vgtest.c -o vgtest.o
gcc -o vgtest.t vgtest.o -O2  -fPIC  -L../../libdm -L../../lib -L../../libdaemon/client -L../../liblvm -L../../daemons/dmeventd -Wl,--export-dynamic  -llvm2app  -ldevmapper
make[2]: Leaving directory '/lfskernel/sources/boot/LVM2.2.02.177/test/api'
make -C unit
make[2]: Entering directory '/lfskernel/sources/boot/LVM2.2.02.177/test/unit'
make[2]: Nothing to be done for 'all'.
make[2]: Leaving directory '/lfskernel/sources/boot/LVM2.2.02.177/test/unit'
cut -f 1 -d ' ' <../VERSION >lib/version-expected
cut -f 1 -d ' ' <../VERSION_DM >lib/dm-version-expected
touch .tests-stamp
VERBOSE=0 ./lib/runner \
	--testdir . --outdir results \
	--flavours ndev-vanilla --only . --skip @ 
running 298 tests

| [ 0:00] Library version:   1.02.146 (2017-12-18)
| [ 0:00] Driver version:    4.35.0
| [ 0:00] Kernel is Linux localhost.localdomain 3.10.0-693.11.1.el7.x86_64 #1 SMP Mon Dec 4 23:52:40 UTC 2017 x86_64 GNU/Linux
| [ 0:00] Selinux mode is not installed.
| [ 0:00]               total        used        free      shared  buff/cache   available
| [ 0:00] Mem:           7822        1069        4163          10        2589        6446
| [ 0:00] Swap:          4095           0        4095
| [ 0:00] Filesystem      Size  Used Avail Use% Mounted on
| [ 0:00] /dev/sdc1        18G  8.4G  8.4G  50% /
| [ 0:00] /dev/sdd1        51G  6.1G   43G  13% /lfskernel
| [ 0:00] devtmpfs        3.9G     0  3.9G   0% /dev
| [ 0:00] tmpfs           3.9G     0  3.9G   0% /run
| [ 0:00] @TESTDIR=/tmp/LVMTEST22649.FSnkAyDmvu
| [ 0:00] @PREFIX=LVMTEST22649
| [ 0:00] ## LVMCONF: activation {
| [ 0:00] ## LVMCONF:     checks = 1
| [ 0:00] ## LVMCONF:     monitoring = 0
| [ 0:00] ## LVMCONF:     polling_interval = 1
| [ 0:00] ## LVMCONF:     raid_region_size = 512
| [ 0:00] ## LVMCONF:     retry_deactivation = 1
| [ 0:00] ## LVMCONF:     snapshot_autoextend_percent = 50
| [ 0:00] ## LVMCONF:     snapshot_autoextend_threshold = 50
| [ 0:00] ## LVMCONF:     udev_rules = 1
| [ 0:00] ## LVMCONF:     udev_sync = 1
| [ 0:00] ## LVMCONF:     verify_udev_operations = 1
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: allocation {
| [ 0:00] ## LVMCONF:     wipe_signatures_when_zeroing_new_lvs = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: backup {
| [ 0:00] ## LVMCONF:     archive = 0
| [ 0:00] ## LVMCONF:     backup = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: devices {
| [ 0:00] ## LVMCONF:     cache_dir = "@TESTDIR@/etc"
| [ 0:00] ## LVMCONF:     default_data_alignment = 1
| [ 0:00] ## LVMCONF:     dir = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     filter = "a|.*|"
| [ 0:00] ## LVMCONF:     global_filter = [ "a|@TESTDIR@/dev/mapper/@PREFIX@.*pv[0-9_]*$|", "r|.*|" ]
| [ 0:00] ## LVMCONF:     md_component_detection  = 0
| [ 0:00] ## LVMCONF:     scan = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     sysfs_scan = 1
| [ 0:00] ## LVMCONF:     write_cache_state = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: dmeventd {
| [ 0:00] ## LVMCONF:     executable = "/sources/boot/LVM2.2.02.177/test/lib/dmeventd"
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: global {
| [ 0:00] ## LVMCONF:     abort_on_internal_errors = 1
| [ 0:00] ## LVMCONF:     cache_check_executable = "/usr/sbin/cache_check"
| [ 0:00] ## LVMCONF:     cache_dump_executable = "/usr/sbin/cache_dump"
| [ 0:00] ## LVMCONF:     cache_repair_executable = "/usr/sbin/cache_repair"
| [ 0:00] ## LVMCONF:     detect_internal_vg_cache_corruption = 1
| [ 0:00] ## LVMCONF:     fallback_to_local_locking = 0
| [ 0:00] ## LVMCONF:     fsadm_executable = "/sources/boot/LVM2.2.02.177/test/lib/fsadm"
| [ 0:00] ## LVMCONF:     library_dir = "@TESTDIR@/lib"
| [ 0:00] ## LVMCONF:     locking_dir = "@TESTDIR@/var/lock/lvm"
| [ 0:00] ## LVMCONF:     locking_type=1
| [ 0:00] ## LVMCONF:     notify_dbus = 0
| [ 0:00] ## LVMCONF:     si_unit_consistency = 1
| [ 0:00] ## LVMCONF:     thin_check_executable = "/usr/sbin/thin_check"
| [ 0:00] ## LVMCONF:     thin_dump_executable = "/usr/sbin/thin_dump"
| [ 0:00] ## LVMCONF:     thin_repair_executable = "/usr/sbin/thin_repair"
| [ 0:00] ## LVMCONF:     use_lvmetad = 0
| [ 0:00] ## LVMCONF:     use_lvmlockd = 0
| [ 0:00] ## LVMCONF:     use_lvmpolld = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: log {
| [ 0:00] ## LVMCONF:     activation = 1
| [ 0:00] ## LVMCONF:     file = "@TESTDIR@/debug.log"
| [ 0:00] ## LVMCONF:     indent = 1
| [ 0:00] ## LVMCONF:     level = 9
| [ 0:00] ## LVMCONF:     overwrite = 1
| [ 0:00] ## LVMCONF:     syslog = 0
| [ 0:00] ## LVMCONF:     verbose = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] <======== Processing test: "dbustest.sh" ========>
| [ 0:00] 
| [ 0:00] aux prepare_pvs 6
| [ 0:00] #dbustest.sh:19+ aux prepare_pvs 6
| [ 0:00] ## preparing loop device....ok (/dev/loop0)
| [ 0:00] ## preparing 6 devices...lib/utils: line 212: DM_UDEV_COOKIE: unbound variable
| [ 0:00] set +vx; STACKTRACE; set -vx
| [ 0:00] ##dbustest.sh:19+ set +vx
| [ 0:00] ## - /lfskernel/sources/boot/LVM2.2.02.177/test/api/dbustest.sh:19
| [ 0:00] ## 1 STACKTRACE() called from /lfskernel/sources/boot/LVM2.2.02.177/test/api/dbustest.sh:19
| [ 0:00] <======== Info ========>
| [ 0:00] ## DMINFO:   Name             Maj Min Stat Open Targ Event  UUID                                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv2  253   4 L--w    0    1      0 TEST-@PREFIX@pv2                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv1  253   8 L--w    0    1      0 TEST-@PREFIX@pv1                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv6  253   3 L--w    0    1      0 TEST-@PREFIX@pv6                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv5  253   7 L--w    0    1      0 TEST-@PREFIX@pv5                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv4  253   6 L--w    0    1      0 TEST-@PREFIX@pv4                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv3  253   5 L--w    0    1      0 TEST-@PREFIX@pv3                                                
| [ 0:00] <======== Active table ========>
| [ 0:00] ## DMTABLE:  @PREFIX@pv2: 0 69632 linear 7:0 71680
| [ 0:00] ## DMTABLE:  @PREFIX@pv1: 0 69632 linear 7:0 2048
| [ 0:00] ## DMTABLE:  @PREFIX@pv6: 0 69632 linear 7:0 350208
| [ 0:00] ## DMTABLE:  @PREFIX@pv5: 0 69632 linear 7:0 280576
| [ 0:00] ## DMTABLE:  @PREFIX@pv4: 0 69632 linear 7:0 210944
| [ 0:00] ## DMTABLE:  @PREFIX@pv3: 0 69632 linear 7:0 141312
| [ 0:00] <======== Inactive table ========>
| [ 0:00] ## DMITABLE: @PREFIX@pv2: 
| [ 0:00] ## DMITABLE: @PREFIX@pv1: 
| [ 0:00] ## DMITABLE: @PREFIX@pv6: 
| [ 0:00] ## DMITABLE: @PREFIX@pv5: 
| [ 0:00] ## DMITABLE: @PREFIX@pv4: 
| [ 0:00] ## DMITABLE: @PREFIX@pv3: 
| [ 0:00] <======== Status ========>
| [ 0:00] ## DMSTATUS: @PREFIX@pv2: 0 69632 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv1: 0 69632 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv6: 0 69632 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv5: 0 69632 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv4: 0 69632 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv3: 0 69632 linear 
| [ 0:00] <======== Tree ========>
| [ 0:00] ## DMTREE:   @PREFIX@pv2 (253:4)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   @PREFIX@pv1 (253:8)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   @PREFIX@pv6 (253:3)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   @PREFIX@pv5 (253:7)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   @PREFIX@pv4 (253:6)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   LFS_vg-lfs (253:2)
| [ 0:00] ## DMTREE:    `- (8:16)
| [ 0:00] ## DMTREE:   centos-swap (253:1)
| [ 0:00] ## DMTREE:    `- (8:2)
| [ 0:00] ## DMTREE:   @PREFIX@pv3 (253:5)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   centos-root (253:0)
| [ 0:00] ## DMTREE:    `- (8:2)
| [ 0:00] <======== Recursive list of @TESTDIR@/dev ========>
| [ 0:00] ## LSLR:	@TESTDIR@/dev:
| [ 0:00] ## LSLR:	total 4
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 0 Feb 21 02:26 loop0
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 1 Feb 21 02:26 loop1
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 2 Feb 21 02:26 loop2
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 3 Feb 21 02:26 loop3
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 4 Feb 21 02:26 loop4
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 5 Feb 21 02:26 loop5
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 6 Feb 21 02:26 loop6
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 7 Feb 21 02:26 loop7
| [ 0:00] ## LSLR:	drwxr-xr-x 2 root root 4096 Feb 21 02:26 mapper
| [ 0:00] ## LSLR:	crw-r--r-- 1 root root 1, 3 Feb 21 02:26 testnull
| [ 0:00] ## LSLR:	
| [ 0:00] ## LSLR:	@TESTDIR@/dev/mapper:
| [ 0:00] ## LSLR:	total 0
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   8 Feb 21 02:26 @PREFIX@pv1
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   4 Feb 21 02:26 @PREFIX@pv2
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   5 Feb 21 02:26 @PREFIX@pv3
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   6 Feb 21 02:26 @PREFIX@pv4
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   7 Feb 21 02:26 @PREFIX@pv5
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   3 Feb 21 02:26 @PREFIX@pv6
| [ 0:00] ## LSLR:	crw------- 1 root root  10, 236 Feb 21 02:26 control
| [ 0:00] <======== Udev DB content ========>
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-0
| [ 0:00] ## UDEV:	N: dm-0
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-0
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-0
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=0
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-1
| [ 0:00] ## UDEV:	N: dm-1
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-1
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-1
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=1
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-2
| [ 0:00] ## UDEV:	N: dm-2
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-2
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-2
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=2
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-3
| [ 0:00] ## UDEV:	N: dm-3
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-3
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-3
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=3
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-4
| [ 0:00] ## UDEV:	N: dm-4
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-4
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-4
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=4
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-5
| [ 0:00] ## UDEV:	N: dm-5
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-5
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-5
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=5
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-6
| [ 0:00] ## UDEV:	N: dm-6
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-6
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-6
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=6
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-7
| [ 0:00] ## UDEV:	N: dm-7
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-7
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-7
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=7
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-8
| [ 0:00] ## UDEV:	N: dm-8
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-8
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-8
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=8
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/loop0
| [ 0:00] ## UDEV:	N: loop0
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/loop0
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/loop0
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=7
| [ 0:00] ## UDEV:	E: MINOR=0
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] <======== Script file "dbustest.sh" ========>
| [ 0:00] ## Line: 1 	 #!/bin/sh
| [ 0:00] ## Line: 2 	 # Copyright (C) 2016 Red Hat, Inc. All rights reserved.
| [ 0:00] ## Line: 3 	 #
| [ 0:00] ## Line: 4 	 # This file is part of LVM2.
| [ 0:00] ## Line: 5 	 #
| [ 0:00] ## Line: 6 	 # This copyrighted material is made available to anyone wishing to use,
| [ 0:00] ## Line: 7 	 # modify, copy, or redistribute it subject to the terms and conditions
| [ 0:00] ## Line: 8 	 # of the GNU General Public License v.2.
| [ 0:00] ## Line: 9 	 #
| [ 0:00] ## Line: 10 	 # You should have received a copy of the GNU General Public License
| [ 0:00] ## Line: 11 	 # along with this program; if not, write to the Free Software Foundation,
| [ 0:00] ## Line: 12 	 # Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA
| [ 0:00] ## Line: 13 	 
| [ 0:00] ## Line: 14 	 SKIP_WITH_LVMLOCKD=1
| [ 0:00] ## Line: 15 	 SKIP_WITH_CLVMD=1
| [ 0:00] ## Line: 16 	 
| [ 0:00] ## Line: 17 	 . lib/inittest
| [ 0:00] ## Line: 18 	 
| [ 0:00] ## Line: 19 	 aux prepare_pvs 6
| [ 0:00] ## Line: 20 	 
| [ 0:00] ## Line: 21 	 # Required by test_nesting:
| [ 0:00] ## Line: 22 	 aux extend_filter_LVMTEST
| [ 0:00] ## Line: 23 	 
| [ 0:00] ## Line: 24 	 # We need the lvmdbusd.profile for the daemon to utilize JSON
| [ 0:00] ## Line: 25 	 # output
| [ 0:00] ## Line: 26 	 mkdir -p "$TESTDIR/etc/profile"
| [ 0:00] ## Line: 27 	 cp -v "$TESTOLDPWD/lib/lvmdbusd.profile" "$TESTDIR/etc/profile/"
| [ 0:00] ## Line: 28 	 
| [ 0:00] ## Line: 29 	 # Need to set this up so that the lvmdbusd service knows which
| [ 0:00] ## Line: 30 	 # binary to be running, which should be the one we just built
| [ 0:00] ## Line: 31 	 LVM_BINARY=$(which lvm 2>/dev/null)
| [ 0:00] ## Line: 32 	 export LVM_BINARY
| [ 0:00] ## Line: 33 	 
| [ 0:00] ## Line: 34 	 # skip if we don't have our own lvmetad...
| [ 0:00] ## Line: 35 	 if test -z "${installed_testsuite+varset}"; then
| [ 0:00] ## Line: 36 	 	(echo "$LVM_BINARY" | grep -q "$abs_builddir") || skip
| [ 0:00] ## Line: 37 	 fi
| [ 0:00] ## Line: 38 	 
| [ 0:00] ## Line: 39 	 aux prepare_lvmdbusd
| [ 0:00] ## Line: 40 	 
| [ 0:00] ## Line: 41 	 "$TESTOLDPWD/dbus/lvmdbustest.py" -v
| [ 0:00] aux teardown
| [ 0:00] #dbustest.sh:1+ aux teardown
| [ 0:00] ## teardown.........ok
###       failed: [ndev-vanilla] api/dbustest.sh

| [ 0:00] Library version:   1.02.146 (2017-12-18)
| [ 0:00] Driver version:    4.35.0
| [ 0:00] Kernel is Linux localhost.localdomain 3.10.0-693.11.1.el7.x86_64 #1 SMP Mon Dec 4 23:52:40 UTC 2017 x86_64 GNU/Linux
| [ 0:00] Selinux mode is not installed.
| [ 0:00]               total        used        free      shared  buff/cache   available
| [ 0:00] Mem:           7822        1075        4158          10        2589        6440
| [ 0:00] Swap:          4095           0        4095
| [ 0:00] Filesystem      Size  Used Avail Use% Mounted on
| [ 0:00] /dev/sdc1        18G  8.4G  8.4G  50% /
| [ 0:00] /dev/sdd1        51G  6.1G   43G  13% /lfskernel
| [ 0:00] devtmpfs        3.9G     0  3.9G   0% /dev
| [ 0:00] tmpfs           3.9G     0  3.9G   0% /run
| [ 0:00] @TESTDIR=/tmp/LVMTEST22875.HApOv0y1Vb
| [ 0:00] @PREFIX=LVMTEST22875
| [ 0:00] ## LVMCONF: activation {
| [ 0:00] ## LVMCONF:     checks = 1
| [ 0:00] ## LVMCONF:     monitoring = 0
| [ 0:00] ## LVMCONF:     polling_interval = 1
| [ 0:00] ## LVMCONF:     raid_region_size = 512
| [ 0:00] ## LVMCONF:     retry_deactivation = 1
| [ 0:00] ## LVMCONF:     snapshot_autoextend_percent = 50
| [ 0:00] ## LVMCONF:     snapshot_autoextend_threshold = 50
| [ 0:00] ## LVMCONF:     udev_rules = 1
| [ 0:00] ## LVMCONF:     udev_sync = 1
| [ 0:00] ## LVMCONF:     verify_udev_operations = 1
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: allocation {
| [ 0:00] ## LVMCONF:     wipe_signatures_when_zeroing_new_lvs = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: backup {
| [ 0:00] ## LVMCONF:     archive = 0
| [ 0:00] ## LVMCONF:     backup = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: devices {
| [ 0:00] ## LVMCONF:     cache_dir = "@TESTDIR@/etc"
| [ 0:00] ## LVMCONF:     default_data_alignment = 1
| [ 0:00] ## LVMCONF:     dir = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     filter = "a|.*|"
| [ 0:00] ## LVMCONF:     global_filter = [ "a|@TESTDIR@/dev/mapper/@PREFIX@.*pv[0-9_]*$|", "r|.*|" ]
| [ 0:00] ## LVMCONF:     md_component_detection  = 0
| [ 0:00] ## LVMCONF:     scan = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     sysfs_scan = 1
| [ 0:00] ## LVMCONF:     write_cache_state = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: dmeventd {
| [ 0:00] ## LVMCONF:     executable = "/sources/boot/LVM2.2.02.177/test/lib/dmeventd"
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: global {
| [ 0:00] ## LVMCONF:     abort_on_internal_errors = 1
| [ 0:00] ## LVMCONF:     cache_check_executable = "/usr/sbin/cache_check"
| [ 0:00] ## LVMCONF:     cache_dump_executable = "/usr/sbin/cache_dump"
| [ 0:00] ## LVMCONF:     cache_repair_executable = "/usr/sbin/cache_repair"
| [ 0:00] ## LVMCONF:     detect_internal_vg_cache_corruption = 1
| [ 0:00] ## LVMCONF:     fallback_to_local_locking = 0
| [ 0:00] ## LVMCONF:     fsadm_executable = "/sources/boot/LVM2.2.02.177/test/lib/fsadm"
| [ 0:00] ## LVMCONF:     library_dir = "@TESTDIR@/lib"
| [ 0:00] ## LVMCONF:     locking_dir = "@TESTDIR@/var/lock/lvm"
| [ 0:00] ## LVMCONF:     locking_type=1
| [ 0:00] ## LVMCONF:     notify_dbus = 0
| [ 0:00] ## LVMCONF:     si_unit_consistency = 1
| [ 0:00] ## LVMCONF:     thin_check_executable = "/usr/sbin/thin_check"
| [ 0:00] ## LVMCONF:     thin_dump_executable = "/usr/sbin/thin_dump"
| [ 0:00] ## LVMCONF:     thin_repair_executable = "/usr/sbin/thin_repair"
| [ 0:00] ## LVMCONF:     use_lvmetad = 0
| [ 0:00] ## LVMCONF:     use_lvmlockd = 0
| [ 0:00] ## LVMCONF:     use_lvmpolld = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: log {
| [ 0:00] ## LVMCONF:     activation = 1
| [ 0:00] ## LVMCONF:     file = "@TESTDIR@/debug.log"
| [ 0:00] ## LVMCONF:     indent = 1
| [ 0:00] ## LVMCONF:     level = 9
| [ 0:00] ## LVMCONF:     overwrite = 1
| [ 0:00] ## LVMCONF:     syslog = 0
| [ 0:00] ## LVMCONF:     verbose = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] <======== Processing test: "lvtest.sh" ========>
| [ 0:00] 
| [ 0:00] aux prepare_vg 1
| [ 0:00] #lvtest.sh:18+ aux prepare_vg 1
| [ 0:00] ## preparing loop device....ok (/dev/loop0)
| [ 0:00] ## preparing 1 devices...lib/utils: line 212: DM_UDEV_COOKIE: unbound variable
| [ 0:00] set +vx; STACKTRACE; set -vx
| [ 0:00] ##lvtest.sh:18+ set +vx
| [ 0:00] ## - /lfskernel/sources/boot/LVM2.2.02.177/test/api/lvtest.sh:18
| [ 0:00] ## 1 STACKTRACE() called from /lfskernel/sources/boot/LVM2.2.02.177/test/api/lvtest.sh:18
| [ 0:00] <======== Info ========>
| [ 0:00] ## DMINFO:   Name             Maj Min Stat Open Targ Event  UUID                                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv1  253   3 L--w    0    1      0 TEST-@PREFIX@pv1                                                
| [ 0:00] <======== Active table ========>
| [ 0:00] ## DMTABLE:  @PREFIX@pv1: 0 69632 linear 7:0 2048
| [ 0:00] <======== Inactive table ========>
| [ 0:00] ## DMITABLE: @PREFIX@pv1: 
| [ 0:00] <======== Status ========>
| [ 0:00] ## DMSTATUS: @PREFIX@pv1: 0 69632 linear 
| [ 0:00] <======== Tree ========>
| [ 0:00] ## DMTREE:   @PREFIX@pv1 (253:3)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   LFS_vg-lfs (253:2)
| [ 0:00] ## DMTREE:    `- (8:16)
| [ 0:00] ## DMTREE:   centos-swap (253:1)
| [ 0:00] ## DMTREE:    `- (8:2)
| [ 0:00] ## DMTREE:   centos-root (253:0)
| [ 0:00] ## DMTREE:    `- (8:2)
| [ 0:00] <======== Recursive list of @TESTDIR@/dev ========>
| [ 0:00] ## LSLR:	@TESTDIR@/dev:
| [ 0:00] ## LSLR:	total 4
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 0 Feb 21 02:26 loop0
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 1 Feb 21 02:26 loop1
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 2 Feb 21 02:26 loop2
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 3 Feb 21 02:26 loop3
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 4 Feb 21 02:26 loop4
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 5 Feb 21 02:26 loop5
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 6 Feb 21 02:26 loop6
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 7 Feb 21 02:26 loop7
| [ 0:00] ## LSLR:	drwxr-xr-x 2 root root 4096 Feb 21 02:26 mapper
| [ 0:00] ## LSLR:	crw-r--r-- 1 root root 1, 3 Feb 21 02:26 testnull
| [ 0:00] ## LSLR:	
| [ 0:00] ## LSLR:	@TESTDIR@/dev/mapper:
| [ 0:00] ## LSLR:	total 0
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   3 Feb 21 02:26 @PREFIX@pv1
| [ 0:00] ## LSLR:	crw------- 1 root root  10, 236 Feb 21 02:26 control
| [ 0:00] <======== Udev DB content ========>
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-0
| [ 0:00] ## UDEV:	N: dm-0
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-0
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-0
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=0
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-1
| [ 0:00] ## UDEV:	N: dm-1
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-1
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-1
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=1
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-2
| [ 0:00] ## UDEV:	N: dm-2
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-2
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-2
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=2
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-3
| [ 0:00] ## UDEV:	N: dm-3
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-3
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-3
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=3
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/loop0
| [ 0:00] ## UDEV:	N: loop0
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/loop0
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/loop0
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=7
| [ 0:00] ## UDEV:	E: MINOR=0
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] <======== Script file "lvtest.sh" ========>
| [ 0:00] ## Line: 1 	 #!/bin/sh
| [ 0:00] ## Line: 2 	 # Copyright (C) 2011 Red Hat, Inc. All rights reserved.
| [ 0:00] ## Line: 3 	 #
| [ 0:00] ## Line: 4 	 # This file is part of LVM2.
| [ 0:00] ## Line: 5 	 #
| [ 0:00] ## Line: 6 	 # This copyrighted material is made available to anyone wishing to use,
| [ 0:00] ## Line: 7 	 # modify, copy, or redistribute it subject to the terms and conditions
| [ 0:00] ## Line: 8 	 # of the GNU General Public License v.2.
| [ 0:00] ## Line: 9 	 #
| [ 0:00] ## Line: 10 	 # You should have received a copy of the GNU General Public License
| [ 0:00] ## Line: 11 	 # along with this program; if not, write to the Free Software Foundation,
| [ 0:00] ## Line: 12 	 # Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA
| [ 0:00] ## Line: 13 	 
| [ 0:00] ## Line: 14 	 SKIP_WITH_LVMPOLLD=1
| [ 0:00] ## Line: 15 	 
| [ 0:00] ## Line: 16 	 . lib/inittest
| [ 0:00] ## Line: 17 	 
| [ 0:00] ## Line: 18 	 aux prepare_vg 1
| [ 0:00] ## Line: 19 	 
| [ 0:00] ## Line: 20 	 lvcreate -n test -l 5 $vg
| [ 0:00] ## Line: 21 	 aux apitest lvtest $vg
| [ 0:00] ## Line: 22 	 
| [ 0:00] ## Line: 23 	 check lv_field $vg/test lv_name test
| [ 0:00] ## Line: 24 	 
| [ 0:00] ## Line: 25 	 vgremove -ff $vg
| [ 0:00] aux teardown
| [ 0:00] #lvtest.sh:1+ aux teardown
| [ 0:00] ## teardown.........ok
###       failed: [ndev-vanilla] api/lvtest.sh

| [ 0:00] Library version:   1.02.146 (2017-12-18)
| [ 0:00] Driver version:    4.35.0
| [ 0:00] Kernel is Linux localhost.localdomain 3.10.0-693.11.1.el7.x86_64 #1 SMP Mon Dec 4 23:52:40 UTC 2017 x86_64 GNU/Linux
| [ 0:00] Selinux mode is not installed.
| [ 0:00]               total        used        free      shared  buff/cache   available
| [ 0:00] Mem:           7822        1075        4158          10        2589        6440
| [ 0:00] Swap:          4095           0        4095
| [ 0:00] Filesystem      Size  Used Avail Use% Mounted on
| [ 0:00] /dev/sdc1        18G  8.4G  8.4G  50% /
| [ 0:00] /dev/sdd1        51G  6.1G   43G  13% /lfskernel
| [ 0:00] devtmpfs        3.9G     0  3.9G   0% /dev
| [ 0:00] tmpfs           3.9G     0  3.9G   0% /run
| [ 0:00] @TESTDIR=/tmp/LVMTEST23043.NyjkOJISEP
| [ 0:00] @PREFIX=LVMTEST23043
| [ 0:00] ## LVMCONF: activation {
| [ 0:00] ## LVMCONF:     checks = 1
| [ 0:00] ## LVMCONF:     monitoring = 0
| [ 0:00] ## LVMCONF:     polling_interval = 1
| [ 0:00] ## LVMCONF:     raid_region_size = 512
| [ 0:00] ## LVMCONF:     retry_deactivation = 1
| [ 0:00] ## LVMCONF:     snapshot_autoextend_percent = 50
| [ 0:00] ## LVMCONF:     snapshot_autoextend_threshold = 50
| [ 0:00] ## LVMCONF:     udev_rules = 1
| [ 0:00] ## LVMCONF:     udev_sync = 1
| [ 0:00] ## LVMCONF:     verify_udev_operations = 1
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: allocation {
| [ 0:00] ## LVMCONF:     wipe_signatures_when_zeroing_new_lvs = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: backup {
| [ 0:00] ## LVMCONF:     archive = 0
| [ 0:00] ## LVMCONF:     backup = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: devices {
| [ 0:00] ## LVMCONF:     cache_dir = "@TESTDIR@/etc"
| [ 0:00] ## LVMCONF:     default_data_alignment = 1
| [ 0:00] ## LVMCONF:     dir = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     filter = "a|.*|"
| [ 0:00] ## LVMCONF:     global_filter = [ "a|@TESTDIR@/dev/mapper/@PREFIX@.*pv[0-9_]*$|", "r|.*|" ]
| [ 0:00] ## LVMCONF:     md_component_detection  = 0
| [ 0:00] ## LVMCONF:     scan = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     sysfs_scan = 1
| [ 0:00] ## LVMCONF:     write_cache_state = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: dmeventd {
| [ 0:00] ## LVMCONF:     executable = "/sources/boot/LVM2.2.02.177/test/lib/dmeventd"
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: global {
| [ 0:00] ## LVMCONF:     abort_on_internal_errors = 1
| [ 0:00] ## LVMCONF:     cache_check_executable = "/usr/sbin/cache_check"
| [ 0:00] ## LVMCONF:     cache_dump_executable = "/usr/sbin/cache_dump"
| [ 0:00] ## LVMCONF:     cache_repair_executable = "/usr/sbin/cache_repair"
| [ 0:00] ## LVMCONF:     detect_internal_vg_cache_corruption = 1
| [ 0:00] ## LVMCONF:     fallback_to_local_locking = 0
| [ 0:00] ## LVMCONF:     fsadm_executable = "/sources/boot/LVM2.2.02.177/test/lib/fsadm"
| [ 0:00] ## LVMCONF:     library_dir = "@TESTDIR@/lib"
| [ 0:00] ## LVMCONF:     locking_dir = "@TESTDIR@/var/lock/lvm"
| [ 0:00] ## LVMCONF:     locking_type=1
| [ 0:00] ## LVMCONF:     notify_dbus = 0
| [ 0:00] ## LVMCONF:     si_unit_consistency = 1
| [ 0:00] ## LVMCONF:     thin_check_executable = "/usr/sbin/thin_check"
| [ 0:00] ## LVMCONF:     thin_dump_executable = "/usr/sbin/thin_dump"
| [ 0:00] ## LVMCONF:     thin_repair_executable = "/usr/sbin/thin_repair"
| [ 0:00] ## LVMCONF:     use_lvmetad = 0
| [ 0:00] ## LVMCONF:     use_lvmlockd = 0
| [ 0:00] ## LVMCONF:     use_lvmpolld = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: log {
| [ 0:00] ## LVMCONF:     activation = 1
| [ 0:00] ## LVMCONF:     file = "@TESTDIR@/debug.log"
| [ 0:00] ## LVMCONF:     indent = 1
| [ 0:00] ## LVMCONF:     level = 9
| [ 0:00] ## LVMCONF:     overwrite = 1
| [ 0:00] ## LVMCONF:     syslog = 0
| [ 0:00] ## LVMCONF:     verbose = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] <======== Processing test: "pe_start.sh" ========>
| [ 0:00] 
| [ 0:00] aux prepare_devs 2
| [ 0:00] #pe_start.sh:18+ aux prepare_devs 2
| [ 0:00] ## preparing loop device....ok (/dev/loop0)
| [ 0:00] ## preparing 2 devices...lib/utils: line 212: DM_UDEV_COOKIE: unbound variable
| [ 0:00] set +vx; STACKTRACE; set -vx
| [ 0:00] ##pe_start.sh:18+ set +vx
| [ 0:00] ## - /lfskernel/sources/boot/LVM2.2.02.177/test/api/pe_start.sh:18
| [ 0:00] ## 1 STACKTRACE() called from /lfskernel/sources/boot/LVM2.2.02.177/test/api/pe_start.sh:18
| [ 0:00] <======== Info ========>
| [ 0:00] ## DMINFO:   Name             Maj Min Stat Open Targ Event  UUID                                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv2  253   4 L--w    0    1      0 TEST-@PREFIX@pv2                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv1  253   3 L--w    0    1      0 TEST-@PREFIX@pv1                                                
| [ 0:00] <======== Active table ========>
| [ 0:00] ## DMTABLE:  @PREFIX@pv2: 0 69632 linear 7:0 71680
| [ 0:00] ## DMTABLE:  @PREFIX@pv1: 0 69632 linear 7:0 2048
| [ 0:00] <======== Inactive table ========>
| [ 0:00] ## DMITABLE: @PREFIX@pv2: 
| [ 0:00] ## DMITABLE: @PREFIX@pv1: 
| [ 0:00] <======== Status ========>
| [ 0:00] ## DMSTATUS: @PREFIX@pv2: 0 69632 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv1: 0 69632 linear 
| [ 0:00] <======== Tree ========>
| [ 0:00] ## DMTREE:   @PREFIX@pv2 (253:4)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   LFS_vg-lfs (253:2)
| [ 0:00] ## DMTREE:    `- (8:16)
| [ 0:00] ## DMTREE:   centos-swap (253:1)
| [ 0:00] ## DMTREE:    `- (8:2)
| [ 0:00] ## DMTREE:   centos-root (253:0)
| [ 0:00] ## DMTREE:    `- (8:2)
| [ 0:00] ## DMTREE:   @PREFIX@pv1 (253:3)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] <======== Recursive list of @TESTDIR@/dev ========>
| [ 0:00] ## LSLR:	@TESTDIR@/dev:
| [ 0:00] ## LSLR:	total 4
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 0 Feb 21 02:26 loop0
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 1 Feb 21 02:26 loop1
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 2 Feb 21 02:26 loop2
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 3 Feb 21 02:26 loop3
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 4 Feb 21 02:26 loop4
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 5 Feb 21 02:26 loop5
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 6 Feb 21 02:26 loop6
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 7 Feb 21 02:26 loop7
| [ 0:00] ## LSLR:	drwxr-xr-x 2 root root 4096 Feb 21 02:26 mapper
| [ 0:00] ## LSLR:	crw-r--r-- 1 root root 1, 3 Feb 21 02:26 testnull
| [ 0:00] ## LSLR:	
| [ 0:00] ## LSLR:	@TESTDIR@/dev/mapper:
| [ 0:00] ## LSLR:	total 0
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   3 Feb 21 02:26 @PREFIX@pv1
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   4 Feb 21 02:26 @PREFIX@pv2
| [ 0:00] ## LSLR:	crw------- 1 root root  10, 236 Feb 21 02:26 control
| [ 0:00] <======== Udev DB content ========>
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-0
| [ 0:00] ## UDEV:	N: dm-0
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-0
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-0
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=0
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-1
| [ 0:00] ## UDEV:	N: dm-1
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-1
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-1
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=1
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-2
| [ 0:00] ## UDEV:	N: dm-2
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-2
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-2
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=2
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-3
| [ 0:00] ## UDEV:	N: dm-3
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-3
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-3
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=3
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-4
| [ 0:00] ## UDEV:	N: dm-4
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-4
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-4
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=4
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/loop0
| [ 0:00] ## UDEV:	N: loop0
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/loop0
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/loop0
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=7
| [ 0:00] ## UDEV:	E: MINOR=0
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] <======== Script file "pe_start.sh" ========>
| [ 0:00] ## Line: 1 	 #!/bin/sh
| [ 0:00] ## Line: 2 	 # Copyright (C) 2011 Red Hat, Inc. All rights reserved.
| [ 0:00] ## Line: 3 	 #
| [ 0:00] ## Line: 4 	 # This file is part of LVM2.
| [ 0:00] ## Line: 5 	 #
| [ 0:00] ## Line: 6 	 # This copyrighted material is made available to anyone wishing to use,
| [ 0:00] ## Line: 7 	 # modify, copy, or redistribute it subject to the terms and conditions
| [ 0:00] ## Line: 8 	 # of the GNU General Public License v.2.
| [ 0:00] ## Line: 9 	 #
| [ 0:00] ## Line: 10 	 # You should have received a copy of the GNU General Public License
| [ 0:00] ## Line: 11 	 # along with this program; if not, write to the Free Software Foundation,
| [ 0:00] ## Line: 12 	 # Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA
| [ 0:00] ## Line: 13 	 
| [ 0:00] ## Line: 14 	 SKIP_WITH_LVMPOLLD=1
| [ 0:00] ## Line: 15 	 
| [ 0:00] ## Line: 16 	 . lib/inittest
| [ 0:00] ## Line: 17 	 
| [ 0:00] ## Line: 18 	 aux prepare_devs 2
| [ 0:00] ## Line: 19 	 
| [ 0:00] ## Line: 20 	 aux apitest pe_start test_vg $dev1
| [ 0:00] ## Line: 21 	 
| [ 0:00] ## Line: 22 	 not vgs test_vg
| [ 0:00] ## Line: 23 	 not pvs $dev1
| [ 0:00] aux teardown
| [ 0:00] #pe_start.sh:1+ aux teardown
| [ 0:00] ## teardown.........ok
###       failed: [ndev-vanilla] api/pe_start.sh

| [ 0:00] Library version:   1.02.146 (2017-12-18)
| [ 0:00] Driver version:    4.35.0
| [ 0:00] Kernel is Linux localhost.localdomain 3.10.0-693.11.1.el7.x86_64 #1 SMP Mon Dec 4 23:52:40 UTC 2017 x86_64 GNU/Linux
| [ 0:00] Selinux mode is not installed.
| [ 0:00]               total        used        free      shared  buff/cache   available
| [ 0:00] Mem:           7822        1075        4158          10        2589        6440
| [ 0:00] Swap:          4095           0        4095
| [ 0:00] Filesystem      Size  Used Avail Use% Mounted on
| [ 0:00] /dev/sdc1        18G  8.4G  8.4G  50% /
| [ 0:00] /dev/sdd1        51G  6.1G   43G  13% /lfskernel
| [ 0:00] devtmpfs        3.9G     0  3.9G   0% /dev
| [ 0:00] tmpfs           3.9G     0  3.9G   0% /run
| [ 0:00] @TESTDIR=/tmp/LVMTEST23211.8NnZFbyv0a
| [ 0:00] @PREFIX=LVMTEST23211
| [ 0:00] ## LVMCONF: activation {
| [ 0:01] ## LVMCONF:     checks = 1
| [ 0:01] ## LVMCONF:     monitoring = 0
| [ 0:01] ## LVMCONF:     polling_interval = 1
| [ 0:01] ## LVMCONF:     raid_region_size = 512
| [ 0:01] ## LVMCONF:     retry_deactivation = 1
| [ 0:01] ## LVMCONF:     snapshot_autoextend_percent = 50
| [ 0:01] ## LVMCONF:     snapshot_autoextend_threshold = 50
| [ 0:01] ## LVMCONF:     udev_rules = 1
| [ 0:01] ## LVMCONF:     udev_sync = 1
| [ 0:01] ## LVMCONF:     verify_udev_operations = 1
| [ 0:01] ## LVMCONF: }
| [ 0:01] ## LVMCONF: allocation {
| [ 0:01] ## LVMCONF:     wipe_signatures_when_zeroing_new_lvs = 0
| [ 0:01] ## LVMCONF: }
| [ 0:01] ## LVMCONF: backup {
| [ 0:01] ## LVMCONF:     archive = 0
| [ 0:01] ## LVMCONF:     backup = 0
| [ 0:01] ## LVMCONF: }
| [ 0:01] ## LVMCONF: devices {
| [ 0:01] ## LVMCONF:     cache_dir = "@TESTDIR@/etc"
| [ 0:01] ## LVMCONF:     default_data_alignment = 1
| [ 0:01] ## LVMCONF:     dir = "@TESTDIR@/dev"
| [ 0:01] ## LVMCONF:     filter = "a|.*|"
| [ 0:01] ## LVMCONF:     global_filter = [ "a|@TESTDIR@/dev/mapper/@PREFIX@.*pv[0-9_]*$|", "r|.*|" ]
| [ 0:01] ## LVMCONF:     md_component_detection  = 0
| [ 0:01] ## LVMCONF:     scan = "@TESTDIR@/dev"
| [ 0:01] ## LVMCONF:     sysfs_scan = 1
| [ 0:01] ## LVMCONF:     write_cache_state = 0
| [ 0:01] ## LVMCONF: }
| [ 0:01] ## LVMCONF: dmeventd {
| [ 0:01] ## LVMCONF:     executable = "/sources/boot/LVM2.2.02.177/test/lib/dmeventd"
| [ 0:01] ## LVMCONF: }
| [ 0:01] ## LVMCONF: global {
| [ 0:01] ## LVMCONF:     abort_on_internal_errors = 1
| [ 0:01] ## LVMCONF:     cache_check_executable = "/usr/sbin/cache_check"
| [ 0:01] ## LVMCONF:     cache_dump_executable = "/usr/sbin/cache_dump"
| [ 0:01] ## LVMCONF:     cache_repair_executable = "/usr/sbin/cache_repair"
| [ 0:01] ## LVMCONF:     detect_internal_vg_cache_corruption = 1
| [ 0:01] ## LVMCONF:     fallback_to_local_locking = 0
| [ 0:01] ## LVMCONF:     fsadm_executable = "/sources/boot/LVM2.2.02.177/test/lib/fsadm"
| [ 0:01] ## LVMCONF:     library_dir = "@TESTDIR@/lib"
| [ 0:01] ## LVMCONF:     locking_dir = "@TESTDIR@/var/lock/lvm"
| [ 0:01] ## LVMCONF:     locking_type=1
| [ 0:01] ## LVMCONF:     notify_dbus = 0
| [ 0:01] ## LVMCONF:     si_unit_consistency = 1
| [ 0:01] ## LVMCONF:     thin_check_executable = "/usr/sbin/thin_check"
| [ 0:01] ## LVMCONF:     thin_dump_executable = "/usr/sbin/thin_dump"
| [ 0:01] ## LVMCONF:     thin_repair_executable = "/usr/sbin/thin_repair"
| [ 0:01] ## LVMCONF:     use_lvmetad = 0
| [ 0:01] ## LVMCONF:     use_lvmlockd = 0
| [ 0:01] ## LVMCONF:     use_lvmpolld = 0
| [ 0:01] ## LVMCONF: }
| [ 0:01] ## LVMCONF: log {
| [ 0:01] ## LVMCONF:     activation = 1
| [ 0:01] ## LVMCONF:     file = "@TESTDIR@/debug.log"
| [ 0:01] ## LVMCONF:     indent = 1
| [ 0:01] ## LVMCONF:     level = 9
| [ 0:01] ## LVMCONF:     overwrite = 1
| [ 0:01] ## LVMCONF:     syslog = 0
| [ 0:01] ## LVMCONF:     verbose = 0
| [ 0:01] ## LVMCONF: }
| [ 0:01] <======== Processing test: "percent.sh" ========>
| [ 0:01] 
| [ 0:01] aux kernel_at_least 2 6 33 || skip
| [ 0:01] #percent.sh:18+ aux kernel_at_least 2 6 33
| [ 0:01] 
| [ 0:01] aux prepare_pvs 2
| [ 0:01] #percent.sh:20+ aux prepare_pvs 2
| [ 0:01] ## preparing loop device....ok (/dev/loop0)
| [ 0:01] ## preparing 2 devices...lib/utils: line 212: DM_UDEV_COOKIE: unbound variable
| [ 0:01] set +vx; STACKTRACE; set -vx
| [ 0:01] ##percent.sh:20+ set +vx
| [ 0:01] ## - /lfskernel/sources/boot/LVM2.2.02.177/test/api/percent.sh:20
| [ 0:01] ## 1 STACKTRACE() called from /lfskernel/sources/boot/LVM2.2.02.177/test/api/percent.sh:20
| [ 0:01] <======== Info ========>
| [ 0:01] ## DMINFO:   Name             Maj Min Stat Open Targ Event  UUID                                                                
| [ 0:01] ## DMINFO:   @PREFIX@pv2  253   4 L--w    0    1      0 TEST-@PREFIX@pv2                                                
| [ 0:01] ## DMINFO:   @PREFIX@pv1  253   3 L--w    0    1      0 TEST-@PREFIX@pv1                                                
| [ 0:01] <======== Active table ========>
| [ 0:01] ## DMTABLE:  @PREFIX@pv2: 0 69632 linear 7:0 71680
| [ 0:01] ## DMTABLE:  @PREFIX@pv1: 0 69632 linear 7:0 2048
| [ 0:01] <======== Inactive table ========>
| [ 0:01] ## DMITABLE: @PREFIX@pv2: 
| [ 0:01] ## DMITABLE: @PREFIX@pv1: 
| [ 0:01] <======== Status ========>
| [ 0:01] ## DMSTATUS: @PREFIX@pv2: 0 69632 linear 
| [ 0:01] ## DMSTATUS: @PREFIX@pv1: 0 69632 linear 
| [ 0:01] <======== Tree ========>
| [ 0:01] ## DMTREE:   @PREFIX@pv2 (253:4)
| [ 0:01] ## DMTREE:    `- (7:0)
| [ 0:01] ## DMTREE:   @PREFIX@pv1 (253:3)
| [ 0:01] ## DMTREE:    `- (7:0)
| [ 0:01] ## DMTREE:   LFS_vg-lfs (253:2)
| [ 0:01] ## DMTREE:    `- (8:16)
| [ 0:01] ## DMTREE:   centos-swap (253:1)
| [ 0:01] ## DMTREE:    `- (8:2)
| [ 0:01] ## DMTREE:   centos-root (253:0)
| [ 0:01] ## DMTREE:    `- (8:2)
| [ 0:01] <======== Recursive list of @TESTDIR@/dev ========>
| [ 0:01] ## LSLR:	@TESTDIR@/dev:
| [ 0:01] ## LSLR:	total 4
| [ 0:01] ## LSLR:	brw-r--r-- 1 root root 7, 0 Feb 21 02:26 loop0
| [ 0:01] ## LSLR:	brw-r--r-- 1 root root 7, 1 Feb 21 02:26 loop1
| [ 0:01] ## LSLR:	brw-r--r-- 1 root root 7, 2 Feb 21 02:26 loop2
| [ 0:01] ## LSLR:	brw-r--r-- 1 root root 7, 3 Feb 21 02:26 loop3
| [ 0:01] ## LSLR:	brw-r--r-- 1 root root 7, 4 Feb 21 02:26 loop4
| [ 0:01] ## LSLR:	brw-r--r-- 1 root root 7, 5 Feb 21 02:26 loop5
| [ 0:01] ## LSLR:	brw-r--r-- 1 root root 7, 6 Feb 21 02:26 loop6
| [ 0:01] ## LSLR:	brw-r--r-- 1 root root 7, 7 Feb 21 02:26 loop7
| [ 0:01] ## LSLR:	drwxr-xr-x 2 root root 4096 Feb 21 02:26 mapper
| [ 0:01] ## LSLR:	crw-r--r-- 1 root root 1, 3 Feb 21 02:26 testnull
| [ 0:01] ## LSLR:	
| [ 0:01] ## LSLR:	@TESTDIR@/dev/mapper:
| [ 0:01] ## LSLR:	total 0
| [ 0:01] ## LSLR:	brw------- 1 root root 253,   3 Feb 21 02:26 @PREFIX@pv1
| [ 0:01] ## LSLR:	brw------- 1 root root 253,   4 Feb 21 02:26 @PREFIX@pv2
| [ 0:01] ## LSLR:	crw------- 1 root root  10, 236 Feb 21 02:26 control
| [ 0:01] <======== Udev DB content ========>
| [ 0:01] ## UDEV:	P: /devices/virtual/block/dm-0
| [ 0:01] ## UDEV:	N: dm-0
| [ 0:01] ## UDEV:	E: DEVNAME=/dev/dm-0
| [ 0:01] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-0
| [ 0:01] ## UDEV:	E: DEVTYPE=disk
| [ 0:01] ## UDEV:	E: MAJOR=253
| [ 0:01] ## UDEV:	E: MINOR=0
| [ 0:01] ## UDEV:	E: SUBSYSTEM=block
| [ 0:01] ## UDEV:	
| [ 0:01] ## UDEV:	P: /devices/virtual/block/dm-1
| [ 0:01] ## UDEV:	N: dm-1
| [ 0:01] ## UDEV:	E: DEVNAME=/dev/dm-1
| [ 0:01] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-1
| [ 0:01] ## UDEV:	E: DEVTYPE=disk
| [ 0:01] ## UDEV:	E: MAJOR=253
| [ 0:01] ## UDEV:	E: MINOR=1
| [ 0:01] ## UDEV:	E: SUBSYSTEM=block
| [ 0:01] ## UDEV:	
| [ 0:01] ## UDEV:	P: /devices/virtual/block/dm-2
| [ 0:01] ## UDEV:	N: dm-2
| [ 0:01] ## UDEV:	E: DEVNAME=/dev/dm-2
| [ 0:01] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-2
| [ 0:01] ## UDEV:	E: DEVTYPE=disk
| [ 0:01] ## UDEV:	E: MAJOR=253
| [ 0:01] ## UDEV:	E: MINOR=2
| [ 0:01] ## UDEV:	E: SUBSYSTEM=block
| [ 0:01] ## UDEV:	
| [ 0:01] ## UDEV:	P: /devices/virtual/block/dm-3
| [ 0:01] ## UDEV:	N: dm-3
| [ 0:01] ## UDEV:	E: DEVNAME=/dev/dm-3
| [ 0:01] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-3
| [ 0:01] ## UDEV:	E: DEVTYPE=disk
| [ 0:01] ## UDEV:	E: MAJOR=253
| [ 0:01] ## UDEV:	E: MINOR=3
| [ 0:01] ## UDEV:	E: SUBSYSTEM=block
| [ 0:01] ## UDEV:	
| [ 0:01] ## UDEV:	P: /devices/virtual/block/dm-4
| [ 0:01] ## UDEV:	N: dm-4
| [ 0:01] ## UDEV:	E: DEVNAME=/dev/dm-4
| [ 0:01] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-4
| [ 0:01] ## UDEV:	E: DEVTYPE=disk
| [ 0:01] ## UDEV:	E: MAJOR=253
| [ 0:01] ## UDEV:	E: MINOR=4
| [ 0:01] ## UDEV:	E: SUBSYSTEM=block
| [ 0:01] ## UDEV:	
| [ 0:01] ## UDEV:	P: /devices/virtual/block/loop0
| [ 0:01] ## UDEV:	N: loop0
| [ 0:01] ## UDEV:	E: DEVNAME=/dev/loop0
| [ 0:01] ## UDEV:	E: DEVPATH=/devices/virtual/block/loop0
| [ 0:01] ## UDEV:	E: DEVTYPE=disk
| [ 0:01] ## UDEV:	E: MAJOR=7
| [ 0:01] ## UDEV:	E: MINOR=0
| [ 0:01] ## UDEV:	E: SUBSYSTEM=block
| [ 0:01] ## UDEV:	
| [ 0:01] <======== Script file "percent.sh" ========>
| [ 0:01] ## Line: 1 	 #!/bin/sh
| [ 0:01] ## Line: 2 	 # Copyright (C) 2010-2013 Red Hat, Inc. All rights reserved.
| [ 0:01] ## Line: 3 	 #
| [ 0:01] ## Line: 4 	 # This file is part of LVM2.
| [ 0:01] ## Line: 5 	 #
| [ 0:01] ## Line: 6 	 # This copyrighted material is made available to anyone wishing to use,
| [ 0:01] ## Line: 7 	 # modify, copy, or redistribute it subject to the terms and conditions
| [ 0:01] ## Line: 8 	 # of the GNU General Public License v.2.
| [ 0:01] ## Line: 9 	 #
| [ 0:01] ## Line: 10 	 # You should have received a copy of the GNU General Public License
| [ 0:01] ## Line: 11 	 # along with this program; if not, write to the Free Software Foundation,
| [ 0:01] ## Line: 12 	 # Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA
| [ 0:01] ## Line: 13 	 
| [ 0:01] ## Line: 14 	 SKIP_WITH_LVMPOLLD=1
| [ 0:01] ## Line: 15 	 
| [ 0:01] ## Line: 16 	 . lib/inittest
| [ 0:01] ## Line: 17 	 
| [ 0:01] ## Line: 18 	 aux kernel_at_least 2 6 33 || skip
| [ 0:01] ## Line: 19 	 
| [ 0:01] ## Line: 20 	 aux prepare_pvs 2
| [ 0:01] ## Line: 21 	 get_devs
| [ 0:01] ## Line: 22 	 
| [ 0:01] ## Line: 23 	 vgcreate -s 4k "$vg" "${DEVICES[@]}"
| [ 0:01] ## Line: 24 	 lvcreate -aey -l 5 -n foo $vg
| [ 0:01] ## Line: 25 	 lvcreate -s -n snap $vg/foo -l 3 -c 4k
| [ 0:01] ## Line: 26 	 lvcreate -s -n snap2 $vg/foo -l 6 -c 4k
| [ 0:01] ## Line: 27 	 dd if=/dev/zero of="$DM_DEV_DIR/$vg/snap2" count=1 bs=1024 oflag=direct
| [ 0:01] ## Line: 28 	 # skip test with broken kernel
| [ 0:01] ## Line: 29 	 check lv_field $vg/snap2 data_percent "50.00" || skip
| [ 0:01] ## Line: 30 	 lvcreate -aey --type mirror -m 1 -n mirr $vg -l 1 --mirrorlog core
| [ 0:01] ## Line: 31 	 lvs -a $vg
| [ 0:01] ## Line: 32 	 aux apitest percent $vg
| [ 0:01] ## Line: 33 	 
| [ 0:01] ## Line: 34 	 vgremove -ff $vg
| [ 0:01] aux teardown
| [ 0:01] #percent.sh:1+ aux teardown
| [ 0:01] ## teardown.........ok
###       failed: [ndev-vanilla] api/percent.sh
###      skipped: [ndev-vanilla] api/pytest.sh
###      skipped: [ndev-vanilla] api/thin_percent.sh

| [ 0:00] Library version:   1.02.146 (2017-12-18)
| [ 0:00] Driver version:    4.35.0
| [ 0:00] Kernel is Linux localhost.localdomain 3.10.0-693.11.1.el7.x86_64 #1 SMP Mon Dec 4 23:52:40 UTC 2017 x86_64 GNU/Linux
| [ 0:00] Selinux mode is not installed.
| [ 0:00]               total        used        free      shared  buff/cache   available
| [ 0:00] Mem:           7822        1075        4158          10        2589        6440
| [ 0:00] Swap:          4095           0        4095
| [ 0:00] Filesystem      Size  Used Avail Use% Mounted on
| [ 0:00] /dev/sdc1        18G  8.4G  8.4G  50% /
| [ 0:00] /dev/sdd1        51G  6.1G   43G  13% /lfskernel
| [ 0:00] devtmpfs        3.9G     0  3.9G   0% /dev
| [ 0:00] tmpfs           3.9G     0  3.9G   0% /run
| [ 0:00] @TESTDIR=/tmp/LVMTEST23522.muYgtwunPo
| [ 0:00] @PREFIX=LVMTEST23522
| [ 0:00] ## LVMCONF: activation {
| [ 0:00] ## LVMCONF:     checks = 1
| [ 0:00] ## LVMCONF:     monitoring = 0
| [ 0:00] ## LVMCONF:     polling_interval = 1
| [ 0:00] ## LVMCONF:     raid_region_size = 512
| [ 0:00] ## LVMCONF:     retry_deactivation = 1
| [ 0:00] ## LVMCONF:     snapshot_autoextend_percent = 50
| [ 0:00] ## LVMCONF:     snapshot_autoextend_threshold = 50
| [ 0:00] ## LVMCONF:     udev_rules = 1
| [ 0:00] ## LVMCONF:     udev_sync = 1
| [ 0:00] ## LVMCONF:     verify_udev_operations = 1
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: allocation {
| [ 0:00] ## LVMCONF:     wipe_signatures_when_zeroing_new_lvs = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: backup {
| [ 0:00] ## LVMCONF:     archive = 0
| [ 0:00] ## LVMCONF:     backup = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: devices {
| [ 0:00] ## LVMCONF:     cache_dir = "@TESTDIR@/etc"
| [ 0:00] ## LVMCONF:     default_data_alignment = 1
| [ 0:00] ## LVMCONF:     dir = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     filter = "a|.*|"
| [ 0:00] ## LVMCONF:     global_filter = [ "a|@TESTDIR@/dev/mapper/@PREFIX@.*pv[0-9_]*$|", "r|.*|" ]
| [ 0:00] ## LVMCONF:     md_component_detection  = 0
| [ 0:00] ## LVMCONF:     scan = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     sysfs_scan = 1
| [ 0:00] ## LVMCONF:     write_cache_state = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: dmeventd {
| [ 0:00] ## LVMCONF:     executable = "/sources/boot/LVM2.2.02.177/test/lib/dmeventd"
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: global {
| [ 0:00] ## LVMCONF:     abort_on_internal_errors = 1
| [ 0:00] ## LVMCONF:     cache_check_executable = "/usr/sbin/cache_check"
| [ 0:00] ## LVMCONF:     cache_dump_executable = "/usr/sbin/cache_dump"
| [ 0:00] ## LVMCONF:     cache_repair_executable = "/usr/sbin/cache_repair"
| [ 0:00] ## LVMCONF:     detect_internal_vg_cache_corruption = 1
| [ 0:00] ## LVMCONF:     fallback_to_local_locking = 0
| [ 0:00] ## LVMCONF:     fsadm_executable = "/sources/boot/LVM2.2.02.177/test/lib/fsadm"
| [ 0:00] ## LVMCONF:     library_dir = "@TESTDIR@/lib"
| [ 0:00] ## LVMCONF:     locking_dir = "@TESTDIR@/var/lock/lvm"
| [ 0:00] ## LVMCONF:     locking_type=1
| [ 0:00] ## LVMCONF:     notify_dbus = 0
| [ 0:00] ## LVMCONF:     si_unit_consistency = 1
| [ 0:00] ## LVMCONF:     thin_check_executable = "/usr/sbin/thin_check"
| [ 0:00] ## LVMCONF:     thin_dump_executable = "/usr/sbin/thin_dump"
| [ 0:00] ## LVMCONF:     thin_repair_executable = "/usr/sbin/thin_repair"
| [ 0:00] ## LVMCONF:     use_lvmetad = 0
| [ 0:00] ## LVMCONF:     use_lvmlockd = 0
| [ 0:00] ## LVMCONF:     use_lvmpolld = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: log {
| [ 0:00] ## LVMCONF:     activation = 1
| [ 0:00] ## LVMCONF:     file = "@TESTDIR@/debug.log"
| [ 0:00] ## LVMCONF:     indent = 1
| [ 0:00] ## LVMCONF:     level = 9
| [ 0:00] ## LVMCONF:     overwrite = 1
| [ 0:00] ## LVMCONF:     syslog = 0
| [ 0:00] ## LVMCONF:     verbose = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] <======== Processing test: "vglist.sh" ========>
| [ 0:00] 
| [ 0:00] aux prepare_vg 2
| [ 0:00] #vglist.sh:16+ aux prepare_vg 2
| [ 0:00] ## preparing loop device....ok (/dev/loop0)
| [ 0:00] ## preparing 2 devices...lib/utils: line 212: DM_UDEV_COOKIE: unbound variable
| [ 0:00] set +vx; STACKTRACE; set -vx
| [ 0:00] ##vglist.sh:16+ set +vx
| [ 0:00] ## - /lfskernel/sources/boot/LVM2.2.02.177/test/api/vglist.sh:16
| [ 0:00] ## 1 STACKTRACE() called from /lfskernel/sources/boot/LVM2.2.02.177/test/api/vglist.sh:16
| [ 0:00] <======== Info ========>
| [ 0:00] ## DMINFO:   Name             Maj Min Stat Open Targ Event  UUID                                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv2  253   4 L--w    0    1      0 TEST-@PREFIX@pv2                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv1  253   3 L--w    0    1      0 TEST-@PREFIX@pv1                                                
| [ 0:00] <======== Active table ========>
| [ 0:00] ## DMTABLE:  @PREFIX@pv2: 0 69632 linear 7:0 71680
| [ 0:00] ## DMTABLE:  @PREFIX@pv1: 0 69632 linear 7:0 2048
| [ 0:00] <======== Inactive table ========>
| [ 0:00] ## DMITABLE: @PREFIX@pv2: 
| [ 0:00] ## DMITABLE: @PREFIX@pv1: 
| [ 0:00] <======== Status ========>
| [ 0:00] ## DMSTATUS: @PREFIX@pv2: 0 69632 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv1: 0 69632 linear 
| [ 0:00] <======== Tree ========>
| [ 0:00] ## DMTREE:   @PREFIX@pv2 (253:4)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   @PREFIX@pv1 (253:3)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   LFS_vg-lfs (253:2)
| [ 0:00] ## DMTREE:    `- (8:16)
| [ 0:00] ## DMTREE:   centos-swap (253:1)
| [ 0:00] ## DMTREE:    `- (8:2)
| [ 0:00] ## DMTREE:   centos-root (253:0)
| [ 0:00] ## DMTREE:    `- (8:2)
| [ 0:00] <======== Recursive list of @TESTDIR@/dev ========>
| [ 0:00] ## LSLR:	@TESTDIR@/dev:
| [ 0:00] ## LSLR:	total 4
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 0 Feb 21 02:26 loop0
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 1 Feb 21 02:26 loop1
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 2 Feb 21 02:26 loop2
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 3 Feb 21 02:26 loop3
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 4 Feb 21 02:26 loop4
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 5 Feb 21 02:26 loop5
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 6 Feb 21 02:26 loop6
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 7 Feb 21 02:26 loop7
| [ 0:00] ## LSLR:	drwxr-xr-x 2 root root 4096 Feb 21 02:26 mapper
| [ 0:00] ## LSLR:	crw-r--r-- 1 root root 1, 3 Feb 21 02:26 testnull
| [ 0:00] ## LSLR:	
| [ 0:00] ## LSLR:	@TESTDIR@/dev/mapper:
| [ 0:00] ## LSLR:	total 0
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   3 Feb 21 02:26 @PREFIX@pv1
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   4 Feb 21 02:26 @PREFIX@pv2
| [ 0:00] ## LSLR:	crw------- 1 root root  10, 236 Feb 21 02:26 control
| [ 0:00] <======== Udev DB content ========>
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-0
| [ 0:00] ## UDEV:	N: dm-0
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-0
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-0
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=0
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-1
| [ 0:00] ## UDEV:	N: dm-1
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-1
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-1
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=1
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-2
| [ 0:00] ## UDEV:	N: dm-2
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-2
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-2
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=2
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-3
| [ 0:00] ## UDEV:	N: dm-3
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-3
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-3
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=3
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-4
| [ 0:00] ## UDEV:	N: dm-4
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-4
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-4
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=4
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/loop0
| [ 0:00] ## UDEV:	N: loop0
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/loop0
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/loop0
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=7
| [ 0:00] ## UDEV:	E: MINOR=0
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] <======== Script file "vglist.sh" ========>
| [ 0:00] ## Line: 1 	 #!/bin/sh
| [ 0:00] ## Line: 2 	 # Copyright (C) 2013 Red Hat, Inc. All rights reserved.
| [ 0:00] ## Line: 3 	 #
| [ 0:00] ## Line: 4 	 # This copyrighted material is made available to anyone wishing to use,
| [ 0:00] ## Line: 5 	 # modify, copy, or redistribute it subject to the terms and conditions
| [ 0:00] ## Line: 6 	 # of the GNU General Public License v.2.
| [ 0:00] ## Line: 7 	 #
| [ 0:00] ## Line: 8 	 # You should have received a copy of the GNU General Public License
| [ 0:00] ## Line: 9 	 # along with this program; if not, write to the Free Software Foundation,
| [ 0:00] ## Line: 10 	 # Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA
| [ 0:00] ## Line: 11 	 
| [ 0:00] ## Line: 12 	 SKIP_WITH_LVMPOLLD=1
| [ 0:00] ## Line: 13 	 
| [ 0:00] ## Line: 14 	 . lib/inittest
| [ 0:00] ## Line: 15 	 
| [ 0:00] ## Line: 16 	 aux prepare_vg 2
| [ 0:00] ## Line: 17 	 aux apitest vglist $vg "$(get vg_field $vg vg_uuid | sed -e s,-,,g)"
| [ 0:00] aux teardown
| [ 0:00] #vglist.sh:1+ aux teardown
| [ 0:00] ## teardown.........ok
###       failed: [ndev-vanilla] api/vglist.sh

| [ 0:00] Library version:   1.02.146 (2017-12-18)
| [ 0:00] Driver version:    4.35.0
| [ 0:00] Kernel is Linux localhost.localdomain 3.10.0-693.11.1.el7.x86_64 #1 SMP Mon Dec 4 23:52:40 UTC 2017 x86_64 GNU/Linux
| [ 0:00] Selinux mode is not installed.
| [ 0:00]               total        used        free      shared  buff/cache   available
| [ 0:00] Mem:           7822        1075        4157          10        2589        6440
| [ 0:00] Swap:          4095           0        4095
| [ 0:00] Filesystem      Size  Used Avail Use% Mounted on
| [ 0:00] /dev/sdc1        18G  8.4G  8.4G  50% /
| [ 0:00] /dev/sdd1        51G  6.1G   43G  13% /lfskernel
| [ 0:00] devtmpfs        3.9G     0  3.9G   0% /dev
| [ 0:00] tmpfs           3.9G     0  3.9G   0% /run
| [ 0:00] @TESTDIR=/tmp/LVMTEST23700.ltBzKF7T2r
| [ 0:00] @PREFIX=LVMTEST23700
| [ 0:00] ## LVMCONF: activation {
| [ 0:00] ## LVMCONF:     checks = 1
| [ 0:00] ## LVMCONF:     monitoring = 0
| [ 0:00] ## LVMCONF:     polling_interval = 1
| [ 0:00] ## LVMCONF:     raid_region_size = 512
| [ 0:00] ## LVMCONF:     retry_deactivation = 1
| [ 0:00] ## LVMCONF:     snapshot_autoextend_percent = 50
| [ 0:00] ## LVMCONF:     snapshot_autoextend_threshold = 50
| [ 0:00] ## LVMCONF:     udev_rules = 1
| [ 0:00] ## LVMCONF:     udev_sync = 1
| [ 0:00] ## LVMCONF:     verify_udev_operations = 1
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: allocation {
| [ 0:00] ## LVMCONF:     wipe_signatures_when_zeroing_new_lvs = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: backup {
| [ 0:00] ## LVMCONF:     archive = 0
| [ 0:00] ## LVMCONF:     backup = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: devices {
| [ 0:00] ## LVMCONF:     cache_dir = "@TESTDIR@/etc"
| [ 0:00] ## LVMCONF:     default_data_alignment = 1
| [ 0:00] ## LVMCONF:     dir = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     filter = "a|.*|"
| [ 0:00] ## LVMCONF:     global_filter = [ "a|@TESTDIR@/dev/mapper/@PREFIX@.*pv[0-9_]*$|", "r|.*|" ]
| [ 0:00] ## LVMCONF:     md_component_detection  = 0
| [ 0:00] ## LVMCONF:     scan = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     sysfs_scan = 1
| [ 0:00] ## LVMCONF:     write_cache_state = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: dmeventd {
| [ 0:00] ## LVMCONF:     executable = "/sources/boot/LVM2.2.02.177/test/lib/dmeventd"
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: global {
| [ 0:00] ## LVMCONF:     abort_on_internal_errors = 1
| [ 0:00] ## LVMCONF:     cache_check_executable = "/usr/sbin/cache_check"
| [ 0:00] ## LVMCONF:     cache_dump_executable = "/usr/sbin/cache_dump"
| [ 0:00] ## LVMCONF:     cache_repair_executable = "/usr/sbin/cache_repair"
| [ 0:00] ## LVMCONF:     detect_internal_vg_cache_corruption = 1
| [ 0:00] ## LVMCONF:     fallback_to_local_locking = 0
| [ 0:00] ## LVMCONF:     fsadm_executable = "/sources/boot/LVM2.2.02.177/test/lib/fsadm"
| [ 0:00] ## LVMCONF:     library_dir = "@TESTDIR@/lib"
| [ 0:00] ## LVMCONF:     locking_dir = "@TESTDIR@/var/lock/lvm"
| [ 0:00] ## LVMCONF:     locking_type=1
| [ 0:00] ## LVMCONF:     notify_dbus = 0
| [ 0:00] ## LVMCONF:     si_unit_consistency = 1
| [ 0:00] ## LVMCONF:     thin_check_executable = "/usr/sbin/thin_check"
| [ 0:00] ## LVMCONF:     thin_dump_executable = "/usr/sbin/thin_dump"
| [ 0:00] ## LVMCONF:     thin_repair_executable = "/usr/sbin/thin_repair"
| [ 0:00] ## LVMCONF:     use_lvmetad = 0
| [ 0:00] ## LVMCONF:     use_lvmlockd = 0
| [ 0:00] ## LVMCONF:     use_lvmpolld = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: log {
| [ 0:00] ## LVMCONF:     activation = 1
| [ 0:00] ## LVMCONF:     file = "@TESTDIR@/debug.log"
| [ 0:00] ## LVMCONF:     indent = 1
| [ 0:00] ## LVMCONF:     level = 9
| [ 0:00] ## LVMCONF:     overwrite = 1
| [ 0:00] ## LVMCONF:     syslog = 0
| [ 0:00] ## LVMCONF:     verbose = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] <======== Processing test: "vgtest.sh" ========>
| [ 0:00] 
| [ 0:00] aux prepare_pvs 2
| [ 0:00] #vgtest.sh:21+ aux prepare_pvs 2
| [ 0:00] ## preparing loop device....ok (/dev/loop0)
| [ 0:00] ## preparing 2 devices...lib/utils: line 212: DM_UDEV_COOKIE: unbound variable
| [ 0:00] set +vx; STACKTRACE; set -vx
| [ 0:00] ##vgtest.sh:21+ set +vx
| [ 0:00] ## - /lfskernel/sources/boot/LVM2.2.02.177/test/api/vgtest.sh:21
| [ 0:00] ## 1 STACKTRACE() called from /lfskernel/sources/boot/LVM2.2.02.177/test/api/vgtest.sh:21
| [ 0:00] <======== Info ========>
| [ 0:00] ## DMINFO:   Name             Maj Min Stat Open Targ Event  UUID                                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv2  253   4 L--w    0    1      0 TEST-@PREFIX@pv2                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv1  253   3 L--w    0    1      0 TEST-@PREFIX@pv1                                                
| [ 0:00] <======== Active table ========>
| [ 0:00] ## DMTABLE:  @PREFIX@pv2: 0 69632 linear 7:0 71680
| [ 0:00] ## DMTABLE:  @PREFIX@pv1: 0 69632 linear 7:0 2048
| [ 0:00] <======== Inactive table ========>
| [ 0:00] ## DMITABLE: @PREFIX@pv2: 
| [ 0:00] ## DMITABLE: @PREFIX@pv1: 
| [ 0:00] <======== Status ========>
| [ 0:00] ## DMSTATUS: @PREFIX@pv2: 0 69632 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv1: 0 69632 linear 
| [ 0:00] <======== Tree ========>
| [ 0:00] ## DMTREE:   @PREFIX@pv2 (253:4)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   LFS_vg-lfs (253:2)
| [ 0:00] ## DMTREE:    `- (8:16)
| [ 0:00] ## DMTREE:   centos-swap (253:1)
| [ 0:00] ## DMTREE:    `- (8:2)
| [ 0:00] ## DMTREE:   centos-root (253:0)
| [ 0:00] ## DMTREE:    `- (8:2)
| [ 0:00] ## DMTREE:   @PREFIX@pv1 (253:3)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] <======== Recursive list of @TESTDIR@/dev ========>
| [ 0:00] ## LSLR:	@TESTDIR@/dev:
| [ 0:00] ## LSLR:	total 4
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 0 Feb 21 02:26 loop0
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 1 Feb 21 02:26 loop1
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 2 Feb 21 02:26 loop2
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 3 Feb 21 02:26 loop3
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 4 Feb 21 02:26 loop4
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 5 Feb 21 02:26 loop5
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 6 Feb 21 02:26 loop6
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 7 Feb 21 02:26 loop7
| [ 0:00] ## LSLR:	drwxr-xr-x 2 root root 4096 Feb 21 02:26 mapper
| [ 0:00] ## LSLR:	crw-r--r-- 1 root root 1, 3 Feb 21 02:26 testnull
| [ 0:00] ## LSLR:	
| [ 0:00] ## LSLR:	@TESTDIR@/dev/mapper:
| [ 0:00] ## LSLR:	total 0
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   3 Feb 21 02:26 @PREFIX@pv1
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   4 Feb 21 02:26 @PREFIX@pv2
| [ 0:00] ## LSLR:	crw------- 1 root root  10, 236 Feb 21 02:26 control
| [ 0:00] <======== Udev DB content ========>
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-0
| [ 0:00] ## UDEV:	N: dm-0
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-0
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-0
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=0
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-1
| [ 0:00] ## UDEV:	N: dm-1
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-1
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-1
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=1
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-2
| [ 0:00] ## UDEV:	N: dm-2
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-2
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-2
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=2
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-3
| [ 0:00] ## UDEV:	N: dm-3
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-3
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-3
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=3
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-4
| [ 0:00] ## UDEV:	N: dm-4
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-4
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-4
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=4
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/loop0
| [ 0:00] ## UDEV:	N: loop0
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/loop0
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/loop0
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=7
| [ 0:00] ## UDEV:	E: MINOR=0
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] <======== Script file "vgtest.sh" ========>
| [ 0:00] ## Line: 1 	 #!/bin/sh
| [ 0:00] ## Line: 2 	 # Copyright (C) 2008 Red Hat, Inc. All rights reserved.
| [ 0:00] ## Line: 3 	 #
| [ 0:00] ## Line: 4 	 # This copyrighted material is made available to anyone wishing to use,
| [ 0:00] ## Line: 5 	 # modify, copy, or redistribute it subject to the terms and conditions
| [ 0:00] ## Line: 6 	 # of the GNU General Public License v.2.
| [ 0:00] ## Line: 7 	 #
| [ 0:00] ## Line: 8 	 # You should have received a copy of the GNU General Public License
| [ 0:00] ## Line: 9 	 # along with this program; if not, write to the Free Software Foundation,
| [ 0:00] ## Line: 10 	 # Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA
| [ 0:00] ## Line: 11 	 
| [ 0:00] ## Line: 12 	 #
| [ 0:00] ## Line: 13 	 # tests lvm2app library
| [ 0:00] ## Line: 14 	 #
| [ 0:00] ## Line: 15 	 
| [ 0:00] ## Line: 16 	 SKIP_WITH_LVMLOCKD=1
| [ 0:00] ## Line: 17 	 SKIP_WITH_LVMPOLLD=1
| [ 0:00] ## Line: 18 	 
| [ 0:00] ## Line: 19 	 . lib/inittest
| [ 0:00] ## Line: 20 	 
| [ 0:00] ## Line: 21 	 aux prepare_pvs 2
| [ 0:00] ## Line: 22 	 
| [ 0:00] ## Line: 23 	 aux apitest vgtest $vg1 "$dev1" "$dev2"
| [ 0:00] aux teardown
| [ 0:00] #vgtest.sh:1+ aux teardown
| [ 0:00] ## teardown.........ok
###       failed: [ndev-vanilla] api/vgtest.sh

| [ 0:00] Library version:   1.02.146 (2017-12-18)
| [ 0:00] Driver version:    4.35.0
| [ 0:00] Kernel is Linux localhost.localdomain 3.10.0-693.11.1.el7.x86_64 #1 SMP Mon Dec 4 23:52:40 UTC 2017 x86_64 GNU/Linux
| [ 0:00] Selinux mode is not installed.
| [ 0:00]               total        used        free      shared  buff/cache   available
| [ 0:00] Mem:           7822        1075        4157          10        2589        6440
| [ 0:00] Swap:          4095           0        4095
| [ 0:00] Filesystem      Size  Used Avail Use% Mounted on
| [ 0:00] /dev/sdc1        18G  8.4G  8.4G  50% /
| [ 0:00] /dev/sdd1        51G  6.1G   43G  13% /lfskernel
| [ 0:00] devtmpfs        3.9G     0  3.9G   0% /dev
| [ 0:00] tmpfs           3.9G     0  3.9G   0% /run
| [ 0:00] @TESTDIR=/tmp/LVMTEST23868.6McnKpIgxs
| [ 0:00] @PREFIX=LVMTEST23868
| [ 0:00] ## LVMCONF: activation {
| [ 0:00] ## LVMCONF:     checks = 1
| [ 0:00] ## LVMCONF:     monitoring = 0
| [ 0:00] ## LVMCONF:     polling_interval = 1
| [ 0:00] ## LVMCONF:     raid_region_size = 512
| [ 0:00] ## LVMCONF:     retry_deactivation = 1
| [ 0:00] ## LVMCONF:     snapshot_autoextend_percent = 50
| [ 0:00] ## LVMCONF:     snapshot_autoextend_threshold = 50
| [ 0:00] ## LVMCONF:     udev_rules = 1
| [ 0:00] ## LVMCONF:     udev_sync = 1
| [ 0:00] ## LVMCONF:     verify_udev_operations = 1
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: allocation {
| [ 0:00] ## LVMCONF:     wipe_signatures_when_zeroing_new_lvs = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: backup {
| [ 0:00] ## LVMCONF:     archive = 0
| [ 0:00] ## LVMCONF:     backup = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: devices {
| [ 0:00] ## LVMCONF:     cache_dir = "@TESTDIR@/etc"
| [ 0:00] ## LVMCONF:     default_data_alignment = 1
| [ 0:00] ## LVMCONF:     dir = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     filter = "a|.*|"
| [ 0:00] ## LVMCONF:     global_filter = [ "a|@TESTDIR@/dev/mapper/@PREFIX@.*pv[0-9_]*$|", "r|.*|" ]
| [ 0:00] ## LVMCONF:     md_component_detection  = 0
| [ 0:00] ## LVMCONF:     scan = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     sysfs_scan = 1
| [ 0:00] ## LVMCONF:     write_cache_state = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: dmeventd {
| [ 0:00] ## LVMCONF:     executable = "/sources/boot/LVM2.2.02.177/test/lib/dmeventd"
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: global {
| [ 0:00] ## LVMCONF:     abort_on_internal_errors = 1
| [ 0:00] ## LVMCONF:     cache_check_executable = "/usr/sbin/cache_check"
| [ 0:00] ## LVMCONF:     cache_dump_executable = "/usr/sbin/cache_dump"
| [ 0:00] ## LVMCONF:     cache_repair_executable = "/usr/sbin/cache_repair"
| [ 0:00] ## LVMCONF:     detect_internal_vg_cache_corruption = 1
| [ 0:00] ## LVMCONF:     fallback_to_local_locking = 0
| [ 0:00] ## LVMCONF:     fsadm_executable = "/sources/boot/LVM2.2.02.177/test/lib/fsadm"
| [ 0:00] ## LVMCONF:     library_dir = "@TESTDIR@/lib"
| [ 0:00] ## LVMCONF:     locking_dir = "@TESTDIR@/var/lock/lvm"
| [ 0:00] ## LVMCONF:     locking_type=1
| [ 0:00] ## LVMCONF:     notify_dbus = 0
| [ 0:00] ## LVMCONF:     si_unit_consistency = 1
| [ 0:00] ## LVMCONF:     thin_check_executable = "/usr/sbin/thin_check"
| [ 0:00] ## LVMCONF:     thin_dump_executable = "/usr/sbin/thin_dump"
| [ 0:00] ## LVMCONF:     thin_repair_executable = "/usr/sbin/thin_repair"
| [ 0:00] ## LVMCONF:     use_lvmetad = 0
| [ 0:00] ## LVMCONF:     use_lvmlockd = 0
| [ 0:00] ## LVMCONF:     use_lvmpolld = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: log {
| [ 0:00] ## LVMCONF:     activation = 1
| [ 0:00] ## LVMCONF:     file = "@TESTDIR@/debug.log"
| [ 0:00] ## LVMCONF:     indent = 1
| [ 0:00] ## LVMCONF:     level = 9
| [ 0:00] ## LVMCONF:     overwrite = 1
| [ 0:00] ## LVMCONF:     syslog = 0
| [ 0:00] ## LVMCONF:     verbose = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] <======== Processing test: "000-basic.sh" ========>
| [ 0:00] 
| [ 0:00] lvm version
| [ 0:00] #000-basic.sh:18+ lvm version
| [ 0:00]   LVM version:     2.02.177(2) (2017-12-18)
| [ 0:00]   Library version: 1.02.146 (2017-12-18)
| [ 0:00]   Driver version:  4.35.0
| [ 0:00]   Configuration:   ./configure --prefix=/usr --exec-prefix= --enable-applib --enable-cmdlib --enable-pkgconfig --enable-udev_sync
| [ 0:00] 
| [ 0:00] lvm pvmove --version|sed -n "1s/.*: *\([0-9][^ ]*\) .*/\1/p" | tee version
| [ 0:00] #000-basic.sh:20+ sed -n '1s/.*: *\([0-9][^ ]*\) .*/\1/p'
| [ 0:00] #000-basic.sh:20+ tee version
| [ 0:00] #000-basic.sh:20+ lvm pvmove --version
| [ 0:00] 2.02.177(2)
| [ 0:00] 
| [ 0:00] # ensure they are the same
| [ 0:00] diff -u version lib/version-expected
| [ 0:00] #000-basic.sh:23+ diff -u version lib/version-expected
| [ 0:00] 
| [ 0:00] dmstats version |sed -n "1s/.*: *\([0-9][^ ]*\) .*/\1/p" | tee dmstats-version
| [ 0:00] #000-basic.sh:25+ sed -n '1s/.*: *\([0-9][^ ]*\) .*/\1/p'
| [ 0:00] #000-basic.sh:25+ tee dmstats-version
| [ 0:00] #000-basic.sh:25+ dmstats version
| [ 0:00] 1.02.146
| [ 0:00] 
| [ 0:00] # ensure dmstats version matches build
| [ 0:00] diff -u dmstats-version lib/dm-version-expected
| [ 0:00] #000-basic.sh:28+ diff -u dmstats-version lib/dm-version-expected
| [ 0:00] 
| [ 0:00] # ensure we can create devices (uses dmsetup, etc)
| [ 0:00] aux prepare_devs 5
| [ 0:00] #000-basic.sh:31+ aux prepare_devs 5
| [ 0:00] ## preparing loop device....ok (/dev/loop0)
| [ 0:00] ## preparing 5 devices...lib/utils: line 212: DM_UDEV_COOKIE: unbound variable
| [ 0:00] set +vx; STACKTRACE; set -vx
| [ 0:00] ##000-basic.sh:31+ set +vx
| [ 0:00] ## - /lfskernel/sources/boot/LVM2.2.02.177/test/shell/000-basic.sh:31
| [ 0:00] ## 1 STACKTRACE() called from /lfskernel/sources/boot/LVM2.2.02.177/test/shell/000-basic.sh:31
| [ 0:00] <======== Info ========>
| [ 0:00] ## DMINFO:   Name             Maj Min Stat Open Targ Event  UUID                                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv4  253   5 L--w    0    1      0 TEST-@PREFIX@pv4                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv3  253   4 L--w    0    1      0 TEST-@PREFIX@pv3                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv2  253   3 L--w    0    1      0 TEST-@PREFIX@pv2                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv1  253   7 L--w    0    1      0 TEST-@PREFIX@pv1                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv5  253   6 L--w    0    1      0 TEST-@PREFIX@pv5                                                
| [ 0:00] <======== Active table ========>
| [ 0:00] ## DMTABLE:  @PREFIX@pv4: 0 69632 linear 7:0 210944
| [ 0:00] ## DMTABLE:  @PREFIX@pv3: 0 69632 linear 7:0 141312
| [ 0:00] ## DMTABLE:  @PREFIX@pv2: 0 69632 linear 7:0 71680
| [ 0:00] ## DMTABLE:  @PREFIX@pv1: 0 69632 linear 7:0 2048
| [ 0:00] ## DMTABLE:  @PREFIX@pv5: 0 69632 linear 7:0 280576
| [ 0:00] <======== Inactive table ========>
| [ 0:00] ## DMITABLE: @PREFIX@pv4: 
| [ 0:00] ## DMITABLE: @PREFIX@pv3: 
| [ 0:00] ## DMITABLE: @PREFIX@pv2: 
| [ 0:00] ## DMITABLE: @PREFIX@pv1: 
| [ 0:00] ## DMITABLE: @PREFIX@pv5: 
| [ 0:00] <======== Status ========>
| [ 0:00] ## DMSTATUS: @PREFIX@pv4: 0 69632 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv3: 0 69632 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv2: 0 69632 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv1: 0 69632 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv5: 0 69632 linear 
| [ 0:00] <======== Tree ========>
| [ 0:00] ## DMTREE:   @PREFIX@pv4 (253:5)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   @PREFIX@pv3 (253:4)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   @PREFIX@pv2 (253:3)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   @PREFIX@pv1 (253:7)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   LFS_vg-lfs (253:2)
| [ 0:00] ## DMTREE:    `- (8:16)
| [ 0:00] ## DMTREE:   centos-swap (253:1)
| [ 0:00] ## DMTREE:    `- (8:2)
| [ 0:00] ## DMTREE:   @PREFIX@pv5 (253:6)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   centos-root (253:0)
| [ 0:00] ## DMTREE:    `- (8:2)
| [ 0:00] <======== Recursive list of @TESTDIR@/dev ========>
| [ 0:00] ## LSLR:	@TESTDIR@/dev:
| [ 0:00] ## LSLR:	total 4
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 0 Feb 21 02:26 loop0
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 1 Feb 21 02:26 loop1
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 2 Feb 21 02:26 loop2
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 3 Feb 21 02:26 loop3
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 4 Feb 21 02:26 loop4
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 5 Feb 21 02:26 loop5
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 6 Feb 21 02:26 loop6
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 7 Feb 21 02:26 loop7
| [ 0:00] ## LSLR:	drwxr-xr-x 2 root root 4096 Feb 21 02:26 mapper
| [ 0:00] ## LSLR:	crw-r--r-- 1 root root 1, 3 Feb 21 02:26 testnull
| [ 0:00] ## LSLR:	
| [ 0:00] ## LSLR:	@TESTDIR@/dev/mapper:
| [ 0:00] ## LSLR:	total 0
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   7 Feb 21 02:26 @PREFIX@pv1
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   3 Feb 21 02:26 @PREFIX@pv2
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   4 Feb 21 02:26 @PREFIX@pv3
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   5 Feb 21 02:26 @PREFIX@pv4
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   6 Feb 21 02:26 @PREFIX@pv5
| [ 0:00] ## LSLR:	crw------- 1 root root  10, 236 Feb 21 02:26 control
| [ 0:00] <======== Udev DB content ========>
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-0
| [ 0:00] ## UDEV:	N: dm-0
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-0
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-0
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=0
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-1
| [ 0:00] ## UDEV:	N: dm-1
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-1
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-1
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=1
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-2
| [ 0:00] ## UDEV:	N: dm-2
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-2
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-2
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=2
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-3
| [ 0:00] ## UDEV:	N: dm-3
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-3
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-3
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=3
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-4
| [ 0:00] ## UDEV:	N: dm-4
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-4
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-4
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=4
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-5
| [ 0:00] ## UDEV:	N: dm-5
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-5
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-5
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=5
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-6
| [ 0:00] ## UDEV:	N: dm-6
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-6
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-6
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=6
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-7
| [ 0:00] ## UDEV:	N: dm-7
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-7
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-7
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=7
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/loop0
| [ 0:00] ## UDEV:	N: loop0
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/loop0
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/loop0
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=7
| [ 0:00] ## UDEV:	E: MINOR=0
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] <======== Script file "000-basic.sh" ========>
| [ 0:00] ## Line: 1 	 #!/usr/bin/env bash
| [ 0:00] ## Line: 2 	 
| [ 0:00] ## Line: 3 	 # Copyright (C) 2009-2011 Red Hat, Inc. All rights reserved.
| [ 0:00] ## Line: 4 	 #
| [ 0:00] ## Line: 5 	 # This copyrighted material is made available to anyone wishing to use,
| [ 0:00] ## Line: 6 	 # modify, copy, or redistribute it subject to the terms and conditions
| [ 0:00] ## Line: 7 	 # of the GNU General Public License v.2.
| [ 0:00] ## Line: 8 	 #
| [ 0:00] ## Line: 9 	 # You should have received a copy of the GNU General Public License
| [ 0:00] ## Line: 10 	 # along with this program; if not, write to the Free Software Foundation,
| [ 0:00] ## Line: 11 	 # Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA
| [ 0:00] ## Line: 12 	 
| [ 0:00] ## Line: 13 	 SKIP_WITH_LVMLOCKD=1
| [ 0:00] ## Line: 14 	 SKIP_WITH_LVMPOLLD=1
| [ 0:00] ## Line: 15 	 
| [ 0:00] ## Line: 16 	 . lib/inittest
| [ 0:00] ## Line: 17 	 
| [ 0:00] ## Line: 18 	 lvm version
| [ 0:00] ## Line: 19 	 
| [ 0:00] ## Line: 20 	 lvm pvmove --version|sed -n "1s/.*: *\([0-9][^ ]*\) .*/\1/p" | tee version
| [ 0:00] ## Line: 21 	 
| [ 0:00] ## Line: 22 	 # ensure they are the same
| [ 0:00] ## Line: 23 	 diff -u version lib/version-expected
| [ 0:00] ## Line: 24 	 
| [ 0:00] ## Line: 25 	 dmstats version |sed -n "1s/.*: *\([0-9][^ ]*\) .*/\1/p" | tee dmstats-version
| [ 0:00] ## Line: 26 	 
| [ 0:00] ## Line: 27 	 # ensure dmstats version matches build
| [ 0:00] ## Line: 28 	 diff -u dmstats-version lib/dm-version-expected
| [ 0:00] ## Line: 29 	 
| [ 0:00] ## Line: 30 	 # ensure we can create devices (uses dmsetup, etc)
| [ 0:00] ## Line: 31 	 aux prepare_devs 5
| [ 0:00] ## Line: 32 	 get_devs
| [ 0:00] ## Line: 33 	 
| [ 0:00] ## Line: 34 	 # ensure we do not crash on a bug in config file
| [ 0:00] ## Line: 35 	 aux lvmconf 'log/prefix = 1""'
| [ 0:00] ## Line: 36 	 not lvs "${DEVICES[@]}"
| [ 0:00] aux teardown
| [ 0:00] #000-basic.sh:1+ aux teardown
| [ 0:00] ## teardown.........ok
###       failed: [ndev-vanilla] shell/000-basic.sh
###      skipped: [ndev-vanilla] shell/aa-lvmlockd-dlm-prepare.sh
###      skipped: [ndev-vanilla] shell/aa-lvmlockd-sanlock-prepare.sh

| [ 0:00] Library version:   1.02.146 (2017-12-18)
| [ 0:00] Driver version:    4.35.0
| [ 0:00] Kernel is Linux localhost.localdomain 3.10.0-693.11.1.el7.x86_64 #1 SMP Mon Dec 4 23:52:40 UTC 2017 x86_64 GNU/Linux
| [ 0:00] Selinux mode is not installed.
| [ 0:00]               total        used        free      shared  buff/cache   available
| [ 0:00] Mem:           7822        1075        4157          10        2590        6440
| [ 0:00] Swap:          4095           0        4095
| [ 0:00] Filesystem      Size  Used Avail Use% Mounted on
| [ 0:00] /dev/sdc1        18G  8.4G  8.4G  50% /
| [ 0:00] /dev/sdd1        51G  6.1G   43G  13% /lfskernel
| [ 0:00] devtmpfs        3.9G     0  3.9G   0% /dev
| [ 0:00] tmpfs           3.9G     0  3.9G   0% /run
| [ 0:00] @TESTDIR=/tmp/LVMTEST24208.XlammzAjTk
| [ 0:00] @PREFIX=LVMTEST24208
| [ 0:00] ## LVMCONF: activation {
| [ 0:00] ## LVMCONF:     checks = 1
| [ 0:00] ## LVMCONF:     monitoring = 0
| [ 0:00] ## LVMCONF:     polling_interval = 1
| [ 0:00] ## LVMCONF:     raid_region_size = 512
| [ 0:00] ## LVMCONF:     retry_deactivation = 1
| [ 0:00] ## LVMCONF:     snapshot_autoextend_percent = 50
| [ 0:00] ## LVMCONF:     snapshot_autoextend_threshold = 50
| [ 0:00] ## LVMCONF:     udev_rules = 1
| [ 0:00] ## LVMCONF:     udev_sync = 1
| [ 0:00] ## LVMCONF:     verify_udev_operations = 1
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: allocation {
| [ 0:00] ## LVMCONF:     wipe_signatures_when_zeroing_new_lvs = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: backup {
| [ 0:00] ## LVMCONF:     archive = 0
| [ 0:00] ## LVMCONF:     backup = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: devices {
| [ 0:00] ## LVMCONF:     cache_dir = "@TESTDIR@/etc"
| [ 0:00] ## LVMCONF:     default_data_alignment = 1
| [ 0:00] ## LVMCONF:     dir = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     filter = "a|.*|"
| [ 0:00] ## LVMCONF:     global_filter = [ "a|@TESTDIR@/dev/mapper/@PREFIX@.*pv[0-9_]*$|", "r|.*|" ]
| [ 0:00] ## LVMCONF:     md_component_detection  = 0
| [ 0:00] ## LVMCONF:     scan = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     sysfs_scan = 1
| [ 0:00] ## LVMCONF:     write_cache_state = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: dmeventd {
| [ 0:00] ## LVMCONF:     executable = "/sources/boot/LVM2.2.02.177/test/lib/dmeventd"
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: global {
| [ 0:00] ## LVMCONF:     abort_on_internal_errors = 1
| [ 0:00] ## LVMCONF:     cache_check_executable = "/usr/sbin/cache_check"
| [ 0:00] ## LVMCONF:     cache_dump_executable = "/usr/sbin/cache_dump"
| [ 0:00] ## LVMCONF:     cache_repair_executable = "/usr/sbin/cache_repair"
| [ 0:00] ## LVMCONF:     detect_internal_vg_cache_corruption = 1
| [ 0:00] ## LVMCONF:     fallback_to_local_locking = 0
| [ 0:00] ## LVMCONF:     fsadm_executable = "/sources/boot/LVM2.2.02.177/test/lib/fsadm"
| [ 0:00] ## LVMCONF:     library_dir = "@TESTDIR@/lib"
| [ 0:00] ## LVMCONF:     locking_dir = "@TESTDIR@/var/lock/lvm"
| [ 0:00] ## LVMCONF:     locking_type=1
| [ 0:00] ## LVMCONF:     notify_dbus = 0
| [ 0:00] ## LVMCONF:     si_unit_consistency = 1
| [ 0:00] ## LVMCONF:     thin_check_executable = "/usr/sbin/thin_check"
| [ 0:00] ## LVMCONF:     thin_dump_executable = "/usr/sbin/thin_dump"
| [ 0:00] ## LVMCONF:     thin_repair_executable = "/usr/sbin/thin_repair"
| [ 0:00] ## LVMCONF:     use_lvmetad = 0
| [ 0:00] ## LVMCONF:     use_lvmlockd = 0
| [ 0:00] ## LVMCONF:     use_lvmpolld = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: log {
| [ 0:00] ## LVMCONF:     activation = 1
| [ 0:00] ## LVMCONF:     file = "@TESTDIR@/debug.log"
| [ 0:00] ## LVMCONF:     indent = 1
| [ 0:00] ## LVMCONF:     level = 9
| [ 0:00] ## LVMCONF:     overwrite = 1
| [ 0:00] ## LVMCONF:     syslog = 0
| [ 0:00] ## LVMCONF:     verbose = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] <======== Processing test: "activate-minor.sh" ========>
| [ 0:00] 
| [ 0:00] # Just skip this test if minor is already in use...
| [ 0:00] dmsetup info | tee info
| [ 0:00] #activate-minor.sh:19+ tee info
| [ 0:00] #activate-minor.sh:19+ dmsetup info
| [ 0:00] Name:              LFS_vg-lfs
| [ 0:00] State:             ACTIVE
| [ 0:00] Read Ahead:        8192
| [ 0:00] Tables present:    LIVE
| [ 0:00] Open count:        1
| [ 0:00] Event number:      0
| [ 0:00] Major, minor:      253, 2
| [ 0:00] Number of targets: 1
| [ 0:00] UUID: LVM-ADAX9UgZ14F7RccCDdIuh4zEPm08jxcdzJ7zVAaRN18lvIoQJeMPTcuaskjhc1O4
| [ 0:00] 
| [ 0:00] Name:              centos-swap
| [ 0:00] State:             ACTIVE
| [ 0:00] Read Ahead:        8192
| [ 0:00] Tables present:    LIVE
| [ 0:00] Open count:        2
| [ 0:00] Event number:      0
| [ 0:00] Major, minor:      253, 1
| [ 0:00] Number of targets: 1
| [ 0:00] UUID: LVM-9arYV7uRKU90Chz6F38z63CveHPR7ImkTxZyZPbpiezqkdrnQVA0XDhcG2x8kSSf
| [ 0:00] 
| [ 0:00] Name:              centos-root
| [ 0:00] State:             ACTIVE
| [ 0:00] Read Ahead:        8192
| [ 0:00] Tables present:    LIVE
| [ 0:00] Open count:        1
| [ 0:00] Event number:      0
| [ 0:00] Major, minor:      253, 0
| [ 0:00] Number of targets: 1
| [ 0:00] UUID: LVM-9arYV7uRKU90Chz6F38z63CveHPR7ImkEXi1Wh4Y03ewMjFhGTlJt5oHMp8bIv56
| [ 0:00] 
| [ 0:00] grep -E "^Major, minor: *[0-9]+, 123" info && skip
| [ 0:00] #activate-minor.sh:20+ grep -E '^Major, minor: *[0-9]+, 123' info
| [ 0:00] 
| [ 0:00] aux prepare_vg 2
| [ 0:00] #activate-minor.sh:22+ aux prepare_vg 2
| [ 0:00] ## preparing loop device....ok (/dev/loop0)
| [ 0:00] ## preparing 2 devices...lib/utils: line 212: DM_UDEV_COOKIE: unbound variable
| [ 0:00] set +vx; STACKTRACE; set -vx
| [ 0:00] ##activate-minor.sh:22+ set +vx
| [ 0:00] ## - /lfskernel/sources/boot/LVM2.2.02.177/test/shell/activate-minor.sh:22
| [ 0:00] ## 1 STACKTRACE() called from /lfskernel/sources/boot/LVM2.2.02.177/test/shell/activate-minor.sh:22
| [ 0:00] <======== Info ========>
| [ 0:00] ## DMINFO:   Name             Maj Min Stat Open Targ Event  UUID                                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv2  253   4 L--w    0    1      0 TEST-@PREFIX@pv2                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv1  253   3 L--w    0    1      0 TEST-@PREFIX@pv1                                                
| [ 0:00] <======== Active table ========>
| [ 0:00] ## DMTABLE:  @PREFIX@pv2: 0 69632 linear 7:0 71680
| [ 0:00] ## DMTABLE:  @PREFIX@pv1: 0 69632 linear 7:0 2048
| [ 0:00] <======== Inactive table ========>
| [ 0:00] ## DMITABLE: @PREFIX@pv2: 
| [ 0:00] ## DMITABLE: @PREFIX@pv1: 
| [ 0:00] <======== Status ========>
| [ 0:00] ## DMSTATUS: @PREFIX@pv2: 0 69632 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv1: 0 69632 linear 
| [ 0:00] <======== Tree ========>
| [ 0:00] ## DMTREE:   @PREFIX@pv2 (253:4)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   @PREFIX@pv1 (253:3)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   LFS_vg-lfs (253:2)
| [ 0:00] ## DMTREE:    `- (8:16)
| [ 0:00] ## DMTREE:   centos-swap (253:1)
| [ 0:00] ## DMTREE:    `- (8:2)
| [ 0:00] ## DMTREE:   centos-root (253:0)
| [ 0:00] ## DMTREE:    `- (8:2)
| [ 0:00] <======== Recursive list of @TESTDIR@/dev ========>
| [ 0:00] ## LSLR:	@TESTDIR@/dev:
| [ 0:00] ## LSLR:	total 4
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 0 Feb 21 02:26 loop0
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 1 Feb 21 02:26 loop1
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 2 Feb 21 02:26 loop2
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 3 Feb 21 02:26 loop3
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 4 Feb 21 02:26 loop4
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 5 Feb 21 02:26 loop5
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 6 Feb 21 02:26 loop6
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 7 Feb 21 02:26 loop7
| [ 0:00] ## LSLR:	drwxr-xr-x 2 root root 4096 Feb 21 02:26 mapper
| [ 0:00] ## LSLR:	crw-r--r-- 1 root root 1, 3 Feb 21 02:26 testnull
| [ 0:00] ## LSLR:	
| [ 0:00] ## LSLR:	@TESTDIR@/dev/mapper:
| [ 0:00] ## LSLR:	total 0
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   3 Feb 21 02:26 @PREFIX@pv1
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   4 Feb 21 02:26 @PREFIX@pv2
| [ 0:00] ## LSLR:	crw------- 1 root root  10, 236 Feb 21 02:26 control
| [ 0:00] <======== Udev DB content ========>
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-0
| [ 0:00] ## UDEV:	N: dm-0
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-0
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-0
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=0
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-1
| [ 0:00] ## UDEV:	N: dm-1
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-1
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-1
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=1
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-2
| [ 0:00] ## UDEV:	N: dm-2
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-2
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-2
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=2
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-3
| [ 0:00] ## UDEV:	N: dm-3
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-3
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-3
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=3
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-4
| [ 0:00] ## UDEV:	N: dm-4
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-4
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-4
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=4
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/loop0
| [ 0:00] ## UDEV:	N: loop0
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/loop0
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/loop0
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=7
| [ 0:00] ## UDEV:	E: MINOR=0
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] <======== Script file "activate-minor.sh" ========>
| [ 0:00] ## Line: 1 	 #!/usr/bin/env bash
| [ 0:00] ## Line: 2 	 
| [ 0:00] ## Line: 3 	 # Copyright (C) 2012 Red Hat, Inc. All rights reserved.
| [ 0:00] ## Line: 4 	 #
| [ 0:00] ## Line: 5 	 # This copyrighted material is made available to anyone wishing to use,
| [ 0:00] ## Line: 6 	 # modify, copy, or redistribute it subject to the terms and conditions
| [ 0:00] ## Line: 7 	 # of the GNU General Public License v.2.
| [ 0:00] ## Line: 8 	 #
| [ 0:00] ## Line: 9 	 # You should have received a copy of the GNU General Public License
| [ 0:00] ## Line: 10 	 # along with this program; if not, write to the Free Software Foundation,
| [ 0:00] ## Line: 11 	 # Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA
| [ 0:00] ## Line: 12 	 
| [ 0:00] ## Line: 13 	 SKIP_WITH_LVMLOCKD=1
| [ 0:00] ## Line: 14 	 SKIP_WITH_LVMPOLLD=1
| [ 0:00] ## Line: 15 	 
| [ 0:00] ## Line: 16 	 . lib/inittest
| [ 0:00] ## Line: 17 	 
| [ 0:00] ## Line: 18 	 # Just skip this test if minor is already in use...
| [ 0:00] ## Line: 19 	 dmsetup info | tee info
| [ 0:00] ## Line: 20 	 grep -E "^Major, minor: *[0-9]+, 123" info && skip
| [ 0:00] ## Line: 21 	 
| [ 0:00] ## Line: 22 	 aux prepare_vg 2
| [ 0:00] ## Line: 23 	 lvcreate -a n --zero n -l 1 -n foo $vg
| [ 0:00] ## Line: 24 	 lvchange $vg/foo -My --major=255 --minor=123
| [ 0:00] ## Line: 25 	 lvchange $vg/foo -a y
| [ 0:00] ## Line: 26 	 dmsetup info $vg-foo | tee info
| [ 0:00] ## Line: 27 	 grep -E "^Major, minor: *[0-9]+, 123" info
| [ 0:00] ## Line: 28 	 
| [ 0:00] ## Line: 29 	 vgremove -ff $vg
| [ 0:00] aux teardown
| [ 0:00] #activate-minor.sh:1+ aux teardown
| [ 0:00] ## teardown.........ok
###       failed: [ndev-vanilla] shell/activate-minor.sh

| [ 0:00] Library version:   1.02.146 (2017-12-18)
| [ 0:00] Driver version:    4.35.0
| [ 0:00] Kernel is Linux localhost.localdomain 3.10.0-693.11.1.el7.x86_64 #1 SMP Mon Dec 4 23:52:40 UTC 2017 x86_64 GNU/Linux
| [ 0:00] Selinux mode is not installed.
| [ 0:00]               total        used        free      shared  buff/cache   available
| [ 0:00] Mem:           7822        1075        4157          10        2590        6440
| [ 0:00] Swap:          4095           0        4095
| [ 0:00] Filesystem      Size  Used Avail Use% Mounted on
| [ 0:00] /dev/sdc1        18G  8.4G  8.4G  50% /
| [ 0:00] /dev/sdd1        51G  6.1G   43G  13% /lfskernel
| [ 0:00] devtmpfs        3.9G     0  3.9G   0% /dev
| [ 0:00] tmpfs           3.9G     0  3.9G   0% /run
| [ 0:00] @TESTDIR=/tmp/LVMTEST24389.bsU7aZi8QT
| [ 0:00] @PREFIX=LVMTEST24389
| [ 0:00] ## LVMCONF: activation {
| [ 0:00] ## LVMCONF:     checks = 1
| [ 0:00] ## LVMCONF:     monitoring = 0
| [ 0:00] ## LVMCONF:     polling_interval = 1
| [ 0:00] ## LVMCONF:     raid_region_size = 512
| [ 0:00] ## LVMCONF:     retry_deactivation = 1
| [ 0:00] ## LVMCONF:     snapshot_autoextend_percent = 50
| [ 0:00] ## LVMCONF:     snapshot_autoextend_threshold = 50
| [ 0:00] ## LVMCONF:     udev_rules = 1
| [ 0:00] ## LVMCONF:     udev_sync = 1
| [ 0:00] ## LVMCONF:     verify_udev_operations = 1
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: allocation {
| [ 0:00] ## LVMCONF:     wipe_signatures_when_zeroing_new_lvs = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: backup {
| [ 0:00] ## LVMCONF:     archive = 0
| [ 0:00] ## LVMCONF:     backup = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: devices {
| [ 0:00] ## LVMCONF:     cache_dir = "@TESTDIR@/etc"
| [ 0:00] ## LVMCONF:     default_data_alignment = 1
| [ 0:00] ## LVMCONF:     dir = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     filter = "a|.*|"
| [ 0:00] ## LVMCONF:     global_filter = [ "a|@TESTDIR@/dev/mapper/@PREFIX@.*pv[0-9_]*$|", "r|.*|" ]
| [ 0:00] ## LVMCONF:     md_component_detection  = 0
| [ 0:00] ## LVMCONF:     scan = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     sysfs_scan = 1
| [ 0:00] ## LVMCONF:     write_cache_state = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: dmeventd {
| [ 0:00] ## LVMCONF:     executable = "/sources/boot/LVM2.2.02.177/test/lib/dmeventd"
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: global {
| [ 0:00] ## LVMCONF:     abort_on_internal_errors = 1
| [ 0:00] ## LVMCONF:     cache_check_executable = "/usr/sbin/cache_check"
| [ 0:00] ## LVMCONF:     cache_dump_executable = "/usr/sbin/cache_dump"
| [ 0:00] ## LVMCONF:     cache_repair_executable = "/usr/sbin/cache_repair"
| [ 0:00] ## LVMCONF:     detect_internal_vg_cache_corruption = 1
| [ 0:00] ## LVMCONF:     fallback_to_local_locking = 0
| [ 0:00] ## LVMCONF:     fsadm_executable = "/sources/boot/LVM2.2.02.177/test/lib/fsadm"
| [ 0:00] ## LVMCONF:     library_dir = "@TESTDIR@/lib"
| [ 0:00] ## LVMCONF:     locking_dir = "@TESTDIR@/var/lock/lvm"
| [ 0:00] ## LVMCONF:     locking_type=1
| [ 0:00] ## LVMCONF:     notify_dbus = 0
| [ 0:00] ## LVMCONF:     si_unit_consistency = 1
| [ 0:00] ## LVMCONF:     thin_check_executable = "/usr/sbin/thin_check"
| [ 0:00] ## LVMCONF:     thin_dump_executable = "/usr/sbin/thin_dump"
| [ 0:00] ## LVMCONF:     thin_repair_executable = "/usr/sbin/thin_repair"
| [ 0:00] ## LVMCONF:     use_lvmetad = 0
| [ 0:00] ## LVMCONF:     use_lvmlockd = 0
| [ 0:00] ## LVMCONF:     use_lvmpolld = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: log {
| [ 0:00] ## LVMCONF:     activation = 1
| [ 0:00] ## LVMCONF:     file = "@TESTDIR@/debug.log"
| [ 0:00] ## LVMCONF:     indent = 1
| [ 0:00] ## LVMCONF:     level = 9
| [ 0:00] ## LVMCONF:     overwrite = 1
| [ 0:00] ## LVMCONF:     syslog = 0
| [ 0:00] ## LVMCONF:     verbose = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] <======== Processing test: "activate-missing-segment.sh" ========>
| [ 0:00] 
| [ 0:00] aux prepare_vg 2
| [ 0:00] #activate-missing-segment.sh:25+ aux prepare_vg 2
| [ 0:00] ## preparing loop device....ok (/dev/loop0)
| [ 0:00] ## preparing 2 devices...lib/utils: line 212: DM_UDEV_COOKIE: unbound variable
| [ 0:00] set +vx; STACKTRACE; set -vx
| [ 0:00] ##activate-missing-segment.sh:25+ set +vx
| [ 0:00] ## - /lfskernel/sources/boot/LVM2.2.02.177/test/shell/activate-missing-segment.sh:25
| [ 0:00] ## 1 STACKTRACE() called from /lfskernel/sources/boot/LVM2.2.02.177/test/shell/activate-missing-segment.sh:25
| [ 0:00] <======== Info ========>
| [ 0:00] ## DMINFO:   Name             Maj Min Stat Open Targ Event  UUID                                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv2  253   4 L--w    0    1      0 TEST-@PREFIX@pv2                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv1  253   3 L--w    0    1      0 TEST-@PREFIX@pv1                                                
| [ 0:00] <======== Active table ========>
| [ 0:00] ## DMTABLE:  @PREFIX@pv2: 0 69632 linear 7:0 71680
| [ 0:00] ## DMTABLE:  @PREFIX@pv1: 0 69632 linear 7:0 2048
| [ 0:00] <======== Inactive table ========>
| [ 0:00] ## DMITABLE: @PREFIX@pv2: 
| [ 0:00] ## DMITABLE: @PREFIX@pv1: 
| [ 0:00] <======== Status ========>
| [ 0:00] ## DMSTATUS: @PREFIX@pv2: 0 69632 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv1: 0 69632 linear 
| [ 0:00] <======== Tree ========>
| [ 0:00] ## DMTREE:   @PREFIX@pv2 (253:4)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   LFS_vg-lfs (253:2)
| [ 0:00] ## DMTREE:    `- (8:16)
| [ 0:00] ## DMTREE:   centos-swap (253:1)
| [ 0:00] ## DMTREE:    `- (8:2)
| [ 0:00] ## DMTREE:   centos-root (253:0)
| [ 0:00] ## DMTREE:    `- (8:2)
| [ 0:00] ## DMTREE:   @PREFIX@pv1 (253:3)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] <======== Recursive list of @TESTDIR@/dev ========>
| [ 0:00] ## LSLR:	@TESTDIR@/dev:
| [ 0:00] ## LSLR:	total 4
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 0 Feb 21 02:26 loop0
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 1 Feb 21 02:26 loop1
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 2 Feb 21 02:26 loop2
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 3 Feb 21 02:26 loop3
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 4 Feb 21 02:26 loop4
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 5 Feb 21 02:26 loop5
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 6 Feb 21 02:26 loop6
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 7 Feb 21 02:26 loop7
| [ 0:00] ## LSLR:	drwxr-xr-x 2 root root 4096 Feb 21 02:26 mapper
| [ 0:00] ## LSLR:	crw-r--r-- 1 root root 1, 3 Feb 21 02:26 testnull
| [ 0:00] ## LSLR:	
| [ 0:00] ## LSLR:	@TESTDIR@/dev/mapper:
| [ 0:00] ## LSLR:	total 0
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   3 Feb 21 02:26 @PREFIX@pv1
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   4 Feb 21 02:26 @PREFIX@pv2
| [ 0:00] ## LSLR:	crw------- 1 root root  10, 236 Feb 21 02:26 control
| [ 0:00] <======== Udev DB content ========>
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-0
| [ 0:00] ## UDEV:	N: dm-0
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-0
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-0
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=0
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-1
| [ 0:00] ## UDEV:	N: dm-1
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-1
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-1
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=1
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-2
| [ 0:00] ## UDEV:	N: dm-2
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-2
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-2
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=2
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-3
| [ 0:00] ## UDEV:	N: dm-3
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-3
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-3
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=3
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-4
| [ 0:00] ## UDEV:	N: dm-4
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-4
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-4
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=4
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/loop0
| [ 0:00] ## UDEV:	N: loop0
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/loop0
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/loop0
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=7
| [ 0:00] ## UDEV:	E: MINOR=0
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] <======== Script file "activate-missing-segment.sh" ========>
| [ 0:00] ## Line: 1 	 #!/usr/bin/env bash
| [ 0:00] ## Line: 2 	 
| [ 0:00] ## Line: 3 	 # Copyright (C) 2010 Red Hat, Inc. All rights reserved.
| [ 0:00] ## Line: 4 	 #
| [ 0:00] ## Line: 5 	 # This copyrighted material is made available to anyone wishing to use,
| [ 0:00] ## Line: 6 	 # modify, copy, or redistribute it subject to the terms and conditions
| [ 0:00] ## Line: 7 	 # of the GNU General Public License v.2.
| [ 0:00] ## Line: 8 	 #
| [ 0:00] ## Line: 9 	 # You should have received a copy of the GNU General Public License
| [ 0:00] ## Line: 10 	 # along with this program; if not, write to the Free Software Foundation,
| [ 0:00] ## Line: 11 	 # Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA
| [ 0:00] ## Line: 12 	 
| [ 0:00] ## Line: 13 	 # Test activation behaviour with devices missing.
| [ 0:00] ## Line: 14 	 # - snapshots and their origins are only activated together; if one fails, both
| [ 0:00] ## Line: 15 	 #   fail
| [ 0:00] ## Line: 16 	 # - partial mirrors are not activated (but maybe they should? maybe we should
| [ 0:00] ## Line: 17 	 #   instead lvconvert --repair them?)
| [ 0:00] ## Line: 18 	 # - linear LVs with bits missing are not activated
| [ 0:00] ## Line: 19 	 
| [ 0:00] ## Line: 20 	 SKIP_WITH_LVMLOCKD=1
| [ 0:00] ## Line: 21 	 SKIP_WITH_LVMPOLLD=1
| [ 0:00] ## Line: 22 	 
| [ 0:00] ## Line: 23 	 . lib/inittest
| [ 0:00] ## Line: 24 	 
| [ 0:00] ## Line: 25 	 aux prepare_vg 2
| [ 0:00] ## Line: 26 	 
| [ 0:00] ## Line: 27 	 lvcreate -l100%FREE -n span $vg
| [ 0:00] ## Line: 28 	 vgchange -a n $vg
| [ 0:00] ## Line: 29 	 
| [ 0:00] ## Line: 30 	 aux disable_dev "$dev1"
| [ 0:00] ## Line: 31 	 not vgchange -a y $vg
| [ 0:00] ## Line: 32 	 vgchange -a y --partial $vg
| [ 0:00] ## Line: 33 	 check active $vg span
| [ 0:00] ## Line: 34 	 
| [ 0:00] ## Line: 35 	 vgremove -ff $vg
| [ 0:00] aux teardown
| [ 0:00] #activate-missing-segment.sh:1+ aux teardown
| [ 0:00] ## teardown.........ok
###       failed: [ndev-vanilla] shell/activate-missing-segment.sh

| [ 0:00] Library version:   1.02.146 (2017-12-18)
| [ 0:00] Driver version:    4.35.0
| [ 0:00] Kernel is Linux localhost.localdomain 3.10.0-693.11.1.el7.x86_64 #1 SMP Mon Dec 4 23:52:40 UTC 2017 x86_64 GNU/Linux
| [ 0:00] Selinux mode is not installed.
| [ 0:00]               total        used        free      shared  buff/cache   available
| [ 0:00] Mem:           7822        1075        4157          10        2590        6440
| [ 0:00] Swap:          4095           0        4095
| [ 0:00] Filesystem      Size  Used Avail Use% Mounted on
| [ 0:00] /dev/sdc1        18G  8.4G  8.4G  50% /
| [ 0:00] /dev/sdd1        51G  6.1G   43G  13% /lfskernel
| [ 0:00] devtmpfs        3.9G     0  3.9G   0% /dev
| [ 0:00] tmpfs           3.9G     0  3.9G   0% /run
| [ 0:00] @TESTDIR=/tmp/LVMTEST24568.vhkdYLxtt8
| [ 0:00] @PREFIX=LVMTEST24568
| [ 0:00] ## LVMCONF: activation {
| [ 0:00] ## LVMCONF:     checks = 1
| [ 0:00] ## LVMCONF:     monitoring = 0
| [ 0:00] ## LVMCONF:     polling_interval = 1
| [ 0:00] ## LVMCONF:     raid_region_size = 512
| [ 0:00] ## LVMCONF:     retry_deactivation = 1
| [ 0:00] ## LVMCONF:     snapshot_autoextend_percent = 50
| [ 0:00] ## LVMCONF:     snapshot_autoextend_threshold = 50
| [ 0:00] ## LVMCONF:     udev_rules = 1
| [ 0:00] ## LVMCONF:     udev_sync = 1
| [ 0:00] ## LVMCONF:     verify_udev_operations = 1
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: allocation {
| [ 0:00] ## LVMCONF:     wipe_signatures_when_zeroing_new_lvs = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: backup {
| [ 0:00] ## LVMCONF:     archive = 0
| [ 0:00] ## LVMCONF:     backup = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: devices {
| [ 0:00] ## LVMCONF:     cache_dir = "@TESTDIR@/etc"
| [ 0:00] ## LVMCONF:     default_data_alignment = 1
| [ 0:00] ## LVMCONF:     dir = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     filter = "a|.*|"
| [ 0:00] ## LVMCONF:     global_filter = [ "a|@TESTDIR@/dev/mapper/@PREFIX@.*pv[0-9_]*$|", "r|.*|" ]
| [ 0:00] ## LVMCONF:     md_component_detection  = 0
| [ 0:00] ## LVMCONF:     scan = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     sysfs_scan = 1
| [ 0:00] ## LVMCONF:     write_cache_state = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: dmeventd {
| [ 0:00] ## LVMCONF:     executable = "/sources/boot/LVM2.2.02.177/test/lib/dmeventd"
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: global {
| [ 0:00] ## LVMCONF:     abort_on_internal_errors = 1
| [ 0:00] ## LVMCONF:     cache_check_executable = "/usr/sbin/cache_check"
| [ 0:00] ## LVMCONF:     cache_dump_executable = "/usr/sbin/cache_dump"
| [ 0:00] ## LVMCONF:     cache_repair_executable = "/usr/sbin/cache_repair"
| [ 0:00] ## LVMCONF:     detect_internal_vg_cache_corruption = 1
| [ 0:00] ## LVMCONF:     fallback_to_local_locking = 0
| [ 0:00] ## LVMCONF:     fsadm_executable = "/sources/boot/LVM2.2.02.177/test/lib/fsadm"
| [ 0:00] ## LVMCONF:     library_dir = "@TESTDIR@/lib"
| [ 0:00] ## LVMCONF:     locking_dir = "@TESTDIR@/var/lock/lvm"
| [ 0:00] ## LVMCONF:     locking_type=1
| [ 0:00] ## LVMCONF:     notify_dbus = 0
| [ 0:00] ## LVMCONF:     si_unit_consistency = 1
| [ 0:00] ## LVMCONF:     thin_check_executable = "/usr/sbin/thin_check"
| [ 0:00] ## LVMCONF:     thin_dump_executable = "/usr/sbin/thin_dump"
| [ 0:00] ## LVMCONF:     thin_repair_executable = "/usr/sbin/thin_repair"
| [ 0:00] ## LVMCONF:     use_lvmetad = 0
| [ 0:00] ## LVMCONF:     use_lvmlockd = 0
| [ 0:00] ## LVMCONF:     use_lvmpolld = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: log {
| [ 0:00] ## LVMCONF:     activation = 1
| [ 0:00] ## LVMCONF:     file = "@TESTDIR@/debug.log"
| [ 0:00] ## LVMCONF:     indent = 1
| [ 0:00] ## LVMCONF:     level = 9
| [ 0:00] ## LVMCONF:     overwrite = 1
| [ 0:00] ## LVMCONF:     syslog = 0
| [ 0:00] ## LVMCONF:     verbose = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] <======== Processing test: "activate-missing.sh" ========>
| [ 0:00] 
| [ 0:00] aux prepare_vg 4
| [ 0:00] #activate-missing.sh:25+ aux prepare_vg 4
| [ 0:00] ## preparing loop device....ok (/dev/loop0)
| [ 0:01] ## preparing 4 devices...lib/utils: line 212: DM_UDEV_COOKIE: unbound variable
| [ 0:01] set +vx; STACKTRACE; set -vx
| [ 0:01] ##activate-missing.sh:25+ set +vx
| [ 0:01] ## - /lfskernel/sources/boot/LVM2.2.02.177/test/shell/activate-missing.sh:25
| [ 0:01] ## 1 STACKTRACE() called from /lfskernel/sources/boot/LVM2.2.02.177/test/shell/activate-missing.sh:25
| [ 0:01] <======== Info ========>
| [ 0:01] ## DMINFO:   Name             Maj Min Stat Open Targ Event  UUID                                                                
| [ 0:01] ## DMINFO:   @PREFIX@pv2  253   6 L--w    0    1      0 TEST-@PREFIX@pv2                                                
| [ 0:01] ## DMINFO:   @PREFIX@pv1  253   5 L--w    0    1      0 TEST-@PREFIX@pv1                                                
| [ 0:01] ## DMINFO:   @PREFIX@pv4  253   4 L--w    0    1      0 TEST-@PREFIX@pv4                                                
| [ 0:01] ## DMINFO:   @PREFIX@pv3  253   3 L--w    0    1      0 TEST-@PREFIX@pv3                                                
| [ 0:01] <======== Active table ========>
| [ 0:01] ## DMTABLE:  @PREFIX@pv2: 0 69632 linear 7:0 71680
| [ 0:01] ## DMTABLE:  @PREFIX@pv1: 0 69632 linear 7:0 2048
| [ 0:01] ## DMTABLE:  @PREFIX@pv4: 0 69632 linear 7:0 210944
| [ 0:01] ## DMTABLE:  @PREFIX@pv3: 0 69632 linear 7:0 141312
| [ 0:01] <======== Inactive table ========>
| [ 0:01] ## DMITABLE: @PREFIX@pv2: 
| [ 0:01] ## DMITABLE: @PREFIX@pv1: 
| [ 0:01] ## DMITABLE: @PREFIX@pv4: 
| [ 0:01] ## DMITABLE: @PREFIX@pv3: 
| [ 0:01] <======== Status ========>
| [ 0:01] ## DMSTATUS: @PREFIX@pv2: 0 69632 linear 
| [ 0:01] ## DMSTATUS: @PREFIX@pv1: 0 69632 linear 
| [ 0:01] ## DMSTATUS: @PREFIX@pv4: 0 69632 linear 
| [ 0:01] ## DMSTATUS: @PREFIX@pv3: 0 69632 linear 
| [ 0:01] <======== Tree ========>
| [ 0:01] ## DMTREE:   @PREFIX@pv2 (253:6)
| [ 0:01] ## DMTREE:    `- (7:0)
| [ 0:01] ## DMTREE:   @PREFIX@pv1 (253:5)
| [ 0:01] ## DMTREE:    `- (7:0)
| [ 0:01] ## DMTREE:   LFS_vg-lfs (253:2)
| [ 0:01] ## DMTREE:    `- (8:16)
| [ 0:01] ## DMTREE:   @PREFIX@pv4 (253:4)
| [ 0:01] ## DMTREE:    `- (7:0)
| [ 0:01] ## DMTREE:   centos-swap (253:1)
| [ 0:01] ## DMTREE:    `- (8:2)
| [ 0:01] ## DMTREE:   centos-root (253:0)
| [ 0:01] ## DMTREE:    `- (8:2)
| [ 0:01] ## DMTREE:   @PREFIX@pv3 (253:3)
| [ 0:01] ## DMTREE:    `- (7:0)
| [ 0:01] <======== Recursive list of @TESTDIR@/dev ========>
| [ 0:01] ## LSLR:	@TESTDIR@/dev:
| [ 0:01] ## LSLR:	total 4
| [ 0:01] ## LSLR:	brw-r--r-- 1 root root 7, 0 Feb 21 02:26 loop0
| [ 0:01] ## LSLR:	brw-r--r-- 1 root root 7, 1 Feb 21 02:26 loop1
| [ 0:01] ## LSLR:	brw-r--r-- 1 root root 7, 2 Feb 21 02:26 loop2
| [ 0:01] ## LSLR:	brw-r--r-- 1 root root 7, 3 Feb 21 02:26 loop3
| [ 0:01] ## LSLR:	brw-r--r-- 1 root root 7, 4 Feb 21 02:26 loop4
| [ 0:01] ## LSLR:	brw-r--r-- 1 root root 7, 5 Feb 21 02:26 loop5
| [ 0:01] ## LSLR:	brw-r--r-- 1 root root 7, 6 Feb 21 02:26 loop6
| [ 0:01] ## LSLR:	brw-r--r-- 1 root root 7, 7 Feb 21 02:26 loop7
| [ 0:01] ## LSLR:	drwxr-xr-x 2 root root 4096 Feb 21 02:26 mapper
| [ 0:01] ## LSLR:	crw-r--r-- 1 root root 1, 3 Feb 21 02:26 testnull
| [ 0:01] ## LSLR:	
| [ 0:01] ## LSLR:	@TESTDIR@/dev/mapper:
| [ 0:01] ## LSLR:	total 0
| [ 0:01] ## LSLR:	brw------- 1 root root 253,   5 Feb 21 02:26 @PREFIX@pv1
| [ 0:01] ## LSLR:	brw------- 1 root root 253,   6 Feb 21 02:26 @PREFIX@pv2
| [ 0:01] ## LSLR:	brw------- 1 root root 253,   3 Feb 21 02:26 @PREFIX@pv3
| [ 0:01] ## LSLR:	brw------- 1 root root 253,   4 Feb 21 02:26 @PREFIX@pv4
| [ 0:01] ## LSLR:	crw------- 1 root root  10, 236 Feb 21 02:26 control
| [ 0:01] <======== Udev DB content ========>
| [ 0:01] ## UDEV:	P: /devices/virtual/block/dm-0
| [ 0:01] ## UDEV:	N: dm-0
| [ 0:01] ## UDEV:	E: DEVNAME=/dev/dm-0
| [ 0:01] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-0
| [ 0:01] ## UDEV:	E: DEVTYPE=disk
| [ 0:01] ## UDEV:	E: MAJOR=253
| [ 0:01] ## UDEV:	E: MINOR=0
| [ 0:01] ## UDEV:	E: SUBSYSTEM=block
| [ 0:01] ## UDEV:	
| [ 0:01] ## UDEV:	P: /devices/virtual/block/dm-1
| [ 0:01] ## UDEV:	N: dm-1
| [ 0:01] ## UDEV:	E: DEVNAME=/dev/dm-1
| [ 0:01] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-1
| [ 0:01] ## UDEV:	E: DEVTYPE=disk
| [ 0:01] ## UDEV:	E: MAJOR=253
| [ 0:01] ## UDEV:	E: MINOR=1
| [ 0:01] ## UDEV:	E: SUBSYSTEM=block
| [ 0:01] ## UDEV:	
| [ 0:01] ## UDEV:	P: /devices/virtual/block/dm-2
| [ 0:01] ## UDEV:	N: dm-2
| [ 0:01] ## UDEV:	E: DEVNAME=/dev/dm-2
| [ 0:01] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-2
| [ 0:01] ## UDEV:	E: DEVTYPE=disk
| [ 0:01] ## UDEV:	E: MAJOR=253
| [ 0:01] ## UDEV:	E: MINOR=2
| [ 0:01] ## UDEV:	E: SUBSYSTEM=block
| [ 0:01] ## UDEV:	
| [ 0:01] ## UDEV:	P: /devices/virtual/block/dm-3
| [ 0:01] ## UDEV:	N: dm-3
| [ 0:01] ## UDEV:	E: DEVNAME=/dev/dm-3
| [ 0:01] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-3
| [ 0:01] ## UDEV:	E: DEVTYPE=disk
| [ 0:01] ## UDEV:	E: MAJOR=253
| [ 0:01] ## UDEV:	E: MINOR=3
| [ 0:01] ## UDEV:	E: SUBSYSTEM=block
| [ 0:01] ## UDEV:	
| [ 0:01] ## UDEV:	P: /devices/virtual/block/dm-4
| [ 0:01] ## UDEV:	N: dm-4
| [ 0:01] ## UDEV:	E: DEVNAME=/dev/dm-4
| [ 0:01] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-4
| [ 0:01] ## UDEV:	E: DEVTYPE=disk
| [ 0:01] ## UDEV:	E: MAJOR=253
| [ 0:01] ## UDEV:	E: MINOR=4
| [ 0:01] ## UDEV:	E: SUBSYSTEM=block
| [ 0:01] ## UDEV:	
| [ 0:01] ## UDEV:	P: /devices/virtual/block/dm-5
| [ 0:01] ## UDEV:	N: dm-5
| [ 0:01] ## UDEV:	E: DEVNAME=/dev/dm-5
| [ 0:01] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-5
| [ 0:01] ## UDEV:	E: DEVTYPE=disk
| [ 0:01] ## UDEV:	E: MAJOR=253
| [ 0:01] ## UDEV:	E: MINOR=5
| [ 0:01] ## UDEV:	E: SUBSYSTEM=block
| [ 0:01] ## UDEV:	
| [ 0:01] ## UDEV:	P: /devices/virtual/block/dm-6
| [ 0:01] ## UDEV:	N: dm-6
| [ 0:01] ## UDEV:	E: DEVNAME=/dev/dm-6
| [ 0:01] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-6
| [ 0:01] ## UDEV:	E: DEVTYPE=disk
| [ 0:01] ## UDEV:	E: MAJOR=253
| [ 0:01] ## UDEV:	E: MINOR=6
| [ 0:01] ## UDEV:	E: SUBSYSTEM=block
| [ 0:01] ## UDEV:	
| [ 0:01] ## UDEV:	P: /devices/virtual/block/loop0
| [ 0:01] ## UDEV:	N: loop0
| [ 0:01] ## UDEV:	E: DEVNAME=/dev/loop0
| [ 0:01] ## UDEV:	E: DEVPATH=/devices/virtual/block/loop0
| [ 0:01] ## UDEV:	E: DEVTYPE=disk
| [ 0:01] ## UDEV:	E: MAJOR=7
| [ 0:01] ## UDEV:	E: MINOR=0
| [ 0:01] ## UDEV:	E: SUBSYSTEM=block
| [ 0:01] ## UDEV:	
| [ 0:01] <======== Script file "activate-missing.sh" ========>
| [ 0:01] ## Line: 1 	 #!/usr/bin/env bash
| [ 0:01] ## Line: 2 	 
| [ 0:01] ## Line: 3 	 # Copyright (C) 2010 Red Hat, Inc. All rights reserved.
| [ 0:01] ## Line: 4 	 #
| [ 0:01] ## Line: 5 	 # This copyrighted material is made available to anyone wishing to use,
| [ 0:01] ## Line: 6 	 # modify, copy, or redistribute it subject to the terms and conditions
| [ 0:01] ## Line: 7 	 # of the GNU General Public License v.2.
| [ 0:01] ## Line: 8 	 #
| [ 0:01] ## Line: 9 	 # You should have received a copy of the GNU General Public License
| [ 0:01] ## Line: 10 	 # along with this program; if not, write to the Free Software Foundation,
| [ 0:01] ## Line: 11 	 # Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA
| [ 0:01] ## Line: 12 	 
| [ 0:01] ## Line: 13 	 # Test activation behaviour with devices missing.
| [ 0:01] ## Line: 14 	 # - snapshots and their origins are only activated together; if one fails, both
| [ 0:01] ## Line: 15 	 #   fail
| [ 0:01] ## Line: 16 	 # - partial mirrors are not activated (but maybe they should? maybe we should
| [ 0:01] ## Line: 17 	 #   instead lvconvert --repair them?)
| [ 0:01] ## Line: 18 	 # - linear LVs with bits missing are not activated
| [ 0:01] ## Line: 19 	 
| [ 0:01] ## Line: 20 	 SKIP_WITH_LVMLOCKD=1
| [ 0:01] ## Line: 21 	 SKIP_WITH_LVMPOLLD=1
| [ 0:01] ## Line: 22 	 
| [ 0:01] ## Line: 23 	 . lib/inittest
| [ 0:01] ## Line: 24 	 
| [ 0:01] ## Line: 25 	 aux prepare_vg 4
| [ 0:01] ## Line: 26 	 
| [ 0:01] ## Line: 27 	 lvcreate -l1 -n linear1 $vg "$dev1"
| [ 0:01] ## Line: 28 	 lvcreate -l1 -n linear2 $vg "$dev2"
| [ 0:01] ## Line: 29 	 lvcreate -l2 -n linear12 $vg "$dev1":4 "$dev2":4
| [ 0:01] ## Line: 30 	 
| [ 0:01] ## Line: 31 	 lvcreate -aey -l1 -n origin1 $vg "$dev1"
| [ 0:01] ## Line: 32 	 lvcreate -s $vg/origin1 -l1 -n s_napshot2 "$dev2"
| [ 0:01] ## Line: 33 	 
| [ 0:01] ## Line: 34 	 lvcreate -aey -l1 --type mirror -m1 -n mirror12 --mirrorlog core $vg "$dev1" "$dev2"
| [ 0:01] ## Line: 35 	 lvcreate -aey -l1 --type mirror -m1 -n mirror123 $vg "$dev1" "$dev2" "$dev3"
| [ 0:01] ## Line: 36 	 
| [ 0:01] ## Line: 37 	 vgchange -a n $vg
| [ 0:01] ## Line: 38 	 aux disable_dev "$dev1"
| [ 0:01] ## Line: 39 	 not vgchange -a y $vg
| [ 0:01] ## Line: 40 	 not vgck $vg
| [ 0:01] ## Line: 41 	 
| [ 0:01] ## Line: 42 	 check inactive $vg linear1
| [ 0:01] ## Line: 43 	 check active $vg linear2
| [ 0:01] ## Line: 44 	 check inactive $vg origin1
| [ 0:01] ## Line: 45 	 check inactive $vg s_napshot2
| [ 0:01] ## Line: 46 	 check inactive $vg linear12
| [ 0:01] ## Line: 47 	 check inactive $vg mirror12
| [ 0:01] ## Line: 48 	 check inactive $vg mirror123
| [ 0:01] ## Line: 49 	 
| [ 0:01] ## Line: 50 	 vgchange -a n $vg
| [ 0:01] ## Line: 51 	 aux enable_dev "$dev1"
| [ 0:01] ## Line: 52 	 aux disable_dev "$dev2"
| [ 0:01] ## Line: 53 	 not vgchange -aey $vg
| [ 0:01] ## Line: 54 	 not vgck $vg
| [ 0:01] ## Line: 55 	 
| [ 0:01] ## Line: 56 	 check active $vg linear1
| [ 0:01] ## Line: 57 	 check inactive $vg linear2
| [ 0:01] ## Line: 58 	 check inactive $vg linear12
| [ 0:01] ## Line: 59 	 check inactive $vg origin1
| [ 0:01] ## Line: 60 	 check inactive $vg s_napshot2
| [ 0:01] ## Line: 61 	 check inactive $vg mirror12
| [ 0:01] ## Line: 62 	 check inactive $vg mirror123
| [ 0:01] ## Line: 63 	 
| [ 0:01] ## Line: 64 	 vgchange -a n $vg
| [ 0:01] ## Line: 65 	 aux enable_dev "$dev2"
| [ 0:01] ## Line: 66 	 aux disable_dev "$dev3"
| [ 0:01] ## Line: 67 	 not vgchange -aey $vg
| [ 0:01] ## Line: 68 	 not vgck $vg
| [ 0:01] ## Line: 69 	 
| [ 0:01] ## Line: 70 	 check active $vg origin1
| [ 0:01] ## Line: 71 	 check active $vg s_napshot2
| [ 0:01] ## Line: 72 	 check active $vg linear1
| [ 0:01] ## Line: 73 	 check active $vg linear2
| [ 0:01] ## Line: 74 	 check active $vg linear12
| [ 0:01] ## Line: 75 	 check inactive $vg mirror123
| [ 0:01] ## Line: 76 	 check active $vg mirror12
| [ 0:01] ## Line: 77 	 
| [ 0:01] ## Line: 78 	 vgchange -a n $vg
| [ 0:01] ## Line: 79 	 aux enable_dev "$dev3"
| [ 0:01] ## Line: 80 	 aux disable_dev "$dev4"
| [ 0:01] ## Line: 81 	 vgchange -aey $vg
| [ 0:01] ## Line: 82 	 not vgck $vg
| [ 0:01] ## Line: 83 	 
| [ 0:01] ## Line: 84 	 check active $vg origin1
| [ 0:01] ## Line: 85 	 check active $vg s_napshot2
| [ 0:01] ## Line: 86 	 check active $vg linear1
| [ 0:01] ## Line: 87 	 check active $vg linear2
| [ 0:01] ## Line: 88 	 check active $vg linear12
| [ 0:01] ## Line: 89 	 check active $vg mirror12
| [ 0:01] ## Line: 90 	 check active $vg mirror123
| [ 0:01] ## Line: 91 	 
| [ 0:01] ## Line: 92 	 vgremove -ff $vg
| [ 0:01] aux teardown
| [ 0:01] #activate-missing.sh:1+ aux teardown
| [ 0:01] ## teardown.........ok
###       failed: [ndev-vanilla] shell/activate-missing.sh

| [ 0:00] Library version:   1.02.146 (2017-12-18)
| [ 0:00] Driver version:    4.35.0
| [ 0:00] Kernel is Linux localhost.localdomain 3.10.0-693.11.1.el7.x86_64 #1 SMP Mon Dec 4 23:52:40 UTC 2017 x86_64 GNU/Linux
| [ 0:00] Selinux mode is not installed.
| [ 0:00]               total        used        free      shared  buff/cache   available
| [ 0:00] Mem:           7822        1075        4157          10        2590        6440
| [ 0:00] Swap:          4095           0        4095
| [ 0:00] Filesystem      Size  Used Avail Use% Mounted on
| [ 0:00] /dev/sdc1        18G  8.4G  8.4G  50% /
| [ 0:00] /dev/sdd1        51G  6.1G   43G  13% /lfskernel
| [ 0:00] devtmpfs        3.9G     0  3.9G   0% /dev
| [ 0:00] tmpfs           3.9G     0  3.9G   0% /run
| [ 0:00] @TESTDIR=/tmp/LVMTEST24770.Pvt6YENwHl
| [ 0:00] @PREFIX=LVMTEST24770
| [ 0:00] ## LVMCONF: activation {
| [ 0:00] ## LVMCONF:     checks = 1
| [ 0:00] ## LVMCONF:     monitoring = 0
| [ 0:00] ## LVMCONF:     polling_interval = 1
| [ 0:00] ## LVMCONF:     raid_region_size = 512
| [ 0:00] ## LVMCONF:     retry_deactivation = 1
| [ 0:00] ## LVMCONF:     snapshot_autoextend_percent = 50
| [ 0:00] ## LVMCONF:     snapshot_autoextend_threshold = 50
| [ 0:00] ## LVMCONF:     udev_rules = 1
| [ 0:00] ## LVMCONF:     udev_sync = 1
| [ 0:00] ## LVMCONF:     verify_udev_operations = 1
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: allocation {
| [ 0:00] ## LVMCONF:     wipe_signatures_when_zeroing_new_lvs = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: backup {
| [ 0:00] ## LVMCONF:     archive = 0
| [ 0:00] ## LVMCONF:     backup = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: devices {
| [ 0:00] ## LVMCONF:     cache_dir = "@TESTDIR@/etc"
| [ 0:00] ## LVMCONF:     default_data_alignment = 1
| [ 0:00] ## LVMCONF:     dir = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     filter = "a|.*|"
| [ 0:00] ## LVMCONF:     global_filter = [ "a|@TESTDIR@/dev/mapper/@PREFIX@.*pv[0-9_]*$|", "r|.*|" ]
| [ 0:00] ## LVMCONF:     md_component_detection  = 0
| [ 0:00] ## LVMCONF:     scan = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     sysfs_scan = 1
| [ 0:00] ## LVMCONF:     write_cache_state = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: dmeventd {
| [ 0:00] ## LVMCONF:     executable = "/sources/boot/LVM2.2.02.177/test/lib/dmeventd"
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: global {
| [ 0:00] ## LVMCONF:     abort_on_internal_errors = 1
| [ 0:00] ## LVMCONF:     cache_check_executable = "/usr/sbin/cache_check"
| [ 0:00] ## LVMCONF:     cache_dump_executable = "/usr/sbin/cache_dump"
| [ 0:00] ## LVMCONF:     cache_repair_executable = "/usr/sbin/cache_repair"
| [ 0:00] ## LVMCONF:     detect_internal_vg_cache_corruption = 1
| [ 0:00] ## LVMCONF:     fallback_to_local_locking = 0
| [ 0:00] ## LVMCONF:     fsadm_executable = "/sources/boot/LVM2.2.02.177/test/lib/fsadm"
| [ 0:00] ## LVMCONF:     library_dir = "@TESTDIR@/lib"
| [ 0:00] ## LVMCONF:     locking_dir = "@TESTDIR@/var/lock/lvm"
| [ 0:00] ## LVMCONF:     locking_type=1
| [ 0:00] ## LVMCONF:     notify_dbus = 0
| [ 0:00] ## LVMCONF:     si_unit_consistency = 1
| [ 0:00] ## LVMCONF:     thin_check_executable = "/usr/sbin/thin_check"
| [ 0:00] ## LVMCONF:     thin_dump_executable = "/usr/sbin/thin_dump"
| [ 0:00] ## LVMCONF:     thin_repair_executable = "/usr/sbin/thin_repair"
| [ 0:00] ## LVMCONF:     use_lvmetad = 0
| [ 0:00] ## LVMCONF:     use_lvmlockd = 0
| [ 0:00] ## LVMCONF:     use_lvmpolld = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: log {
| [ 0:00] ## LVMCONF:     activation = 1
| [ 0:00] ## LVMCONF:     file = "@TESTDIR@/debug.log"
| [ 0:00] ## LVMCONF:     indent = 1
| [ 0:00] ## LVMCONF:     level = 9
| [ 0:00] ## LVMCONF:     overwrite = 1
| [ 0:00] ## LVMCONF:     syslog = 0
| [ 0:00] ## LVMCONF:     verbose = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] <======== Processing test: "activate-partial.sh" ========>
| [ 0:00] 
| [ 0:00] aux prepare_vg 3
| [ 0:00] #activate-partial.sh:18+ aux prepare_vg 3
| [ 0:00] ## preparing loop device....ok (/dev/loop0)
| [ 0:00] ## preparing 3 devices...lib/utils: line 212: DM_UDEV_COOKIE: unbound variable
| [ 0:00] set +vx; STACKTRACE; set -vx
| [ 0:00] ##activate-partial.sh:18+ set +vx
| [ 0:00] ## - /lfskernel/sources/boot/LVM2.2.02.177/test/shell/activate-partial.sh:18
| [ 0:00] ## 1 STACKTRACE() called from /lfskernel/sources/boot/LVM2.2.02.177/test/shell/activate-partial.sh:18
| [ 0:00] <======== Info ========>
| [ 0:00] ## DMINFO:   Name             Maj Min Stat Open Targ Event  UUID                                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv3  253   3 L--w    0    1      0 TEST-@PREFIX@pv3                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv2  253   5 L--w    0    1      0 TEST-@PREFIX@pv2                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv1  253   4 L--w    0    1      0 TEST-@PREFIX@pv1                                                
| [ 0:00] <======== Active table ========>
| [ 0:00] ## DMTABLE:  @PREFIX@pv3: 0 69632 linear 7:0 141312
| [ 0:00] ## DMTABLE:  @PREFIX@pv2: 0 69632 linear 7:0 71680
| [ 0:00] ## DMTABLE:  @PREFIX@pv1: 0 69632 linear 7:0 2048
| [ 0:00] <======== Inactive table ========>
| [ 0:00] ## DMITABLE: @PREFIX@pv3: 
| [ 0:00] ## DMITABLE: @PREFIX@pv2: 
| [ 0:00] ## DMITABLE: @PREFIX@pv1: 
| [ 0:00] <======== Status ========>
| [ 0:00] ## DMSTATUS: @PREFIX@pv3: 0 69632 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv2: 0 69632 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv1: 0 69632 linear 
| [ 0:00] <======== Tree ========>
| [ 0:00] ## DMTREE:   @PREFIX@pv3 (253:3)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   @PREFIX@pv2 (253:5)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   @PREFIX@pv1 (253:4)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   LFS_vg-lfs (253:2)
| [ 0:00] ## DMTREE:    `- (8:16)
| [ 0:00] ## DMTREE:   centos-swap (253:1)
| [ 0:00] ## DMTREE:    `- (8:2)
| [ 0:00] ## DMTREE:   centos-root (253:0)
| [ 0:00] ## DMTREE:    `- (8:2)
| [ 0:00] <======== Recursive list of @TESTDIR@/dev ========>
| [ 0:00] ## LSLR:	@TESTDIR@/dev:
| [ 0:00] ## LSLR:	total 4
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 0 Feb 21 02:26 loop0
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 1 Feb 21 02:26 loop1
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 2 Feb 21 02:26 loop2
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 3 Feb 21 02:26 loop3
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 4 Feb 21 02:26 loop4
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 5 Feb 21 02:26 loop5
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 6 Feb 21 02:26 loop6
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 7 Feb 21 02:26 loop7
| [ 0:00] ## LSLR:	drwxr-xr-x 2 root root 4096 Feb 21 02:26 mapper
| [ 0:00] ## LSLR:	crw-r--r-- 1 root root 1, 3 Feb 21 02:26 testnull
| [ 0:00] ## LSLR:	
| [ 0:00] ## LSLR:	@TESTDIR@/dev/mapper:
| [ 0:00] ## LSLR:	total 0
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   4 Feb 21 02:26 @PREFIX@pv1
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   5 Feb 21 02:26 @PREFIX@pv2
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   3 Feb 21 02:26 @PREFIX@pv3
| [ 0:00] ## LSLR:	crw------- 1 root root  10, 236 Feb 21 02:26 control
| [ 0:00] <======== Udev DB content ========>
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-0
| [ 0:00] ## UDEV:	N: dm-0
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-0
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-0
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=0
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-1
| [ 0:00] ## UDEV:	N: dm-1
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-1
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-1
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=1
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-2
| [ 0:00] ## UDEV:	N: dm-2
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-2
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-2
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=2
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-3
| [ 0:00] ## UDEV:	N: dm-3
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-3
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-3
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=3
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-4
| [ 0:00] ## UDEV:	N: dm-4
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-4
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-4
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=4
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-5
| [ 0:00] ## UDEV:	N: dm-5
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-5
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-5
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=5
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/loop0
| [ 0:00] ## UDEV:	N: loop0
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/loop0
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/loop0
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=7
| [ 0:00] ## UDEV:	E: MINOR=0
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] <======== Script file "activate-partial.sh" ========>
| [ 0:00] ## Line: 1 	 #!/usr/bin/env bash
| [ 0:00] ## Line: 2 	 
| [ 0:00] ## Line: 3 	 # Copyright (C) 2010 Red Hat, Inc. All rights reserved.
| [ 0:00] ## Line: 4 	 #
| [ 0:00] ## Line: 5 	 # This copyrighted material is made available to anyone wishing to use,
| [ 0:00] ## Line: 6 	 # modify, copy, or redistribute it subject to the terms and conditions
| [ 0:00] ## Line: 7 	 # of the GNU General Public License v.2.
| [ 0:00] ## Line: 8 	 #
| [ 0:00] ## Line: 9 	 # You should have received a copy of the GNU General Public License
| [ 0:00] ## Line: 10 	 # along with this program; if not, write to the Free Software Foundation,
| [ 0:00] ## Line: 11 	 # Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA
| [ 0:00] ## Line: 12 	 
| [ 0:00] ## Line: 13 	 SKIP_WITH_LVMLOCKD=1
| [ 0:00] ## Line: 14 	 SKIP_WITH_LVMPOLLD=1
| [ 0:00] ## Line: 15 	 
| [ 0:00] ## Line: 16 	 . lib/inittest
| [ 0:00] ## Line: 17 	 
| [ 0:00] ## Line: 18 	 aux prepare_vg 3
| [ 0:00] ## Line: 19 	 
| [ 0:00] ## Line: 20 	 lvcreate -aey --type mirror -m 1 -l 1 --nosync -n mirror $vg
| [ 0:00] ## Line: 21 	 lvchange -a n $vg/mirror
| [ 0:00] ## Line: 22 	 aux disable_dev "$dev1"
| [ 0:00] ## Line: 23 	 
| [ 0:00] ## Line: 24 	 not vgreduce --removemissing $vg
| [ 0:00] ## Line: 25 	 not lvchange -v -aey $vg/mirror
| [ 0:00] ## Line: 26 	 lvchange -v --partial -aey $vg/mirror
| [ 0:00] ## Line: 27 	 not lvchange -v --refresh $vg/mirror
| [ 0:00] ## Line: 28 	 lvchange -v --refresh --partial $vg/mirror
| [ 0:00] ## Line: 29 	 
| [ 0:00] ## Line: 30 	 # also check that vgchange works
| [ 0:00] ## Line: 31 	 vgchange -a n --partial $vg
| [ 0:00] ## Line: 32 	 vgchange -aey --partial $vg
| [ 0:00] ## Line: 33 	 
| [ 0:00] ## Line: 34 	 # check vgremove
| [ 0:00] ## Line: 35 	 vgremove -ff $vg
| [ 0:00] aux teardown
| [ 0:00] #activate-partial.sh:1+ aux teardown
| [ 0:00] ## teardown.........ok
###       failed: [ndev-vanilla] shell/activate-partial.sh

| [ 0:00] Library version:   1.02.146 (2017-12-18)
| [ 0:00] Driver version:    4.35.0
| [ 0:00] Kernel is Linux localhost.localdomain 3.10.0-693.11.1.el7.x86_64 #1 SMP Mon Dec 4 23:52:40 UTC 2017 x86_64 GNU/Linux
| [ 0:00] Selinux mode is not installed.
| [ 0:00]               total        used        free      shared  buff/cache   available
| [ 0:00] Mem:           7822        1075        4157          10        2590        6440
| [ 0:00] Swap:          4095           0        4095
| [ 0:00] Filesystem      Size  Used Avail Use% Mounted on
| [ 0:00] /dev/sdc1        18G  8.4G  8.4G  50% /
| [ 0:00] /dev/sdd1        51G  6.1G   43G  13% /lfskernel
| [ 0:00] devtmpfs        3.9G     0  3.9G   0% /dev
| [ 0:00] tmpfs           3.9G     0  3.9G   0% /run
| [ 0:00] @TESTDIR=/tmp/LVMTEST24960.ScuRWpebSq
| [ 0:00] @PREFIX=LVMTEST24960
| [ 0:00] ## LVMCONF: activation {
| [ 0:00] ## LVMCONF:     checks = 1
| [ 0:00] ## LVMCONF:     monitoring = 0
| [ 0:00] ## LVMCONF:     polling_interval = 1
| [ 0:00] ## LVMCONF:     raid_region_size = 512
| [ 0:00] ## LVMCONF:     retry_deactivation = 1
| [ 0:00] ## LVMCONF:     snapshot_autoextend_percent = 50
| [ 0:00] ## LVMCONF:     snapshot_autoextend_threshold = 50
| [ 0:00] ## LVMCONF:     udev_rules = 1
| [ 0:00] ## LVMCONF:     udev_sync = 1
| [ 0:00] ## LVMCONF:     verify_udev_operations = 1
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: allocation {
| [ 0:00] ## LVMCONF:     wipe_signatures_when_zeroing_new_lvs = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: backup {
| [ 0:00] ## LVMCONF:     archive = 0
| [ 0:00] ## LVMCONF:     backup = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: devices {
| [ 0:00] ## LVMCONF:     cache_dir = "@TESTDIR@/etc"
| [ 0:00] ## LVMCONF:     default_data_alignment = 1
| [ 0:00] ## LVMCONF:     dir = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     filter = "a|.*|"
| [ 0:00] ## LVMCONF:     global_filter = [ "a|@TESTDIR@/dev/mapper/@PREFIX@.*pv[0-9_]*$|", "r|.*|" ]
| [ 0:00] ## LVMCONF:     md_component_detection  = 0
| [ 0:00] ## LVMCONF:     scan = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     sysfs_scan = 1
| [ 0:00] ## LVMCONF:     write_cache_state = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: dmeventd {
| [ 0:00] ## LVMCONF:     executable = "/sources/boot/LVM2.2.02.177/test/lib/dmeventd"
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: global {
| [ 0:00] ## LVMCONF:     abort_on_internal_errors = 1
| [ 0:00] ## LVMCONF:     cache_check_executable = "/usr/sbin/cache_check"
| [ 0:00] ## LVMCONF:     cache_dump_executable = "/usr/sbin/cache_dump"
| [ 0:00] ## LVMCONF:     cache_repair_executable = "/usr/sbin/cache_repair"
| [ 0:00] ## LVMCONF:     detect_internal_vg_cache_corruption = 1
| [ 0:00] ## LVMCONF:     fallback_to_local_locking = 0
| [ 0:00] ## LVMCONF:     fsadm_executable = "/sources/boot/LVM2.2.02.177/test/lib/fsadm"
| [ 0:00] ## LVMCONF:     library_dir = "@TESTDIR@/lib"
| [ 0:00] ## LVMCONF:     locking_dir = "@TESTDIR@/var/lock/lvm"
| [ 0:00] ## LVMCONF:     locking_type=1
| [ 0:00] ## LVMCONF:     notify_dbus = 0
| [ 0:00] ## LVMCONF:     si_unit_consistency = 1
| [ 0:00] ## LVMCONF:     thin_check_executable = "/usr/sbin/thin_check"
| [ 0:00] ## LVMCONF:     thin_dump_executable = "/usr/sbin/thin_dump"
| [ 0:00] ## LVMCONF:     thin_repair_executable = "/usr/sbin/thin_repair"
| [ 0:00] ## LVMCONF:     use_lvmetad = 0
| [ 0:00] ## LVMCONF:     use_lvmlockd = 0
| [ 0:00] ## LVMCONF:     use_lvmpolld = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: log {
| [ 0:00] ## LVMCONF:     activation = 1
| [ 0:00] ## LVMCONF:     file = "@TESTDIR@/debug.log"
| [ 0:00] ## LVMCONF:     indent = 1
| [ 0:00] ## LVMCONF:     level = 9
| [ 0:00] ## LVMCONF:     overwrite = 1
| [ 0:00] ## LVMCONF:     syslog = 0
| [ 0:00] ## LVMCONF:     verbose = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] <======== Processing test: "activation-skip.sh" ========>
| [ 0:00] 
| [ 0:00] # Test skip activation flag  -k|--setactivationskip
| [ 0:00] 
| [ 0:00] aux prepare_vg
| [ 0:00] #activation-skip.sh:20+ aux prepare_vg
| [ 0:00] ## preparing loop device....ok (/dev/loop0)
| [ 0:00] ## preparing 3 devices...lib/utils: line 212: DM_UDEV_COOKIE: unbound variable
| [ 0:00] set +vx; STACKTRACE; set -vx
| [ 0:00] ##activation-skip.sh:20+ set +vx
| [ 0:00] ## - /lfskernel/sources/boot/LVM2.2.02.177/test/shell/activation-skip.sh:20
| [ 0:00] ## 1 STACKTRACE() called from /lfskernel/sources/boot/LVM2.2.02.177/test/shell/activation-skip.sh:20
| [ 0:00] <======== Info ========>
| [ 0:00] ## DMINFO:   Name             Maj Min Stat Open Targ Event  UUID                                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv3  253   4 L--w    0    1      0 TEST-@PREFIX@pv3                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv2  253   3 L--w    0    1      0 TEST-@PREFIX@pv2                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv1  253   5 L--w    0    1      0 TEST-@PREFIX@pv1                                                
| [ 0:00] <======== Active table ========>
| [ 0:00] ## DMTABLE:  @PREFIX@pv3: 0 69632 linear 7:0 141312
| [ 0:00] ## DMTABLE:  @PREFIX@pv2: 0 69632 linear 7:0 71680
| [ 0:00] ## DMTABLE:  @PREFIX@pv1: 0 69632 linear 7:0 2048
| [ 0:00] <======== Inactive table ========>
| [ 0:00] ## DMITABLE: @PREFIX@pv3: 
| [ 0:00] ## DMITABLE: @PREFIX@pv2: 
| [ 0:00] ## DMITABLE: @PREFIX@pv1: 
| [ 0:00] <======== Status ========>
| [ 0:00] ## DMSTATUS: @PREFIX@pv3: 0 69632 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv2: 0 69632 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv1: 0 69632 linear 
| [ 0:00] <======== Tree ========>
| [ 0:00] ## DMTREE:   @PREFIX@pv3 (253:4)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   @PREFIX@pv2 (253:3)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   @PREFIX@pv1 (253:5)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   LFS_vg-lfs (253:2)
| [ 0:00] ## DMTREE:    `- (8:16)
| [ 0:00] ## DMTREE:   centos-swap (253:1)
| [ 0:00] ## DMTREE:    `- (8:2)
| [ 0:00] ## DMTREE:   centos-root (253:0)
| [ 0:00] ## DMTREE:    `- (8:2)
| [ 0:00] <======== Recursive list of @TESTDIR@/dev ========>
| [ 0:00] ## LSLR:	@TESTDIR@/dev:
| [ 0:00] ## LSLR:	total 4
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 0 Feb 21 02:26 loop0
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 1 Feb 21 02:26 loop1
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 2 Feb 21 02:26 loop2
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 3 Feb 21 02:26 loop3
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 4 Feb 21 02:26 loop4
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 5 Feb 21 02:26 loop5
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 6 Feb 21 02:26 loop6
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 7 Feb 21 02:26 loop7
| [ 0:00] ## LSLR:	drwxr-xr-x 2 root root 4096 Feb 21 02:26 mapper
| [ 0:00] ## LSLR:	crw-r--r-- 1 root root 1, 3 Feb 21 02:26 testnull
| [ 0:00] ## LSLR:	
| [ 0:00] ## LSLR:	@TESTDIR@/dev/mapper:
| [ 0:00] ## LSLR:	total 0
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   5 Feb 21 02:26 @PREFIX@pv1
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   3 Feb 21 02:26 @PREFIX@pv2
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   4 Feb 21 02:26 @PREFIX@pv3
| [ 0:00] ## LSLR:	crw------- 1 root root  10, 236 Feb 21 02:26 control
| [ 0:00] <======== Udev DB content ========>
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-0
| [ 0:00] ## UDEV:	N: dm-0
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-0
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-0
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=0
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-1
| [ 0:00] ## UDEV:	N: dm-1
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-1
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-1
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=1
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-2
| [ 0:00] ## UDEV:	N: dm-2
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-2
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-2
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=2
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-3
| [ 0:00] ## UDEV:	N: dm-3
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-3
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-3
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=3
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-4
| [ 0:00] ## UDEV:	N: dm-4
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-4
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-4
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=4
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-5
| [ 0:00] ## UDEV:	N: dm-5
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-5
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-5
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=5
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/loop0
| [ 0:00] ## UDEV:	N: loop0
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/loop0
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/loop0
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=7
| [ 0:00] ## UDEV:	E: MINOR=0
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] <======== Script file "activation-skip.sh" ========>
| [ 0:00] ## Line: 1 	 #!/usr/bin/env bash
| [ 0:00] ## Line: 2 	 
| [ 0:00] ## Line: 3 	 # Copyright (C) 2014 Red Hat, Inc. All rights reserved.
| [ 0:00] ## Line: 4 	 #
| [ 0:00] ## Line: 5 	 # This copyrighted material is made available to anyone wishing to use,
| [ 0:00] ## Line: 6 	 # modify, copy, or redistribute it subject to the terms and conditions
| [ 0:00] ## Line: 7 	 # of the GNU General Public License v.2.
| [ 0:00] ## Line: 8 	 #
| [ 0:00] ## Line: 9 	 # You should have received a copy of the GNU General Public License
| [ 0:00] ## Line: 10 	 # along with this program; if not, write to the Free Software Foundation,
| [ 0:00] ## Line: 11 	 # Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA
| [ 0:00] ## Line: 12 	 
| [ 0:00] ## Line: 13 	 SKIP_WITH_LVMLOCKD=1
| [ 0:00] ## Line: 14 	 SKIP_WITH_LVMPOLLD=1
| [ 0:00] ## Line: 15 	 
| [ 0:00] ## Line: 16 	 . lib/inittest
| [ 0:00] ## Line: 17 	 
| [ 0:00] ## Line: 18 	 # Test skip activation flag  -k|--setactivationskip
| [ 0:00] ## Line: 19 	 
| [ 0:00] ## Line: 20 	 aux prepare_vg
| [ 0:00] ## Line: 21 	 
| [ 0:00] ## Line: 22 	 lvcreate -an --zero n -l 1 -n $lv1 $vg
| [ 0:00] ## Line: 23 	 lvcreate -ky -K -l1 -n $lv2 $vg
| [ 0:00] ## Line: 24 	 get lv_field $vg/$lv2 lv_attr | grep -- "-wi-a----k"
| [ 0:00] ## Line: 25 	 
| [ 0:00] ## Line: 26 	 lvchange -ay -K $vg
| [ 0:00] ## Line: 27 	 check active $vg $lv1
| [ 0:00] ## Line: 28 	 lvchange -an $vg
| [ 0:00] ## Line: 29 	 
| [ 0:00] ## Line: 30 	 lvchange -ay --setactivationskip y $vg/$lv1
| [ 0:00] ## Line: 31 	 check inactive $vg $lv1
| [ 0:00] ## Line: 32 	 
| [ 0:00] ## Line: 33 	 get lv_field $vg/$lv1 lv_attr | grep -- "-wi------k"
| [ 0:00] ## Line: 34 	 
| [ 0:00] ## Line: 35 	 lvchange -ay -K $vg
| [ 0:00] ## Line: 36 	 check active $vg $lv1
| [ 0:00] ## Line: 37 	 
| [ 0:00] ## Line: 38 	 vgremove -ff $vg
| [ 0:00] aux teardown
| [ 0:00] #activation-skip.sh:1+ aux teardown
| [ 0:00] ## teardown.........ok
###       failed: [ndev-vanilla] shell/activation-skip.sh

| [ 0:00] Library version:   1.02.146 (2017-12-18)
| [ 0:00] Driver version:    4.35.0
| [ 0:00] Kernel is Linux localhost.localdomain 3.10.0-693.11.1.el7.x86_64 #1 SMP Mon Dec 4 23:52:40 UTC 2017 x86_64 GNU/Linux
| [ 0:00] Selinux mode is not installed.
| [ 0:00]               total        used        free      shared  buff/cache   available
| [ 0:00] Mem:           7822        1074        4157          10        2590        6440
| [ 0:00] Swap:          4095           0        4095
| [ 0:00] Filesystem      Size  Used Avail Use% Mounted on
| [ 0:00] /dev/sdc1        18G  8.4G  8.4G  50% /
| [ 0:00] /dev/sdd1        51G  6.1G   43G  13% /lfskernel
| [ 0:00] devtmpfs        3.9G     0  3.9G   0% /dev
| [ 0:00] tmpfs           3.9G     0  3.9G   0% /run
| [ 0:00] @TESTDIR=/tmp/LVMTEST25151.FATxLhRQpL
| [ 0:00] @PREFIX=LVMTEST25151
| [ 0:00] ## LVMCONF: activation {
| [ 0:00] ## LVMCONF:     checks = 1
| [ 0:00] ## LVMCONF:     monitoring = 0
| [ 0:00] ## LVMCONF:     polling_interval = 1
| [ 0:00] ## LVMCONF:     raid_region_size = 512
| [ 0:00] ## LVMCONF:     retry_deactivation = 1
| [ 0:00] ## LVMCONF:     snapshot_autoextend_percent = 50
| [ 0:00] ## LVMCONF:     snapshot_autoextend_threshold = 50
| [ 0:00] ## LVMCONF:     udev_rules = 1
| [ 0:00] ## LVMCONF:     udev_sync = 1
| [ 0:00] ## LVMCONF:     verify_udev_operations = 1
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: allocation {
| [ 0:00] ## LVMCONF:     wipe_signatures_when_zeroing_new_lvs = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: backup {
| [ 0:00] ## LVMCONF:     archive = 0
| [ 0:00] ## LVMCONF:     backup = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: devices {
| [ 0:00] ## LVMCONF:     cache_dir = "@TESTDIR@/etc"
| [ 0:00] ## LVMCONF:     default_data_alignment = 1
| [ 0:00] ## LVMCONF:     dir = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     filter = "a|.*|"
| [ 0:00] ## LVMCONF:     global_filter = [ "a|@TESTDIR@/dev/mapper/@PREFIX@.*pv[0-9_]*$|", "r|.*|" ]
| [ 0:00] ## LVMCONF:     md_component_detection  = 0
| [ 0:00] ## LVMCONF:     scan = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     sysfs_scan = 1
| [ 0:00] ## LVMCONF:     write_cache_state = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: dmeventd {
| [ 0:00] ## LVMCONF:     executable = "/sources/boot/LVM2.2.02.177/test/lib/dmeventd"
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: global {
| [ 0:00] ## LVMCONF:     abort_on_internal_errors = 1
| [ 0:00] ## LVMCONF:     cache_check_executable = "/usr/sbin/cache_check"
| [ 0:00] ## LVMCONF:     cache_dump_executable = "/usr/sbin/cache_dump"
| [ 0:00] ## LVMCONF:     cache_repair_executable = "/usr/sbin/cache_repair"
| [ 0:00] ## LVMCONF:     detect_internal_vg_cache_corruption = 1
| [ 0:00] ## LVMCONF:     fallback_to_local_locking = 0
| [ 0:00] ## LVMCONF:     fsadm_executable = "/sources/boot/LVM2.2.02.177/test/lib/fsadm"
| [ 0:00] ## LVMCONF:     library_dir = "@TESTDIR@/lib"
| [ 0:00] ## LVMCONF:     locking_dir = "@TESTDIR@/var/lock/lvm"
| [ 0:00] ## LVMCONF:     locking_type=1
| [ 0:00] ## LVMCONF:     notify_dbus = 0
| [ 0:00] ## LVMCONF:     si_unit_consistency = 1
| [ 0:00] ## LVMCONF:     thin_check_executable = "/usr/sbin/thin_check"
| [ 0:00] ## LVMCONF:     thin_dump_executable = "/usr/sbin/thin_dump"
| [ 0:00] ## LVMCONF:     thin_repair_executable = "/usr/sbin/thin_repair"
| [ 0:00] ## LVMCONF:     use_lvmetad = 0
| [ 0:00] ## LVMCONF:     use_lvmlockd = 0
| [ 0:00] ## LVMCONF:     use_lvmpolld = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: log {
| [ 0:00] ## LVMCONF:     activation = 1
| [ 0:00] ## LVMCONF:     file = "@TESTDIR@/debug.log"
| [ 0:00] ## LVMCONF:     indent = 1
| [ 0:00] ## LVMCONF:     level = 9
| [ 0:00] ## LVMCONF:     overwrite = 1
| [ 0:00] ## LVMCONF:     syslog = 0
| [ 0:00] ## LVMCONF:     verbose = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] <======== Processing test: "backup-read-only.sh" ========>
| [ 0:00] 
| [ 0:00] which mkfs.ext3 || skip
| [ 0:00] #backup-read-only.sh:19+ which mkfs.ext3
| [ 0:00] /sbin/mkfs.ext3
| [ 0:00] 
| [ 0:00] aux prepare_vg 2
| [ 0:00] #backup-read-only.sh:21+ aux prepare_vg 2
| [ 0:00] ## preparing loop device....ok (/dev/loop0)
| [ 0:00] ## preparing 2 devices...lib/utils: line 212: DM_UDEV_COOKIE: unbound variable
| [ 0:00] set +vx; STACKTRACE; set -vx
| [ 0:00] ##backup-read-only.sh:21+ set +vx
| [ 0:00] ## - /lfskernel/sources/boot/LVM2.2.02.177/test/shell/backup-read-only.sh:21
| [ 0:00] ## 1 STACKTRACE() called from /lfskernel/sources/boot/LVM2.2.02.177/test/shell/backup-read-only.sh:21
| [ 0:00] <======== Info ========>
| [ 0:00] ## DMINFO:   Name             Maj Min Stat Open Targ Event  UUID                                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv2  253   3 L--w    0    1      0 TEST-@PREFIX@pv2                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv1  253   4 L--w    0    1      0 TEST-@PREFIX@pv1                                                
| [ 0:00] <======== Active table ========>
| [ 0:00] ## DMTABLE:  @PREFIX@pv2: 0 69632 linear 7:0 71680
| [ 0:00] ## DMTABLE:  @PREFIX@pv1: 0 69632 linear 7:0 2048
| [ 0:00] <======== Inactive table ========>
| [ 0:00] ## DMITABLE: @PREFIX@pv2: 
| [ 0:00] ## DMITABLE: @PREFIX@pv1: 
| [ 0:00] <======== Status ========>
| [ 0:00] ## DMSTATUS: @PREFIX@pv2: 0 69632 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv1: 0 69632 linear 
| [ 0:00] <======== Tree ========>
| [ 0:00] ## DMTREE:   @PREFIX@pv2 (253:3)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   @PREFIX@pv1 (253:4)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   LFS_vg-lfs (253:2)
| [ 0:00] ## DMTREE:    `- (8:16)
| [ 0:00] ## DMTREE:   centos-swap (253:1)
| [ 0:00] ## DMTREE:    `- (8:2)
| [ 0:00] ## DMTREE:   centos-root (253:0)
| [ 0:00] ## DMTREE:    `- (8:2)
| [ 0:00] <======== Recursive list of @TESTDIR@/dev ========>
| [ 0:00] ## LSLR:	@TESTDIR@/dev:
| [ 0:00] ## LSLR:	total 4
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 0 Feb 21 02:26 loop0
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 1 Feb 21 02:26 loop1
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 2 Feb 21 02:26 loop2
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 3 Feb 21 02:26 loop3
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 4 Feb 21 02:26 loop4
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 5 Feb 21 02:26 loop5
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 6 Feb 21 02:26 loop6
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 7 Feb 21 02:26 loop7
| [ 0:00] ## LSLR:	drwxr-xr-x 2 root root 4096 Feb 21 02:26 mapper
| [ 0:00] ## LSLR:	crw-r--r-- 1 root root 1, 3 Feb 21 02:26 testnull
| [ 0:00] ## LSLR:	
| [ 0:00] ## LSLR:	@TESTDIR@/dev/mapper:
| [ 0:00] ## LSLR:	total 0
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   4 Feb 21 02:26 @PREFIX@pv1
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   3 Feb 21 02:26 @PREFIX@pv2
| [ 0:00] ## LSLR:	crw------- 1 root root  10, 236 Feb 21 02:26 control
| [ 0:00] <======== Udev DB content ========>
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-0
| [ 0:00] ## UDEV:	N: dm-0
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-0
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-0
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=0
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-1
| [ 0:00] ## UDEV:	N: dm-1
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-1
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-1
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=1
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-2
| [ 0:00] ## UDEV:	N: dm-2
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-2
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-2
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=2
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-3
| [ 0:00] ## UDEV:	N: dm-3
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-3
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-3
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=3
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-4
| [ 0:00] ## UDEV:	N: dm-4
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-4
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-4
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=4
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/loop0
| [ 0:00] ## UDEV:	N: loop0
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/loop0
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/loop0
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=7
| [ 0:00] ## UDEV:	E: MINOR=0
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] <======== Script file "backup-read-only.sh" ========>
| [ 0:00] ## Line: 1 	 #!/usr/bin/env bash
| [ 0:00] ## Line: 2 	 
| [ 0:00] ## Line: 3 	 # Copyright (C) 2015 Red Hat, Inc. All rights reserved.
| [ 0:00] ## Line: 4 	 #
| [ 0:00] ## Line: 5 	 # This copyrighted material is made available to anyone wishing to use,
| [ 0:00] ## Line: 6 	 # modify, copy, or redistribute it subject to the terms and conditions
| [ 0:00] ## Line: 7 	 # of the GNU General Public License v.2.
| [ 0:00] ## Line: 8 	 #
| [ 0:00] ## Line: 9 	 # You should have received a copy of the GNU General Public License
| [ 0:00] ## Line: 10 	 # along with this program; if not, write to the Free Software Foundation,
| [ 0:00] ## Line: 11 	 # Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA
| [ 0:00] ## Line: 12 	 
| [ 0:00] ## Line: 13 	 SKIP_WITH_LVMLOCKD=1
| [ 0:00] ## Line: 14 	 SKIP_WITH_CLVMD=1
| [ 0:00] ## Line: 15 	 SKIP_WITH_LVMPOLLD=1
| [ 0:00] ## Line: 16 	 
| [ 0:00] ## Line: 17 	 . lib/inittest
| [ 0:00] ## Line: 18 	 
| [ 0:00] ## Line: 19 	 which mkfs.ext3 || skip
| [ 0:00] ## Line: 20 	 
| [ 0:00] ## Line: 21 	 aux prepare_vg 2
| [ 0:00] ## Line: 22 	 
| [ 0:00] ## Line: 23 	 # Note: inittest.sh  sets   LVM_SYSTEM_DIR to 'just' etc
| [ 0:00] ## Line: 24 	 etc_lv="$DM_DEV_DIR/$vg/$lv1"
| [ 0:00] ## Line: 25 	 
| [ 0:00] ## Line: 26 	 cleanup_mounted_and_teardown()
| [ 0:00] ## Line: 27 	 {
| [ 0:00] ## Line: 28 	 	umount "$mount_dir" || true
| [ 0:00] ## Line: 29 	 	aux teardown
| [ 0:00] ## Line: 30 	 }
| [ 0:00] ## Line: 31 	 
| [ 0:00] ## Line: 32 	 vgreduce $vg "$dev2"
| [ 0:00] ## Line: 33 	 
| [ 0:00] ## Line: 34 	 lvcreate -n $lv1 -l 20%FREE $vg
| [ 0:00] ## Line: 35 	 mkfs.ext3 -b4096 -j "$etc_lv"
| [ 0:00] ## Line: 36 	 
| [ 0:00] ## Line: 37 	 #
| [ 0:00] ## Line: 38 	 # check  read-only  archive dir
| [ 0:00] ## Line: 39 	 #
| [ 0:00] ## Line: 40 	 mount_dir="etc/archive"
| [ 0:00] ## Line: 41 	 trap 'cleanup_mounted_and_teardown' EXIT
| [ 0:00] ## Line: 42 	 mkdir -p "$mount_dir"
| [ 0:00] ## Line: 43 	 mount -n -r "$etc_lv" "$mount_dir"
| [ 0:00] ## Line: 44 	 
| [ 0:00] ## Line: 45 	 aux lvmconf "backup/archive = 1" "backup/backup = 1"
| [ 0:00] ## Line: 46 	 
| [ 0:00] ## Line: 47 	 # cannot archive to read-only - requires user to specify -An
| [ 0:00] ## Line: 48 	 not lvcreate -n $lv2 -l 10%FREE $vg
| [ 0:00] ## Line: 49 	 lvcreate -An -n $lv2 -l 10%FREE $vg
| [ 0:00] ## Line: 50 	 
| [ 0:00] ## Line: 51 	 not vgextend  $vg "$dev2"
| [ 0:00] ## Line: 52 	 vgextend -An $vg "$dev2"
| [ 0:00] ## Line: 53 	 
| [ 0:00] ## Line: 54 	 umount "$mount_dir" || true
| [ 0:00] ## Line: 55 	 
| [ 0:00] ## Line: 56 	 vgreduce $vg "$dev2"
| [ 0:00] ## Line: 57 	 
| [ 0:00] ## Line: 58 	 #
| [ 0:00] ## Line: 59 	 # check  read-only  backup dir
| [ 0:00] ## Line: 60 	 #
| [ 0:00] ## Line: 61 	 mount_dir="etc/backup"
| [ 0:00] ## Line: 62 	 mount -n -r "$etc_lv" "$mount_dir"
| [ 0:00] ## Line: 63 	 
| [ 0:00] ## Line: 64 	 # Must not fail on making backup
| [ 0:00] ## Line: 65 	 vgscan
| [ 0:00] ## Line: 66 	 
| [ 0:00] ## Line: 67 	 lvcreate -An -n $lv3 -l 10%FREE $vg
| [ 0:00] ## Line: 68 	 
| [ 0:00] ## Line: 69 	 vgextend $vg "$dev2"
| [ 0:00] ## Line: 70 	 
| [ 0:00] ## Line: 71 	 #
| [ 0:00] ## Line: 72 	 # Now check both archive & backup read-only
| [ 0:00] ## Line: 73 	 #
| [ 0:00] ## Line: 74 	 rm -rf etc/archive
| [ 0:00] ## Line: 75 	 ln -s backup etc/archive
| [ 0:00] ## Line: 76 	 
| [ 0:00] ## Line: 77 	 # Must not fail on making backup
| [ 0:00] ## Line: 78 	 vgscan
| [ 0:00] ## Line: 79 	 lvcreate -An -n $lv4 -l 10%FREE $vg
| [ 0:00] ## Line: 80 	 
| [ 0:00] ## Line: 81 	 umount "$mount_dir" || true
| [ 0:00] ## Line: 82 	 
| [ 0:00] ## Line: 83 	 # TODO maybe also support --ignorelockingfailure ??
| [ 0:00] ## Line: 84 	 vgremove -ff $vg
| [ 0:00] aux teardown
| [ 0:00] #backup-read-only.sh:1+ aux teardown
| [ 0:00] ## teardown.........ok
###       failed: [ndev-vanilla] shell/backup-read-only.sh
###      skipped: [ndev-vanilla] shell/cache-metadata2.sh
###      skipped: [ndev-vanilla] shell/clvmd-restart.sh

| [ 0:00] Library version:   1.02.146 (2017-12-18)
| [ 0:00] Driver version:    4.35.0
| [ 0:00] Kernel is Linux localhost.localdomain 3.10.0-693.11.1.el7.x86_64 #1 SMP Mon Dec 4 23:52:40 UTC 2017 x86_64 GNU/Linux
| [ 0:00] Selinux mode is not installed.
| [ 0:00]               total        used        free      shared  buff/cache   available
| [ 0:00] Mem:           7822        1075        4157          10        2590        6440
| [ 0:00] Swap:          4095           0        4095
| [ 0:00] Filesystem      Size  Used Avail Use% Mounted on
| [ 0:00] /dev/sdc1        18G  8.4G  8.4G  50% /
| [ 0:00] /dev/sdd1        51G  6.1G   43G  13% /lfskernel
| [ 0:00] devtmpfs        3.9G     0  3.9G   0% /dev
| [ 0:00] tmpfs           3.9G     0  3.9G   0% /run
| [ 0:00] @TESTDIR=/tmp/LVMTEST25406.XNEJE7wA6t
| [ 0:00] @PREFIX=LVMTEST25406
| [ 0:00] ## LVMCONF: activation {
| [ 0:00] ## LVMCONF:     checks = 1
| [ 0:00] ## LVMCONF:     monitoring = 0
| [ 0:00] ## LVMCONF:     polling_interval = 1
| [ 0:00] ## LVMCONF:     raid_region_size = 512
| [ 0:00] ## LVMCONF:     retry_deactivation = 1
| [ 0:00] ## LVMCONF:     snapshot_autoextend_percent = 50
| [ 0:00] ## LVMCONF:     snapshot_autoextend_threshold = 50
| [ 0:00] ## LVMCONF:     udev_rules = 1
| [ 0:00] ## LVMCONF:     udev_sync = 1
| [ 0:00] ## LVMCONF:     verify_udev_operations = 1
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: allocation {
| [ 0:00] ## LVMCONF:     wipe_signatures_when_zeroing_new_lvs = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: backup {
| [ 0:00] ## LVMCONF:     archive = 0
| [ 0:00] ## LVMCONF:     backup = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: devices {
| [ 0:00] ## LVMCONF:     cache_dir = "@TESTDIR@/etc"
| [ 0:00] ## LVMCONF:     default_data_alignment = 1
| [ 0:00] ## LVMCONF:     dir = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     filter = "a|.*|"
| [ 0:00] ## LVMCONF:     global_filter = [ "a|@TESTDIR@/dev/mapper/@PREFIX@.*pv[0-9_]*$|", "r|.*|" ]
| [ 0:00] ## LVMCONF:     md_component_detection  = 0
| [ 0:00] ## LVMCONF:     scan = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     sysfs_scan = 1
| [ 0:00] ## LVMCONF:     write_cache_state = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: dmeventd {
| [ 0:00] ## LVMCONF:     executable = "/sources/boot/LVM2.2.02.177/test/lib/dmeventd"
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: global {
| [ 0:00] ## LVMCONF:     abort_on_internal_errors = 1
| [ 0:00] ## LVMCONF:     cache_check_executable = "/usr/sbin/cache_check"
| [ 0:00] ## LVMCONF:     cache_dump_executable = "/usr/sbin/cache_dump"
| [ 0:00] ## LVMCONF:     cache_repair_executable = "/usr/sbin/cache_repair"
| [ 0:00] ## LVMCONF:     detect_internal_vg_cache_corruption = 1
| [ 0:00] ## LVMCONF:     fallback_to_local_locking = 0
| [ 0:00] ## LVMCONF:     fsadm_executable = "/sources/boot/LVM2.2.02.177/test/lib/fsadm"
| [ 0:00] ## LVMCONF:     library_dir = "@TESTDIR@/lib"
| [ 0:00] ## LVMCONF:     locking_dir = "@TESTDIR@/var/lock/lvm"
| [ 0:00] ## LVMCONF:     locking_type=1
| [ 0:00] ## LVMCONF:     notify_dbus = 0
| [ 0:00] ## LVMCONF:     si_unit_consistency = 1
| [ 0:00] ## LVMCONF:     thin_check_executable = "/usr/sbin/thin_check"
| [ 0:00] ## LVMCONF:     thin_dump_executable = "/usr/sbin/thin_dump"
| [ 0:00] ## LVMCONF:     thin_repair_executable = "/usr/sbin/thin_repair"
| [ 0:00] ## LVMCONF:     use_lvmetad = 0
| [ 0:00] ## LVMCONF:     use_lvmlockd = 0
| [ 0:00] ## LVMCONF:     use_lvmpolld = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: log {
| [ 0:00] ## LVMCONF:     activation = 1
| [ 0:00] ## LVMCONF:     file = "@TESTDIR@/debug.log"
| [ 0:00] ## LVMCONF:     indent = 1
| [ 0:00] ## LVMCONF:     level = 9
| [ 0:00] ## LVMCONF:     overwrite = 1
| [ 0:00] ## LVMCONF:     syslog = 0
| [ 0:00] ## LVMCONF:     verbose = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] <======== Processing test: "covercmd.sh" ========>
| [ 0:00] 
| [ 0:00] aux prepare_pvs 5
| [ 0:00] #covercmd.sh:23+ aux prepare_pvs 5
| [ 0:00] ## preparing loop device....ok (/dev/loop0)
| [ 0:00] ## preparing 5 devices...lib/utils: line 212: DM_UDEV_COOKIE: unbound variable
| [ 0:00] set +vx; STACKTRACE; set -vx
| [ 0:00] ##covercmd.sh:23+ set +vx
| [ 0:00] ## - /lfskernel/sources/boot/LVM2.2.02.177/test/shell/covercmd.sh:23
| [ 0:00] ## 1 STACKTRACE() called from /lfskernel/sources/boot/LVM2.2.02.177/test/shell/covercmd.sh:23
| [ 0:00] <======== Info ========>
| [ 0:00] ## DMINFO:   Name             Maj Min Stat Open Targ Event  UUID                                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv5  253   6 L--w    0    1      0 TEST-@PREFIX@pv5                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv4  253   4 L--w    0    1      0 TEST-@PREFIX@pv4                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv3  253   3 L--w    0    1      0 TEST-@PREFIX@pv3                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv2  253   7 L--w    0    1      0 TEST-@PREFIX@pv2                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv1  253   5 L--w    0    1      0 TEST-@PREFIX@pv1                                                
| [ 0:00] <======== Active table ========>
| [ 0:00] ## DMTABLE:  @PREFIX@pv5: 0 69632 linear 7:0 280576
| [ 0:00] ## DMTABLE:  @PREFIX@pv4: 0 69632 linear 7:0 210944
| [ 0:00] ## DMTABLE:  @PREFIX@pv3: 0 69632 linear 7:0 141312
| [ 0:00] ## DMTABLE:  @PREFIX@pv2: 0 69632 linear 7:0 71680
| [ 0:00] ## DMTABLE:  @PREFIX@pv1: 0 69632 linear 7:0 2048
| [ 0:00] <======== Inactive table ========>
| [ 0:00] ## DMITABLE: @PREFIX@pv5: 
| [ 0:00] ## DMITABLE: @PREFIX@pv4: 
| [ 0:00] ## DMITABLE: @PREFIX@pv3: 
| [ 0:00] ## DMITABLE: @PREFIX@pv2: 
| [ 0:00] ## DMITABLE: @PREFIX@pv1: 
| [ 0:00] <======== Status ========>
| [ 0:00] ## DMSTATUS: @PREFIX@pv5: 0 69632 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv4: 0 69632 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv3: 0 69632 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv2: 0 69632 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv1: 0 69632 linear 
| [ 0:00] <======== Tree ========>
| [ 0:00] ## DMTREE:   @PREFIX@pv5 (253:6)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   @PREFIX@pv4 (253:4)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   @PREFIX@pv3 (253:3)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   @PREFIX@pv2 (253:7)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   @PREFIX@pv1 (253:5)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   LFS_vg-lfs (253:2)
| [ 0:00] ## DMTREE:    `- (8:16)
| [ 0:00] ## DMTREE:   centos-swap (253:1)
| [ 0:00] ## DMTREE:    `- (8:2)
| [ 0:00] ## DMTREE:   centos-root (253:0)
| [ 0:00] ## DMTREE:    `- (8:2)
| [ 0:00] <======== Recursive list of @TESTDIR@/dev ========>
| [ 0:00] ## LSLR:	@TESTDIR@/dev:
| [ 0:00] ## LSLR:	total 4
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 0 Feb 21 02:26 loop0
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 1 Feb 21 02:26 loop1
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 2 Feb 21 02:26 loop2
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 3 Feb 21 02:26 loop3
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 4 Feb 21 02:26 loop4
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 5 Feb 21 02:26 loop5
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 6 Feb 21 02:26 loop6
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 7 Feb 21 02:26 loop7
| [ 0:00] ## LSLR:	drwxr-xr-x 2 root root 4096 Feb 21 02:26 mapper
| [ 0:00] ## LSLR:	crw-r--r-- 1 root root 1, 3 Feb 21 02:26 testnull
| [ 0:00] ## LSLR:	
| [ 0:00] ## LSLR:	@TESTDIR@/dev/mapper:
| [ 0:00] ## LSLR:	total 0
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   5 Feb 21 02:26 @PREFIX@pv1
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   7 Feb 21 02:26 @PREFIX@pv2
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   3 Feb 21 02:26 @PREFIX@pv3
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   4 Feb 21 02:26 @PREFIX@pv4
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   6 Feb 21 02:26 @PREFIX@pv5
| [ 0:00] ## LSLR:	crw------- 1 root root  10, 236 Feb 21 02:26 control
| [ 0:00] <======== Udev DB content ========>
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-0
| [ 0:00] ## UDEV:	N: dm-0
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-0
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-0
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=0
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-1
| [ 0:00] ## UDEV:	N: dm-1
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-1
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-1
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=1
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-2
| [ 0:00] ## UDEV:	N: dm-2
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-2
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-2
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=2
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-3
| [ 0:00] ## UDEV:	N: dm-3
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-3
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-3
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=3
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-4
| [ 0:00] ## UDEV:	N: dm-4
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-4
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-4
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=4
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-5
| [ 0:00] ## UDEV:	N: dm-5
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-5
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-5
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=5
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-6
| [ 0:00] ## UDEV:	N: dm-6
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-6
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-6
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=6
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-7
| [ 0:00] ## UDEV:	N: dm-7
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-7
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-7
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=7
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/loop0
| [ 0:00] ## UDEV:	N: loop0
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/loop0
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/loop0
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=7
| [ 0:00] ## UDEV:	E: MINOR=0
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] <======== Script file "covercmd.sh" ========>
| [ 0:00] ## Line: 1 	 #!/usr/bin/env bash
| [ 0:00] ## Line: 2 	 
| [ 0:00] ## Line: 3 	 # Copyright (C) 2008-2014 Red Hat, Inc. All rights reserved.
| [ 0:00] ## Line: 4 	 #
| [ 0:00] ## Line: 5 	 # This copyrighted material is made available to anyone wishing to use,
| [ 0:00] ## Line: 6 	 # modify, copy, or redistribute it subject to the terms and conditions
| [ 0:00] ## Line: 7 	 # of the GNU General Public License v.2.
| [ 0:00] ## Line: 8 	 #
| [ 0:00] ## Line: 9 	 # You should have received a copy of the GNU General Public License
| [ 0:00] ## Line: 10 	 # along with this program; if not, write to the Free Software Foundation,
| [ 0:00] ## Line: 11 	 # Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA
| [ 0:00] ## Line: 12 	 
| [ 0:00] ## Line: 13 	 #
| [ 0:00] ## Line: 14 	 # tests functionality we don't have in other special test files yet
| [ 0:00] ## Line: 15 	 # to improve code coverage
| [ 0:00] ## Line: 16 	 #
| [ 0:00] ## Line: 17 	 
| [ 0:00] ## Line: 18 	 SKIP_WITH_LVMLOCKD=1
| [ 0:00] ## Line: 19 	 SKIP_WITH_LVMPOLLD=1
| [ 0:00] ## Line: 20 	 
| [ 0:00] ## Line: 21 	 . lib/inittest
| [ 0:00] ## Line: 22 	 
| [ 0:00] ## Line: 23 	 aux prepare_pvs 5
| [ 0:00] ## Line: 24 	 get_devs
| [ 0:00] ## Line: 25 	 
| [ 0:00] ## Line: 26 	 pvcreate --metadatacopies 0 "$dev2"
| [ 0:00] ## Line: 27 	 pvcreate --metadatacopies 0 "$dev3"
| [ 0:00] ## Line: 28 	 
| [ 0:00] ## Line: 29 	 # FIXME takes very long time
| [ 0:00] ## Line: 30 	 #pvck "$dev1"
| [ 0:00] ## Line: 31 	 
| [ 0:00] ## Line: 32 	 vgcreate "$vg" "${DEVICES[@]}"
| [ 0:00] ## Line: 33 	 
| [ 0:00] ## Line: 34 	 lvcreate -l 5 -i5 -I256 -n $lv $vg
| [ 0:00] ## Line: 35 	 lvcreate -aey -l 5 -n $lv1 $vg
| [ 0:00] ## Line: 36 	 lvcreate -s -l 5 -n $lv2 $vg/$lv1
| [ 0:00] ## Line: 37 	 pvck "$dev1"
| [ 0:00] ## Line: 38 	 
| [ 0:00] ## Line: 39 	 # "-persistent y --major 254 --minor 20"
| [ 0:00] ## Line: 40 	 # "-persistent n"
| [ 0:00] ## Line: 41 	 for i in pr "p rw" "-monitor y" "-monitor n" -refresh; do
| [ 0:00] ## Line: 42 	 	lvchange -$i $vg/$lv
| [ 0:00] ## Line: 43 	 done
| [ 0:00] ## Line: 44 	 
| [ 0:00] ## Line: 45 	 lvrename $vg $lv $lv-rename
| [ 0:00] ## Line: 46 	 invalid lvrename $vg
| [ 0:00] ## Line: 47 	 invalid lvrename $vg $vg/$lv-rename $vg1/$lv
| [ 0:00] ## Line: 48 	 invalid lvrename $vg/$lv-rename $vg1/$lv $vg
| [ 0:00] ## Line: 49 	 invalid lvrename $vg/$lv-rename $vg/012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789
| [ 0:00] ## Line: 50 	 invalid lvrename $vg/$lv-rename $vg/""
| [ 0:00] ## Line: 51 	 invalid lvrename $vg/$lv-rename "$vg/!@#$%"
| [ 0:00] ## Line: 52 	 invalid lvrename $vg/$lv-rename $vg/$lv-rename
| [ 0:00] ## Line: 53 	 fail lvrename $vg1/$lv-rename $vg1/$lv
| [ 0:00] ## Line: 54 	 
| [ 0:00] ## Line: 55 	 vgremove -f $vg
| [ 0:00] ## Line: 56 	 
| [ 0:00] ## Line: 57 	 
| [ 0:00] ## Line: 58 	 # test pvresize functionality
| [ 0:00] ## Line: 59 	 # missing params
| [ 0:00] ## Line: 60 	 not pvresize
| [ 0:00] ## Line: 61 	 # negative size
| [ 0:00] ## Line: 62 	 not pvresize --setphysicalvolumesize -10M -y "$dev1"
| [ 0:00] ## Line: 63 	 # not existing device
| [ 0:00] ## Line: 64 	 not pvresize --setphysicalvolumesize 10M -y "$dev7"
| [ 0:00] ## Line: 65 	 pvresize --setphysicalvolumesize 10M -y "$dev1"
| [ 0:00] ## Line: 66 	 pvresize "$dev1"
| [ 0:00] ## Line: 67 	 
| [ 0:00] ## Line: 68 	 
| [ 0:00] ## Line: 69 	 # test various lvm utils
| [ 0:00] ## Line: 70 	 lvm dumpconfig
| [ 0:00] ## Line: 71 	 lvm devtypes
| [ 0:00] ## Line: 72 	 lvm formats
| [ 0:00] ## Line: 73 	 lvm segtypes
| [ 0:00] ## Line: 74 	 lvm tags
| [ 0:00] ## Line: 75 	 
| [ 0:00] ## Line: 76 	 
| [ 0:00] ## Line: 77 	 # test obsoleted tools
| [ 0:00] ## Line: 78 	 not lvm lvmchange
| [ 0:00] ## Line: 79 	 not lvm lvmsadc
| [ 0:00] ## Line: 80 	 not lvm lvmsar
| [ 0:00] ## Line: 81 	 not lvm pvdata
| [ 0:00] aux teardown
| [ 0:00] #covercmd.sh:1+ aux teardown
| [ 0:00] ## teardown.........ok
###       failed: [ndev-vanilla] shell/covercmd.sh
###      skipped: [ndev-vanilla] shell/discards-thin.sh
###      skipped: [ndev-vanilla] shell/dmeventd-restart.sh
###      skipped: [ndev-vanilla] shell/dmsetup-integrity-keys.sh
###      skipped: [ndev-vanilla] shell/dmsetup-keyring.sh

| [ 0:00] Library version:   1.02.146 (2017-12-18)
| [ 0:00] Driver version:    4.35.0
| [ 0:00] Kernel is Linux localhost.localdomain 3.10.0-693.11.1.el7.x86_64 #1 SMP Mon Dec 4 23:52:40 UTC 2017 x86_64 GNU/Linux
| [ 0:00] Selinux mode is not installed.
| [ 0:00]               total        used        free      shared  buff/cache   available
| [ 0:00] Mem:           7822        1075        4156          10        2590        6440
| [ 0:00] Swap:          4095           0        4095
| [ 0:00] Filesystem      Size  Used Avail Use% Mounted on
| [ 0:00] /dev/sdc1        18G  8.4G  8.4G  50% /
| [ 0:00] /dev/sdd1        51G  6.1G   43G  13% /lfskernel
| [ 0:00] devtmpfs        3.9G     0  3.9G   0% /dev
| [ 0:00] tmpfs           3.9G     0  3.9G   0% /run
| [ 0:00] @TESTDIR=/tmp/LVMTEST25895.yCeAVZsfk4
| [ 0:00] @PREFIX=LVMTEST25895
| [ 0:00] ## LVMCONF: activation {
| [ 0:00] ## LVMCONF:     checks = 1
| [ 0:00] ## LVMCONF:     monitoring = 0
| [ 0:00] ## LVMCONF:     polling_interval = 1
| [ 0:00] ## LVMCONF:     raid_region_size = 512
| [ 0:00] ## LVMCONF:     retry_deactivation = 1
| [ 0:00] ## LVMCONF:     snapshot_autoextend_percent = 50
| [ 0:00] ## LVMCONF:     snapshot_autoextend_threshold = 50
| [ 0:00] ## LVMCONF:     udev_rules = 1
| [ 0:00] ## LVMCONF:     udev_sync = 1
| [ 0:00] ## LVMCONF:     verify_udev_operations = 1
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: allocation {
| [ 0:00] ## LVMCONF:     wipe_signatures_when_zeroing_new_lvs = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: backup {
| [ 0:00] ## LVMCONF:     archive = 0
| [ 0:00] ## LVMCONF:     backup = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: devices {
| [ 0:00] ## LVMCONF:     cache_dir = "@TESTDIR@/etc"
| [ 0:00] ## LVMCONF:     default_data_alignment = 1
| [ 0:00] ## LVMCONF:     dir = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     filter = "a|.*|"
| [ 0:00] ## LVMCONF:     global_filter = [ "a|@TESTDIR@/dev/mapper/@PREFIX@.*pv[0-9_]*$|", "r|.*|" ]
| [ 0:00] ## LVMCONF:     md_component_detection  = 0
| [ 0:00] ## LVMCONF:     scan = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     sysfs_scan = 1
| [ 0:00] ## LVMCONF:     write_cache_state = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: dmeventd {
| [ 0:00] ## LVMCONF:     executable = "/sources/boot/LVM2.2.02.177/test/lib/dmeventd"
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: global {
| [ 0:00] ## LVMCONF:     abort_on_internal_errors = 1
| [ 0:00] ## LVMCONF:     cache_check_executable = "/usr/sbin/cache_check"
| [ 0:00] ## LVMCONF:     cache_dump_executable = "/usr/sbin/cache_dump"
| [ 0:00] ## LVMCONF:     cache_repair_executable = "/usr/sbin/cache_repair"
| [ 0:00] ## LVMCONF:     detect_internal_vg_cache_corruption = 1
| [ 0:00] ## LVMCONF:     fallback_to_local_locking = 0
| [ 0:00] ## LVMCONF:     fsadm_executable = "/sources/boot/LVM2.2.02.177/test/lib/fsadm"
| [ 0:00] ## LVMCONF:     library_dir = "@TESTDIR@/lib"
| [ 0:00] ## LVMCONF:     locking_dir = "@TESTDIR@/var/lock/lvm"
| [ 0:00] ## LVMCONF:     locking_type=1
| [ 0:00] ## LVMCONF:     notify_dbus = 0
| [ 0:00] ## LVMCONF:     si_unit_consistency = 1
| [ 0:00] ## LVMCONF:     thin_check_executable = "/usr/sbin/thin_check"
| [ 0:00] ## LVMCONF:     thin_dump_executable = "/usr/sbin/thin_dump"
| [ 0:00] ## LVMCONF:     thin_repair_executable = "/usr/sbin/thin_repair"
| [ 0:00] ## LVMCONF:     use_lvmetad = 0
| [ 0:00] ## LVMCONF:     use_lvmlockd = 0
| [ 0:00] ## LVMCONF:     use_lvmpolld = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: log {
| [ 0:00] ## LVMCONF:     activation = 1
| [ 0:00] ## LVMCONF:     file = "@TESTDIR@/debug.log"
| [ 0:00] ## LVMCONF:     indent = 1
| [ 0:00] ## LVMCONF:     level = 9
| [ 0:00] ## LVMCONF:     overwrite = 1
| [ 0:00] ## LVMCONF:     syslog = 0
| [ 0:00] ## LVMCONF:     verbose = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] <======== Processing test: "dmstats-create.sh" ========>
| [ 0:00] 
| [ 0:00] # Don't attempt to test stats with driver < 4.33.00
| [ 0:00] aux driver_at_least 4 33 || skip
| [ 0:00] #dmstats-create.sh:18+ aux driver_at_least 4 33
| [ 0:00] 
| [ 0:00] # ensure we can create devices (uses dmsetup, etc)
| [ 0:00] aux prepare_devs 1
| [ 0:00] #dmstats-create.sh:21+ aux prepare_devs 1
| [ 0:00] ## preparing loop device....ok (/dev/loop0)
| [ 0:00] ## preparing 1 devices...lib/utils: line 212: DM_UDEV_COOKIE: unbound variable
| [ 0:00] set +vx; STACKTRACE; set -vx
| [ 0:00] ##dmstats-create.sh:21+ set +vx
| [ 0:00] ## - /lfskernel/sources/boot/LVM2.2.02.177/test/shell/dmstats-create.sh:21
| [ 0:00] ## 1 STACKTRACE() called from /lfskernel/sources/boot/LVM2.2.02.177/test/shell/dmstats-create.sh:21
| [ 0:00] <======== Info ========>
| [ 0:01] ## DMINFO:   Name             Maj Min Stat Open Targ Event  UUID                                                                
| [ 0:01] ## DMINFO:   @PREFIX@pv1  253   3 L--w    0    1      0 TEST-@PREFIX@pv1                                                
| [ 0:01] <======== Active table ========>
| [ 0:01] ## DMTABLE:  @PREFIX@pv1: 0 69632 linear 7:0 2048
| [ 0:01] <======== Inactive table ========>
| [ 0:01] ## DMITABLE: @PREFIX@pv1: 
| [ 0:01] <======== Status ========>
| [ 0:01] ## DMSTATUS: @PREFIX@pv1: 0 69632 linear 
| [ 0:01] <======== Tree ========>
| [ 0:01] ## DMTREE:   @PREFIX@pv1 (253:3)
| [ 0:01] ## DMTREE:    `- (7:0)
| [ 0:01] ## DMTREE:   LFS_vg-lfs (253:2)
| [ 0:01] ## DMTREE:    `- (8:16)
| [ 0:01] ## DMTREE:   centos-swap (253:1)
| [ 0:01] ## DMTREE:    `- (8:2)
| [ 0:01] ## DMTREE:   centos-root (253:0)
| [ 0:01] ## DMTREE:    `- (8:2)
| [ 0:01] <======== Recursive list of @TESTDIR@/dev ========>
| [ 0:01] ## LSLR:	@TESTDIR@/dev:
| [ 0:01] ## LSLR:	total 4
| [ 0:01] ## LSLR:	brw-r--r-- 1 root root 7, 0 Feb 21 02:26 loop0
| [ 0:01] ## LSLR:	brw-r--r-- 1 root root 7, 1 Feb 21 02:26 loop1
| [ 0:01] ## LSLR:	brw-r--r-- 1 root root 7, 2 Feb 21 02:26 loop2
| [ 0:01] ## LSLR:	brw-r--r-- 1 root root 7, 3 Feb 21 02:26 loop3
| [ 0:01] ## LSLR:	brw-r--r-- 1 root root 7, 4 Feb 21 02:26 loop4
| [ 0:01] ## LSLR:	brw-r--r-- 1 root root 7, 5 Feb 21 02:26 loop5
| [ 0:01] ## LSLR:	brw-r--r-- 1 root root 7, 6 Feb 21 02:26 loop6
| [ 0:01] ## LSLR:	brw-r--r-- 1 root root 7, 7 Feb 21 02:26 loop7
| [ 0:01] ## LSLR:	drwxr-xr-x 2 root root 4096 Feb 21 02:26 mapper
| [ 0:01] ## LSLR:	crw-r--r-- 1 root root 1, 3 Feb 21 02:26 testnull
| [ 0:01] ## LSLR:	
| [ 0:01] ## LSLR:	@TESTDIR@/dev/mapper:
| [ 0:01] ## LSLR:	total 0
| [ 0:01] ## LSLR:	brw------- 1 root root 253,   3 Feb 21 02:26 @PREFIX@pv1
| [ 0:01] ## LSLR:	crw------- 1 root root  10, 236 Feb 21 02:26 control
| [ 0:01] <======== Udev DB content ========>
| [ 0:01] ## UDEV:	P: /devices/virtual/block/dm-0
| [ 0:01] ## UDEV:	N: dm-0
| [ 0:01] ## UDEV:	E: DEVNAME=/dev/dm-0
| [ 0:01] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-0
| [ 0:01] ## UDEV:	E: DEVTYPE=disk
| [ 0:01] ## UDEV:	E: MAJOR=253
| [ 0:01] ## UDEV:	E: MINOR=0
| [ 0:01] ## UDEV:	E: SUBSYSTEM=block
| [ 0:01] ## UDEV:	
| [ 0:01] ## UDEV:	P: /devices/virtual/block/dm-1
| [ 0:01] ## UDEV:	N: dm-1
| [ 0:01] ## UDEV:	E: DEVNAME=/dev/dm-1
| [ 0:01] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-1
| [ 0:01] ## UDEV:	E: DEVTYPE=disk
| [ 0:01] ## UDEV:	E: MAJOR=253
| [ 0:01] ## UDEV:	E: MINOR=1
| [ 0:01] ## UDEV:	E: SUBSYSTEM=block
| [ 0:01] ## UDEV:	
| [ 0:01] ## UDEV:	P: /devices/virtual/block/dm-2
| [ 0:01] ## UDEV:	N: dm-2
| [ 0:01] ## UDEV:	E: DEVNAME=/dev/dm-2
| [ 0:01] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-2
| [ 0:01] ## UDEV:	E: DEVTYPE=disk
| [ 0:01] ## UDEV:	E: MAJOR=253
| [ 0:01] ## UDEV:	E: MINOR=2
| [ 0:01] ## UDEV:	E: SUBSYSTEM=block
| [ 0:01] ## UDEV:	
| [ 0:01] ## UDEV:	P: /devices/virtual/block/dm-3
| [ 0:01] ## UDEV:	N: dm-3
| [ 0:01] ## UDEV:	E: DEVNAME=/dev/dm-3
| [ 0:01] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-3
| [ 0:01] ## UDEV:	E: DEVTYPE=disk
| [ 0:01] ## UDEV:	E: MAJOR=253
| [ 0:01] ## UDEV:	E: MINOR=3
| [ 0:01] ## UDEV:	E: SUBSYSTEM=block
| [ 0:01] ## UDEV:	
| [ 0:01] ## UDEV:	P: /devices/virtual/block/loop0
| [ 0:01] ## UDEV:	N: loop0
| [ 0:01] ## UDEV:	E: DEVNAME=/dev/loop0
| [ 0:01] ## UDEV:	E: DEVPATH=/devices/virtual/block/loop0
| [ 0:01] ## UDEV:	E: DEVTYPE=disk
| [ 0:01] ## UDEV:	E: MAJOR=7
| [ 0:01] ## UDEV:	E: MINOR=0
| [ 0:01] ## UDEV:	E: SUBSYSTEM=block
| [ 0:01] ## UDEV:	
| [ 0:01] <======== Script file "dmstats-create.sh" ========>
| [ 0:01] ## Line: 1 	 #!/usr/bin/env bash
| [ 0:01] ## Line: 2 	 
| [ 0:01] ## Line: 3 	 # Copyright (C) 2016 Red Hat, Inc. All rights reserved.
| [ 0:01] ## Line: 4 	 #
| [ 0:01] ## Line: 5 	 # This copyrighted material is made available to anyone wishing to use,
| [ 0:01] ## Line: 6 	 # modify, copy, or redistribute it subject to the terms and conditions
| [ 0:01] ## Line: 7 	 # of the GNU General Public License v.2.
| [ 0:01] ## Line: 8 	 #
| [ 0:01] ## Line: 9 	 # You should have received a copy of the GNU General Public License
| [ 0:01] ## Line: 10 	 # along with this program; if not, write to the Free Software Foundation,
| [ 0:01] ## Line: 11 	 # Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA
| [ 0:01] ## Line: 12 	 
| [ 0:01] ## Line: 13 	 SKIP_WITH_LVMPOLLD=1
| [ 0:01] ## Line: 14 	 
| [ 0:01] ## Line: 15 	 . lib/inittest
| [ 0:01] ## Line: 16 	 
| [ 0:01] ## Line: 17 	 # Don't attempt to test stats with driver < 4.33.00
| [ 0:01] ## Line: 18 	 aux driver_at_least 4 33 || skip
| [ 0:01] ## Line: 19 	 
| [ 0:01] ## Line: 20 	 # ensure we can create devices (uses dmsetup, etc)
| [ 0:01] ## Line: 21 	 aux prepare_devs 1
| [ 0:01] ## Line: 22 	 
| [ 0:01] ## Line: 23 	 # basic dmstats create commands
| [ 0:01] ## Line: 24 	 
| [ 0:01] ## Line: 25 	 dmstats create "$dev1"
| [ 0:01] ## Line: 26 	 dmstats create --start 0 --len 1 "$dev1"
| [ 0:01] ## Line: 27 	 dmstats create --segments "$dev1"
| [ 0:01] ## Line: 28 	 dmstats create --precise "$dev1"
| [ 0:01] ## Line: 29 	 dmstats create --bounds 10ms,20ms,30ms "$dev1"
| [ 0:01] aux teardown
| [ 0:01] #dmstats-create.sh:1+ aux teardown
| [ 0:01] ## teardown.........ok
###       failed: [ndev-vanilla] shell/dmstats-create.sh

| [ 0:00] Library version:   1.02.146 (2017-12-18)
| [ 0:00] Driver version:    4.35.0
| [ 0:00] Kernel is Linux localhost.localdomain 3.10.0-693.11.1.el7.x86_64 #1 SMP Mon Dec 4 23:52:40 UTC 2017 x86_64 GNU/Linux
| [ 0:00] Selinux mode is not installed.
| [ 0:00]               total        used        free      shared  buff/cache   available
| [ 0:00] Mem:           7822        1075        4156          10        2590        6440
| [ 0:00] Swap:          4095           0        4095
| [ 0:00] Filesystem      Size  Used Avail Use% Mounted on
| [ 0:00] /dev/sdc1        18G  8.4G  8.4G  50% /
| [ 0:00] /dev/sdd1        51G  6.1G   43G  13% /lfskernel
| [ 0:00] devtmpfs        3.9G     0  3.9G   0% /dev
| [ 0:00] tmpfs           3.9G     0  3.9G   0% /run
| [ 0:00] @TESTDIR=/tmp/LVMTEST26056.j1Z1lWcHgo
| [ 0:00] @PREFIX=LVMTEST26056
| [ 0:00] ## LVMCONF: activation {
| [ 0:00] ## LVMCONF:     checks = 1
| [ 0:00] ## LVMCONF:     monitoring = 0
| [ 0:00] ## LVMCONF:     polling_interval = 1
| [ 0:00] ## LVMCONF:     raid_region_size = 512
| [ 0:00] ## LVMCONF:     retry_deactivation = 1
| [ 0:00] ## LVMCONF:     snapshot_autoextend_percent = 50
| [ 0:00] ## LVMCONF:     snapshot_autoextend_threshold = 50
| [ 0:00] ## LVMCONF:     udev_rules = 1
| [ 0:00] ## LVMCONF:     udev_sync = 1
| [ 0:00] ## LVMCONF:     verify_udev_operations = 1
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: allocation {
| [ 0:00] ## LVMCONF:     wipe_signatures_when_zeroing_new_lvs = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: backup {
| [ 0:00] ## LVMCONF:     archive = 0
| [ 0:00] ## LVMCONF:     backup = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: devices {
| [ 0:00] ## LVMCONF:     cache_dir = "@TESTDIR@/etc"
| [ 0:00] ## LVMCONF:     default_data_alignment = 1
| [ 0:00] ## LVMCONF:     dir = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     filter = "a|.*|"
| [ 0:00] ## LVMCONF:     global_filter = [ "a|@TESTDIR@/dev/mapper/@PREFIX@.*pv[0-9_]*$|", "r|.*|" ]
| [ 0:00] ## LVMCONF:     md_component_detection  = 0
| [ 0:00] ## LVMCONF:     scan = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     sysfs_scan = 1
| [ 0:00] ## LVMCONF:     write_cache_state = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: dmeventd {
| [ 0:00] ## LVMCONF:     executable = "/sources/boot/LVM2.2.02.177/test/lib/dmeventd"
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: global {
| [ 0:00] ## LVMCONF:     abort_on_internal_errors = 1
| [ 0:00] ## LVMCONF:     cache_check_executable = "/usr/sbin/cache_check"
| [ 0:00] ## LVMCONF:     cache_dump_executable = "/usr/sbin/cache_dump"
| [ 0:00] ## LVMCONF:     cache_repair_executable = "/usr/sbin/cache_repair"
| [ 0:00] ## LVMCONF:     detect_internal_vg_cache_corruption = 1
| [ 0:00] ## LVMCONF:     fallback_to_local_locking = 0
| [ 0:00] ## LVMCONF:     fsadm_executable = "/sources/boot/LVM2.2.02.177/test/lib/fsadm"
| [ 0:00] ## LVMCONF:     library_dir = "@TESTDIR@/lib"
| [ 0:00] ## LVMCONF:     locking_dir = "@TESTDIR@/var/lock/lvm"
| [ 0:00] ## LVMCONF:     locking_type=1
| [ 0:00] ## LVMCONF:     notify_dbus = 0
| [ 0:00] ## LVMCONF:     si_unit_consistency = 1
| [ 0:00] ## LVMCONF:     thin_check_executable = "/usr/sbin/thin_check"
| [ 0:00] ## LVMCONF:     thin_dump_executable = "/usr/sbin/thin_dump"
| [ 0:00] ## LVMCONF:     thin_repair_executable = "/usr/sbin/thin_repair"
| [ 0:00] ## LVMCONF:     use_lvmetad = 0
| [ 0:00] ## LVMCONF:     use_lvmlockd = 0
| [ 0:00] ## LVMCONF:     use_lvmpolld = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: log {
| [ 0:00] ## LVMCONF:     activation = 1
| [ 0:00] ## LVMCONF:     file = "@TESTDIR@/debug.log"
| [ 0:00] ## LVMCONF:     indent = 1
| [ 0:00] ## LVMCONF:     level = 9
| [ 0:00] ## LVMCONF:     overwrite = 1
| [ 0:00] ## LVMCONF:     syslog = 0
| [ 0:00] ## LVMCONF:     verbose = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] <======== Processing test: "dmstats-report.sh" ========>
| [ 0:00] 
| [ 0:00] # Don't attempt to test stats with driver < 4.33.00
| [ 0:00] aux driver_at_least 4 33 || skip
| [ 0:00] #dmstats-report.sh:18+ aux driver_at_least 4 33
| [ 0:00] 
| [ 0:00] # ensure we can create devices (uses dmsetup, etc)
| [ 0:00] aux prepare_devs 1
| [ 0:00] #dmstats-report.sh:21+ aux prepare_devs 1
| [ 0:00] ## preparing loop device....ok (/dev/loop0)
| [ 0:00] ## preparing 1 devices...lib/utils: line 212: DM_UDEV_COOKIE: unbound variable
| [ 0:00] set +vx; STACKTRACE; set -vx
| [ 0:00] ##dmstats-report.sh:21+ set +vx
| [ 0:00] ## - /lfskernel/sources/boot/LVM2.2.02.177/test/shell/dmstats-report.sh:21
| [ 0:00] ## 1 STACKTRACE() called from /lfskernel/sources/boot/LVM2.2.02.177/test/shell/dmstats-report.sh:21
| [ 0:00] <======== Info ========>
| [ 0:00] ## DMINFO:   Name             Maj Min Stat Open Targ Event  UUID                                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv1  253   3 L--w    0    1      0 TEST-@PREFIX@pv1                                                
| [ 0:00] <======== Active table ========>
| [ 0:00] ## DMTABLE:  @PREFIX@pv1: 0 69632 linear 7:0 2048
| [ 0:00] <======== Inactive table ========>
| [ 0:00] ## DMITABLE: @PREFIX@pv1: 
| [ 0:00] <======== Status ========>
| [ 0:00] ## DMSTATUS: @PREFIX@pv1: 0 69632 linear 
| [ 0:00] <======== Tree ========>
| [ 0:00] ## DMTREE:   @PREFIX@pv1 (253:3)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   LFS_vg-lfs (253:2)
| [ 0:00] ## DMTREE:    `- (8:16)
| [ 0:00] ## DMTREE:   centos-swap (253:1)
| [ 0:00] ## DMTREE:    `- (8:2)
| [ 0:00] ## DMTREE:   centos-root (253:0)
| [ 0:00] ## DMTREE:    `- (8:2)
| [ 0:00] <======== Recursive list of @TESTDIR@/dev ========>
| [ 0:00] ## LSLR:	@TESTDIR@/dev:
| [ 0:00] ## LSLR:	total 4
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 0 Feb 21 02:26 loop0
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 1 Feb 21 02:26 loop1
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 2 Feb 21 02:26 loop2
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 3 Feb 21 02:26 loop3
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 4 Feb 21 02:26 loop4
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 5 Feb 21 02:26 loop5
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 6 Feb 21 02:26 loop6
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 7 Feb 21 02:26 loop7
| [ 0:00] ## LSLR:	drwxr-xr-x 2 root root 4096 Feb 21 02:26 mapper
| [ 0:00] ## LSLR:	crw-r--r-- 1 root root 1, 3 Feb 21 02:26 testnull
| [ 0:00] ## LSLR:	
| [ 0:00] ## LSLR:	@TESTDIR@/dev/mapper:
| [ 0:00] ## LSLR:	total 0
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   3 Feb 21 02:26 @PREFIX@pv1
| [ 0:00] ## LSLR:	crw------- 1 root root  10, 236 Feb 21 02:26 control
| [ 0:00] <======== Udev DB content ========>
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-0
| [ 0:00] ## UDEV:	N: dm-0
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-0
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-0
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=0
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-1
| [ 0:00] ## UDEV:	N: dm-1
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-1
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-1
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=1
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-2
| [ 0:00] ## UDEV:	N: dm-2
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-2
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-2
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=2
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-3
| [ 0:00] ## UDEV:	N: dm-3
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-3
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-3
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=3
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/loop0
| [ 0:00] ## UDEV:	N: loop0
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/loop0
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/loop0
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=7
| [ 0:00] ## UDEV:	E: MINOR=0
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] <======== Script file "dmstats-report.sh" ========>
| [ 0:00] ## Line: 1 	 #!/usr/bin/env bash
| [ 0:00] ## Line: 2 	 
| [ 0:00] ## Line: 3 	 # Copyright (C) 2016 Red Hat, Inc. All rights reserved.
| [ 0:00] ## Line: 4 	 #
| [ 0:00] ## Line: 5 	 # This copyrighted material is made available to anyone wishing to use,
| [ 0:00] ## Line: 6 	 # modify, copy, or redistribute it subject to the terms and conditions
| [ 0:00] ## Line: 7 	 # of the GNU General Public License v.2.
| [ 0:00] ## Line: 8 	 #
| [ 0:00] ## Line: 9 	 # You should have received a copy of the GNU General Public License
| [ 0:00] ## Line: 10 	 # along with this program; if not, write to the Free Software Foundation,
| [ 0:00] ## Line: 11 	 # Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA
| [ 0:00] ## Line: 12 	 
| [ 0:00] ## Line: 13 	 SKIP_WITH_LVMPOLLD=1
| [ 0:00] ## Line: 14 	 
| [ 0:00] ## Line: 15 	 . lib/inittest
| [ 0:00] ## Line: 16 	 
| [ 0:00] ## Line: 17 	 # Don't attempt to test stats with driver < 4.33.00
| [ 0:00] ## Line: 18 	 aux driver_at_least 4 33 || skip
| [ 0:00] ## Line: 19 	 
| [ 0:00] ## Line: 20 	 # ensure we can create devices (uses dmsetup, etc)
| [ 0:00] ## Line: 21 	 aux prepare_devs 1
| [ 0:00] ## Line: 22 	 
| [ 0:00] ## Line: 23 	 # prepare a stats region with a histogram
| [ 0:00] ## Line: 24 	 dmstats create --bounds 10ms,20ms,30ms "$dev1"
| [ 0:00] ## Line: 25 	 
| [ 0:00] ## Line: 26 	 # basic dmstats report commands
| [ 0:00] ## Line: 27 	 dmstats report
| [ 0:00] ## Line: 28 	 dmstats report --count 1
| [ 0:00] ## Line: 29 	 dmstats report --histogram
| [ 0:00] aux teardown
| [ 0:00] #dmstats-report.sh:1+ aux teardown
| [ 0:00] ## teardown.........ok
###       failed: [ndev-vanilla] shell/dmstats-report.sh
###       passed: [ndev-vanilla] shell/dumpconfig.sh

| [ 0:00] Library version:   1.02.146 (2017-12-18)
| [ 0:00] Driver version:    4.35.0
| [ 0:00] Kernel is Linux localhost.localdomain 3.10.0-693.11.1.el7.x86_64 #1 SMP Mon Dec 4 23:52:40 UTC 2017 x86_64 GNU/Linux
| [ 0:00] Selinux mode is not installed.
| [ 0:00]               total        used        free      shared  buff/cache   available
| [ 0:00] Mem:           7822        1075        4156          10        2590        6440
| [ 0:00] Swap:          4095           0        4095
| [ 0:00] Filesystem      Size  Used Avail Use% Mounted on
| [ 0:00] /dev/sdc1        18G  8.4G  8.4G  50% /
| [ 0:00] /dev/sdd1        51G  6.1G   43G  13% /lfskernel
| [ 0:00] devtmpfs        3.9G     0  3.9G   0% /dev
| [ 0:00] tmpfs           3.9G     0  3.9G   0% /run
| [ 0:00] @TESTDIR=/tmp/LVMTEST26461.KAFShSaw6G
| [ 0:00] @PREFIX=LVMTEST26461
| [ 0:00] ## LVMCONF: activation {
| [ 0:00] ## LVMCONF:     checks = 1
| [ 0:00] ## LVMCONF:     monitoring = 0
| [ 0:00] ## LVMCONF:     polling_interval = 1
| [ 0:00] ## LVMCONF:     raid_region_size = 512
| [ 0:00] ## LVMCONF:     retry_deactivation = 1
| [ 0:00] ## LVMCONF:     snapshot_autoextend_percent = 50
| [ 0:00] ## LVMCONF:     snapshot_autoextend_threshold = 50
| [ 0:00] ## LVMCONF:     udev_rules = 1
| [ 0:00] ## LVMCONF:     udev_sync = 1
| [ 0:00] ## LVMCONF:     verify_udev_operations = 1
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: allocation {
| [ 0:00] ## LVMCONF:     wipe_signatures_when_zeroing_new_lvs = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: backup {
| [ 0:00] ## LVMCONF:     archive = 0
| [ 0:00] ## LVMCONF:     backup = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: devices {
| [ 0:00] ## LVMCONF:     cache_dir = "@TESTDIR@/etc"
| [ 0:00] ## LVMCONF:     default_data_alignment = 1
| [ 0:00] ## LVMCONF:     dir = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     filter = "a|.*|"
| [ 0:00] ## LVMCONF:     global_filter = [ "a|@TESTDIR@/dev/mapper/@PREFIX@.*pv[0-9_]*$|", "r|.*|" ]
| [ 0:00] ## LVMCONF:     md_component_detection  = 0
| [ 0:00] ## LVMCONF:     scan = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     sysfs_scan = 1
| [ 0:00] ## LVMCONF:     write_cache_state = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: dmeventd {
| [ 0:00] ## LVMCONF:     executable = "/sources/boot/LVM2.2.02.177/test/lib/dmeventd"
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: global {
| [ 0:00] ## LVMCONF:     abort_on_internal_errors = 1
| [ 0:00] ## LVMCONF:     cache_check_executable = "/usr/sbin/cache_check"
| [ 0:00] ## LVMCONF:     cache_dump_executable = "/usr/sbin/cache_dump"
| [ 0:00] ## LVMCONF:     cache_repair_executable = "/usr/sbin/cache_repair"
| [ 0:00] ## LVMCONF:     detect_internal_vg_cache_corruption = 1
| [ 0:00] ## LVMCONF:     fallback_to_local_locking = 0
| [ 0:00] ## LVMCONF:     fsadm_executable = "/sources/boot/LVM2.2.02.177/test/lib/fsadm"
| [ 0:00] ## LVMCONF:     library_dir = "@TESTDIR@/lib"
| [ 0:00] ## LVMCONF:     locking_dir = "@TESTDIR@/var/lock/lvm"
| [ 0:00] ## LVMCONF:     locking_type=1
| [ 0:00] ## LVMCONF:     notify_dbus = 0
| [ 0:00] ## LVMCONF:     si_unit_consistency = 1
| [ 0:00] ## LVMCONF:     thin_check_executable = "/usr/sbin/thin_check"
| [ 0:00] ## LVMCONF:     thin_dump_executable = "/usr/sbin/thin_dump"
| [ 0:00] ## LVMCONF:     thin_repair_executable = "/usr/sbin/thin_repair"
| [ 0:00] ## LVMCONF:     use_lvmetad = 0
| [ 0:00] ## LVMCONF:     use_lvmlockd = 0
| [ 0:00] ## LVMCONF:     use_lvmpolld = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: log {
| [ 0:00] ## LVMCONF:     activation = 1
| [ 0:00] ## LVMCONF:     file = "@TESTDIR@/debug.log"
| [ 0:00] ## LVMCONF:     indent = 1
| [ 0:00] ## LVMCONF:     level = 9
| [ 0:00] ## LVMCONF:     overwrite = 1
| [ 0:00] ## LVMCONF:     syslog = 0
| [ 0:00] ## LVMCONF:     verbose = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] <======== Processing test: "error-usage.sh" ========>
| [ 0:00] 
| [ 0:00] aux prepare_vg 1
| [ 0:00] #error-usage.sh:20+ aux prepare_vg 1
| [ 0:00] ## preparing loop device....ok (/dev/loop0)
| [ 0:00] ## preparing 1 devices...lib/utils: line 212: DM_UDEV_COOKIE: unbound variable
| [ 0:00] set +vx; STACKTRACE; set -vx
| [ 0:00] ##error-usage.sh:20+ set +vx
| [ 0:00] ## - /lfskernel/sources/boot/LVM2.2.02.177/test/shell/error-usage.sh:20
| [ 0:00] ## 1 STACKTRACE() called from /lfskernel/sources/boot/LVM2.2.02.177/test/shell/error-usage.sh:20
| [ 0:00] <======== Info ========>
| [ 0:00] ## DMINFO:   Name             Maj Min Stat Open Targ Event  UUID                                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv1  253   3 L--w    0    1      0 TEST-@PREFIX@pv1                                                
| [ 0:00] <======== Active table ========>
| [ 0:00] ## DMTABLE:  @PREFIX@pv1: 0 69632 linear 7:0 2048
| [ 0:00] <======== Inactive table ========>
| [ 0:00] ## DMITABLE: @PREFIX@pv1: 
| [ 0:00] <======== Status ========>
| [ 0:00] ## DMSTATUS: @PREFIX@pv1: 0 69632 linear 
| [ 0:00] <======== Tree ========>
| [ 0:00] ## DMTREE:   @PREFIX@pv1 (253:3)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   LFS_vg-lfs (253:2)
| [ 0:00] ## DMTREE:    `- (8:16)
| [ 0:00] ## DMTREE:   centos-swap (253:1)
| [ 0:00] ## DMTREE:    `- (8:2)
| [ 0:00] ## DMTREE:   centos-root (253:0)
| [ 0:00] ## DMTREE:    `- (8:2)
| [ 0:00] <======== Recursive list of @TESTDIR@/dev ========>
| [ 0:00] ## LSLR:	@TESTDIR@/dev:
| [ 0:00] ## LSLR:	total 4
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 0 Feb 21 02:26 loop0
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 1 Feb 21 02:26 loop1
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 2 Feb 21 02:26 loop2
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 3 Feb 21 02:26 loop3
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 4 Feb 21 02:26 loop4
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 5 Feb 21 02:26 loop5
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 6 Feb 21 02:26 loop6
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 7 Feb 21 02:26 loop7
| [ 0:00] ## LSLR:	drwxr-xr-x 2 root root 4096 Feb 21 02:26 mapper
| [ 0:00] ## LSLR:	crw-r--r-- 1 root root 1, 3 Feb 21 02:26 testnull
| [ 0:00] ## LSLR:	
| [ 0:00] ## LSLR:	@TESTDIR@/dev/mapper:
| [ 0:00] ## LSLR:	total 0
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   3 Feb 21 02:26 @PREFIX@pv1
| [ 0:00] ## LSLR:	crw------- 1 root root  10, 236 Feb 21 02:26 control
| [ 0:00] <======== Udev DB content ========>
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-0
| [ 0:00] ## UDEV:	N: dm-0
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-0
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-0
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=0
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-1
| [ 0:00] ## UDEV:	N: dm-1
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-1
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-1
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=1
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-2
| [ 0:00] ## UDEV:	N: dm-2
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-2
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-2
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=2
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-3
| [ 0:00] ## UDEV:	N: dm-3
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-3
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-3
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=3
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/loop0
| [ 0:00] ## UDEV:	N: loop0
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/loop0
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/loop0
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=7
| [ 0:00] ## UDEV:	E: MINOR=0
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] <======== Script file "error-usage.sh" ========>
| [ 0:00] ## Line: 1 	 #!/usr/bin/env bash
| [ 0:00] ## Line: 2 	 
| [ 0:00] ## Line: 3 	 # Copyright (C) 2014 Red Hat, Inc. All rights reserved.
| [ 0:00] ## Line: 4 	 #
| [ 0:00] ## Line: 5 	 # This copyrighted material is made available to anyone wishing to use,
| [ 0:00] ## Line: 6 	 # modify, copy, or redistribute it subject to the terms and conditions
| [ 0:00] ## Line: 7 	 # of the GNU General Public License v.2.
| [ 0:00] ## Line: 8 	 #
| [ 0:00] ## Line: 9 	 # You should have received a copy of the GNU General Public License
| [ 0:00] ## Line: 10 	 # along with this program; if not, write to the Free Software Foundation,
| [ 0:00] ## Line: 11 	 # Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA
| [ 0:00] ## Line: 12 	 
| [ 0:00] ## Line: 13 	 # Basic usage of zero target
| [ 0:00] ## Line: 14 	 
| [ 0:00] ## Line: 15 	 SKIP_WITH_LVMLOCKD=1
| [ 0:00] ## Line: 16 	 SKIP_WITH_LVMPOLLD=1
| [ 0:00] ## Line: 17 	 
| [ 0:00] ## Line: 18 	 . lib/inittest
| [ 0:00] ## Line: 19 	 
| [ 0:00] ## Line: 20 	 aux prepare_vg 1
| [ 0:00] ## Line: 21 	 
| [ 0:00] ## Line: 22 	 lvcreate --type error -L1 -n $lv1 $vg
| [ 0:00] ## Line: 23 	 lvextend -L+1 $vg/$lv1
| [ 0:00] ## Line: 24 	 
| [ 0:00] ## Line: 25 	 # has to match
| [ 0:00] ## Line: 26 	 
| [ 0:00] ## Line: 27 	 check lv_field $vg/$lv1 lv_modules "error"
| [ 0:00] ## Line: 28 	 check lv_field $vg/$lv1 segtype "error"
| [ 0:00] ## Line: 29 	 check lv_field $vg/$lv1 seg_count "1"
| [ 0:00] ## Line: 30 	 check lv_field $vg/$lv1 seg_size_pe "4"   # 4 * 512 => 2M
| [ 0:00] ## Line: 31 	 
| [ 0:00] ## Line: 32 	 # FIXME should we print info we are ignoring stripping?
| [ 0:00] ## Line: 33 	 lvextend -L+1 -I64 -i2 $vg/$lv1
| [ 0:00] ## Line: 34 	 
| [ 0:00] ## Line: 35 	 vgremove -ff $vg
| [ 0:00] aux teardown
| [ 0:00] #error-usage.sh:1+ aux teardown
| [ 0:00] ## teardown.........ok
###       failed: [ndev-vanilla] shell/error-usage.sh

| [ 0:00] Library version:   1.02.146 (2017-12-18)
| [ 0:00] Driver version:    4.35.0
| [ 0:00] Kernel is Linux localhost.localdomain 3.10.0-693.11.1.el7.x86_64 #1 SMP Mon Dec 4 23:52:40 UTC 2017 x86_64 GNU/Linux
| [ 0:00] Selinux mode is not installed.
| [ 0:00]               total        used        free      shared  buff/cache   available
| [ 0:00] Mem:           7822        1075        4156          10        2590        6440
| [ 0:00] Swap:          4095           0        4095
| [ 0:00] Filesystem      Size  Used Avail Use% Mounted on
| [ 0:00] /dev/sdc1        18G  8.4G  8.4G  50% /
| [ 0:00] /dev/sdd1        51G  6.1G   43G  13% /lfskernel
| [ 0:00] devtmpfs        3.9G     0  3.9G   0% /dev
| [ 0:00] tmpfs           3.9G     0  3.9G   0% /run
| [ 0:00] @TESTDIR=/tmp/LVMTEST26627.9I6nQ4TxSq
| [ 0:00] @PREFIX=LVMTEST26627
| [ 0:00] ## LVMCONF: activation {
| [ 0:00] ## LVMCONF:     checks = 1
| [ 0:00] ## LVMCONF:     monitoring = 0
| [ 0:00] ## LVMCONF:     polling_interval = 1
| [ 0:00] ## LVMCONF:     raid_region_size = 512
| [ 0:00] ## LVMCONF:     retry_deactivation = 1
| [ 0:00] ## LVMCONF:     snapshot_autoextend_percent = 50
| [ 0:00] ## LVMCONF:     snapshot_autoextend_threshold = 50
| [ 0:00] ## LVMCONF:     udev_rules = 1
| [ 0:00] ## LVMCONF:     udev_sync = 1
| [ 0:00] ## LVMCONF:     verify_udev_operations = 1
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: allocation {
| [ 0:00] ## LVMCONF:     wipe_signatures_when_zeroing_new_lvs = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: backup {
| [ 0:00] ## LVMCONF:     archive = 0
| [ 0:00] ## LVMCONF:     backup = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: devices {
| [ 0:00] ## LVMCONF:     cache_dir = "@TESTDIR@/etc"
| [ 0:00] ## LVMCONF:     default_data_alignment = 1
| [ 0:00] ## LVMCONF:     dir = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     filter = "a|.*|"
| [ 0:00] ## LVMCONF:     global_filter = [ "a|@TESTDIR@/dev/mapper/@PREFIX@.*pv[0-9_]*$|", "r|.*|" ]
| [ 0:00] ## LVMCONF:     md_component_detection  = 0
| [ 0:00] ## LVMCONF:     scan = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     sysfs_scan = 1
| [ 0:00] ## LVMCONF:     write_cache_state = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: dmeventd {
| [ 0:00] ## LVMCONF:     executable = "/sources/boot/LVM2.2.02.177/test/lib/dmeventd"
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: global {
| [ 0:00] ## LVMCONF:     abort_on_internal_errors = 1
| [ 0:00] ## LVMCONF:     cache_check_executable = "/usr/sbin/cache_check"
| [ 0:00] ## LVMCONF:     cache_dump_executable = "/usr/sbin/cache_dump"
| [ 0:00] ## LVMCONF:     cache_repair_executable = "/usr/sbin/cache_repair"
| [ 0:00] ## LVMCONF:     detect_internal_vg_cache_corruption = 1
| [ 0:00] ## LVMCONF:     fallback_to_local_locking = 0
| [ 0:00] ## LVMCONF:     fsadm_executable = "/sources/boot/LVM2.2.02.177/test/lib/fsadm"
| [ 0:00] ## LVMCONF:     library_dir = "@TESTDIR@/lib"
| [ 0:00] ## LVMCONF:     locking_dir = "@TESTDIR@/var/lock/lvm"
| [ 0:00] ## LVMCONF:     locking_type=1
| [ 0:00] ## LVMCONF:     notify_dbus = 0
| [ 0:00] ## LVMCONF:     si_unit_consistency = 1
| [ 0:00] ## LVMCONF:     thin_check_executable = "/usr/sbin/thin_check"
| [ 0:00] ## LVMCONF:     thin_dump_executable = "/usr/sbin/thin_dump"
| [ 0:00] ## LVMCONF:     thin_repair_executable = "/usr/sbin/thin_repair"
| [ 0:00] ## LVMCONF:     use_lvmetad = 0
| [ 0:00] ## LVMCONF:     use_lvmlockd = 0
| [ 0:00] ## LVMCONF:     use_lvmpolld = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: log {
| [ 0:00] ## LVMCONF:     activation = 1
| [ 0:00] ## LVMCONF:     file = "@TESTDIR@/debug.log"
| [ 0:00] ## LVMCONF:     indent = 1
| [ 0:00] ## LVMCONF:     level = 9
| [ 0:00] ## LVMCONF:     overwrite = 1
| [ 0:00] ## LVMCONF:     syslog = 0
| [ 0:00] ## LVMCONF:     verbose = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] <======== Processing test: "format-lvm1.sh" ========>
| [ 0:00] 
| [ 0:00] aux prepare_devs 1
| [ 0:00] #format-lvm1.sh:19+ aux prepare_devs 1
| [ 0:00] ## preparing loop device....ok (/dev/loop0)
| [ 0:00] ## preparing 1 devices...lib/utils: line 212: DM_UDEV_COOKIE: unbound variable
| [ 0:00] set +vx; STACKTRACE; set -vx
| [ 0:00] ##format-lvm1.sh:19+ set +vx
| [ 0:00] ## - /lfskernel/sources/boot/LVM2.2.02.177/test/shell/format-lvm1.sh:19
| [ 0:00] ## 1 STACKTRACE() called from /lfskernel/sources/boot/LVM2.2.02.177/test/shell/format-lvm1.sh:19
| [ 0:00] <======== Info ========>
| [ 0:00] ## DMINFO:   Name             Maj Min Stat Open Targ Event  UUID                                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv1  253   3 L--w    0    1      0 TEST-@PREFIX@pv1                                                
| [ 0:00] <======== Active table ========>
| [ 0:00] ## DMTABLE:  @PREFIX@pv1: 0 69632 linear 7:0 2048
| [ 0:00] <======== Inactive table ========>
| [ 0:00] ## DMITABLE: @PREFIX@pv1: 
| [ 0:00] <======== Status ========>
| [ 0:00] ## DMSTATUS: @PREFIX@pv1: 0 69632 linear 
| [ 0:00] <======== Tree ========>
| [ 0:00] ## DMTREE:   @PREFIX@pv1 (253:3)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   LFS_vg-lfs (253:2)
| [ 0:00] ## DMTREE:    `- (8:16)
| [ 0:00] ## DMTREE:   centos-swap (253:1)
| [ 0:00] ## DMTREE:    `- (8:2)
| [ 0:00] ## DMTREE:   centos-root (253:0)
| [ 0:00] ## DMTREE:    `- (8:2)
| [ 0:00] <======== Recursive list of @TESTDIR@/dev ========>
| [ 0:00] ## LSLR:	@TESTDIR@/dev:
| [ 0:00] ## LSLR:	total 4
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 0 Feb 21 02:26 loop0
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 1 Feb 21 02:26 loop1
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 2 Feb 21 02:26 loop2
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 3 Feb 21 02:26 loop3
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 4 Feb 21 02:26 loop4
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 5 Feb 21 02:26 loop5
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 6 Feb 21 02:26 loop6
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 7 Feb 21 02:26 loop7
| [ 0:00] ## LSLR:	drwxr-xr-x 2 root root 4096 Feb 21 02:26 mapper
| [ 0:00] ## LSLR:	crw-r--r-- 1 root root 1, 3 Feb 21 02:26 testnull
| [ 0:00] ## LSLR:	
| [ 0:00] ## LSLR:	@TESTDIR@/dev/mapper:
| [ 0:00] ## LSLR:	total 0
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   3 Feb 21 02:26 @PREFIX@pv1
| [ 0:00] ## LSLR:	crw------- 1 root root  10, 236 Feb 21 02:26 control
| [ 0:00] <======== Udev DB content ========>
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-0
| [ 0:00] ## UDEV:	N: dm-0
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-0
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-0
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=0
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-1
| [ 0:00] ## UDEV:	N: dm-1
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-1
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-1
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=1
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-2
| [ 0:00] ## UDEV:	N: dm-2
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-2
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-2
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=2
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-3
| [ 0:00] ## UDEV:	N: dm-3
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-3
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-3
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=3
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/loop0
| [ 0:00] ## UDEV:	N: loop0
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/loop0
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/loop0
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=7
| [ 0:00] ## UDEV:	E: MINOR=0
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] <======== Script file "format-lvm1.sh" ========>
| [ 0:00] ## Line: 1 	 #!/usr/bin/env bash
| [ 0:00] ## Line: 2 	 
| [ 0:00] ## Line: 3 	 # Copyright (C) 2008 Red Hat, Inc. All rights reserved.
| [ 0:00] ## Line: 4 	 #
| [ 0:00] ## Line: 5 	 # This copyrighted material is made available to anyone wishing to use,
| [ 0:00] ## Line: 6 	 # modify, copy, or redistribute it subject to the terms and conditions
| [ 0:00] ## Line: 7 	 # of the GNU General Public License v.2.
| [ 0:00] ## Line: 8 	 #
| [ 0:00] ## Line: 9 	 # You should have received a copy of the GNU General Public License
| [ 0:00] ## Line: 10 	 # along with this program; if not, write to the Free Software Foundation,
| [ 0:00] ## Line: 11 	 # Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA
| [ 0:00] ## Line: 12 	 
| [ 0:00] ## Line: 13 	 test_description='Test lvm1 format'
| [ 0:00] ## Line: 14 	 
| [ 0:00] ## Line: 15 	 SKIP_WITH_LVMPOLLD=1
| [ 0:00] ## Line: 16 	 
| [ 0:00] ## Line: 17 	 . lib/inittest
| [ 0:00] ## Line: 18 	 
| [ 0:00] ## Line: 19 	 aux prepare_devs 1
| [ 0:00] ## Line: 20 	 
| [ 0:00] ## Line: 21 	 if test -n "$LVM_TEST_LVM1" ; then
| [ 0:00] ## Line: 22 	 pvcreate -M1 "$dev1"
| [ 0:00] ## Line: 23 	 vgcreate -M1 $vg "$dev1"
| [ 0:00] ## Line: 24 	 check vg_field $vg fmt "lvm1"
| [ 0:00] ## Line: 25 	 fi
| [ 0:00] ## Line: 26 	 
| [ 0:00] ## Line: 27 	 # TODO: if we decide to make using lvm1 with lvmetad an error,
| [ 0:00] ## Line: 28 	 # then if lvmetad is being used, then verify:
| [ 0:00] ## Line: 29 	 # not pvcreate -M1 "$dev1"
| [ 0:00] ## Line: 30 	 # not vgcreate -M1 $vg "$dev1"
| [ 0:00] ## Line: 31 	 #
| [ 0:00] ## Line: 32 	 # TODO: if we decide to allow using lvm1 with lvmetad, but disable lvmetad
| [ 0:00] ## Line: 33 	 # when it happens, then verify:
| [ 0:00] ## Line: 34 	 # pvcreate -M1 "$dev1" | tee err
| [ 0:00] ## Line: 35 	 # grep "disabled" err
| [ 0:00] ## Line: 36 	 # vgcreate -M1 $vg "$dev1" | tee err
| [ 0:00] ## Line: 37 	 # grep "disabled" err
| [ 0:00] ## Line: 38 	 
| [ 0:00] aux teardown
| [ 0:00] #format-lvm1.sh:1+ aux teardown
| [ 0:00] ## teardown.........ok
###       failed: [ndev-vanilla] shell/format-lvm1.sh

| [ 0:00] Library version:   1.02.146 (2017-12-18)
| [ 0:00] Driver version:    4.35.0
| [ 0:00] Kernel is Linux localhost.localdomain 3.10.0-693.11.1.el7.x86_64 #1 SMP Mon Dec 4 23:52:40 UTC 2017 x86_64 GNU/Linux
| [ 0:00] Selinux mode is not installed.
| [ 0:00]               total        used        free      shared  buff/cache   available
| [ 0:00] Mem:           7822        1075        4156          10        2591        6440
| [ 0:00] Swap:          4095           0        4095
| [ 0:00] Filesystem      Size  Used Avail Use% Mounted on
| [ 0:00] /dev/sdc1        18G  8.4G  8.4G  50% /
| [ 0:00] /dev/sdd1        51G  6.1G   43G  13% /lfskernel
| [ 0:00] devtmpfs        3.9G     0  3.9G   0% /dev
| [ 0:00] tmpfs           3.9G     0  3.9G   0% /run
| [ 0:00] @TESTDIR=/tmp/LVMTEST26783.UDtIIMBDhp
| [ 0:00] @PREFIX=LVMTEST26783
| [ 0:00] ## LVMCONF: activation {
| [ 0:00] ## LVMCONF:     checks = 1
| [ 0:00] ## LVMCONF:     monitoring = 0
| [ 0:00] ## LVMCONF:     polling_interval = 1
| [ 0:00] ## LVMCONF:     raid_region_size = 512
| [ 0:00] ## LVMCONF:     retry_deactivation = 1
| [ 0:00] ## LVMCONF:     snapshot_autoextend_percent = 50
| [ 0:00] ## LVMCONF:     snapshot_autoextend_threshold = 50
| [ 0:00] ## LVMCONF:     udev_rules = 1
| [ 0:00] ## LVMCONF:     udev_sync = 1
| [ 0:00] ## LVMCONF:     verify_udev_operations = 1
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: allocation {
| [ 0:00] ## LVMCONF:     wipe_signatures_when_zeroing_new_lvs = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: backup {
| [ 0:00] ## LVMCONF:     archive = 0
| [ 0:00] ## LVMCONF:     backup = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: devices {
| [ 0:00] ## LVMCONF:     cache_dir = "@TESTDIR@/etc"
| [ 0:00] ## LVMCONF:     default_data_alignment = 1
| [ 0:00] ## LVMCONF:     dir = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     filter = "a|.*|"
| [ 0:00] ## LVMCONF:     global_filter = [ "a|@TESTDIR@/dev/mapper/@PREFIX@.*pv[0-9_]*$|", "r|.*|" ]
| [ 0:00] ## LVMCONF:     md_component_detection  = 0
| [ 0:00] ## LVMCONF:     scan = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     sysfs_scan = 1
| [ 0:00] ## LVMCONF:     write_cache_state = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: dmeventd {
| [ 0:00] ## LVMCONF:     executable = "/sources/boot/LVM2.2.02.177/test/lib/dmeventd"
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: global {
| [ 0:00] ## LVMCONF:     abort_on_internal_errors = 1
| [ 0:00] ## LVMCONF:     cache_check_executable = "/usr/sbin/cache_check"
| [ 0:00] ## LVMCONF:     cache_dump_executable = "/usr/sbin/cache_dump"
| [ 0:00] ## LVMCONF:     cache_repair_executable = "/usr/sbin/cache_repair"
| [ 0:00] ## LVMCONF:     detect_internal_vg_cache_corruption = 1
| [ 0:00] ## LVMCONF:     fallback_to_local_locking = 0
| [ 0:00] ## LVMCONF:     fsadm_executable = "/sources/boot/LVM2.2.02.177/test/lib/fsadm"
| [ 0:00] ## LVMCONF:     library_dir = "@TESTDIR@/lib"
| [ 0:00] ## LVMCONF:     locking_dir = "@TESTDIR@/var/lock/lvm"
| [ 0:00] ## LVMCONF:     locking_type=1
| [ 0:00] ## LVMCONF:     notify_dbus = 0
| [ 0:00] ## LVMCONF:     si_unit_consistency = 1
| [ 0:00] ## LVMCONF:     thin_check_executable = "/usr/sbin/thin_check"
| [ 0:00] ## LVMCONF:     thin_dump_executable = "/usr/sbin/thin_dump"
| [ 0:00] ## LVMCONF:     thin_repair_executable = "/usr/sbin/thin_repair"
| [ 0:00] ## LVMCONF:     use_lvmetad = 0
| [ 0:00] ## LVMCONF:     use_lvmlockd = 0
| [ 0:00] ## LVMCONF:     use_lvmpolld = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: log {
| [ 0:00] ## LVMCONF:     activation = 1
| [ 0:00] ## LVMCONF:     file = "@TESTDIR@/debug.log"
| [ 0:00] ## LVMCONF:     indent = 1
| [ 0:00] ## LVMCONF:     level = 9
| [ 0:00] ## LVMCONF:     overwrite = 1
| [ 0:00] ## LVMCONF:     syslog = 0
| [ 0:00] ## LVMCONF:     verbose = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] <======== Processing test: "fsadm-crypt.sh" ========>
| [ 0:00] 
| [ 0:00] aux prepare_vg 1 300
| [ 0:00] #fsadm-crypt.sh:19+ aux prepare_vg 1 300
| [ 0:00] ## preparing loop device....ok (/dev/loop0)
| [ 0:01] ## preparing 1 devices...lib/utils: line 212: DM_UDEV_COOKIE: unbound variable
| [ 0:01] set +vx; STACKTRACE; set -vx
| [ 0:01] ##fsadm-crypt.sh:19+ set +vx
| [ 0:01] ## - /lfskernel/sources/boot/LVM2.2.02.177/test/shell/fsadm-crypt.sh:19
| [ 0:01] ## 1 STACKTRACE() called from /lfskernel/sources/boot/LVM2.2.02.177/test/shell/fsadm-crypt.sh:19
| [ 0:01] <======== Info ========>
| [ 0:01] ## DMINFO:   Name             Maj Min Stat Open Targ Event  UUID                                                                
| [ 0:01] ## DMINFO:   @PREFIX@pv1  253   3 L--w    0    1      0 TEST-@PREFIX@pv1                                                
| [ 0:01] <======== Active table ========>
| [ 0:01] ## DMTABLE:  @PREFIX@pv1: 0 614400 linear 7:0 2048
| [ 0:01] <======== Inactive table ========>
| [ 0:01] ## DMITABLE: @PREFIX@pv1: 
| [ 0:01] <======== Status ========>
| [ 0:01] ## DMSTATUS: @PREFIX@pv1: 0 614400 linear 
| [ 0:01] <======== Tree ========>
| [ 0:01] ## DMTREE:   @PREFIX@pv1 (253:3)
| [ 0:01] ## DMTREE:    `- (7:0)
| [ 0:01] ## DMTREE:   LFS_vg-lfs (253:2)
| [ 0:01] ## DMTREE:    `- (8:16)
| [ 0:01] ## DMTREE:   centos-swap (253:1)
| [ 0:01] ## DMTREE:    `- (8:2)
| [ 0:01] ## DMTREE:   centos-root (253:0)
| [ 0:01] ## DMTREE:    `- (8:2)
| [ 0:01] <======== Recursive list of @TESTDIR@/dev ========>
| [ 0:01] ## LSLR:	@TESTDIR@/dev:
| [ 0:01] ## LSLR:	total 4
| [ 0:01] ## LSLR:	brw-r--r-- 1 root root 7, 0 Feb 21 02:26 loop0
| [ 0:01] ## LSLR:	brw-r--r-- 1 root root 7, 1 Feb 21 02:26 loop1
| [ 0:01] ## LSLR:	brw-r--r-- 1 root root 7, 2 Feb 21 02:26 loop2
| [ 0:01] ## LSLR:	brw-r--r-- 1 root root 7, 3 Feb 21 02:26 loop3
| [ 0:01] ## LSLR:	brw-r--r-- 1 root root 7, 4 Feb 21 02:26 loop4
| [ 0:01] ## LSLR:	brw-r--r-- 1 root root 7, 5 Feb 21 02:26 loop5
| [ 0:01] ## LSLR:	brw-r--r-- 1 root root 7, 6 Feb 21 02:26 loop6
| [ 0:01] ## LSLR:	brw-r--r-- 1 root root 7, 7 Feb 21 02:26 loop7
| [ 0:01] ## LSLR:	drwxr-xr-x 2 root root 4096 Feb 21 02:26 mapper
| [ 0:01] ## LSLR:	crw-r--r-- 1 root root 1, 3 Feb 21 02:26 testnull
| [ 0:01] ## LSLR:	
| [ 0:01] ## LSLR:	@TESTDIR@/dev/mapper:
| [ 0:01] ## LSLR:	total 0
| [ 0:01] ## LSLR:	brw------- 1 root root 253,   3 Feb 21 02:26 @PREFIX@pv1
| [ 0:01] ## LSLR:	crw------- 1 root root  10, 236 Feb 21 02:26 control
| [ 0:01] <======== Udev DB content ========>
| [ 0:01] ## UDEV:	P: /devices/virtual/block/dm-0
| [ 0:01] ## UDEV:	N: dm-0
| [ 0:01] ## UDEV:	E: DEVNAME=/dev/dm-0
| [ 0:01] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-0
| [ 0:01] ## UDEV:	E: DEVTYPE=disk
| [ 0:01] ## UDEV:	E: MAJOR=253
| [ 0:01] ## UDEV:	E: MINOR=0
| [ 0:01] ## UDEV:	E: SUBSYSTEM=block
| [ 0:01] ## UDEV:	
| [ 0:01] ## UDEV:	P: /devices/virtual/block/dm-1
| [ 0:01] ## UDEV:	N: dm-1
| [ 0:01] ## UDEV:	E: DEVNAME=/dev/dm-1
| [ 0:01] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-1
| [ 0:01] ## UDEV:	E: DEVTYPE=disk
| [ 0:01] ## UDEV:	E: MAJOR=253
| [ 0:01] ## UDEV:	E: MINOR=1
| [ 0:01] ## UDEV:	E: SUBSYSTEM=block
| [ 0:01] ## UDEV:	
| [ 0:01] ## UDEV:	P: /devices/virtual/block/dm-2
| [ 0:01] ## UDEV:	N: dm-2
| [ 0:01] ## UDEV:	E: DEVNAME=/dev/dm-2
| [ 0:01] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-2
| [ 0:01] ## UDEV:	E: DEVTYPE=disk
| [ 0:01] ## UDEV:	E: MAJOR=253
| [ 0:01] ## UDEV:	E: MINOR=2
| [ 0:01] ## UDEV:	E: SUBSYSTEM=block
| [ 0:01] ## UDEV:	
| [ 0:01] ## UDEV:	P: /devices/virtual/block/dm-3
| [ 0:01] ## UDEV:	N: dm-3
| [ 0:01] ## UDEV:	E: DEVNAME=/dev/dm-3
| [ 0:01] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-3
| [ 0:01] ## UDEV:	E: DEVTYPE=disk
| [ 0:01] ## UDEV:	E: MAJOR=253
| [ 0:01] ## UDEV:	E: MINOR=3
| [ 0:01] ## UDEV:	E: SUBSYSTEM=block
| [ 0:01] ## UDEV:	
| [ 0:01] ## UDEV:	P: /devices/virtual/block/loop0
| [ 0:01] ## UDEV:	N: loop0
| [ 0:01] ## UDEV:	E: DEVNAME=/dev/loop0
| [ 0:01] ## UDEV:	E: DEVPATH=/devices/virtual/block/loop0
| [ 0:01] ## UDEV:	E: DEVTYPE=disk
| [ 0:01] ## UDEV:	E: MAJOR=7
| [ 0:01] ## UDEV:	E: MINOR=0
| [ 0:01] ## UDEV:	E: SUBSYSTEM=block
| [ 0:01] ## UDEV:	
| [ 0:01] <======== Script file "fsadm-crypt.sh" ========>
| [ 0:01] ## Line: 1 	 #!/usr/bin/env bash
| [ 0:01] ## Line: 2 	 
| [ 0:01] ## Line: 3 	 # Copyright (C) 2008-2017 Red Hat, Inc. All rights reserved.
| [ 0:01] ## Line: 4 	 #
| [ 0:01] ## Line: 5 	 # This copyrighted material is made available to anyone wishing to use,
| [ 0:01] ## Line: 6 	 # modify, copy, or redistribute it subject to the terms and conditions
| [ 0:01] ## Line: 7 	 # of the GNU General Public License v.2.
| [ 0:01] ## Line: 8 	 #
| [ 0:01] ## Line: 9 	 # You should have received a copy of the GNU General Public License
| [ 0:01] ## Line: 10 	 # along with this program; if not, write to the Free Software Foundation,
| [ 0:01] ## Line: 11 	 # Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA
| [ 0:01] ## Line: 12 	 
| [ 0:01] ## Line: 13 	 test_description='Exercise fsadm filesystem resize on crypt devices'
| [ 0:01] ## Line: 14 	 SKIP_WITH_LVMLOCKD=1
| [ 0:01] ## Line: 15 	 SKIP_WITH_LVMPOLLD=1
| [ 0:01] ## Line: 16 	 
| [ 0:01] ## Line: 17 	 . lib/inittest
| [ 0:01] ## Line: 18 	 
| [ 0:01] ## Line: 19 	 aux prepare_vg 1 300
| [ 0:01] ## Line: 20 	 
| [ 0:01] ## Line: 21 	 # set to "skip" to avoid testing given fs and test warning result
| [ 0:01] ## Line: 22 	 # i.e. check_reiserfs=skip
| [ 0:01] ## Line: 23 	 check_ext2=
| [ 0:01] ## Line: 24 	 check_ext3=
| [ 0:01] ## Line: 25 	 check_xfs=
| [ 0:01] ## Line: 26 	 check_reiserfs=
| [ 0:01] ## Line: 27 	 check_cryptsetup=
| [ 0:01] ## Line: 28 	 DROP_SYMLINK=
| [ 0:01] ## Line: 29 	 
| [ 0:01] ## Line: 30 	 CRYPT_NAME="$PREFIX-tcrypt"
| [ 0:01] ## Line: 31 	 CRYPT_DEV="$DM_DEV_DIR/mapper/$CRYPT_NAME"
| [ 0:01] ## Line: 32 	 
| [ 0:01] ## Line: 33 	 CRYPT_NAME2="$PREFIX-tcrypt2"
| [ 0:01] ## Line: 34 	 CRYPT_DEV2="$DM_DEV_DIR/mapper/$CRYPT_NAME2"
| [ 0:01] ## Line: 35 	 
| [ 0:01] ## Line: 36 	 CRYPT_NAME_PLAIN="$PREFIX-tcryptp"
| [ 0:01] ## Line: 37 	 CRYPT_DEV_PLAIN="$DM_DEV_DIR/mapper/$CRYPT_NAME_PLAIN"
| [ 0:01] ## Line: 38 	 
| [ 0:01] ## Line: 39 	 FORMAT_PARAMS="-i1"
| [ 0:01] ## Line: 40 	 PWD1="93R4P4pIqAH8"
| [ 0:01] ## Line: 41 	 PWD2="mymJeD8ivEhE"
| [ 0:01] ## Line: 42 	 PWD3="ocMakf3fAcQO"
| [ 0:01] ## Line: 43 	 SKIP_DETACHED=
| [ 0:01] ## Line: 44 	 
| [ 0:01] ## Line: 45 	 which cryptsetup || check_cryptsetup=${check_cryptsetup:-cryptsetup}
| [ 0:01] ## Line: 46 	 
| [ 0:01] ## Line: 47 	 which mkfs.ext2 || check_ext2=${check_ext2:-mkfs.ext2}
| [ 0:01] ## Line: 48 	 which mkfs.ext3 || check_ext3=${check_ext3:-mkfs.ext3}
| [ 0:01] ## Line: 49 	 which fsck.ext3 || check_ext3=${check_ext3:-fsck.ext3}
| [ 0:01] ## Line: 50 	 which mkfs.xfs || check_xfs=${check_xfs:-mkfs.xfs}
| [ 0:01] ## Line: 51 	 which xfs_check || {
| [ 0:01] ## Line: 52 	 	which xfs_repair || check_xfs=${check_xfs:-xfs_repair}
| [ 0:01] ## Line: 53 	 }
| [ 0:01] ## Line: 54 	 grep xfs /proc/filesystems || check_xfs=${check_xfs:-no_xfs}
| [ 0:01] ## Line: 55 	 
| [ 0:01] ## Line: 56 	 which mkfs.reiserfs || check_reiserfs=${check_reiserfs:-mkfs.reiserfs}
| [ 0:01] ## Line: 57 	 which reiserfsck || check_reiserfs=${check_reiserfs:-reiserfsck}
| [ 0:01] ## Line: 58 	 modprobe reiserfs || true
| [ 0:01] ## Line: 59 	 grep reiserfs /proc/filesystems || check_reiserfs=${check_reiserfs:-no_reiserfs}
| [ 0:01] ## Line: 60 	 
| [ 0:01] ## Line: 61 	 vg_lv=$vg/$lv1
| [ 0:01] ## Line: 62 	 vg_lv2=$vg/${lv1}bar
| [ 0:01] ## Line: 63 	 vg_lv3=$vg/${lv1}plain
| [ 0:01] ## Line: 64 	 dev_vg_lv="$DM_DEV_DIR/$vg_lv"
| [ 0:01] ## Line: 65 	 dev_vg_lv2="$DM_DEV_DIR/$vg_lv2"
| [ 0:01] ## Line: 66 	 dev_vg_lv3="$DM_DEV_DIR/$vg_lv3"
| [ 0:01] ## Line: 67 	 mount_dir="mnt"
| [ 0:01] ## Line: 68 	 # for recursive call
| [ 0:01] ## Line: 69 	 LVM_BINARY=$(which lvm)
| [ 0:01] ## Line: 70 	 export LVM_BINARY
| [ 0:01] ## Line: 71 	 
| [ 0:01] ## Line: 72 	 test ! -d "$mount_dir" && mkdir "$mount_dir"
| [ 0:01] ## Line: 73 	 
| [ 0:01] ## Line: 74 	 crypt_close() {
| [ 0:01] ## Line: 75 	 	cryptsetup remove "$1"
| [ 0:01] ## Line: 76 	 	if [ "$?" -eq 0 -a -n "$DROP_SYMLINK" ]; then
| [ 0:01] ## Line: 77 	 		rm -f "$DM_DEV_DIR/mapper/$1"
| [ 0:01] ## Line: 78 	 	fi
| [ 0:01] ## Line: 79 	 }
| [ 0:01] ## Line: 80 	 
| [ 0:01] ## Line: 81 	 cleanup_mounted_and_teardown()
| [ 0:01] ## Line: 82 	 {
| [ 0:01] ## Line: 83 	 	umount "$mount_dir" || true
| [ 0:01] ## Line: 84 	 	crypt_close $CRYPT_NAME > /dev/null 2>&1 || true
| [ 0:01] ## Line: 85 	 	crypt_close $CRYPT_NAME2 > /dev/null 2>&1 || true
| [ 0:01] ## Line: 86 	 	crypt_close $CRYPT_NAME_PLAIN > /dev/null 2>&1 || true
| [ 0:01] ## Line: 87 	 	aux teardown
| [ 0:01] ## Line: 88 	 }
| [ 0:01] ## Line: 89 	 
| [ 0:01] ## Line: 90 	 fscheck_ext3()
| [ 0:01] ## Line: 91 	 {
| [ 0:01] ## Line: 92 	 	fsck.ext3 -p -F -f "$1"
| [ 0:01] ## Line: 93 	 }
| [ 0:01] ## Line: 94 	 
| [ 0:01] ## Line: 95 	 fscheck_xfs()
| [ 0:01] ## Line: 96 	 {
| [ 0:01] ## Line: 97 	 	if which xfs_repair ; then
| [ 0:01] ## Line: 98 	 		xfs_repair -n "$1"
| [ 0:01] ## Line: 99 	 	else
| [ 0:01] ## Line: 100 	 		xfs_check "$1"
| [ 0:01] ## Line: 101 	 	fi
| [ 0:01] ## Line: 102 	 }
| [ 0:01] ## Line: 103 	 
| [ 0:01] ## Line: 104 	 fscheck_reiserfs()
| [ 0:01] ## Line: 105 	 {
| [ 0:01] ## Line: 106 	 	reiserfsck --check -p -f "$1" </dev/null
| [ 0:01] ## Line: 107 	 }
| [ 0:01] ## Line: 108 	 
| [ 0:01] ## Line: 109 	 check_missing()
| [ 0:01] ## Line: 110 	 {
| [ 0:01] ## Line: 111 	 	local t
| [ 0:01] ## Line: 112 	 	eval "t=\$check_$1"
| [ 0:01] ## Line: 113 	 	test -z "$t" && return 0
| [ 0:01] ## Line: 114 	 	test "$t" = skip && return 1
| [ 0:01] ## Line: 115 	 	echo "WARNING: fsadm test skipped $1 tests, $t tool is missing."
| [ 0:01] ## Line: 116 	 	# trick to get test listed with warning
| [ 0:01] ## Line: 117 	 	# should false;
| [ 0:01] ## Line: 118 	 	return 1
| [ 0:01] ## Line: 119 	 }
| [ 0:01] ## Line: 120 	 
| [ 0:01] ## Line: 121 	 get_crypt_kname() {
| [ 0:01] ## Line: 122 	 	lsblk -r -n -o KNAME,NAME | grep "$1" | cut -d ' ' -f 1
| [ 0:01] ## Line: 123 	 }
| [ 0:01] ## Line: 124 	 
| [ 0:01] ## Line: 125 	 
| [ 0:01] ## Line: 126 	 # $1 device
| [ 0:01] ## Line: 127 	 # $2 pass
| [ 0:01] ## Line: 128 	 crypt_format() {
| [ 0:01] ## Line: 129 	 	echo "$2" | cryptsetup luksFormat "$FORMAT_PARAMS" "$1"
| [ 0:01] ## Line: 130 	 }
| [ 0:01] ## Line: 131 	 
| [ 0:01] ## Line: 132 	 
| [ 0:01] ## Line: 133 	 # $1 device
| [ 0:01] ## Line: 134 	 # $2 pass
| [ 0:01] ## Line: 135 	 # $3 name
| [ 0:01] ## Line: 136 	 crypt_open() {
| [ 0:01] ## Line: 137 	 	local kname=
| [ 0:01] ## Line: 138 	 	echo "$2" | cryptsetup luksOpen "$1" "$3"
| [ 0:01] ## Line: 139 	 	test -L "$DM_DEV_DIR/mapper/$3" || {
| [ 0:01] ## Line: 140 	 		kname=$(get_crypt_kname $3)
| [ 0:01] ## Line: 141 	 		ln -s "/dev/$kname" "$DM_DEV_DIR/mapper/$3"
| [ 0:01] ## Line: 142 	 		DROP_SYMLINK=1
| [ 0:01] ## Line: 143 	 	}
| [ 0:01] ## Line: 144 	 }
| [ 0:01] ## Line: 145 	 
| [ 0:01] ## Line: 146 	 # $1 data device
| [ 0:01] ## Line: 147 	 # $2 pass
| [ 0:01] ## Line: 148 	 # $3 name
| [ 0:01] ## Line: 149 	 # $4 header
| [ 0:01] ## Line: 150 	 crypt_open_detached() {
| [ 0:01] ## Line: 151 	 	local kname=
| [ 0:01] ## Line: 152 	 	echo "$2" | cryptsetup luksOpen --header "$4" "$1" "$3" || return $?
| [ 0:01] ## Line: 153 	 	test -L "$DM_DEV_DIR/mapper/$3" || {
| [ 0:01] ## Line: 154 	 		kname=$(get_crypt_kname $3)
| [ 0:01] ## Line: 155 	 		ln -s "/dev/$kname" "$DM_DEV_DIR/mapper/$3"
| [ 0:01] ## Line: 156 	 		DROP_SYMLINK=1
| [ 0:01] ## Line: 157 	 	}
| [ 0:01] ## Line: 158 	 }
| [ 0:01] ## Line: 159 	 
| [ 0:01] ## Line: 160 	 # $1 device
| [ 0:01] ## Line: 161 	 # $2 pass
| [ 0:01] ## Line: 162 	 # $3 name
| [ 0:01] ## Line: 163 	 crypt_open_plain() {
| [ 0:01] ## Line: 164 	 	local kname=
| [ 0:01] ## Line: 165 	 	echo "$2" | cryptsetup create "$3" "$1"
| [ 0:01] ## Line: 166 	 	test -L "$DM_DEV_DIR/mapper/$3" || {
| [ 0:01] ## Line: 167 	 		kname=$(get_crypt_kname $3)
| [ 0:01] ## Line: 168 	 		ln -s "/dev/$kname" "$DM_DEV_DIR/mapper/$3"
| [ 0:01] ## Line: 169 	 		DROP_SYMLINK=1
| [ 0:01] ## Line: 170 	 	}
| [ 0:01] ## Line: 171 	 }
| [ 0:01] ## Line: 172 	 
| [ 0:01] ## Line: 173 	 # $1 device
| [ 0:01] ## Line: 174 	 # $2 type
| [ 0:01] ## Line: 175 	 create_crypt_device()
| [ 0:01] ## Line: 176 	 {
| [ 0:01] ## Line: 177 	 	crypt_format "$dev_vg_lv" $PWD1
| [ 0:01] ## Line: 178 	 	crypt_open "$dev_vg_lv" $PWD1 "$CRYPT_NAME"
| [ 0:01] ## Line: 179 	 
| [ 0:01] ## Line: 180 	 	crypt_format "$dev_vg_lv2" $PWD2
| [ 0:01] ## Line: 181 	 
| [ 0:01] ## Line: 182 	 	if crypt_open_detached "$dev_vg_lv3" "$PWD2" "$PREFIX-test" "$dev_vg_lv2"; then
| [ 0:01] ## Line: 183 	 		crypt_close "$PREFIX-test"
| [ 0:01] ## Line: 184 	 	else
| [ 0:01] ## Line: 185 	 		SKIP_DETACHED=1
| [ 0:01] ## Line: 186 	 	fi
| [ 0:01] ## Line: 187 	 }
| [ 0:01] ## Line: 188 	 
| [ 0:01] ## Line: 189 	 which lsblk > /dev/null || skip
| [ 0:01] ## Line: 190 	 check_missing cryptsetup || skip
| [ 0:01] ## Line: 191 	 
| [ 0:01] ## Line: 192 	 vgchange -s 128k
| [ 0:01] ## Line: 193 	 lvcreate -n $lv1 -L25M $vg
| [ 0:01] ## Line: 194 	 lvcreate -n ${lv1}bar -L35M $vg
| [ 0:01] ## Line: 195 	 lvcreate -n ${lv1}plain -L35M $vg
| [ 0:01] ## Line: 196 	 create_crypt_device
| [ 0:01] ## Line: 197 	 trap 'cleanup_mounted_and_teardown' EXIT
| [ 0:01] ## Line: 198 	 
| [ 0:01] ## Line: 199 	 
| [ 0:01] ## Line: 200 	 # $1 LVM backend (vg/lv name)
| [ 0:01] ## Line: 201 	 # $2 LVM backend device (/dev/vg/lv)
| [ 0:01] ## Line: 202 	 # $3 active dm-crypt device (/dev/mapper/some_name )
| [ 0:01] ## Line: 203 	 test_ext2_resize() {
| [ 0:01] ## Line: 204 	 	mkfs.ext2 -b4096 -j "$3"
| [ 0:01] ## Line: 205 	 
| [ 0:01] ## Line: 206 	 	fsadm --lvresize resize $1 30M
| [ 0:01] ## Line: 207 	 	# Fails - not enough space for 4M fs
| [ 0:01] ## Line: 208 	 	not fsadm -y --lvresize resize "$2" 4M
| [ 0:01] ## Line: 209 	 	lvresize -L+10M -r $1
| [ 0:01] ## Line: 210 	 	lvreduce -L10M -r $1
| [ 0:01] ## Line: 211 	 
| [ 0:01] ## Line: 212 	 	fscheck_ext3 "$3"
| [ 0:01] ## Line: 213 	 	mount "$3" "$mount_dir"
| [ 0:01] ## Line: 214 	 	not fsadm -y --lvresize resize $1 4M
| [ 0:01] ## Line: 215 	 	echo n | not lvresize -L4M -r -n $1
| [ 0:01] ## Line: 216 	 	lvresize -L+20M -r -n $1
| [ 0:01] ## Line: 217 	 	umount "$mount_dir"
| [ 0:01] ## Line: 218 	 	fscheck_ext3 "$3"
| [ 0:01] ## Line: 219 	 }
| [ 0:01] ## Line: 220 	 
| [ 0:01] ## Line: 221 	 test_ext2_small_shrink() {
| [ 0:01] ## Line: 222 	 	mkfs.ext2 "$3"
| [ 0:01] ## Line: 223 	 
| [ 0:01] ## Line: 224 	 	lvresize -L-1 -r $1
| [ 0:01] ## Line: 225 	 	lvresize -L-1 -r $1
| [ 0:01] ## Line: 226 	 
| [ 0:01] ## Line: 227 	 	fscheck_ext3 "$3"
| [ 0:01] ## Line: 228 	 }
| [ 0:01] ## Line: 229 	 
| [ 0:01] ## Line: 230 	 test_ext3_resize() {
| [ 0:01] ## Line: 231 	 	mkfs.ext3 -b4096 -j "$3"
| [ 0:01] ## Line: 232 	 
| [ 0:01] ## Line: 233 	 	fsadm --lvresize resize $1 30M
| [ 0:01] ## Line: 234 	 	# Fails - not enough space for 4M fs
| [ 0:01] ## Line: 235 	 	not fsadm -y --lvresize resize "$2" 4M
| [ 0:01] ## Line: 236 	 	lvresize -L+10M -r $1
| [ 0:01] ## Line: 237 	 	lvreduce -L10M -r $1
| [ 0:01] ## Line: 238 	 
| [ 0:01] ## Line: 239 	 	fscheck_ext3 "$3"
| [ 0:01] ## Line: 240 	 	mount "$3" "$mount_dir"
| [ 0:01] ## Line: 241 	 	lvresize -L+10M -r $1
| [ 0:01] ## Line: 242 	 
| [ 0:01] ## Line: 243 	 	not fsadm -y --lvresize resize $1 4M
| [ 0:01] ## Line: 244 	 	echo n | not lvresize -L4M -r -n $1
| [ 0:01] ## Line: 245 	 	lvresize -L+20M -r -n $1
| [ 0:01] ## Line: 246 	 	lvresize -L-10M -r -y $1
| [ 0:01] ## Line: 247 	 	umount "$mount_dir"
| [ 0:01] ## Line: 248 	 }
| [ 0:01] ## Line: 249 	 
| [ 0:01] ## Line: 250 	 test_ext3_small_shrink() {
| [ 0:01] ## Line: 251 	 	mkfs.ext3 "$3"
| [ 0:01] ## Line: 252 	 
| [ 0:01] ## Line: 253 	 	lvresize -L-1 -r $1
| [ 0:01] ## Line: 254 	 	lvresize -L-1 -r $1
| [ 0:01] ## Line: 255 	 
| [ 0:01] ## Line: 256 	 	fscheck_ext3 "$3"
| [ 0:01] ## Line: 257 	 }
| [ 0:01] ## Line: 258 	 
| [ 0:01] ## Line: 259 	 test_xfs_resize() {
| [ 0:01] ## Line: 260 	 	mkfs.xfs -l internal,size=1000b -f "$3"
| [ 0:01] ## Line: 261 	 
| [ 0:01] ## Line: 262 	 	fsadm --lvresize resize $1 30M
| [ 0:01] ## Line: 263 	 	# Fails - not enough space for 4M fs
| [ 0:01] ## Line: 264 	 	lvresize -L+10M -r $1
| [ 0:01] ## Line: 265 	 	not lvreduce -L10M -r $1
| [ 0:01] ## Line: 266 	 
| [ 0:01] ## Line: 267 	 	fscheck_xfs "$3"
| [ 0:01] ## Line: 268 	 	mount "$3" "$mount_dir"
| [ 0:01] ## Line: 269 	 	lvresize -L+10M -r -n $1
| [ 0:01] ## Line: 270 	 	umount "$mount_dir"
| [ 0:01] ## Line: 271 	 	fscheck_xfs "$3"
| [ 0:01] ## Line: 272 	 }
| [ 0:01] ## Line: 273 	 
| [ 0:01] ## Line: 274 	 test_xfs_small_shrink() {
| [ 0:01] ## Line: 275 	 	mkfs.xfs -l internal,size=1000b -f "$3"
| [ 0:01] ## Line: 276 	 
| [ 0:01] ## Line: 277 	 	not lvresize -L-1 -r $1
| [ 0:01] ## Line: 278 	 	fscheck_xfs "$3"
| [ 0:01] ## Line: 279 	 }
| [ 0:01] ## Line: 280 	 
| [ 0:01] ## Line: 281 	 test_reiserfs_resize() {
| [ 0:01] ## Line: 282 	 	mkfs.reiserfs -s 513 -f "$3"
| [ 0:01] ## Line: 283 	 
| [ 0:01] ## Line: 284 	 	fsadm --lvresize resize $1 30M
| [ 0:01] ## Line: 285 	 	lvresize -L+10M -r $1
| [ 0:01] ## Line: 286 	 	fsadm --lvresize -y resize $1 10M
| [ 0:01] ## Line: 287 	 
| [ 0:01] ## Line: 288 	 	fscheck_reiserfs "$3"
| [ 0:01] ## Line: 289 	 	mount "$3" "$mount_dir"
| [ 0:01] ## Line: 290 	 
| [ 0:01] ## Line: 291 	 	fsadm -y --lvresize resize $1 30M
| [ 0:01] ## Line: 292 	 	umount "$mount_dir"
| [ 0:01] ## Line: 293 	 	fscheck_reiserfs "$3"
| [ 0:01] ## Line: 294 	 }
| [ 0:01] ## Line: 295 	 
| [ 0:01] ## Line: 296 	 test_reiserfs_small_shrink() {
| [ 0:01] ## Line: 297 	 	mkfs.reiserfs -s 513 -f "$3"
| [ 0:01] ## Line: 298 	 
| [ 0:01] ## Line: 299 	 	lvresize -y -L-1 -r $1
| [ 0:01] ## Line: 300 	 	lvresize -y -L-1 -r $1
| [ 0:01] ## Line: 301 	 
| [ 0:01] ## Line: 302 	 	fscheck_reiserfs "$3"
| [ 0:01] ## Line: 303 	 }
| [ 0:01] ## Line: 304 	 
| [ 0:01] ## Line: 305 	 # $1 LVM backend (vg/lv name)
| [ 0:01] ## Line: 306 	 # $2 LVM backend device (/dev/vg/lv)
| [ 0:01] ## Line: 307 	 # $3 active dm-crypt device (/dev/mapper/some_name )
| [ 0:01] ## Line: 308 	 # $4 active dm-crypt name ( some_name )
| [ 0:01] ## Line: 309 	 test_ext2_inactive() {
| [ 0:01] ## Line: 310 	 	crypt_open "$2" $PWD2 "$4"
| [ 0:01] ## Line: 311 	 	mkfs.ext2 -b4096 -j "$3"
| [ 0:01] ## Line: 312 	 	crypt_close "$4"
| [ 0:01] ## Line: 313 	 
| [ 0:01] ## Line: 314 	 	not fsadm --lvresize resize $1 30M
| [ 0:01] ## Line: 315 	 	not lvresize -L+10M -r $1
| [ 0:01] ## Line: 316 	 	not lvreduce -L10M -r $1
| [ 0:01] ## Line: 317 	 
| [ 0:01] ## Line: 318 	 	crypt_open "$2" $PWD2 "$4"
| [ 0:01] ## Line: 319 	 	fscheck_ext3 "$3"
| [ 0:01] ## Line: 320 	 	crypt_close "$4"
| [ 0:01] ## Line: 321 	 }
| [ 0:01] ## Line: 322 	 
| [ 0:01] ## Line: 323 	 test_ext3_inactive() {
| [ 0:01] ## Line: 324 	 	crypt_open "$2" $PWD2 "$4"
| [ 0:01] ## Line: 325 	 	mkfs.ext3 -b4096 -j "$3"
| [ 0:01] ## Line: 326 	 	crypt_close "$4"
| [ 0:01] ## Line: 327 	 
| [ 0:01] ## Line: 328 	 	not fsadm --lvresize resize $1 30M
| [ 0:01] ## Line: 329 	 	not lvresize -L+10M -r $1
| [ 0:01] ## Line: 330 	 	not lvreduce -L10M -r $1
| [ 0:01] ## Line: 331 	 
| [ 0:01] ## Line: 332 	 	crypt_open "$2" $PWD2 "$4"
| [ 0:01] ## Line: 333 	 	fscheck_ext3 "$3"
| [ 0:01] ## Line: 334 	 	crypt_close "$4"
| [ 0:01] ## Line: 335 	 }
| [ 0:01] ## Line: 336 	 
| [ 0:01] ## Line: 337 	 test_xfs_inactive() {
| [ 0:01] ## Line: 338 	 	crypt_open "$2" $PWD2 "$4"
| [ 0:01] ## Line: 339 	 	mkfs.xfs -l internal,size=1000b -f "$3"
| [ 0:01] ## Line: 340 	 	crypt_close "$4"
| [ 0:01] ## Line: 341 	 
| [ 0:01] ## Line: 342 	 	not fsadm --lvresize resize $1 30M
| [ 0:01] ## Line: 343 	 	not lvresize -L+10M -r $1
| [ 0:01] ## Line: 344 	 	not lvreduce -L10M -r $1
| [ 0:01] ## Line: 345 	 
| [ 0:01] ## Line: 346 	 	crypt_open "$2" $PWD2 "$4"
| [ 0:01] ## Line: 347 	 	fscheck_xfs "$3"
| [ 0:01] ## Line: 348 	 	crypt_close "$4"
| [ 0:01] ## Line: 349 	 }
| [ 0:01] ## Line: 350 	 
| [ 0:01] ## Line: 351 	 test_reiserfs_inactive() {
| [ 0:01] ## Line: 352 	 	crypt_open "$2" $PWD2 "$4"
| [ 0:01] ## Line: 353 	 	mkfs.reiserfs -s 513 -f "$3"
| [ 0:01] ## Line: 354 	 	crypt_close "$4"
| [ 0:01] ## Line: 355 	 
| [ 0:01] ## Line: 356 	 	not fsadm --lvresize resize $1 30M
| [ 0:01] ## Line: 357 	 	not lvresize -L+10M -r $1
| [ 0:01] ## Line: 358 	 	not lvreduce -L10M -r $1
| [ 0:01] ## Line: 359 	 
| [ 0:01] ## Line: 360 	 	crypt_open "$2" $PWD2 "$4"
| [ 0:01] ## Line: 361 	 	fscheck_reiserfs "$3"
| [ 0:01] ## Line: 362 	 	crypt_close "$4"
| [ 0:01] ## Line: 363 	 }
| [ 0:01] ## Line: 364 	 
| [ 0:01] ## Line: 365 	 # $1 LVM backend (vg/lv name)
| [ 0:01] ## Line: 366 	 # $2 LVM backend device (/dev/vg/lv)
| [ 0:01] ## Line: 367 	 # $3 active dm-crypt device (/dev/mapper/some_name )
| [ 0:01] ## Line: 368 	 # $4 active dm-crypt name ( some_name )
| [ 0:01] ## Line: 369 	 test_ext2_plain() {
| [ 0:01] ## Line: 370 	 	mkfs.ext2 -b4096 -j "$3"
| [ 0:01] ## Line: 371 	 
| [ 0:01] ## Line: 372 	 	not fsadm --lvresize resize $1 30M
| [ 0:01] ## Line: 373 	 	not lvresize -L+10M -r $1
| [ 0:01] ## Line: 374 	 	not lvreduce -L10M -r $1
| [ 0:01] ## Line: 375 	 	fscheck_ext3 "$3"
| [ 0:01] ## Line: 376 	 
| [ 0:01] ## Line: 377 	 	fsadm --cryptresize resize $3 30M
| [ 0:01] ## Line: 378 	 	fsadm --cryptresize resize $3 35M
| [ 0:01] ## Line: 379 	 	fscheck_ext3 "$3"
| [ 0:01] ## Line: 380 	 
| [ 0:01] ## Line: 381 	 	mount "$3" "$mount_dir"
| [ 0:01] ## Line: 382 	 	not fsadm -y --cryptresize resize $3 4M
| [ 0:01] ## Line: 383 	 	umount "$mount_dir"
| [ 0:01] ## Line: 384 	 	fscheck_ext3 "$3"
| [ 0:01] ## Line: 385 	 
| [ 0:01] ## Line: 386 	 	crypt_close "$4"
| [ 0:01] ## Line: 387 	 	not fsadm --lvresize resize $1 30M
| [ 0:01] ## Line: 388 	 	not lvresize -L+10M -r $1
| [ 0:01] ## Line: 389 	 	not lvreduce -L10M -r $1
| [ 0:01] ## Line: 390 	 	crypt_open_plain "$2" $PWD3 "$4"
| [ 0:01] ## Line: 391 	 	fscheck_ext3 "$3"
| [ 0:01] ## Line: 392 	 }
| [ 0:01] ## Line: 393 	 
| [ 0:01] ## Line: 394 	 test_ext3_plain() {
| [ 0:01] ## Line: 395 	 	mkfs.ext3 -b4096 -j "$3"
| [ 0:01] ## Line: 396 	 
| [ 0:01] ## Line: 397 	 	not fsadm --lvresize resize $1 30M
| [ 0:01] ## Line: 398 	 	not lvresize -L+10M -r $1
| [ 0:01] ## Line: 399 	 	not lvreduce -L10M -r $1
| [ 0:01] ## Line: 400 	 	fscheck_ext3 "$3"
| [ 0:01] ## Line: 401 	 
| [ 0:01] ## Line: 402 	 	fsadm --cryptresize resize $3 30M
| [ 0:01] ## Line: 403 	 	fsadm --cryptresize resize $3 35M
| [ 0:01] ## Line: 404 	 	fscheck_ext3 "$3"
| [ 0:01] ## Line: 405 	 
| [ 0:01] ## Line: 406 	 	mount "$3" "$mount_dir"
| [ 0:01] ## Line: 407 	 	not fsadm -y --cryptresize resize $3 4M
| [ 0:01] ## Line: 408 	 	umount "$mount_dir"
| [ 0:01] ## Line: 409 	 	fscheck_ext3 "$3"
| [ 0:01] ## Line: 410 	 
| [ 0:01] ## Line: 411 	 	crypt_close "$4"
| [ 0:01] ## Line: 412 	 	not fsadm --lvresize resize $1 30M
| [ 0:01] ## Line: 413 	 	not lvresize -L+10M -r $1
| [ 0:01] ## Line: 414 	 	not lvreduce -L10M -r $1
| [ 0:01] ## Line: 415 	 	crypt_open_plain "$2" $PWD3 "$4"
| [ 0:01] ## Line: 416 	 	fscheck_ext3 "$3"
| [ 0:01] ## Line: 417 	 }
| [ 0:01] ## Line: 418 	 
| [ 0:01] ## Line: 419 	 test_xfs_plain() {
| [ 0:01] ## Line: 420 	 	mkfs.xfs -l internal,size=1000b -f "$3"
| [ 0:01] ## Line: 421 	 
| [ 0:01] ## Line: 422 	 	not fsadm --lvresize resize $1 30M
| [ 0:01] ## Line: 423 	 	not lvresize -L+10M -r $1
| [ 0:01] ## Line: 424 	 	not lvreduce -L10M -r $1
| [ 0:01] ## Line: 425 	 	fscheck_xfs "$3"
| [ 0:01] ## Line: 426 	 
| [ 0:01] ## Line: 427 	 	lvresize -f -L+10M $1
| [ 0:01] ## Line: 428 	 	fsadm --cryptresize resize $3 40M
| [ 0:01] ## Line: 429 	 	# no shrink support in xfs
| [ 0:01] ## Line: 430 	 	not fsadm --cryptresize resize $3 35M
| [ 0:01] ## Line: 431 	 	fscheck_xfs "$3"
| [ 0:01] ## Line: 432 	 
| [ 0:01] ## Line: 433 	 	crypt_close "$4"
| [ 0:01] ## Line: 434 	 	not fsadm --lvresize resize $1 30M
| [ 0:01] ## Line: 435 	 	not lvresize -L+10M -r $1
| [ 0:01] ## Line: 436 	 	not lvreduce -L10M -r $1
| [ 0:01] ## Line: 437 	 	crypt_open_plain "$2" $PWD3 "$4"
| [ 0:01] ## Line: 438 	 	fscheck_xfs "$3"
| [ 0:01] ## Line: 439 	 
| [ 0:01] ## Line: 440 	 	lvresize -f -L35M $1
| [ 0:01] ## Line: 441 	 }
| [ 0:01] ## Line: 442 	 
| [ 0:01] ## Line: 443 	 test_reiserfs_plain() {
| [ 0:01] ## Line: 444 	 	mkfs.reiserfs -s 513 -f "$3"
| [ 0:01] ## Line: 445 	 
| [ 0:01] ## Line: 446 	 	not fsadm --lvresize resize $1 30M
| [ 0:01] ## Line: 447 	 	not lvresize -L+10M -r $1
| [ 0:01] ## Line: 448 	 	not lvreduce -L-10M -r $1
| [ 0:01] ## Line: 449 	 	fscheck_reiserfs "$3"
| [ 0:01] ## Line: 450 	 
| [ 0:01] ## Line: 451 	 	fsadm -y --cryptresize resize $3 30M
| [ 0:01] ## Line: 452 	 	fsadm -y --cryptresize resize $3 35M
| [ 0:01] ## Line: 453 	 	fscheck_reiserfs "$3"
| [ 0:01] ## Line: 454 	 
| [ 0:01] ## Line: 455 	 	crypt_close "$4"
| [ 0:01] ## Line: 456 	 	not fsadm --lvresize resize $1 30M
| [ 0:01] ## Line: 457 	 	not lvresize -L+10M -r $1
| [ 0:01] ## Line: 458 	 	not lvreduce -L10M -r $1
| [ 0:01] ## Line: 459 	 	crypt_open_plain "$2" $PWD3 "$4"
| [ 0:01] ## Line: 460 	 	fscheck_reiserfs "$3"
| [ 0:01] ## Line: 461 	 }
| [ 0:01] ## Line: 462 	 
| [ 0:01] ## Line: 463 	 # $1 LVM header backend (vg/lv name)
| [ 0:01] ## Line: 464 	 # $2 LVM hedaer backend device (/dev/vg/lv)
| [ 0:01] ## Line: 465 	 # $3 active dm-crypt device (/dev/mapper/some_name )
| [ 0:01] ## Line: 466 	 # $4 active dm-crypt name ( some_name )a
| [ 0:01] ## Line: 467 	 test_ext2_detached() {
| [ 0:01] ## Line: 468 	 	mkfs.ext2 -b4096 -j "$3"
| [ 0:01] ## Line: 469 	 
| [ 0:01] ## Line: 470 	 	not fsadm --lvresize resize $1 30M
| [ 0:01] ## Line: 471 	 	not lvresize -L+10M -r $1
| [ 0:01] ## Line: 472 	 	not lvreduce -L10M -r $1
| [ 0:01] ## Line: 473 	 	fscheck_ext3 "$3"
| [ 0:01] ## Line: 474 	 }
| [ 0:01] ## Line: 475 	 
| [ 0:01] ## Line: 476 	 test_ext3_detached() {
| [ 0:01] ## Line: 477 	 	mkfs.ext3 -b4096 -j "$3"
| [ 0:01] ## Line: 478 	 
| [ 0:01] ## Line: 479 	 	not fsadm --lvresize resize $1 30M
| [ 0:01] ## Line: 480 	 	not lvresize -L+10M -r $1
| [ 0:01] ## Line: 481 	 	not lvreduce -L10M -r $1
| [ 0:01] ## Line: 482 	 	fscheck_ext3 "$3"
| [ 0:01] ## Line: 483 	 }
| [ 0:01] ## Line: 484 	 
| [ 0:01] ## Line: 485 	 test_xfs_detached() {
| [ 0:01] ## Line: 486 	 	mkfs.xfs -l internal,size=1000b -f "$3"
| [ 0:01] ## Line: 487 	 
| [ 0:01] ## Line: 488 	 	not fsadm --lvresize resize $1 30M
| [ 0:01] ## Line: 489 	 	not lvresize -L+10M -r $1
| [ 0:01] ## Line: 490 	 	not lvreduce -L10M -r $1
| [ 0:01] ## Line: 491 	 
| [ 0:01] ## Line: 492 	 	fscheck_xfs "$3"
| [ 0:01] ## Line: 493 	 }
| [ 0:01] ## Line: 494 	 
| [ 0:01] ## Line: 495 	 test_reiserfs_detached() {
| [ 0:01] ## Line: 496 	 	mkfs.reiserfs -s 513 -f "$3"
| [ 0:01] ## Line: 497 	 
| [ 0:01] ## Line: 498 	 	not fsadm --lvresize resize $1 30M
| [ 0:01] ## Line: 499 	 	not lvresize -L+10M -r $1
| [ 0:01] ## Line: 500 	 	not lvreduce -L10M -r $1
| [ 0:01] ## Line: 501 	 
| [ 0:01] ## Line: 502 	 	fscheck_reiserfs "$3"
| [ 0:01] ## Line: 503 	 }
| [ 0:01] ## Line: 504 	 
| [ 0:01] ## Line: 505 	 if check_missing ext2; then
| [ 0:01] ## Line: 506 	 	test_ext2_resize "$vg_lv" "$dev_vg_lv" "$CRYPT_DEV"
| [ 0:01] ## Line: 507 	 	lvresize -f -L25M $vg_lv
| [ 0:01] ## Line: 508 	 	cryptsetup resize $CRYPT_NAME
| [ 0:01] ## Line: 509 	 
| [ 0:01] ## Line: 510 	 	test_ext2_inactive "$vg_lv2" "$dev_vg_lv2" "$CRYPT_DEV2" "$CRYPT_NAME2"
| [ 0:01] ## Line: 511 	 
| [ 0:01] ## Line: 512 	 	crypt_open_plain "$dev_vg_lv3" $PWD3 "$CRYPT_NAME_PLAIN"
| [ 0:01] ## Line: 513 	 	test_ext2_plain "$vg_lv3" "$dev_vg_lv3" "$CRYPT_DEV_PLAIN" "$CRYPT_NAME_PLAIN"
| [ 0:01] ## Line: 514 	 	crypt_close "$CRYPT_NAME_PLAIN"
| [ 0:01] ## Line: 515 	 
| [ 0:01] ## Line: 516 	 	lvresize -f -L100M $vg_lv
| [ 0:01] ## Line: 517 	 	cryptsetup resize $CRYPT_NAME
| [ 0:01] ## Line: 518 	 	test_ext2_small_shrink "$vg_lv" "$dev_vg_lv" "$CRYPT_DEV"
| [ 0:01] ## Line: 519 	 	lvresize -f -L25M $vg_lv
| [ 0:01] ## Line: 520 	 	cryptsetup resize $CRYPT_NAME
| [ 0:01] ## Line: 521 	 
| [ 0:01] ## Line: 522 	 	if [ -z "$SKIP_DETACHED" ]; then
| [ 0:01] ## Line: 523 	 		crypt_open_detached "$dev_vg_lv3" $PWD2 "$CRYPT_NAME2" "$dev_vg_lv2"
| [ 0:01] ## Line: 524 	 		test_ext2_detached "$vg_lv2" "$dev_vg_lv2" "$CRYPT_DEV2" "$CRYPT_NAME2"
| [ 0:01] ## Line: 525 	 		crypt_close "$CRYPT_NAME2"
| [ 0:01] ## Line: 526 	 	fi
| [ 0:01] ## Line: 527 	 fi
| [ 0:01] ## Line: 528 	 
| [ 0:01] ## Line: 529 	 if check_missing ext3; then
| [ 0:01] ## Line: 530 	 	test_ext3_resize "$vg_lv" "$dev_vg_lv" "$CRYPT_DEV"
| [ 0:01] ## Line: 531 	 	lvresize -f -L25M $vg_lv
| [ 0:01] ## Line: 532 	 	cryptsetup resize $CRYPT_NAME
| [ 0:01] ## Line: 533 	 
| [ 0:01] ## Line: 534 	 	test_ext3_inactive "$vg_lv2" "$dev_vg_lv2" "$CRYPT_DEV2" "$CRYPT_NAME2"
| [ 0:01] ## Line: 535 	 
| [ 0:01] ## Line: 536 	 	crypt_open_plain "$dev_vg_lv3" $PWD3 "$CRYPT_NAME_PLAIN"
| [ 0:01] ## Line: 537 	 	test_ext3_plain "$vg_lv3" "$dev_vg_lv3" "$CRYPT_DEV_PLAIN" "$CRYPT_NAME_PLAIN"
| [ 0:01] ## Line: 538 	 	crypt_close "$CRYPT_NAME_PLAIN"
| [ 0:01] ## Line: 539 	 
| [ 0:01] ## Line: 540 	 	lvresize -f -L100M $vg_lv
| [ 0:01] ## Line: 541 	 	cryptsetup resize $CRYPT_NAME
| [ 0:01] ## Line: 542 	 	test_ext3_small_shrink "$vg_lv" "$dev_vg_lv" "$CRYPT_DEV"
| [ 0:01] ## Line: 543 	 	lvresize -f -L25M $vg_lv
| [ 0:01] ## Line: 544 	 	cryptsetup resize $CRYPT_NAME
| [ 0:01] ## Line: 545 	 
| [ 0:01] ## Line: 546 	 	if [ -z "$SKIP_DETACHED" ]; then
| [ 0:01] ## Line: 547 	 		crypt_open_detached "$dev_vg_lv3" $PWD2 "$CRYPT_NAME2" "$dev_vg_lv2"
| [ 0:01] ## Line: 548 	 		test_ext3_detached "$vg_lv2" "$dev_vg_lv2" "$CRYPT_DEV2" "$CRYPT_NAME2"
| [ 0:01] ## Line: 549 	 		crypt_close "$CRYPT_NAME2"
| [ 0:01] ## Line: 550 	 	fi
| [ 0:01] ## Line: 551 	 fi
| [ 0:01] ## Line: 552 	 
| [ 0:01] ## Line: 553 	 if check_missing xfs; then
| [ 0:01] ## Line: 554 	 	test_xfs_resize "$vg_lv" "$dev_vg_lv" "$CRYPT_DEV"
| [ 0:01] ## Line: 555 	 	lvresize -f -L25M $vg_lv
| [ 0:01] ## Line: 556 	 	cryptsetup resize $CRYPT_NAME
| [ 0:01] ## Line: 557 	 
| [ 0:01] ## Line: 558 	 	test_xfs_inactive "$vg_lv2" "$dev_vg_lv2" "$CRYPT_DEV2" "$CRYPT_NAME2"
| [ 0:01] ## Line: 559 	 
| [ 0:01] ## Line: 560 	 	crypt_open_plain "$dev_vg_lv3" $PWD3 "$CRYPT_NAME_PLAIN"
| [ 0:01] ## Line: 561 	 	test_xfs_plain "$vg_lv3" "$dev_vg_lv3" "$CRYPT_DEV_PLAIN" "$CRYPT_NAME_PLAIN"
| [ 0:01] ## Line: 562 	 	crypt_close "$CRYPT_NAME_PLAIN"
| [ 0:01] ## Line: 563 	 
| [ 0:01] ## Line: 564 	 	lvresize -f -L100M $vg_lv
| [ 0:01] ## Line: 565 	 	cryptsetup resize $CRYPT_NAME
| [ 0:01] ## Line: 566 	 	test_xfs_small_shrink "$vg_lv" "$dev_vg_lv" "$CRYPT_DEV"
| [ 0:01] ## Line: 567 	 	lvresize -f -L25M $vg_lv
| [ 0:01] ## Line: 568 	 	cryptsetup resize $CRYPT_NAME
| [ 0:01] ## Line: 569 	 
| [ 0:01] ## Line: 570 	 	if [ -z "$SKIP_DETACHED" ]; then
| [ 0:01] ## Line: 571 	 		crypt_open_detached "$dev_vg_lv3" $PWD2 "$CRYPT_NAME2" "$dev_vg_lv2"
| [ 0:01] ## Line: 572 	 		test_xfs_detached "$vg_lv2" "$dev_vg_lv2" "$CRYPT_DEV2" "$CRYPT_NAME2"
| [ 0:01] ## Line: 573 	 		crypt_close "$CRYPT_NAME2"
| [ 0:01] ## Line: 574 	 	fi
| [ 0:01] ## Line: 575 	 fi
| [ 0:01] ## Line: 576 	 
| [ 0:01] ## Line: 577 	 if check_missing reiserfs; then
| [ 0:01] ## Line: 578 	 	test_reiserfs_resize "$vg_lv" "$dev_vg_lv" "$CRYPT_DEV"
| [ 0:01] ## Line: 579 	 	lvresize -f -L25M $vg_lv
| [ 0:01] ## Line: 580 	 	cryptsetup resize $CRYPT_NAME
| [ 0:01] ## Line: 581 	 
| [ 0:01] ## Line: 582 	 	test_reiserfs_inactive "$vg_lv2" "$dev_vg_lv2" "$CRYPT_DEV2" "$CRYPT_NAME2"
| [ 0:01] ## Line: 583 	 
| [ 0:01] ## Line: 584 	 	crypt_open_plain "$dev_vg_lv3" $PWD3 "$CRYPT_NAME_PLAIN"
| [ 0:01] ## Line: 585 	 	test_reiserfs_plain "$vg_lv3" "$dev_vg_lv3" "$CRYPT_DEV_PLAIN" "$CRYPT_NAME_PLAIN"
| [ 0:01] ## Line: 586 	 	crypt_close "$CRYPT_NAME_PLAIN"
| [ 0:01] ## Line: 587 	 
| [ 0:01] ## Line: 588 	 	lvresize -f -L100M $vg_lv
| [ 0:01] ## Line: 589 	 	cryptsetup resize $CRYPT_NAME
| [ 0:01] ## Line: 590 	 	test_reiserfs_small_shrink "$vg_lv" "$dev_vg_lv" "$CRYPT_DEV"
| [ 0:01] ## Line: 591 	 	lvresize -f -L25M $vg_lv
| [ 0:01] ## Line: 592 	 	cryptsetup resize $CRYPT_NAME
| [ 0:01] ## Line: 593 	 
| [ 0:01] ## Line: 594 	 	if [ -z "$SKIP_DETACHED" ]; then
| [ 0:01] ## Line: 595 	 		crypt_open_detached "$dev_vg_lv3" $PWD2 "$CRYPT_NAME2" "$dev_vg_lv2"
| [ 0:01] ## Line: 596 	 		test_reiserfs_detached "$vg_lv2" "$dev_vg_lv2" "$CRYPT_DEV2" "$CRYPT_NAME2"
| [ 0:01] ## Line: 597 	 		crypt_close "$CRYPT_NAME2"
| [ 0:01] ## Line: 598 	 	fi
| [ 0:01] ## Line: 599 	 fi
| [ 0:01] ## Line: 600 	 
| [ 0:01] ## Line: 601 	 crypt_close "$CRYPT_NAME"
| [ 0:01] ## Line: 602 	 
| [ 0:01] ## Line: 603 	 vgremove -ff $vg
| [ 0:01] aux teardown
| [ 0:01] #fsadm-crypt.sh:1+ aux teardown
| [ 0:01] ## teardown.........ok
###       failed: [ndev-vanilla] shell/fsadm-crypt.sh

| [ 0:00] Library version:   1.02.146 (2017-12-18)
| [ 0:00] Driver version:    4.35.0
| [ 0:00] Kernel is Linux localhost.localdomain 3.10.0-693.11.1.el7.x86_64 #1 SMP Mon Dec 4 23:52:40 UTC 2017 x86_64 GNU/Linux
| [ 0:00] Selinux mode is not installed.
| [ 0:00]               total        used        free      shared  buff/cache   available
| [ 0:00] Mem:           7822        1075        4156          10        2591        6440
| [ 0:00] Swap:          4095           0        4095
| [ 0:00] Filesystem      Size  Used Avail Use% Mounted on
| [ 0:00] /dev/sdc1        18G  8.4G  8.4G  50% /
| [ 0:00] /dev/sdd1        51G  6.1G   43G  13% /lfskernel
| [ 0:00] devtmpfs        3.9G     0  3.9G   0% /dev
| [ 0:00] tmpfs           3.9G     0  3.9G   0% /run
| [ 0:00] @TESTDIR=/tmp/LVMTEST26950.qaOuRfuAss
| [ 0:00] @PREFIX=LVMTEST26950
| [ 0:00] ## LVMCONF: activation {
| [ 0:00] ## LVMCONF:     checks = 1
| [ 0:00] ## LVMCONF:     monitoring = 0
| [ 0:00] ## LVMCONF:     polling_interval = 1
| [ 0:00] ## LVMCONF:     raid_region_size = 512
| [ 0:00] ## LVMCONF:     retry_deactivation = 1
| [ 0:00] ## LVMCONF:     snapshot_autoextend_percent = 50
| [ 0:00] ## LVMCONF:     snapshot_autoextend_threshold = 50
| [ 0:00] ## LVMCONF:     udev_rules = 1
| [ 0:00] ## LVMCONF:     udev_sync = 1
| [ 0:00] ## LVMCONF:     verify_udev_operations = 1
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: allocation {
| [ 0:00] ## LVMCONF:     wipe_signatures_when_zeroing_new_lvs = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: backup {
| [ 0:00] ## LVMCONF:     archive = 0
| [ 0:00] ## LVMCONF:     backup = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: devices {
| [ 0:00] ## LVMCONF:     cache_dir = "@TESTDIR@/etc"
| [ 0:00] ## LVMCONF:     default_data_alignment = 1
| [ 0:00] ## LVMCONF:     dir = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     filter = "a|.*|"
| [ 0:00] ## LVMCONF:     global_filter = [ "a|@TESTDIR@/dev/mapper/@PREFIX@.*pv[0-9_]*$|", "r|.*|" ]
| [ 0:00] ## LVMCONF:     md_component_detection  = 0
| [ 0:00] ## LVMCONF:     scan = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     sysfs_scan = 1
| [ 0:00] ## LVMCONF:     write_cache_state = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: dmeventd {
| [ 0:00] ## LVMCONF:     executable = "/sources/boot/LVM2.2.02.177/test/lib/dmeventd"
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: global {
| [ 0:00] ## LVMCONF:     abort_on_internal_errors = 1
| [ 0:00] ## LVMCONF:     cache_check_executable = "/usr/sbin/cache_check"
| [ 0:00] ## LVMCONF:     cache_dump_executable = "/usr/sbin/cache_dump"
| [ 0:00] ## LVMCONF:     cache_repair_executable = "/usr/sbin/cache_repair"
| [ 0:00] ## LVMCONF:     detect_internal_vg_cache_corruption = 1
| [ 0:00] ## LVMCONF:     fallback_to_local_locking = 0
| [ 0:00] ## LVMCONF:     fsadm_executable = "/sources/boot/LVM2.2.02.177/test/lib/fsadm"
| [ 0:00] ## LVMCONF:     library_dir = "@TESTDIR@/lib"
| [ 0:00] ## LVMCONF:     locking_dir = "@TESTDIR@/var/lock/lvm"
| [ 0:00] ## LVMCONF:     locking_type=1
| [ 0:00] ## LVMCONF:     notify_dbus = 0
| [ 0:00] ## LVMCONF:     si_unit_consistency = 1
| [ 0:00] ## LVMCONF:     thin_check_executable = "/usr/sbin/thin_check"
| [ 0:00] ## LVMCONF:     thin_dump_executable = "/usr/sbin/thin_dump"
| [ 0:00] ## LVMCONF:     thin_repair_executable = "/usr/sbin/thin_repair"
| [ 0:00] ## LVMCONF:     use_lvmetad = 0
| [ 0:00] ## LVMCONF:     use_lvmlockd = 0
| [ 0:00] ## LVMCONF:     use_lvmpolld = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: log {
| [ 0:00] ## LVMCONF:     activation = 1
| [ 0:00] ## LVMCONF:     file = "@TESTDIR@/debug.log"
| [ 0:00] ## LVMCONF:     indent = 1
| [ 0:00] ## LVMCONF:     level = 9
| [ 0:00] ## LVMCONF:     overwrite = 1
| [ 0:00] ## LVMCONF:     syslog = 0
| [ 0:00] ## LVMCONF:     verbose = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] <======== Processing test: "fsadm-renamed.sh" ========>
| [ 0:00] 
| [ 0:00] aux prepare_vg 1 80
| [ 0:00] #fsadm-renamed.sh:19+ aux prepare_vg 1 80
| [ 0:00] ## preparing loop device....ok (/dev/loop0)
| [ 0:00] ## preparing 1 devices...lib/utils: line 212: DM_UDEV_COOKIE: unbound variable
| [ 0:00] set +vx; STACKTRACE; set -vx
| [ 0:00] ##fsadm-renamed.sh:19+ set +vx
| [ 0:00] ## - /lfskernel/sources/boot/LVM2.2.02.177/test/shell/fsadm-renamed.sh:19
| [ 0:00] ## 1 STACKTRACE() called from /lfskernel/sources/boot/LVM2.2.02.177/test/shell/fsadm-renamed.sh:19
| [ 0:00] <======== Info ========>
| [ 0:00] ## DMINFO:   Name             Maj Min Stat Open Targ Event  UUID                                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv1  253   3 L--w    0    1      0 TEST-@PREFIX@pv1                                                
| [ 0:00] <======== Active table ========>
| [ 0:00] ## DMTABLE:  @PREFIX@pv1: 0 163840 linear 7:0 2048
| [ 0:00] <======== Inactive table ========>
| [ 0:00] ## DMITABLE: @PREFIX@pv1: 
| [ 0:00] <======== Status ========>
| [ 0:00] ## DMSTATUS: @PREFIX@pv1: 0 163840 linear 
| [ 0:00] <======== Tree ========>
| [ 0:00] ## DMTREE:   @PREFIX@pv1 (253:3)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   LFS_vg-lfs (253:2)
| [ 0:00] ## DMTREE:    `- (8:16)
| [ 0:00] ## DMTREE:   centos-swap (253:1)
| [ 0:00] ## DMTREE:    `- (8:2)
| [ 0:00] ## DMTREE:   centos-root (253:0)
| [ 0:00] ## DMTREE:    `- (8:2)
| [ 0:00] <======== Recursive list of @TESTDIR@/dev ========>
| [ 0:00] ## LSLR:	@TESTDIR@/dev:
| [ 0:00] ## LSLR:	total 4
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 0 Feb 21 02:26 loop0
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 1 Feb 21 02:26 loop1
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 2 Feb 21 02:26 loop2
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 3 Feb 21 02:26 loop3
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 4 Feb 21 02:26 loop4
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 5 Feb 21 02:26 loop5
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 6 Feb 21 02:26 loop6
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 7 Feb 21 02:26 loop7
| [ 0:00] ## LSLR:	drwxr-xr-x 2 root root 4096 Feb 21 02:26 mapper
| [ 0:00] ## LSLR:	crw-r--r-- 1 root root 1, 3 Feb 21 02:26 testnull
| [ 0:00] ## LSLR:	
| [ 0:00] ## LSLR:	@TESTDIR@/dev/mapper:
| [ 0:00] ## LSLR:	total 0
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   3 Feb 21 02:26 @PREFIX@pv1
| [ 0:00] ## LSLR:	crw------- 1 root root  10, 236 Feb 21 02:26 control
| [ 0:00] <======== Udev DB content ========>
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-0
| [ 0:00] ## UDEV:	N: dm-0
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-0
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-0
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=0
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-1
| [ 0:00] ## UDEV:	N: dm-1
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-1
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-1
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=1
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-2
| [ 0:00] ## UDEV:	N: dm-2
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-2
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-2
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=2
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-3
| [ 0:00] ## UDEV:	N: dm-3
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-3
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-3
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=3
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/loop0
| [ 0:00] ## UDEV:	N: loop0
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/loop0
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/loop0
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=7
| [ 0:00] ## UDEV:	E: MINOR=0
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] <======== Script file "fsadm-renamed.sh" ========>
| [ 0:00] ## Line: 1 	 #!/usr/bin/env bash
| [ 0:00] ## Line: 2 	 
| [ 0:00] ## Line: 3 	 # Copyright (C) 2017 Red Hat, Inc. All rights reserved.
| [ 0:00] ## Line: 4 	 #
| [ 0:00] ## Line: 5 	 # This copyrighted material is made available to anyone wishing to use,
| [ 0:00] ## Line: 6 	 # modify, copy, or redistribute it subject to the terms and conditions
| [ 0:00] ## Line: 7 	 # of the GNU General Public License v.2.
| [ 0:00] ## Line: 8 	 #
| [ 0:00] ## Line: 9 	 # You should have received a copy of the GNU General Public License
| [ 0:00] ## Line: 10 	 # along with this program; if not, write to the Free Software Foundation,
| [ 0:00] ## Line: 11 	 # Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA
| [ 0:00] ## Line: 12 	 
| [ 0:00] ## Line: 13 	 test_description='Exercise fsadm operation on renamed device'
| [ 0:00] ## Line: 14 	 SKIP_WITH_LVMLOCKD=1
| [ 0:00] ## Line: 15 	 SKIP_WITH_LVMPOLLD=1
| [ 0:00] ## Line: 16 	 
| [ 0:00] ## Line: 17 	 . lib/inittest
| [ 0:00] ## Line: 18 	 
| [ 0:00] ## Line: 19 	 aux prepare_vg 1 80
| [ 0:00] ## Line: 20 	 
| [ 0:00] ## Line: 21 	 vg_lv=$vg/$lv1
| [ 0:00] ## Line: 22 	 vg_lv_ren=${vg_lv}_renamed
| [ 0:00] ## Line: 23 	 
| [ 0:00] ## Line: 24 	 dev_vg_lv="$DM_DEV_DIR/$vg_lv"
| [ 0:00] ## Line: 25 	 dev_vg_lv_ren="$DM_DEV_DIR/$vg_lv_ren"
| [ 0:00] ## Line: 26 	 
| [ 0:00] ## Line: 27 	 mount_dir="mnt"
| [ 0:00] ## Line: 28 	 mount_space_dir="mnt space dir"
| [ 0:00] ## Line: 29 	 mount_dolar_dir="mnt \$SPACE dir"
| [ 0:00] ## Line: 30 	 # for recursive call
| [ 0:00] ## Line: 31 	 LVM_BINARY=$(which lvm)
| [ 0:00] ## Line: 32 	 export LVM_BINARY
| [ 0:00] ## Line: 33 	 
| [ 0:00] ## Line: 34 	 test ! -d "$mount_dir" && mkdir "$mount_dir"
| [ 0:00] ## Line: 35 	 test ! -d "$mount_space_dir" && mkdir "$mount_space_dir"
| [ 0:00] ## Line: 36 	 test ! -d "$mount_dolar_dir" && mkdir "$mount_dolar_dir"
| [ 0:00] ## Line: 37 	 
| [ 0:00] ## Line: 38 	 cleanup_mounted_and_teardown()
| [ 0:00] ## Line: 39 	 {
| [ 0:00] ## Line: 40 	 	umount "$mount_dir" || true
| [ 0:00] ## Line: 41 	 	umount "$mount_space_dir" || true
| [ 0:00] ## Line: 42 	 	umount "$mount_dolar_dir" || true
| [ 0:00] ## Line: 43 	 	aux teardown
| [ 0:00] ## Line: 44 	 }
| [ 0:00] ## Line: 45 	 
| [ 0:00] ## Line: 46 	 check_mounted()
| [ 0:00] ## Line: 47 	 {
| [ 0:00] ## Line: 48 	 	mount | tee out
| [ 0:00] ## Line: 49 	 	grep $vg out || {
| [ 0:00] ## Line: 50 	 		# older versions of systemd sometimes umount volume by mistake
| [ 0:00] ## Line: 51 	 		# skip further test when this case happens
| [ 0:00] ## Line: 52 	 		systemctl --version | grep "systemd 222" && \
| [ 0:00] ## Line: 53 	 			skip "System is running old racy systemd version."
| [ 0:00] ## Line: 54 	 	}
| [ 0:00] ## Line: 55 	 }
| [ 0:00] ## Line: 56 	 
| [ 0:00] ## Line: 57 	 # Test for block sizes != 1024 (rhbz #480022)
| [ 0:00] ## Line: 58 	 trap 'cleanup_mounted_and_teardown' EXIT
| [ 0:00] ## Line: 59 	 
| [ 0:00] ## Line: 60 	 # Iterate over supported filesystems
| [ 0:00] ## Line: 61 	 for i in mkfs.ext3 mkfs.xfs mkfs.reiserfs
| [ 0:00] ## Line: 62 	 do
| [ 0:00] ## Line: 63 	 
| [ 0:00] ## Line: 64 	 if not which "$i" ; then
| [ 0:00] ## Line: 65 	 	echo "Skipping tests for missing $i"
| [ 0:00] ## Line: 66 	 	continue
| [ 0:00] ## Line: 67 	 fi
| [ 0:00] ## Line: 68 	 
| [ 0:00] ## Line: 69 	 lvcreate -n $lv1 -L20M $vg
| [ 0:00] ## Line: 70 	 
| [ 0:00] ## Line: 71 	 case "$i" in
| [ 0:00] ## Line: 72 	 *ext3)		MKFS_ARGS="-b1024 -j" ;;
| [ 0:00] ## Line: 73 	 *xfs)		MKFS_ARGS="-l internal,size=1000b -f" ;;
| [ 0:00] ## Line: 74 	 *reiserfs)	MKFS_ARGS="-s 513 -f" ;;
| [ 0:00] ## Line: 75 	 esac
| [ 0:00] ## Line: 76 	 
| [ 0:00] ## Line: 77 	 echo "$i"
| [ 0:00] ## Line: 78 	 "$i" $MKFS_ARGS "$dev_vg_lv"
| [ 0:00] ## Line: 79 	 
| [ 0:00] ## Line: 80 	 # Adding couple udev wait ops as some older systemd
| [ 0:00] ## Line: 81 	 # might get confused and was 'randomly/racy' umounting
| [ 0:00] ## Line: 82 	 # devices  just mounted.
| [ 0:00] ## Line: 83 	 # 
| [ 0:00] ## Line: 84 	 # See for explanation: 
| [ 0:00] ## Line: 85 	 #   https://github.com/systemd/systemd/commit/628c89cc68ab96fce2de7ebba5933725d147aecc
| [ 0:00] ## Line: 86 	 #   https://github.com/systemd/systemd/pull/2017
| [ 0:00] ## Line: 87 	 aux udev_wait
| [ 0:00] ## Line: 88 	 
| [ 0:00] ## Line: 89 	 mount "$dev_vg_lv" "$mount_dir"
| [ 0:00] ## Line: 90 	 
| [ 0:00] ## Line: 91 	 aux udev_wait
| [ 0:00] ## Line: 92 	 
| [ 0:00] ## Line: 93 	 lvrename $vg_lv $vg_lv_ren
| [ 0:00] ## Line: 94 	 
| [ 0:00] ## Line: 95 	 check_mounted
| [ 0:00] ## Line: 96 	 
| [ 0:00] ## Line: 97 	 # fails on renamed LV
| [ 0:00] ## Line: 98 	 fail lvresize -y -L+10M -r $vg_lv_ren
| [ 0:00] ## Line: 99 	 
| [ 0:00] ## Line: 100 	 # fails on unknown mountpoint  (FIXME: umount)
| [ 0:00] ## Line: 101 	 not umount "$dev_vg_lv"
| [ 0:00] ## Line: 102 	 
| [ 0:00] ## Line: 103 	 lvcreate -L20 -n $lv1 $vg
| [ 0:00] ## Line: 104 	 "$i" $MKFS_ARGS "$dev_vg_lv"
| [ 0:00] ## Line: 105 	 
| [ 0:00] ## Line: 106 	 aux udev_wait
| [ 0:00] ## Line: 107 	 
| [ 0:00] ## Line: 108 	 mount "$dev_vg_lv" "$mount_dolar_dir"
| [ 0:00] ## Line: 109 	 
| [ 0:00] ## Line: 110 	 check_mounted
| [ 0:00] ## Line: 111 	 
| [ 0:00] ## Line: 112 	 not lvresize -L+10M -r $vg_lv_ren
| [ 0:00] ## Line: 113 	 
| [ 0:00] ## Line: 114 	 umount "$mount_dir"
| [ 0:00] ## Line: 115 	 
| [ 0:00] ## Line: 116 	 lvresize -y -L+10M -r $vg_lv
| [ 0:00] ## Line: 117 	 
| [ 0:00] ## Line: 118 	 aux udev_wait
| [ 0:00] ## Line: 119 	 
| [ 0:00] ## Line: 120 	 umount "$mount_dolar_dir"
| [ 0:00] ## Line: 121 	 
| [ 0:00] ## Line: 122 	 lvremove -ff $vg
| [ 0:00] ## Line: 123 	 
| [ 0:00] ## Line: 124 	 done
| [ 0:00] ## Line: 125 	 
| [ 0:00] ## Line: 126 	 vgremove -ff $vg
| [ 0:00] aux teardown
| [ 0:00] #fsadm-renamed.sh:1+ aux teardown
| [ 0:00] ## teardown.........ok
###       failed: [ndev-vanilla] shell/fsadm-renamed.sh

| [ 0:00] Library version:   1.02.146 (2017-12-18)
| [ 0:00] Driver version:    4.35.0
| [ 0:00] Kernel is Linux localhost.localdomain 3.10.0-693.11.1.el7.x86_64 #1 SMP Mon Dec 4 23:52:40 UTC 2017 x86_64 GNU/Linux
| [ 0:00] Selinux mode is not installed.
| [ 0:00]               total        used        free      shared  buff/cache   available
| [ 0:00] Mem:           7822        1075        4156          10        2591        6440
| [ 0:00] Swap:          4095           0        4095
| [ 0:00] Filesystem      Size  Used Avail Use% Mounted on
| [ 0:00] /dev/sdc1        18G  8.4G  8.4G  50% /
| [ 0:00] /dev/sdd1        51G  6.1G   43G  13% /lfskernel
| [ 0:00] devtmpfs        3.9G     0  3.9G   0% /dev
| [ 0:00] tmpfs           3.9G     0  3.9G   0% /run
| [ 0:00] @TESTDIR=/tmp/LVMTEST27116.1zimacgReI
| [ 0:00] @PREFIX=LVMTEST27116
| [ 0:00] ## LVMCONF: activation {
| [ 0:00] ## LVMCONF:     checks = 1
| [ 0:00] ## LVMCONF:     monitoring = 0
| [ 0:00] ## LVMCONF:     polling_interval = 1
| [ 0:00] ## LVMCONF:     raid_region_size = 512
| [ 0:00] ## LVMCONF:     retry_deactivation = 1
| [ 0:00] ## LVMCONF:     snapshot_autoextend_percent = 50
| [ 0:00] ## LVMCONF:     snapshot_autoextend_threshold = 50
| [ 0:00] ## LVMCONF:     udev_rules = 1
| [ 0:00] ## LVMCONF:     udev_sync = 1
| [ 0:00] ## LVMCONF:     verify_udev_operations = 1
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: allocation {
| [ 0:00] ## LVMCONF:     wipe_signatures_when_zeroing_new_lvs = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: backup {
| [ 0:00] ## LVMCONF:     archive = 0
| [ 0:00] ## LVMCONF:     backup = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: devices {
| [ 0:00] ## LVMCONF:     cache_dir = "@TESTDIR@/etc"
| [ 0:00] ## LVMCONF:     default_data_alignment = 1
| [ 0:00] ## LVMCONF:     dir = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     filter = "a|.*|"
| [ 0:00] ## LVMCONF:     global_filter = [ "a|@TESTDIR@/dev/mapper/@PREFIX@.*pv[0-9_]*$|", "r|.*|" ]
| [ 0:00] ## LVMCONF:     md_component_detection  = 0
| [ 0:00] ## LVMCONF:     scan = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     sysfs_scan = 1
| [ 0:00] ## LVMCONF:     write_cache_state = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: dmeventd {
| [ 0:00] ## LVMCONF:     executable = "/sources/boot/LVM2.2.02.177/test/lib/dmeventd"
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: global {
| [ 0:00] ## LVMCONF:     abort_on_internal_errors = 1
| [ 0:00] ## LVMCONF:     cache_check_executable = "/usr/sbin/cache_check"
| [ 0:00] ## LVMCONF:     cache_dump_executable = "/usr/sbin/cache_dump"
| [ 0:00] ## LVMCONF:     cache_repair_executable = "/usr/sbin/cache_repair"
| [ 0:00] ## LVMCONF:     detect_internal_vg_cache_corruption = 1
| [ 0:00] ## LVMCONF:     fallback_to_local_locking = 0
| [ 0:00] ## LVMCONF:     fsadm_executable = "/sources/boot/LVM2.2.02.177/test/lib/fsadm"
| [ 0:00] ## LVMCONF:     library_dir = "@TESTDIR@/lib"
| [ 0:00] ## LVMCONF:     locking_dir = "@TESTDIR@/var/lock/lvm"
| [ 0:00] ## LVMCONF:     locking_type=1
| [ 0:00] ## LVMCONF:     notify_dbus = 0
| [ 0:00] ## LVMCONF:     si_unit_consistency = 1
| [ 0:00] ## LVMCONF:     thin_check_executable = "/usr/sbin/thin_check"
| [ 0:00] ## LVMCONF:     thin_dump_executable = "/usr/sbin/thin_dump"
| [ 0:00] ## LVMCONF:     thin_repair_executable = "/usr/sbin/thin_repair"
| [ 0:00] ## LVMCONF:     use_lvmetad = 0
| [ 0:00] ## LVMCONF:     use_lvmlockd = 0
| [ 0:00] ## LVMCONF:     use_lvmpolld = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: log {
| [ 0:00] ## LVMCONF:     activation = 1
| [ 0:00] ## LVMCONF:     file = "@TESTDIR@/debug.log"
| [ 0:00] ## LVMCONF:     indent = 1
| [ 0:00] ## LVMCONF:     level = 9
| [ 0:00] ## LVMCONF:     overwrite = 1
| [ 0:00] ## LVMCONF:     syslog = 0
| [ 0:00] ## LVMCONF:     verbose = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] <======== Processing test: "fsadm.sh" ========>
| [ 0:00] 
| [ 0:00] aux prepare_vg 1 100
| [ 0:00] #fsadm.sh:19+ aux prepare_vg 1 100
| [ 0:00] ## preparing loop device....ok (/dev/loop0)
| [ 0:00] ## preparing 1 devices...lib/utils: line 212: DM_UDEV_COOKIE: unbound variable
| [ 0:00] set +vx; STACKTRACE; set -vx
| [ 0:00] ##fsadm.sh:19+ set +vx
| [ 0:00] ## - /lfskernel/sources/boot/LVM2.2.02.177/test/shell/fsadm.sh:19
| [ 0:00] ## 1 STACKTRACE() called from /lfskernel/sources/boot/LVM2.2.02.177/test/shell/fsadm.sh:19
| [ 0:00] <======== Info ========>
| [ 0:00] ## DMINFO:   Name             Maj Min Stat Open Targ Event  UUID                                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv1  253   3 L--w    0    1      0 TEST-@PREFIX@pv1                                                
| [ 0:00] <======== Active table ========>
| [ 0:00] ## DMTABLE:  @PREFIX@pv1: 0 204800 linear 7:0 2048
| [ 0:00] <======== Inactive table ========>
| [ 0:00] ## DMITABLE: @PREFIX@pv1: 
| [ 0:00] <======== Status ========>
| [ 0:00] ## DMSTATUS: @PREFIX@pv1: 0 204800 linear 
| [ 0:00] <======== Tree ========>
| [ 0:00] ## DMTREE:   @PREFIX@pv1 (253:3)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   LFS_vg-lfs (253:2)
| [ 0:00] ## DMTREE:    `- (8:16)
| [ 0:00] ## DMTREE:   centos-swap (253:1)
| [ 0:00] ## DMTREE:    `- (8:2)
| [ 0:00] ## DMTREE:   centos-root (253:0)
| [ 0:00] ## DMTREE:    `- (8:2)
| [ 0:00] <======== Recursive list of @TESTDIR@/dev ========>
| [ 0:00] ## LSLR:	@TESTDIR@/dev:
| [ 0:00] ## LSLR:	total 4
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 0 Feb 21 02:26 loop0
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 1 Feb 21 02:26 loop1
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 2 Feb 21 02:26 loop2
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 3 Feb 21 02:26 loop3
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 4 Feb 21 02:26 loop4
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 5 Feb 21 02:26 loop5
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 6 Feb 21 02:26 loop6
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 7 Feb 21 02:26 loop7
| [ 0:00] ## LSLR:	drwxr-xr-x 2 root root 4096 Feb 21 02:26 mapper
| [ 0:00] ## LSLR:	crw-r--r-- 1 root root 1, 3 Feb 21 02:26 testnull
| [ 0:00] ## LSLR:	
| [ 0:00] ## LSLR:	@TESTDIR@/dev/mapper:
| [ 0:00] ## LSLR:	total 0
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   3 Feb 21 02:26 @PREFIX@pv1
| [ 0:00] ## LSLR:	crw------- 1 root root  10, 236 Feb 21 02:26 control
| [ 0:00] <======== Udev DB content ========>
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-0
| [ 0:00] ## UDEV:	N: dm-0
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-0
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-0
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=0
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-1
| [ 0:00] ## UDEV:	N: dm-1
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-1
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-1
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=1
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-2
| [ 0:00] ## UDEV:	N: dm-2
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-2
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-2
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=2
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-3
| [ 0:00] ## UDEV:	N: dm-3
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-3
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-3
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=3
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/loop0
| [ 0:00] ## UDEV:	N: loop0
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/loop0
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/loop0
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=7
| [ 0:00] ## UDEV:	E: MINOR=0
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] <======== Script file "fsadm.sh" ========>
| [ 0:00] ## Line: 1 	 #!/usr/bin/env bash
| [ 0:00] ## Line: 2 	 
| [ 0:00] ## Line: 3 	 # Copyright (C) 2008-2014 Red Hat, Inc. All rights reserved.
| [ 0:00] ## Line: 4 	 #
| [ 0:00] ## Line: 5 	 # This copyrighted material is made available to anyone wishing to use,
| [ 0:00] ## Line: 6 	 # modify, copy, or redistribute it subject to the terms and conditions
| [ 0:00] ## Line: 7 	 # of the GNU General Public License v.2.
| [ 0:00] ## Line: 8 	 #
| [ 0:00] ## Line: 9 	 # You should have received a copy of the GNU General Public License
| [ 0:00] ## Line: 10 	 # along with this program; if not, write to the Free Software Foundation,
| [ 0:00] ## Line: 11 	 # Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA
| [ 0:00] ## Line: 12 	 
| [ 0:00] ## Line: 13 	 test_description='Exercise fsadm filesystem resize'
| [ 0:00] ## Line: 14 	 SKIP_WITH_LVMLOCKD=1
| [ 0:00] ## Line: 15 	 SKIP_WITH_LVMPOLLD=1
| [ 0:00] ## Line: 16 	 
| [ 0:00] ## Line: 17 	 . lib/inittest
| [ 0:00] ## Line: 18 	 
| [ 0:00] ## Line: 19 	 aux prepare_vg 1 100
| [ 0:00] ## Line: 20 	 
| [ 0:00] ## Line: 21 	 # set to "skip" to avoid testing given fs and test warning result
| [ 0:00] ## Line: 22 	 # i.e. check_reiserfs=skip
| [ 0:00] ## Line: 23 	 check_ext2=
| [ 0:00] ## Line: 24 	 check_ext3=
| [ 0:00] ## Line: 25 	 check_xfs=
| [ 0:00] ## Line: 26 	 check_reiserfs=
| [ 0:00] ## Line: 27 	 
| [ 0:00] ## Line: 28 	 which mkfs.ext2 || check_ext2=${check_ext2:-mkfs.ext2}
| [ 0:00] ## Line: 29 	 which mkfs.ext3 || check_ext3=${check_ext3:-mkfs.ext3}
| [ 0:00] ## Line: 30 	 which fsck.ext3 || check_ext3=${check_ext3:-fsck.ext3}
| [ 0:00] ## Line: 31 	 which mkfs.xfs || check_xfs=${check_xfs:-mkfs.xfs}
| [ 0:00] ## Line: 32 	 which xfs_check || {
| [ 0:00] ## Line: 33 	 	which xfs_repair || check_xfs=${check_xfs:-xfs_repair}
| [ 0:00] ## Line: 34 	 }
| [ 0:00] ## Line: 35 	 grep xfs /proc/filesystems || check_xfs=${check_xfs:-no_xfs}
| [ 0:00] ## Line: 36 	 
| [ 0:00] ## Line: 37 	 which mkfs.reiserfs || check_reiserfs=${check_reiserfs:-mkfs.reiserfs}
| [ 0:00] ## Line: 38 	 which reiserfsck || check_reiserfs=${check_reiserfs:-reiserfsck}
| [ 0:00] ## Line: 39 	 modprobe reiserfs || true
| [ 0:00] ## Line: 40 	 grep reiserfs /proc/filesystems || check_reiserfs=${check_reiserfs:-no_reiserfs}
| [ 0:00] ## Line: 41 	 
| [ 0:00] ## Line: 42 	 vg_lv=$vg/$lv1
| [ 0:00] ## Line: 43 	 vg_lv2=$vg/${lv1}bar
| [ 0:00] ## Line: 44 	 dev_vg_lv="$DM_DEV_DIR/$vg_lv"
| [ 0:00] ## Line: 45 	 dev_vg_lv2="$DM_DEV_DIR/$vg_lv2"
| [ 0:00] ## Line: 46 	 mount_dir="mnt"
| [ 0:00] ## Line: 47 	 mount_space_dir="mnt space dir"
| [ 0:00] ## Line: 48 	 # for recursive call
| [ 0:00] ## Line: 49 	 LVM_BINARY=$(which lvm)
| [ 0:00] ## Line: 50 	 export LVM_BINARY
| [ 0:00] ## Line: 51 	 
| [ 0:00] ## Line: 52 	 test ! -d "$mount_dir" && mkdir "$mount_dir"
| [ 0:00] ## Line: 53 	 test ! -d "$mount_space_dir" && mkdir "$mount_space_dir"
| [ 0:00] ## Line: 54 	 
| [ 0:00] ## Line: 55 	 cleanup_mounted_and_teardown()
| [ 0:00] ## Line: 56 	 {
| [ 0:00] ## Line: 57 	 	umount "$mount_dir" || true
| [ 0:00] ## Line: 58 	 	umount "$mount_space_dir" || true
| [ 0:00] ## Line: 59 	 	aux teardown
| [ 0:00] ## Line: 60 	 }
| [ 0:00] ## Line: 61 	 
| [ 0:00] ## Line: 62 	 fscheck_ext3()
| [ 0:00] ## Line: 63 	 {
| [ 0:00] ## Line: 64 	 	fsck.ext3 -p -F -f "$dev_vg_lv"
| [ 0:00] ## Line: 65 	 }
| [ 0:00] ## Line: 66 	 
| [ 0:00] ## Line: 67 	 fscheck_xfs()
| [ 0:00] ## Line: 68 	 {
| [ 0:00] ## Line: 69 	 	if which xfs_repair ; then
| [ 0:00] ## Line: 70 	 		xfs_repair -n "$dev_vg_lv"
| [ 0:00] ## Line: 71 	 	else
| [ 0:00] ## Line: 72 	 		xfs_check "$dev_vg_lv"
| [ 0:00] ## Line: 73 	 	fi
| [ 0:00] ## Line: 74 	 }
| [ 0:00] ## Line: 75 	 
| [ 0:00] ## Line: 76 	 fscheck_reiserfs()
| [ 0:00] ## Line: 77 	 {
| [ 0:00] ## Line: 78 	 	reiserfsck --check -p -f "$dev_vg_lv" </dev/null
| [ 0:00] ## Line: 79 	 }
| [ 0:00] ## Line: 80 	 
| [ 0:00] ## Line: 81 	 check_missing()
| [ 0:00] ## Line: 82 	 {
| [ 0:00] ## Line: 83 	 	local t
| [ 0:00] ## Line: 84 	 	eval "t=\$check_$1"
| [ 0:00] ## Line: 85 	 	test -z "$t" && return 0
| [ 0:00] ## Line: 86 	 	test "$t" = skip && return 1
| [ 0:00] ## Line: 87 	 	echo "WARNING: fsadm test skipped $1 tests, $t tool is missing."
| [ 0:00] ## Line: 88 	 	# trick to get test listed with warning
| [ 0:00] ## Line: 89 	 	# should false;
| [ 0:00] ## Line: 90 	 	return 1
| [ 0:00] ## Line: 91 	 }
| [ 0:00] ## Line: 92 	 
| [ 0:00] ## Line: 93 	 # Test for block sizes != 1024 (rhbz #480022)
| [ 0:00] ## Line: 94 	 lvcreate -n $lv1 -L20M $vg
| [ 0:00] ## Line: 95 	 lvcreate -n ${lv1}bar -L10M $vg
| [ 0:00] ## Line: 96 	 trap 'cleanup_mounted_and_teardown' EXIT
| [ 0:00] ## Line: 97 	 
| [ 0:00] ## Line: 98 	 if check_missing ext2; then
| [ 0:00] ## Line: 99 	 	mkfs.ext2 -b4096 -j "$dev_vg_lv"
| [ 0:00] ## Line: 100 	 
| [ 0:00] ## Line: 101 	 	fsadm --lvresize resize $vg_lv 30M
| [ 0:00] ## Line: 102 	 	# Fails - not enough space for 4M fs
| [ 0:00] ## Line: 103 	 	not fsadm -y --lvresize resize "$dev_vg_lv" 4M
| [ 0:00] ## Line: 104 	 	lvresize -L+10M -r $vg_lv
| [ 0:00] ## Line: 105 	 	lvreduce -L10M -r $vg_lv
| [ 0:00] ## Line: 106 	 
| [ 0:00] ## Line: 107 	 	fscheck_ext3
| [ 0:00] ## Line: 108 	 	mount "$dev_vg_lv" "$mount_dir"
| [ 0:00] ## Line: 109 	 	not fsadm -y --lvresize resize $vg_lv 4M
| [ 0:00] ## Line: 110 	 	echo n | not lvresize -L4M -r -n $vg_lv
| [ 0:00] ## Line: 111 	 	lvresize -L+20M -r -n $vg_lv
| [ 0:00] ## Line: 112 	 	umount "$mount_dir"
| [ 0:00] ## Line: 113 	 	fscheck_ext3
| [ 0:00] ## Line: 114 	 
| [ 0:00] ## Line: 115 	 	lvresize -f -L20M $vg_lv
| [ 0:00] ## Line: 116 	 fi
| [ 0:00] ## Line: 117 	 
| [ 0:00] ## Line: 118 	 if check_missing ext3; then
| [ 0:00] ## Line: 119 	 	mkfs.ext3 -b4096 -j "$dev_vg_lv"
| [ 0:00] ## Line: 120 	 	mkfs.ext3 -b4096 -j "$dev_vg_lv2"
| [ 0:00] ## Line: 121 	 
| [ 0:00] ## Line: 122 	 	fsadm --lvresize resize $vg_lv 30M
| [ 0:00] ## Line: 123 	 	# Fails - not enough space for 4M fs
| [ 0:00] ## Line: 124 	 	not fsadm -y --lvresize resize "$dev_vg_lv" 4M
| [ 0:00] ## Line: 125 	 	lvresize -L+10M -r $vg_lv
| [ 0:00] ## Line: 126 	 	lvreduce -L10M -r $vg_lv
| [ 0:00] ## Line: 127 	 
| [ 0:00] ## Line: 128 	 	fscheck_ext3
| [ 0:00] ## Line: 129 	 	mount "$dev_vg_lv" "$mount_dir"
| [ 0:00] ## Line: 130 	 	lvresize -L+10M -r $vg_lv
| [ 0:00] ## Line: 131 	 	mount "$dev_vg_lv2" "$mount_space_dir"
| [ 0:00] ## Line: 132 	 	fsadm --lvresize -e -y resize $vg_lv2 25M
| [ 0:00] ## Line: 133 	 
| [ 0:00] ## Line: 134 	 	not fsadm -y --lvresize resize $vg_lv 4M
| [ 0:00] ## Line: 135 	 	echo n | not lvresize -L4M -r -n $vg_lv
| [ 0:00] ## Line: 136 	 	lvresize -L+20M -r -n $vg_lv
| [ 0:00] ## Line: 137 	 	lvresize -L-10M -r -y $vg_lv
| [ 0:00] ## Line: 138 	 	umount "$mount_dir"
| [ 0:00] ## Line: 139 	 	umount "$mount_space_dir"
| [ 0:00] ## Line: 140 	 	fscheck_ext3
| [ 0:00] ## Line: 141 	 
| [ 0:00] ## Line: 142 	 	lvresize -f -L20M $vg_lv
| [ 0:00] ## Line: 143 	 fi
| [ 0:00] ## Line: 144 	 
| [ 0:00] ## Line: 145 	 if check_missing xfs; then
| [ 0:00] ## Line: 146 	 	mkfs.xfs -l internal,size=1000b -f "$dev_vg_lv"
| [ 0:00] ## Line: 147 	 
| [ 0:00] ## Line: 148 	 	fsadm --lvresize resize $vg_lv 30M
| [ 0:00] ## Line: 149 	 	# Fails - not enough space for 4M fs
| [ 0:00] ## Line: 150 	 	lvresize -L+10M -r $vg_lv
| [ 0:00] ## Line: 151 	 	not lvreduce -L10M -r $vg_lv
| [ 0:00] ## Line: 152 	 
| [ 0:00] ## Line: 153 	 	fscheck_xfs
| [ 0:00] ## Line: 154 	 	mount "$dev_vg_lv" "$mount_dir"
| [ 0:00] ## Line: 155 	 	lvresize -L+10M -r -n $vg_lv
| [ 0:00] ## Line: 156 	 	umount "$mount_dir"
| [ 0:00] ## Line: 157 	 	fscheck_xfs
| [ 0:00] ## Line: 158 	 
| [ 0:00] ## Line: 159 	 	lvresize -f -L20M $vg_lv
| [ 0:00] ## Line: 160 	 fi
| [ 0:00] ## Line: 161 	 
| [ 0:00] ## Line: 162 	 if check_missing reiserfs; then
| [ 0:00] ## Line: 163 	 	mkfs.reiserfs -s 513 -f "$dev_vg_lv"
| [ 0:00] ## Line: 164 	 
| [ 0:00] ## Line: 165 	 	fsadm --lvresize resize $vg_lv 30M
| [ 0:00] ## Line: 166 	 	lvresize -L+10M -r $vg_lv
| [ 0:00] ## Line: 167 	 	fsadm --lvresize -y resize $vg_lv 10M
| [ 0:00] ## Line: 168 	 
| [ 0:00] ## Line: 169 	 	fscheck_reiserfs
| [ 0:00] ## Line: 170 	 	mount "$dev_vg_lv" "$mount_dir"
| [ 0:00] ## Line: 171 	 
| [ 0:00] ## Line: 172 	 	fsadm -y --lvresize resize $vg_lv 30M
| [ 0:00] ## Line: 173 	 	umount "$mount_dir"
| [ 0:00] ## Line: 174 	 	fscheck_reiserfs
| [ 0:00] ## Line: 175 	 
| [ 0:00] ## Line: 176 	 	lvresize -f -L20M $vg_lv
| [ 0:00] ## Line: 177 	 fi
| [ 0:00] ## Line: 178 	 
| [ 0:00] ## Line: 179 	 vgremove -ff $vg
| [ 0:00] aux teardown
| [ 0:00] #fsadm.sh:1+ aux teardown
| [ 0:00] ## teardown.........ok
###       failed: [ndev-vanilla] shell/fsadm.sh

| [ 0:00] Library version:   1.02.146 (2017-12-18)
| [ 0:00] Driver version:    4.35.0
| [ 0:00] Kernel is Linux localhost.localdomain 3.10.0-693.11.1.el7.x86_64 #1 SMP Mon Dec 4 23:52:40 UTC 2017 x86_64 GNU/Linux
| [ 0:00] Selinux mode is not installed.
| [ 0:00]               total        used        free      shared  buff/cache   available
| [ 0:00] Mem:           7822        1075        4156          10        2591        6440
| [ 0:00] Swap:          4095           0        4095
| [ 0:00] Filesystem      Size  Used Avail Use% Mounted on
| [ 0:00] /dev/sdc1        18G  8.4G  8.4G  50% /
| [ 0:00] /dev/sdd1        51G  6.1G   43G  13% /lfskernel
| [ 0:00] devtmpfs        3.9G     0  3.9G   0% /dev
| [ 0:00] tmpfs           3.9G     0  3.9G   0% /run
| [ 0:00] @TESTDIR=/tmp/LVMTEST27282.LYDReyyKlQ
| [ 0:00] @PREFIX=LVMTEST27282
| [ 0:00] ## LVMCONF: activation {
| [ 0:00] ## LVMCONF:     checks = 1
| [ 0:00] ## LVMCONF:     monitoring = 0
| [ 0:00] ## LVMCONF:     polling_interval = 1
| [ 0:00] ## LVMCONF:     raid_region_size = 512
| [ 0:00] ## LVMCONF:     retry_deactivation = 1
| [ 0:00] ## LVMCONF:     snapshot_autoextend_percent = 50
| [ 0:00] ## LVMCONF:     snapshot_autoextend_threshold = 50
| [ 0:00] ## LVMCONF:     udev_rules = 1
| [ 0:00] ## LVMCONF:     udev_sync = 1
| [ 0:00] ## LVMCONF:     verify_udev_operations = 1
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: allocation {
| [ 0:00] ## LVMCONF:     wipe_signatures_when_zeroing_new_lvs = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: backup {
| [ 0:00] ## LVMCONF:     archive = 0
| [ 0:00] ## LVMCONF:     backup = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: devices {
| [ 0:00] ## LVMCONF:     cache_dir = "@TESTDIR@/etc"
| [ 0:00] ## LVMCONF:     default_data_alignment = 1
| [ 0:00] ## LVMCONF:     dir = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     filter = "a|.*|"
| [ 0:00] ## LVMCONF:     global_filter = [ "a|@TESTDIR@/dev/mapper/@PREFIX@.*pv[0-9_]*$|", "r|.*|" ]
| [ 0:00] ## LVMCONF:     md_component_detection  = 0
| [ 0:00] ## LVMCONF:     scan = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     sysfs_scan = 1
| [ 0:00] ## LVMCONF:     write_cache_state = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: dmeventd {
| [ 0:00] ## LVMCONF:     executable = "/sources/boot/LVM2.2.02.177/test/lib/dmeventd"
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: global {
| [ 0:00] ## LVMCONF:     abort_on_internal_errors = 1
| [ 0:00] ## LVMCONF:     cache_check_executable = "/usr/sbin/cache_check"
| [ 0:00] ## LVMCONF:     cache_dump_executable = "/usr/sbin/cache_dump"
| [ 0:00] ## LVMCONF:     cache_repair_executable = "/usr/sbin/cache_repair"
| [ 0:00] ## LVMCONF:     detect_internal_vg_cache_corruption = 1
| [ 0:00] ## LVMCONF:     fallback_to_local_locking = 0
| [ 0:00] ## LVMCONF:     fsadm_executable = "/sources/boot/LVM2.2.02.177/test/lib/fsadm"
| [ 0:00] ## LVMCONF:     library_dir = "@TESTDIR@/lib"
| [ 0:00] ## LVMCONF:     locking_dir = "@TESTDIR@/var/lock/lvm"
| [ 0:00] ## LVMCONF:     locking_type=1
| [ 0:00] ## LVMCONF:     notify_dbus = 0
| [ 0:00] ## LVMCONF:     si_unit_consistency = 1
| [ 0:00] ## LVMCONF:     thin_check_executable = "/usr/sbin/thin_check"
| [ 0:00] ## LVMCONF:     thin_dump_executable = "/usr/sbin/thin_dump"
| [ 0:00] ## LVMCONF:     thin_repair_executable = "/usr/sbin/thin_repair"
| [ 0:00] ## LVMCONF:     use_lvmetad = 0
| [ 0:00] ## LVMCONF:     use_lvmlockd = 0
| [ 0:00] ## LVMCONF:     use_lvmpolld = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: log {
| [ 0:00] ## LVMCONF:     activation = 1
| [ 0:00] ## LVMCONF:     file = "@TESTDIR@/debug.log"
| [ 0:00] ## LVMCONF:     indent = 1
| [ 0:00] ## LVMCONF:     level = 9
| [ 0:00] ## LVMCONF:     overwrite = 1
| [ 0:00] ## LVMCONF:     syslog = 0
| [ 0:00] ## LVMCONF:     verbose = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] <======== Processing test: "inconsistent-metadata.sh" ========>
| [ 0:00] 
| [ 0:00] aux prepare_vg 3 12
| [ 0:00] #inconsistent-metadata.sh:18+ aux prepare_vg 3 12
| [ 0:00] ## preparing loop device....ok (/dev/loop0)
| [ 0:00] ## preparing 3 devices...lib/utils: line 212: DM_UDEV_COOKIE: unbound variable
| [ 0:00] set +vx; STACKTRACE; set -vx
| [ 0:00] ##inconsistent-metadata.sh:18+ set +vx
| [ 0:00] ## - /lfskernel/sources/boot/LVM2.2.02.177/test/shell/inconsistent-metadata.sh:18
| [ 0:00] ## 1 STACKTRACE() called from /lfskernel/sources/boot/LVM2.2.02.177/test/shell/inconsistent-metadata.sh:18
| [ 0:00] <======== Info ========>
| [ 0:00] ## DMINFO:   Name             Maj Min Stat Open Targ Event  UUID                                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv3  253   3 L--w    0    1      0 TEST-@PREFIX@pv3                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv2  253   5 L--w    0    1      0 TEST-@PREFIX@pv2                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv1  253   4 L--w    0    1      0 TEST-@PREFIX@pv1                                                
| [ 0:00] <======== Active table ========>
| [ 0:00] ## DMTABLE:  @PREFIX@pv3: 0 24576 linear 7:0 51200
| [ 0:00] ## DMTABLE:  @PREFIX@pv2: 0 24576 linear 7:0 26624
| [ 0:00] ## DMTABLE:  @PREFIX@pv1: 0 24576 linear 7:0 2048
| [ 0:00] <======== Inactive table ========>
| [ 0:00] ## DMITABLE: @PREFIX@pv3: 
| [ 0:00] ## DMITABLE: @PREFIX@pv2: 
| [ 0:00] ## DMITABLE: @PREFIX@pv1: 
| [ 0:00] <======== Status ========>
| [ 0:00] ## DMSTATUS: @PREFIX@pv3: 0 24576 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv2: 0 24576 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv1: 0 24576 linear 
| [ 0:00] <======== Tree ========>
| [ 0:00] ## DMTREE:   @PREFIX@pv3 (253:3)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   @PREFIX@pv2 (253:5)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   @PREFIX@pv1 (253:4)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   LFS_vg-lfs (253:2)
| [ 0:00] ## DMTREE:    `- (8:16)
| [ 0:00] ## DMTREE:   centos-swap (253:1)
| [ 0:00] ## DMTREE:    `- (8:2)
| [ 0:00] ## DMTREE:   centos-root (253:0)
| [ 0:00] ## DMTREE:    `- (8:2)
| [ 0:00] <======== Recursive list of @TESTDIR@/dev ========>
| [ 0:00] ## LSLR:	@TESTDIR@/dev:
| [ 0:00] ## LSLR:	total 4
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 0 Feb 21 02:26 loop0
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 1 Feb 21 02:26 loop1
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 2 Feb 21 02:26 loop2
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 3 Feb 21 02:26 loop3
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 4 Feb 21 02:26 loop4
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 5 Feb 21 02:26 loop5
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 6 Feb 21 02:26 loop6
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 7 Feb 21 02:26 loop7
| [ 0:00] ## LSLR:	drwxr-xr-x 2 root root 4096 Feb 21 02:26 mapper
| [ 0:00] ## LSLR:	crw-r--r-- 1 root root 1, 3 Feb 21 02:26 testnull
| [ 0:00] ## LSLR:	
| [ 0:00] ## LSLR:	@TESTDIR@/dev/mapper:
| [ 0:00] ## LSLR:	total 0
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   4 Feb 21 02:26 @PREFIX@pv1
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   5 Feb 21 02:26 @PREFIX@pv2
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   3 Feb 21 02:26 @PREFIX@pv3
| [ 0:00] ## LSLR:	crw------- 1 root root  10, 236 Feb 21 02:26 control
| [ 0:00] <======== Udev DB content ========>
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-0
| [ 0:01] ## UDEV:	N: dm-0
| [ 0:01] ## UDEV:	E: DEVNAME=/dev/dm-0
| [ 0:01] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-0
| [ 0:01] ## UDEV:	E: DEVTYPE=disk
| [ 0:01] ## UDEV:	E: MAJOR=253
| [ 0:01] ## UDEV:	E: MINOR=0
| [ 0:01] ## UDEV:	E: SUBSYSTEM=block
| [ 0:01] ## UDEV:	
| [ 0:01] ## UDEV:	P: /devices/virtual/block/dm-1
| [ 0:01] ## UDEV:	N: dm-1
| [ 0:01] ## UDEV:	E: DEVNAME=/dev/dm-1
| [ 0:01] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-1
| [ 0:01] ## UDEV:	E: DEVTYPE=disk
| [ 0:01] ## UDEV:	E: MAJOR=253
| [ 0:01] ## UDEV:	E: MINOR=1
| [ 0:01] ## UDEV:	E: SUBSYSTEM=block
| [ 0:01] ## UDEV:	
| [ 0:01] ## UDEV:	P: /devices/virtual/block/dm-2
| [ 0:01] ## UDEV:	N: dm-2
| [ 0:01] ## UDEV:	E: DEVNAME=/dev/dm-2
| [ 0:01] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-2
| [ 0:01] ## UDEV:	E: DEVTYPE=disk
| [ 0:01] ## UDEV:	E: MAJOR=253
| [ 0:01] ## UDEV:	E: MINOR=2
| [ 0:01] ## UDEV:	E: SUBSYSTEM=block
| [ 0:01] ## UDEV:	
| [ 0:01] ## UDEV:	P: /devices/virtual/block/dm-3
| [ 0:01] ## UDEV:	N: dm-3
| [ 0:01] ## UDEV:	E: DEVNAME=/dev/dm-3
| [ 0:01] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-3
| [ 0:01] ## UDEV:	E: DEVTYPE=disk
| [ 0:01] ## UDEV:	E: MAJOR=253
| [ 0:01] ## UDEV:	E: MINOR=3
| [ 0:01] ## UDEV:	E: SUBSYSTEM=block
| [ 0:01] ## UDEV:	
| [ 0:01] ## UDEV:	P: /devices/virtual/block/dm-4
| [ 0:01] ## UDEV:	N: dm-4
| [ 0:01] ## UDEV:	E: DEVNAME=/dev/dm-4
| [ 0:01] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-4
| [ 0:01] ## UDEV:	E: DEVTYPE=disk
| [ 0:01] ## UDEV:	E: MAJOR=253
| [ 0:01] ## UDEV:	E: MINOR=4
| [ 0:01] ## UDEV:	E: SUBSYSTEM=block
| [ 0:01] ## UDEV:	
| [ 0:01] ## UDEV:	P: /devices/virtual/block/dm-5
| [ 0:01] ## UDEV:	N: dm-5
| [ 0:01] ## UDEV:	E: DEVNAME=/dev/dm-5
| [ 0:01] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-5
| [ 0:01] ## UDEV:	E: DEVTYPE=disk
| [ 0:01] ## UDEV:	E: MAJOR=253
| [ 0:01] ## UDEV:	E: MINOR=5
| [ 0:01] ## UDEV:	E: SUBSYSTEM=block
| [ 0:01] ## UDEV:	
| [ 0:01] ## UDEV:	P: /devices/virtual/block/loop0
| [ 0:01] ## UDEV:	N: loop0
| [ 0:01] ## UDEV:	E: DEVNAME=/dev/loop0
| [ 0:01] ## UDEV:	E: DEVPATH=/devices/virtual/block/loop0
| [ 0:01] ## UDEV:	E: DEVTYPE=disk
| [ 0:01] ## UDEV:	E: MAJOR=7
| [ 0:01] ## UDEV:	E: MINOR=0
| [ 0:01] ## UDEV:	E: SUBSYSTEM=block
| [ 0:01] ## UDEV:	
| [ 0:01] <======== Script file "inconsistent-metadata.sh" ========>
| [ 0:01] ## Line: 1 	 #!/usr/bin/env bash
| [ 0:01] ## Line: 2 	 
| [ 0:01] ## Line: 3 	 # Copyright (C) 2008 Red Hat, Inc. All rights reserved.
| [ 0:01] ## Line: 4 	 #
| [ 0:01] ## Line: 5 	 # This copyrighted material is made available to anyone wishing to use,
| [ 0:01] ## Line: 6 	 # modify, copy, or redistribute it subject to the terms and conditions
| [ 0:01] ## Line: 7 	 # of the GNU General Public License v.2.
| [ 0:01] ## Line: 8 	 #
| [ 0:01] ## Line: 9 	 # You should have received a copy of the GNU General Public License
| [ 0:01] ## Line: 10 	 # along with this program; if not, write to the Free Software Foundation,
| [ 0:01] ## Line: 11 	 # Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA
| [ 0:01] ## Line: 12 	 
| [ 0:01] ## Line: 13 	 SKIP_WITH_LVMLOCKD=1
| [ 0:01] ## Line: 14 	 SKIP_WITH_LVMPOLLD=1
| [ 0:01] ## Line: 15 	 
| [ 0:01] ## Line: 16 	 . lib/inittest
| [ 0:01] ## Line: 17 	 
| [ 0:01] ## Line: 18 	 aux prepare_vg 3 12
| [ 0:01] ## Line: 19 	 get_devs
| [ 0:01] ## Line: 20 	 
| [ 0:01] ## Line: 21 	 lvcreate -aye --type mirror -m 1 -l 1 -n mirror $vg
| [ 0:01] ## Line: 22 	 lvcreate -l 1 -n resized $vg
| [ 0:01] ## Line: 23 	 lvchange -a n $vg/mirror
| [ 0:01] ## Line: 24 	 
| [ 0:01] ## Line: 25 	 aux backup_dev "${DEVICES[@]}"
| [ 0:01] ## Line: 26 	 
| [ 0:01] ## Line: 27 	 init() {
| [ 0:01] ## Line: 28 	 	aux restore_dev "${DEVICES[@]}"
| [ 0:01] ## Line: 29 	 	not check lv_field $vg/resized lv_size "8.00m"
| [ 0:01] ## Line: 30 	 	lvresize -L 8192K $vg/resized
| [ 0:01] ## Line: 31 	 	aux restore_dev "$dev1"
| [ 0:01] ## Line: 32 	 }
| [ 0:01] ## Line: 33 	 
| [ 0:01] ## Line: 34 	 # vgscan fixes up metadata (needs --cache option for direct scan if lvmetad is used)
| [ 0:01] ## Line: 35 	 cache=""
| [ 0:01] ## Line: 36 	 test -e LOCAL_LVMETAD && cache="--cache"
| [ 0:01] ## Line: 37 	 init
| [ 0:01] ## Line: 38 	 vgscan $cache 2>&1 | tee cmd.out
| [ 0:01] ## Line: 39 	 grep "Inconsistent metadata found for VG $vg" cmd.out
| [ 0:01] ## Line: 40 	 test -e LOCAL_LVMETAD && vgrename $vg foo && vgrename foo $vg # trigger a write
| [ 0:01] ## Line: 41 	 vgscan $cache 2>&1 | tee cmd.out
| [ 0:01] ## Line: 42 	 not grep "Inconsistent metadata found for VG $vg" cmd.out
| [ 0:01] ## Line: 43 	 check lv_field $vg/resized lv_size "8.00m"
| [ 0:01] ## Line: 44 	 
| [ 0:01] ## Line: 45 	 # only vgscan would have noticed metadata inconsistencies when lvmetad is active
| [ 0:01] ## Line: 46 	 if test ! -e LOCAL_LVMETAD; then
| [ 0:01] ## Line: 47 	 	# vgdisplay fixes
| [ 0:01] ## Line: 48 	 	init
| [ 0:01] ## Line: 49 	 	vgdisplay $vg 2>&1 | tee cmd.out
| [ 0:01] ## Line: 50 	 	grep "Inconsistent metadata found for VG $vg" cmd.out
| [ 0:01] ## Line: 51 	 	vgdisplay $vg 2>&1 | tee cmd.out
| [ 0:01] ## Line: 52 	 	not grep "Inconsistent metadata found for VG $vg" cmd.out
| [ 0:01] ## Line: 53 	 	check lv_field $vg/resized lv_size "8.00m"
| [ 0:01] ## Line: 54 	 
| [ 0:01] ## Line: 55 	 	# lvs fixes up
| [ 0:01] ## Line: 56 	 	init
| [ 0:01] ## Line: 57 	 	lvs $vg 2>&1 | tee cmd.out
| [ 0:01] ## Line: 58 	 	grep "Inconsistent metadata found for VG $vg" cmd.out
| [ 0:01] ## Line: 59 	 	vgdisplay $vg 2>&1 | tee cmd.out
| [ 0:01] ## Line: 60 	 	not grep "Inconsistent metadata found for VG $vg" cmd.out
| [ 0:01] ## Line: 61 	 	check lv_field $vg/resized lv_size "8.00m"
| [ 0:01] ## Line: 62 	 
| [ 0:01] ## Line: 63 	 	# vgs fixes up as well
| [ 0:01] ## Line: 64 	 	init
| [ 0:01] ## Line: 65 	 	vgs $vg 2>&1 | tee cmd.out
| [ 0:01] ## Line: 66 	 	grep "Inconsistent metadata found for VG $vg" cmd.out
| [ 0:01] ## Line: 67 	 	vgs $vg 2>&1 | tee cmd.out
| [ 0:01] ## Line: 68 	 	not grep "Inconsistent metadata found for VG $vg" cmd.out
| [ 0:01] ## Line: 69 	 	check lv_field $vg/resized lv_size "8.00m"
| [ 0:01] ## Line: 70 	 fi
| [ 0:01] ## Line: 71 	 
| [ 0:01] ## Line: 72 	 echo Check auto-repair of failed vgextend - metadata written to original pv but not new pv
| [ 0:01] ## Line: 73 	 vgremove -f $vg
| [ 0:01] ## Line: 74 	 pvremove -ff "${DEVICES[@]}"
| [ 0:01] ## Line: 75 	 pvcreate "${DEVICES[@]}"
| [ 0:01] ## Line: 76 	 aux backup_dev "$dev2"
| [ 0:01] ## Line: 77 	 vgcreate $vg "$dev1"
| [ 0:01] ## Line: 78 	 vgextend $vg "$dev2"
| [ 0:01] ## Line: 79 	 aux restore_dev "$dev2"
| [ 0:01] ## Line: 80 	 vgscan $cache
| [ 0:01] ## Line: 81 	 should check compare_fields vgs $vg vg_mda_count pvs "$dev2" vg_mda_count
| [ 0:01] ## Line: 82 	 
| [ 0:01] ## Line: 83 	 vgremove -ff $vg
| [ 0:01] aux teardown
| [ 0:01] #inconsistent-metadata.sh:1+ aux teardown
| [ 0:01] ## teardown.........ok
###       failed: [ndev-vanilla] shell/inconsistent-metadata.sh

| [ 0:00] Library version:   1.02.146 (2017-12-18)
| [ 0:00] Driver version:    4.35.0
| [ 0:00] Kernel is Linux localhost.localdomain 3.10.0-693.11.1.el7.x86_64 #1 SMP Mon Dec 4 23:52:40 UTC 2017 x86_64 GNU/Linux
| [ 0:00] Selinux mode is not installed.
| [ 0:00]               total        used        free      shared  buff/cache   available
| [ 0:00] Mem:           7822        1075        4155          10        2591        6440
| [ 0:00] Swap:          4095           0        4095
| [ 0:00] Filesystem      Size  Used Avail Use% Mounted on
| [ 0:00] /dev/sdc1        18G  8.4G  8.4G  50% /
| [ 0:00] /dev/sdd1        51G  6.1G   43G  13% /lfskernel
| [ 0:00] devtmpfs        3.9G     0  3.9G   0% /dev
| [ 0:00] tmpfs           3.9G     0  3.9G   0% /run
| [ 0:00] @TESTDIR=/tmp/LVMTEST27473.wKJ1N6pLFz
| [ 0:00] @PREFIX=LVMTEST27473
| [ 0:00] ## LVMCONF: activation {
| [ 0:00] ## LVMCONF:     checks = 1
| [ 0:00] ## LVMCONF:     monitoring = 0
| [ 0:00] ## LVMCONF:     polling_interval = 1
| [ 0:00] ## LVMCONF:     raid_region_size = 512
| [ 0:00] ## LVMCONF:     retry_deactivation = 1
| [ 0:00] ## LVMCONF:     snapshot_autoextend_percent = 50
| [ 0:00] ## LVMCONF:     snapshot_autoextend_threshold = 50
| [ 0:00] ## LVMCONF:     udev_rules = 1
| [ 0:00] ## LVMCONF:     udev_sync = 1
| [ 0:00] ## LVMCONF:     verify_udev_operations = 1
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: allocation {
| [ 0:00] ## LVMCONF:     wipe_signatures_when_zeroing_new_lvs = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: backup {
| [ 0:00] ## LVMCONF:     archive = 0
| [ 0:00] ## LVMCONF:     backup = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: devices {
| [ 0:00] ## LVMCONF:     cache_dir = "@TESTDIR@/etc"
| [ 0:00] ## LVMCONF:     default_data_alignment = 1
| [ 0:00] ## LVMCONF:     dir = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     filter = "a|.*|"
| [ 0:00] ## LVMCONF:     global_filter = [ "a|@TESTDIR@/dev/mapper/@PREFIX@.*pv[0-9_]*$|", "r|.*|" ]
| [ 0:00] ## LVMCONF:     md_component_detection  = 0
| [ 0:00] ## LVMCONF:     scan = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     sysfs_scan = 1
| [ 0:00] ## LVMCONF:     write_cache_state = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: dmeventd {
| [ 0:00] ## LVMCONF:     executable = "/sources/boot/LVM2.2.02.177/test/lib/dmeventd"
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: global {
| [ 0:00] ## LVMCONF:     abort_on_internal_errors = 1
| [ 0:00] ## LVMCONF:     cache_check_executable = "/usr/sbin/cache_check"
| [ 0:00] ## LVMCONF:     cache_dump_executable = "/usr/sbin/cache_dump"
| [ 0:00] ## LVMCONF:     cache_repair_executable = "/usr/sbin/cache_repair"
| [ 0:00] ## LVMCONF:     detect_internal_vg_cache_corruption = 1
| [ 0:00] ## LVMCONF:     fallback_to_local_locking = 0
| [ 0:00] ## LVMCONF:     fsadm_executable = "/sources/boot/LVM2.2.02.177/test/lib/fsadm"
| [ 0:00] ## LVMCONF:     library_dir = "@TESTDIR@/lib"
| [ 0:00] ## LVMCONF:     locking_dir = "@TESTDIR@/var/lock/lvm"
| [ 0:00] ## LVMCONF:     locking_type=1
| [ 0:00] ## LVMCONF:     notify_dbus = 0
| [ 0:00] ## LVMCONF:     si_unit_consistency = 1
| [ 0:00] ## LVMCONF:     thin_check_executable = "/usr/sbin/thin_check"
| [ 0:00] ## LVMCONF:     thin_dump_executable = "/usr/sbin/thin_dump"
| [ 0:00] ## LVMCONF:     thin_repair_executable = "/usr/sbin/thin_repair"
| [ 0:00] ## LVMCONF:     use_lvmetad = 0
| [ 0:00] ## LVMCONF:     use_lvmlockd = 0
| [ 0:00] ## LVMCONF:     use_lvmpolld = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: log {
| [ 0:00] ## LVMCONF:     activation = 1
| [ 0:00] ## LVMCONF:     file = "@TESTDIR@/debug.log"
| [ 0:00] ## LVMCONF:     indent = 1
| [ 0:00] ## LVMCONF:     level = 9
| [ 0:00] ## LVMCONF:     overwrite = 1
| [ 0:00] ## LVMCONF:     syslog = 0
| [ 0:00] ## LVMCONF:     verbose = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] <======== Processing test: "listings.sh" ========>
| [ 0:00] 
| [ 0:00] aux prepare_devs 5
| [ 0:00] #listings.sh:22+ aux prepare_devs 5
| [ 0:00] ## preparing loop device....ok (/dev/loop0)
| [ 0:00] ## preparing 5 devices...lib/utils: line 212: DM_UDEV_COOKIE: unbound variable
| [ 0:00] set +vx; STACKTRACE; set -vx
| [ 0:00] ##listings.sh:22+ set +vx
| [ 0:00] ## - /lfskernel/sources/boot/LVM2.2.02.177/test/shell/listings.sh:22
| [ 0:00] ## 1 STACKTRACE() called from /lfskernel/sources/boot/LVM2.2.02.177/test/shell/listings.sh:22
| [ 0:00] <======== Info ========>
| [ 0:00] ## DMINFO:   Name             Maj Min Stat Open Targ Event  UUID                                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv4  253   6 L--w    0    1      0 TEST-@PREFIX@pv4                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv3  253   3 L--w    0    1      0 TEST-@PREFIX@pv3                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv2  253   7 L--w    0    1      0 TEST-@PREFIX@pv2                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv1  253   4 L--w    0    1      0 TEST-@PREFIX@pv1                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv5  253   5 L--w    0    1      0 TEST-@PREFIX@pv5                                                
| [ 0:00] <======== Active table ========>
| [ 0:00] ## DMTABLE:  @PREFIX@pv4: 0 69632 linear 7:0 210944
| [ 0:00] ## DMTABLE:  @PREFIX@pv3: 0 69632 linear 7:0 141312
| [ 0:00] ## DMTABLE:  @PREFIX@pv2: 0 69632 linear 7:0 71680
| [ 0:00] ## DMTABLE:  @PREFIX@pv1: 0 69632 linear 7:0 2048
| [ 0:00] ## DMTABLE:  @PREFIX@pv5: 0 69632 linear 7:0 280576
| [ 0:00] <======== Inactive table ========>
| [ 0:00] ## DMITABLE: @PREFIX@pv4: 
| [ 0:00] ## DMITABLE: @PREFIX@pv3: 
| [ 0:00] ## DMITABLE: @PREFIX@pv2: 
| [ 0:00] ## DMITABLE: @PREFIX@pv1: 
| [ 0:00] ## DMITABLE: @PREFIX@pv5: 
| [ 0:00] <======== Status ========>
| [ 0:00] ## DMSTATUS: @PREFIX@pv4: 0 69632 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv3: 0 69632 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv2: 0 69632 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv1: 0 69632 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv5: 0 69632 linear 
| [ 0:00] <======== Tree ========>
| [ 0:00] ## DMTREE:   @PREFIX@pv4 (253:6)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   @PREFIX@pv3 (253:3)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   @PREFIX@pv2 (253:7)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   @PREFIX@pv1 (253:4)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   LFS_vg-lfs (253:2)
| [ 0:00] ## DMTREE:    `- (8:16)
| [ 0:00] ## DMTREE:   @PREFIX@pv5 (253:5)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   centos-swap (253:1)
| [ 0:00] ## DMTREE:    `- (8:2)
| [ 0:00] ## DMTREE:   centos-root (253:0)
| [ 0:00] ## DMTREE:    `- (8:2)
| [ 0:00] <======== Recursive list of @TESTDIR@/dev ========>
| [ 0:00] ## LSLR:	@TESTDIR@/dev:
| [ 0:00] ## LSLR:	total 4
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 0 Feb 21 02:26 loop0
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 1 Feb 21 02:26 loop1
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 2 Feb 21 02:26 loop2
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 3 Feb 21 02:26 loop3
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 4 Feb 21 02:26 loop4
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 5 Feb 21 02:26 loop5
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 6 Feb 21 02:26 loop6
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 7 Feb 21 02:26 loop7
| [ 0:00] ## LSLR:	drwxr-xr-x 2 root root 4096 Feb 21 02:26 mapper
| [ 0:00] ## LSLR:	crw-r--r-- 1 root root 1, 3 Feb 21 02:26 testnull
| [ 0:00] ## LSLR:	
| [ 0:00] ## LSLR:	@TESTDIR@/dev/mapper:
| [ 0:00] ## LSLR:	total 0
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   4 Feb 21 02:26 @PREFIX@pv1
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   7 Feb 21 02:26 @PREFIX@pv2
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   3 Feb 21 02:26 @PREFIX@pv3
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   6 Feb 21 02:26 @PREFIX@pv4
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   5 Feb 21 02:26 @PREFIX@pv5
| [ 0:00] ## LSLR:	crw------- 1 root root  10, 236 Feb 21 02:26 control
| [ 0:00] <======== Udev DB content ========>
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-0
| [ 0:00] ## UDEV:	N: dm-0
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-0
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-0
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=0
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-1
| [ 0:00] ## UDEV:	N: dm-1
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-1
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-1
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=1
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-2
| [ 0:00] ## UDEV:	N: dm-2
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-2
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-2
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=2
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-3
| [ 0:00] ## UDEV:	N: dm-3
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-3
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-3
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=3
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-4
| [ 0:00] ## UDEV:	N: dm-4
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-4
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-4
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=4
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-5
| [ 0:00] ## UDEV:	N: dm-5
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-5
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-5
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=5
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-6
| [ 0:00] ## UDEV:	N: dm-6
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-6
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-6
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=6
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-7
| [ 0:00] ## UDEV:	N: dm-7
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-7
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-7
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=7
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/loop0
| [ 0:00] ## UDEV:	N: loop0
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/loop0
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/loop0
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=7
| [ 0:00] ## UDEV:	E: MINOR=0
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] <======== Script file "listings.sh" ========>
| [ 0:00] ## Line: 1 	 #!/usr/bin/env bash
| [ 0:00] ## Line: 2 	 
| [ 0:00] ## Line: 3 	 # Copyright (C) 2008-2014 Red Hat, Inc. All rights reserved.
| [ 0:00] ## Line: 4 	 #
| [ 0:00] ## Line: 5 	 # This copyrighted material is made available to anyone wishing to use,
| [ 0:00] ## Line: 6 	 # modify, copy, or redistribute it subject to the terms and conditions
| [ 0:00] ## Line: 7 	 # of the GNU General Public License v.2.
| [ 0:00] ## Line: 8 	 #
| [ 0:00] ## Line: 9 	 # You should have received a copy of the GNU General Public License
| [ 0:00] ## Line: 10 	 # along with this program; if not, write to the Free Software Foundation,
| [ 0:00] ## Line: 11 	 # Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA
| [ 0:00] ## Line: 12 	 
| [ 0:00] ## Line: 13 	 #
| [ 0:00] ## Line: 14 	 # tests functionality of lvs, pvs, vgs, *display tools
| [ 0:00] ## Line: 15 	 #
| [ 0:00] ## Line: 16 	 
| [ 0:00] ## Line: 17 	 SKIP_WITH_LVMLOCKD=1
| [ 0:00] ## Line: 18 	 SKIP_WITH_LVMPOLLD=1
| [ 0:00] ## Line: 19 	 
| [ 0:00] ## Line: 20 	 . lib/inittest
| [ 0:00] ## Line: 21 	 
| [ 0:00] ## Line: 22 	 aux prepare_devs 5
| [ 0:00] ## Line: 23 	 get_devs
| [ 0:00] ## Line: 24 	 
| [ 0:00] ## Line: 25 	 # Check there is no PV
| [ 0:00] ## Line: 26 	 pvscan | tee out
| [ 0:00] ## Line: 27 	 grep "No matching" out
| [ 0:00] ## Line: 28 	 
| [ 0:00] ## Line: 29 	 pvcreate --uuid BADBEE-BAAD-BAAD-BAAD-BAAD-BAAD-BADBEE --norestorefile "$dev1"
| [ 0:00] ## Line: 30 	 pvcreate --metadatacopies 0 "$dev2"
| [ 0:00] ## Line: 31 	 pvcreate --metadatacopies 0 "$dev3"
| [ 0:00] ## Line: 32 	 pvcreate "$dev4"
| [ 0:00] ## Line: 33 	 pvcreate --metadatacopies 0 "$dev5"
| [ 0:00] ## Line: 34 	 
| [ 0:00] ## Line: 35 	 #COMM bz195276 -- pvs doesn't show PVs until a VG is created
| [ 0:00] ## Line: 36 	 pvs --noheadings "${DEVICES[@]}"
| [ 0:00] ## Line: 37 	 test "$(pvs --noheadings "${DEVICES[@]}" | wc -l)" -eq 5
| [ 0:00] ## Line: 38 	 pvdisplay
| [ 0:00] ## Line: 39 	 
| [ 0:00] ## Line: 40 	 #COMM pvs with segment attributes works even for orphans
| [ 0:00] ## Line: 41 	 test "$(pvs --noheadings -o seg_all,pv_all,lv_all,vg_all "${DEVICES[@]}" | wc -l)" -eq 5
| [ 0:00] ## Line: 42 	 
| [ 0:00] ## Line: 43 	 vgcreate $vg "${DEVICES[@]}"
| [ 0:00] ## Line: 44 	 
| [ 0:00] ## Line: 45 	 check pv_field "$dev1" pv_uuid BADBEE-BAAD-BAAD-BAAD-BAAD-BAAD-BADBEE
| [ 0:00] ## Line: 46 	 
| [ 0:00] ## Line: 47 	 #COMM pvs and vgs report mda_count, mda_free (bz202886, bz247444)
| [ 0:00] ## Line: 48 	 pvs -o +pv_mda_count,pv_mda_free "${DEVICES[@]}"
| [ 0:00] ## Line: 49 	 for I in "$dev2" "$dev3" "$dev5"; do
| [ 0:00] ## Line: 50 	 	check pv_field "$I" pv_mda_count 0
| [ 0:00] ## Line: 51 	 	check pv_field "$I" pv_mda_free 0
| [ 0:00] ## Line: 52 	 done
| [ 0:00] ## Line: 53 	 vgs -o +vg_mda_count,vg_mda_free $vg
| [ 0:00] ## Line: 54 	 check vg_field $vg vg_mda_count 2
| [ 0:00] ## Line: 55 	 
| [ 0:00] ## Line: 56 	 #COMM pvs doesn't display --metadatacopies 0 PVs as orphans (bz409061)
| [ 0:00] ## Line: 57 	 pvdisplay "$dev2"|grep "VG Name.*$vg"
| [ 0:00] ## Line: 58 	 check pv_field "$dev2" vg_name $vg
| [ 0:00] ## Line: 59 	 
| [ 0:00] ## Line: 60 	 #COMM lvs displays snapshots (bz171215)
| [ 0:00] ## Line: 61 	 lvcreate -aey -l4 -n $lv1 $vg
| [ 0:00] ## Line: 62 	 lvcreate -l4 -s -n $lv2 $vg/$lv1
| [ 0:00] ## Line: 63 	 test "$(lvs --noheadings $vg | wc -l)" -eq 2
| [ 0:00] ## Line: 64 	 # should lvs -a display cow && real devices? (it doesn't)
| [ 0:00] ## Line: 65 	 test "$(lvs -a --noheadings $vg | wc -l)"  -eq 2
| [ 0:00] ## Line: 66 	 dmsetup ls | grep "$PREFIX" | grep -v "LVMTEST.*pv."
| [ 0:00] ## Line: 67 	 lvremove -f $vg/$lv2
| [ 0:00] ## Line: 68 	 
| [ 0:00] ## Line: 69 	 #COMM lvs -a displays mirror legs and log
| [ 0:00] ## Line: 70 	 lvcreate -aey -l2 --type mirror -m2 -n $lv3 $vg
| [ 0:00] ## Line: 71 	 test "$(lvs --noheadings $vg | wc -l)" -eq 2
| [ 0:00] ## Line: 72 	 test "$(lvs -a --noheadings $vg | wc -l)" -eq 6
| [ 0:00] ## Line: 73 	 dmsetup ls | grep "$PREFIX" | grep -v "LVMTEST.*pv."
| [ 0:00] ## Line: 74 	 
| [ 0:00] ## Line: 75 	 # Check we parse /dev/mapper/vg-lv
| [ 0:00] ## Line: 76 	 lvdisplay "$DM_DEV_DIR/mapper/$vg-$lv3"
| [ 0:00] ## Line: 77 	 # Check we parse /dev/vg/lv
| [ 0:00] ## Line: 78 	 lvdisplay "$DM_DEV_DIR/$vg/$lv3"
| [ 0:00] ## Line: 79 	 
| [ 0:00] ## Line: 80 	 lvcreate -l2 -s $vg/$lv3
| [ 0:00] ## Line: 81 	 lvcreate -l1 -s -n inval $vg/$lv3
| [ 0:00] ## Line: 82 	 lvcreate -l4 -I4 -i2 -n stripe $vg
| [ 0:00] ## Line: 83 	 # Invalidate snapshot
| [ 0:00] ## Line: 84 	 not dd if=/dev/zero of="$DM_DEV_DIR/$vg/inval" bs=4K
| [ 0:00] ## Line: 85 	 invalid lvscan "$dev1"
| [ 0:00] ## Line: 86 	 lvdisplay --maps
| [ 0:00] ## Line: 87 	 lvscan --all
| [ 0:00] ## Line: 88 	 
| [ 0:00] ## Line: 89 	 #COMM vgs with options from pvs still treats arguments as VGs (bz193543)
| [ 0:00] ## Line: 90 	 vgs -o pv_name,vg_name $vg
| [ 0:00] ## Line: 91 	 # would complain if not
| [ 0:00] ## Line: 92 	 vgs -o all $vg
| [ 0:00] ## Line: 93 	 
| [ 0:00] ## Line: 94 	 #COMM pvdisplay --maps feature (bz149814)
| [ 0:00] ## Line: 95 	 pvdisplay "${DEVICES[@]}" >out
| [ 0:00] ## Line: 96 	 pvdisplay --maps "${DEVICES[@]}" >out2
| [ 0:00] ## Line: 97 	 not diff out out2
| [ 0:00] ## Line: 98 	 
| [ 0:00] ## Line: 99 	 aux disable_dev "$dev1"
| [ 0:00] ## Line: 100 	 pvs -o +pv_uuid | grep BADBEE-BAAD-BAAD-BAAD-BAAD-BAAD-BADBEE
| [ 0:00] ## Line: 101 	 aux enable_dev "$dev1"
| [ 0:00] ## Line: 102 	 
| [ 0:00] ## Line: 103 	 pvscan --uuid
| [ 0:00] ## Line: 104 	 pvscan -e
| [ 0:00] ## Line: 105 	 pvscan -s
| [ 0:00] ## Line: 106 	 pvscan --novolumegroup
| [ 0:00] ## Line: 107 	 vgscan --mknodes
| [ 0:00] ## Line: 108 	 vgmknodes --refresh
| [ 0:00] ## Line: 109 	 lvscan
| [ 0:00] ## Line: 110 	 lvmdiskscan
| [ 0:00] ## Line: 111 	 
| [ 0:00] ## Line: 112 	 invalid pvscan "$dev1"
| [ 0:00] ## Line: 113 	 invalid pvscan -aay
| [ 0:00] ## Line: 114 	 invalid pvscan --major 254
| [ 0:00] ## Line: 115 	 invalid pvscan --minor 0
| [ 0:00] ## Line: 116 	 invalid pvscan --novolumegroup -e
| [ 0:00] ## Line: 117 	 invalid vgscan $vg
| [ 0:00] ## Line: 118 	 invalid lvscan $vg
| [ 0:00] ## Line: 119 	 
| [ 0:00] ## Line: 120 	 if aux have_readline; then
| [ 0:00] ## Line: 121 	 cat <<EOF | lvm
| [ 0:00] ## Line: 122 	 vgdisplay --units k $vg
| [ 0:00] ## Line: 123 	 vgdisplay -c $vg
| [ 0:00] ## Line: 124 	 vgdisplay -C $vg
| [ 0:00] ## Line: 125 	 vgdisplay -s $vg
| [ 0:00] ## Line: 126 	 vgdisplay -v $vg
| [ 0:00] ## Line: 127 	 lvdisplay -c $vg
| [ 0:00] ## Line: 128 	 lvdisplay -C $vg
| [ 0:00] ## Line: 129 	 lvdisplay -m $vg
| [ 0:00] ## Line: 130 	 lvdisplay --units g $vg
| [ 0:00] ## Line: 131 	 EOF
| [ 0:00] ## Line: 132 	 else
| [ 0:00] ## Line: 133 	 pvdisplay -c "$dev1"
| [ 0:00] ## Line: 134 	 pvdisplay -s "$dev1"
| [ 0:00] ## Line: 135 	 vgdisplay --units k $vg
| [ 0:00] ## Line: 136 	 vgdisplay -c $vg
| [ 0:00] ## Line: 137 	 vgdisplay -C $vg
| [ 0:00] ## Line: 138 	 vgdisplay -s $vg
| [ 0:00] ## Line: 139 	 vgdisplay -v $vg
| [ 0:00] ## Line: 140 	 lvdisplay -c $vg
| [ 0:00] ## Line: 141 	 lvdisplay -C $vg
| [ 0:00] ## Line: 142 	 lvdisplay -m $vg
| [ 0:00] ## Line: 143 	 lvdisplay --units g $vg
| [ 0:00] ## Line: 144 	 fi
| [ 0:00] ## Line: 145 	 
| [ 0:00] ## Line: 146 	 pvdisplay -c "$dev1"
| [ 0:00] ## Line: 147 	 pvdisplay -s "$dev1"
| [ 0:00] ## Line: 148 	 
| [ 0:00] ## Line: 149 	 for i in h b s k m g t p e H B S K M G T P E; do
| [ 0:00] ## Line: 150 	 	pvdisplay --units $i "$dev1"
| [ 0:00] ## Line: 151 	 done
| [ 0:00] ## Line: 152 	 
| [ 0:00] ## Line: 153 	 invalid lvdisplay -C -m $vg
| [ 0:00] ## Line: 154 	 invalid lvdisplay -c -m $vg
| [ 0:00] ## Line: 155 	 invalid lvdisplay --aligned $vg
| [ 0:00] ## Line: 156 	 invalid lvdisplay --noheadings $vg
| [ 0:00] ## Line: 157 	 invalid lvdisplay --options lv_name $vg
| [ 0:00] ## Line: 158 	 invalid lvdisplay --separator : $vg
| [ 0:00] ## Line: 159 	 invalid lvdisplay --sort size $vg
| [ 0:00] ## Line: 160 	 invalid lvdisplay --unbuffered $vg
| [ 0:00] ## Line: 161 	 
| [ 0:00] ## Line: 162 	 invalid vgdisplay -C -A
| [ 0:00] ## Line: 163 	 invalid vgdisplay -C -c
| [ 0:00] ## Line: 164 	 invalid vgdisplay -C -s
| [ 0:00] ## Line: 165 	 invalid vgdisplay -c -s
| [ 0:00] ## Line: 166 	 invalid vgdisplay --aligned
| [ 0:00] ## Line: 167 	 invalid vgdisplay --noheadings
| [ 0:00] ## Line: 168 	 invalid vgdisplay --options
| [ 0:00] ## Line: 169 	 invalid vgdisplay --separator :
| [ 0:00] ## Line: 170 	 invalid vgdisplay --sort size
| [ 0:00] ## Line: 171 	 invalid vgdisplay --unbuffered
| [ 0:00] ## Line: 172 	 invalid vgdisplay -A $vg1
| [ 0:00] ## Line: 173 	 
| [ 0:00] ## Line: 174 	 invalid pvdisplay -C -A
| [ 0:00] ## Line: 175 	 invalid pvdisplay -C -c
| [ 0:00] ## Line: 176 	 invalid pvdisplay -C -m
| [ 0:00] ## Line: 177 	 invalid pvdisplay -C -s
| [ 0:00] ## Line: 178 	 invalid pvdisplay -c -m
| [ 0:00] ## Line: 179 	 invalid pvdisplay -c -s
| [ 0:00] ## Line: 180 	 invalid pvdisplay --aligned
| [ 0:00] ## Line: 181 	 invalid pvdisplay --all
| [ 0:00] ## Line: 182 	 invalid pvdisplay --noheadings
| [ 0:00] ## Line: 183 	 invalid pvdisplay --options
| [ 0:00] ## Line: 184 	 invalid pvdisplay --separator :
| [ 0:00] ## Line: 185 	 invalid pvdisplay --sort size
| [ 0:00] ## Line: 186 	 invalid pvdisplay --unbuffered
| [ 0:00] ## Line: 187 	 invalid pvdisplay -A $vg1
| [ 0:00] ## Line: 188 	 
| [ 0:00] ## Line: 189 	 # Check exported VG listing
| [ 0:00] ## Line: 190 	 vgchange -an $vg
| [ 0:00] ## Line: 191 	 vgexport -a
| [ 0:00] ## Line: 192 	 pvscan
| [ 0:00] ## Line: 193 	 pvdisplay --noheadings -C -o attr,name | tee out
| [ 0:00] ## Line: 194 	 not grep -v "ax-" out
| [ 0:00] ## Line: 195 	 vgimport -a
| [ 0:00] ## Line: 196 	 pvdisplay --noheadings -C -o attr,name | tee out
| [ 0:00] ## Line: 197 	 grep -v "ax-" out
| [ 0:00] ## Line: 198 	 
| [ 0:00] ## Line: 199 	 vgremove -ff $vg
| [ 0:00] ## Line: 200 	 
| [ 0:00] ## Line: 201 	 #test vgdisplay -A to select only active VGs
| [ 0:00] ## Line: 202 	 # all LVs active - VG considered active
| [ 0:00] ## Line: 203 	 pvcreate "$dev1" "$dev2" "$dev3"
| [ 0:00] ## Line: 204 	 
| [ 0:00] ## Line: 205 	 vgcreate $vg1 "$dev1"
| [ 0:00] ## Line: 206 	 lvcreate -l1 $vg1
| [ 0:00] ## Line: 207 	 lvcreate -l1 $vg1
| [ 0:00] ## Line: 208 	 
| [ 0:00] ## Line: 209 	 # at least one LV active - VG considered active
| [ 0:00] ## Line: 210 	 vgcreate $vg2 "$dev2"
| [ 0:00] ## Line: 211 	 lvcreate -l1 $vg2
| [ 0:00] ## Line: 212 	 lvcreate -l1 -an -Zn $vg2
| [ 0:00] ## Line: 213 	 
| [ 0:00] ## Line: 214 	 # no LVs active - VG considered inactive
| [ 0:00] ## Line: 215 	 vgcreate $vg3 "$dev3"
| [ 0:00] ## Line: 216 	 lvcreate -l1 -an -Zn $vg3
| [ 0:00] ## Line: 217 	 lvcreate -l1 -an -Zn $vg3
| [ 0:00] ## Line: 218 	 
| [ 0:00] ## Line: 219 	 vgdisplay -s -A | grep $vg1
| [ 0:00] ## Line: 220 	 vgdisplay -s -A | grep $vg2
| [ 0:00] ## Line: 221 	 vgdisplay -s -A | not grep $vg3
| [ 0:00] ## Line: 222 	 
| [ 0:00] ## Line: 223 	 vgremove -f $vg1 $vg2 $vg3
| [ 0:00] aux teardown
| [ 0:00] #listings.sh:1+ aux teardown
| [ 0:00] ## teardown.........ok
###       failed: [ndev-vanilla] shell/listings.sh

| [ 0:00] Library version:   1.02.146 (2017-12-18)
| [ 0:00] Driver version:    4.35.0
| [ 0:00] Kernel is Linux localhost.localdomain 3.10.0-693.11.1.el7.x86_64 #1 SMP Mon Dec 4 23:52:40 UTC 2017 x86_64 GNU/Linux
| [ 0:00] Selinux mode is not installed.
| [ 0:00]               total        used        free      shared  buff/cache   available
| [ 0:00] Mem:           7822        1075        4155          10        2591        6440
| [ 0:00] Swap:          4095           0        4095
| [ 0:00] Filesystem      Size  Used Avail Use% Mounted on
| [ 0:00] /dev/sdc1        18G  8.4G  8.4G  50% /
| [ 0:00] /dev/sdd1        51G  6.1G   43G  13% /lfskernel
| [ 0:00] devtmpfs        3.9G     0  3.9G   0% /dev
| [ 0:00] tmpfs           3.9G     0  3.9G   0% /run
| [ 0:00] @TESTDIR=/tmp/LVMTEST27677.Hceqa2kPMa
| [ 0:00] @PREFIX=LVMTEST27677
| [ 0:00] ## LVMCONF: activation {
| [ 0:00] ## LVMCONF:     checks = 1
| [ 0:00] ## LVMCONF:     monitoring = 0
| [ 0:00] ## LVMCONF:     polling_interval = 1
| [ 0:00] ## LVMCONF:     raid_region_size = 512
| [ 0:00] ## LVMCONF:     retry_deactivation = 1
| [ 0:00] ## LVMCONF:     snapshot_autoextend_percent = 50
| [ 0:00] ## LVMCONF:     snapshot_autoextend_threshold = 50
| [ 0:00] ## LVMCONF:     udev_rules = 1
| [ 0:00] ## LVMCONF:     udev_sync = 1
| [ 0:00] ## LVMCONF:     verify_udev_operations = 1
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: allocation {
| [ 0:00] ## LVMCONF:     wipe_signatures_when_zeroing_new_lvs = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: backup {
| [ 0:00] ## LVMCONF:     archive = 0
| [ 0:00] ## LVMCONF:     backup = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: devices {
| [ 0:00] ## LVMCONF:     cache_dir = "@TESTDIR@/etc"
| [ 0:00] ## LVMCONF:     default_data_alignment = 1
| [ 0:00] ## LVMCONF:     dir = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     filter = "a|.*|"
| [ 0:00] ## LVMCONF:     global_filter = [ "a|@TESTDIR@/dev/mapper/@PREFIX@.*pv[0-9_]*$|", "r|.*|" ]
| [ 0:00] ## LVMCONF:     md_component_detection  = 0
| [ 0:00] ## LVMCONF:     scan = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     sysfs_scan = 1
| [ 0:00] ## LVMCONF:     write_cache_state = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: dmeventd {
| [ 0:00] ## LVMCONF:     executable = "/sources/boot/LVM2.2.02.177/test/lib/dmeventd"
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: global {
| [ 0:00] ## LVMCONF:     abort_on_internal_errors = 1
| [ 0:00] ## LVMCONF:     cache_check_executable = "/usr/sbin/cache_check"
| [ 0:00] ## LVMCONF:     cache_dump_executable = "/usr/sbin/cache_dump"
| [ 0:00] ## LVMCONF:     cache_repair_executable = "/usr/sbin/cache_repair"
| [ 0:00] ## LVMCONF:     detect_internal_vg_cache_corruption = 1
| [ 0:00] ## LVMCONF:     fallback_to_local_locking = 0
| [ 0:00] ## LVMCONF:     fsadm_executable = "/sources/boot/LVM2.2.02.177/test/lib/fsadm"
| [ 0:00] ## LVMCONF:     library_dir = "@TESTDIR@/lib"
| [ 0:00] ## LVMCONF:     locking_dir = "@TESTDIR@/var/lock/lvm"
| [ 0:00] ## LVMCONF:     locking_type=1
| [ 0:00] ## LVMCONF:     notify_dbus = 0
| [ 0:00] ## LVMCONF:     si_unit_consistency = 1
| [ 0:00] ## LVMCONF:     thin_check_executable = "/usr/sbin/thin_check"
| [ 0:00] ## LVMCONF:     thin_dump_executable = "/usr/sbin/thin_dump"
| [ 0:00] ## LVMCONF:     thin_repair_executable = "/usr/sbin/thin_repair"
| [ 0:00] ## LVMCONF:     use_lvmetad = 0
| [ 0:00] ## LVMCONF:     use_lvmlockd = 0
| [ 0:00] ## LVMCONF:     use_lvmpolld = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: log {
| [ 0:00] ## LVMCONF:     activation = 1
| [ 0:00] ## LVMCONF:     file = "@TESTDIR@/debug.log"
| [ 0:00] ## LVMCONF:     indent = 1
| [ 0:00] ## LVMCONF:     level = 9
| [ 0:00] ## LVMCONF:     overwrite = 1
| [ 0:00] ## LVMCONF:     syslog = 0
| [ 0:00] ## LVMCONF:     verbose = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] <======== Processing test: "lock-blocking.sh" ========>
| [ 0:00] 
| [ 0:00] aux prepare_devs 3
| [ 0:00] #lock-blocking.sh:20+ aux prepare_devs 3
| [ 0:00] ## preparing loop device....ok (/dev/loop0)
| [ 0:00] ## preparing 3 devices...lib/utils: line 212: DM_UDEV_COOKIE: unbound variable
| [ 0:00] set +vx; STACKTRACE; set -vx
| [ 0:00] ##lock-blocking.sh:20+ set +vx
| [ 0:00] ## - /lfskernel/sources/boot/LVM2.2.02.177/test/shell/lock-blocking.sh:20
| [ 0:00] ## 1 STACKTRACE() called from /lfskernel/sources/boot/LVM2.2.02.177/test/shell/lock-blocking.sh:20
| [ 0:00] <======== Info ========>
| [ 0:00] ## DMINFO:   Name             Maj Min Stat Open Targ Event  UUID                                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv3  253   3 L--w    0    1      0 TEST-@PREFIX@pv3                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv2  253   5 L--w    0    1      0 TEST-@PREFIX@pv2                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv1  253   4 L--w    0    1      0 TEST-@PREFIX@pv1                                                
| [ 0:00] <======== Active table ========>
| [ 0:00] ## DMTABLE:  @PREFIX@pv3: 0 69632 linear 7:0 141312
| [ 0:00] ## DMTABLE:  @PREFIX@pv2: 0 69632 linear 7:0 71680
| [ 0:00] ## DMTABLE:  @PREFIX@pv1: 0 69632 linear 7:0 2048
| [ 0:00] <======== Inactive table ========>
| [ 0:00] ## DMITABLE: @PREFIX@pv3: 
| [ 0:00] ## DMITABLE: @PREFIX@pv2: 
| [ 0:00] ## DMITABLE: @PREFIX@pv1: 
| [ 0:00] <======== Status ========>
| [ 0:00] ## DMSTATUS: @PREFIX@pv3: 0 69632 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv2: 0 69632 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv1: 0 69632 linear 
| [ 0:00] <======== Tree ========>
| [ 0:00] ## DMTREE:   @PREFIX@pv3 (253:3)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   @PREFIX@pv2 (253:5)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   @PREFIX@pv1 (253:4)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   LFS_vg-lfs (253:2)
| [ 0:00] ## DMTREE:    `- (8:16)
| [ 0:00] ## DMTREE:   centos-swap (253:1)
| [ 0:00] ## DMTREE:    `- (8:2)
| [ 0:00] ## DMTREE:   centos-root (253:0)
| [ 0:00] ## DMTREE:    `- (8:2)
| [ 0:00] <======== Recursive list of @TESTDIR@/dev ========>
| [ 0:00] ## LSLR:	@TESTDIR@/dev:
| [ 0:00] ## LSLR:	total 4
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 0 Feb 21 02:26 loop0
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 1 Feb 21 02:26 loop1
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 2 Feb 21 02:26 loop2
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 3 Feb 21 02:26 loop3
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 4 Feb 21 02:26 loop4
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 5 Feb 21 02:26 loop5
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 6 Feb 21 02:26 loop6
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 7 Feb 21 02:26 loop7
| [ 0:00] ## LSLR:	drwxr-xr-x 2 root root 4096 Feb 21 02:26 mapper
| [ 0:00] ## LSLR:	crw-r--r-- 1 root root 1, 3 Feb 21 02:26 testnull
| [ 0:00] ## LSLR:	
| [ 0:00] ## LSLR:	@TESTDIR@/dev/mapper:
| [ 0:00] ## LSLR:	total 0
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   4 Feb 21 02:26 @PREFIX@pv1
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   5 Feb 21 02:26 @PREFIX@pv2
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   3 Feb 21 02:26 @PREFIX@pv3
| [ 0:00] ## LSLR:	crw------- 1 root root  10, 236 Feb 21 02:26 control
| [ 0:00] <======== Udev DB content ========>
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-0
| [ 0:00] ## UDEV:	N: dm-0
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-0
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-0
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=0
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-1
| [ 0:00] ## UDEV:	N: dm-1
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-1
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-1
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=1
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-2
| [ 0:00] ## UDEV:	N: dm-2
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-2
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-2
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=2
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-3
| [ 0:00] ## UDEV:	N: dm-3
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-3
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-3
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=3
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-4
| [ 0:00] ## UDEV:	N: dm-4
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-4
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-4
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=4
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-5
| [ 0:00] ## UDEV:	N: dm-5
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-5
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-5
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=5
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/loop0
| [ 0:00] ## UDEV:	N: loop0
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/loop0
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/loop0
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=7
| [ 0:00] ## UDEV:	E: MINOR=0
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] <======== Script file "lock-blocking.sh" ========>
| [ 0:00] ## Line: 1 	 #!/usr/bin/env bash
| [ 0:00] ## Line: 2 	 
| [ 0:00] ## Line: 3 	 # Copyright (C) 2008 Red Hat, Inc. All rights reserved.
| [ 0:00] ## Line: 4 	 #
| [ 0:00] ## Line: 5 	 # This copyrighted material is made available to anyone wishing to use,
| [ 0:00] ## Line: 6 	 # modify, copy, or redistribute it subject to the terms and conditions
| [ 0:00] ## Line: 7 	 # of the GNU General Public License v.2.
| [ 0:00] ## Line: 8 	 #
| [ 0:00] ## Line: 9 	 # You should have received a copy of the GNU General Public License
| [ 0:00] ## Line: 10 	 # along with this program; if not, write to the Free Software Foundation,
| [ 0:00] ## Line: 11 	 # Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA
| [ 0:00] ## Line: 12 	 
| [ 0:00] ## Line: 13 	 test_description='test some blocking / non-blocking multi-vg operations'
| [ 0:00] ## Line: 14 	 SKIP_WITH_LVMLOCKD=1
| [ 0:00] ## Line: 15 	 SKIP_WITH_CLVMD=1
| [ 0:00] ## Line: 16 	 SKIP_WITH_LVMPOLLD=1
| [ 0:00] ## Line: 17 	 
| [ 0:00] ## Line: 18 	 . lib/inittest
| [ 0:00] ## Line: 19 	 
| [ 0:00] ## Line: 20 	 aux prepare_devs 3
| [ 0:00] ## Line: 21 	 pvcreate "$dev1" "$dev2"
| [ 0:00] ## Line: 22 	 vgcreate $vg "$dev1" "$dev2"
| [ 0:00] ## Line: 23 	 
| [ 0:00] ## Line: 24 	 # if wait_for_locks set, vgremove should wait for orphan lock
| [ 0:00] ## Line: 25 	 # flock process should have exited by the time first vgremove completes
| [ 0:00] ## Line: 26 	 flock -w 5 "$TESTDIR/var/lock/lvm/P_orphans" sleep 10 &
| [ 0:00] ## Line: 27 	 while ! test -f "$TESTDIR/var/lock/lvm/P_orphans" ; do sleep .1 ; done
| [ 0:00] ## Line: 28 	 
| [ 0:00] ## Line: 29 	 vgremove --config 'global { wait_for_locks = 1 }' $vg
| [ 0:00] ## Line: 30 	 not vgremove --config 'global { wait_for_locks = 1 }' $vg
| [ 0:00] ## Line: 31 	 
| [ 0:00] ## Line: 32 	 test ! -f "$TESTDIR/var/lock/lvm/P_orphans"
| [ 0:00] ## Line: 33 	 
| [ 0:00] ## Line: 34 	 # if wait_for_locks not set, vgremove should fail on non-blocking lock
| [ 0:00] ## Line: 35 	 # we must wait for flock process at the end - vgremove won't wait
| [ 0:00] ## Line: 36 	 vgcreate $vg "$dev1" "$dev2"
| [ 0:00] ## Line: 37 	 flock -w 5 "$TESTDIR/var/lock/lvm/P_orphans" sleep 10 &
| [ 0:00] ## Line: 38 	 
| [ 0:00] ## Line: 39 	 while ! test -f "$TESTDIR/var/lock/lvm/P_orphans" ; do sleep .1 ; done
| [ 0:00] ## Line: 40 	 flock_pid=$(jobs -p)
| [ 0:00] ## Line: 41 	 
| [ 0:00] ## Line: 42 	 not vgremove --config 'global { wait_for_locks = 0 }' $vg
| [ 0:00] ## Line: 43 	 test -f "$TESTDIR/var/lock/lvm/P_orphans" # still running
| [ 0:00] ## Line: 44 	 kill "$flock_pid"
| [ 0:00] ## Line: 45 	 
| [ 0:00] ## Line: 46 	 vgremove -ff $vg
| [ 0:00] aux teardown
| [ 0:00] #lock-blocking.sh:1+ aux teardown
| [ 0:00] ## teardown.........ok
###       failed: [ndev-vanilla] shell/lock-blocking.sh

| [ 0:00] Library version:   1.02.146 (2017-12-18)
| [ 0:00] Driver version:    4.35.0
| [ 0:00] Kernel is Linux localhost.localdomain 3.10.0-693.11.1.el7.x86_64 #1 SMP Mon Dec 4 23:52:40 UTC 2017 x86_64 GNU/Linux
| [ 0:00] Selinux mode is not installed.
| [ 0:00]               total        used        free      shared  buff/cache   available
| [ 0:00] Mem:           7822        1075        4155          10        2591        6440
| [ 0:00] Swap:          4095           0        4095
| [ 0:00] Filesystem      Size  Used Avail Use% Mounted on
| [ 0:00] /dev/sdc1        18G  8.4G  8.4G  50% /
| [ 0:00] /dev/sdd1        51G  6.1G   43G  13% /lfskernel
| [ 0:00] devtmpfs        3.9G     0  3.9G   0% /dev
| [ 0:00] tmpfs           3.9G     0  3.9G   0% /run
| [ 0:00] @TESTDIR=/tmp/LVMTEST27857.T3vWhnCP9k
| [ 0:00] @PREFIX=LVMTEST27857
| [ 0:00] ## LVMCONF: activation {
| [ 0:00] ## LVMCONF:     checks = 1
| [ 0:00] ## LVMCONF:     monitoring = 0
| [ 0:00] ## LVMCONF:     polling_interval = 1
| [ 0:00] ## LVMCONF:     raid_region_size = 512
| [ 0:00] ## LVMCONF:     retry_deactivation = 1
| [ 0:00] ## LVMCONF:     snapshot_autoextend_percent = 50
| [ 0:00] ## LVMCONF:     snapshot_autoextend_threshold = 50
| [ 0:00] ## LVMCONF:     udev_rules = 1
| [ 0:00] ## LVMCONF:     udev_sync = 1
| [ 0:00] ## LVMCONF:     verify_udev_operations = 1
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: allocation {
| [ 0:00] ## LVMCONF:     wipe_signatures_when_zeroing_new_lvs = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: backup {
| [ 0:00] ## LVMCONF:     archive = 0
| [ 0:00] ## LVMCONF:     backup = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: devices {
| [ 0:00] ## LVMCONF:     cache_dir = "@TESTDIR@/etc"
| [ 0:00] ## LVMCONF:     default_data_alignment = 1
| [ 0:00] ## LVMCONF:     dir = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     filter = "a|.*|"
| [ 0:00] ## LVMCONF:     global_filter = [ "a|@TESTDIR@/dev/mapper/@PREFIX@.*pv[0-9_]*$|", "r|.*|" ]
| [ 0:00] ## LVMCONF:     md_component_detection  = 0
| [ 0:00] ## LVMCONF:     scan = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     sysfs_scan = 1
| [ 0:00] ## LVMCONF:     write_cache_state = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: dmeventd {
| [ 0:00] ## LVMCONF:     executable = "/sources/boot/LVM2.2.02.177/test/lib/dmeventd"
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: global {
| [ 0:00] ## LVMCONF:     abort_on_internal_errors = 1
| [ 0:00] ## LVMCONF:     cache_check_executable = "/usr/sbin/cache_check"
| [ 0:00] ## LVMCONF:     cache_dump_executable = "/usr/sbin/cache_dump"
| [ 0:00] ## LVMCONF:     cache_repair_executable = "/usr/sbin/cache_repair"
| [ 0:00] ## LVMCONF:     detect_internal_vg_cache_corruption = 1
| [ 0:00] ## LVMCONF:     fallback_to_local_locking = 0
| [ 0:00] ## LVMCONF:     fsadm_executable = "/sources/boot/LVM2.2.02.177/test/lib/fsadm"
| [ 0:00] ## LVMCONF:     library_dir = "@TESTDIR@/lib"
| [ 0:00] ## LVMCONF:     locking_dir = "@TESTDIR@/var/lock/lvm"
| [ 0:00] ## LVMCONF:     locking_type=1
| [ 0:00] ## LVMCONF:     notify_dbus = 0
| [ 0:00] ## LVMCONF:     si_unit_consistency = 1
| [ 0:00] ## LVMCONF:     thin_check_executable = "/usr/sbin/thin_check"
| [ 0:00] ## LVMCONF:     thin_dump_executable = "/usr/sbin/thin_dump"
| [ 0:00] ## LVMCONF:     thin_repair_executable = "/usr/sbin/thin_repair"
| [ 0:00] ## LVMCONF:     use_lvmetad = 0
| [ 0:00] ## LVMCONF:     use_lvmlockd = 0
| [ 0:00] ## LVMCONF:     use_lvmpolld = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: log {
| [ 0:00] ## LVMCONF:     activation = 1
| [ 0:00] ## LVMCONF:     file = "@TESTDIR@/debug.log"
| [ 0:00] ## LVMCONF:     indent = 1
| [ 0:00] ## LVMCONF:     level = 9
| [ 0:00] ## LVMCONF:     overwrite = 1
| [ 0:00] ## LVMCONF:     syslog = 0
| [ 0:00] ## LVMCONF:     verbose = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] <======== Processing test: "lock-parallel.sh" ========>
| [ 0:00] 
| [ 0:00] which mkfs.ext3 || skip
| [ 0:00] #lock-parallel.sh:21+ which mkfs.ext3
| [ 0:00] /sbin/mkfs.ext3
| [ 0:00] which fsck || skip
| [ 0:00] #lock-parallel.sh:22+ which fsck
| [ 0:00] /sbin/fsck
| [ 0:00] 
| [ 0:00] aux prepare_vg
| [ 0:00] #lock-parallel.sh:24+ aux prepare_vg
| [ 0:00] ## preparing loop device....ok (/dev/loop0)
| [ 0:00] ## preparing 3 devices...lib/utils: line 212: DM_UDEV_COOKIE: unbound variable
| [ 0:00] set +vx; STACKTRACE; set -vx
| [ 0:00] ##lock-parallel.sh:24+ set +vx
| [ 0:00] ## - /lfskernel/sources/boot/LVM2.2.02.177/test/shell/lock-parallel.sh:24
| [ 0:00] ## 1 STACKTRACE() called from /lfskernel/sources/boot/LVM2.2.02.177/test/shell/lock-parallel.sh:24
| [ 0:00] <======== Info ========>
| [ 0:00] ## DMINFO:   Name             Maj Min Stat Open Targ Event  UUID                                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv3  253   4 L--w    0    1      0 TEST-@PREFIX@pv3                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv2  253   3 L--w    0    1      0 TEST-@PREFIX@pv2                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv1  253   5 L--w    0    1      0 TEST-@PREFIX@pv1                                                
| [ 0:00] <======== Active table ========>
| [ 0:00] ## DMTABLE:  @PREFIX@pv3: 0 69632 linear 7:0 141312
| [ 0:00] ## DMTABLE:  @PREFIX@pv2: 0 69632 linear 7:0 71680
| [ 0:00] ## DMTABLE:  @PREFIX@pv1: 0 69632 linear 7:0 2048
| [ 0:00] <======== Inactive table ========>
| [ 0:00] ## DMITABLE: @PREFIX@pv3: 
| [ 0:00] ## DMITABLE: @PREFIX@pv2: 
| [ 0:00] ## DMITABLE: @PREFIX@pv1: 
| [ 0:00] <======== Status ========>
| [ 0:00] ## DMSTATUS: @PREFIX@pv3: 0 69632 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv2: 0 69632 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv1: 0 69632 linear 
| [ 0:00] <======== Tree ========>
| [ 0:00] ## DMTREE:   @PREFIX@pv3 (253:4)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   @PREFIX@pv2 (253:3)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   @PREFIX@pv1 (253:5)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   LFS_vg-lfs (253:2)
| [ 0:00] ## DMTREE:    `- (8:16)
| [ 0:00] ## DMTREE:   centos-swap (253:1)
| [ 0:00] ## DMTREE:    `- (8:2)
| [ 0:00] ## DMTREE:   centos-root (253:0)
| [ 0:00] ## DMTREE:    `- (8:2)
| [ 0:00] <======== Recursive list of @TESTDIR@/dev ========>
| [ 0:00] ## LSLR:	@TESTDIR@/dev:
| [ 0:00] ## LSLR:	total 4
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 0 Feb 21 02:26 loop0
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 1 Feb 21 02:26 loop1
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 2 Feb 21 02:26 loop2
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 3 Feb 21 02:26 loop3
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 4 Feb 21 02:26 loop4
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 5 Feb 21 02:26 loop5
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 6 Feb 21 02:26 loop6
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 7 Feb 21 02:26 loop7
| [ 0:00] ## LSLR:	drwxr-xr-x 2 root root 4096 Feb 21 02:26 mapper
| [ 0:00] ## LSLR:	crw-r--r-- 1 root root 1, 3 Feb 21 02:26 testnull
| [ 0:00] ## LSLR:	
| [ 0:00] ## LSLR:	@TESTDIR@/dev/mapper:
| [ 0:00] ## LSLR:	total 0
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   5 Feb 21 02:26 @PREFIX@pv1
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   3 Feb 21 02:26 @PREFIX@pv2
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   4 Feb 21 02:26 @PREFIX@pv3
| [ 0:00] ## LSLR:	crw------- 1 root root  10, 236 Feb 21 02:26 control
| [ 0:00] <======== Udev DB content ========>
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-0
| [ 0:00] ## UDEV:	N: dm-0
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-0
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-0
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=0
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-1
| [ 0:00] ## UDEV:	N: dm-1
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-1
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-1
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=1
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-2
| [ 0:00] ## UDEV:	N: dm-2
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-2
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-2
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=2
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-3
| [ 0:00] ## UDEV:	N: dm-3
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-3
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-3
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=3
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-4
| [ 0:00] ## UDEV:	N: dm-4
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-4
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-4
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=4
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-5
| [ 0:00] ## UDEV:	N: dm-5
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-5
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-5
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=5
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/loop0
| [ 0:00] ## UDEV:	N: loop0
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/loop0
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/loop0
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=7
| [ 0:00] ## UDEV:	E: MINOR=0
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] <======== Script file "lock-parallel.sh" ========>
| [ 0:00] ## Line: 1 	 #!/usr/bin/env bash
| [ 0:00] ## Line: 2 	 
| [ 0:00] ## Line: 3 	 # Copyright (C) 2014-2015 Red Hat, Inc. All rights reserved.
| [ 0:00] ## Line: 4 	 #
| [ 0:00] ## Line: 5 	 # This copyrighted material is made available to anyone wishing to use,
| [ 0:00] ## Line: 6 	 # modify, copy, or redistribute it subject to the terms and conditions
| [ 0:00] ## Line: 7 	 # of the GNU General Public License v.2.
| [ 0:00] ## Line: 8 	 #
| [ 0:00] ## Line: 9 	 # You should have received a copy of the GNU General Public License
| [ 0:00] ## Line: 10 	 # along with this program; if not, write to the Free Software Foundation,
| [ 0:00] ## Line: 11 	 # Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA
| [ 0:00] ## Line: 12 	 
| [ 0:00] ## Line: 13 	 # Test parallel use of lvm commands and check locks aren't dropped
| [ 0:00] ## Line: 14 	 # RHBZ: https://bugzilla.redhat.com/show_bug.cgi?id=1049296
| [ 0:00] ## Line: 15 	 
| [ 0:00] ## Line: 16 	 SKIP_WITH_LVMLOCKD=1
| [ 0:00] ## Line: 17 	 SKIP_WITH_LVMPOLLD=1
| [ 0:00] ## Line: 18 	 
| [ 0:00] ## Line: 19 	 . lib/inittest
| [ 0:00] ## Line: 20 	 
| [ 0:00] ## Line: 21 	 which mkfs.ext3 || skip
| [ 0:00] ## Line: 22 	 which fsck || skip
| [ 0:00] ## Line: 23 	 
| [ 0:00] ## Line: 24 	 aux prepare_vg
| [ 0:00] ## Line: 25 	 
| [ 0:00] ## Line: 26 	 lvcreate -L10 -n $lv1 $vg
| [ 0:00] ## Line: 27 	 lvcreate -l1 -n $lv2 $vg
| [ 0:00] ## Line: 28 	 mkfs.ext3 "$DM_DEV_DIR/$vg/$lv1"
| [ 0:00] ## Line: 29 	 
| [ 0:00] ## Line: 30 	 # Slowdown PV for resized LV
| [ 0:00] ## Line: 31 	 aux delay_dev "$dev1" 50 50 "$(get first_extent_sector "$dev1"):"
| [ 0:00] ## Line: 32 	 
| [ 0:00] ## Line: 33 	 lvresize -L-5 -r $vg/$lv1 &
| [ 0:00] ## Line: 34 	 
| [ 0:00] ## Line: 35 	 # Let's wait till resize starts
| [ 0:00] ## Line: 36 	 for i in $(seq 1 300); do
| [ 0:00] ## Line: 37 	         pgrep fsck && break
| [ 0:00] ## Line: 38 	         sleep .1
| [ 0:00] ## Line: 39 	 done
| [ 0:00] ## Line: 40 	 
| [ 0:00] ## Line: 41 	 lvremove -f $vg/$lv2
| [ 0:00] ## Line: 42 	 
| [ 0:00] ## Line: 43 	 wait
| [ 0:00] ## Line: 44 	 
| [ 0:00] ## Line: 45 	 aux enable_dev "$dev1"
| [ 0:00] ## Line: 46 	 
| [ 0:00] ## Line: 47 	 # Check removed $lv2 does not reappear
| [ 0:00] ## Line: 48 	 not check lv_exists $vg $lv2
| [ 0:00] ## Line: 49 	 
| [ 0:00] ## Line: 50 	 vgremove -ff $vg
| [ 0:00] aux teardown
| [ 0:00] #lock-parallel.sh:1+ aux teardown
| [ 0:00] ## teardown.........ok
###       failed: [ndev-vanilla] shell/lock-parallel.sh
###       passed: [ndev-vanilla] shell/losetup-partscan.sh
###      skipped: [ndev-vanilla] shell/lv-ancestry.sh
###      skipped: [ndev-vanilla] shell/lvchange-cache-mode.sh
###      skipped: [ndev-vanilla] shell/lvchange-cache-old.sh
###      skipped: [ndev-vanilla] shell/lvchange-cache-syncaction-raid.sh
###      skipped: [ndev-vanilla] shell/lvchange-cache.sh
###      skipped: [ndev-vanilla] shell/lvchange-mirror.sh
###      skipped: [ndev-vanilla] shell/lvchange-partial-raid10.sh

| [ 0:00] Library version:   1.02.146 (2017-12-18)
| [ 0:00] Driver version:    4.35.0
| [ 0:00] Kernel is Linux localhost.localdomain 3.10.0-693.11.1.el7.x86_64 #1 SMP Mon Dec 4 23:52:40 UTC 2017 x86_64 GNU/Linux
| [ 0:00] Selinux mode is not installed.
| [ 0:00]               total        used        free      shared  buff/cache   available
| [ 0:00] Mem:           7822        1075        4155          10        2592        6440
| [ 0:00] Swap:          4095           0        4095
| [ 0:00] Filesystem      Size  Used Avail Use% Mounted on
| [ 0:00] /dev/sdc1        18G  8.4G  8.4G  50% /
| [ 0:00] /dev/sdd1        51G  6.1G   43G  13% /lfskernel
| [ 0:00] devtmpfs        3.9G     0  3.9G   0% /dev
| [ 0:00] tmpfs           3.9G     0  3.9G   0% /run
| [ 0:00] @TESTDIR=/tmp/LVMTEST28705.0PFTFOz21a
| [ 0:00] @PREFIX=LVMTEST28705
| [ 0:00] ## LVMCONF: activation {
| [ 0:00] ## LVMCONF:     checks = 1
| [ 0:00] ## LVMCONF:     monitoring = 0
| [ 0:00] ## LVMCONF:     polling_interval = 1
| [ 0:00] ## LVMCONF:     raid_region_size = 512
| [ 0:00] ## LVMCONF:     retry_deactivation = 1
| [ 0:00] ## LVMCONF:     snapshot_autoextend_percent = 50
| [ 0:00] ## LVMCONF:     snapshot_autoextend_threshold = 50
| [ 0:00] ## LVMCONF:     udev_rules = 1
| [ 0:00] ## LVMCONF:     udev_sync = 1
| [ 0:00] ## LVMCONF:     verify_udev_operations = 1
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: allocation {
| [ 0:00] ## LVMCONF:     wipe_signatures_when_zeroing_new_lvs = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: backup {
| [ 0:00] ## LVMCONF:     archive = 0
| [ 0:00] ## LVMCONF:     backup = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: devices {
| [ 0:00] ## LVMCONF:     cache_dir = "@TESTDIR@/etc"
| [ 0:00] ## LVMCONF:     default_data_alignment = 1
| [ 0:00] ## LVMCONF:     dir = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     filter = "a|.*|"
| [ 0:00] ## LVMCONF:     global_filter = [ "a|@TESTDIR@/dev/mapper/@PREFIX@.*pv[0-9_]*$|", "r|.*|" ]
| [ 0:00] ## LVMCONF:     md_component_detection  = 0
| [ 0:00] ## LVMCONF:     scan = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     sysfs_scan = 1
| [ 0:00] ## LVMCONF:     write_cache_state = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: dmeventd {
| [ 0:00] ## LVMCONF:     executable = "/sources/boot/LVM2.2.02.177/test/lib/dmeventd"
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: global {
| [ 0:00] ## LVMCONF:     abort_on_internal_errors = 1
| [ 0:00] ## LVMCONF:     cache_check_executable = "/usr/sbin/cache_check"
| [ 0:00] ## LVMCONF:     cache_dump_executable = "/usr/sbin/cache_dump"
| [ 0:00] ## LVMCONF:     cache_repair_executable = "/usr/sbin/cache_repair"
| [ 0:00] ## LVMCONF:     detect_internal_vg_cache_corruption = 1
| [ 0:00] ## LVMCONF:     fallback_to_local_locking = 0
| [ 0:00] ## LVMCONF:     fsadm_executable = "/sources/boot/LVM2.2.02.177/test/lib/fsadm"
| [ 0:00] ## LVMCONF:     library_dir = "@TESTDIR@/lib"
| [ 0:00] ## LVMCONF:     locking_dir = "@TESTDIR@/var/lock/lvm"
| [ 0:00] ## LVMCONF:     locking_type=1
| [ 0:00] ## LVMCONF:     notify_dbus = 0
| [ 0:00] ## LVMCONF:     si_unit_consistency = 1
| [ 0:00] ## LVMCONF:     thin_check_executable = "/usr/sbin/thin_check"
| [ 0:00] ## LVMCONF:     thin_dump_executable = "/usr/sbin/thin_dump"
| [ 0:00] ## LVMCONF:     thin_repair_executable = "/usr/sbin/thin_repair"
| [ 0:00] ## LVMCONF:     use_lvmetad = 0
| [ 0:00] ## LVMCONF:     use_lvmlockd = 0
| [ 0:00] ## LVMCONF:     use_lvmpolld = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: log {
| [ 0:00] ## LVMCONF:     activation = 1
| [ 0:00] ## LVMCONF:     file = "@TESTDIR@/debug.log"
| [ 0:00] ## LVMCONF:     indent = 1
| [ 0:00] ## LVMCONF:     level = 9
| [ 0:00] ## LVMCONF:     overwrite = 1
| [ 0:00] ## LVMCONF:     syslog = 0
| [ 0:00] ## LVMCONF:     verbose = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] <======== Processing test: "lvchange-partial.sh" ========>
| [ 0:00] 
| [ 0:00] aux prepare_vg 4
| [ 0:00] #lvchange-partial.sh:18+ aux prepare_vg 4
| [ 0:00] ## preparing loop device....ok (/dev/loop0)
| [ 0:00] ## preparing 4 devices...lib/utils: line 212: DM_UDEV_COOKIE: unbound variable
| [ 0:00] set +vx; STACKTRACE; set -vx
| [ 0:00] ##lvchange-partial.sh:18+ set +vx
| [ 0:00] ## - /lfskernel/sources/boot/LVM2.2.02.177/test/shell/lvchange-partial.sh:18
| [ 0:00] ## 1 STACKTRACE() called from /lfskernel/sources/boot/LVM2.2.02.177/test/shell/lvchange-partial.sh:18
| [ 0:00] <======== Info ========>
| [ 0:01] ## DMINFO:   Name             Maj Min Stat Open Targ Event  UUID                                                                
| [ 0:01] ## DMINFO:   @PREFIX@pv4  253   4 L--w    0    1      0 TEST-@PREFIX@pv4                                                
| [ 0:01] ## DMINFO:   @PREFIX@pv3  253   3 L--w    0    1      0 TEST-@PREFIX@pv3                                                
| [ 0:01] ## DMINFO:   @PREFIX@pv2  253   6 L--w    0    1      0 TEST-@PREFIX@pv2                                                
| [ 0:01] ## DMINFO:   @PREFIX@pv1  253   5 L--w    0    1      0 TEST-@PREFIX@pv1                                                
| [ 0:01] <======== Active table ========>
| [ 0:01] ## DMTABLE:  @PREFIX@pv4: 0 69632 linear 7:0 210944
| [ 0:01] ## DMTABLE:  @PREFIX@pv3: 0 69632 linear 7:0 141312
| [ 0:01] ## DMTABLE:  @PREFIX@pv2: 0 69632 linear 7:0 71680
| [ 0:01] ## DMTABLE:  @PREFIX@pv1: 0 69632 linear 7:0 2048
| [ 0:01] <======== Inactive table ========>
| [ 0:01] ## DMITABLE: @PREFIX@pv4: 
| [ 0:01] ## DMITABLE: @PREFIX@pv3: 
| [ 0:01] ## DMITABLE: @PREFIX@pv2: 
| [ 0:01] ## DMITABLE: @PREFIX@pv1: 
| [ 0:01] <======== Status ========>
| [ 0:01] ## DMSTATUS: @PREFIX@pv4: 0 69632 linear 
| [ 0:01] ## DMSTATUS: @PREFIX@pv3: 0 69632 linear 
| [ 0:01] ## DMSTATUS: @PREFIX@pv2: 0 69632 linear 
| [ 0:01] ## DMSTATUS: @PREFIX@pv1: 0 69632 linear 
| [ 0:01] <======== Tree ========>
| [ 0:01] ## DMTREE:   @PREFIX@pv4 (253:4)
| [ 0:01] ## DMTREE:    `- (7:0)
| [ 0:01] ## DMTREE:   @PREFIX@pv3 (253:3)
| [ 0:01] ## DMTREE:    `- (7:0)
| [ 0:01] ## DMTREE:   @PREFIX@pv2 (253:6)
| [ 0:01] ## DMTREE:    `- (7:0)
| [ 0:01] ## DMTREE:   @PREFIX@pv1 (253:5)
| [ 0:01] ## DMTREE:    `- (7:0)
| [ 0:01] ## DMTREE:   LFS_vg-lfs (253:2)
| [ 0:01] ## DMTREE:    `- (8:16)
| [ 0:01] ## DMTREE:   centos-swap (253:1)
| [ 0:01] ## DMTREE:    `- (8:2)
| [ 0:01] ## DMTREE:   centos-root (253:0)
| [ 0:01] ## DMTREE:    `- (8:2)
| [ 0:01] <======== Recursive list of @TESTDIR@/dev ========>
| [ 0:01] ## LSLR:	@TESTDIR@/dev:
| [ 0:01] ## LSLR:	total 4
| [ 0:01] ## LSLR:	brw-r--r-- 1 root root 7, 0 Feb 21 02:26 loop0
| [ 0:01] ## LSLR:	brw-r--r-- 1 root root 7, 1 Feb 21 02:26 loop1
| [ 0:01] ## LSLR:	brw-r--r-- 1 root root 7, 2 Feb 21 02:26 loop2
| [ 0:01] ## LSLR:	brw-r--r-- 1 root root 7, 3 Feb 21 02:26 loop3
| [ 0:01] ## LSLR:	brw-r--r-- 1 root root 7, 4 Feb 21 02:26 loop4
| [ 0:01] ## LSLR:	brw-r--r-- 1 root root 7, 5 Feb 21 02:26 loop5
| [ 0:01] ## LSLR:	brw-r--r-- 1 root root 7, 6 Feb 21 02:26 loop6
| [ 0:01] ## LSLR:	brw-r--r-- 1 root root 7, 7 Feb 21 02:26 loop7
| [ 0:01] ## LSLR:	drwxr-xr-x 2 root root 4096 Feb 21 02:26 mapper
| [ 0:01] ## LSLR:	crw-r--r-- 1 root root 1, 3 Feb 21 02:26 testnull
| [ 0:01] ## LSLR:	
| [ 0:01] ## LSLR:	@TESTDIR@/dev/mapper:
| [ 0:01] ## LSLR:	total 0
| [ 0:01] ## LSLR:	brw------- 1 root root 253,   5 Feb 21 02:26 @PREFIX@pv1
| [ 0:01] ## LSLR:	brw------- 1 root root 253,   6 Feb 21 02:26 @PREFIX@pv2
| [ 0:01] ## LSLR:	brw------- 1 root root 253,   3 Feb 21 02:26 @PREFIX@pv3
| [ 0:01] ## LSLR:	brw------- 1 root root 253,   4 Feb 21 02:26 @PREFIX@pv4
| [ 0:01] ## LSLR:	crw------- 1 root root  10, 236 Feb 21 02:26 control
| [ 0:01] <======== Udev DB content ========>
| [ 0:01] ## UDEV:	P: /devices/virtual/block/dm-0
| [ 0:01] ## UDEV:	N: dm-0
| [ 0:01] ## UDEV:	E: DEVNAME=/dev/dm-0
| [ 0:01] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-0
| [ 0:01] ## UDEV:	E: DEVTYPE=disk
| [ 0:01] ## UDEV:	E: MAJOR=253
| [ 0:01] ## UDEV:	E: MINOR=0
| [ 0:01] ## UDEV:	E: SUBSYSTEM=block
| [ 0:01] ## UDEV:	
| [ 0:01] ## UDEV:	P: /devices/virtual/block/dm-1
| [ 0:01] ## UDEV:	N: dm-1
| [ 0:01] ## UDEV:	E: DEVNAME=/dev/dm-1
| [ 0:01] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-1
| [ 0:01] ## UDEV:	E: DEVTYPE=disk
| [ 0:01] ## UDEV:	E: MAJOR=253
| [ 0:01] ## UDEV:	E: MINOR=1
| [ 0:01] ## UDEV:	E: SUBSYSTEM=block
| [ 0:01] ## UDEV:	
| [ 0:01] ## UDEV:	P: /devices/virtual/block/dm-2
| [ 0:01] ## UDEV:	N: dm-2
| [ 0:01] ## UDEV:	E: DEVNAME=/dev/dm-2
| [ 0:01] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-2
| [ 0:01] ## UDEV:	E: DEVTYPE=disk
| [ 0:01] ## UDEV:	E: MAJOR=253
| [ 0:01] ## UDEV:	E: MINOR=2
| [ 0:01] ## UDEV:	E: SUBSYSTEM=block
| [ 0:01] ## UDEV:	
| [ 0:01] ## UDEV:	P: /devices/virtual/block/dm-3
| [ 0:01] ## UDEV:	N: dm-3
| [ 0:01] ## UDEV:	E: DEVNAME=/dev/dm-3
| [ 0:01] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-3
| [ 0:01] ## UDEV:	E: DEVTYPE=disk
| [ 0:01] ## UDEV:	E: MAJOR=253
| [ 0:01] ## UDEV:	E: MINOR=3
| [ 0:01] ## UDEV:	E: SUBSYSTEM=block
| [ 0:01] ## UDEV:	
| [ 0:01] ## UDEV:	P: /devices/virtual/block/dm-4
| [ 0:01] ## UDEV:	N: dm-4
| [ 0:01] ## UDEV:	E: DEVNAME=/dev/dm-4
| [ 0:01] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-4
| [ 0:01] ## UDEV:	E: DEVTYPE=disk
| [ 0:01] ## UDEV:	E: MAJOR=253
| [ 0:01] ## UDEV:	E: MINOR=4
| [ 0:01] ## UDEV:	E: SUBSYSTEM=block
| [ 0:01] ## UDEV:	
| [ 0:01] ## UDEV:	P: /devices/virtual/block/dm-5
| [ 0:01] ## UDEV:	N: dm-5
| [ 0:01] ## UDEV:	E: DEVNAME=/dev/dm-5
| [ 0:01] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-5
| [ 0:01] ## UDEV:	E: DEVTYPE=disk
| [ 0:01] ## UDEV:	E: MAJOR=253
| [ 0:01] ## UDEV:	E: MINOR=5
| [ 0:01] ## UDEV:	E: SUBSYSTEM=block
| [ 0:01] ## UDEV:	
| [ 0:01] ## UDEV:	P: /devices/virtual/block/dm-6
| [ 0:01] ## UDEV:	N: dm-6
| [ 0:01] ## UDEV:	E: DEVNAME=/dev/dm-6
| [ 0:01] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-6
| [ 0:01] ## UDEV:	E: DEVTYPE=disk
| [ 0:01] ## UDEV:	E: MAJOR=253
| [ 0:01] ## UDEV:	E: MINOR=6
| [ 0:01] ## UDEV:	E: SUBSYSTEM=block
| [ 0:01] ## UDEV:	
| [ 0:01] ## UDEV:	P: /devices/virtual/block/loop0
| [ 0:01] ## UDEV:	N: loop0
| [ 0:01] ## UDEV:	E: DEVNAME=/dev/loop0
| [ 0:01] ## UDEV:	E: DEVPATH=/devices/virtual/block/loop0
| [ 0:01] ## UDEV:	E: DEVTYPE=disk
| [ 0:01] ## UDEV:	E: MAJOR=7
| [ 0:01] ## UDEV:	E: MINOR=0
| [ 0:01] ## UDEV:	E: SUBSYSTEM=block
| [ 0:01] ## UDEV:	
| [ 0:01] <======== Script file "lvchange-partial.sh" ========>
| [ 0:01] ## Line: 1 	 #!/usr/bin/env bash
| [ 0:01] ## Line: 2 	 
| [ 0:01] ## Line: 3 	 # Copyright (C) 2012 Red Hat, Inc. All rights reserved.
| [ 0:01] ## Line: 4 	 #
| [ 0:01] ## Line: 5 	 # This copyrighted material is made available to anyone wishing to use,
| [ 0:01] ## Line: 6 	 # modify, copy, or redistribute it subject to the terms and conditions
| [ 0:01] ## Line: 7 	 # of the GNU General Public License v.2.
| [ 0:01] ## Line: 8 	 #
| [ 0:01] ## Line: 9 	 # You should have received a copy of the GNU General Public License
| [ 0:01] ## Line: 10 	 # along with this program; if not, write to the Free Software Foundation,
| [ 0:01] ## Line: 11 	 # Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA
| [ 0:01] ## Line: 12 	 
| [ 0:01] ## Line: 13 	 SKIP_WITH_LVMLOCKD=1
| [ 0:01] ## Line: 14 	 SKIP_WITH_LVMPOLLD=1
| [ 0:01] ## Line: 15 	 
| [ 0:01] ## Line: 16 	 . lib/inittest
| [ 0:01] ## Line: 17 	 
| [ 0:01] ## Line: 18 	 aux prepare_vg 4
| [ 0:01] ## Line: 19 	 
| [ 0:01] ## Line: 20 	 TYPE=raid1
| [ 0:01] ## Line: 21 	 aux have_raid 1 3 0 || TYPE=mirror
| [ 0:01] ## Line: 22 	 
| [ 0:01] ## Line: 23 	 lvcreate -aey --type $TYPE -m 1 -l 2 -n $lv1 $vg
| [ 0:01] ## Line: 24 	 lvchange -an $vg/$lv1
| [ 0:01] ## Line: 25 	 aux disable_dev "$dev1"
| [ 0:01] ## Line: 26 	 
| [ 0:01] ## Line: 27 	 #
| [ 0:01] ## Line: 28 	 # Test for allowable metadata changes
| [ 0:01] ## Line: 29 	 #
| [ 0:01] ## Line: 30 	 # contiguous_ARG
| [ 0:01] ## Line: 31 	 lvchange -C y $vg/$lv1
| [ 0:01] ## Line: 32 	 lvchange -C n $vg/$lv1
| [ 0:01] ## Line: 33 	 
| [ 0:01] ## Line: 34 	 # permission_ARG
| [ 0:01] ## Line: 35 	 lvchange -p r $vg/$lv1
| [ 0:01] ## Line: 36 	 lvchange -p rw $vg/$lv1
| [ 0:01] ## Line: 37 	 
| [ 0:01] ## Line: 38 	 # readahead_ARG
| [ 0:01] ## Line: 39 	 lvchange -r none $vg/$lv1
| [ 0:01] ## Line: 40 	 lvchange -r auto $vg/$lv1
| [ 0:01] ## Line: 41 	 
| [ 0:01] ## Line: 42 	 # persistent_ARG
| [ 0:01] ## Line: 43 	 lvchange -M y --minor 56 --major 253 $vg/$lv1
| [ 0:01] ## Line: 44 	 lvchange -M n $vg/$lv1
| [ 0:01] ## Line: 45 	 
| [ 0:01] ## Line: 46 	 # addtag_ARG
| [ 0:01] ## Line: 47 	 # deltag_ARG
| [ 0:01] ## Line: 48 	 lvchange --addtag foo $vg/$lv1
| [ 0:01] ## Line: 49 	 lvchange --deltag foo $vg/$lv1
| [ 0:01] ## Line: 50 	 
| [ 0:01] ## Line: 51 	 #
| [ 0:01] ## Line: 52 	 # Test for disallowed metadata changes
| [ 0:01] ## Line: 53 	 #
| [ 0:01] ## Line: 54 	 # resync_ARG
| [ 0:01] ## Line: 55 	 not lvchange --resync $vg/$lv1
| [ 0:01] ## Line: 56 	 
| [ 0:01] ## Line: 57 	 # alloc_ARG
| [ 0:01] ## Line: 58 	 not lvchange --alloc anywhere $vg/$lv1
| [ 0:01] ## Line: 59 	 
| [ 0:01] ## Line: 60 	 # discards_ARG
| [ 0:01] ## Line: 61 	 not lvchange --discards ignore $vg/$lv1
| [ 0:01] ## Line: 62 	 
| [ 0:01] ## Line: 63 	 # zero_ARG
| [ 0:01] ## Line: 64 	 not lvchange --zero y $vg/$lv1
| [ 0:01] ## Line: 65 	 
| [ 0:01] ## Line: 66 	 #
| [ 0:01] ## Line: 67 	 # Ensure that allowed args don't cause disallowed args to get through
| [ 0:01] ## Line: 68 	 #
| [ 0:01] ## Line: 69 	 not lvchange --resync -ay $vg/$lv1
| [ 0:01] ## Line: 70 	 not lvchange --resync --addtag foo $vg/$lv1
| [ 0:01] ## Line: 71 	 
| [ 0:01] ## Line: 72 	 aux enable_dev "$dev1"
| [ 0:01] ## Line: 73 	 
| [ 0:01] ## Line: 74 	 vgremove -ff $vg
| [ 0:01] aux teardown
| [ 0:01] #lvchange-partial.sh:1+ aux teardown
| [ 0:01] ## teardown.........ok
###       failed: [ndev-vanilla] shell/lvchange-partial.sh
###      skipped: [ndev-vanilla] shell/lvchange-raid-transient-failures.sh
###      skipped: [ndev-vanilla] shell/lvchange-raid.sh
###      skipped: [ndev-vanilla] shell/lvchange-raid1-writemostly.sh
###      skipped: [ndev-vanilla] shell/lvchange-raid10.sh
###      skipped: [ndev-vanilla] shell/lvchange-raid456.sh
###      skipped: [ndev-vanilla] shell/lvchange-rebuild-raid.sh
###      skipped: [ndev-vanilla] shell/lvchange-syncaction-raid.sh
###      skipped: [ndev-vanilla] shell/lvchange-thin.sh
###      skipped: [ndev-vanilla] shell/lvconvert-cache-abort.sh
###      skipped: [ndev-vanilla] shell/lvconvert-cache-chunks.sh
###      skipped: [ndev-vanilla] shell/lvconvert-cache-raid.sh
###      skipped: [ndev-vanilla] shell/lvconvert-cache-smq.sh
###      skipped: [ndev-vanilla] shell/lvconvert-cache-snapshot.sh
###      skipped: [ndev-vanilla] shell/lvconvert-cache-thin.sh
###      skipped: [ndev-vanilla] shell/lvconvert-cache.sh

| [ 0:00] Library version:   1.02.146 (2017-12-18)
| [ 0:00] Driver version:    4.35.0
| [ 0:00] Kernel is Linux localhost.localdomain 3.10.0-693.11.1.el7.x86_64 #1 SMP Mon Dec 4 23:52:40 UTC 2017 x86_64 GNU/Linux
| [ 0:00] Selinux mode is not installed.
| [ 0:00]               total        used        free      shared  buff/cache   available
| [ 0:00] Mem:           7822        1070        4159          10        2592        6445
| [ 0:00] Swap:          4095           0        4095
| [ 0:00] Filesystem      Size  Used Avail Use% Mounted on
| [ 0:00] /dev/sdc1        18G  8.4G  8.4G  50% /
| [ 0:00] /dev/sdd1        51G  6.1G   43G  13% /lfskernel
| [ 0:00] devtmpfs        3.9G     0  3.9G   0% /dev
| [ 0:00] tmpfs           3.9G     0  3.9G   0% /run
| [ 0:00] @TESTDIR=/tmp/LVMTEST29989.74OdTleBu9
| [ 0:00] @PREFIX=LVMTEST29989
| [ 0:00] ## LVMCONF: activation {
| [ 0:00] ## LVMCONF:     checks = 1
| [ 0:00] ## LVMCONF:     monitoring = 0
| [ 0:00] ## LVMCONF:     polling_interval = 1
| [ 0:00] ## LVMCONF:     raid_region_size = 512
| [ 0:00] ## LVMCONF:     retry_deactivation = 1
| [ 0:00] ## LVMCONF:     snapshot_autoextend_percent = 50
| [ 0:00] ## LVMCONF:     snapshot_autoextend_threshold = 50
| [ 0:00] ## LVMCONF:     udev_rules = 1
| [ 0:00] ## LVMCONF:     udev_sync = 1
| [ 0:00] ## LVMCONF:     verify_udev_operations = 1
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: allocation {
| [ 0:00] ## LVMCONF:     wipe_signatures_when_zeroing_new_lvs = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: backup {
| [ 0:00] ## LVMCONF:     archive = 0
| [ 0:00] ## LVMCONF:     backup = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: devices {
| [ 0:00] ## LVMCONF:     cache_dir = "@TESTDIR@/etc"
| [ 0:00] ## LVMCONF:     default_data_alignment = 1
| [ 0:00] ## LVMCONF:     dir = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     filter = "a|.*|"
| [ 0:00] ## LVMCONF:     global_filter = [ "a|@TESTDIR@/dev/mapper/@PREFIX@.*pv[0-9_]*$|", "r|.*|" ]
| [ 0:00] ## LVMCONF:     md_component_detection  = 0
| [ 0:00] ## LVMCONF:     scan = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     sysfs_scan = 1
| [ 0:00] ## LVMCONF:     write_cache_state = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: dmeventd {
| [ 0:00] ## LVMCONF:     executable = "/sources/boot/LVM2.2.02.177/test/lib/dmeventd"
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: global {
| [ 0:00] ## LVMCONF:     abort_on_internal_errors = 1
| [ 0:00] ## LVMCONF:     cache_check_executable = "/usr/sbin/cache_check"
| [ 0:00] ## LVMCONF:     cache_dump_executable = "/usr/sbin/cache_dump"
| [ 0:00] ## LVMCONF:     cache_repair_executable = "/usr/sbin/cache_repair"
| [ 0:00] ## LVMCONF:     detect_internal_vg_cache_corruption = 1
| [ 0:00] ## LVMCONF:     fallback_to_local_locking = 0
| [ 0:00] ## LVMCONF:     fsadm_executable = "/sources/boot/LVM2.2.02.177/test/lib/fsadm"
| [ 0:00] ## LVMCONF:     library_dir = "@TESTDIR@/lib"
| [ 0:00] ## LVMCONF:     locking_dir = "@TESTDIR@/var/lock/lvm"
| [ 0:00] ## LVMCONF:     locking_type=1
| [ 0:00] ## LVMCONF:     notify_dbus = 0
| [ 0:00] ## LVMCONF:     si_unit_consistency = 1
| [ 0:00] ## LVMCONF:     thin_check_executable = "/usr/sbin/thin_check"
| [ 0:00] ## LVMCONF:     thin_dump_executable = "/usr/sbin/thin_dump"
| [ 0:00] ## LVMCONF:     thin_repair_executable = "/usr/sbin/thin_repair"
| [ 0:00] ## LVMCONF:     use_lvmetad = 0
| [ 0:00] ## LVMCONF:     use_lvmlockd = 0
| [ 0:00] ## LVMCONF:     use_lvmpolld = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: log {
| [ 0:00] ## LVMCONF:     activation = 1
| [ 0:00] ## LVMCONF:     file = "@TESTDIR@/debug.log"
| [ 0:00] ## LVMCONF:     indent = 1
| [ 0:00] ## LVMCONF:     level = 9
| [ 0:00] ## LVMCONF:     overwrite = 1
| [ 0:00] ## LVMCONF:     syslog = 0
| [ 0:00] ## LVMCONF:     verbose = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] <======== Processing test: "lvconvert-mirror-basic-0.sh" ========>
| [ 0:00] 
| [ 0:00] log_name_to_count() {
| [ 0:00] 	case "$1"  in
| [ 0:00] 	mirrored) echo 2 ;;
| [ 0:00] 	disk)	  echo 1 ;;
| [ 0:00] 	*)	  echo 0 ;;
| [ 0:00] 	esac
| [ 0:00] }
| [ 0:00] 
| [ 0:00] # FIXME: For test_[up|down]convert, I'd still like to be able
| [ 0:00] # to specifiy devices - especially if I can do partial PV
| [ 0:00] # specification for down-converts.  It may even be wise to
| [ 0:00] # do one round through these tests without specifying the PVs
| [ 0:00] # to use and one round where we do.
| [ 0:00] 
| [ 0:00] # test_lvconvert
| [ 0:00] #   start_mirror_count:  The '-m' argument to create with
| [ 0:00] #   start_log_type: core|disk|mirrored
| [ 0:00] #   final_mirror_count: The '-m' argument to convert to
| [ 0:00] #   final_log_type: core|disk|mirrored
| [ 0:00] #   active: Whether the LV should be active when the convert happens
| [ 0:00] #
| [ 0:00] # Exmaple: Convert 3-way disk-log mirror to
| [ 0:00] #          2-way disk-log mirror while not active
| [ 0:00] # -> test_lvconvert 2 disk 3 disk 0
| [ 0:00] 
| [ 0:00] test_lvconvert() {
| [ 0:00] 	local start_count=$1
| [ 0:00] 	local start_count_p1=$(( start_count + 1 ))
| [ 0:00] 	local start_log_type=$2
| [ 0:00] 	local finish_count=$3
| [ 0:00] 	local finish_count_p1=$(( finish_count + 1 ))
| [ 0:00] 	local finish_log_type=$4
| [ 0:00] 	local start_log_count
| [ 0:00] 	local finish_log_count
| [ 0:00] 	local max_log_count
| [ 0:00] 	local alloc=""
| [ 0:00] 	local active="-aey"
| [ 0:00] 	local i
| [ 0:00] 
| [ 0:00] 	test "$5" = "active" && active="-an"
| [ 0:00] 	#test $finish_count -gt $start_count && up=true
| [ 0:00] 
| [ 0:00] 	# Do we have enough devices for the mirror images?
| [ 0:00] 	test $start_count_p1 -gt ${#DEVICES[@]} && \
| [ 0:00] 		die "Action requires too many devices"
| [ 0:00] 
| [ 0:00] 	# Do we have enough devices for the mirror images?
| [ 0:00] 	test $finish_count_p1 -gt ${#DEVICES[@]} && \
| [ 0:00] 		die "Action requires too many devices"
| [ 0:00] 
| [ 0:00] 	start_log_count=$(log_name_to_count $start_log_type)
| [ 0:00] 	finish_log_count=$(log_name_to_count $finish_log_type)
| [ 0:00] 	if [ $finish_log_count -gt $start_log_count ]; then
| [ 0:00] 		max_log_count=$finish_log_count
| [ 0:00] 	else
| [ 0:00] 		max_log_count=$start_log_count
| [ 0:00] 	fi
| [ 0:00] 
| [ 0:00] 	if [ $start_count -gt 0 ]; then
| [ 0:00] 		# Are there extra devices for the log or do we overlap
| [ 0:00] 		if [ $(( start_count_p1 + start_log_count )) -gt ${#DEVICES[@]} ]; then
| [ 0:00] 			alloc="--alloc anywhere"
| [ 0:00] 		fi
| [ 0:00] 
| [ 0:00] 		lvcreate "$active" -Zn -l2 --type mirror -m $start_count --mirrorlog $start_log_type \
| [ 0:00] 			-n $lv1 $vg $alloc
| [ 0:00] 		check mirror_legs $vg $lv1 $start_count_p1
| [ 0:00] 		# FIXME: check mirror log
| [ 0:00] 	else
| [ 0:00] 		lvcreate "$active" -Zn -l2 -n $lv1 $vg
| [ 0:00] 	fi
| [ 0:00] 
| [ 0:00] 	lvs -a -o name,copy_percent,devices $vg
| [ 0:00] 
| [ 0:00] 	# Are there extra devices for the log or do we overlap
| [ 0:00] 	if [ $(( finish_count_p1 +  finish_log_count )) -gt ${#DEVICES[@]} ]; then
| [ 0:00] 		alloc="--alloc anywhere"
| [ 0:00] 	fi
| [ 0:00] 
| [ 0:00] 	# --mirrorlog is invalid with -m0
| [ 0:00] 	if [ "$finish_count" -eq 0 ]; then
| [ 0:00] 		mirrorlog=""
| [ 0:00] 		finish_log_type=""
| [ 0:00] 	else
| [ 0:00] 		mirrorlog="--mirrorlog"
| [ 0:00] 	fi
| [ 0:00] 
| [ 0:00] 	lvconvert --type mirror -m $finish_count $mirrorlog $finish_log_type \
| [ 0:00] 		$vg/$lv1 $alloc
| [ 0:00] 
| [ 0:00] 	test "$active" = "-an" || lvchange "$active" $vg/$lv1
| [ 0:00] 
| [ 0:00] 	check mirror_no_temporaries $vg $lv1
| [ 0:00] 	if [ "$finish_count_p1" -eq 1 ]; then
| [ 0:00] 		check linear $vg $lv1
| [ 0:00] 	else
| [ 0:00] 		if test -n "$alloc"; then
| [ 0:00] 			check mirror_nonredundant $vg $lv1
| [ 0:00] 		else
| [ 0:00] 			check mirror $vg $lv1
| [ 0:00] 		fi
| [ 0:00] 		check mirror_legs $vg $lv1 $finish_count_p1
| [ 0:00] 	fi
| [ 0:00] }
| [ 0:00] 
| [ 0:00] aux prepare_vg 5 5
| [ 0:00] ##lvconvert-mirror-basic.sh:125+ aux prepare_vg 5 5
| [ 0:00] ## preparing loop device....ok (/dev/loop0)
| [ 0:00] ## preparing 5 devices...lib/utils: line 212: DM_UDEV_COOKIE: unbound variable
| [ 0:00] set +vx; STACKTRACE; set -vx
| [ 0:00] ###lvconvert-mirror-basic.sh:125+ set +vx
| [ 0:00] ## - /lfskernel/sources/boot/LVM2.2.02.177/test/shell/lvconvert-mirror-basic-0.sh:13
| [ 0:00] ## 1 STACKTRACE() called from ./shell/lvconvert-mirror-basic.sh:125
| [ 0:00] ## 2 source() called from /lfskernel/sources/boot/LVM2.2.02.177/test/shell/lvconvert-mirror-basic-0.sh:13
| [ 0:00] <======== Info ========>
| [ 0:00] ## DMINFO:   Name             Maj Min Stat Open Targ Event  UUID                                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv4  253   5 L--w    0    1      0 TEST-@PREFIX@pv4                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv3  253   4 L--w    0    1      0 TEST-@PREFIX@pv3                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv2  253   3 L--w    0    1      0 TEST-@PREFIX@pv2                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv1  253   7 L--w    0    1      0 TEST-@PREFIX@pv1                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv5  253   6 L--w    0    1      0 TEST-@PREFIX@pv5                                                
| [ 0:00] <======== Active table ========>
| [ 0:00] ## DMTABLE:  @PREFIX@pv4: 0 10240 linear 7:0 32768
| [ 0:00] ## DMTABLE:  @PREFIX@pv3: 0 10240 linear 7:0 22528
| [ 0:00] ## DMTABLE:  @PREFIX@pv2: 0 10240 linear 7:0 12288
| [ 0:00] ## DMTABLE:  @PREFIX@pv1: 0 10240 linear 7:0 2048
| [ 0:00] ## DMTABLE:  @PREFIX@pv5: 0 10240 linear 7:0 43008
| [ 0:00] <======== Inactive table ========>
| [ 0:00] ## DMITABLE: @PREFIX@pv4: 
| [ 0:00] ## DMITABLE: @PREFIX@pv3: 
| [ 0:00] ## DMITABLE: @PREFIX@pv2: 
| [ 0:00] ## DMITABLE: @PREFIX@pv1: 
| [ 0:00] ## DMITABLE: @PREFIX@pv5: 
| [ 0:00] <======== Status ========>
| [ 0:00] ## DMSTATUS: @PREFIX@pv4: 0 10240 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv3: 0 10240 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv2: 0 10240 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv1: 0 10240 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv5: 0 10240 linear 
| [ 0:00] <======== Tree ========>
| [ 0:00] ## DMTREE:   @PREFIX@pv4 (253:5)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   @PREFIX@pv3 (253:4)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   @PREFIX@pv2 (253:3)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   @PREFIX@pv1 (253:7)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   LFS_vg-lfs (253:2)
| [ 0:00] ## DMTREE:    `- (8:16)
| [ 0:00] ## DMTREE:   centos-swap (253:1)
| [ 0:00] ## DMTREE:    `- (8:2)
| [ 0:00] ## DMTREE:   centos-root (253:0)
| [ 0:00] ## DMTREE:    `- (8:2)
| [ 0:00] ## DMTREE:   @PREFIX@pv5 (253:6)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] <======== Recursive list of @TESTDIR@/dev ========>
| [ 0:00] ## LSLR:	@TESTDIR@/dev:
| [ 0:00] ## LSLR:	total 4
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 0 Feb 21 02:26 loop0
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 1 Feb 21 02:26 loop1
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 2 Feb 21 02:26 loop2
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 3 Feb 21 02:26 loop3
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 4 Feb 21 02:26 loop4
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 5 Feb 21 02:26 loop5
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 6 Feb 21 02:26 loop6
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 7 Feb 21 02:26 loop7
| [ 0:00] ## LSLR:	drwxr-xr-x 2 root root 4096 Feb 21 02:26 mapper
| [ 0:00] ## LSLR:	crw-r--r-- 1 root root 1, 3 Feb 21 02:26 testnull
| [ 0:00] ## LSLR:	
| [ 0:00] ## LSLR:	@TESTDIR@/dev/mapper:
| [ 0:00] ## LSLR:	total 0
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   7 Feb 21 02:26 @PREFIX@pv1
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   3 Feb 21 02:26 @PREFIX@pv2
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   4 Feb 21 02:26 @PREFIX@pv3
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   5 Feb 21 02:26 @PREFIX@pv4
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   6 Feb 21 02:26 @PREFIX@pv5
| [ 0:00] ## LSLR:	crw------- 1 root root  10, 236 Feb 21 02:26 control
| [ 0:00] <======== Udev DB content ========>
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-0
| [ 0:00] ## UDEV:	N: dm-0
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-0
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-0
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=0
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-1
| [ 0:00] ## UDEV:	N: dm-1
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-1
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-1
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=1
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-2
| [ 0:00] ## UDEV:	N: dm-2
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-2
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-2
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=2
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-3
| [ 0:00] ## UDEV:	N: dm-3
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-3
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-3
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=3
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-4
| [ 0:00] ## UDEV:	N: dm-4
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-4
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-4
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=4
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-5
| [ 0:00] ## UDEV:	N: dm-5
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-5
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-5
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=5
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-6
| [ 0:00] ## UDEV:	N: dm-6
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-6
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-6
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=6
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-7
| [ 0:00] ## UDEV:	N: dm-7
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-7
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-7
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=7
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/loop0
| [ 0:00] ## UDEV:	N: loop0
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/loop0
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/loop0
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=7
| [ 0:00] ## UDEV:	E: MINOR=0
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] <======== Script file "lvconvert-mirror-basic-0.sh" ========>
| [ 0:00] ## Line: 1 	 #!/usr/bin/env bash
| [ 0:00] ## Line: 2 	 
| [ 0:00] ## Line: 3 	 # Copyright (C) 2010 Red Hat, Inc. All rights reserved.
| [ 0:00] ## Line: 4 	 #
| [ 0:00] ## Line: 5 	 # This copyrighted material is made available to anyone wishing to use,
| [ 0:00] ## Line: 6 	 # modify, copy, or redistribute it subject to the terms and conditions
| [ 0:00] ## Line: 7 	 # of the GNU General Public License v.2.
| [ 0:00] ## Line: 8 	 #
| [ 0:00] ## Line: 9 	 # You should have received a copy of the GNU General Public License
| [ 0:00] ## Line: 10 	 # along with this program; if not, write to the Free Software Foundation,
| [ 0:00] ## Line: 11 	 # Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA
| [ 0:00] ## Line: 12 	 
| [ 0:00] ## Line: 13 	 . ./shell/lvconvert-mirror-basic.sh
| [ 0:00] ## Line: 14 	 
| [ 0:00] ## Line: 15 	 test_many 0
| [ 0:00] ## Line: 16 	 
| [ 0:00] ## Line: 17 	 vgremove -ff $vg
| [ 0:00] aux teardown
| [ 0:00] #lvconvert-mirror-basic.sh:1+ aux teardown
| [ 0:00] ## teardown.........ok
###       failed: [ndev-vanilla] shell/lvconvert-mirror-basic-0.sh

| [ 0:00] Library version:   1.02.146 (2017-12-18)
| [ 0:00] Driver version:    4.35.0
| [ 0:00] Kernel is Linux localhost.localdomain 3.10.0-693.11.1.el7.x86_64 #1 SMP Mon Dec 4 23:52:40 UTC 2017 x86_64 GNU/Linux
| [ 0:00] Selinux mode is not installed.
| [ 0:00]               total        used        free      shared  buff/cache   available
| [ 0:00] Mem:           7822        1073        4156          10        2592        6442
| [ 0:00] Swap:          4095           0        4095
| [ 0:00] Filesystem      Size  Used Avail Use% Mounted on
| [ 0:00] /dev/sdc1        18G  8.4G  8.4G  50% /
| [ 0:00] /dev/sdd1        51G  6.1G   43G  13% /lfskernel
| [ 0:00] devtmpfs        3.9G     0  3.9G   0% /dev
| [ 0:00] tmpfs           3.9G     0  3.9G   0% /run
| [ 0:00] @TESTDIR=/tmp/LVMTEST30214.Str7AeLF8N
| [ 0:00] @PREFIX=LVMTEST30214
| [ 0:00] ## LVMCONF: activation {
| [ 0:00] ## LVMCONF:     checks = 1
| [ 0:00] ## LVMCONF:     monitoring = 0
| [ 0:00] ## LVMCONF:     polling_interval = 1
| [ 0:00] ## LVMCONF:     raid_region_size = 512
| [ 0:00] ## LVMCONF:     retry_deactivation = 1
| [ 0:00] ## LVMCONF:     snapshot_autoextend_percent = 50
| [ 0:00] ## LVMCONF:     snapshot_autoextend_threshold = 50
| [ 0:00] ## LVMCONF:     udev_rules = 1
| [ 0:00] ## LVMCONF:     udev_sync = 1
| [ 0:00] ## LVMCONF:     verify_udev_operations = 1
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: allocation {
| [ 0:00] ## LVMCONF:     wipe_signatures_when_zeroing_new_lvs = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: backup {
| [ 0:00] ## LVMCONF:     archive = 0
| [ 0:00] ## LVMCONF:     backup = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: devices {
| [ 0:00] ## LVMCONF:     cache_dir = "@TESTDIR@/etc"
| [ 0:00] ## LVMCONF:     default_data_alignment = 1
| [ 0:00] ## LVMCONF:     dir = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     filter = "a|.*|"
| [ 0:00] ## LVMCONF:     global_filter = [ "a|@TESTDIR@/dev/mapper/@PREFIX@.*pv[0-9_]*$|", "r|.*|" ]
| [ 0:00] ## LVMCONF:     md_component_detection  = 0
| [ 0:00] ## LVMCONF:     scan = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     sysfs_scan = 1
| [ 0:00] ## LVMCONF:     write_cache_state = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: dmeventd {
| [ 0:00] ## LVMCONF:     executable = "/sources/boot/LVM2.2.02.177/test/lib/dmeventd"
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: global {
| [ 0:00] ## LVMCONF:     abort_on_internal_errors = 1
| [ 0:00] ## LVMCONF:     cache_check_executable = "/usr/sbin/cache_check"
| [ 0:00] ## LVMCONF:     cache_dump_executable = "/usr/sbin/cache_dump"
| [ 0:00] ## LVMCONF:     cache_repair_executable = "/usr/sbin/cache_repair"
| [ 0:00] ## LVMCONF:     detect_internal_vg_cache_corruption = 1
| [ 0:00] ## LVMCONF:     fallback_to_local_locking = 0
| [ 0:00] ## LVMCONF:     fsadm_executable = "/sources/boot/LVM2.2.02.177/test/lib/fsadm"
| [ 0:00] ## LVMCONF:     library_dir = "@TESTDIR@/lib"
| [ 0:00] ## LVMCONF:     locking_dir = "@TESTDIR@/var/lock/lvm"
| [ 0:00] ## LVMCONF:     locking_type=1
| [ 0:00] ## LVMCONF:     notify_dbus = 0
| [ 0:00] ## LVMCONF:     si_unit_consistency = 1
| [ 0:00] ## LVMCONF:     thin_check_executable = "/usr/sbin/thin_check"
| [ 0:00] ## LVMCONF:     thin_dump_executable = "/usr/sbin/thin_dump"
| [ 0:00] ## LVMCONF:     thin_repair_executable = "/usr/sbin/thin_repair"
| [ 0:00] ## LVMCONF:     use_lvmetad = 0
| [ 0:00] ## LVMCONF:     use_lvmlockd = 0
| [ 0:00] ## LVMCONF:     use_lvmpolld = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: log {
| [ 0:00] ## LVMCONF:     activation = 1
| [ 0:00] ## LVMCONF:     file = "@TESTDIR@/debug.log"
| [ 0:00] ## LVMCONF:     indent = 1
| [ 0:00] ## LVMCONF:     level = 9
| [ 0:00] ## LVMCONF:     overwrite = 1
| [ 0:00] ## LVMCONF:     syslog = 0
| [ 0:00] ## LVMCONF:     verbose = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] <======== Processing test: "lvconvert-mirror-basic-1.sh" ========>
| [ 0:00] 
| [ 0:00] log_name_to_count() {
| [ 0:00] 	case "$1"  in
| [ 0:00] 	mirrored) echo 2 ;;
| [ 0:00] 	disk)	  echo 1 ;;
| [ 0:00] 	*)	  echo 0 ;;
| [ 0:00] 	esac
| [ 0:00] }
| [ 0:00] 
| [ 0:00] # FIXME: For test_[up|down]convert, I'd still like to be able
| [ 0:00] # to specifiy devices - especially if I can do partial PV
| [ 0:00] # specification for down-converts.  It may even be wise to
| [ 0:00] # do one round through these tests without specifying the PVs
| [ 0:00] # to use and one round where we do.
| [ 0:00] 
| [ 0:00] # test_lvconvert
| [ 0:00] #   start_mirror_count:  The '-m' argument to create with
| [ 0:00] #   start_log_type: core|disk|mirrored
| [ 0:00] #   final_mirror_count: The '-m' argument to convert to
| [ 0:00] #   final_log_type: core|disk|mirrored
| [ 0:00] #   active: Whether the LV should be active when the convert happens
| [ 0:00] #
| [ 0:00] # Exmaple: Convert 3-way disk-log mirror to
| [ 0:00] #          2-way disk-log mirror while not active
| [ 0:00] # -> test_lvconvert 2 disk 3 disk 0
| [ 0:00] 
| [ 0:00] test_lvconvert() {
| [ 0:00] 	local start_count=$1
| [ 0:00] 	local start_count_p1=$(( start_count + 1 ))
| [ 0:00] 	local start_log_type=$2
| [ 0:00] 	local finish_count=$3
| [ 0:00] 	local finish_count_p1=$(( finish_count + 1 ))
| [ 0:00] 	local finish_log_type=$4
| [ 0:00] 	local start_log_count
| [ 0:00] 	local finish_log_count
| [ 0:00] 	local max_log_count
| [ 0:00] 	local alloc=""
| [ 0:00] 	local active="-aey"
| [ 0:00] 	local i
| [ 0:00] 
| [ 0:00] 	test "$5" = "active" && active="-an"
| [ 0:00] 	#test $finish_count -gt $start_count && up=true
| [ 0:00] 
| [ 0:00] 	# Do we have enough devices for the mirror images?
| [ 0:00] 	test $start_count_p1 -gt ${#DEVICES[@]} && \
| [ 0:00] 		die "Action requires too many devices"
| [ 0:00] 
| [ 0:00] 	# Do we have enough devices for the mirror images?
| [ 0:00] 	test $finish_count_p1 -gt ${#DEVICES[@]} && \
| [ 0:00] 		die "Action requires too many devices"
| [ 0:00] 
| [ 0:00] 	start_log_count=$(log_name_to_count $start_log_type)
| [ 0:00] 	finish_log_count=$(log_name_to_count $finish_log_type)
| [ 0:00] 	if [ $finish_log_count -gt $start_log_count ]; then
| [ 0:00] 		max_log_count=$finish_log_count
| [ 0:00] 	else
| [ 0:00] 		max_log_count=$start_log_count
| [ 0:00] 	fi
| [ 0:00] 
| [ 0:00] 	if [ $start_count -gt 0 ]; then
| [ 0:00] 		# Are there extra devices for the log or do we overlap
| [ 0:00] 		if [ $(( start_count_p1 + start_log_count )) -gt ${#DEVICES[@]} ]; then
| [ 0:00] 			alloc="--alloc anywhere"
| [ 0:00] 		fi
| [ 0:00] 
| [ 0:00] 		lvcreate "$active" -Zn -l2 --type mirror -m $start_count --mirrorlog $start_log_type \
| [ 0:00] 			-n $lv1 $vg $alloc
| [ 0:00] 		check mirror_legs $vg $lv1 $start_count_p1
| [ 0:00] 		# FIXME: check mirror log
| [ 0:00] 	else
| [ 0:00] 		lvcreate "$active" -Zn -l2 -n $lv1 $vg
| [ 0:00] 	fi
| [ 0:00] 
| [ 0:00] 	lvs -a -o name,copy_percent,devices $vg
| [ 0:00] 
| [ 0:00] 	# Are there extra devices for the log or do we overlap
| [ 0:00] 	if [ $(( finish_count_p1 +  finish_log_count )) -gt ${#DEVICES[@]} ]; then
| [ 0:00] 		alloc="--alloc anywhere"
| [ 0:00] 	fi
| [ 0:00] 
| [ 0:00] 	# --mirrorlog is invalid with -m0
| [ 0:00] 	if [ "$finish_count" -eq 0 ]; then
| [ 0:00] 		mirrorlog=""
| [ 0:00] 		finish_log_type=""
| [ 0:00] 	else
| [ 0:00] 		mirrorlog="--mirrorlog"
| [ 0:00] 	fi
| [ 0:00] 
| [ 0:00] 	lvconvert --type mirror -m $finish_count $mirrorlog $finish_log_type \
| [ 0:00] 		$vg/$lv1 $alloc
| [ 0:00] 
| [ 0:00] 	test "$active" = "-an" || lvchange "$active" $vg/$lv1
| [ 0:00] 
| [ 0:00] 	check mirror_no_temporaries $vg $lv1
| [ 0:00] 	if [ "$finish_count_p1" -eq 1 ]; then
| [ 0:00] 		check linear $vg $lv1
| [ 0:00] 	else
| [ 0:00] 		if test -n "$alloc"; then
| [ 0:00] 			check mirror_nonredundant $vg $lv1
| [ 0:00] 		else
| [ 0:00] 			check mirror $vg $lv1
| [ 0:00] 		fi
| [ 0:00] 		check mirror_legs $vg $lv1 $finish_count_p1
| [ 0:00] 	fi
| [ 0:00] }
| [ 0:00] 
| [ 0:00] aux prepare_vg 5 5
| [ 0:00] ##lvconvert-mirror-basic.sh:125+ aux prepare_vg 5 5
| [ 0:00] ## preparing loop device....ok (/dev/loop0)
| [ 0:00] ## preparing 5 devices...lib/utils: line 212: DM_UDEV_COOKIE: unbound variable
| [ 0:00] set +vx; STACKTRACE; set -vx
| [ 0:00] ###lvconvert-mirror-basic.sh:125+ set +vx
| [ 0:00] ## - /lfskernel/sources/boot/LVM2.2.02.177/test/shell/lvconvert-mirror-basic-1.sh:13
| [ 0:00] ## 1 STACKTRACE() called from ./shell/lvconvert-mirror-basic.sh:125
| [ 0:00] ## 2 source() called from /lfskernel/sources/boot/LVM2.2.02.177/test/shell/lvconvert-mirror-basic-1.sh:13
| [ 0:00] <======== Info ========>
| [ 0:00] ## DMINFO:   Name             Maj Min Stat Open Targ Event  UUID                                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv2  253   3 L--w    0    1      0 TEST-@PREFIX@pv2                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv1  253   7 L--w    0    1      0 TEST-@PREFIX@pv1                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv5  253   6 L--w    0    1      0 TEST-@PREFIX@pv5                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv4  253   5 L--w    0    1      0 TEST-@PREFIX@pv4                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv3  253   4 L--w    0    1      0 TEST-@PREFIX@pv3                                                
| [ 0:00] <======== Active table ========>
| [ 0:00] ## DMTABLE:  @PREFIX@pv2: 0 10240 linear 7:0 12288
| [ 0:00] ## DMTABLE:  @PREFIX@pv1: 0 10240 linear 7:0 2048
| [ 0:00] ## DMTABLE:  @PREFIX@pv5: 0 10240 linear 7:0 43008
| [ 0:00] ## DMTABLE:  @PREFIX@pv4: 0 10240 linear 7:0 32768
| [ 0:00] ## DMTABLE:  @PREFIX@pv3: 0 10240 linear 7:0 22528
| [ 0:00] <======== Inactive table ========>
| [ 0:00] ## DMITABLE: @PREFIX@pv2: 
| [ 0:00] ## DMITABLE: @PREFIX@pv1: 
| [ 0:00] ## DMITABLE: @PREFIX@pv5: 
| [ 0:00] ## DMITABLE: @PREFIX@pv4: 
| [ 0:00] ## DMITABLE: @PREFIX@pv3: 
| [ 0:00] <======== Status ========>
| [ 0:00] ## DMSTATUS: @PREFIX@pv2: 0 10240 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv1: 0 10240 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv5: 0 10240 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv4: 0 10240 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv3: 0 10240 linear 
| [ 0:00] <======== Tree ========>
| [ 0:00] ## DMTREE:   @PREFIX@pv2 (253:3)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   @PREFIX@pv1 (253:7)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   @PREFIX@pv5 (253:6)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   @PREFIX@pv4 (253:5)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   LFS_vg-lfs (253:2)
| [ 0:00] ## DMTREE:    `- (8:16)
| [ 0:00] ## DMTREE:   centos-swap (253:1)
| [ 0:00] ## DMTREE:    `- (8:2)
| [ 0:00] ## DMTREE:   centos-root (253:0)
| [ 0:00] ## DMTREE:    `- (8:2)
| [ 0:00] ## DMTREE:   @PREFIX@pv3 (253:4)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] <======== Recursive list of @TESTDIR@/dev ========>
| [ 0:00] ## LSLR:	@TESTDIR@/dev:
| [ 0:00] ## LSLR:	total 4
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 0 Feb 21 02:26 loop0
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 1 Feb 21 02:26 loop1
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 2 Feb 21 02:26 loop2
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 3 Feb 21 02:26 loop3
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 4 Feb 21 02:26 loop4
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 5 Feb 21 02:26 loop5
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 6 Feb 21 02:26 loop6
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 7 Feb 21 02:26 loop7
| [ 0:00] ## LSLR:	drwxr-xr-x 2 root root 4096 Feb 21 02:26 mapper
| [ 0:00] ## LSLR:	crw-r--r-- 1 root root 1, 3 Feb 21 02:26 testnull
| [ 0:00] ## LSLR:	
| [ 0:00] ## LSLR:	@TESTDIR@/dev/mapper:
| [ 0:00] ## LSLR:	total 0
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   7 Feb 21 02:26 @PREFIX@pv1
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   3 Feb 21 02:26 @PREFIX@pv2
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   4 Feb 21 02:26 @PREFIX@pv3
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   5 Feb 21 02:26 @PREFIX@pv4
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   6 Feb 21 02:26 @PREFIX@pv5
| [ 0:00] ## LSLR:	crw------- 1 root root  10, 236 Feb 21 02:26 control
| [ 0:00] <======== Udev DB content ========>
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-0
| [ 0:00] ## UDEV:	N: dm-0
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-0
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-0
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=0
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-1
| [ 0:00] ## UDEV:	N: dm-1
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-1
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-1
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=1
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-2
| [ 0:00] ## UDEV:	N: dm-2
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-2
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-2
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=2
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-3
| [ 0:00] ## UDEV:	N: dm-3
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-3
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-3
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=3
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-4
| [ 0:00] ## UDEV:	N: dm-4
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-4
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-4
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=4
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-5
| [ 0:00] ## UDEV:	N: dm-5
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-5
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-5
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=5
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-6
| [ 0:00] ## UDEV:	N: dm-6
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-6
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-6
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=6
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-7
| [ 0:00] ## UDEV:	N: dm-7
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-7
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-7
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=7
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/loop0
| [ 0:00] ## UDEV:	N: loop0
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/loop0
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/loop0
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=7
| [ 0:00] ## UDEV:	E: MINOR=0
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] <======== Script file "lvconvert-mirror-basic-1.sh" ========>
| [ 0:00] ## Line: 1 	 #!/usr/bin/env bash
| [ 0:00] ## Line: 2 	 
| [ 0:00] ## Line: 3 	 # Copyright (C) 2010 Red Hat, Inc. All rights reserved.
| [ 0:00] ## Line: 4 	 #
| [ 0:00] ## Line: 5 	 # This copyrighted material is made available to anyone wishing to use,
| [ 0:00] ## Line: 6 	 # modify, copy, or redistribute it subject to the terms and conditions
| [ 0:00] ## Line: 7 	 # of the GNU General Public License v.2.
| [ 0:00] ## Line: 8 	 #
| [ 0:00] ## Line: 9 	 # You should have received a copy of the GNU General Public License
| [ 0:00] ## Line: 10 	 # along with this program; if not, write to the Free Software Foundation,
| [ 0:00] ## Line: 11 	 # Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA
| [ 0:00] ## Line: 12 	 
| [ 0:00] ## Line: 13 	 . ./shell/lvconvert-mirror-basic.sh
| [ 0:00] ## Line: 14 	 
| [ 0:00] ## Line: 15 	 test_many 1
| [ 0:00] ## Line: 16 	 
| [ 0:00] ## Line: 17 	 vgremove -ff $vg
| [ 0:00] aux teardown
| [ 0:00] #lvconvert-mirror-basic.sh:1+ aux teardown
| [ 0:00] ## teardown.........ok
###       failed: [ndev-vanilla] shell/lvconvert-mirror-basic-1.sh

| [ 0:00] Library version:   1.02.146 (2017-12-18)
| [ 0:00] Driver version:    4.35.0
| [ 0:00] Kernel is Linux localhost.localdomain 3.10.0-693.11.1.el7.x86_64 #1 SMP Mon Dec 4 23:52:40 UTC 2017 x86_64 GNU/Linux
| [ 0:00] Selinux mode is not installed.
| [ 0:00]               total        used        free      shared  buff/cache   available
| [ 0:00] Mem:           7822        1073        4156          10        2592        6442
| [ 0:00] Swap:          4095           0        4095
| [ 0:00] Filesystem      Size  Used Avail Use% Mounted on
| [ 0:00] /dev/sdc1        18G  8.4G  8.4G  50% /
| [ 0:00] /dev/sdd1        51G  6.1G   43G  13% /lfskernel
| [ 0:00] devtmpfs        3.9G     0  3.9G   0% /dev
| [ 0:00] tmpfs           3.9G     0  3.9G   0% /run
| [ 0:00] @TESTDIR=/tmp/LVMTEST30428.tLgBiUzcQy
| [ 0:00] @PREFIX=LVMTEST30428
| [ 0:00] ## LVMCONF: activation {
| [ 0:00] ## LVMCONF:     checks = 1
| [ 0:00] ## LVMCONF:     monitoring = 0
| [ 0:00] ## LVMCONF:     polling_interval = 1
| [ 0:00] ## LVMCONF:     raid_region_size = 512
| [ 0:00] ## LVMCONF:     retry_deactivation = 1
| [ 0:00] ## LVMCONF:     snapshot_autoextend_percent = 50
| [ 0:00] ## LVMCONF:     snapshot_autoextend_threshold = 50
| [ 0:00] ## LVMCONF:     udev_rules = 1
| [ 0:00] ## LVMCONF:     udev_sync = 1
| [ 0:00] ## LVMCONF:     verify_udev_operations = 1
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: allocation {
| [ 0:00] ## LVMCONF:     wipe_signatures_when_zeroing_new_lvs = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: backup {
| [ 0:00] ## LVMCONF:     archive = 0
| [ 0:00] ## LVMCONF:     backup = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: devices {
| [ 0:00] ## LVMCONF:     cache_dir = "@TESTDIR@/etc"
| [ 0:00] ## LVMCONF:     default_data_alignment = 1
| [ 0:00] ## LVMCONF:     dir = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     filter = "a|.*|"
| [ 0:00] ## LVMCONF:     global_filter = [ "a|@TESTDIR@/dev/mapper/@PREFIX@.*pv[0-9_]*$|", "r|.*|" ]
| [ 0:00] ## LVMCONF:     md_component_detection  = 0
| [ 0:00] ## LVMCONF:     scan = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     sysfs_scan = 1
| [ 0:00] ## LVMCONF:     write_cache_state = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: dmeventd {
| [ 0:00] ## LVMCONF:     executable = "/sources/boot/LVM2.2.02.177/test/lib/dmeventd"
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: global {
| [ 0:00] ## LVMCONF:     abort_on_internal_errors = 1
| [ 0:00] ## LVMCONF:     cache_check_executable = "/usr/sbin/cache_check"
| [ 0:00] ## LVMCONF:     cache_dump_executable = "/usr/sbin/cache_dump"
| [ 0:00] ## LVMCONF:     cache_repair_executable = "/usr/sbin/cache_repair"
| [ 0:00] ## LVMCONF:     detect_internal_vg_cache_corruption = 1
| [ 0:00] ## LVMCONF:     fallback_to_local_locking = 0
| [ 0:00] ## LVMCONF:     fsadm_executable = "/sources/boot/LVM2.2.02.177/test/lib/fsadm"
| [ 0:00] ## LVMCONF:     library_dir = "@TESTDIR@/lib"
| [ 0:00] ## LVMCONF:     locking_dir = "@TESTDIR@/var/lock/lvm"
| [ 0:00] ## LVMCONF:     locking_type=1
| [ 0:00] ## LVMCONF:     notify_dbus = 0
| [ 0:00] ## LVMCONF:     si_unit_consistency = 1
| [ 0:00] ## LVMCONF:     thin_check_executable = "/usr/sbin/thin_check"
| [ 0:00] ## LVMCONF:     thin_dump_executable = "/usr/sbin/thin_dump"
| [ 0:00] ## LVMCONF:     thin_repair_executable = "/usr/sbin/thin_repair"
| [ 0:00] ## LVMCONF:     use_lvmetad = 0
| [ 0:00] ## LVMCONF:     use_lvmlockd = 0
| [ 0:00] ## LVMCONF:     use_lvmpolld = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: log {
| [ 0:00] ## LVMCONF:     activation = 1
| [ 0:00] ## LVMCONF:     file = "@TESTDIR@/debug.log"
| [ 0:00] ## LVMCONF:     indent = 1
| [ 0:00] ## LVMCONF:     level = 9
| [ 0:00] ## LVMCONF:     overwrite = 1
| [ 0:00] ## LVMCONF:     syslog = 0
| [ 0:00] ## LVMCONF:     verbose = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] <======== Processing test: "lvconvert-mirror-basic-2.sh" ========>
| [ 0:00] 
| [ 0:00] log_name_to_count() {
| [ 0:00] 	case "$1"  in
| [ 0:00] 	mirrored) echo 2 ;;
| [ 0:00] 	disk)	  echo 1 ;;
| [ 0:00] 	*)	  echo 0 ;;
| [ 0:00] 	esac
| [ 0:00] }
| [ 0:00] 
| [ 0:00] # FIXME: For test_[up|down]convert, I'd still like to be able
| [ 0:00] # to specifiy devices - especially if I can do partial PV
| [ 0:00] # specification for down-converts.  It may even be wise to
| [ 0:00] # do one round through these tests without specifying the PVs
| [ 0:00] # to use and one round where we do.
| [ 0:00] 
| [ 0:00] # test_lvconvert
| [ 0:00] #   start_mirror_count:  The '-m' argument to create with
| [ 0:00] #   start_log_type: core|disk|mirrored
| [ 0:00] #   final_mirror_count: The '-m' argument to convert to
| [ 0:00] #   final_log_type: core|disk|mirrored
| [ 0:00] #   active: Whether the LV should be active when the convert happens
| [ 0:00] #
| [ 0:00] # Exmaple: Convert 3-way disk-log mirror to
| [ 0:00] #          2-way disk-log mirror while not active
| [ 0:00] # -> test_lvconvert 2 disk 3 disk 0
| [ 0:00] 
| [ 0:00] test_lvconvert() {
| [ 0:00] 	local start_count=$1
| [ 0:00] 	local start_count_p1=$(( start_count + 1 ))
| [ 0:00] 	local start_log_type=$2
| [ 0:00] 	local finish_count=$3
| [ 0:00] 	local finish_count_p1=$(( finish_count + 1 ))
| [ 0:00] 	local finish_log_type=$4
| [ 0:00] 	local start_log_count
| [ 0:00] 	local finish_log_count
| [ 0:00] 	local max_log_count
| [ 0:00] 	local alloc=""
| [ 0:00] 	local active="-aey"
| [ 0:00] 	local i
| [ 0:00] 
| [ 0:00] 	test "$5" = "active" && active="-an"
| [ 0:00] 	#test $finish_count -gt $start_count && up=true
| [ 0:00] 
| [ 0:00] 	# Do we have enough devices for the mirror images?
| [ 0:00] 	test $start_count_p1 -gt ${#DEVICES[@]} && \
| [ 0:00] 		die "Action requires too many devices"
| [ 0:00] 
| [ 0:00] 	# Do we have enough devices for the mirror images?
| [ 0:00] 	test $finish_count_p1 -gt ${#DEVICES[@]} && \
| [ 0:00] 		die "Action requires too many devices"
| [ 0:00] 
| [ 0:00] 	start_log_count=$(log_name_to_count $start_log_type)
| [ 0:00] 	finish_log_count=$(log_name_to_count $finish_log_type)
| [ 0:00] 	if [ $finish_log_count -gt $start_log_count ]; then
| [ 0:00] 		max_log_count=$finish_log_count
| [ 0:00] 	else
| [ 0:00] 		max_log_count=$start_log_count
| [ 0:00] 	fi
| [ 0:00] 
| [ 0:00] 	if [ $start_count -gt 0 ]; then
| [ 0:00] 		# Are there extra devices for the log or do we overlap
| [ 0:00] 		if [ $(( start_count_p1 + start_log_count )) -gt ${#DEVICES[@]} ]; then
| [ 0:00] 			alloc="--alloc anywhere"
| [ 0:00] 		fi
| [ 0:00] 
| [ 0:00] 		lvcreate "$active" -Zn -l2 --type mirror -m $start_count --mirrorlog $start_log_type \
| [ 0:00] 			-n $lv1 $vg $alloc
| [ 0:00] 		check mirror_legs $vg $lv1 $start_count_p1
| [ 0:00] 		# FIXME: check mirror log
| [ 0:00] 	else
| [ 0:00] 		lvcreate "$active" -Zn -l2 -n $lv1 $vg
| [ 0:00] 	fi
| [ 0:00] 
| [ 0:00] 	lvs -a -o name,copy_percent,devices $vg
| [ 0:00] 
| [ 0:00] 	# Are there extra devices for the log or do we overlap
| [ 0:00] 	if [ $(( finish_count_p1 +  finish_log_count )) -gt ${#DEVICES[@]} ]; then
| [ 0:00] 		alloc="--alloc anywhere"
| [ 0:00] 	fi
| [ 0:00] 
| [ 0:00] 	# --mirrorlog is invalid with -m0
| [ 0:00] 	if [ "$finish_count" -eq 0 ]; then
| [ 0:00] 		mirrorlog=""
| [ 0:00] 		finish_log_type=""
| [ 0:00] 	else
| [ 0:00] 		mirrorlog="--mirrorlog"
| [ 0:00] 	fi
| [ 0:00] 
| [ 0:00] 	lvconvert --type mirror -m $finish_count $mirrorlog $finish_log_type \
| [ 0:00] 		$vg/$lv1 $alloc
| [ 0:00] 
| [ 0:00] 	test "$active" = "-an" || lvchange "$active" $vg/$lv1
| [ 0:00] 
| [ 0:00] 	check mirror_no_temporaries $vg $lv1
| [ 0:00] 	if [ "$finish_count_p1" -eq 1 ]; then
| [ 0:00] 		check linear $vg $lv1
| [ 0:00] 	else
| [ 0:00] 		if test -n "$alloc"; then
| [ 0:00] 			check mirror_nonredundant $vg $lv1
| [ 0:00] 		else
| [ 0:00] 			check mirror $vg $lv1
| [ 0:00] 		fi
| [ 0:00] 		check mirror_legs $vg $lv1 $finish_count_p1
| [ 0:00] 	fi
| [ 0:00] }
| [ 0:00] 
| [ 0:00] aux prepare_vg 5 5
| [ 0:00] ##lvconvert-mirror-basic.sh:125+ aux prepare_vg 5 5
| [ 0:00] ## preparing loop device....ok (/dev/loop0)
| [ 0:00] ## preparing 5 devices...lib/utils: line 212: DM_UDEV_COOKIE: unbound variable
| [ 0:00] set +vx; STACKTRACE; set -vx
| [ 0:00] ###lvconvert-mirror-basic.sh:125+ set +vx
| [ 0:00] ## - /lfskernel/sources/boot/LVM2.2.02.177/test/shell/lvconvert-mirror-basic-2.sh:13
| [ 0:00] ## 1 STACKTRACE() called from ./shell/lvconvert-mirror-basic.sh:125
| [ 0:00] ## 2 source() called from /lfskernel/sources/boot/LVM2.2.02.177/test/shell/lvconvert-mirror-basic-2.sh:13
| [ 0:00] <======== Info ========>
| [ 0:00] ## DMINFO:   Name             Maj Min Stat Open Targ Event  UUID                                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv5  253   5 L--w    0    1      0 TEST-@PREFIX@pv5                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv4  253   4 L--w    0    1      0 TEST-@PREFIX@pv4                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv3  253   3 L--w    0    1      0 TEST-@PREFIX@pv3                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv2  253   7 L--w    0    1      0 TEST-@PREFIX@pv2                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv1  253   6 L--w    0    1      0 TEST-@PREFIX@pv1                                                
| [ 0:00] <======== Active table ========>
| [ 0:00] ## DMTABLE:  @PREFIX@pv5: 0 10240 linear 7:0 43008
| [ 0:00] ## DMTABLE:  @PREFIX@pv4: 0 10240 linear 7:0 32768
| [ 0:00] ## DMTABLE:  @PREFIX@pv3: 0 10240 linear 7:0 22528
| [ 0:00] ## DMTABLE:  @PREFIX@pv2: 0 10240 linear 7:0 12288
| [ 0:00] ## DMTABLE:  @PREFIX@pv1: 0 10240 linear 7:0 2048
| [ 0:00] <======== Inactive table ========>
| [ 0:00] ## DMITABLE: @PREFIX@pv5: 
| [ 0:00] ## DMITABLE: @PREFIX@pv4: 
| [ 0:00] ## DMITABLE: @PREFIX@pv3: 
| [ 0:00] ## DMITABLE: @PREFIX@pv2: 
| [ 0:00] ## DMITABLE: @PREFIX@pv1: 
| [ 0:00] <======== Status ========>
| [ 0:00] ## DMSTATUS: @PREFIX@pv5: 0 10240 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv4: 0 10240 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv3: 0 10240 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv2: 0 10240 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv1: 0 10240 linear 
| [ 0:00] <======== Tree ========>
| [ 0:00] ## DMTREE:   @PREFIX@pv5 (253:5)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   @PREFIX@pv4 (253:4)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   @PREFIX@pv3 (253:3)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   @PREFIX@pv2 (253:7)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   @PREFIX@pv1 (253:6)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   LFS_vg-lfs (253:2)
| [ 0:00] ## DMTREE:    `- (8:16)
| [ 0:00] ## DMTREE:   centos-swap (253:1)
| [ 0:00] ## DMTREE:    `- (8:2)
| [ 0:00] ## DMTREE:   centos-root (253:0)
| [ 0:00] ## DMTREE:    `- (8:2)
| [ 0:00] <======== Recursive list of @TESTDIR@/dev ========>
| [ 0:00] ## LSLR:	@TESTDIR@/dev:
| [ 0:00] ## LSLR:	total 4
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 0 Feb 21 02:26 loop0
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 1 Feb 21 02:26 loop1
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 2 Feb 21 02:26 loop2
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 3 Feb 21 02:26 loop3
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 4 Feb 21 02:26 loop4
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 5 Feb 21 02:26 loop5
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 6 Feb 21 02:26 loop6
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 7 Feb 21 02:26 loop7
| [ 0:00] ## LSLR:	drwxr-xr-x 2 root root 4096 Feb 21 02:26 mapper
| [ 0:00] ## LSLR:	crw-r--r-- 1 root root 1, 3 Feb 21 02:26 testnull
| [ 0:00] ## LSLR:	
| [ 0:00] ## LSLR:	@TESTDIR@/dev/mapper:
| [ 0:00] ## LSLR:	total 0
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   6 Feb 21 02:26 @PREFIX@pv1
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   7 Feb 21 02:26 @PREFIX@pv2
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   3 Feb 21 02:26 @PREFIX@pv3
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   4 Feb 21 02:26 @PREFIX@pv4
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   5 Feb 21 02:26 @PREFIX@pv5
| [ 0:00] ## LSLR:	crw------- 1 root root  10, 236 Feb 21 02:26 control
| [ 0:00] <======== Udev DB content ========>
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-0
| [ 0:00] ## UDEV:	N: dm-0
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-0
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-0
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=0
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-1
| [ 0:00] ## UDEV:	N: dm-1
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-1
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-1
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=1
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-2
| [ 0:00] ## UDEV:	N: dm-2
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-2
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-2
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=2
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-3
| [ 0:00] ## UDEV:	N: dm-3
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-3
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-3
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=3
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-4
| [ 0:00] ## UDEV:	N: dm-4
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-4
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-4
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=4
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-5
| [ 0:00] ## UDEV:	N: dm-5
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-5
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-5
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=5
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-6
| [ 0:00] ## UDEV:	N: dm-6
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-6
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-6
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=6
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-7
| [ 0:00] ## UDEV:	N: dm-7
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-7
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-7
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=7
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/loop0
| [ 0:00] ## UDEV:	N: loop0
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/loop0
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/loop0
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=7
| [ 0:00] ## UDEV:	E: MINOR=0
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] <======== Script file "lvconvert-mirror-basic-2.sh" ========>
| [ 0:00] ## Line: 1 	 #!/usr/bin/env bash
| [ 0:00] ## Line: 2 	 
| [ 0:00] ## Line: 3 	 # Copyright (C) 2010 Red Hat, Inc. All rights reserved.
| [ 0:00] ## Line: 4 	 #
| [ 0:00] ## Line: 5 	 # This copyrighted material is made available to anyone wishing to use,
| [ 0:00] ## Line: 6 	 # modify, copy, or redistribute it subject to the terms and conditions
| [ 0:00] ## Line: 7 	 # of the GNU General Public License v.2.
| [ 0:00] ## Line: 8 	 #
| [ 0:00] ## Line: 9 	 # You should have received a copy of the GNU General Public License
| [ 0:00] ## Line: 10 	 # along with this program; if not, write to the Free Software Foundation,
| [ 0:00] ## Line: 11 	 # Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA
| [ 0:00] ## Line: 12 	 
| [ 0:00] ## Line: 13 	 . ./shell/lvconvert-mirror-basic.sh
| [ 0:00] ## Line: 14 	 
| [ 0:00] ## Line: 15 	 test_many 2
| [ 0:00] ## Line: 16 	 
| [ 0:00] ## Line: 17 	 vgremove -ff $vg
| [ 0:00] aux teardown
| [ 0:00] #lvconvert-mirror-basic.sh:1+ aux teardown
| [ 0:00] ## teardown.........ok
###       failed: [ndev-vanilla] shell/lvconvert-mirror-basic-2.sh

| [ 0:00] Library version:   1.02.146 (2017-12-18)
| [ 0:00] Driver version:    4.35.0
| [ 0:00] Kernel is Linux localhost.localdomain 3.10.0-693.11.1.el7.x86_64 #1 SMP Mon Dec 4 23:52:40 UTC 2017 x86_64 GNU/Linux
| [ 0:00] Selinux mode is not installed.
| [ 0:00]               total        used        free      shared  buff/cache   available
| [ 0:00] Mem:           7822        1073        4156          10        2592        6442
| [ 0:00] Swap:          4095           0        4095
| [ 0:00] Filesystem      Size  Used Avail Use% Mounted on
| [ 0:00] /dev/sdc1        18G  8.4G  8.4G  50% /
| [ 0:00] /dev/sdd1        51G  6.1G   43G  13% /lfskernel
| [ 0:00] devtmpfs        3.9G     0  3.9G   0% /dev
| [ 0:00] tmpfs           3.9G     0  3.9G   0% /run
| [ 0:00] @TESTDIR=/tmp/LVMTEST30642.BrEK6e6gb4
| [ 0:00] @PREFIX=LVMTEST30642
| [ 0:00] ## LVMCONF: activation {
| [ 0:00] ## LVMCONF:     checks = 1
| [ 0:00] ## LVMCONF:     monitoring = 0
| [ 0:00] ## LVMCONF:     polling_interval = 1
| [ 0:00] ## LVMCONF:     raid_region_size = 512
| [ 0:00] ## LVMCONF:     retry_deactivation = 1
| [ 0:00] ## LVMCONF:     snapshot_autoextend_percent = 50
| [ 0:00] ## LVMCONF:     snapshot_autoextend_threshold = 50
| [ 0:00] ## LVMCONF:     udev_rules = 1
| [ 0:00] ## LVMCONF:     udev_sync = 1
| [ 0:00] ## LVMCONF:     verify_udev_operations = 1
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: allocation {
| [ 0:00] ## LVMCONF:     wipe_signatures_when_zeroing_new_lvs = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: backup {
| [ 0:00] ## LVMCONF:     archive = 0
| [ 0:00] ## LVMCONF:     backup = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: devices {
| [ 0:00] ## LVMCONF:     cache_dir = "@TESTDIR@/etc"
| [ 0:00] ## LVMCONF:     default_data_alignment = 1
| [ 0:00] ## LVMCONF:     dir = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     filter = "a|.*|"
| [ 0:00] ## LVMCONF:     global_filter = [ "a|@TESTDIR@/dev/mapper/@PREFIX@.*pv[0-9_]*$|", "r|.*|" ]
| [ 0:00] ## LVMCONF:     md_component_detection  = 0
| [ 0:00] ## LVMCONF:     scan = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     sysfs_scan = 1
| [ 0:00] ## LVMCONF:     write_cache_state = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: dmeventd {
| [ 0:00] ## LVMCONF:     executable = "/sources/boot/LVM2.2.02.177/test/lib/dmeventd"
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: global {
| [ 0:00] ## LVMCONF:     abort_on_internal_errors = 1
| [ 0:00] ## LVMCONF:     cache_check_executable = "/usr/sbin/cache_check"
| [ 0:00] ## LVMCONF:     cache_dump_executable = "/usr/sbin/cache_dump"
| [ 0:00] ## LVMCONF:     cache_repair_executable = "/usr/sbin/cache_repair"
| [ 0:00] ## LVMCONF:     detect_internal_vg_cache_corruption = 1
| [ 0:00] ## LVMCONF:     fallback_to_local_locking = 0
| [ 0:00] ## LVMCONF:     fsadm_executable = "/sources/boot/LVM2.2.02.177/test/lib/fsadm"
| [ 0:00] ## LVMCONF:     library_dir = "@TESTDIR@/lib"
| [ 0:00] ## LVMCONF:     locking_dir = "@TESTDIR@/var/lock/lvm"
| [ 0:00] ## LVMCONF:     locking_type=1
| [ 0:00] ## LVMCONF:     notify_dbus = 0
| [ 0:00] ## LVMCONF:     si_unit_consistency = 1
| [ 0:00] ## LVMCONF:     thin_check_executable = "/usr/sbin/thin_check"
| [ 0:00] ## LVMCONF:     thin_dump_executable = "/usr/sbin/thin_dump"
| [ 0:00] ## LVMCONF:     thin_repair_executable = "/usr/sbin/thin_repair"
| [ 0:00] ## LVMCONF:     use_lvmetad = 0
| [ 0:00] ## LVMCONF:     use_lvmlockd = 0
| [ 0:00] ## LVMCONF:     use_lvmpolld = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: log {
| [ 0:00] ## LVMCONF:     activation = 1
| [ 0:00] ## LVMCONF:     file = "@TESTDIR@/debug.log"
| [ 0:00] ## LVMCONF:     indent = 1
| [ 0:00] ## LVMCONF:     level = 9
| [ 0:00] ## LVMCONF:     overwrite = 1
| [ 0:00] ## LVMCONF:     syslog = 0
| [ 0:00] ## LVMCONF:     verbose = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] <======== Processing test: "lvconvert-mirror-basic-3.sh" ========>
| [ 0:00] 
| [ 0:00] log_name_to_count() {
| [ 0:00] 	case "$1"  in
| [ 0:00] 	mirrored) echo 2 ;;
| [ 0:00] 	disk)	  echo 1 ;;
| [ 0:00] 	*)	  echo 0 ;;
| [ 0:00] 	esac
| [ 0:00] }
| [ 0:00] 
| [ 0:00] # FIXME: For test_[up|down]convert, I'd still like to be able
| [ 0:00] # to specifiy devices - especially if I can do partial PV
| [ 0:00] # specification for down-converts.  It may even be wise to
| [ 0:00] # do one round through these tests without specifying the PVs
| [ 0:00] # to use and one round where we do.
| [ 0:00] 
| [ 0:00] # test_lvconvert
| [ 0:00] #   start_mirror_count:  The '-m' argument to create with
| [ 0:00] #   start_log_type: core|disk|mirrored
| [ 0:00] #   final_mirror_count: The '-m' argument to convert to
| [ 0:00] #   final_log_type: core|disk|mirrored
| [ 0:00] #   active: Whether the LV should be active when the convert happens
| [ 0:00] #
| [ 0:00] # Exmaple: Convert 3-way disk-log mirror to
| [ 0:00] #          2-way disk-log mirror while not active
| [ 0:00] # -> test_lvconvert 2 disk 3 disk 0
| [ 0:00] 
| [ 0:00] test_lvconvert() {
| [ 0:00] 	local start_count=$1
| [ 0:00] 	local start_count_p1=$(( start_count + 1 ))
| [ 0:00] 	local start_log_type=$2
| [ 0:00] 	local finish_count=$3
| [ 0:00] 	local finish_count_p1=$(( finish_count + 1 ))
| [ 0:00] 	local finish_log_type=$4
| [ 0:00] 	local start_log_count
| [ 0:00] 	local finish_log_count
| [ 0:00] 	local max_log_count
| [ 0:00] 	local alloc=""
| [ 0:00] 	local active="-aey"
| [ 0:00] 	local i
| [ 0:00] 
| [ 0:00] 	test "$5" = "active" && active="-an"
| [ 0:00] 	#test $finish_count -gt $start_count && up=true
| [ 0:00] 
| [ 0:00] 	# Do we have enough devices for the mirror images?
| [ 0:00] 	test $start_count_p1 -gt ${#DEVICES[@]} && \
| [ 0:00] 		die "Action requires too many devices"
| [ 0:00] 
| [ 0:00] 	# Do we have enough devices for the mirror images?
| [ 0:00] 	test $finish_count_p1 -gt ${#DEVICES[@]} && \
| [ 0:00] 		die "Action requires too many devices"
| [ 0:00] 
| [ 0:00] 	start_log_count=$(log_name_to_count $start_log_type)
| [ 0:00] 	finish_log_count=$(log_name_to_count $finish_log_type)
| [ 0:00] 	if [ $finish_log_count -gt $start_log_count ]; then
| [ 0:00] 		max_log_count=$finish_log_count
| [ 0:00] 	else
| [ 0:00] 		max_log_count=$start_log_count
| [ 0:00] 	fi
| [ 0:00] 
| [ 0:00] 	if [ $start_count -gt 0 ]; then
| [ 0:00] 		# Are there extra devices for the log or do we overlap
| [ 0:00] 		if [ $(( start_count_p1 + start_log_count )) -gt ${#DEVICES[@]} ]; then
| [ 0:00] 			alloc="--alloc anywhere"
| [ 0:00] 		fi
| [ 0:00] 
| [ 0:00] 		lvcreate "$active" -Zn -l2 --type mirror -m $start_count --mirrorlog $start_log_type \
| [ 0:00] 			-n $lv1 $vg $alloc
| [ 0:00] 		check mirror_legs $vg $lv1 $start_count_p1
| [ 0:00] 		# FIXME: check mirror log
| [ 0:00] 	else
| [ 0:00] 		lvcreate "$active" -Zn -l2 -n $lv1 $vg
| [ 0:00] 	fi
| [ 0:00] 
| [ 0:00] 	lvs -a -o name,copy_percent,devices $vg
| [ 0:00] 
| [ 0:00] 	# Are there extra devices for the log or do we overlap
| [ 0:00] 	if [ $(( finish_count_p1 +  finish_log_count )) -gt ${#DEVICES[@]} ]; then
| [ 0:00] 		alloc="--alloc anywhere"
| [ 0:00] 	fi
| [ 0:00] 
| [ 0:00] 	# --mirrorlog is invalid with -m0
| [ 0:00] 	if [ "$finish_count" -eq 0 ]; then
| [ 0:00] 		mirrorlog=""
| [ 0:00] 		finish_log_type=""
| [ 0:00] 	else
| [ 0:00] 		mirrorlog="--mirrorlog"
| [ 0:00] 	fi
| [ 0:00] 
| [ 0:00] 	lvconvert --type mirror -m $finish_count $mirrorlog $finish_log_type \
| [ 0:00] 		$vg/$lv1 $alloc
| [ 0:00] 
| [ 0:00] 	test "$active" = "-an" || lvchange "$active" $vg/$lv1
| [ 0:00] 
| [ 0:00] 	check mirror_no_temporaries $vg $lv1
| [ 0:00] 	if [ "$finish_count_p1" -eq 1 ]; then
| [ 0:00] 		check linear $vg $lv1
| [ 0:00] 	else
| [ 0:00] 		if test -n "$alloc"; then
| [ 0:00] 			check mirror_nonredundant $vg $lv1
| [ 0:00] 		else
| [ 0:00] 			check mirror $vg $lv1
| [ 0:00] 		fi
| [ 0:00] 		check mirror_legs $vg $lv1 $finish_count_p1
| [ 0:00] 	fi
| [ 0:00] }
| [ 0:00] 
| [ 0:00] aux prepare_vg 5 5
| [ 0:00] ##lvconvert-mirror-basic.sh:125+ aux prepare_vg 5 5
| [ 0:00] ## preparing loop device....ok (/dev/loop0)
| [ 0:00] ## preparing 5 devices...lib/utils: line 212: DM_UDEV_COOKIE: unbound variable
| [ 0:00] set +vx; STACKTRACE; set -vx
| [ 0:00] ###lvconvert-mirror-basic.sh:125+ set +vx
| [ 0:00] ## - /lfskernel/sources/boot/LVM2.2.02.177/test/shell/lvconvert-mirror-basic-3.sh:13
| [ 0:00] ## 1 STACKTRACE() called from ./shell/lvconvert-mirror-basic.sh:125
| [ 0:00] ## 2 source() called from /lfskernel/sources/boot/LVM2.2.02.177/test/shell/lvconvert-mirror-basic-3.sh:13
| [ 0:00] <======== Info ========>
| [ 0:00] ## DMINFO:   Name             Maj Min Stat Open Targ Event  UUID                                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv5  253   4 L--w    0    1      0 TEST-@PREFIX@pv5                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv4  253   6 L--w    0    1      0 TEST-@PREFIX@pv4                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv3  253   5 L--w    0    1      0 TEST-@PREFIX@pv3                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv2  253   3 L--w    0    1      0 TEST-@PREFIX@pv2                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv1  253   7 L--w    0    1      0 TEST-@PREFIX@pv1                                                
| [ 0:00] <======== Active table ========>
| [ 0:00] ## DMTABLE:  @PREFIX@pv5: 0 10240 linear 7:0 43008
| [ 0:00] ## DMTABLE:  @PREFIX@pv4: 0 10240 linear 7:0 32768
| [ 0:00] ## DMTABLE:  @PREFIX@pv3: 0 10240 linear 7:0 22528
| [ 0:00] ## DMTABLE:  @PREFIX@pv2: 0 10240 linear 7:0 12288
| [ 0:00] ## DMTABLE:  @PREFIX@pv1: 0 10240 linear 7:0 2048
| [ 0:00] <======== Inactive table ========>
| [ 0:00] ## DMITABLE: @PREFIX@pv5: 
| [ 0:00] ## DMITABLE: @PREFIX@pv4: 
| [ 0:00] ## DMITABLE: @PREFIX@pv3: 
| [ 0:00] ## DMITABLE: @PREFIX@pv2: 
| [ 0:00] ## DMITABLE: @PREFIX@pv1: 
| [ 0:00] <======== Status ========>
| [ 0:00] ## DMSTATUS: @PREFIX@pv5: 0 10240 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv4: 0 10240 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv3: 0 10240 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv2: 0 10240 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv1: 0 10240 linear 
| [ 0:00] <======== Tree ========>
| [ 0:00] ## DMTREE:   @PREFIX@pv5 (253:4)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   @PREFIX@pv4 (253:6)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   @PREFIX@pv3 (253:5)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   @PREFIX@pv2 (253:3)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   @PREFIX@pv1 (253:7)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   LFS_vg-lfs (253:2)
| [ 0:00] ## DMTREE:    `- (8:16)
| [ 0:00] ## DMTREE:   centos-swap (253:1)
| [ 0:00] ## DMTREE:    `- (8:2)
| [ 0:00] ## DMTREE:   centos-root (253:0)
| [ 0:00] ## DMTREE:    `- (8:2)
| [ 0:00] <======== Recursive list of @TESTDIR@/dev ========>
| [ 0:00] ## LSLR:	@TESTDIR@/dev:
| [ 0:00] ## LSLR:	total 4
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 0 Feb 21 02:26 loop0
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 1 Feb 21 02:26 loop1
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 2 Feb 21 02:26 loop2
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 3 Feb 21 02:26 loop3
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 4 Feb 21 02:26 loop4
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 5 Feb 21 02:26 loop5
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 6 Feb 21 02:26 loop6
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 7 Feb 21 02:26 loop7
| [ 0:00] ## LSLR:	drwxr-xr-x 2 root root 4096 Feb 21 02:26 mapper
| [ 0:00] ## LSLR:	crw-r--r-- 1 root root 1, 3 Feb 21 02:26 testnull
| [ 0:00] ## LSLR:	
| [ 0:00] ## LSLR:	@TESTDIR@/dev/mapper:
| [ 0:00] ## LSLR:	total 0
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   7 Feb 21 02:26 @PREFIX@pv1
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   3 Feb 21 02:26 @PREFIX@pv2
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   5 Feb 21 02:26 @PREFIX@pv3
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   6 Feb 21 02:26 @PREFIX@pv4
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   4 Feb 21 02:26 @PREFIX@pv5
| [ 0:00] ## LSLR:	crw------- 1 root root  10, 236 Feb 21 02:26 control
| [ 0:00] <======== Udev DB content ========>
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-0
| [ 0:00] ## UDEV:	N: dm-0
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-0
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-0
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=0
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-1
| [ 0:00] ## UDEV:	N: dm-1
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-1
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-1
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=1
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-2
| [ 0:00] ## UDEV:	N: dm-2
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-2
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-2
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=2
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-3
| [ 0:00] ## UDEV:	N: dm-3
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-3
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-3
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=3
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-4
| [ 0:00] ## UDEV:	N: dm-4
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-4
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-4
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=4
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-5
| [ 0:00] ## UDEV:	N: dm-5
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-5
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-5
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=5
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-6
| [ 0:00] ## UDEV:	N: dm-6
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-6
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-6
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=6
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-7
| [ 0:00] ## UDEV:	N: dm-7
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-7
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-7
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=7
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/loop0
| [ 0:00] ## UDEV:	N: loop0
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/loop0
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/loop0
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=7
| [ 0:00] ## UDEV:	E: MINOR=0
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] <======== Script file "lvconvert-mirror-basic-3.sh" ========>
| [ 0:00] ## Line: 1 	 #!/usr/bin/env bash
| [ 0:00] ## Line: 2 	 
| [ 0:00] ## Line: 3 	 # Copyright (C) 2010 Red Hat, Inc. All rights reserved.
| [ 0:00] ## Line: 4 	 #
| [ 0:00] ## Line: 5 	 # This copyrighted material is made available to anyone wishing to use,
| [ 0:00] ## Line: 6 	 # modify, copy, or redistribute it subject to the terms and conditions
| [ 0:00] ## Line: 7 	 # of the GNU General Public License v.2.
| [ 0:00] ## Line: 8 	 #
| [ 0:00] ## Line: 9 	 # You should have received a copy of the GNU General Public License
| [ 0:00] ## Line: 10 	 # along with this program; if not, write to the Free Software Foundation,
| [ 0:00] ## Line: 11 	 # Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA
| [ 0:00] ## Line: 12 	 
| [ 0:00] ## Line: 13 	 . ./shell/lvconvert-mirror-basic.sh
| [ 0:00] ## Line: 14 	 
| [ 0:00] ## Line: 15 	 test_many 3
| [ 0:00] ## Line: 16 	 
| [ 0:00] ## Line: 17 	 vgremove -ff $vg
| [ 0:00] aux teardown
| [ 0:00] #lvconvert-mirror-basic.sh:1+ aux teardown
| [ 0:00] ## teardown.........ok
###       failed: [ndev-vanilla] shell/lvconvert-mirror-basic-3.sh

| [ 0:00] Library version:   1.02.146 (2017-12-18)
| [ 0:00] Driver version:    4.35.0
| [ 0:00] Kernel is Linux localhost.localdomain 3.10.0-693.11.1.el7.x86_64 #1 SMP Mon Dec 4 23:52:40 UTC 2017 x86_64 GNU/Linux
| [ 0:00] Selinux mode is not installed.
| [ 0:00]               total        used        free      shared  buff/cache   available
| [ 0:00] Mem:           7822        1073        4156          10        2593        6442
| [ 0:00] Swap:          4095           0        4095
| [ 0:00] Filesystem      Size  Used Avail Use% Mounted on
| [ 0:00] /dev/sdc1        18G  8.4G  8.4G  50% /
| [ 0:00] /dev/sdd1        51G  6.1G   43G  13% /lfskernel
| [ 0:00] devtmpfs        3.9G     0  3.9G   0% /dev
| [ 0:00] tmpfs           3.9G     0  3.9G   0% /run
| [ 0:00] @TESTDIR=/tmp/LVMTEST30857.n0ZL99Ggpd
| [ 0:00] @PREFIX=LVMTEST30857
| [ 0:00] ## LVMCONF: activation {
| [ 0:00] ## LVMCONF:     checks = 1
| [ 0:00] ## LVMCONF:     monitoring = 0
| [ 0:00] ## LVMCONF:     polling_interval = 1
| [ 0:00] ## LVMCONF:     raid_region_size = 512
| [ 0:00] ## LVMCONF:     retry_deactivation = 1
| [ 0:00] ## LVMCONF:     snapshot_autoextend_percent = 50
| [ 0:00] ## LVMCONF:     snapshot_autoextend_threshold = 50
| [ 0:00] ## LVMCONF:     udev_rules = 1
| [ 0:00] ## LVMCONF:     udev_sync = 1
| [ 0:00] ## LVMCONF:     verify_udev_operations = 1
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: allocation {
| [ 0:00] ## LVMCONF:     wipe_signatures_when_zeroing_new_lvs = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: backup {
| [ 0:00] ## LVMCONF:     archive = 0
| [ 0:00] ## LVMCONF:     backup = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: devices {
| [ 0:00] ## LVMCONF:     cache_dir = "@TESTDIR@/etc"
| [ 0:00] ## LVMCONF:     default_data_alignment = 1
| [ 0:00] ## LVMCONF:     dir = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     filter = "a|.*|"
| [ 0:00] ## LVMCONF:     global_filter = [ "a|@TESTDIR@/dev/mapper/@PREFIX@.*pv[0-9_]*$|", "r|.*|" ]
| [ 0:00] ## LVMCONF:     md_component_detection  = 0
| [ 0:00] ## LVMCONF:     scan = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     sysfs_scan = 1
| [ 0:00] ## LVMCONF:     write_cache_state = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: dmeventd {
| [ 0:00] ## LVMCONF:     executable = "/sources/boot/LVM2.2.02.177/test/lib/dmeventd"
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: global {
| [ 0:00] ## LVMCONF:     abort_on_internal_errors = 1
| [ 0:00] ## LVMCONF:     cache_check_executable = "/usr/sbin/cache_check"
| [ 0:00] ## LVMCONF:     cache_dump_executable = "/usr/sbin/cache_dump"
| [ 0:00] ## LVMCONF:     cache_repair_executable = "/usr/sbin/cache_repair"
| [ 0:00] ## LVMCONF:     detect_internal_vg_cache_corruption = 1
| [ 0:00] ## LVMCONF:     fallback_to_local_locking = 0
| [ 0:00] ## LVMCONF:     fsadm_executable = "/sources/boot/LVM2.2.02.177/test/lib/fsadm"
| [ 0:00] ## LVMCONF:     library_dir = "@TESTDIR@/lib"
| [ 0:00] ## LVMCONF:     locking_dir = "@TESTDIR@/var/lock/lvm"
| [ 0:00] ## LVMCONF:     locking_type=1
| [ 0:00] ## LVMCONF:     notify_dbus = 0
| [ 0:00] ## LVMCONF:     si_unit_consistency = 1
| [ 0:00] ## LVMCONF:     thin_check_executable = "/usr/sbin/thin_check"
| [ 0:00] ## LVMCONF:     thin_dump_executable = "/usr/sbin/thin_dump"
| [ 0:00] ## LVMCONF:     thin_repair_executable = "/usr/sbin/thin_repair"
| [ 0:00] ## LVMCONF:     use_lvmetad = 0
| [ 0:00] ## LVMCONF:     use_lvmlockd = 0
| [ 0:00] ## LVMCONF:     use_lvmpolld = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: log {
| [ 0:00] ## LVMCONF:     activation = 1
| [ 0:00] ## LVMCONF:     file = "@TESTDIR@/debug.log"
| [ 0:00] ## LVMCONF:     indent = 1
| [ 0:00] ## LVMCONF:     level = 9
| [ 0:00] ## LVMCONF:     overwrite = 1
| [ 0:00] ## LVMCONF:     syslog = 0
| [ 0:00] ## LVMCONF:     verbose = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] <======== Processing test: "lvconvert-mirror-basic.sh" ========>
| [ 0:00] 
| [ 0:00] log_name_to_count() {
| [ 0:00] 	case "$1"  in
| [ 0:00] 	mirrored) echo 2 ;;
| [ 0:00] 	disk)	  echo 1 ;;
| [ 0:00] 	*)	  echo 0 ;;
| [ 0:00] 	esac
| [ 0:00] }
| [ 0:00] 
| [ 0:00] # FIXME: For test_[up|down]convert, I'd still like to be able
| [ 0:00] # to specifiy devices - especially if I can do partial PV
| [ 0:00] # specification for down-converts.  It may even be wise to
| [ 0:00] # do one round through these tests without specifying the PVs
| [ 0:00] # to use and one round where we do.
| [ 0:00] 
| [ 0:00] # test_lvconvert
| [ 0:00] #   start_mirror_count:  The '-m' argument to create with
| [ 0:00] #   start_log_type: core|disk|mirrored
| [ 0:00] #   final_mirror_count: The '-m' argument to convert to
| [ 0:00] #   final_log_type: core|disk|mirrored
| [ 0:00] #   active: Whether the LV should be active when the convert happens
| [ 0:00] #
| [ 0:00] # Exmaple: Convert 3-way disk-log mirror to
| [ 0:00] #          2-way disk-log mirror while not active
| [ 0:00] # -> test_lvconvert 2 disk 3 disk 0
| [ 0:00] 
| [ 0:00] test_lvconvert() {
| [ 0:00] 	local start_count=$1
| [ 0:00] 	local start_count_p1=$(( start_count + 1 ))
| [ 0:00] 	local start_log_type=$2
| [ 0:00] 	local finish_count=$3
| [ 0:00] 	local finish_count_p1=$(( finish_count + 1 ))
| [ 0:00] 	local finish_log_type=$4
| [ 0:00] 	local start_log_count
| [ 0:00] 	local finish_log_count
| [ 0:00] 	local max_log_count
| [ 0:00] 	local alloc=""
| [ 0:00] 	local active="-aey"
| [ 0:00] 	local i
| [ 0:00] 
| [ 0:00] 	test "$5" = "active" && active="-an"
| [ 0:00] 	#test $finish_count -gt $start_count && up=true
| [ 0:00] 
| [ 0:00] 	# Do we have enough devices for the mirror images?
| [ 0:00] 	test $start_count_p1 -gt ${#DEVICES[@]} && \
| [ 0:00] 		die "Action requires too many devices"
| [ 0:00] 
| [ 0:00] 	# Do we have enough devices for the mirror images?
| [ 0:00] 	test $finish_count_p1 -gt ${#DEVICES[@]} && \
| [ 0:00] 		die "Action requires too many devices"
| [ 0:00] 
| [ 0:00] 	start_log_count=$(log_name_to_count $start_log_type)
| [ 0:00] 	finish_log_count=$(log_name_to_count $finish_log_type)
| [ 0:00] 	if [ $finish_log_count -gt $start_log_count ]; then
| [ 0:00] 		max_log_count=$finish_log_count
| [ 0:00] 	else
| [ 0:00] 		max_log_count=$start_log_count
| [ 0:00] 	fi
| [ 0:00] 
| [ 0:00] 	if [ $start_count -gt 0 ]; then
| [ 0:00] 		# Are there extra devices for the log or do we overlap
| [ 0:00] 		if [ $(( start_count_p1 + start_log_count )) -gt ${#DEVICES[@]} ]; then
| [ 0:00] 			alloc="--alloc anywhere"
| [ 0:00] 		fi
| [ 0:00] 
| [ 0:00] 		lvcreate "$active" -Zn -l2 --type mirror -m $start_count --mirrorlog $start_log_type \
| [ 0:00] 			-n $lv1 $vg $alloc
| [ 0:00] 		check mirror_legs $vg $lv1 $start_count_p1
| [ 0:00] 		# FIXME: check mirror log
| [ 0:00] 	else
| [ 0:00] 		lvcreate "$active" -Zn -l2 -n $lv1 $vg
| [ 0:00] 	fi
| [ 0:00] 
| [ 0:00] 	lvs -a -o name,copy_percent,devices $vg
| [ 0:00] 
| [ 0:00] 	# Are there extra devices for the log or do we overlap
| [ 0:00] 	if [ $(( finish_count_p1 +  finish_log_count )) -gt ${#DEVICES[@]} ]; then
| [ 0:00] 		alloc="--alloc anywhere"
| [ 0:00] 	fi
| [ 0:00] 
| [ 0:00] 	# --mirrorlog is invalid with -m0
| [ 0:00] 	if [ "$finish_count" -eq 0 ]; then
| [ 0:00] 		mirrorlog=""
| [ 0:00] 		finish_log_type=""
| [ 0:00] 	else
| [ 0:00] 		mirrorlog="--mirrorlog"
| [ 0:00] 	fi
| [ 0:00] 
| [ 0:00] 	lvconvert --type mirror -m $finish_count $mirrorlog $finish_log_type \
| [ 0:00] 		$vg/$lv1 $alloc
| [ 0:00] 
| [ 0:00] 	test "$active" = "-an" || lvchange "$active" $vg/$lv1
| [ 0:00] 
| [ 0:00] 	check mirror_no_temporaries $vg $lv1
| [ 0:00] 	if [ "$finish_count_p1" -eq 1 ]; then
| [ 0:00] 		check linear $vg $lv1
| [ 0:00] 	else
| [ 0:00] 		if test -n "$alloc"; then
| [ 0:00] 			check mirror_nonredundant $vg $lv1
| [ 0:00] 		else
| [ 0:00] 			check mirror $vg $lv1
| [ 0:00] 		fi
| [ 0:00] 		check mirror_legs $vg $lv1 $finish_count_p1
| [ 0:00] 	fi
| [ 0:00] }
| [ 0:00] 
| [ 0:00] aux prepare_vg 5 5
| [ 0:00] #lvconvert-mirror-basic.sh:125+ aux prepare_vg 5 5
| [ 0:00] ## preparing loop device....ok (/dev/loop0)
| [ 0:00] ## preparing 5 devices...lib/utils: line 212: DM_UDEV_COOKIE: unbound variable
| [ 0:00] set +vx; STACKTRACE; set -vx
| [ 0:00] ##lvconvert-mirror-basic.sh:125+ set +vx
| [ 0:00] ## - /lfskernel/sources/boot/LVM2.2.02.177/test/shell/lvconvert-mirror-basic.sh:125
| [ 0:00] ## 1 STACKTRACE() called from /lfskernel/sources/boot/LVM2.2.02.177/test/shell/lvconvert-mirror-basic.sh:125
| [ 0:00] <======== Info ========>
| [ 0:00] ## DMINFO:   Name             Maj Min Stat Open Targ Event  UUID                                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv5  253   5 L--w    0    1      0 TEST-@PREFIX@pv5                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv4  253   4 L--w    0    1      0 TEST-@PREFIX@pv4                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv3  253   3 L--w    0    1      0 TEST-@PREFIX@pv3                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv2  253   7 L--w    0    1      0 TEST-@PREFIX@pv2                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv1  253   6 L--w    0    1      0 TEST-@PREFIX@pv1                                                
| [ 0:00] <======== Active table ========>
| [ 0:00] ## DMTABLE:  @PREFIX@pv5: 0 10240 linear 7:0 43008
| [ 0:00] ## DMTABLE:  @PREFIX@pv4: 0 10240 linear 7:0 32768
| [ 0:00] ## DMTABLE:  @PREFIX@pv3: 0 10240 linear 7:0 22528
| [ 0:00] ## DMTABLE:  @PREFIX@pv2: 0 10240 linear 7:0 12288
| [ 0:00] ## DMTABLE:  @PREFIX@pv1: 0 10240 linear 7:0 2048
| [ 0:00] <======== Inactive table ========>
| [ 0:00] ## DMITABLE: @PREFIX@pv5: 
| [ 0:00] ## DMITABLE: @PREFIX@pv4: 
| [ 0:00] ## DMITABLE: @PREFIX@pv3: 
| [ 0:00] ## DMITABLE: @PREFIX@pv2: 
| [ 0:00] ## DMITABLE: @PREFIX@pv1: 
| [ 0:00] <======== Status ========>
| [ 0:00] ## DMSTATUS: @PREFIX@pv5: 0 10240 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv4: 0 10240 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv3: 0 10240 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv2: 0 10240 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv1: 0 10240 linear 
| [ 0:00] <======== Tree ========>
| [ 0:00] ## DMTREE:   @PREFIX@pv5 (253:5)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   @PREFIX@pv4 (253:4)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   @PREFIX@pv3 (253:3)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   @PREFIX@pv2 (253:7)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   LFS_vg-lfs (253:2)
| [ 0:00] ## DMTREE:    `- (8:16)
| [ 0:00] ## DMTREE:   centos-swap (253:1)
| [ 0:00] ## DMTREE:    `- (8:2)
| [ 0:00] ## DMTREE:   @PREFIX@pv1 (253:6)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   centos-root (253:0)
| [ 0:00] ## DMTREE:    `- (8:2)
| [ 0:00] <======== Recursive list of @TESTDIR@/dev ========>
| [ 0:00] ## LSLR:	@TESTDIR@/dev:
| [ 0:00] ## LSLR:	total 4
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 0 Feb 21 02:26 loop0
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 1 Feb 21 02:26 loop1
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 2 Feb 21 02:26 loop2
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 3 Feb 21 02:26 loop3
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 4 Feb 21 02:26 loop4
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 5 Feb 21 02:26 loop5
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 6 Feb 21 02:26 loop6
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 7 Feb 21 02:26 loop7
| [ 0:00] ## LSLR:	drwxr-xr-x 2 root root 4096 Feb 21 02:26 mapper
| [ 0:00] ## LSLR:	crw-r--r-- 1 root root 1, 3 Feb 21 02:26 testnull
| [ 0:00] ## LSLR:	
| [ 0:00] ## LSLR:	@TESTDIR@/dev/mapper:
| [ 0:00] ## LSLR:	total 0
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   6 Feb 21 02:26 @PREFIX@pv1
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   7 Feb 21 02:26 @PREFIX@pv2
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   3 Feb 21 02:26 @PREFIX@pv3
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   4 Feb 21 02:26 @PREFIX@pv4
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   5 Feb 21 02:26 @PREFIX@pv5
| [ 0:00] ## LSLR:	crw------- 1 root root  10, 236 Feb 21 02:26 control
| [ 0:00] <======== Udev DB content ========>
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-0
| [ 0:00] ## UDEV:	N: dm-0
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-0
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-0
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=0
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-1
| [ 0:00] ## UDEV:	N: dm-1
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-1
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-1
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=1
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-2
| [ 0:00] ## UDEV:	N: dm-2
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-2
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-2
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=2
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-3
| [ 0:00] ## UDEV:	N: dm-3
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-3
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-3
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=3
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-4
| [ 0:00] ## UDEV:	N: dm-4
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-4
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-4
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=4
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-5
| [ 0:00] ## UDEV:	N: dm-5
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-5
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-5
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=5
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-6
| [ 0:00] ## UDEV:	N: dm-6
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-6
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-6
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=6
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-7
| [ 0:00] ## UDEV:	N: dm-7
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-7
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-7
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=7
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/loop0
| [ 0:00] ## UDEV:	N: loop0
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/loop0
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/loop0
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=7
| [ 0:00] ## UDEV:	E: MINOR=0
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] <======== Script file "lvconvert-mirror-basic.sh" ========>
| [ 0:00] ## Line: 1 	 #!/usr/bin/env bash
| [ 0:00] ## Line: 2 	 
| [ 0:00] ## Line: 3 	 # Copyright (C) 2010-2012 Red Hat, Inc. All rights reserved.
| [ 0:00] ## Line: 4 	 #
| [ 0:00] ## Line: 5 	 # This copyrighted material is made available to anyone wishing to use,
| [ 0:00] ## Line: 6 	 # modify, copy, or redistribute it subject to the terms and conditions
| [ 0:00] ## Line: 7 	 # of the GNU General Public License v.2.
| [ 0:00] ## Line: 8 	 #
| [ 0:00] ## Line: 9 	 # You should have received a copy of the GNU General Public License
| [ 0:00] ## Line: 10 	 # along with this program; if not, write to the Free Software Foundation,
| [ 0:00] ## Line: 11 	 # Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA
| [ 0:00] ## Line: 12 	 
| [ 0:00] ## Line: 13 	 SKIP_WITH_LVMLOCKD=1
| [ 0:00] ## Line: 14 	 
| [ 0:00] ## Line: 15 	 # disable lvmetad logging as it bogs down test systems
| [ 0:00] ## Line: 16 	 export LVM_TEST_LVMETAD_DEBUG_OPTS=${LVM_TEST_LVMETAD_DEBUG_OPTS-}
| [ 0:00] ## Line: 17 	 
| [ 0:00] ## Line: 18 	 . lib/inittest
| [ 0:00] ## Line: 19 	 
| [ 0:00] ## Line: 20 	 log_name_to_count() {
| [ 0:00] ## Line: 21 	 	case "$1"  in
| [ 0:00] ## Line: 22 	 	mirrored) echo 2 ;;
| [ 0:00] ## Line: 23 	 	disk)	  echo 1 ;;
| [ 0:00] ## Line: 24 	 	*)	  echo 0 ;;
| [ 0:00] ## Line: 25 	 	esac
| [ 0:00] ## Line: 26 	 }
| [ 0:00] ## Line: 27 	 
| [ 0:00] ## Line: 28 	 # FIXME: For test_[up|down]convert, I'd still like to be able
| [ 0:00] ## Line: 29 	 # to specifiy devices - especially if I can do partial PV
| [ 0:00] ## Line: 30 	 # specification for down-converts.  It may even be wise to
| [ 0:00] ## Line: 31 	 # do one round through these tests without specifying the PVs
| [ 0:00] ## Line: 32 	 # to use and one round where we do.
| [ 0:00] ## Line: 33 	 
| [ 0:00] ## Line: 34 	 # test_lvconvert
| [ 0:00] ## Line: 35 	 #   start_mirror_count:  The '-m' argument to create with
| [ 0:00] ## Line: 36 	 #   start_log_type: core|disk|mirrored
| [ 0:00] ## Line: 37 	 #   final_mirror_count: The '-m' argument to convert to
| [ 0:00] ## Line: 38 	 #   final_log_type: core|disk|mirrored
| [ 0:00] ## Line: 39 	 #   active: Whether the LV should be active when the convert happens
| [ 0:00] ## Line: 40 	 #
| [ 0:00] ## Line: 41 	 # Exmaple: Convert 3-way disk-log mirror to
| [ 0:00] ## Line: 42 	 #          2-way disk-log mirror while not active
| [ 0:00] ## Line: 43 	 # -> test_lvconvert 2 disk 3 disk 0
| [ 0:00] ## Line: 44 	 
| [ 0:00] ## Line: 45 	 test_lvconvert() {
| [ 0:00] ## Line: 46 	 	local start_count=$1
| [ 0:00] ## Line: 47 	 	local start_count_p1=$(( start_count + 1 ))
| [ 0:00] ## Line: 48 	 	local start_log_type=$2
| [ 0:00] ## Line: 49 	 	local finish_count=$3
| [ 0:00] ## Line: 50 	 	local finish_count_p1=$(( finish_count + 1 ))
| [ 0:00] ## Line: 51 	 	local finish_log_type=$4
| [ 0:00] ## Line: 52 	 	local start_log_count
| [ 0:00] ## Line: 53 	 	local finish_log_count
| [ 0:00] ## Line: 54 	 	local max_log_count
| [ 0:00] ## Line: 55 	 	local alloc=""
| [ 0:00] ## Line: 56 	 	local active="-aey"
| [ 0:00] ## Line: 57 	 	local i
| [ 0:00] ## Line: 58 	 
| [ 0:00] ## Line: 59 	 	test "$5" = "active" && active="-an"
| [ 0:00] ## Line: 60 	 	#test $finish_count -gt $start_count && up=true
| [ 0:00] ## Line: 61 	 
| [ 0:00] ## Line: 62 	 	# Do we have enough devices for the mirror images?
| [ 0:00] ## Line: 63 	 	test $start_count_p1 -gt ${#DEVICES[@]} && \
| [ 0:00] ## Line: 64 	 		die "Action requires too many devices"
| [ 0:00] ## Line: 65 	 
| [ 0:00] ## Line: 66 	 	# Do we have enough devices for the mirror images?
| [ 0:00] ## Line: 67 	 	test $finish_count_p1 -gt ${#DEVICES[@]} && \
| [ 0:00] ## Line: 68 	 		die "Action requires too many devices"
| [ 0:00] ## Line: 69 	 
| [ 0:00] ## Line: 70 	 	start_log_count=$(log_name_to_count $start_log_type)
| [ 0:00] ## Line: 71 	 	finish_log_count=$(log_name_to_count $finish_log_type)
| [ 0:00] ## Line: 72 	 	if [ $finish_log_count -gt $start_log_count ]; then
| [ 0:00] ## Line: 73 	 		max_log_count=$finish_log_count
| [ 0:00] ## Line: 74 	 	else
| [ 0:00] ## Line: 75 	 		max_log_count=$start_log_count
| [ 0:00] ## Line: 76 	 	fi
| [ 0:00] ## Line: 77 	 
| [ 0:00] ## Line: 78 	 	if [ $start_count -gt 0 ]; then
| [ 0:00] ## Line: 79 	 		# Are there extra devices for the log or do we overlap
| [ 0:00] ## Line: 80 	 		if [ $(( start_count_p1 + start_log_count )) -gt ${#DEVICES[@]} ]; then
| [ 0:00] ## Line: 81 	 			alloc="--alloc anywhere"
| [ 0:00] ## Line: 82 	 		fi
| [ 0:00] ## Line: 83 	 
| [ 0:00] ## Line: 84 	 		lvcreate "$active" -Zn -l2 --type mirror -m $start_count --mirrorlog $start_log_type \
| [ 0:00] ## Line: 85 	 			-n $lv1 $vg $alloc
| [ 0:00] ## Line: 86 	 		check mirror_legs $vg $lv1 $start_count_p1
| [ 0:00] ## Line: 87 	 		# FIXME: check mirror log
| [ 0:00] ## Line: 88 	 	else
| [ 0:00] ## Line: 89 	 		lvcreate "$active" -Zn -l2 -n $lv1 $vg
| [ 0:00] ## Line: 90 	 	fi
| [ 0:00] ## Line: 91 	 
| [ 0:00] ## Line: 92 	 	lvs -a -o name,copy_percent,devices $vg
| [ 0:00] ## Line: 93 	 
| [ 0:00] ## Line: 94 	 	# Are there extra devices for the log or do we overlap
| [ 0:00] ## Line: 95 	 	if [ $(( finish_count_p1 +  finish_log_count )) -gt ${#DEVICES[@]} ]; then
| [ 0:00] ## Line: 96 	 		alloc="--alloc anywhere"
| [ 0:00] ## Line: 97 	 	fi
| [ 0:00] ## Line: 98 	 
| [ 0:00] ## Line: 99 	 	# --mirrorlog is invalid with -m0
| [ 0:00] ## Line: 100 	 	if [ "$finish_count" -eq 0 ]; then
| [ 0:00] ## Line: 101 	 		mirrorlog=""
| [ 0:00] ## Line: 102 	 		finish_log_type=""
| [ 0:00] ## Line: 103 	 	else
| [ 0:00] ## Line: 104 	 		mirrorlog="--mirrorlog"
| [ 0:00] ## Line: 105 	 	fi
| [ 0:00] ## Line: 106 	 
| [ 0:00] ## Line: 107 	 	lvconvert --type mirror -m $finish_count $mirrorlog $finish_log_type \
| [ 0:00] ## Line: 108 	 		$vg/$lv1 $alloc
| [ 0:00] ## Line: 109 	 
| [ 0:00] ## Line: 110 	 	test "$active" = "-an" || lvchange "$active" $vg/$lv1
| [ 0:00] ## Line: 111 	 
| [ 0:00] ## Line: 112 	 	check mirror_no_temporaries $vg $lv1
| [ 0:00] ## Line: 113 	 	if [ "$finish_count_p1" -eq 1 ]; then
| [ 0:00] ## Line: 114 	 		check linear $vg $lv1
| [ 0:00] ## Line: 115 	 	else
| [ 0:00] ## Line: 116 	 		if test -n "$alloc"; then
| [ 0:00] ## Line: 117 	 			check mirror_nonredundant $vg $lv1
| [ 0:00] ## Line: 118 	 		else
| [ 0:00] ## Line: 119 	 			check mirror $vg $lv1
| [ 0:00] ## Line: 120 	 		fi
| [ 0:00] ## Line: 121 	 		check mirror_legs $vg $lv1 $finish_count_p1
| [ 0:00] ## Line: 122 	 	fi
| [ 0:00] ## Line: 123 	 }
| [ 0:00] ## Line: 124 	 
| [ 0:00] ## Line: 125 	 aux prepare_vg 5 5
| [ 0:00] ## Line: 126 	 get_devs
| [ 0:00] ## Line: 127 	 
| [ 0:00] ## Line: 128 	 MIRRORED="mirrored"
| [ 0:00] ## Line: 129 	 # FIXME: Cluster is not supporting exlusive activation of mirrored log
| [ 0:00] ## Line: 130 	 test -e LOCAL_CLVMD && MIRRORED=
| [ 0:00] ## Line: 131 	 
| [ 0:00] ## Line: 132 	 test_many() {
| [ 0:00] ## Line: 133 	 	i=$1
| [ 0:00] ## Line: 134 	 	for j in $(seq 0 3); do
| [ 0:00] ## Line: 135 	 		for k in core disk $MIRRORED; do
| [ 0:00] ## Line: 136 	 			for l in core disk $MIRRORED; do
| [ 0:00] ## Line: 137 	 				if test "$i" -eq "$j" && test "$k" = "$l"; then continue; fi
| [ 0:00] ## Line: 138 	 				: ----------------------------------------------------
| [ 0:00] ## Line: 139 	 				: "Testing mirror conversion -m$i/$k -> -m$j/$l"
| [ 0:00] ## Line: 140 	 				: ----------------------------------------------------
| [ 0:00] ## Line: 141 	 				test_lvconvert $i $k $j $l 0
| [ 0:00] ## Line: 142 	 				lvremove -ff $vg
| [ 0:00] ## Line: 143 	 				test_lvconvert $i $k $j $l 1
| [ 0:00] ## Line: 144 	 				lvremove -ff $vg
| [ 0:00] ## Line: 145 	 			done
| [ 0:00] ## Line: 146 	 		done
| [ 0:00] ## Line: 147 	 	done
| [ 0:00] ## Line: 148 	 }
| [ 0:00] aux teardown
| [ 0:00] #lvconvert-mirror-basic.sh:1+ aux teardown
| [ 0:00] ## teardown.........ok
###       failed: [ndev-vanilla] shell/lvconvert-mirror-basic.sh

| [ 0:00] Library version:   1.02.146 (2017-12-18)
| [ 0:00] Driver version:    4.35.0
| [ 0:00] Kernel is Linux localhost.localdomain 3.10.0-693.11.1.el7.x86_64 #1 SMP Mon Dec 4 23:52:40 UTC 2017 x86_64 GNU/Linux
| [ 0:00] Selinux mode is not installed.
| [ 0:00]               total        used        free      shared  buff/cache   available
| [ 0:00] Mem:           7822        1073        4156          10        2593        6442
| [ 0:00] Swap:          4095           0        4095
| [ 0:00] Filesystem      Size  Used Avail Use% Mounted on
| [ 0:00] /dev/sdc1        18G  8.4G  8.4G  50% /
| [ 0:00] /dev/sdd1        51G  6.1G   43G  13% /lfskernel
| [ 0:00] devtmpfs        3.9G     0  3.9G   0% /dev
| [ 0:00] tmpfs           3.9G     0  3.9G   0% /run
| [ 0:00] @TESTDIR=/tmp/LVMTEST31071.WFPRN4rxJm
| [ 0:00] @PREFIX=LVMTEST31071
| [ 0:00] ## LVMCONF: activation {
| [ 0:00] ## LVMCONF:     checks = 1
| [ 0:00] ## LVMCONF:     monitoring = 0
| [ 0:00] ## LVMCONF:     polling_interval = 1
| [ 0:00] ## LVMCONF:     raid_region_size = 512
| [ 0:00] ## LVMCONF:     retry_deactivation = 1
| [ 0:00] ## LVMCONF:     snapshot_autoextend_percent = 50
| [ 0:00] ## LVMCONF:     snapshot_autoextend_threshold = 50
| [ 0:00] ## LVMCONF:     udev_rules = 1
| [ 0:00] ## LVMCONF:     udev_sync = 1
| [ 0:00] ## LVMCONF:     verify_udev_operations = 1
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: allocation {
| [ 0:00] ## LVMCONF:     wipe_signatures_when_zeroing_new_lvs = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: backup {
| [ 0:00] ## LVMCONF:     archive = 0
| [ 0:00] ## LVMCONF:     backup = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: devices {
| [ 0:00] ## LVMCONF:     cache_dir = "@TESTDIR@/etc"
| [ 0:00] ## LVMCONF:     default_data_alignment = 1
| [ 0:00] ## LVMCONF:     dir = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     filter = "a|.*|"
| [ 0:00] ## LVMCONF:     global_filter = [ "a|@TESTDIR@/dev/mapper/@PREFIX@.*pv[0-9_]*$|", "r|.*|" ]
| [ 0:00] ## LVMCONF:     md_component_detection  = 0
| [ 0:00] ## LVMCONF:     scan = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     sysfs_scan = 1
| [ 0:00] ## LVMCONF:     write_cache_state = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: dmeventd {
| [ 0:00] ## LVMCONF:     executable = "/sources/boot/LVM2.2.02.177/test/lib/dmeventd"
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: global {
| [ 0:00] ## LVMCONF:     abort_on_internal_errors = 1
| [ 0:00] ## LVMCONF:     cache_check_executable = "/usr/sbin/cache_check"
| [ 0:00] ## LVMCONF:     cache_dump_executable = "/usr/sbin/cache_dump"
| [ 0:00] ## LVMCONF:     cache_repair_executable = "/usr/sbin/cache_repair"
| [ 0:00] ## LVMCONF:     detect_internal_vg_cache_corruption = 1
| [ 0:00] ## LVMCONF:     fallback_to_local_locking = 0
| [ 0:00] ## LVMCONF:     fsadm_executable = "/sources/boot/LVM2.2.02.177/test/lib/fsadm"
| [ 0:00] ## LVMCONF:     library_dir = "@TESTDIR@/lib"
| [ 0:00] ## LVMCONF:     locking_dir = "@TESTDIR@/var/lock/lvm"
| [ 0:00] ## LVMCONF:     locking_type=1
| [ 0:00] ## LVMCONF:     notify_dbus = 0
| [ 0:00] ## LVMCONF:     si_unit_consistency = 1
| [ 0:00] ## LVMCONF:     thin_check_executable = "/usr/sbin/thin_check"
| [ 0:00] ## LVMCONF:     thin_dump_executable = "/usr/sbin/thin_dump"
| [ 0:00] ## LVMCONF:     thin_repair_executable = "/usr/sbin/thin_repair"
| [ 0:00] ## LVMCONF:     use_lvmetad = 0
| [ 0:00] ## LVMCONF:     use_lvmlockd = 0
| [ 0:00] ## LVMCONF:     use_lvmpolld = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: log {
| [ 0:00] ## LVMCONF:     activation = 1
| [ 0:00] ## LVMCONF:     file = "@TESTDIR@/debug.log"
| [ 0:00] ## LVMCONF:     indent = 1
| [ 0:00] ## LVMCONF:     level = 9
| [ 0:00] ## LVMCONF:     overwrite = 1
| [ 0:00] ## LVMCONF:     syslog = 0
| [ 0:00] ## LVMCONF:     verbose = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] <======== Processing test: "lvconvert-mirror-updown.sh" ========>
| [ 0:00] 
| [ 0:00] aux prepare_pvs 3
| [ 0:00] #lvconvert-mirror-updown.sh:19+ aux prepare_pvs 3
| [ 0:00] ## preparing loop device....ok (/dev/loop0)
| [ 0:00] ## preparing 3 devices...lib/utils: line 212: DM_UDEV_COOKIE: unbound variable
| [ 0:00] set +vx; STACKTRACE; set -vx
| [ 0:00] ##lvconvert-mirror-updown.sh:19+ set +vx
| [ 0:00] ## - /lfskernel/sources/boot/LVM2.2.02.177/test/shell/lvconvert-mirror-updown.sh:19
| [ 0:00] ## 1 STACKTRACE() called from /lfskernel/sources/boot/LVM2.2.02.177/test/shell/lvconvert-mirror-updown.sh:19
| [ 0:00] <======== Info ========>
| [ 0:00] ## DMINFO:   Name             Maj Min Stat Open Targ Event  UUID                                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv3  253   3 L--w    0    1      0 TEST-@PREFIX@pv3                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv2  253   5 L--w    0    1      0 TEST-@PREFIX@pv2                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv1  253   4 L--w    0    1      0 TEST-@PREFIX@pv1                                                
| [ 0:00] <======== Active table ========>
| [ 0:00] ## DMTABLE:  @PREFIX@pv3: 0 69632 linear 7:0 141312
| [ 0:00] ## DMTABLE:  @PREFIX@pv2: 0 69632 linear 7:0 71680
| [ 0:00] ## DMTABLE:  @PREFIX@pv1: 0 69632 linear 7:0 2048
| [ 0:00] <======== Inactive table ========>
| [ 0:00] ## DMITABLE: @PREFIX@pv3: 
| [ 0:00] ## DMITABLE: @PREFIX@pv2: 
| [ 0:00] ## DMITABLE: @PREFIX@pv1: 
| [ 0:00] <======== Status ========>
| [ 0:00] ## DMSTATUS: @PREFIX@pv3: 0 69632 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv2: 0 69632 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv1: 0 69632 linear 
| [ 0:00] <======== Tree ========>
| [ 0:00] ## DMTREE:   @PREFIX@pv3 (253:3)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   @PREFIX@pv2 (253:5)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   @PREFIX@pv1 (253:4)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   LFS_vg-lfs (253:2)
| [ 0:00] ## DMTREE:    `- (8:16)
| [ 0:00] ## DMTREE:   centos-swap (253:1)
| [ 0:00] ## DMTREE:    `- (8:2)
| [ 0:00] ## DMTREE:   centos-root (253:0)
| [ 0:00] ## DMTREE:    `- (8:2)
| [ 0:00] <======== Recursive list of @TESTDIR@/dev ========>
| [ 0:00] ## LSLR:	@TESTDIR@/dev:
| [ 0:00] ## LSLR:	total 4
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 0 Feb 21 02:26 loop0
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 1 Feb 21 02:26 loop1
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 2 Feb 21 02:26 loop2
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 3 Feb 21 02:26 loop3
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 4 Feb 21 02:26 loop4
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 5 Feb 21 02:26 loop5
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 6 Feb 21 02:26 loop6
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 7 Feb 21 02:26 loop7
| [ 0:00] ## LSLR:	drwxr-xr-x 2 root root 4096 Feb 21 02:26 mapper
| [ 0:00] ## LSLR:	crw-r--r-- 1 root root 1, 3 Feb 21 02:26 testnull
| [ 0:00] ## LSLR:	
| [ 0:00] ## LSLR:	@TESTDIR@/dev/mapper:
| [ 0:00] ## LSLR:	total 0
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   4 Feb 21 02:26 @PREFIX@pv1
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   5 Feb 21 02:26 @PREFIX@pv2
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   3 Feb 21 02:26 @PREFIX@pv3
| [ 0:00] ## LSLR:	crw------- 1 root root  10, 236 Feb 21 02:26 control
| [ 0:00] <======== Udev DB content ========>
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-0
| [ 0:00] ## UDEV:	N: dm-0
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-0
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-0
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=0
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-1
| [ 0:00] ## UDEV:	N: dm-1
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-1
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-1
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=1
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-2
| [ 0:00] ## UDEV:	N: dm-2
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-2
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-2
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=2
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-3
| [ 0:00] ## UDEV:	N: dm-3
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-3
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-3
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=3
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-4
| [ 0:00] ## UDEV:	N: dm-4
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-4
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-4
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=4
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-5
| [ 0:00] ## UDEV:	N: dm-5
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-5
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-5
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=5
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/loop0
| [ 0:00] ## UDEV:	N: loop0
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/loop0
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/loop0
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=7
| [ 0:00] ## UDEV:	E: MINOR=0
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] <======== Script file "lvconvert-mirror-updown.sh" ========>
| [ 0:00] ## Line: 1 	 #!/usr/bin/env bash
| [ 0:00] ## Line: 2 	 
| [ 0:00] ## Line: 3 	 # Copyright (C) 2014 Red Hat, Inc. All rights reserved.
| [ 0:00] ## Line: 4 	 #
| [ 0:00] ## Line: 5 	 # This copyrighted material is made available to anyone wishing to use,
| [ 0:00] ## Line: 6 	 # modify, copy, or redistribute it subject to the terms and conditions
| [ 0:00] ## Line: 7 	 # of the GNU General Public License v.2.
| [ 0:00] ## Line: 8 	 #
| [ 0:00] ## Line: 9 	 # You should have received a copy of the GNU General Public License
| [ 0:00] ## Line: 10 	 # along with this program; if not, write to the Free Software Foundation,
| [ 0:00] ## Line: 11 	 # Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA
| [ 0:00] ## Line: 12 	 
| [ 0:00] ## Line: 13 	 # Demonstrate problem when upconverting and cutting leg in clvmd
| [ 0:00] ## Line: 14 	 
| [ 0:00] ## Line: 15 	 SKIP_WITH_LVMLOCKD=1
| [ 0:00] ## Line: 16 	 
| [ 0:00] ## Line: 17 	 . lib/inittest
| [ 0:00] ## Line: 18 	 
| [ 0:00] ## Line: 19 	 aux prepare_pvs 3
| [ 0:00] ## Line: 20 	 get_devs
| [ 0:00] ## Line: 21 	 
| [ 0:00] ## Line: 22 	 vgcreate -s 64k "$vg" "${DEVICES[@]}"
| [ 0:00] ## Line: 23 	 
| [ 0:00] ## Line: 24 	 lvcreate -aey -l10 --type mirror -m1 -n $lv1 $vg "$dev1" "$dev2"
| [ 0:00] ## Line: 25 	 
| [ 0:00] ## Line: 26 	 # Slow down device so we are able to start next conversion in parallel
| [ 0:00] ## Line: 27 	 aux delay_dev "$dev3" 0 200
| [ 0:00] ## Line: 28 	 
| [ 0:00] ## Line: 29 	 lvconvert -m+1 -b $vg/$lv1 "$dev3"
| [ 0:00] ## Line: 30 	 
| [ 0:00] ## Line: 31 	 # To fix - wait helps here....
| [ 0:00] ## Line: 32 	 #lvconvert $vg/$lv1
| [ 0:00] ## Line: 33 	 
| [ 0:00] ## Line: 34 	 lvs -a $vg
| [ 0:00] ## Line: 35 	 
| [ 0:00] ## Line: 36 	 #
| [ 0:00] ## Line: 37 	 # It fails so use 'should' and -vvvv for now
| [ 0:00] ## Line: 38 	 #
| [ 0:00] ## Line: 39 	 should lvconvert -vvvv -m-1 $vg/$lv1 "$dev2"
| [ 0:00] ## Line: 40 	 
| [ 0:00] ## Line: 41 	 vgremove -f $vg
| [ 0:00] aux teardown
| [ 0:00] #lvconvert-mirror-updown.sh:1+ aux teardown
| [ 0:00] ## teardown.........ok
###       failed: [ndev-vanilla] shell/lvconvert-mirror-updown.sh

| [ 0:00] Library version:   1.02.146 (2017-12-18)
| [ 0:00] Driver version:    4.35.0
| [ 0:00] Kernel is Linux localhost.localdomain 3.10.0-693.11.1.el7.x86_64 #1 SMP Mon Dec 4 23:52:40 UTC 2017 x86_64 GNU/Linux
| [ 0:00] Selinux mode is not installed.
| [ 0:00]               total        used        free      shared  buff/cache   available
| [ 0:00] Mem:           7822        1074        4154          10        2593        6441
| [ 0:00] Swap:          4095           0        4095
| [ 0:00] Filesystem      Size  Used Avail Use% Mounted on
| [ 0:00] /dev/sdc1        18G  8.4G  8.4G  50% /
| [ 0:00] /dev/sdd1        51G  6.1G   43G  13% /lfskernel
| [ 0:00] devtmpfs        3.9G     0  3.9G   0% /dev
| [ 0:00] tmpfs           3.9G     0  3.9G   0% /run
| [ 0:00] @TESTDIR=/tmp/LVMTEST31252.rksWpN3Sw8
| [ 0:00] @PREFIX=LVMTEST31252
| [ 0:00] ## LVMCONF: activation {
| [ 0:00] ## LVMCONF:     checks = 1
| [ 0:00] ## LVMCONF:     monitoring = 0
| [ 0:00] ## LVMCONF:     polling_interval = 1
| [ 0:00] ## LVMCONF:     raid_region_size = 512
| [ 0:00] ## LVMCONF:     retry_deactivation = 1
| [ 0:00] ## LVMCONF:     snapshot_autoextend_percent = 50
| [ 0:00] ## LVMCONF:     snapshot_autoextend_threshold = 50
| [ 0:00] ## LVMCONF:     udev_rules = 1
| [ 0:00] ## LVMCONF:     udev_sync = 1
| [ 0:00] ## LVMCONF:     verify_udev_operations = 1
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: allocation {
| [ 0:00] ## LVMCONF:     wipe_signatures_when_zeroing_new_lvs = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: backup {
| [ 0:00] ## LVMCONF:     archive = 0
| [ 0:00] ## LVMCONF:     backup = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: devices {
| [ 0:00] ## LVMCONF:     cache_dir = "@TESTDIR@/etc"
| [ 0:00] ## LVMCONF:     default_data_alignment = 1
| [ 0:00] ## LVMCONF:     dir = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     filter = "a|.*|"
| [ 0:00] ## LVMCONF:     global_filter = [ "a|@TESTDIR@/dev/mapper/@PREFIX@.*pv[0-9_]*$|", "r|.*|" ]
| [ 0:00] ## LVMCONF:     md_component_detection  = 0
| [ 0:00] ## LVMCONF:     scan = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     sysfs_scan = 1
| [ 0:00] ## LVMCONF:     write_cache_state = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: dmeventd {
| [ 0:00] ## LVMCONF:     executable = "/sources/boot/LVM2.2.02.177/test/lib/dmeventd"
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: global {
| [ 0:00] ## LVMCONF:     abort_on_internal_errors = 1
| [ 0:00] ## LVMCONF:     cache_check_executable = "/usr/sbin/cache_check"
| [ 0:00] ## LVMCONF:     cache_dump_executable = "/usr/sbin/cache_dump"
| [ 0:00] ## LVMCONF:     cache_repair_executable = "/usr/sbin/cache_repair"
| [ 0:00] ## LVMCONF:     detect_internal_vg_cache_corruption = 1
| [ 0:00] ## LVMCONF:     fallback_to_local_locking = 0
| [ 0:00] ## LVMCONF:     fsadm_executable = "/sources/boot/LVM2.2.02.177/test/lib/fsadm"
| [ 0:00] ## LVMCONF:     library_dir = "@TESTDIR@/lib"
| [ 0:00] ## LVMCONF:     locking_dir = "@TESTDIR@/var/lock/lvm"
| [ 0:00] ## LVMCONF:     locking_type=1
| [ 0:00] ## LVMCONF:     notify_dbus = 0
| [ 0:00] ## LVMCONF:     si_unit_consistency = 1
| [ 0:00] ## LVMCONF:     thin_check_executable = "/usr/sbin/thin_check"
| [ 0:00] ## LVMCONF:     thin_dump_executable = "/usr/sbin/thin_dump"
| [ 0:00] ## LVMCONF:     thin_repair_executable = "/usr/sbin/thin_repair"
| [ 0:00] ## LVMCONF:     use_lvmetad = 0
| [ 0:00] ## LVMCONF:     use_lvmlockd = 0
| [ 0:00] ## LVMCONF:     use_lvmpolld = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: log {
| [ 0:00] ## LVMCONF:     activation = 1
| [ 0:00] ## LVMCONF:     file = "@TESTDIR@/debug.log"
| [ 0:00] ## LVMCONF:     indent = 1
| [ 0:00] ## LVMCONF:     level = 9
| [ 0:00] ## LVMCONF:     overwrite = 1
| [ 0:00] ## LVMCONF:     syslog = 0
| [ 0:00] ## LVMCONF:     verbose = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] <======== Processing test: "lvconvert-mirror.sh" ========>
| [ 0:00] 
| [ 0:00] aux prepare_pvs 5 20
| [ 0:00] #lvconvert-mirror.sh:20+ aux prepare_pvs 5 20
| [ 0:00] ## preparing loop device....ok (/dev/loop0)
| [ 0:00] ## preparing 5 devices...lib/utils: line 212: DM_UDEV_COOKIE: unbound variable
| [ 0:00] set +vx; STACKTRACE; set -vx
| [ 0:00] ##lvconvert-mirror.sh:20+ set +vx
| [ 0:00] ## - /lfskernel/sources/boot/LVM2.2.02.177/test/shell/lvconvert-mirror.sh:20
| [ 0:00] ## 1 STACKTRACE() called from /lfskernel/sources/boot/LVM2.2.02.177/test/shell/lvconvert-mirror.sh:20
| [ 0:00] <======== Info ========>
| [ 0:00] ## DMINFO:   Name             Maj Min Stat Open Targ Event  UUID                                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv5  253   5 L--w    0    1      0 TEST-@PREFIX@pv5                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv4  253   6 L--w    0    1      0 TEST-@PREFIX@pv4                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv3  253   4 L--w    0    1      0 TEST-@PREFIX@pv3                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv2  253   3 L--w    0    1      0 TEST-@PREFIX@pv2                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv1  253   7 L--w    0    1      0 TEST-@PREFIX@pv1                                                
| [ 0:00] <======== Active table ========>
| [ 0:00] ## DMTABLE:  @PREFIX@pv5: 0 40960 linear 7:0 165888
| [ 0:00] ## DMTABLE:  @PREFIX@pv4: 0 40960 linear 7:0 124928
| [ 0:00] ## DMTABLE:  @PREFIX@pv3: 0 40960 linear 7:0 83968
| [ 0:00] ## DMTABLE:  @PREFIX@pv2: 0 40960 linear 7:0 43008
| [ 0:00] ## DMTABLE:  @PREFIX@pv1: 0 40960 linear 7:0 2048
| [ 0:00] <======== Inactive table ========>
| [ 0:00] ## DMITABLE: @PREFIX@pv5: 
| [ 0:00] ## DMITABLE: @PREFIX@pv4: 
| [ 0:00] ## DMITABLE: @PREFIX@pv3: 
| [ 0:00] ## DMITABLE: @PREFIX@pv2: 
| [ 0:00] ## DMITABLE: @PREFIX@pv1: 
| [ 0:00] <======== Status ========>
| [ 0:00] ## DMSTATUS: @PREFIX@pv5: 0 40960 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv4: 0 40960 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv3: 0 40960 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv2: 0 40960 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv1: 0 40960 linear 
| [ 0:00] <======== Tree ========>
| [ 0:00] ## DMTREE:   @PREFIX@pv5 (253:5)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   @PREFIX@pv4 (253:6)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   @PREFIX@pv3 (253:4)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   @PREFIX@pv2 (253:3)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   @PREFIX@pv1 (253:7)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   LFS_vg-lfs (253:2)
| [ 0:00] ## DMTREE:    `- (8:16)
| [ 0:00] ## DMTREE:   centos-swap (253:1)
| [ 0:00] ## DMTREE:    `- (8:2)
| [ 0:00] ## DMTREE:   centos-root (253:0)
| [ 0:00] ## DMTREE:    `- (8:2)
| [ 0:00] <======== Recursive list of @TESTDIR@/dev ========>
| [ 0:00] ## LSLR:	@TESTDIR@/dev:
| [ 0:00] ## LSLR:	total 4
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 0 Feb 21 02:26 loop0
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 1 Feb 21 02:26 loop1
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 2 Feb 21 02:26 loop2
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 3 Feb 21 02:26 loop3
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 4 Feb 21 02:26 loop4
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 5 Feb 21 02:26 loop5
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 6 Feb 21 02:26 loop6
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 7 Feb 21 02:26 loop7
| [ 0:00] ## LSLR:	drwxr-xr-x 2 root root 4096 Feb 21 02:26 mapper
| [ 0:00] ## LSLR:	crw-r--r-- 1 root root 1, 3 Feb 21 02:26 testnull
| [ 0:00] ## LSLR:	
| [ 0:00] ## LSLR:	@TESTDIR@/dev/mapper:
| [ 0:00] ## LSLR:	total 0
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   7 Feb 21 02:26 @PREFIX@pv1
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   3 Feb 21 02:26 @PREFIX@pv2
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   4 Feb 21 02:26 @PREFIX@pv3
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   6 Feb 21 02:26 @PREFIX@pv4
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   5 Feb 21 02:26 @PREFIX@pv5
| [ 0:00] ## LSLR:	crw------- 1 root root  10, 236 Feb 21 02:26 control
| [ 0:00] <======== Udev DB content ========>
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-0
| [ 0:00] ## UDEV:	N: dm-0
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-0
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-0
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=0
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-1
| [ 0:00] ## UDEV:	N: dm-1
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-1
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-1
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=1
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-2
| [ 0:00] ## UDEV:	N: dm-2
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-2
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-2
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=2
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-3
| [ 0:00] ## UDEV:	N: dm-3
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-3
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-3
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=3
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-4
| [ 0:00] ## UDEV:	N: dm-4
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-4
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-4
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=4
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-5
| [ 0:00] ## UDEV:	N: dm-5
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-5
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-5
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=5
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-6
| [ 0:00] ## UDEV:	N: dm-6
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-6
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-6
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=6
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-7
| [ 0:00] ## UDEV:	N: dm-7
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-7
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-7
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=7
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/loop0
| [ 0:00] ## UDEV:	N: loop0
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/loop0
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/loop0
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=7
| [ 0:00] ## UDEV:	E: MINOR=0
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] <======== Script file "lvconvert-mirror.sh" ========>
| [ 0:00] ## Line: 1 	 #!/usr/bin/env bash
| [ 0:00] ## Line: 2 	 
| [ 0:00] ## Line: 3 	 # Copyright (C) 2010-2015 Red Hat, Inc. All rights reserved.
| [ 0:00] ## Line: 4 	 #
| [ 0:00] ## Line: 5 	 # This copyrighted material is made available to anyone wishing to use,
| [ 0:00] ## Line: 6 	 # modify, copy, or redistribute it subject to the terms and conditions
| [ 0:00] ## Line: 7 	 # of the GNU General Public License v.2.
| [ 0:00] ## Line: 8 	 #
| [ 0:00] ## Line: 9 	 # You should have received a copy of the GNU General Public License
| [ 0:00] ## Line: 10 	 # along with this program; if not, write to the Free Software Foundation,
| [ 0:00] ## Line: 11 	 # Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA
| [ 0:00] ## Line: 12 	 
| [ 0:00] ## Line: 13 	 SKIP_WITH_LVMLOCKD=1
| [ 0:00] ## Line: 14 	 
| [ 0:00] ## Line: 15 	 # disable lvmetad logging as it bogs down test systems
| [ 0:00] ## Line: 16 	 export LVM_TEST_LVMETAD_DEBUG_OPTS=${LVM_TEST_LVMETAD_DEBUG_OPTS-}
| [ 0:00] ## Line: 17 	 
| [ 0:00] ## Line: 18 	 . lib/inittest
| [ 0:00] ## Line: 19 	 
| [ 0:00] ## Line: 20 	 aux prepare_pvs 5 20
| [ 0:00] ## Line: 21 	 get_devs
| [ 0:00] ## Line: 22 	 
| [ 0:00] ## Line: 23 	 # proper DEVRANGE needs to be set according to extent size
| [ 0:00] ## Line: 24 	 DEVRANGE="0-32"
| [ 0:00] ## Line: 25 	 vgcreate -s 32k "$vg" "${DEVICES[@]}"
| [ 0:00] ## Line: 26 	 
| [ 0:00] ## Line: 27 	 # convert from linear to 2-way mirror ("mirror" default type)
| [ 0:00] ## Line: 28 	 lvcreate -aey -l2 -n $lv1 $vg "$dev1"
| [ 0:00] ## Line: 29 	 lvconvert -i1 -m+1 -R32k $vg/$lv1 "$dev2" "$dev3:0-1" \
| [ 0:00] ## Line: 30 	 	--config 'global { mirror_segtype_default = "mirror" }'
| [ 0:00] ## Line: 31 	 lvs --noheadings -o attr $vg/$lv1 | grep '^[[:space:]]*m'
| [ 0:00] ## Line: 32 	 lvremove -ff $vg
| [ 0:00] ## Line: 33 	 
| [ 0:00] ## Line: 34 	 # convert from linear to 2-way mirror (override "raid1" default type)
| [ 0:00] ## Line: 35 	 lvcreate -aey -l2 -n $lv1 $vg "$dev1"
| [ 0:00] ## Line: 36 	 lvconvert -i1 --type mirror -m+1 $vg/$lv1 "$dev2" "$dev3:0-1" \
| [ 0:00] ## Line: 37 	 	--config 'global { mirror_segtype_default = "raid1" }'
| [ 0:00] ## Line: 38 	 lvs --noheadings -o attr $vg/$lv1 | grep '^[[:space:]]*m'
| [ 0:00] ## Line: 39 	 lvremove -ff $vg
| [ 0:00] ## Line: 40 	 
| [ 0:00] ## Line: 41 	 # convert from linear to 2-way mirror - with tags and volume_list (bz683270)
| [ 0:00] ## Line: 42 	 lvcreate -aey -l2 -n $lv1 $vg --addtag hello
| [ 0:00] ## Line: 43 	 lvconvert -i1 --type mirror -m+1 $vg/$lv1 \
| [ 0:00] ## Line: 44 	     --config 'activation { volume_list = [ "@hello" ] }'
| [ 0:00] ## Line: 45 	 lvremove -ff $vg
| [ 0:00] ## Line: 46 	 
| [ 0:00] ## Line: 47 	 # convert from 2-way to 3-way mirror - with tags and volume_list (bz683270)
| [ 0:00] ## Line: 48 	 lvcreate -aey -l2 --type mirror -m1 -n $lv1 $vg --addtag hello
| [ 0:00] ## Line: 49 	 lvconvert -i1 -m+1 $vg/$lv1 \
| [ 0:00] ## Line: 50 	     --config 'activation { volume_list = [ "@hello" ] }'
| [ 0:00] ## Line: 51 	 lvremove -ff $vg
| [ 0:00] ## Line: 52 	 
| [ 0:00] ## Line: 53 	 # convert from 2-way mirror to linear
| [ 0:00] ## Line: 54 	 lvcreate -aey -l2 --type mirror -m1 -n $lv1 $vg "$dev1" "$dev2" "$dev3:0-1"
| [ 0:00] ## Line: 55 	 lvconvert -m-1 $vg/$lv1
| [ 0:00] ## Line: 56 	 check linear $vg $lv1
| [ 0:00] ## Line: 57 	 lvremove -ff $vg
| [ 0:00] ## Line: 58 	 # and now try removing a specific leg (bz453643)
| [ 0:00] ## Line: 59 	 lvcreate -aey -l2 --type mirror -m1 -n $lv1 $vg "$dev1" "$dev2" "$dev3:0-1"
| [ 0:00] ## Line: 60 	 lvconvert -m0 $vg/$lv1 "$dev2"
| [ 0:00] ## Line: 61 	 check lv_on $vg $lv1 "$dev1"
| [ 0:00] ## Line: 62 	 lvremove -ff $vg
| [ 0:00] ## Line: 63 	 
| [ 0:00] ## Line: 64 	 # convert from disklog to corelog, active
| [ 0:00] ## Line: 65 	 lvcreate -aey -l2 --type mirror -m1 -n $lv1 $vg "$dev1" "$dev2" "$dev3:0-1"
| [ 0:00] ## Line: 66 	 lvconvert -f --mirrorlog core $vg/$lv1
| [ 0:00] ## Line: 67 	 check mirror $vg $lv1 core
| [ 0:00] ## Line: 68 	 lvremove -ff $vg
| [ 0:00] ## Line: 69 	 
| [ 0:00] ## Line: 70 	 # convert from corelog to disklog, active
| [ 0:00] ## Line: 71 	 lvcreate -aey -l2 --type mirror -m1 --mirrorlog core -n $lv1 $vg "$dev1" "$dev2"
| [ 0:00] ## Line: 72 	 lvconvert --mirrorlog disk $vg/$lv1 "$dev3:0-1"
| [ 0:00] ## Line: 73 	 check mirror $vg $lv1 "$dev3"
| [ 0:00] ## Line: 74 	 lvremove -ff $vg
| [ 0:00] ## Line: 75 	 
| [ 0:00] ## Line: 76 	 # convert linear to 2-way mirror with 1 PV
| [ 0:00] ## Line: 77 	 lvcreate -aey -l2 -n $lv1 $vg "$dev1"
| [ 0:00] ## Line: 78 	 not lvconvert -m+1 --mirrorlog core $vg/$lv1 "$dev1"
| [ 0:00] ## Line: 79 	 lvremove -ff $vg
| [ 0:00] ## Line: 80 	 
| [ 0:00] ## Line: 81 	 # Start w/ 3-way mirror
| [ 0:00] ## Line: 82 	 # Test pulling primary image before mirror in-sync (should fail)
| [ 0:00] ## Line: 83 	 # Test pulling primary image after mirror in-sync (should work)
| [ 0:00] ## Line: 84 	 # Test that the correct devices remain in the mirror
| [ 0:00] ## Line: 85 	 offset=$(get first_extent_sector "$dev2")
| [ 0:00] ## Line: 86 	 offset=$(( offset + 2 ))
| [ 0:00] ## Line: 87 	 # put 1 single slowing delayed sector
| [ 0:00] ## Line: 88 	 # update in case  mirror ever gets faster and allows parallel read
| [ 0:00] ## Line: 89 	 aux delay_dev "$dev2" 0 2000 ${offset}:1
| [ 0:00] ## Line: 90 	 lvcreate -aey -l5 -Zn -Wn --type mirror --regionsize 16K -m2 -n $lv1 $vg "$dev1" "$dev2" "$dev4" "$dev3:$DEVRANGE"
| [ 0:00] ## Line: 91 	 should not lvconvert -m-1 $vg/$lv1 "$dev1"
| [ 0:00] ## Line: 92 	 aux enable_dev "$dev2"
| [ 0:00] ## Line: 93 	 should lvconvert $vg/$lv1 # wait
| [ 0:00] ## Line: 94 	 lvconvert -m2 $vg/$lv1 "$dev1" "$dev2" "$dev4" "$dev3:0" # If the above "should" failed...
| [ 0:00] ## Line: 95 	 
| [ 0:00] ## Line: 96 	 aux wait_for_sync $vg $lv1
| [ 0:00] ## Line: 97 	 lvconvert -m-1 $vg/$lv1 "$dev1"
| [ 0:00] ## Line: 98 	 check mirror_images_on $vg $lv1 "$dev2" "$dev4"
| [ 0:00] ## Line: 99 	 lvconvert -m-1 $vg/$lv1 "$dev2"
| [ 0:00] ## Line: 100 	 check linear $vg $lv1
| [ 0:00] ## Line: 101 	 check lv_on $vg $lv1 "$dev4"
| [ 0:00] ## Line: 102 	 lvremove -ff $vg
| [ 0:00] ## Line: 103 	 
| [ 0:00] ## Line: 104 	 # FIXME: lots of unneeded extents here for log - it needs to be at least region_size in size
| [ 0:00] ## Line: 105 	 # No parallel lvconverts on a single LV please
| [ 0:00] ## Line: 106 	 
| [ 0:00] ## Line: 107 	 lvcreate -aey -Zn -Wn -l8 --type mirror -m1 -n $lv1 $vg "$dev1" "$dev2" "$dev3:0-8"
| [ 0:00] ## Line: 108 	 check mirror $vg $lv1
| [ 0:00] ## Line: 109 	 check mirror_legs $vg $lv1 2
| [ 0:00] ## Line: 110 	 
| [ 0:00] ## Line: 111 	 offset=$(get first_extent_sector "$dev4")
| [ 0:00] ## Line: 112 	 offset=$(( offset + 2 ))
| [ 0:00] ## Line: 113 	 aux delay_dev "$dev4" 0 2000 ${offset}:
| [ 0:00] ## Line: 114 	 LVM_TEST_TAG="kill_me_$PREFIX" lvconvert -m+1 -b $vg/$lv1 "$dev4"
| [ 0:00] ## Line: 115 	 
| [ 0:00] ## Line: 116 	 # Next convert should fail b/c we can't have 2 at once
| [ 0:00] ## Line: 117 	 should not lvconvert -m+1 $vg/$lv1 "$dev5"
| [ 0:00] ## Line: 118 	 aux enable_dev "$dev4"
| [ 0:00] ## Line: 119 	 should lvconvert $vg/$lv1 # wait
| [ 0:00] ## Line: 120 	 lvconvert -m2 $vg/$lv1 # In case the above "should" actually failed
| [ 0:00] ## Line: 121 	 
| [ 0:00] ## Line: 122 	 check mirror $vg $lv1 "$dev3"
| [ 0:00] ## Line: 123 	 check mirror_no_temporaries $vg $lv1
| [ 0:00] ## Line: 124 	 check mirror_legs $vg $lv1 3
| [ 0:00] ## Line: 125 	 lvremove -ff $vg
| [ 0:00] ## Line: 126 	 
| [ 0:00] ## Line: 127 	 # add 1 mirror to core log mirror, but
| [ 0:00] ## Line: 128 	 #  implicitly keep log as 'core'
| [ 0:00] ## Line: 129 	 lvcreate -aey -l2 --type mirror -m1 --mirrorlog core -n $lv1 $vg "$dev1" "$dev2"
| [ 0:00] ## Line: 130 	 lvconvert -m +1 -i1 $vg/$lv1
| [ 0:00] ## Line: 131 	 
| [ 0:00] ## Line: 132 	 check mirror $vg $lv1 core
| [ 0:00] ## Line: 133 	 check mirror_no_temporaries $vg $lv1
| [ 0:00] ## Line: 134 	 check mirror_legs $vg $lv1 3
| [ 0:00] ## Line: 135 	 lvremove -ff $vg
| [ 0:00] ## Line: 136 	 
| [ 0:00] ## Line: 137 	 # remove 1 mirror from corelog'ed mirror; should retain 'core' log type
| [ 0:00] ## Line: 138 	 lvcreate -aey -l2 --type mirror -m2 --corelog -n $lv1 $vg
| [ 0:00] ## Line: 139 	 lvconvert -m -1 -i1 $vg/$lv1
| [ 0:00] ## Line: 140 	 
| [ 0:00] ## Line: 141 	 check mirror $vg $lv1 core
| [ 0:00] ## Line: 142 	 check mirror_no_temporaries $vg $lv1
| [ 0:00] ## Line: 143 	 check mirror_legs $vg $lv1 2
| [ 0:00] ## Line: 144 	 lvremove -ff $vg
| [ 0:00] ## Line: 145 	 
| [ 0:00] ## Line: 146 	 # add 1 mirror then add 1 more mirror during conversion
| [ 0:00] ## Line: 147 	 # FIXME this has been explicitly forbidden?
| [ 0:00] ## Line: 148 	 #lvcreate -l2 --type mirror -m1 -n $lv1 $vg "$dev1" "$dev2" "$dev3":0
| [ 0:00] ## Line: 149 	 #lvconvert -m+1 -b $vg/$lv1 "$dev4"
| [ 0:00] ## Line: 150 	 #lvconvert -m+1 $vg/$lv1 "$dev5"
| [ 0:00] ## Line: 151 	 #
| [ 0:00] ## Line: 152 	 #check mirror $vg $lv1 "$dev3"
| [ 0:00] ## Line: 153 	 #check mirror_no_temporaries $vg $lv1
| [ 0:00] ## Line: 154 	 #check mirror_legs $vg $lv1 4
| [ 0:00] ## Line: 155 	 #lvremove -ff $vg
| [ 0:00] ## Line: 156 	 
| [ 0:00] ## Line: 157 	 # convert inactive mirror and start polling
| [ 0:00] ## Line: 158 	 lvcreate -aey -l2 --type mirror -m1 -n $lv1 $vg "$dev1" "$dev2" "$dev3:$DEVRANGE"
| [ 0:00] ## Line: 159 	 lvchange -an $vg/$lv1
| [ 0:00] ## Line: 160 	 lvconvert -m+1 $vg/$lv1 "$dev4"
| [ 0:00] ## Line: 161 	 lvchange -aey $vg/$lv1
| [ 0:00] ## Line: 162 	 should lvconvert $vg/$lv1 # wait
| [ 0:00] ## Line: 163 	 check mirror $vg $lv1 "$dev3"
| [ 0:00] ## Line: 164 	 check mirror_no_temporaries $vg $lv1
| [ 0:00] ## Line: 165 	 lvremove -ff $vg
| [ 0:00] ## Line: 166 	 
| [ 0:00] ## Line: 167 	 # ---------------------------------------------------------------------
| [ 0:00] ## Line: 168 	 # removal during conversion
| [ 0:00] ## Line: 169 	 
| [ 0:00] ## Line: 170 	 # "remove newly added mirror"
| [ 0:00] ## Line: 171 	 lvcreate -aey -l2 --type mirror -m1 -n $lv1 $vg "$dev1" "$dev2" "$dev3:$DEVRANGE"
| [ 0:00] ## Line: 172 	 LVM_TEST_TAG="kill_me_$PREFIX" lvconvert -m+1 -b $vg/$lv1 "$dev4"
| [ 0:00] ## Line: 173 	 lvconvert -m-1 $vg/$lv1 "$dev4"
| [ 0:00] ## Line: 174 	 should lvconvert $vg/$lv1 # wait
| [ 0:00] ## Line: 175 	 
| [ 0:00] ## Line: 176 	 check mirror $vg $lv1 "$dev3"
| [ 0:00] ## Line: 177 	 check mirror_no_temporaries $vg $lv1
| [ 0:00] ## Line: 178 	 check mirror_legs $vg $lv1 2
| [ 0:00] ## Line: 179 	 lvremove -ff $vg
| [ 0:00] ## Line: 180 	 
| [ 0:00] ## Line: 181 	 # "remove one of newly added mirrors"
| [ 0:00] ## Line: 182 	 lvcreate -aey -l2 --type mirror -m1 -n $lv1 $vg "$dev1" "$dev2" "$dev3:$DEVRANGE"
| [ 0:00] ## Line: 183 	 LVM_TEST_TAG="kill_me_$PREFIX" lvconvert -m+2 -b $vg/$lv1 "$dev4" "$dev5"
| [ 0:00] ## Line: 184 	 lvconvert -m-1 $vg/$lv1 "$dev4"
| [ 0:00] ## Line: 185 	 should lvconvert $vg/$lv1 # wait
| [ 0:00] ## Line: 186 	 
| [ 0:00] ## Line: 187 	 check mirror $vg $lv1 "$dev3"
| [ 0:00] ## Line: 188 	 check mirror_no_temporaries $vg $lv1
| [ 0:00] ## Line: 189 	 check mirror_legs $vg $lv1 3
| [ 0:00] ## Line: 190 	 lvremove -ff $vg
| [ 0:00] ## Line: 191 	 
| [ 0:00] ## Line: 192 	 # "remove from original mirror (the original is still mirror)"
| [ 0:00] ## Line: 193 	 lvcreate -aey -l2 --type mirror -m2 -n $lv1 $vg "$dev1" "$dev2" "$dev5" "$dev3:$DEVRANGE"
| [ 0:00] ## Line: 194 	 LVM_TEST_TAG="kill_me_$PREFIX" lvconvert -m+1 -b $vg/$lv1 "$dev4"
| [ 0:00] ## Line: 195 	 # FIXME: Extra wait here for mirror upconvert synchronization
| [ 0:00] ## Line: 196 	 # otherwise we may fail her on parallel upconvert and downconvert
| [ 0:00] ## Line: 197 	 # lvconvert-mirror-updown.sh tests this errornous case separately
| [ 0:00] ## Line: 198 	 should lvconvert $vg/$lv1
| [ 0:00] ## Line: 199 	 lvconvert -m-1 $vg/$lv1 "$dev2"
| [ 0:00] ## Line: 200 	 should lvconvert $vg/$lv1
| [ 0:00] ## Line: 201 	 
| [ 0:00] ## Line: 202 	 check mirror $vg $lv1 "$dev3"
| [ 0:00] ## Line: 203 	 check mirror_no_temporaries $vg $lv1
| [ 0:00] ## Line: 204 	 check mirror_legs $vg $lv1 3
| [ 0:00] ## Line: 205 	 lvremove -ff $vg
| [ 0:00] ## Line: 206 	 
| [ 0:00] ## Line: 207 	 # "remove from original mirror (the original becomes linear)"
| [ 0:00] ## Line: 208 	 lvcreate -aey -l2 --type mirror -m1 -n $lv1 $vg "$dev1" "$dev2" "$dev3:$DEVRANGE"
| [ 0:00] ## Line: 209 	 LVM_TEST_TAG="kill_me_$PREFIX" lvconvert -m+1 -b $vg/$lv1 "$dev4"
| [ 0:00] ## Line: 210 	 # FIXME: Extra wait here for mirror upconvert synchronization
| [ 0:00] ## Line: 211 	 # otherwise we may fail her on parallel upconvert and downconvert
| [ 0:00] ## Line: 212 	 # lvconvert-mirror-updown.sh tests this errornous case separately
| [ 0:00] ## Line: 213 	 should lvconvert $vg/$lv1
| [ 0:00] ## Line: 214 	 lvconvert -m-1 $vg/$lv1 "$dev2"
| [ 0:00] ## Line: 215 	 should lvconvert $vg/$lv1
| [ 0:00] ## Line: 216 	 
| [ 0:00] ## Line: 217 	 check mirror $vg $lv1 "$dev3"
| [ 0:00] ## Line: 218 	 check mirror_no_temporaries $vg $lv1
| [ 0:00] ## Line: 219 	 check mirror_legs $vg $lv1 2
| [ 0:00] ## Line: 220 	 lvremove -ff $vg
| [ 0:00] ## Line: 221 	 
| [ 0:00] ## Line: 222 	 # Check the same with new --startpool lvconvert command option
| [ 0:00] ## Line: 223 	 lvcreate -aey -l2 --type mirror -m1 -n $lv1 $vg "$dev1" "$dev2" "$dev3:$DEVRANGE"
| [ 0:00] ## Line: 224 	 LVM_TEST_TAG="kill_me_$PREFIX" lvconvert -m+1 -b $vg/$lv1 "$dev4"
| [ 0:00] ## Line: 225 	 # FIXME: Extra wait here for mirror upconvert synchronization
| [ 0:00] ## Line: 226 	 # otherwise we may fail her on parallel upconvert and downconvert
| [ 0:00] ## Line: 227 	 # lvconvert-mirror-updown.sh tests this errornous case separately
| [ 0:00] ## Line: 228 	 should lvconvert --startpoll $vg/$lv1
| [ 0:00] ## Line: 229 	 lvconvert -m-1 $vg/$lv1 "$dev2"
| [ 0:00] ## Line: 230 	 should lvconvert --startpoll $vg/$lv1
| [ 0:00] ## Line: 231 	 
| [ 0:00] ## Line: 232 	 check mirror $vg $lv1 "$dev3"
| [ 0:00] ## Line: 233 	 check mirror_no_temporaries $vg $lv1
| [ 0:00] ## Line: 234 	 check mirror_legs $vg $lv1 2
| [ 0:00] ## Line: 235 	 lvremove -ff $vg
| [ 0:00] ## Line: 236 	 
| [ 0:00] ## Line: 237 	 # ---------------------------------------------------------------------
| [ 0:00] ## Line: 238 	 
| [ 0:00] ## Line: 239 	 # "rhbz440405: lvconvert -m0 incorrectly fails if all PEs allocated"
| [ 0:00] ## Line: 240 	 lvcreate -aey -l "$(get pv_field "$dev1" pe_count)" --type mirror -m1 -n $lv1 $vg "$dev1" "$dev2" "$dev3:$DEVRANGE"
| [ 0:00] ## Line: 241 	 aux wait_for_sync $vg $lv1
| [ 0:00] ## Line: 242 	 lvconvert -m0 $vg/$lv1 "$dev1"
| [ 0:00] ## Line: 243 	 check linear $vg $lv1
| [ 0:00] ## Line: 244 	 lvremove -ff $vg
| [ 0:00] ## Line: 245 	 
| [ 0:00] ## Line: 246 	 # "rhbz264241: lvm mirror doesn't lose it's "M" --nosync attribute
| [ 0:00] ## Line: 247 	 # after being down and the up converted"
| [ 0:00] ## Line: 248 	 lvcreate -aey -l2 --type mirror -m1 -n $lv1 --nosync $vg
| [ 0:00] ## Line: 249 	 lvconvert -m0 $vg/$lv1
| [ 0:00] ## Line: 250 	 lvconvert --type mirror -m1 $vg/$lv1
| [ 0:00] ## Line: 251 	 lvs --noheadings -o attr $vg/$lv1 | grep '^[[:space:]]*m'
| [ 0:00] ## Line: 252 	 lvremove -ff $vg
| [ 0:00] ## Line: 253 	 
| [ 0:00] ## Line: 254 	 # lvconvert from linear (on multiple PVs) to mirror
| [ 0:00] ## Line: 255 	 lvcreate -aey -l 8 -n $lv1 $vg "$dev1:0-3" "$dev2:0-3"
| [ 0:00] ## Line: 256 	 lvconvert --type mirror -m1 $vg/$lv1
| [ 0:00] ## Line: 257 	 
| [ 0:00] ## Line: 258 	 should check mirror $vg $lv1
| [ 0:00] ## Line: 259 	 check mirror_legs $vg $lv1 2
| [ 0:00] ## Line: 260 	 lvremove -ff $vg
| [ 0:00] ## Line: 261 	 
| [ 0:00] ## Line: 262 	 # BZ 463272: disk log mirror convert option is lost if downconvert option is also given
| [ 0:00] ## Line: 263 	 lvcreate -aey -l1 --type mirror -m2 --corelog -n $lv1 $vg "$dev1" "$dev2" "$dev3"
| [ 0:00] ## Line: 264 	 aux wait_for_sync $vg $lv1
| [ 0:00] ## Line: 265 	 lvconvert --type mirror -m1 --mirrorlog disk $vg/$lv1
| [ 0:00] ## Line: 266 	 check mirror $vg $lv1
| [ 0:00] ## Line: 267 	 not check mirror $vg $lv1 core
| [ 0:00] ## Line: 268 	 lvremove -ff $vg
| [ 0:00] ## Line: 269 	 
| [ 0:00] ## Line: 270 	 # ---
| [ 0:00] ## Line: 271 	 # add mirror and disk log
| [ 0:00] ## Line: 272 	 
| [ 0:00] ## Line: 273 	 # "add 1 mirror and disk log"
| [ 0:00] ## Line: 274 	 lvcreate -aey -l2 --type mirror -m1 --mirrorlog core -n $lv1 $vg "$dev1" "$dev2"
| [ 0:00] ## Line: 275 	 
| [ 0:00] ## Line: 276 	 # FIXME on next line, specifying $dev3:0 $dev4 (i.e log device first) fails (!)
| [ 0:00] ## Line: 277 	 lvconvert -m+1 --mirrorlog disk -i1 $vg/$lv1 "$dev4" "$dev3:$DEVRANGE"
| [ 0:00] ## Line: 278 	 
| [ 0:00] ## Line: 279 	 check mirror $vg $lv1 "$dev3"
| [ 0:00] ## Line: 280 	 check mirror_no_temporaries $vg $lv1
| [ 0:00] ## Line: 281 	 check mirror_legs $vg $lv1 3
| [ 0:00] ## Line: 282 	 lvremove -ff $vg
| [ 0:00] ## Line: 283 	 
| [ 0:00] ## Line: 284 	 # simple mirrored stripe
| [ 0:00] ## Line: 285 	 lvcreate -aey -i2 -l10 -n $lv1 $vg
| [ 0:00] ## Line: 286 	 lvconvert --type mirror -m1 -i1 $vg/$lv1
| [ 0:00] ## Line: 287 	 lvreduce -f -l1 $vg/$lv1
| [ 0:00] ## Line: 288 	 lvextend -f -l10 $vg/$lv1
| [ 0:00] ## Line: 289 	 lvremove -ff $vg/$lv1
| [ 0:00] ## Line: 290 	 
| [ 0:00] ## Line: 291 	 # extents must be divisible
| [ 0:00] ## Line: 292 	 lvcreate -aey -l15 -n $lv1 $vg
| [ 0:00] ## Line: 293 	 not lvconvert --type mirror -m1 --corelog --stripes 2 $vg/$lv1
| [ 0:00] ## Line: 294 	 lvremove -ff $vg
| [ 0:00] ## Line: 295 	 
| [ 0:00] ## Line: 296 	 test -e LOCAL_CLVMD && exit 0
| [ 0:00] ## Line: 297 	 
| [ 0:00] ## Line: 298 	 # FIXME - cases which needs to be fixed to work in cluster
| [ 0:00] ## Line: 299 	 # Linear to mirror with mirrored log using --alloc anywhere
| [ 0:00] ## Line: 300 	 lvcreate -aey -l2 -n $lv1 $vg "$dev1"
| [ 0:00] ## Line: 301 	 lvconvert --type mirror -m +1 --mirrorlog mirrored --alloc anywhere $vg/$lv1 "$dev1" "$dev2"
| [ 0:00] ## Line: 302 	 should check mirror $vg $lv1
| [ 0:00] ## Line: 303 	 lvremove -ff $vg
| [ 0:00] ## Line: 304 	 
| [ 0:00] ## Line: 305 	 # Should not be able to add images to --nosync mirror
| [ 0:00] ## Line: 306 	 # but should be able to after 'lvchange --resync'
| [ 0:00] ## Line: 307 	 lvcreate -aey --type mirror -m 1 -l1 -n $lv1 $vg --nosync
| [ 0:00] ## Line: 308 	 not lvconvert -m +1 $vg/$lv1
| [ 0:00] ## Line: 309 	 lvchange -aey --resync -y $vg/$lv1
| [ 0:00] ## Line: 310 	 lvconvert -m +1 $vg/$lv1
| [ 0:00] ## Line: 311 	 lvremove -ff $vg
| [ 0:00] ## Line: 312 	 
| [ 0:00] ## Line: 313 	 lvcreate -aey --type mirror -m 1 --corelog -l1 -n $lv1 $vg --nosync
| [ 0:00] ## Line: 314 	 not lvconvert -m +1 $vg/$lv1
| [ 0:00] ## Line: 315 	 lvchange -aey --resync -y $vg/$lv1
| [ 0:00] ## Line: 316 	 lvconvert -m +1 $vg/$lv1
| [ 0:00] ## Line: 317 	 lvremove -ff $vg
| [ 0:00] ## Line: 318 	 
| [ 0:00] ## Line: 319 	 # FIXME: Cluster exclusive activation does not work here
| [ 0:00] ## Line: 320 	 # unsure why  lib/metadata/mirror.c
| [ 0:00] ## Line: 321 	 # has this code:
| [ 0:00] ## Line: 322 	 #
| [ 0:00] ## Line: 323 	 #       } else if (vg_is_clustered(vg)) {
| [ 0:00] ## Line: 324 	 #                log_error("Unable to convert the log of an inactive "
| [ 0:00] ## Line: 325 	 #                          "cluster mirror, %s", lv->name);
| [ 0:00] ## Line: 326 	 #                return 0;
| [ 0:00] ## Line: 327 	 # disabling this in the code passes this test
| [ 0:00] ## Line: 328 	 
| [ 0:00] ## Line: 329 	 # bz192865: lvconvert log of an inactive mirror lv
| [ 0:00] ## Line: 330 	 # convert from disklog to corelog, inactive
| [ 0:00] ## Line: 331 	 lvcreate -aey -l2 --type mirror -m1 -n $lv1 $vg "$dev1" "$dev2" "$dev3:0-1"
| [ 0:00] ## Line: 332 	 lvchange -an $vg/$lv1
| [ 0:00] ## Line: 333 	 lvconvert -y -f --mirrorlog core $vg/$lv1
| [ 0:00] ## Line: 334 	 check mirror $vg $lv1 core
| [ 0:00] ## Line: 335 	 lvremove -ff $vg
| [ 0:00] ## Line: 336 	 
| [ 0:00] ## Line: 337 	 # convert from corelog to disklog, inactive
| [ 0:00] ## Line: 338 	 lvcreate -aey -l2 --type mirror -m1 --mirrorlog core -n $lv1 $vg "$dev1" "$dev2"
| [ 0:00] ## Line: 339 	 lvchange -an $vg/$lv1
| [ 0:00] ## Line: 340 	 lvconvert --mirrorlog disk $vg/$lv1 "$dev3:0-1"
| [ 0:00] ## Line: 341 	 check mirror $vg $lv1 "$dev3"
| [ 0:00] ## Line: 342 	 lvremove -ff $vg
| [ 0:00] ## Line: 343 	 
| [ 0:00] ## Line: 344 	 # bz1272175: check lvconvert reports progress while waiting for mirror
| [ 0:00] ## Line: 345 	 # to get synced
| [ 0:00] ## Line: 346 	 lvcreate -l2 -n $lv1 $vg
| [ 0:00] ## Line: 347 	 lvconvert --type mirror -i1 -m1 $vg/$lv1 | tee out
| [ 0:00] ## Line: 348 	 grep -e "$vg/$lv1: Converted:" out || die "Missing sync info in foreground mode"
| [ 0:00] ## Line: 349 	 lvremove -ff $vg
| [ 0:00] ## Line: 350 	 
| [ 0:00] ## Line: 351 	 vgremove -ff $vg
| [ 0:00] aux teardown
| [ 0:00] #lvconvert-mirror.sh:1+ aux teardown
| [ 0:00] ## teardown.........ok
###       failed: [ndev-vanilla] shell/lvconvert-mirror.sh
###      skipped: [ndev-vanilla] shell/lvconvert-raid-allocation.sh
###      skipped: [ndev-vanilla] shell/lvconvert-raid-regionsize.sh
###      skipped: [ndev-vanilla] shell/lvconvert-raid-reshape-linear_to_striped.sh
###      skipped: [ndev-vanilla] shell/lvconvert-raid-reshape-load.sh
###      skipped: [ndev-vanilla] shell/lvconvert-raid-reshape-striped_to_linear.sh
###      skipped: [ndev-vanilla] shell/lvconvert-raid-reshape-stripes-load-fail.sh
###      skipped: [ndev-vanilla] shell/lvconvert-raid-reshape-stripes-load-reload.sh
###      skipped: [ndev-vanilla] shell/lvconvert-raid-reshape-stripes-load.sh
###      skipped: [ndev-vanilla] shell/lvconvert-raid-reshape.sh
###      skipped: [ndev-vanilla] shell/lvconvert-raid-status-validation.sh
###      skipped: [ndev-vanilla] shell/lvconvert-raid-takeover-alloc-failure.sh
###      skipped: [ndev-vanilla] shell/lvconvert-raid-takeover-thin.sh
###      skipped: [ndev-vanilla] shell/lvconvert-raid-takeover.sh
###      skipped: [ndev-vanilla] shell/lvconvert-raid.sh
###      skipped: [ndev-vanilla] shell/lvconvert-raid0_to_raid10.sh
###      skipped: [ndev-vanilla] shell/lvconvert-raid10.sh
###      skipped: [ndev-vanilla] shell/lvconvert-raid456.sh
###      skipped: [ndev-vanilla] shell/lvconvert-repair-cache.sh
###      skipped: [ndev-vanilla] shell/lvconvert-repair-dmeventd.sh

| [ 0:00] Library version:   1.02.146 (2017-12-18)
| [ 0:00] Driver version:    4.35.0
| [ 0:00] Kernel is Linux localhost.localdomain 3.10.0-693.11.1.el7.x86_64 #1 SMP Mon Dec 4 23:52:40 UTC 2017 x86_64 GNU/Linux
| [ 0:00] Selinux mode is not installed.
| [ 0:00]               total        used        free      shared  buff/cache   available
| [ 0:00] Mem:           7822        1070        4158          10        2594        6445
| [ 0:00] Swap:          4095           0        4095
| [ 0:00] Filesystem      Size  Used Avail Use% Mounted on
| [ 0:00] /dev/sdc1        18G  8.4G  8.4G  50% /
| [ 0:00] /dev/sdd1        51G  6.1G   43G  13% /lfskernel
| [ 0:00] devtmpfs        3.9G     0  3.9G   0% /dev
| [ 0:00] tmpfs           3.9G     0  3.9G   0% /run
| [ 0:00] @TESTDIR=/tmp/LVMTEST336.1BYl7OymwI
| [ 0:00] @PREFIX=LVMTEST336
| [ 0:00] ## LVMCONF: activation {
| [ 0:00] ## LVMCONF:     checks = 1
| [ 0:00] ## LVMCONF:     monitoring = 0
| [ 0:00] ## LVMCONF:     polling_interval = 1
| [ 0:00] ## LVMCONF:     raid_region_size = 512
| [ 0:00] ## LVMCONF:     retry_deactivation = 1
| [ 0:00] ## LVMCONF:     snapshot_autoextend_percent = 50
| [ 0:00] ## LVMCONF:     snapshot_autoextend_threshold = 50
| [ 0:00] ## LVMCONF:     udev_rules = 1
| [ 0:00] ## LVMCONF:     udev_sync = 1
| [ 0:00] ## LVMCONF:     verify_udev_operations = 1
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: allocation {
| [ 0:00] ## LVMCONF:     wipe_signatures_when_zeroing_new_lvs = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: backup {
| [ 0:00] ## LVMCONF:     archive = 0
| [ 0:00] ## LVMCONF:     backup = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: devices {
| [ 0:00] ## LVMCONF:     cache_dir = "@TESTDIR@/etc"
| [ 0:00] ## LVMCONF:     default_data_alignment = 1
| [ 0:00] ## LVMCONF:     dir = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     filter = "a|.*|"
| [ 0:00] ## LVMCONF:     global_filter = [ "a|@TESTDIR@/dev/mapper/@PREFIX@.*pv[0-9_]*$|", "r|.*|" ]
| [ 0:00] ## LVMCONF:     md_component_detection  = 0
| [ 0:00] ## LVMCONF:     scan = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     sysfs_scan = 1
| [ 0:00] ## LVMCONF:     write_cache_state = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: dmeventd {
| [ 0:00] ## LVMCONF:     executable = "/sources/boot/LVM2.2.02.177/test/lib/dmeventd"
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: global {
| [ 0:00] ## LVMCONF:     abort_on_internal_errors = 1
| [ 0:00] ## LVMCONF:     cache_check_executable = "/usr/sbin/cache_check"
| [ 0:00] ## LVMCONF:     cache_dump_executable = "/usr/sbin/cache_dump"
| [ 0:00] ## LVMCONF:     cache_repair_executable = "/usr/sbin/cache_repair"
| [ 0:00] ## LVMCONF:     detect_internal_vg_cache_corruption = 1
| [ 0:00] ## LVMCONF:     fallback_to_local_locking = 0
| [ 0:00] ## LVMCONF:     fsadm_executable = "/sources/boot/LVM2.2.02.177/test/lib/fsadm"
| [ 0:00] ## LVMCONF:     library_dir = "@TESTDIR@/lib"
| [ 0:00] ## LVMCONF:     locking_dir = "@TESTDIR@/var/lock/lvm"
| [ 0:00] ## LVMCONF:     locking_type=1
| [ 0:00] ## LVMCONF:     notify_dbus = 0
| [ 0:00] ## LVMCONF:     si_unit_consistency = 1
| [ 0:00] ## LVMCONF:     thin_check_executable = "/usr/sbin/thin_check"
| [ 0:00] ## LVMCONF:     thin_dump_executable = "/usr/sbin/thin_dump"
| [ 0:00] ## LVMCONF:     thin_repair_executable = "/usr/sbin/thin_repair"
| [ 0:00] ## LVMCONF:     use_lvmetad = 0
| [ 0:00] ## LVMCONF:     use_lvmlockd = 0
| [ 0:00] ## LVMCONF:     use_lvmpolld = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: log {
| [ 0:00] ## LVMCONF:     activation = 1
| [ 0:00] ## LVMCONF:     file = "@TESTDIR@/debug.log"
| [ 0:00] ## LVMCONF:     indent = 1
| [ 0:00] ## LVMCONF:     level = 9
| [ 0:00] ## LVMCONF:     overwrite = 1
| [ 0:00] ## LVMCONF:     syslog = 0
| [ 0:00] ## LVMCONF:     verbose = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] <======== Processing test: "lvconvert-repair-mirror.sh" ========>
| [ 0:00] 
| [ 0:00] MOUNT_DIR=mnt
| [ 0:00] #lvconvert-repair-mirror.sh:18+ MOUNT_DIR=mnt
| [ 0:00] MKFS=$(which mkfs.ext3) || skip
| [ 0:00] ##lvconvert-repair-mirror.sh:19+ which mkfs.ext3
| [ 0:00] #lvconvert-repair-mirror.sh:19+ MKFS=/sbin/mkfs.ext3
| [ 0:00] 
| [ 0:00] cleanup_mounted_and_teardown()
| [ 0:00] {
| [ 0:00] 	umount "$MOUNT_DIR" || true
| [ 0:00] 	aux teardown
| [ 0:00] }
| [ 0:00] 
| [ 0:00] aux lvmconf 'allocation/mirror_logs_require_separate_pvs = 1'
| [ 0:00] #lvconvert-repair-mirror.sh:27+ aux lvmconf 'allocation/mirror_logs_require_separate_pvs = 1'
| [ 0:00] ## LVMCONF: activation {
| [ 0:00] ## LVMCONF:     checks = 1
| [ 0:00] ## LVMCONF:     monitoring = 0
| [ 0:00] ## LVMCONF:     polling_interval = 1
| [ 0:00] ## LVMCONF:     raid_region_size = 512
| [ 0:00] ## LVMCONF:     retry_deactivation = 1
| [ 0:00] ## LVMCONF:     snapshot_autoextend_percent = 50
| [ 0:00] ## LVMCONF:     snapshot_autoextend_threshold = 50
| [ 0:00] ## LVMCONF:     udev_rules = 1
| [ 0:00] ## LVMCONF:     udev_sync = 1
| [ 0:00] ## LVMCONF:     verify_udev_operations = 1
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: allocation {
| [ 0:00] ## LVMCONF:     mirror_logs_require_separate_pvs = 1
| [ 0:00] ## LVMCONF:     wipe_signatures_when_zeroing_new_lvs = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: backup {
| [ 0:00] ## LVMCONF:     archive = 0
| [ 0:00] ## LVMCONF:     backup = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: devices {
| [ 0:00] ## LVMCONF:     cache_dir = "@TESTDIR@/etc"
| [ 0:00] ## LVMCONF:     default_data_alignment = 1
| [ 0:00] ## LVMCONF:     dir = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     filter = "a|.*|"
| [ 0:00] ## LVMCONF:     global_filter = [ "a|@TESTDIR@/dev/mapper/@PREFIX@.*pv[0-9_]*$|", "r|.*|" ]
| [ 0:00] ## LVMCONF:     md_component_detection  = 0
| [ 0:00] ## LVMCONF:     scan = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     sysfs_scan = 1
| [ 0:00] ## LVMCONF:     write_cache_state = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: dmeventd {
| [ 0:00] ## LVMCONF:     executable = "/sources/boot/LVM2.2.02.177/test/lib/dmeventd"
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: global {
| [ 0:00] ## LVMCONF:     abort_on_internal_errors = 1
| [ 0:00] ## LVMCONF:     cache_check_executable = "/usr/sbin/cache_check"
| [ 0:00] ## LVMCONF:     cache_dump_executable = "/usr/sbin/cache_dump"
| [ 0:00] ## LVMCONF:     cache_repair_executable = "/usr/sbin/cache_repair"
| [ 0:00] ## LVMCONF:     detect_internal_vg_cache_corruption = 1
| [ 0:00] ## LVMCONF:     fallback_to_local_locking = 0
| [ 0:00] ## LVMCONF:     fsadm_executable = "/sources/boot/LVM2.2.02.177/test/lib/fsadm"
| [ 0:00] ## LVMCONF:     library_dir = "@TESTDIR@/lib"
| [ 0:00] ## LVMCONF:     locking_dir = "@TESTDIR@/var/lock/lvm"
| [ 0:00] ## LVMCONF:     locking_type=1
| [ 0:00] ## LVMCONF:     notify_dbus = 0
| [ 0:00] ## LVMCONF:     si_unit_consistency = 1
| [ 0:00] ## LVMCONF:     thin_check_executable = "/usr/sbin/thin_check"
| [ 0:00] ## LVMCONF:     thin_dump_executable = "/usr/sbin/thin_dump"
| [ 0:00] ## LVMCONF:     thin_repair_executable = "/usr/sbin/thin_repair"
| [ 0:00] ## LVMCONF:     use_lvmetad = 0
| [ 0:00] ## LVMCONF:     use_lvmlockd = 0
| [ 0:00] ## LVMCONF:     use_lvmpolld = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: log {
| [ 0:00] ## LVMCONF:     activation = 1
| [ 0:00] ## LVMCONF:     file = "@TESTDIR@/debug.log"
| [ 0:00] ## LVMCONF:     indent = 1
| [ 0:00] ## LVMCONF:     level = 9
| [ 0:00] ## LVMCONF:     overwrite = 1
| [ 0:00] ## LVMCONF:     syslog = 0
| [ 0:00] ## LVMCONF:     verbose = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] 
| [ 0:00] aux prepare_vg 5
| [ 0:00] #lvconvert-repair-mirror.sh:29+ aux prepare_vg 5
| [ 0:00] ## preparing loop device....ok (/dev/loop0)
| [ 0:00] ## preparing 5 devices...lib/utils: line 212: DM_UDEV_COOKIE: unbound variable
| [ 0:00] set +vx; STACKTRACE; set -vx
| [ 0:00] ##lvconvert-repair-mirror.sh:29+ set +vx
| [ 0:00] ## - /lfskernel/sources/boot/LVM2.2.02.177/test/shell/lvconvert-repair-mirror.sh:29
| [ 0:00] ## 1 STACKTRACE() called from /lfskernel/sources/boot/LVM2.2.02.177/test/shell/lvconvert-repair-mirror.sh:29
| [ 0:00] <======== Info ========>
| [ 0:00] ## DMINFO:   Name             Maj Min Stat Open Targ Event  UUID                                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv5    253   7 L--w    0    1      0 TEST-@PREFIX@pv5                                                  
| [ 0:00] ## DMINFO:   @PREFIX@pv4    253   5 L--w    0    1      0 TEST-@PREFIX@pv4                                                  
| [ 0:00] ## DMINFO:   @PREFIX@pv3    253   4 L--w    0    1      0 TEST-@PREFIX@pv3                                                  
| [ 0:00] ## DMINFO:   @PREFIX@pv2    253   3 L--w    0    1      0 TEST-@PREFIX@pv2                                                  
| [ 0:00] ## DMINFO:   @PREFIX@pv1    253   6 L--w    0    1      0 TEST-@PREFIX@pv1                                                  
| [ 0:00] <======== Active table ========>
| [ 0:00] ## DMTABLE:  @PREFIX@pv5: 0 69632 linear 7:0 280576
| [ 0:00] ## DMTABLE:  @PREFIX@pv4: 0 69632 linear 7:0 210944
| [ 0:00] ## DMTABLE:  @PREFIX@pv3: 0 69632 linear 7:0 141312
| [ 0:00] ## DMTABLE:  @PREFIX@pv2: 0 69632 linear 7:0 71680
| [ 0:00] ## DMTABLE:  @PREFIX@pv1: 0 69632 linear 7:0 2048
| [ 0:00] <======== Inactive table ========>
| [ 0:00] ## DMITABLE: @PREFIX@pv5: 
| [ 0:00] ## DMITABLE: @PREFIX@pv4: 
| [ 0:00] ## DMITABLE: @PREFIX@pv3: 
| [ 0:00] ## DMITABLE: @PREFIX@pv2: 
| [ 0:00] ## DMITABLE: @PREFIX@pv1: 
| [ 0:00] <======== Status ========>
| [ 0:00] ## DMSTATUS: @PREFIX@pv5: 0 69632 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv4: 0 69632 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv3: 0 69632 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv2: 0 69632 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv1: 0 69632 linear 
| [ 0:00] <======== Tree ========>
| [ 0:00] ## DMTREE:   @PREFIX@pv5 (253:7)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   @PREFIX@pv4 (253:5)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   @PREFIX@pv3 (253:4)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   @PREFIX@pv2 (253:3)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   @PREFIX@pv1 (253:6)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   LFS_vg-lfs (253:2)
| [ 0:00] ## DMTREE:    `- (8:16)
| [ 0:00] ## DMTREE:   centos-swap (253:1)
| [ 0:00] ## DMTREE:    `- (8:2)
| [ 0:00] ## DMTREE:   centos-root (253:0)
| [ 0:00] ## DMTREE:    `- (8:2)
| [ 0:00] <======== Recursive list of @TESTDIR@/dev ========>
| [ 0:00] ## LSLR:	@TESTDIR@/dev:
| [ 0:00] ## LSLR:	total 4
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 0 Feb 21 02:26 loop0
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 1 Feb 21 02:26 loop1
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 2 Feb 21 02:26 loop2
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 3 Feb 21 02:26 loop3
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 4 Feb 21 02:26 loop4
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 5 Feb 21 02:26 loop5
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 6 Feb 21 02:26 loop6
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 7 Feb 21 02:26 loop7
| [ 0:00] ## LSLR:	drwxr-xr-x 2 root root 4096 Feb 21 02:26 mapper
| [ 0:00] ## LSLR:	crw-r--r-- 1 root root 1, 3 Feb 21 02:26 testnull
| [ 0:00] ## LSLR:	
| [ 0:00] ## LSLR:	@TESTDIR@/dev/mapper:
| [ 0:00] ## LSLR:	total 0
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   6 Feb 21 02:26 @PREFIX@pv1
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   3 Feb 21 02:26 @PREFIX@pv2
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   4 Feb 21 02:26 @PREFIX@pv3
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   5 Feb 21 02:26 @PREFIX@pv4
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   7 Feb 21 02:26 @PREFIX@pv5
| [ 0:00] ## LSLR:	crw------- 1 root root  10, 236 Feb 21 02:26 control
| [ 0:00] <======== Udev DB content ========>
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-0
| [ 0:00] ## UDEV:	N: dm-0
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-0
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-0
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=0
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-1
| [ 0:00] ## UDEV:	N: dm-1
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-1
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-1
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=1
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-2
| [ 0:00] ## UDEV:	N: dm-2
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-2
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-2
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=2
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-3
| [ 0:00] ## UDEV:	N: dm-3
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-3
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-3
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=3
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-4
| [ 0:00] ## UDEV:	N: dm-4
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-4
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-4
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=4
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-5
| [ 0:00] ## UDEV:	N: dm-5
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-5
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-5
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=5
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-6
| [ 0:00] ## UDEV:	N: dm-6
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-6
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-6
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=6
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-7
| [ 0:00] ## UDEV:	N: dm-7
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-7
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-7
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=7
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/loop0
| [ 0:00] ## UDEV:	N: loop0
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/loop0
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/loop0
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=7
| [ 0:00] ## UDEV:	E: MINOR=0
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] <======== Script file "lvconvert-repair-mirror.sh" ========>
| [ 0:00] ## Line: 1 	 #!/usr/bin/env bash
| [ 0:00] ## Line: 2 	 
| [ 0:00] ## Line: 3 	 # Copyright (C) 2016 Red Hat, Inc. All rights reserved.
| [ 0:00] ## Line: 4 	 #
| [ 0:00] ## Line: 5 	 # This copyrighted material is made available to anyone wishing to use,
| [ 0:00] ## Line: 6 	 # modify, copy, or redistribute it subject to the terms and conditions
| [ 0:00] ## Line: 7 	 # of the GNU General Public License v.2.
| [ 0:00] ## Line: 8 	 #
| [ 0:00] ## Line: 9 	 # You should have received a copy of the GNU General Public License
| [ 0:00] ## Line: 10 	 # along with this program; if not, write to the Free Software Foundation,
| [ 0:00] ## Line: 11 	 # Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA
| [ 0:00] ## Line: 12 	 
| [ 0:00] ## Line: 13 	 SKIP_WITH_LVMLOCKD=1
| [ 0:00] ## Line: 14 	 SKIP_WITH_LVMPOLLD=1
| [ 0:00] ## Line: 15 	 
| [ 0:00] ## Line: 16 	 . lib/inittest
| [ 0:00] ## Line: 17 	 
| [ 0:00] ## Line: 18 	 MOUNT_DIR=mnt
| [ 0:00] ## Line: 19 	 MKFS=$(which mkfs.ext3) || skip
| [ 0:00] ## Line: 20 	 
| [ 0:00] ## Line: 21 	 cleanup_mounted_and_teardown()
| [ 0:00] ## Line: 22 	 {
| [ 0:00] ## Line: 23 	 	umount "$MOUNT_DIR" || true
| [ 0:00] ## Line: 24 	 	aux teardown
| [ 0:00] ## Line: 25 	 }
| [ 0:00] ## Line: 26 	 
| [ 0:00] ## Line: 27 	 aux lvmconf 'allocation/mirror_logs_require_separate_pvs = 1'
| [ 0:00] ## Line: 28 	 
| [ 0:00] ## Line: 29 	 aux prepare_vg 5
| [ 0:00] ## Line: 30 	 
| [ 0:00] ## Line: 31 	 ################### Check lost mirror leg #################
| [ 0:00] ## Line: 32 	 #
| [ 0:00] ## Line: 33 	 # NOTE: using  --regionsize 1M  has  major impact on my box
| [ 0:00] ## Line: 34 	 # on read performance while mirror is synchronized
| [ 0:00] ## Line: 35 	 # with the default 512K - my C2D T61 reads just couple MB/s!
| [ 0:00] ## Line: 36 	 #
| [ 0:00] ## Line: 37 	 lvcreate -aey --type mirror -L10 --regionsize 1M -m1 -n $lv1 $vg "$dev1" "$dev2" "$dev3"
| [ 0:00] ## Line: 38 	 "$MKFS" "$DM_DEV_DIR/$vg/$lv1"
| [ 0:00] ## Line: 39 	 mkdir "$MOUNT_DIR"
| [ 0:00] ## Line: 40 	 
| [ 0:00] ## Line: 41 	 aux delay_dev "$dev2" 0 500 "$(get first_extent_sector "$dev2"):"
| [ 0:00] ## Line: 42 	 aux delay_dev "$dev4" 0 500 "$(get first_extent_sector "$dev4"):"
| [ 0:00] ## Line: 43 	 #
| [ 0:00] ## Line: 44 	 # Enforce syncronization
| [ 0:00] ## Line: 45 	 # ATM requires unmounted/unused LV??
| [ 0:00] ## Line: 46 	 #
| [ 0:00] ## Line: 47 	 lvchange --yes --resync $vg/$lv1
| [ 0:00] ## Line: 48 	 trap 'cleanup_mounted_and_teardown' EXIT
| [ 0:00] ## Line: 49 	 mount "$DM_DEV_DIR/$vg/$lv1" "$MOUNT_DIR"
| [ 0:00] ## Line: 50 	 
| [ 0:00] ## Line: 51 	 # run 'dd' operation during failure of 'mlog/mimage' device
| [ 0:00] ## Line: 52 	 
| [ 0:00] ## Line: 53 	 dd if=/dev/zero of=mnt/zero bs=4K count=100 conv=fdatasync 2>err &
| [ 0:00] ## Line: 54 	 
| [ 0:00] ## Line: 55 	 PERCENT=$(get lv_field $vg/$lv1 copy_percent)
| [ 0:00] ## Line: 56 	 PERCENT=${PERCENT%%\.*}  # cut decimal
| [ 0:00] ## Line: 57 	 # and check less then 50% mirror is in sync (could be unusable delay_dev ?)
| [ 0:00] ## Line: 58 	 test "$PERCENT" -lt 50 || skip
| [ 0:00] ## Line: 59 	 #lvs -a -o+devices $vg
| [ 0:00] ## Line: 60 	 
| [ 0:00] ## Line: 61 	 #aux disable_dev "$dev3"
| [ 0:00] ## Line: 62 	 aux disable_dev "$dev2"
| [ 0:00] ## Line: 63 	 
| [ 0:00] ## Line: 64 	 lvconvert --yes --repair $vg/$lv1
| [ 0:00] ## Line: 65 	 lvs -a $vg
| [ 0:00] ## Line: 66 	 
| [ 0:00] ## Line: 67 	 aux enable_dev "$dev2"
| [ 0:00] ## Line: 68 	 
| [ 0:00] ## Line: 69 	 wait
| [ 0:00] ## Line: 70 	 # dd MAY NOT HAVE produced any error message
| [ 0:00] ## Line: 71 	 not grep error err
| [ 0:00] ## Line: 72 	 
| [ 0:00] ## Line: 73 	 lvs -a -o+devices $vg
| [ 0:00] ## Line: 74 	 umount "$MOUNT_DIR"
| [ 0:00] ## Line: 75 	 fsck -n "$DM_DEV_DIR/$vg/$lv1"
| [ 0:00] ## Line: 76 	 
| [ 0:00] ## Line: 77 	 aux enable_dev "$dev4"
| [ 0:00] ## Line: 78 	 lvremove -ff $vg
| [ 0:00] aux teardown
| [ 0:00] #lvconvert-repair-mirror.sh:1+ aux teardown
| [ 0:00] ## teardown.........ok
###       failed: [ndev-vanilla] shell/lvconvert-repair-mirror.sh

| [ 0:01] Library version:   1.02.146 (2017-12-18)
| [ 0:01] Driver version:    4.35.0
| [ 0:01] Kernel is Linux localhost.localdomain 3.10.0-693.11.1.el7.x86_64 #1 SMP Mon Dec 4 23:52:40 UTC 2017 x86_64 GNU/Linux
| [ 0:01] Selinux mode is not installed.
| [ 0:01]               total        used        free      shared  buff/cache   available
| [ 0:01] Mem:           7822        1075        4153          10        2594        6440
| [ 0:01] Swap:          4095           0        4095
| [ 0:01] Filesystem      Size  Used Avail Use% Mounted on
| [ 0:01] /dev/sdc1        18G  8.4G  8.4G  50% /
| [ 0:01] /dev/sdd1        51G  6.1G   43G  13% /lfskernel
| [ 0:01] devtmpfs        3.9G     0  3.9G   0% /dev
| [ 0:01] tmpfs           3.9G     0  3.9G   0% /run
| [ 0:01] @TESTDIR=/tmp/LVMTEST594.i8jvK5rcB2
| [ 0:01] @PREFIX=LVMTEST594
| [ 0:01] ## LVMCONF: activation {
| [ 0:01] ## LVMCONF:     checks = 1
| [ 0:01] ## LVMCONF:     monitoring = 0
| [ 0:01] ## LVMCONF:     polling_interval = 1
| [ 0:01] ## LVMCONF:     raid_region_size = 512
| [ 0:01] ## LVMCONF:     retry_deactivation = 1
| [ 0:01] ## LVMCONF:     snapshot_autoextend_percent = 50
| [ 0:01] ## LVMCONF:     snapshot_autoextend_threshold = 50
| [ 0:01] ## LVMCONF:     udev_rules = 1
| [ 0:01] ## LVMCONF:     udev_sync = 1
| [ 0:01] ## LVMCONF:     verify_udev_operations = 1
| [ 0:01] ## LVMCONF: }
| [ 0:01] ## LVMCONF: allocation {
| [ 0:01] ## LVMCONF:     wipe_signatures_when_zeroing_new_lvs = 0
| [ 0:01] ## LVMCONF: }
| [ 0:01] ## LVMCONF: backup {
| [ 0:01] ## LVMCONF:     archive = 0
| [ 0:01] ## LVMCONF:     backup = 0
| [ 0:01] ## LVMCONF: }
| [ 0:01] ## LVMCONF: devices {
| [ 0:01] ## LVMCONF:     cache_dir = "@TESTDIR@/etc"
| [ 0:01] ## LVMCONF:     default_data_alignment = 1
| [ 0:01] ## LVMCONF:     dir = "@TESTDIR@/dev"
| [ 0:01] ## LVMCONF:     filter = "a|.*|"
| [ 0:01] ## LVMCONF:     global_filter = [ "a|@TESTDIR@/dev/mapper/@PREFIX@.*pv[0-9_]*$|", "r|.*|" ]
| [ 0:01] ## LVMCONF:     md_component_detection  = 0
| [ 0:01] ## LVMCONF:     scan = "@TESTDIR@/dev"
| [ 0:01] ## LVMCONF:     sysfs_scan = 1
| [ 0:01] ## LVMCONF:     write_cache_state = 0
| [ 0:01] ## LVMCONF: }
| [ 0:01] ## LVMCONF: dmeventd {
| [ 0:01] ## LVMCONF:     executable = "/sources/boot/LVM2.2.02.177/test/lib/dmeventd"
| [ 0:01] ## LVMCONF: }
| [ 0:01] ## LVMCONF: global {
| [ 0:01] ## LVMCONF:     abort_on_internal_errors = 1
| [ 0:01] ## LVMCONF:     cache_check_executable = "/usr/sbin/cache_check"
| [ 0:01] ## LVMCONF:     cache_dump_executable = "/usr/sbin/cache_dump"
| [ 0:01] ## LVMCONF:     cache_repair_executable = "/usr/sbin/cache_repair"
| [ 0:01] ## LVMCONF:     detect_internal_vg_cache_corruption = 1
| [ 0:01] ## LVMCONF:     fallback_to_local_locking = 0
| [ 0:01] ## LVMCONF:     fsadm_executable = "/sources/boot/LVM2.2.02.177/test/lib/fsadm"
| [ 0:01] ## LVMCONF:     library_dir = "@TESTDIR@/lib"
| [ 0:01] ## LVMCONF:     locking_dir = "@TESTDIR@/var/lock/lvm"
| [ 0:01] ## LVMCONF:     locking_type=1
| [ 0:01] ## LVMCONF:     notify_dbus = 0
| [ 0:01] ## LVMCONF:     si_unit_consistency = 1
| [ 0:01] ## LVMCONF:     thin_check_executable = "/usr/sbin/thin_check"
| [ 0:01] ## LVMCONF:     thin_dump_executable = "/usr/sbin/thin_dump"
| [ 0:01] ## LVMCONF:     thin_repair_executable = "/usr/sbin/thin_repair"
| [ 0:01] ## LVMCONF:     use_lvmetad = 0
| [ 0:01] ## LVMCONF:     use_lvmlockd = 0
| [ 0:01] ## LVMCONF:     use_lvmpolld = 0
| [ 0:01] ## LVMCONF: }
| [ 0:01] ## LVMCONF: log {
| [ 0:01] ## LVMCONF:     activation = 1
| [ 0:01] ## LVMCONF:     file = "@TESTDIR@/debug.log"
| [ 0:01] ## LVMCONF:     indent = 1
| [ 0:01] ## LVMCONF:     level = 9
| [ 0:01] ## LVMCONF:     overwrite = 1
| [ 0:01] ## LVMCONF:     syslog = 0
| [ 0:01] ## LVMCONF:     verbose = 0
| [ 0:01] ## LVMCONF: }
| [ 0:01] <======== Processing test: "lvconvert-repair-policy.sh" ========>
| [ 0:01] 
| [ 0:01] aux prepare_vg 4
| [ 0:01] #lvconvert-repair-policy.sh:17+ aux prepare_vg 4
| [ 0:01] ## preparing loop device....ok (/dev/loop0)
| [ 0:01] ## preparing 4 devices...lib/utils: line 212: DM_UDEV_COOKIE: unbound variable
| [ 0:01] set +vx; STACKTRACE; set -vx
| [ 0:01] ##lvconvert-repair-policy.sh:17+ set +vx
| [ 0:01] ## - /lfskernel/sources/boot/LVM2.2.02.177/test/shell/lvconvert-repair-policy.sh:17
| [ 0:01] ## 1 STACKTRACE() called from /lfskernel/sources/boot/LVM2.2.02.177/test/shell/lvconvert-repair-policy.sh:17
| [ 0:01] <======== Info ========>
| [ 0:01] ## DMINFO:   Name             Maj Min Stat Open Targ Event  UUID                                                                
| [ 0:01] ## DMINFO:   @PREFIX@pv4    253   4 L--w    0    1      0 TEST-@PREFIX@pv4                                                  
| [ 0:01] ## DMINFO:   @PREFIX@pv3    253   3 L--w    0    1      0 TEST-@PREFIX@pv3                                                  
| [ 0:01] ## DMINFO:   @PREFIX@pv2    253   6 L--w    0    1      0 TEST-@PREFIX@pv2                                                  
| [ 0:01] ## DMINFO:   @PREFIX@pv1    253   5 L--w    0    1      0 TEST-@PREFIX@pv1                                                  
| [ 0:01] <======== Active table ========>
| [ 0:01] ## DMTABLE:  @PREFIX@pv4: 0 69632 linear 7:0 210944
| [ 0:01] ## DMTABLE:  @PREFIX@pv3: 0 69632 linear 7:0 141312
| [ 0:01] ## DMTABLE:  @PREFIX@pv2: 0 69632 linear 7:0 71680
| [ 0:01] ## DMTABLE:  @PREFIX@pv1: 0 69632 linear 7:0 2048
| [ 0:01] <======== Inactive table ========>
| [ 0:01] ## DMITABLE: @PREFIX@pv4: 
| [ 0:01] ## DMITABLE: @PREFIX@pv3: 
| [ 0:01] ## DMITABLE: @PREFIX@pv2: 
| [ 0:01] ## DMITABLE: @PREFIX@pv1: 
| [ 0:01] <======== Status ========>
| [ 0:01] ## DMSTATUS: @PREFIX@pv4: 0 69632 linear 
| [ 0:01] ## DMSTATUS: @PREFIX@pv3: 0 69632 linear 
| [ 0:01] ## DMSTATUS: @PREFIX@pv2: 0 69632 linear 
| [ 0:01] ## DMSTATUS: @PREFIX@pv1: 0 69632 linear 
| [ 0:01] <======== Tree ========>
| [ 0:01] ## DMTREE:   @PREFIX@pv4 (253:4)
| [ 0:01] ## DMTREE:    `- (7:0)
| [ 0:01] ## DMTREE:   @PREFIX@pv3 (253:3)
| [ 0:01] ## DMTREE:    `- (7:0)
| [ 0:01] ## DMTREE:   @PREFIX@pv2 (253:6)
| [ 0:01] ## DMTREE:    `- (7:0)
| [ 0:01] ## DMTREE:   @PREFIX@pv1 (253:5)
| [ 0:01] ## DMTREE:    `- (7:0)
| [ 0:01] ## DMTREE:   LFS_vg-lfs (253:2)
| [ 0:01] ## DMTREE:    `- (8:16)
| [ 0:01] ## DMTREE:   centos-swap (253:1)
| [ 0:01] ## DMTREE:    `- (8:2)
| [ 0:01] ## DMTREE:   centos-root (253:0)
| [ 0:01] ## DMTREE:    `- (8:2)
| [ 0:01] <======== Recursive list of @TESTDIR@/dev ========>
| [ 0:01] ## LSLR:	@TESTDIR@/dev:
| [ 0:01] ## LSLR:	total 4
| [ 0:01] ## LSLR:	brw-r--r-- 1 root root 7, 0 Feb 21 02:26 loop0
| [ 0:01] ## LSLR:	brw-r--r-- 1 root root 7, 1 Feb 21 02:26 loop1
| [ 0:01] ## LSLR:	brw-r--r-- 1 root root 7, 2 Feb 21 02:26 loop2
| [ 0:01] ## LSLR:	brw-r--r-- 1 root root 7, 3 Feb 21 02:26 loop3
| [ 0:01] ## LSLR:	brw-r--r-- 1 root root 7, 4 Feb 21 02:26 loop4
| [ 0:01] ## LSLR:	brw-r--r-- 1 root root 7, 5 Feb 21 02:26 loop5
| [ 0:01] ## LSLR:	brw-r--r-- 1 root root 7, 6 Feb 21 02:26 loop6
| [ 0:01] ## LSLR:	brw-r--r-- 1 root root 7, 7 Feb 21 02:26 loop7
| [ 0:01] ## LSLR:	drwxr-xr-x 2 root root 4096 Feb 21 02:26 mapper
| [ 0:01] ## LSLR:	crw-r--r-- 1 root root 1, 3 Feb 21 02:26 testnull
| [ 0:01] ## LSLR:	
| [ 0:01] ## LSLR:	@TESTDIR@/dev/mapper:
| [ 0:01] ## LSLR:	total 0
| [ 0:01] ## LSLR:	brw------- 1 root root 253,   5 Feb 21 02:26 @PREFIX@pv1
| [ 0:01] ## LSLR:	brw------- 1 root root 253,   6 Feb 21 02:26 @PREFIX@pv2
| [ 0:01] ## LSLR:	brw------- 1 root root 253,   3 Feb 21 02:26 @PREFIX@pv3
| [ 0:01] ## LSLR:	brw------- 1 root root 253,   4 Feb 21 02:26 @PREFIX@pv4
| [ 0:01] ## LSLR:	crw------- 1 root root  10, 236 Feb 21 02:26 control
| [ 0:01] <======== Udev DB content ========>
| [ 0:01] ## UDEV:	P: /devices/virtual/block/dm-0
| [ 0:01] ## UDEV:	N: dm-0
| [ 0:01] ## UDEV:	E: DEVNAME=/dev/dm-0
| [ 0:01] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-0
| [ 0:01] ## UDEV:	E: DEVTYPE=disk
| [ 0:01] ## UDEV:	E: MAJOR=253
| [ 0:01] ## UDEV:	E: MINOR=0
| [ 0:01] ## UDEV:	E: SUBSYSTEM=block
| [ 0:01] ## UDEV:	
| [ 0:01] ## UDEV:	P: /devices/virtual/block/dm-1
| [ 0:01] ## UDEV:	N: dm-1
| [ 0:01] ## UDEV:	E: DEVNAME=/dev/dm-1
| [ 0:01] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-1
| [ 0:01] ## UDEV:	E: DEVTYPE=disk
| [ 0:01] ## UDEV:	E: MAJOR=253
| [ 0:01] ## UDEV:	E: MINOR=1
| [ 0:01] ## UDEV:	E: SUBSYSTEM=block
| [ 0:01] ## UDEV:	
| [ 0:01] ## UDEV:	P: /devices/virtual/block/dm-2
| [ 0:01] ## UDEV:	N: dm-2
| [ 0:01] ## UDEV:	E: DEVNAME=/dev/dm-2
| [ 0:01] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-2
| [ 0:01] ## UDEV:	E: DEVTYPE=disk
| [ 0:01] ## UDEV:	E: MAJOR=253
| [ 0:01] ## UDEV:	E: MINOR=2
| [ 0:01] ## UDEV:	E: SUBSYSTEM=block
| [ 0:01] ## UDEV:	
| [ 0:01] ## UDEV:	P: /devices/virtual/block/dm-3
| [ 0:01] ## UDEV:	N: dm-3
| [ 0:01] ## UDEV:	E: DEVNAME=/dev/dm-3
| [ 0:01] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-3
| [ 0:01] ## UDEV:	E: DEVTYPE=disk
| [ 0:01] ## UDEV:	E: MAJOR=253
| [ 0:01] ## UDEV:	E: MINOR=3
| [ 0:01] ## UDEV:	E: SUBSYSTEM=block
| [ 0:01] ## UDEV:	
| [ 0:01] ## UDEV:	P: /devices/virtual/block/dm-4
| [ 0:01] ## UDEV:	N: dm-4
| [ 0:01] ## UDEV:	E: DEVNAME=/dev/dm-4
| [ 0:01] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-4
| [ 0:01] ## UDEV:	E: DEVTYPE=disk
| [ 0:01] ## UDEV:	E: MAJOR=253
| [ 0:01] ## UDEV:	E: MINOR=4
| [ 0:01] ## UDEV:	E: SUBSYSTEM=block
| [ 0:01] ## UDEV:	
| [ 0:01] ## UDEV:	P: /devices/virtual/block/dm-5
| [ 0:01] ## UDEV:	N: dm-5
| [ 0:01] ## UDEV:	E: DEVNAME=/dev/dm-5
| [ 0:01] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-5
| [ 0:01] ## UDEV:	E: DEVTYPE=disk
| [ 0:01] ## UDEV:	E: MAJOR=253
| [ 0:01] ## UDEV:	E: MINOR=5
| [ 0:01] ## UDEV:	E: SUBSYSTEM=block
| [ 0:01] ## UDEV:	
| [ 0:01] ## UDEV:	P: /devices/virtual/block/dm-6
| [ 0:01] ## UDEV:	N: dm-6
| [ 0:01] ## UDEV:	E: DEVNAME=/dev/dm-6
| [ 0:01] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-6
| [ 0:01] ## UDEV:	E: DEVTYPE=disk
| [ 0:01] ## UDEV:	E: MAJOR=253
| [ 0:01] ## UDEV:	E: MINOR=6
| [ 0:01] ## UDEV:	E: SUBSYSTEM=block
| [ 0:01] ## UDEV:	
| [ 0:01] ## UDEV:	P: /devices/virtual/block/loop0
| [ 0:01] ## UDEV:	N: loop0
| [ 0:01] ## UDEV:	E: DEVNAME=/dev/loop0
| [ 0:01] ## UDEV:	E: DEVPATH=/devices/virtual/block/loop0
| [ 0:01] ## UDEV:	E: DEVTYPE=disk
| [ 0:01] ## UDEV:	E: MAJOR=7
| [ 0:01] ## UDEV:	E: MINOR=0
| [ 0:01] ## UDEV:	E: SUBSYSTEM=block
| [ 0:01] ## UDEV:	
| [ 0:01] <======== Script file "lvconvert-repair-policy.sh" ========>
| [ 0:01] ## Line: 1 	 #!/usr/bin/env bash
| [ 0:01] ## Line: 2 	 
| [ 0:01] ## Line: 3 	 # Copyright (C) 2008 Red Hat, Inc. All rights reserved.
| [ 0:01] ## Line: 4 	 #
| [ 0:01] ## Line: 5 	 # This copyrighted material is made available to anyone wishing to use,
| [ 0:01] ## Line: 6 	 # modify, copy, or redistribute it subject to the terms and conditions
| [ 0:01] ## Line: 7 	 # of the GNU General Public License v.2.
| [ 0:01] ## Line: 8 	 #
| [ 0:01] ## Line: 9 	 # You should have received a copy of the GNU General Public License
| [ 0:01] ## Line: 10 	 # along with this program; if not, write to the Free Software Foundation,
| [ 0:01] ## Line: 11 	 # Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA
| [ 0:01] ## Line: 12 	 
| [ 0:01] ## Line: 13 	 SKIP_WITH_LVMLOCKD=1
| [ 0:01] ## Line: 14 	 
| [ 0:01] ## Line: 15 	 . lib/inittest
| [ 0:01] ## Line: 16 	 
| [ 0:01] ## Line: 17 	 aux prepare_vg 4
| [ 0:01] ## Line: 18 	 aux lvmconf 'allocation/maximise_cling = 0' \
| [ 0:01] ## Line: 19 	 	    'allocation/mirror_logs_require_separate_pvs = 1'
| [ 0:01] ## Line: 20 	 
| [ 0:01] ## Line: 21 	 # Clean-up and create a 2-way mirror, where the the
| [ 0:01] ## Line: 22 	 # leg devices are always on $dev[12] and the log
| [ 0:01] ## Line: 23 	 # is always on $dev3.  ($dev4 behaves as a spare)
| [ 0:01] ## Line: 24 	 cleanup_() {
| [ 0:01] ## Line: 25 	 	vgreduce --removemissing $vg
| [ 0:01] ## Line: 26 	 	for d in "$@"; do aux enable_dev "$d"; done
| [ 0:01] ## Line: 27 	 	for d in "$@"; do vgextend $vg "$d"; done
| [ 0:01] ## Line: 28 	 	lvremove -ff $vg/mirror
| [ 0:01] ## Line: 29 	 	lvcreate -aey --type mirror -m 1 --ignoremonitoring -l 2 -n mirror $vg "$dev1" "$dev2" "$dev3:0"
| [ 0:01] ## Line: 30 	 }
| [ 0:01] ## Line: 31 	 
| [ 0:01] ## Line: 32 	 repair_() {
| [ 0:01] ## Line: 33 	 	lvconvert --repair --use-policies --config "$1" $vg/mirror
| [ 0:01] ## Line: 34 	 }
| [ 0:01] ## Line: 35 	 
| [ 0:01] ## Line: 36 	 lvcreate -aey --type mirror -m 1 --ignoremonitoring -l 2 -n mirror $vg "$dev1" "$dev2" "$dev3:0"
| [ 0:01] ## Line: 37 	 lvchange -a n $vg/mirror
| [ 0:01] ## Line: 38 	 
| [ 0:01] ## Line: 39 	 # Fail a leg of a mirror.
| [ 0:01] ## Line: 40 	 aux disable_dev "$dev1"
| [ 0:01] ## Line: 41 	 lvchange --partial -aey $vg/mirror
| [ 0:01] ## Line: 42 	 repair_ 'activation { mirror_image_fault_policy = "remove" }'
| [ 0:01] ## Line: 43 	 check linear $vg mirror
| [ 0:01] ## Line: 44 	 cleanup_ "$dev1"
| [ 0:01] ## Line: 45 	 
| [ 0:01] ## Line: 46 	 # Fail a leg of a mirror.
| [ 0:01] ## Line: 47 	 # Expected result: Mirror (leg replaced, should retain log)
| [ 0:01] ## Line: 48 	 aux disable_dev "$dev1"
| [ 0:01] ## Line: 49 	 repair_ 'activation { mirror_image_fault_policy = "replace" mirror_log_fault_policy = "remove" }'
| [ 0:01] ## Line: 50 	 check mirror $vg mirror
| [ 0:01] ## Line: 51 	 check active $vg mirror_mlog
| [ 0:01] ## Line: 52 	 cleanup_ "$dev1"
| [ 0:01] ## Line: 53 	 
| [ 0:01] ## Line: 54 	 # Fail a leg of a mirror.
| [ 0:01] ## Line: 55 	 # Expected result: Mirror (leg replaced)
| [ 0:01] ## Line: 56 	 aux disable_dev "$dev1"
| [ 0:01] ## Line: 57 	 repair_ 'activation { mirror_image_fault_policy = "replace" }'
| [ 0:01] ## Line: 58 	 check mirror $vg mirror
| [ 0:01] ## Line: 59 	 check active $vg mirror_mlog
| [ 0:01] ## Line: 60 	 cleanup_ "$dev1"
| [ 0:01] ## Line: 61 	 
| [ 0:01] ## Line: 62 	 # Fail a leg of a mirror (use old name for policy specification)
| [ 0:01] ## Line: 63 	 # Expected result: Mirror (leg replaced)
| [ 0:01] ## Line: 64 	 aux disable_dev "$dev1"
| [ 0:01] ## Line: 65 	 repair_ 'activation { mirror_image_fault_policy = "replace" }'
| [ 0:01] ## Line: 66 	 check mirror $vg mirror
| [ 0:01] ## Line: 67 	 check active $vg mirror_mlog
| [ 0:01] ## Line: 68 	 not pvdisplay $vg
| [ 0:01] ## Line: 69 	 cleanup_ "$dev1"
| [ 0:01] ## Line: 70 	 
| [ 0:01] ## Line: 71 	 # Fail a leg of a mirror w/ no available spare
| [ 0:01] ## Line: 72 	 # Expected result: linear
| [ 0:01] ## Line: 73 	 #                  (or 2-way with leg/log overlap if alloc anywhere)
| [ 0:01] ## Line: 74 	 aux disable_dev "$dev2" "$dev4"
| [ 0:01] ## Line: 75 	 repair_ 'activation { mirror_image_fault_policy = "replace" }'
| [ 0:01] ## Line: 76 	 check mirror $vg mirror
| [ 0:01] ## Line: 77 	 check lv_not_exists $vg mirror_mlog
| [ 0:01] ## Line: 78 	 cleanup_ "$dev2" "$dev4"
| [ 0:01] ## Line: 79 	 
| [ 0:01] ## Line: 80 	 # Fail the log device of a mirror w/ no available spare
| [ 0:01] ## Line: 81 	 # Expected result: mirror w/ corelog
| [ 0:01] ## Line: 82 	 aux disable_dev "$dev3" "$dev4"
| [ 0:01] ## Line: 83 	 repair_ 'activation { mirror_image_fault_policy = "replace" }' $vg/mirror
| [ 0:01] ## Line: 84 	 check mirror $vg mirror
| [ 0:01] ## Line: 85 	 check lv_not_exists $vg mirror_mlog
| [ 0:01] ## Line: 86 	 cleanup_ "$dev3" "$dev4"
| [ 0:01] ## Line: 87 	 
| [ 0:01] ## Line: 88 	 # Fail the log device with a remove policy
| [ 0:01] ## Line: 89 	 # Expected result: mirror w/ corelog
| [ 0:01] ## Line: 90 	 lvchange -aey $vg/mirror
| [ 0:01] ## Line: 91 	 aux disable_dev "$dev3" "$dev4"
| [ 0:01] ## Line: 92 	 repair_ 'activation { mirror_log_fault_policy = "remove" }'
| [ 0:01] ## Line: 93 	 check mirror $vg mirror core
| [ 0:01] ## Line: 94 	 check lv_not_exists $vg mirror_mlog
| [ 0:01] ## Line: 95 	 cleanup_ "$dev3" "$dev4"
| [ 0:01] ## Line: 96 	 
| [ 0:01] ## Line: 97 	 vgremove -ff $vg
| [ 0:01] aux teardown
| [ 0:01] #lvconvert-repair-policy.sh:1+ aux teardown
| [ 0:01] ## teardown.........ok
###       failed: [ndev-vanilla] shell/lvconvert-repair-policy.sh
###      skipped: [ndev-vanilla] shell/lvconvert-repair-raid-dmeventd.sh
###      skipped: [ndev-vanilla] shell/lvconvert-repair-raid.sh

| [ 0:00] Library version:   1.02.146 (2017-12-18)
| [ 0:00] Driver version:    4.35.0
| [ 0:00] Kernel is Linux localhost.localdomain 3.10.0-693.11.1.el7.x86_64 #1 SMP Mon Dec 4 23:52:40 UTC 2017 x86_64 GNU/Linux
| [ 0:00] Selinux mode is not installed.
| [ 0:00]               total        used        free      shared  buff/cache   available
| [ 0:00] Mem:           7822        1075        4153          10        2594        6440
| [ 0:00] Swap:          4095           0        4095
| [ 0:00] Filesystem      Size  Used Avail Use% Mounted on
| [ 0:00] /dev/sdc1        18G  8.4G  8.4G  50% /
| [ 0:00] /dev/sdd1        51G  6.1G   43G  13% /lfskernel
| [ 0:00] devtmpfs        3.9G     0  3.9G   0% /dev
| [ 0:00] tmpfs           3.9G     0  3.9G   0% /run
| [ 0:00] @TESTDIR=/tmp/LVMTEST1014.hYuWGPzzMB
| [ 0:00] @PREFIX=LVMTEST1014
| [ 0:00] ## LVMCONF: activation {
| [ 0:00] ## LVMCONF:     checks = 1
| [ 0:00] ## LVMCONF:     monitoring = 0
| [ 0:00] ## LVMCONF:     polling_interval = 1
| [ 0:00] ## LVMCONF:     raid_region_size = 512
| [ 0:00] ## LVMCONF:     retry_deactivation = 1
| [ 0:00] ## LVMCONF:     snapshot_autoextend_percent = 50
| [ 0:00] ## LVMCONF:     snapshot_autoextend_threshold = 50
| [ 0:00] ## LVMCONF:     udev_rules = 1
| [ 0:00] ## LVMCONF:     udev_sync = 1
| [ 0:00] ## LVMCONF:     verify_udev_operations = 1
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: allocation {
| [ 0:00] ## LVMCONF:     wipe_signatures_when_zeroing_new_lvs = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: backup {
| [ 0:00] ## LVMCONF:     archive = 0
| [ 0:00] ## LVMCONF:     backup = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: devices {
| [ 0:00] ## LVMCONF:     cache_dir = "@TESTDIR@/etc"
| [ 0:00] ## LVMCONF:     default_data_alignment = 1
| [ 0:00] ## LVMCONF:     dir = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     filter = "a|.*|"
| [ 0:00] ## LVMCONF:     global_filter = [ "a|@TESTDIR@/dev/mapper/@PREFIX@.*pv[0-9_]*$|", "r|.*|" ]
| [ 0:00] ## LVMCONF:     md_component_detection  = 0
| [ 0:00] ## LVMCONF:     scan = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     sysfs_scan = 1
| [ 0:00] ## LVMCONF:     write_cache_state = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: dmeventd {
| [ 0:00] ## LVMCONF:     executable = "/sources/boot/LVM2.2.02.177/test/lib/dmeventd"
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: global {
| [ 0:00] ## LVMCONF:     abort_on_internal_errors = 1
| [ 0:00] ## LVMCONF:     cache_check_executable = "/usr/sbin/cache_check"
| [ 0:00] ## LVMCONF:     cache_dump_executable = "/usr/sbin/cache_dump"
| [ 0:00] ## LVMCONF:     cache_repair_executable = "/usr/sbin/cache_repair"
| [ 0:00] ## LVMCONF:     detect_internal_vg_cache_corruption = 1
| [ 0:00] ## LVMCONF:     fallback_to_local_locking = 0
| [ 0:00] ## LVMCONF:     fsadm_executable = "/sources/boot/LVM2.2.02.177/test/lib/fsadm"
| [ 0:00] ## LVMCONF:     library_dir = "@TESTDIR@/lib"
| [ 0:00] ## LVMCONF:     locking_dir = "@TESTDIR@/var/lock/lvm"
| [ 0:00] ## LVMCONF:     locking_type=1
| [ 0:00] ## LVMCONF:     notify_dbus = 0
| [ 0:00] ## LVMCONF:     si_unit_consistency = 1
| [ 0:00] ## LVMCONF:     thin_check_executable = "/usr/sbin/thin_check"
| [ 0:00] ## LVMCONF:     thin_dump_executable = "/usr/sbin/thin_dump"
| [ 0:00] ## LVMCONF:     thin_repair_executable = "/usr/sbin/thin_repair"
| [ 0:00] ## LVMCONF:     use_lvmetad = 0
| [ 0:00] ## LVMCONF:     use_lvmlockd = 0
| [ 0:00] ## LVMCONF:     use_lvmpolld = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: log {
| [ 0:00] ## LVMCONF:     activation = 1
| [ 0:00] ## LVMCONF:     file = "@TESTDIR@/debug.log"
| [ 0:00] ## LVMCONF:     indent = 1
| [ 0:00] ## LVMCONF:     level = 9
| [ 0:00] ## LVMCONF:     overwrite = 1
| [ 0:00] ## LVMCONF:     syslog = 0
| [ 0:00] ## LVMCONF:     verbose = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] <======== Processing test: "lvconvert-repair-replace.sh" ========>
| [ 0:00] 
| [ 0:00] aux prepare_vg 6
| [ 0:00] #lvconvert-repair-replace.sh:17+ aux prepare_vg 6
| [ 0:00] ## preparing loop device....ok (/dev/loop0)
| [ 0:00] ## preparing 6 devices...lib/utils: line 212: DM_UDEV_COOKIE: unbound variable
| [ 0:00] set +vx; STACKTRACE; set -vx
| [ 0:00] ##lvconvert-repair-replace.sh:17+ set +vx
| [ 0:00] ## - /lfskernel/sources/boot/LVM2.2.02.177/test/shell/lvconvert-repair-replace.sh:17
| [ 0:00] ## 1 STACKTRACE() called from /lfskernel/sources/boot/LVM2.2.02.177/test/shell/lvconvert-repair-replace.sh:17
| [ 0:00] <======== Info ========>
| [ 0:00] ## DMINFO:   Name             Maj Min Stat Open Targ Event  UUID                                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv6   253   3 L--w    0    1      0 TEST-@PREFIX@pv6                                                 
| [ 0:00] ## DMINFO:   @PREFIX@pv5   253   8 L--w    0    1      0 TEST-@PREFIX@pv5                                                 
| [ 0:00] ## DMINFO:   @PREFIX@pv4   253   6 L--w    0    1      0 TEST-@PREFIX@pv4                                                 
| [ 0:00] ## DMINFO:   @PREFIX@pv3   253   5 L--w    0    1      0 TEST-@PREFIX@pv3                                                 
| [ 0:00] ## DMINFO:   @PREFIX@pv2   253   4 L--w    0    1      0 TEST-@PREFIX@pv2                                                 
| [ 0:00] ## DMINFO:   @PREFIX@pv1   253   7 L--w    0    1      0 TEST-@PREFIX@pv1                                                 
| [ 0:00] <======== Active table ========>
| [ 0:00] ## DMTABLE:  @PREFIX@pv6: 0 69632 linear 7:0 350208
| [ 0:00] ## DMTABLE:  @PREFIX@pv5: 0 69632 linear 7:0 280576
| [ 0:00] ## DMTABLE:  @PREFIX@pv4: 0 69632 linear 7:0 210944
| [ 0:00] ## DMTABLE:  @PREFIX@pv3: 0 69632 linear 7:0 141312
| [ 0:00] ## DMTABLE:  @PREFIX@pv2: 0 69632 linear 7:0 71680
| [ 0:00] ## DMTABLE:  @PREFIX@pv1: 0 69632 linear 7:0 2048
| [ 0:00] <======== Inactive table ========>
| [ 0:00] ## DMITABLE: @PREFIX@pv6: 
| [ 0:00] ## DMITABLE: @PREFIX@pv5: 
| [ 0:00] ## DMITABLE: @PREFIX@pv4: 
| [ 0:00] ## DMITABLE: @PREFIX@pv3: 
| [ 0:00] ## DMITABLE: @PREFIX@pv2: 
| [ 0:00] ## DMITABLE: @PREFIX@pv1: 
| [ 0:00] <======== Status ========>
| [ 0:00] ## DMSTATUS: @PREFIX@pv6: 0 69632 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv5: 0 69632 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv4: 0 69632 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv3: 0 69632 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv2: 0 69632 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv1: 0 69632 linear 
| [ 0:00] <======== Tree ========>
| [ 0:00] ## DMTREE:   @PREFIX@pv6 (253:3)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   @PREFIX@pv5 (253:8)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   @PREFIX@pv4 (253:6)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   @PREFIX@pv3 (253:5)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   @PREFIX@pv2 (253:4)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   @PREFIX@pv1 (253:7)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   LFS_vg-lfs (253:2)
| [ 0:00] ## DMTREE:    `- (8:16)
| [ 0:00] ## DMTREE:   centos-swap (253:1)
| [ 0:00] ## DMTREE:    `- (8:2)
| [ 0:00] ## DMTREE:   centos-root (253:0)
| [ 0:00] ## DMTREE:    `- (8:2)
| [ 0:00] <======== Recursive list of @TESTDIR@/dev ========>
| [ 0:00] ## LSLR:	@TESTDIR@/dev:
| [ 0:00] ## LSLR:	total 4
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 0 Feb 21 02:26 loop0
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 1 Feb 21 02:26 loop1
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 2 Feb 21 02:26 loop2
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 3 Feb 21 02:26 loop3
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 4 Feb 21 02:26 loop4
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 5 Feb 21 02:26 loop5
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 6 Feb 21 02:26 loop6
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 7 Feb 21 02:26 loop7
| [ 0:00] ## LSLR:	drwxr-xr-x 2 root root 4096 Feb 21 02:26 mapper
| [ 0:00] ## LSLR:	crw-r--r-- 1 root root 1, 3 Feb 21 02:26 testnull
| [ 0:00] ## LSLR:	
| [ 0:00] ## LSLR:	@TESTDIR@/dev/mapper:
| [ 0:00] ## LSLR:	total 0
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   7 Feb 21 02:26 @PREFIX@pv1
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   4 Feb 21 02:26 @PREFIX@pv2
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   5 Feb 21 02:26 @PREFIX@pv3
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   6 Feb 21 02:26 @PREFIX@pv4
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   8 Feb 21 02:26 @PREFIX@pv5
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   3 Feb 21 02:26 @PREFIX@pv6
| [ 0:00] ## LSLR:	crw------- 1 root root  10, 236 Feb 21 02:26 control
| [ 0:00] <======== Udev DB content ========>
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-0
| [ 0:00] ## UDEV:	N: dm-0
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-0
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-0
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=0
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-1
| [ 0:00] ## UDEV:	N: dm-1
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-1
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-1
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=1
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-2
| [ 0:00] ## UDEV:	N: dm-2
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-2
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-2
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=2
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-3
| [ 0:00] ## UDEV:	N: dm-3
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-3
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-3
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=3
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-4
| [ 0:00] ## UDEV:	N: dm-4
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-4
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-4
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=4
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-5
| [ 0:00] ## UDEV:	N: dm-5
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-5
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-5
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=5
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-6
| [ 0:00] ## UDEV:	N: dm-6
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-6
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-6
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=6
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-7
| [ 0:00] ## UDEV:	N: dm-7
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-7
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-7
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=7
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-8
| [ 0:00] ## UDEV:	N: dm-8
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-8
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-8
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=8
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/loop0
| [ 0:00] ## UDEV:	N: loop0
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/loop0
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/loop0
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=7
| [ 0:00] ## UDEV:	E: MINOR=0
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] <======== Script file "lvconvert-repair-replace.sh" ========>
| [ 0:00] ## Line: 1 	 #!/usr/bin/env bash
| [ 0:00] ## Line: 2 	 
| [ 0:00] ## Line: 3 	 # Copyright (C) 2008 Red Hat, Inc. All rights reserved.
| [ 0:00] ## Line: 4 	 #
| [ 0:00] ## Line: 5 	 # This copyrighted material is made available to anyone wishing to use,
| [ 0:00] ## Line: 6 	 # modify, copy, or redistribute it subject to the terms and conditions
| [ 0:00] ## Line: 7 	 # of the GNU General Public License v.2.
| [ 0:00] ## Line: 8 	 #
| [ 0:00] ## Line: 9 	 # You should have received a copy of the GNU General Public License
| [ 0:00] ## Line: 10 	 # along with this program; if not, write to the Free Software Foundation,
| [ 0:00] ## Line: 11 	 # Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA
| [ 0:00] ## Line: 12 	 
| [ 0:00] ## Line: 13 	 SKIP_WITH_LVMLOCKD=1
| [ 0:00] ## Line: 14 	 
| [ 0:00] ## Line: 15 	 . lib/inittest
| [ 0:00] ## Line: 16 	 
| [ 0:00] ## Line: 17 	 aux prepare_vg 6
| [ 0:00] ## Line: 18 	 aux lvmconf 'allocation/maximise_cling = 0' \
| [ 0:00] ## Line: 19 	 	    'allocation/mirror_logs_require_separate_pvs = 1'
| [ 0:00] ## Line: 20 	 
| [ 0:00] ## Line: 21 	 # 3-way, disk log
| [ 0:00] ## Line: 22 	 # multiple failures, full replace
| [ 0:00] ## Line: 23 	 lvcreate -aey --mirrorlog disk --type mirror -m 2 --ignoremonitoring --nosync -L 1 -n 3way $vg "$dev1" "$dev2" "$dev3" "$dev4":0-1
| [ 0:00] ## Line: 24 	 aux disable_dev "$dev1" "$dev2"
| [ 0:00] ## Line: 25 	 lvconvert -y --repair $vg/3way 2>&1 | tee 3way.out
| [ 0:00] ## Line: 26 	 lvs -a -o +devices $vg | not grep unknown
| [ 0:00] ## Line: 27 	 not grep "WARNING: Failed" 3way.out
| [ 0:00] ## Line: 28 	 vgreduce --removemissing $vg
| [ 0:00] ## Line: 29 	 check mirror $vg 3way
| [ 0:00] ## Line: 30 	 aux enable_dev "$dev1" "$dev2"
| [ 0:00] ## Line: 31 	 vgremove -ff $vg
| [ 0:00] ## Line: 32 	 
| [ 0:00] ## Line: 33 	 # 3-way, disk log
| [ 0:00] ## Line: 34 	 # multiple failures, partial replace
| [ 0:00] ## Line: 35 	 vgcreate $vg "$dev1" "$dev2" "$dev3" "$dev4" "$dev5"
| [ 0:00] ## Line: 36 	 lvcreate -aey --mirrorlog disk --type mirror -m 2 --ignoremonitoring --nosync -L 1 -n 3way $vg "$dev1" "$dev2" "$dev3" "$dev4"
| [ 0:00] ## Line: 37 	 aux disable_dev "$dev1" "$dev2"
| [ 0:00] ## Line: 38 	 lvconvert -y --repair $vg/3way 2>&1 | tee 3way.out
| [ 0:00] ## Line: 39 	 grep "WARNING: Failed" 3way.out
| [ 0:00] ## Line: 40 	 lvs -a -o +devices $vg | not grep unknown
| [ 0:00] ## Line: 41 	 vgreduce --removemissing $vg
| [ 0:00] ## Line: 42 	 check mirror $vg 3way
| [ 0:00] ## Line: 43 	 aux enable_dev "$dev1" "$dev2"
| [ 0:00] ## Line: 44 	 vgremove -ff $vg
| [ 0:00] ## Line: 45 	 
| [ 0:00] ## Line: 46 	 vgcreate $vg "$dev1" "$dev2" "$dev3"
| [ 0:00] ## Line: 47 	 lvcreate -aey --mirrorlog disk --type mirror -m 1 --ignoremonitoring --nosync -l 1 -n 2way $vg "$dev1" "$dev2" "$dev3"
| [ 0:00] ## Line: 48 	 aux disable_dev "$dev1"
| [ 0:00] ## Line: 49 	 lvconvert -y --repair $vg/2way 2>&1 | tee 2way.out
| [ 0:00] ## Line: 50 	 grep "WARNING: Failed" 2way.out
| [ 0:00] ## Line: 51 	 lvs -a -o +devices $vg | not grep unknown
| [ 0:00] ## Line: 52 	 vgreduce --removemissing $vg
| [ 0:00] ## Line: 53 	 check mirror $vg 2way
| [ 0:00] ## Line: 54 	 aux enable_dev "$dev1" "$dev2"
| [ 0:00] ## Line: 55 	 vgremove -ff $vg
| [ 0:00] ## Line: 56 	 
| [ 0:00] ## Line: 57 	 # FIXME  - exclusive activation for mirrors should work here
| [ 0:00] ## Line: 58 	 # conversion of inactive cluster logs is also unsupported
| [ 0:00] ## Line: 59 	 test -e LOCAL_CLVMD && exit 0
| [ 0:00] ## Line: 60 	 
| [ 0:00] ## Line: 61 	 
| [ 0:00] ## Line: 62 	 # Test repair of inactive mirror with log failure
| [ 0:00] ## Line: 63 	 #  Replacement should fail, but convert should succeed (switch to corelog)
| [ 0:00] ## Line: 64 	 vgcreate $vg "$dev1" "$dev2" "$dev3" "$dev4"
| [ 0:00] ## Line: 65 	 lvcreate -aey --type mirror -m 2 --ignoremonitoring -l 2 -n mirror2 $vg "$dev1" "$dev2" "$dev3" "$dev4":0
| [ 0:00] ## Line: 66 	 vgchange -a n $vg
| [ 0:00] ## Line: 67 	 pvremove -ff -y "$dev4"
| [ 0:00] ## Line: 68 	 lvconvert -y --repair $vg/mirror2
| [ 0:00] ## Line: 69 	 check mirror $vg mirror2
| [ 0:00] ## Line: 70 	 vgs $vg
| [ 0:00] ## Line: 71 	 vgremove -ff $vg
| [ 0:00] ## Line: 72 	 
| [ 0:00] ## Line: 73 	 if aux kernel_at_least 3 0 0; then
| [ 0:00] ## Line: 74 	 	# 2-way, mirrored log
| [ 0:00] ## Line: 75 	 	# Double log failure, full replace
| [ 0:00] ## Line: 76 	 	vgcreate $vg "$dev1" "$dev2" "$dev3" "$dev4" "$dev5" "$dev6"
| [ 0:00] ## Line: 77 	 	lvcreate -aey --mirrorlog mirrored --type mirror -m 1 --ignoremonitoring --nosync -L 1 -n 2way $vg \
| [ 0:00] ## Line: 78 	 	    "$dev1" "$dev2" "$dev3":0 "$dev4":0
| [ 0:00] ## Line: 79 	 	aux disable_dev "$dev3" "$dev4"
| [ 0:00] ## Line: 80 	 	lvconvert -y --repair $vg/2way 2>&1 | tee 2way.out
| [ 0:00] ## Line: 81 	 	lvs -a -o +devices $vg | not grep unknown
| [ 0:00] ## Line: 82 	 	not grep "WARNING: Failed" 2way.out
| [ 0:00] ## Line: 83 	 	vgreduce --removemissing $vg
| [ 0:00] ## Line: 84 	 	check mirror $vg 2way
| [ 0:00] ## Line: 85 	 	aux enable_dev "$dev3" "$dev4"
| [ 0:00] ## Line: 86 	 	vgremove -ff $vg
| [ 0:00] ## Line: 87 	 fi
| [ 0:00] ## Line: 88 	 
| [ 0:00] ## Line: 89 	 # 3-way, mirrored log
| [ 0:00] ## Line: 90 	 # Single log failure, replace
| [ 0:00] ## Line: 91 	 vgcreate $vg "$dev1" "$dev2" "$dev3" "$dev4" "$dev5" "$dev6"
| [ 0:00] ## Line: 92 	 lvcreate -aey --mirrorlog mirrored --type mirror -m 2 --ignoremonitoring --nosync -L 1 -n 3way $vg \
| [ 0:00] ## Line: 93 	     "$dev1" "$dev2" "$dev3" "$dev4":0 "$dev5":0
| [ 0:00] ## Line: 94 	 aux disable_dev "$dev4"
| [ 0:00] ## Line: 95 	 lvconvert -y --repair $vg/3way 2>&1 | tee 3way.out
| [ 0:00] ## Line: 96 	 lvs -a -o +devices $vg | not grep unknown
| [ 0:00] ## Line: 97 	 not grep "WARNING: Failed" 3way.out
| [ 0:00] ## Line: 98 	 vgreduce --removemissing $vg
| [ 0:00] ## Line: 99 	 check mirror $vg 3way
| [ 0:00] ## Line: 100 	 aux enable_dev "$dev4"
| [ 0:00] ## Line: 101 	 vgremove -ff $vg
| [ 0:00] aux teardown
| [ 0:00] #lvconvert-repair-replace.sh:1+ aux teardown
| [ 0:00] ## teardown.........ok
###       failed: [ndev-vanilla] shell/lvconvert-repair-replace.sh

| [ 0:00] Library version:   1.02.146 (2017-12-18)
| [ 0:00] Driver version:    4.35.0
| [ 0:00] Kernel is Linux localhost.localdomain 3.10.0-693.11.1.el7.x86_64 #1 SMP Mon Dec 4 23:52:40 UTC 2017 x86_64 GNU/Linux
| [ 0:00] Selinux mode is not installed.
| [ 0:00]               total        used        free      shared  buff/cache   available
| [ 0:00] Mem:           7822        1075        4152          10        2594        6440
| [ 0:00] Swap:          4095           0        4095
| [ 0:00] Filesystem      Size  Used Avail Use% Mounted on
| [ 0:00] /dev/sdc1        18G  8.4G  8.4G  50% /
| [ 0:00] /dev/sdd1        51G  6.1G   43G  13% /lfskernel
| [ 0:00] devtmpfs        3.9G     0  3.9G   0% /dev
| [ 0:00] tmpfs           3.9G     0  3.9G   0% /run
| [ 0:00] @TESTDIR=/tmp/LVMTEST1261.I8BqbvWUXe
| [ 0:00] @PREFIX=LVMTEST1261
| [ 0:00] ## LVMCONF: activation {
| [ 0:00] ## LVMCONF:     checks = 1
| [ 0:00] ## LVMCONF:     monitoring = 0
| [ 0:00] ## LVMCONF:     polling_interval = 1
| [ 0:00] ## LVMCONF:     raid_region_size = 512
| [ 0:00] ## LVMCONF:     retry_deactivation = 1
| [ 0:00] ## LVMCONF:     snapshot_autoextend_percent = 50
| [ 0:00] ## LVMCONF:     snapshot_autoextend_threshold = 50
| [ 0:00] ## LVMCONF:     udev_rules = 1
| [ 0:00] ## LVMCONF:     udev_sync = 1
| [ 0:00] ## LVMCONF:     verify_udev_operations = 1
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: allocation {
| [ 0:00] ## LVMCONF:     wipe_signatures_when_zeroing_new_lvs = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: backup {
| [ 0:00] ## LVMCONF:     archive = 0
| [ 0:00] ## LVMCONF:     backup = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: devices {
| [ 0:00] ## LVMCONF:     cache_dir = "@TESTDIR@/etc"
| [ 0:00] ## LVMCONF:     default_data_alignment = 1
| [ 0:00] ## LVMCONF:     dir = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     filter = "a|.*|"
| [ 0:00] ## LVMCONF:     global_filter = [ "a|@TESTDIR@/dev/mapper/@PREFIX@.*pv[0-9_]*$|", "r|.*|" ]
| [ 0:00] ## LVMCONF:     md_component_detection  = 0
| [ 0:00] ## LVMCONF:     scan = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     sysfs_scan = 1
| [ 0:00] ## LVMCONF:     write_cache_state = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: dmeventd {
| [ 0:00] ## LVMCONF:     executable = "/sources/boot/LVM2.2.02.177/test/lib/dmeventd"
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: global {
| [ 0:00] ## LVMCONF:     abort_on_internal_errors = 1
| [ 0:00] ## LVMCONF:     cache_check_executable = "/usr/sbin/cache_check"
| [ 0:00] ## LVMCONF:     cache_dump_executable = "/usr/sbin/cache_dump"
| [ 0:00] ## LVMCONF:     cache_repair_executable = "/usr/sbin/cache_repair"
| [ 0:00] ## LVMCONF:     detect_internal_vg_cache_corruption = 1
| [ 0:00] ## LVMCONF:     fallback_to_local_locking = 0
| [ 0:00] ## LVMCONF:     fsadm_executable = "/sources/boot/LVM2.2.02.177/test/lib/fsadm"
| [ 0:00] ## LVMCONF:     library_dir = "@TESTDIR@/lib"
| [ 0:00] ## LVMCONF:     locking_dir = "@TESTDIR@/var/lock/lvm"
| [ 0:00] ## LVMCONF:     locking_type=1
| [ 0:00] ## LVMCONF:     notify_dbus = 0
| [ 0:00] ## LVMCONF:     si_unit_consistency = 1
| [ 0:00] ## LVMCONF:     thin_check_executable = "/usr/sbin/thin_check"
| [ 0:00] ## LVMCONF:     thin_dump_executable = "/usr/sbin/thin_dump"
| [ 0:00] ## LVMCONF:     thin_repair_executable = "/usr/sbin/thin_repair"
| [ 0:00] ## LVMCONF:     use_lvmetad = 0
| [ 0:00] ## LVMCONF:     use_lvmlockd = 0
| [ 0:00] ## LVMCONF:     use_lvmpolld = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: log {
| [ 0:00] ## LVMCONF:     activation = 1
| [ 0:00] ## LVMCONF:     file = "@TESTDIR@/debug.log"
| [ 0:00] ## LVMCONF:     indent = 1
| [ 0:00] ## LVMCONF:     level = 9
| [ 0:00] ## LVMCONF:     overwrite = 1
| [ 0:00] ## LVMCONF:     syslog = 0
| [ 0:00] ## LVMCONF:     verbose = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] <======== Processing test: "lvconvert-repair-snapshot.sh" ========>
| [ 0:00] 
| [ 0:00] aux prepare_vg 5
| [ 0:00] #lvconvert-repair-snapshot.sh:18+ aux prepare_vg 5
| [ 0:00] ## preparing loop device....ok (/dev/loop0)
| [ 0:00] ## preparing 5 devices...lib/utils: line 212: DM_UDEV_COOKIE: unbound variable
| [ 0:00] set +vx; STACKTRACE; set -vx
| [ 0:00] ##lvconvert-repair-snapshot.sh:18+ set +vx
| [ 0:00] ## - /lfskernel/sources/boot/LVM2.2.02.177/test/shell/lvconvert-repair-snapshot.sh:18
| [ 0:00] ## 1 STACKTRACE() called from /lfskernel/sources/boot/LVM2.2.02.177/test/shell/lvconvert-repair-snapshot.sh:18
| [ 0:00] <======== Info ========>
| [ 0:00] ## DMINFO:   Name             Maj Min Stat Open Targ Event  UUID                                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv5   253   6 L--w    0    1      0 TEST-@PREFIX@pv5                                                 
| [ 0:00] ## DMINFO:   @PREFIX@pv4   253   4 L--w    0    1      0 TEST-@PREFIX@pv4                                                 
| [ 0:00] ## DMINFO:   @PREFIX@pv3   253   3 L--w    0    1      0 TEST-@PREFIX@pv3                                                 
| [ 0:00] ## DMINFO:   @PREFIX@pv2   253   7 L--w    0    1      0 TEST-@PREFIX@pv2                                                 
| [ 0:00] ## DMINFO:   @PREFIX@pv1   253   5 L--w    0    1      0 TEST-@PREFIX@pv1                                                 
| [ 0:00] <======== Active table ========>
| [ 0:00] ## DMTABLE:  @PREFIX@pv5: 0 69632 linear 7:0 280576
| [ 0:00] ## DMTABLE:  @PREFIX@pv4: 0 69632 linear 7:0 210944
| [ 0:00] ## DMTABLE:  @PREFIX@pv3: 0 69632 linear 7:0 141312
| [ 0:00] ## DMTABLE:  @PREFIX@pv2: 0 69632 linear 7:0 71680
| [ 0:00] ## DMTABLE:  @PREFIX@pv1: 0 69632 linear 7:0 2048
| [ 0:00] <======== Inactive table ========>
| [ 0:00] ## DMITABLE: @PREFIX@pv5: 
| [ 0:00] ## DMITABLE: @PREFIX@pv4: 
| [ 0:00] ## DMITABLE: @PREFIX@pv3: 
| [ 0:00] ## DMITABLE: @PREFIX@pv2: 
| [ 0:00] ## DMITABLE: @PREFIX@pv1: 
| [ 0:00] <======== Status ========>
| [ 0:00] ## DMSTATUS: @PREFIX@pv5: 0 69632 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv4: 0 69632 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv3: 0 69632 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv2: 0 69632 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv1: 0 69632 linear 
| [ 0:00] <======== Tree ========>
| [ 0:00] ## DMTREE:   @PREFIX@pv5 (253:6)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   @PREFIX@pv4 (253:4)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   @PREFIX@pv3 (253:3)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   @PREFIX@pv2 (253:7)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   @PREFIX@pv1 (253:5)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   LFS_vg-lfs (253:2)
| [ 0:00] ## DMTREE:    `- (8:16)
| [ 0:00] ## DMTREE:   centos-swap (253:1)
| [ 0:00] ## DMTREE:    `- (8:2)
| [ 0:00] ## DMTREE:   centos-root (253:0)
| [ 0:00] ## DMTREE:    `- (8:2)
| [ 0:00] <======== Recursive list of @TESTDIR@/dev ========>
| [ 0:00] ## LSLR:	@TESTDIR@/dev:
| [ 0:00] ## LSLR:	total 4
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 0 Feb 21 02:26 loop0
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 1 Feb 21 02:26 loop1
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 2 Feb 21 02:26 loop2
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 3 Feb 21 02:26 loop3
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 4 Feb 21 02:26 loop4
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 5 Feb 21 02:26 loop5
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 6 Feb 21 02:26 loop6
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 7 Feb 21 02:26 loop7
| [ 0:00] ## LSLR:	drwxr-xr-x 2 root root 4096 Feb 21 02:26 mapper
| [ 0:00] ## LSLR:	crw-r--r-- 1 root root 1, 3 Feb 21 02:26 testnull
| [ 0:00] ## LSLR:	
| [ 0:00] ## LSLR:	@TESTDIR@/dev/mapper:
| [ 0:00] ## LSLR:	total 0
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   5 Feb 21 02:26 @PREFIX@pv1
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   7 Feb 21 02:26 @PREFIX@pv2
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   3 Feb 21 02:26 @PREFIX@pv3
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   4 Feb 21 02:26 @PREFIX@pv4
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   6 Feb 21 02:26 @PREFIX@pv5
| [ 0:00] ## LSLR:	crw------- 1 root root  10, 236 Feb 21 02:26 control
| [ 0:00] <======== Udev DB content ========>
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-0
| [ 0:00] ## UDEV:	N: dm-0
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-0
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-0
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=0
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-1
| [ 0:00] ## UDEV:	N: dm-1
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-1
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-1
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=1
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-2
| [ 0:00] ## UDEV:	N: dm-2
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-2
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-2
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=2
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-3
| [ 0:00] ## UDEV:	N: dm-3
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-3
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-3
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=3
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-4
| [ 0:00] ## UDEV:	N: dm-4
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-4
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-4
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=4
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-5
| [ 0:00] ## UDEV:	N: dm-5
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-5
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-5
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=5
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-6
| [ 0:00] ## UDEV:	N: dm-6
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-6
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-6
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=6
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-7
| [ 0:00] ## UDEV:	N: dm-7
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-7
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-7
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=7
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/loop0
| [ 0:00] ## UDEV:	N: loop0
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/loop0
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/loop0
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=7
| [ 0:00] ## UDEV:	E: MINOR=0
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] <======== Script file "lvconvert-repair-snapshot.sh" ========>
| [ 0:00] ## Line: 1 	 #!/usr/bin/env bash
| [ 0:00] ## Line: 2 	 
| [ 0:00] ## Line: 3 	 # Copyright (C) 2011 Red Hat, Inc. All rights reserved.
| [ 0:00] ## Line: 4 	 #
| [ 0:00] ## Line: 5 	 # This copyrighted material is made available to anyone wishing to use,
| [ 0:00] ## Line: 6 	 # modify, copy, or redistribute it subject to the terms and conditions
| [ 0:00] ## Line: 7 	 # of the GNU General Public License v.2.
| [ 0:00] ## Line: 8 	 #
| [ 0:00] ## Line: 9 	 # You should have received a copy of the GNU General Public License
| [ 0:00] ## Line: 10 	 # along with this program; if not, write to the Free Software Foundation,
| [ 0:00] ## Line: 11 	 # Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA
| [ 0:00] ## Line: 12 	 
| [ 0:00] ## Line: 13 	 SKIP_WITH_LVMLOCKD=1
| [ 0:00] ## Line: 14 	 SKIP_WITH_LVMPOLLD=1
| [ 0:00] ## Line: 15 	 
| [ 0:00] ## Line: 16 	 . lib/inittest
| [ 0:00] ## Line: 17 	 
| [ 0:00] ## Line: 18 	 aux prepare_vg 5
| [ 0:00] ## Line: 19 	 aux lvmconf 'allocation/maximise_cling = 0' \
| [ 0:00] ## Line: 20 	 	    'allocation/mirror_logs_require_separate_pvs = 1'
| [ 0:00] ## Line: 21 	 
| [ 0:00] ## Line: 22 	 lvcreate -aey --type mirror -m 3 --ignoremonitoring -L 2M -n 4way $vg "$dev1" "$dev2" "$dev3" "$dev4" "$dev5":0
| [ 0:00] ## Line: 23 	 lvcreate -s $vg/4way -L 2M -n snap
| [ 0:00] ## Line: 24 	 
| [ 0:00] ## Line: 25 	 aux disable_dev "$dev2" "$dev4"
| [ 0:00] ## Line: 26 	 echo n | lvconvert --repair $vg/4way 2>&1 | tee 4way.out
| [ 0:00] ## Line: 27 	 lvs -a -o +devices $vg | not grep unknown
| [ 0:00] ## Line: 28 	 vgreduce --removemissing $vg
| [ 0:00] ## Line: 29 	 aux enable_dev "$dev2" "$dev4"
| [ 0:00] ## Line: 30 	 lvs -a -o +devices $vg
| [ 0:00] ## Line: 31 	 check mirror $vg 4way "$dev5"
| [ 0:00] ## Line: 32 	 
| [ 0:00] ## Line: 33 	 vgchange -an $vg
| [ 0:00] ## Line: 34 	 vgremove -ff $vg
| [ 0:00] aux teardown
| [ 0:00] #lvconvert-repair-snapshot.sh:1+ aux teardown
| [ 0:00] ## teardown.........ok
###       failed: [ndev-vanilla] shell/lvconvert-repair-snapshot.sh
###      skipped: [ndev-vanilla] shell/lvconvert-repair-thin-raid.sh
###      skipped: [ndev-vanilla] shell/lvconvert-repair-thin.sh
###      skipped: [ndev-vanilla] shell/lvconvert-repair-transient-dmeventd.sh

| [ 0:00] Library version:   1.02.146 (2017-12-18)
| [ 0:00] Driver version:    4.35.0
| [ 0:00] Kernel is Linux localhost.localdomain 3.10.0-693.11.1.el7.x86_64 #1 SMP Mon Dec 4 23:52:40 UTC 2017 x86_64 GNU/Linux
| [ 0:00] Selinux mode is not installed.
| [ 0:00]               total        used        free      shared  buff/cache   available
| [ 0:00] Mem:           7822        1075        4152          10        2594        6440
| [ 0:00] Swap:          4095           0        4095
| [ 0:00] Filesystem      Size  Used Avail Use% Mounted on
| [ 0:00] /dev/sdc1        18G  8.4G  8.4G  50% /
| [ 0:00] /dev/sdd1        51G  6.1G   43G  13% /lfskernel
| [ 0:00] devtmpfs        3.9G     0  3.9G   0% /dev
| [ 0:00] tmpfs           3.9G     0  3.9G   0% /run
| [ 0:00] @TESTDIR=/tmp/LVMTEST1704.tYxeDOWOTn
| [ 0:00] @PREFIX=LVMTEST1704
| [ 0:00] ## LVMCONF: activation {
| [ 0:00] ## LVMCONF:     checks = 1
| [ 0:00] ## LVMCONF:     monitoring = 0
| [ 0:00] ## LVMCONF:     polling_interval = 1
| [ 0:00] ## LVMCONF:     raid_region_size = 512
| [ 0:00] ## LVMCONF:     retry_deactivation = 1
| [ 0:00] ## LVMCONF:     snapshot_autoextend_percent = 50
| [ 0:00] ## LVMCONF:     snapshot_autoextend_threshold = 50
| [ 0:00] ## LVMCONF:     udev_rules = 1
| [ 0:00] ## LVMCONF:     udev_sync = 1
| [ 0:00] ## LVMCONF:     verify_udev_operations = 1
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: allocation {
| [ 0:00] ## LVMCONF:     wipe_signatures_when_zeroing_new_lvs = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: backup {
| [ 0:00] ## LVMCONF:     archive = 0
| [ 0:00] ## LVMCONF:     backup = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: devices {
| [ 0:00] ## LVMCONF:     cache_dir = "@TESTDIR@/etc"
| [ 0:00] ## LVMCONF:     default_data_alignment = 1
| [ 0:00] ## LVMCONF:     dir = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     filter = "a|.*|"
| [ 0:00] ## LVMCONF:     global_filter = [ "a|@TESTDIR@/dev/mapper/@PREFIX@.*pv[0-9_]*$|", "r|.*|" ]
| [ 0:00] ## LVMCONF:     md_component_detection  = 0
| [ 0:00] ## LVMCONF:     scan = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     sysfs_scan = 1
| [ 0:00] ## LVMCONF:     write_cache_state = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: dmeventd {
| [ 0:00] ## LVMCONF:     executable = "/sources/boot/LVM2.2.02.177/test/lib/dmeventd"
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: global {
| [ 0:00] ## LVMCONF:     abort_on_internal_errors = 1
| [ 0:00] ## LVMCONF:     cache_check_executable = "/usr/sbin/cache_check"
| [ 0:00] ## LVMCONF:     cache_dump_executable = "/usr/sbin/cache_dump"
| [ 0:00] ## LVMCONF:     cache_repair_executable = "/usr/sbin/cache_repair"
| [ 0:00] ## LVMCONF:     detect_internal_vg_cache_corruption = 1
| [ 0:00] ## LVMCONF:     fallback_to_local_locking = 0
| [ 0:00] ## LVMCONF:     fsadm_executable = "/sources/boot/LVM2.2.02.177/test/lib/fsadm"
| [ 0:00] ## LVMCONF:     library_dir = "@TESTDIR@/lib"
| [ 0:00] ## LVMCONF:     locking_dir = "@TESTDIR@/var/lock/lvm"
| [ 0:00] ## LVMCONF:     locking_type=1
| [ 0:00] ## LVMCONF:     notify_dbus = 0
| [ 0:00] ## LVMCONF:     si_unit_consistency = 1
| [ 0:00] ## LVMCONF:     thin_check_executable = "/usr/sbin/thin_check"
| [ 0:00] ## LVMCONF:     thin_dump_executable = "/usr/sbin/thin_dump"
| [ 0:00] ## LVMCONF:     thin_repair_executable = "/usr/sbin/thin_repair"
| [ 0:00] ## LVMCONF:     use_lvmetad = 0
| [ 0:00] ## LVMCONF:     use_lvmlockd = 0
| [ 0:00] ## LVMCONF:     use_lvmpolld = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: log {
| [ 0:00] ## LVMCONF:     activation = 1
| [ 0:00] ## LVMCONF:     file = "@TESTDIR@/debug.log"
| [ 0:00] ## LVMCONF:     indent = 1
| [ 0:00] ## LVMCONF:     level = 9
| [ 0:00] ## LVMCONF:     overwrite = 1
| [ 0:00] ## LVMCONF:     syslog = 0
| [ 0:00] ## LVMCONF:     verbose = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] <======== Processing test: "lvconvert-repair-transient.sh" ========>
| [ 0:00] 
| [ 0:00] aux mirror_recovery_works || skip
| [ 0:00] #lvconvert-repair-transient.sh:18+ aux mirror_recovery_works
| [ 0:00] aux prepare_vg 5
| [ 0:00] #lvconvert-repair-transient.sh:19+ aux prepare_vg 5
| [ 0:00] ## preparing loop device....ok (/dev/loop0)
| [ 0:00] ## preparing 5 devices...lib/utils: line 212: DM_UDEV_COOKIE: unbound variable
| [ 0:00] set +vx; STACKTRACE; set -vx
| [ 0:00] ##lvconvert-repair-transient.sh:19+ set +vx
| [ 0:00] ## - /lfskernel/sources/boot/LVM2.2.02.177/test/shell/lvconvert-repair-transient.sh:19
| [ 0:00] ## 1 STACKTRACE() called from /lfskernel/sources/boot/LVM2.2.02.177/test/shell/lvconvert-repair-transient.sh:19
| [ 0:00] <======== Info ========>
| [ 0:00] ## DMINFO:   Name             Maj Min Stat Open Targ Event  UUID                                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv5   253   6 L--w    0    1      0 TEST-@PREFIX@pv5                                                 
| [ 0:00] ## DMINFO:   @PREFIX@pv4   253   5 L--w    0    1      0 TEST-@PREFIX@pv4                                                 
| [ 0:00] ## DMINFO:   @PREFIX@pv3   253   4 L--w    0    1      0 TEST-@PREFIX@pv3                                                 
| [ 0:00] ## DMINFO:   @PREFIX@pv2   253   3 L--w    0    1      0 TEST-@PREFIX@pv2                                                 
| [ 0:00] ## DMINFO:   @PREFIX@pv1   253   7 L--w    0    1      0 TEST-@PREFIX@pv1                                                 
| [ 0:00] <======== Active table ========>
| [ 0:00] ## DMTABLE:  @PREFIX@pv5: 0 69632 linear 7:0 280576
| [ 0:00] ## DMTABLE:  @PREFIX@pv4: 0 69632 linear 7:0 210944
| [ 0:00] ## DMTABLE:  @PREFIX@pv3: 0 69632 linear 7:0 141312
| [ 0:00] ## DMTABLE:  @PREFIX@pv2: 0 69632 linear 7:0 71680
| [ 0:00] ## DMTABLE:  @PREFIX@pv1: 0 69632 linear 7:0 2048
| [ 0:00] <======== Inactive table ========>
| [ 0:00] ## DMITABLE: @PREFIX@pv5: 
| [ 0:00] ## DMITABLE: @PREFIX@pv4: 
| [ 0:00] ## DMITABLE: @PREFIX@pv3: 
| [ 0:00] ## DMITABLE: @PREFIX@pv2: 
| [ 0:00] ## DMITABLE: @PREFIX@pv1: 
| [ 0:00] <======== Status ========>
| [ 0:00] ## DMSTATUS: @PREFIX@pv5: 0 69632 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv4: 0 69632 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv3: 0 69632 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv2: 0 69632 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv1: 0 69632 linear 
| [ 0:00] <======== Tree ========>
| [ 0:00] ## DMTREE:   @PREFIX@pv5 (253:6)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   @PREFIX@pv4 (253:5)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   @PREFIX@pv3 (253:4)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   @PREFIX@pv2 (253:3)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   @PREFIX@pv1 (253:7)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   LFS_vg-lfs (253:2)
| [ 0:00] ## DMTREE:    `- (8:16)
| [ 0:00] ## DMTREE:   centos-swap (253:1)
| [ 0:00] ## DMTREE:    `- (8:2)
| [ 0:00] ## DMTREE:   centos-root (253:0)
| [ 0:00] ## DMTREE:    `- (8:2)
| [ 0:00] <======== Recursive list of @TESTDIR@/dev ========>
| [ 0:00] ## LSLR:	@TESTDIR@/dev:
| [ 0:00] ## LSLR:	total 4
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 0 Feb 21 02:26 loop0
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 1 Feb 21 02:26 loop1
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 2 Feb 21 02:26 loop2
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 3 Feb 21 02:26 loop3
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 4 Feb 21 02:26 loop4
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 5 Feb 21 02:26 loop5
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 6 Feb 21 02:26 loop6
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 7 Feb 21 02:26 loop7
| [ 0:00] ## LSLR:	drwxr-xr-x 2 root root 4096 Feb 21 02:26 mapper
| [ 0:00] ## LSLR:	crw-r--r-- 1 root root 1, 3 Feb 21 02:26 testnull
| [ 0:00] ## LSLR:	
| [ 0:00] ## LSLR:	@TESTDIR@/dev/mapper:
| [ 0:00] ## LSLR:	total 0
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   7 Feb 21 02:26 @PREFIX@pv1
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   3 Feb 21 02:26 @PREFIX@pv2
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   4 Feb 21 02:26 @PREFIX@pv3
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   5 Feb 21 02:26 @PREFIX@pv4
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   6 Feb 21 02:26 @PREFIX@pv5
| [ 0:00] ## LSLR:	crw------- 1 root root  10, 236 Feb 21 02:26 control
| [ 0:00] <======== Udev DB content ========>
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-0
| [ 0:00] ## UDEV:	N: dm-0
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-0
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-0
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=0
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-1
| [ 0:00] ## UDEV:	N: dm-1
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-1
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-1
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=1
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-2
| [ 0:00] ## UDEV:	N: dm-2
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-2
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-2
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=2
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-3
| [ 0:00] ## UDEV:	N: dm-3
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-3
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-3
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=3
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-4
| [ 0:00] ## UDEV:	N: dm-4
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-4
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-4
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=4
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-5
| [ 0:00] ## UDEV:	N: dm-5
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-5
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-5
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=5
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-6
| [ 0:00] ## UDEV:	N: dm-6
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-6
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-6
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=6
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-7
| [ 0:00] ## UDEV:	N: dm-7
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-7
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-7
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=7
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/loop0
| [ 0:00] ## UDEV:	N: loop0
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/loop0
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/loop0
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=7
| [ 0:00] ## UDEV:	E: MINOR=0
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] <======== Script file "lvconvert-repair-transient.sh" ========>
| [ 0:00] ## Line: 1 	 #!/usr/bin/env bash
| [ 0:00] ## Line: 2 	 
| [ 0:00] ## Line: 3 	 # Copyright (C) 2008 Red Hat, Inc. All rights reserved.
| [ 0:00] ## Line: 4 	 #
| [ 0:00] ## Line: 5 	 # This copyrighted material is made available to anyone wishing to use,
| [ 0:00] ## Line: 6 	 # modify, copy, or redistribute it subject to the terms and conditions
| [ 0:00] ## Line: 7 	 # of the GNU General Public License v.2.
| [ 0:00] ## Line: 8 	 #
| [ 0:00] ## Line: 9 	 # You should have received a copy of the GNU General Public License
| [ 0:00] ## Line: 10 	 # along with this program; if not, write to the Free Software Foundation,
| [ 0:00] ## Line: 11 	 # Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA
| [ 0:00] ## Line: 12 	 
| [ 0:00] ## Line: 13 	 SKIP_WITH_LVMLOCKD=1
| [ 0:00] ## Line: 14 	 SKIP_WITH_LVMPOLLD=1
| [ 0:00] ## Line: 15 	 
| [ 0:00] ## Line: 16 	 . lib/inittest
| [ 0:00] ## Line: 17 	 
| [ 0:00] ## Line: 18 	 aux mirror_recovery_works || skip
| [ 0:00] ## Line: 19 	 aux prepare_vg 5
| [ 0:00] ## Line: 20 	 
| [ 0:00] ## Line: 21 	 # ordinary mirrors
| [ 0:00] ## Line: 22 	 
| [ 0:00] ## Line: 23 	 lvcreate -aey --type mirror -m 3 --ignoremonitoring -L 1 -n 4way $vg
| [ 0:00] ## Line: 24 	 aux wait_for_sync $vg 4way
| [ 0:00] ## Line: 25 	 aux disable_dev --error --silent "$dev2" "$dev4"
| [ 0:00] ## Line: 26 	 mkfs.ext3 "$DM_DEV_DIR/$vg/4way" &
| [ 0:00] ## Line: 27 	 sleep 1
| [ 0:00] ## Line: 28 	 dmsetup status
| [ 0:00] ## Line: 29 	 echo n | lvconvert --repair $vg/4way 2>&1 | tee 4way.out
| [ 0:00] ## Line: 30 	 aux enable_dev --silent "$dev2" "$dev4"
| [ 0:00] ## Line: 31 	 
| [ 0:00] ## Line: 32 	 lvs -a -o +devices $vg | tee out
| [ 0:00] ## Line: 33 	 not grep unknown out
| [ 0:00] ## Line: 34 	 vgreduce --removemissing $vg
| [ 0:00] ## Line: 35 	 check mirror $vg 4way
| [ 0:00] ## Line: 36 	 lvchange -a n $vg/4way
| [ 0:00] ## Line: 37 	 wait
| [ 0:00] ## Line: 38 	 
| [ 0:00] ## Line: 39 	 vgremove -f $vg
| [ 0:00] aux teardown
| [ 0:00] #lvconvert-repair-transient.sh:1+ aux teardown
| [ 0:00] ## teardown.........ok
###       failed: [ndev-vanilla] shell/lvconvert-repair-transient.sh

| [ 0:00] Library version:   1.02.146 (2017-12-18)
| [ 0:00] Driver version:    4.35.0
| [ 0:00] Kernel is Linux localhost.localdomain 3.10.0-693.11.1.el7.x86_64 #1 SMP Mon Dec 4 23:52:40 UTC 2017 x86_64 GNU/Linux
| [ 0:00] Selinux mode is not installed.
| [ 0:00]               total        used        free      shared  buff/cache   available
| [ 0:00] Mem:           7822        1075        4152          10        2594        6440
| [ 0:00] Swap:          4095           0        4095
| [ 0:00] Filesystem      Size  Used Avail Use% Mounted on
| [ 0:00] /dev/sdc1        18G  8.4G  8.4G  50% /
| [ 0:00] /dev/sdd1        51G  6.1G   43G  13% /lfskernel
| [ 0:00] devtmpfs        3.9G     0  3.9G   0% /dev
| [ 0:00] tmpfs           3.9G     0  3.9G   0% /run
| [ 0:00] @TESTDIR=/tmp/LVMTEST1974.v3lr3ppPUf
| [ 0:00] @PREFIX=LVMTEST1974
| [ 0:00] ## LVMCONF: activation {
| [ 0:00] ## LVMCONF:     checks = 1
| [ 0:00] ## LVMCONF:     monitoring = 0
| [ 0:00] ## LVMCONF:     polling_interval = 1
| [ 0:00] ## LVMCONF:     raid_region_size = 512
| [ 0:00] ## LVMCONF:     retry_deactivation = 1
| [ 0:00] ## LVMCONF:     snapshot_autoextend_percent = 50
| [ 0:00] ## LVMCONF:     snapshot_autoextend_threshold = 50
| [ 0:00] ## LVMCONF:     udev_rules = 1
| [ 0:00] ## LVMCONF:     udev_sync = 1
| [ 0:00] ## LVMCONF:     verify_udev_operations = 1
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: allocation {
| [ 0:00] ## LVMCONF:     wipe_signatures_when_zeroing_new_lvs = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: backup {
| [ 0:00] ## LVMCONF:     archive = 0
| [ 0:00] ## LVMCONF:     backup = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: devices {
| [ 0:00] ## LVMCONF:     cache_dir = "@TESTDIR@/etc"
| [ 0:00] ## LVMCONF:     default_data_alignment = 1
| [ 0:00] ## LVMCONF:     dir = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     filter = "a|.*|"
| [ 0:00] ## LVMCONF:     global_filter = [ "a|@TESTDIR@/dev/mapper/@PREFIX@.*pv[0-9_]*$|", "r|.*|" ]
| [ 0:00] ## LVMCONF:     md_component_detection  = 0
| [ 0:00] ## LVMCONF:     scan = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     sysfs_scan = 1
| [ 0:00] ## LVMCONF:     write_cache_state = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: dmeventd {
| [ 0:00] ## LVMCONF:     executable = "/sources/boot/LVM2.2.02.177/test/lib/dmeventd"
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: global {
| [ 0:00] ## LVMCONF:     abort_on_internal_errors = 1
| [ 0:00] ## LVMCONF:     cache_check_executable = "/usr/sbin/cache_check"
| [ 0:00] ## LVMCONF:     cache_dump_executable = "/usr/sbin/cache_dump"
| [ 0:00] ## LVMCONF:     cache_repair_executable = "/usr/sbin/cache_repair"
| [ 0:00] ## LVMCONF:     detect_internal_vg_cache_corruption = 1
| [ 0:00] ## LVMCONF:     fallback_to_local_locking = 0
| [ 0:00] ## LVMCONF:     fsadm_executable = "/sources/boot/LVM2.2.02.177/test/lib/fsadm"
| [ 0:00] ## LVMCONF:     library_dir = "@TESTDIR@/lib"
| [ 0:00] ## LVMCONF:     locking_dir = "@TESTDIR@/var/lock/lvm"
| [ 0:00] ## LVMCONF:     locking_type=1
| [ 0:00] ## LVMCONF:     notify_dbus = 0
| [ 0:00] ## LVMCONF:     si_unit_consistency = 1
| [ 0:00] ## LVMCONF:     thin_check_executable = "/usr/sbin/thin_check"
| [ 0:00] ## LVMCONF:     thin_dump_executable = "/usr/sbin/thin_dump"
| [ 0:00] ## LVMCONF:     thin_repair_executable = "/usr/sbin/thin_repair"
| [ 0:00] ## LVMCONF:     use_lvmetad = 0
| [ 0:00] ## LVMCONF:     use_lvmlockd = 0
| [ 0:00] ## LVMCONF:     use_lvmpolld = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: log {
| [ 0:00] ## LVMCONF:     activation = 1
| [ 0:00] ## LVMCONF:     file = "@TESTDIR@/debug.log"
| [ 0:00] ## LVMCONF:     indent = 1
| [ 0:00] ## LVMCONF:     level = 9
| [ 0:00] ## LVMCONF:     overwrite = 1
| [ 0:00] ## LVMCONF:     syslog = 0
| [ 0:00] ## LVMCONF:     verbose = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] <======== Processing test: "lvconvert-repair.sh" ========>
| [ 0:00] 
| [ 0:00] recreate_vg_()
| [ 0:00] {
| [ 0:00] 	vgremove -ff $vg
| [ 0:00] 	vgcreate "$vg" "$@" "${DEVICES[@]}"
| [ 0:00] }
| [ 0:00] 
| [ 0:00] _check_mlog()
| [ 0:00] {
| [ 0:00] 	lvs -a -o +devices $vg | tee out
| [ 0:00] 	not grep unknown out
| [ 0:00] 	not grep mlog out
| [ 0:00] 	dmsetup ls | grep $PREFIX | tee out
| [ 0:00] 	not grep mlog out
| [ 0:00] }
| [ 0:00] 
| [ 0:00] aux lvmconf "allocation/maximise_cling = 0" \
| [ 0:00] 	    "allocation/mirror_logs_require_separate_pvs = 1"
| [ 0:00] #lvconvert-repair.sh:32+ aux lvmconf 'allocation/maximise_cling = 0' 'allocation/mirror_logs_require_separate_pvs = 1'
| [ 0:00] ## LVMCONF: activation {
| [ 0:00] ## LVMCONF:     checks = 1
| [ 0:00] ## LVMCONF:     monitoring = 0
| [ 0:00] ## LVMCONF:     polling_interval = 1
| [ 0:00] ## LVMCONF:     raid_region_size = 512
| [ 0:00] ## LVMCONF:     retry_deactivation = 1
| [ 0:00] ## LVMCONF:     snapshot_autoextend_percent = 50
| [ 0:00] ## LVMCONF:     snapshot_autoextend_threshold = 50
| [ 0:00] ## LVMCONF:     udev_rules = 1
| [ 0:00] ## LVMCONF:     udev_sync = 1
| [ 0:00] ## LVMCONF:     verify_udev_operations = 1
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: allocation {
| [ 0:00] ## LVMCONF:     maximise_cling = 0
| [ 0:00] ## LVMCONF:     mirror_logs_require_separate_pvs = 1
| [ 0:00] ## LVMCONF:     wipe_signatures_when_zeroing_new_lvs = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: backup {
| [ 0:00] ## LVMCONF:     archive = 0
| [ 0:00] ## LVMCONF:     backup = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: devices {
| [ 0:00] ## LVMCONF:     cache_dir = "@TESTDIR@/etc"
| [ 0:00] ## LVMCONF:     default_data_alignment = 1
| [ 0:00] ## LVMCONF:     dir = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     filter = "a|.*|"
| [ 0:00] ## LVMCONF:     global_filter = [ "a|@TESTDIR@/dev/mapper/@PREFIX@.*pv[0-9_]*$|", "r|.*|" ]
| [ 0:00] ## LVMCONF:     md_component_detection  = 0
| [ 0:00] ## LVMCONF:     scan = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     sysfs_scan = 1
| [ 0:00] ## LVMCONF:     write_cache_state = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: dmeventd {
| [ 0:00] ## LVMCONF:     executable = "/sources/boot/LVM2.2.02.177/test/lib/dmeventd"
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: global {
| [ 0:00] ## LVMCONF:     abort_on_internal_errors = 1
| [ 0:00] ## LVMCONF:     cache_check_executable = "/usr/sbin/cache_check"
| [ 0:00] ## LVMCONF:     cache_dump_executable = "/usr/sbin/cache_dump"
| [ 0:00] ## LVMCONF:     cache_repair_executable = "/usr/sbin/cache_repair"
| [ 0:00] ## LVMCONF:     detect_internal_vg_cache_corruption = 1
| [ 0:00] ## LVMCONF:     fallback_to_local_locking = 0
| [ 0:00] ## LVMCONF:     fsadm_executable = "/sources/boot/LVM2.2.02.177/test/lib/fsadm"
| [ 0:00] ## LVMCONF:     library_dir = "@TESTDIR@/lib"
| [ 0:00] ## LVMCONF:     locking_dir = "@TESTDIR@/var/lock/lvm"
| [ 0:00] ## LVMCONF:     locking_type=1
| [ 0:00] ## LVMCONF:     notify_dbus = 0
| [ 0:00] ## LVMCONF:     si_unit_consistency = 1
| [ 0:00] ## LVMCONF:     thin_check_executable = "/usr/sbin/thin_check"
| [ 0:00] ## LVMCONF:     thin_dump_executable = "/usr/sbin/thin_dump"
| [ 0:00] ## LVMCONF:     thin_repair_executable = "/usr/sbin/thin_repair"
| [ 0:00] ## LVMCONF:     use_lvmetad = 0
| [ 0:00] ## LVMCONF:     use_lvmlockd = 0
| [ 0:00] ## LVMCONF:     use_lvmpolld = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: log {
| [ 0:00] ## LVMCONF:     activation = 1
| [ 0:00] ## LVMCONF:     file = "@TESTDIR@/debug.log"
| [ 0:00] ## LVMCONF:     indent = 1
| [ 0:00] ## LVMCONF:     level = 9
| [ 0:00] ## LVMCONF:     overwrite = 1
| [ 0:00] ## LVMCONF:     syslog = 0
| [ 0:00] ## LVMCONF:     verbose = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] 
| [ 0:00] # fail multiple devices
| [ 0:00] 
| [ 0:00] # 4-way, disk log => 2-way, disk log
| [ 0:00] aux prepare_vg 8
| [ 0:00] #lvconvert-repair.sh:38+ aux prepare_vg 8
| [ 0:00] ## preparing loop device....ok (/dev/loop0)
| [ 0:00] ## preparing 8 devices...lib/utils: line 212: DM_UDEV_COOKIE: unbound variable
| [ 0:00] set +vx; STACKTRACE; set -vx
| [ 0:00] ##lvconvert-repair.sh:38+ set +vx
| [ 0:00] ## - /lfskernel/sources/boot/LVM2.2.02.177/test/shell/lvconvert-repair.sh:38
| [ 0:00] ## 1 STACKTRACE() called from /lfskernel/sources/boot/LVM2.2.02.177/test/shell/lvconvert-repair.sh:38
| [ 0:00] <======== Info ========>
| [ 0:00] ## DMINFO:   Name             Maj Min Stat Open Targ Event  UUID                                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv8   253   7 L--w    0    1      0 TEST-@PREFIX@pv8                                                 
| [ 0:00] ## DMINFO:   @PREFIX@pv7   253   4 L--w    0    1      0 TEST-@PREFIX@pv7                                                 
| [ 0:00] ## DMINFO:   @PREFIX@pv6   253   3 L--w    0    1      0 TEST-@PREFIX@pv6                                                 
| [ 0:00] ## DMINFO:   @PREFIX@pv5   253  10 L--w    0    1      0 TEST-@PREFIX@pv5                                                 
| [ 0:00] ## DMINFO:   @PREFIX@pv4   253   6 L--w    0    1      0 TEST-@PREFIX@pv4                                                 
| [ 0:00] ## DMINFO:   @PREFIX@pv3   253   5 L--w    0    1      0 TEST-@PREFIX@pv3                                                 
| [ 0:00] ## DMINFO:   @PREFIX@pv2   253   9 L--w    0    1      0 TEST-@PREFIX@pv2                                                 
| [ 0:00] ## DMINFO:   @PREFIX@pv1   253   8 L--w    0    1      0 TEST-@PREFIX@pv1                                                 
| [ 0:00] <======== Active table ========>
| [ 0:00] ## DMTABLE:  @PREFIX@pv8: 0 69632 linear 7:0 489472
| [ 0:00] ## DMTABLE:  @PREFIX@pv7: 0 69632 linear 7:0 419840
| [ 0:00] ## DMTABLE:  @PREFIX@pv6: 0 69632 linear 7:0 350208
| [ 0:00] ## DMTABLE:  @PREFIX@pv5: 0 69632 linear 7:0 280576
| [ 0:00] ## DMTABLE:  @PREFIX@pv4: 0 69632 linear 7:0 210944
| [ 0:00] ## DMTABLE:  @PREFIX@pv3: 0 69632 linear 7:0 141312
| [ 0:00] ## DMTABLE:  @PREFIX@pv2: 0 69632 linear 7:0 71680
| [ 0:00] ## DMTABLE:  @PREFIX@pv1: 0 69632 linear 7:0 2048
| [ 0:00] <======== Inactive table ========>
| [ 0:00] ## DMITABLE: @PREFIX@pv8: 
| [ 0:00] ## DMITABLE: @PREFIX@pv7: 
| [ 0:00] ## DMITABLE: @PREFIX@pv6: 
| [ 0:00] ## DMITABLE: @PREFIX@pv5: 
| [ 0:00] ## DMITABLE: @PREFIX@pv4: 
| [ 0:00] ## DMITABLE: @PREFIX@pv3: 
| [ 0:00] ## DMITABLE: @PREFIX@pv2: 
| [ 0:00] ## DMITABLE: @PREFIX@pv1: 
| [ 0:00] <======== Status ========>
| [ 0:00] ## DMSTATUS: @PREFIX@pv8: 0 69632 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv7: 0 69632 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv6: 0 69632 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv5: 0 69632 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv4: 0 69632 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv3: 0 69632 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv2: 0 69632 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv1: 0 69632 linear 
| [ 0:00] <======== Tree ========>
| [ 0:00] ## DMTREE:   @PREFIX@pv8 (253:7)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   @PREFIX@pv7 (253:4)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   @PREFIX@pv6 (253:3)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   @PREFIX@pv5 (253:10)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   @PREFIX@pv4 (253:6)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   @PREFIX@pv3 (253:5)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   LFS_vg-lfs (253:2)
| [ 0:00] ## DMTREE:    `- (8:16)
| [ 0:00] ## DMTREE:   @PREFIX@pv2 (253:9)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   centos-swap (253:1)
| [ 0:00] ## DMTREE:    `- (8:2)
| [ 0:00] ## DMTREE:   centos-root (253:0)
| [ 0:00] ## DMTREE:    `- (8:2)
| [ 0:00] ## DMTREE:   @PREFIX@pv1 (253:8)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] <======== Recursive list of @TESTDIR@/dev ========>
| [ 0:00] ## LSLR:	@TESTDIR@/dev:
| [ 0:00] ## LSLR:	total 4
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 0 Feb 21 02:26 loop0
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 1 Feb 21 02:26 loop1
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 2 Feb 21 02:26 loop2
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 3 Feb 21 02:26 loop3
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 4 Feb 21 02:26 loop4
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 5 Feb 21 02:26 loop5
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 6 Feb 21 02:26 loop6
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 7 Feb 21 02:26 loop7
| [ 0:00] ## LSLR:	drwxr-xr-x 2 root root 4096 Feb 21 02:26 mapper
| [ 0:00] ## LSLR:	crw-r--r-- 1 root root 1, 3 Feb 21 02:26 testnull
| [ 0:00] ## LSLR:	
| [ 0:00] ## LSLR:	@TESTDIR@/dev/mapper:
| [ 0:00] ## LSLR:	total 0
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   8 Feb 21 02:26 @PREFIX@pv1
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   9 Feb 21 02:26 @PREFIX@pv2
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   5 Feb 21 02:26 @PREFIX@pv3
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   6 Feb 21 02:26 @PREFIX@pv4
| [ 0:00] ## LSLR:	brw------- 1 root root 253,  10 Feb 21 02:26 @PREFIX@pv5
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   3 Feb 21 02:26 @PREFIX@pv6
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   4 Feb 21 02:26 @PREFIX@pv7
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   7 Feb 21 02:26 @PREFIX@pv8
| [ 0:00] ## LSLR:	crw------- 1 root root  10, 236 Feb 21 02:26 control
| [ 0:00] <======== Udev DB content ========>
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-0
| [ 0:00] ## UDEV:	N: dm-0
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-0
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-0
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=0
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-1
| [ 0:00] ## UDEV:	N: dm-1
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-1
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-1
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=1
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-10
| [ 0:00] ## UDEV:	N: dm-10
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-10
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-10
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=10
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-2
| [ 0:00] ## UDEV:	N: dm-2
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-2
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-2
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=2
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-3
| [ 0:00] ## UDEV:	N: dm-3
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-3
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-3
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=3
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-4
| [ 0:00] ## UDEV:	N: dm-4
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-4
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-4
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=4
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-5
| [ 0:00] ## UDEV:	N: dm-5
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-5
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-5
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=5
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-6
| [ 0:00] ## UDEV:	N: dm-6
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-6
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-6
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=6
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-7
| [ 0:00] ## UDEV:	N: dm-7
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-7
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-7
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=7
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-8
| [ 0:00] ## UDEV:	N: dm-8
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-8
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-8
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=8
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-9
| [ 0:00] ## UDEV:	N: dm-9
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-9
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-9
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=9
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/loop0
| [ 0:00] ## UDEV:	N: loop0
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/loop0
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/loop0
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=7
| [ 0:00] ## UDEV:	E: MINOR=0
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] <======== Script file "lvconvert-repair.sh" ========>
| [ 0:00] ## Line: 1 	 #!/usr/bin/env bash
| [ 0:00] ## Line: 2 	 
| [ 0:00] ## Line: 3 	 # Copyright (C) 2008-2013 Red Hat, Inc. All rights reserved.
| [ 0:00] ## Line: 4 	 #
| [ 0:00] ## Line: 5 	 # This copyrighted material is made available to anyone wishing to use,
| [ 0:00] ## Line: 6 	 # modify, copy, or redistribute it subject to the terms and conditions
| [ 0:00] ## Line: 7 	 # of the GNU General Public License v.2.
| [ 0:00] ## Line: 8 	 #
| [ 0:00] ## Line: 9 	 # You should have received a copy of the GNU General Public License
| [ 0:00] ## Line: 10 	 # along with this program; if not, write to the Free Software Foundation,
| [ 0:00] ## Line: 11 	 # Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA
| [ 0:00] ## Line: 12 	 
| [ 0:00] ## Line: 13 	 SKIP_WITH_LVMLOCKD=1
| [ 0:00] ## Line: 14 	 
| [ 0:00] ## Line: 15 	 . lib/inittest
| [ 0:00] ## Line: 16 	 
| [ 0:00] ## Line: 17 	 recreate_vg_()
| [ 0:00] ## Line: 18 	 {
| [ 0:00] ## Line: 19 	 	vgremove -ff $vg
| [ 0:00] ## Line: 20 	 	vgcreate "$vg" "$@" "${DEVICES[@]}"
| [ 0:00] ## Line: 21 	 }
| [ 0:00] ## Line: 22 	 
| [ 0:00] ## Line: 23 	 _check_mlog()
| [ 0:00] ## Line: 24 	 {
| [ 0:00] ## Line: 25 	 	lvs -a -o +devices $vg | tee out
| [ 0:00] ## Line: 26 	 	not grep unknown out
| [ 0:00] ## Line: 27 	 	not grep mlog out
| [ 0:00] ## Line: 28 	 	dmsetup ls | grep $PREFIX | tee out
| [ 0:00] ## Line: 29 	 	not grep mlog out
| [ 0:00] ## Line: 30 	 }
| [ 0:00] ## Line: 31 	 
| [ 0:00] ## Line: 32 	 aux lvmconf "allocation/maximise_cling = 0" \
| [ 0:00] ## Line: 33 	 	    "allocation/mirror_logs_require_separate_pvs = 1"
| [ 0:00] ## Line: 34 	 
| [ 0:00] ## Line: 35 	 # fail multiple devices
| [ 0:00] ## Line: 36 	 
| [ 0:00] ## Line: 37 	 # 4-way, disk log => 2-way, disk log
| [ 0:00] ## Line: 38 	 aux prepare_vg 8
| [ 0:00] ## Line: 39 	 get_devs
| [ 0:00] ## Line: 40 	 
| [ 0:00] ## Line: 41 	 lvcreate -aey --type mirror -m 3 --ignoremonitoring -L 1 -n 4way $vg "$dev1" "$dev2" "$dev3" "$dev4" "$dev5":0
| [ 0:00] ## Line: 42 	 aux disable_dev "$dev2" "$dev4"
| [ 0:00] ## Line: 43 	 echo n | lvconvert --repair $vg/4way 2>&1 | tee 4way.out
| [ 0:00] ## Line: 44 	 lvs -a -o +devices $vg | not grep unknown
| [ 0:00] ## Line: 45 	 vgreduce --removemissing $vg
| [ 0:00] ## Line: 46 	 aux enable_dev "$dev2" "$dev4"
| [ 0:00] ## Line: 47 	 check mirror $vg 4way "$dev5"
| [ 0:00] ## Line: 48 	 
| [ 0:00] ## Line: 49 	 # 3-way, disk log => linear
| [ 0:00] ## Line: 50 	 recreate_vg_
| [ 0:00] ## Line: 51 	 lvcreate -aey --type mirror -m 2 --ignoremonitoring -L 1 -n 3way $vg
| [ 0:00] ## Line: 52 	 aux disable_dev "$dev1" "$dev2"
| [ 0:00] ## Line: 53 	 echo n | lvconvert --repair $vg/3way
| [ 0:00] ## Line: 54 	 check linear $vg 3way
| [ 0:00] ## Line: 55 	 _check_mlog
| [ 0:00] ## Line: 56 	 vgreduce --removemissing $vg
| [ 0:00] ## Line: 57 	 aux enable_dev "$dev1" "$dev2"
| [ 0:00] ## Line: 58 	 check linear $vg 3way
| [ 0:00] ## Line: 59 	 
| [ 0:00] ## Line: 60 	 # fail just log and get it removed
| [ 0:00] ## Line: 61 	 
| [ 0:00] ## Line: 62 	 # 3-way, disk log => 3-way, core log
| [ 0:00] ## Line: 63 	 recreate_vg_
| [ 0:00] ## Line: 64 	 lvcreate -aey --type mirror -m 2 --ignoremonitoring -L 1 -n 3way $vg "$dev1" "$dev2" "$dev3" "$dev4":0
| [ 0:00] ## Line: 65 	 aux disable_dev "$dev4"
| [ 0:00] ## Line: 66 	 echo n | lvconvert --repair $vg/3way
| [ 0:00] ## Line: 67 	 check mirror $vg 3way core
| [ 0:00] ## Line: 68 	 _check_mlog
| [ 0:00] ## Line: 69 	 vgreduce --removemissing $vg
| [ 0:00] ## Line: 70 	 aux enable_dev "$dev4"
| [ 0:00] ## Line: 71 	 
| [ 0:00] ## Line: 72 	 # 3-way, mirrored log => 3-way, core log
| [ 0:00] ## Line: 73 	 recreate_vg_ -c n
| [ 0:00] ## Line: 74 	 lvcreate -aey --type mirror -m 2 --mirrorlog mirrored --ignoremonitoring -L 1 -n 3way $vg \
| [ 0:00] ## Line: 75 	     "$dev1" "$dev2" "$dev3" "$dev4":0 "$dev5":0
| [ 0:00] ## Line: 76 	 aux disable_dev "$dev4" "$dev5"
| [ 0:00] ## Line: 77 	 echo n | lvconvert --repair $vg/3way
| [ 0:00] ## Line: 78 	 check mirror $vg 3way core
| [ 0:00] ## Line: 79 	 _check_mlog
| [ 0:00] ## Line: 80 	 vgreduce --removemissing $vg
| [ 0:00] ## Line: 81 	 aux enable_dev "$dev4" "$dev5"
| [ 0:00] ## Line: 82 	 
| [ 0:00] ## Line: 83 	 # 2-way, disk log => 2-way, core log
| [ 0:00] ## Line: 84 	 recreate_vg_
| [ 0:00] ## Line: 85 	 lvcreate -aey --type mirror -m 1 --ignoremonitoring -L 1 -n 2way $vg "$dev1" "$dev2" "$dev3":0
| [ 0:00] ## Line: 86 	 aux disable_dev "$dev3"
| [ 0:00] ## Line: 87 	 echo n | lvconvert --repair $vg/2way
| [ 0:00] ## Line: 88 	 check mirror $vg 2way core
| [ 0:00] ## Line: 89 	 _check_mlog
| [ 0:00] ## Line: 90 	 vgreduce --removemissing $vg
| [ 0:00] ## Line: 91 	 aux enable_dev "$dev3"
| [ 0:00] ## Line: 92 	 
| [ 0:00] ## Line: 93 	 # fail single devices
| [ 0:00] ## Line: 94 	 
| [ 0:00] ## Line: 95 	 recreate_vg_
| [ 0:00] ## Line: 96 	 vgreduce $vg "$dev4"
| [ 0:00] ## Line: 97 	 
| [ 0:00] ## Line: 98 	 lvcreate -aey --type mirror -m 1 --ignoremonitoring -L 1 -n mirror $vg
| [ 0:00] ## Line: 99 	 lvchange -a n $vg/mirror
| [ 0:00] ## Line: 100 	 vgextend $vg "$dev4"
| [ 0:00] ## Line: 101 	 aux disable_dev "$dev1"
| [ 0:00] ## Line: 102 	 lvchange --partial -aey $vg/mirror
| [ 0:00] ## Line: 103 	 
| [ 0:00] ## Line: 104 	 not vgreduce -v --removemissing $vg
| [ 0:00] ## Line: 105 	 lvconvert -y --repair $vg/mirror
| [ 0:00] ## Line: 106 	 vgreduce --removemissing $vg
| [ 0:00] ## Line: 107 	 
| [ 0:00] ## Line: 108 	 aux enable_dev "$dev1"
| [ 0:00] ## Line: 109 	 vgextend $vg "$dev1"
| [ 0:00] ## Line: 110 	 aux disable_dev "$dev2"
| [ 0:00] ## Line: 111 	 lvconvert -y --repair $vg/mirror
| [ 0:00] ## Line: 112 	 vgreduce --removemissing $vg
| [ 0:00] ## Line: 113 	 
| [ 0:00] ## Line: 114 	 aux enable_dev "$dev2"
| [ 0:00] ## Line: 115 	 vgextend $vg "$dev2"
| [ 0:00] ## Line: 116 	 aux disable_dev "$dev3"
| [ 0:00] ## Line: 117 	 lvconvert -y --repair $vg/mirror
| [ 0:00] ## Line: 118 	 vgreduce --removemissing $vg
| [ 0:00] ## Line: 119 	 aux enable_dev "$dev3"
| [ 0:00] ## Line: 120 	 vgextend $vg "$dev3"
| [ 0:00] ## Line: 121 	 
| [ 0:00] ## Line: 122 	 vgremove -ff $vg
| [ 0:00] aux teardown
| [ 0:00] #lvconvert-repair.sh:1+ aux teardown
| [ 0:00] ## teardown.........ok
###       failed: [ndev-vanilla] shell/lvconvert-repair.sh
###      skipped: [ndev-vanilla] shell/lvconvert-snapshot-cache.sh

| [ 0:00] Library version:   1.02.146 (2017-12-18)
| [ 0:00] Driver version:    4.35.0
| [ 0:00] Kernel is Linux localhost.localdomain 3.10.0-693.11.1.el7.x86_64 #1 SMP Mon Dec 4 23:52:40 UTC 2017 x86_64 GNU/Linux
| [ 0:00] Selinux mode is not installed.
| [ 0:00]               total        used        free      shared  buff/cache   available
| [ 0:00] Mem:           7822        1076        4151          10        2594        6439
| [ 0:00] Swap:          4095           0        4095
| [ 0:00] Filesystem      Size  Used Avail Use% Mounted on
| [ 0:00] /dev/sdc1        18G  8.4G  8.4G  50% /
| [ 0:00] /dev/sdd1        51G  6.1G   43G  13% /lfskernel
| [ 0:00] devtmpfs        3.9G     0  3.9G   0% /dev
| [ 0:00] tmpfs           3.9G     0  3.9G   0% /run
| [ 0:00] @TESTDIR=/tmp/LVMTEST2418.rM9jOmWdw9
| [ 0:00] @PREFIX=LVMTEST2418
| [ 0:00] ## LVMCONF: activation {
| [ 0:00] ## LVMCONF:     checks = 1
| [ 0:00] ## LVMCONF:     monitoring = 0
| [ 0:00] ## LVMCONF:     polling_interval = 1
| [ 0:00] ## LVMCONF:     raid_region_size = 512
| [ 0:00] ## LVMCONF:     retry_deactivation = 1
| [ 0:00] ## LVMCONF:     snapshot_autoextend_percent = 50
| [ 0:00] ## LVMCONF:     snapshot_autoextend_threshold = 50
| [ 0:00] ## LVMCONF:     udev_rules = 1
| [ 0:00] ## LVMCONF:     udev_sync = 1
| [ 0:00] ## LVMCONF:     verify_udev_operations = 1
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: allocation {
| [ 0:00] ## LVMCONF:     wipe_signatures_when_zeroing_new_lvs = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: backup {
| [ 0:00] ## LVMCONF:     archive = 0
| [ 0:00] ## LVMCONF:     backup = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: devices {
| [ 0:00] ## LVMCONF:     cache_dir = "@TESTDIR@/etc"
| [ 0:00] ## LVMCONF:     default_data_alignment = 1
| [ 0:00] ## LVMCONF:     dir = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     filter = "a|.*|"
| [ 0:00] ## LVMCONF:     global_filter = [ "a|@TESTDIR@/dev/mapper/@PREFIX@.*pv[0-9_]*$|", "r|.*|" ]
| [ 0:00] ## LVMCONF:     md_component_detection  = 0
| [ 0:00] ## LVMCONF:     scan = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     sysfs_scan = 1
| [ 0:00] ## LVMCONF:     write_cache_state = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: dmeventd {
| [ 0:00] ## LVMCONF:     executable = "/sources/boot/LVM2.2.02.177/test/lib/dmeventd"
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: global {
| [ 0:00] ## LVMCONF:     abort_on_internal_errors = 1
| [ 0:00] ## LVMCONF:     cache_check_executable = "/usr/sbin/cache_check"
| [ 0:00] ## LVMCONF:     cache_dump_executable = "/usr/sbin/cache_dump"
| [ 0:00] ## LVMCONF:     cache_repair_executable = "/usr/sbin/cache_repair"
| [ 0:00] ## LVMCONF:     detect_internal_vg_cache_corruption = 1
| [ 0:00] ## LVMCONF:     fallback_to_local_locking = 0
| [ 0:00] ## LVMCONF:     fsadm_executable = "/sources/boot/LVM2.2.02.177/test/lib/fsadm"
| [ 0:00] ## LVMCONF:     library_dir = "@TESTDIR@/lib"
| [ 0:00] ## LVMCONF:     locking_dir = "@TESTDIR@/var/lock/lvm"
| [ 0:00] ## LVMCONF:     locking_type=1
| [ 0:00] ## LVMCONF:     notify_dbus = 0
| [ 0:00] ## LVMCONF:     si_unit_consistency = 1
| [ 0:00] ## LVMCONF:     thin_check_executable = "/usr/sbin/thin_check"
| [ 0:00] ## LVMCONF:     thin_dump_executable = "/usr/sbin/thin_dump"
| [ 0:00] ## LVMCONF:     thin_repair_executable = "/usr/sbin/thin_repair"
| [ 0:00] ## LVMCONF:     use_lvmetad = 0
| [ 0:00] ## LVMCONF:     use_lvmlockd = 0
| [ 0:00] ## LVMCONF:     use_lvmpolld = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: log {
| [ 0:00] ## LVMCONF:     activation = 1
| [ 0:00] ## LVMCONF:     file = "@TESTDIR@/debug.log"
| [ 0:00] ## LVMCONF:     indent = 1
| [ 0:00] ## LVMCONF:     level = 9
| [ 0:00] ## LVMCONF:     overwrite = 1
| [ 0:00] ## LVMCONF:     syslog = 0
| [ 0:00] ## LVMCONF:     verbose = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] <======== Processing test: "lvconvert-snapshot-mirror.sh" ========>
| [ 0:00] 
| [ 0:00] aux prepare_vg 3
| [ 0:00] #lvconvert-snapshot-mirror.sh:20+ aux prepare_vg 3
| [ 0:00] ## preparing loop device....ok (/dev/loop0)
| [ 0:00] ## preparing 3 devices...lib/utils: line 212: DM_UDEV_COOKIE: unbound variable
| [ 0:00] set +vx; STACKTRACE; set -vx
| [ 0:00] ##lvconvert-snapshot-mirror.sh:20+ set +vx
| [ 0:00] ## - /lfskernel/sources/boot/LVM2.2.02.177/test/shell/lvconvert-snapshot-mirror.sh:20
| [ 0:00] ## 1 STACKTRACE() called from /lfskernel/sources/boot/LVM2.2.02.177/test/shell/lvconvert-snapshot-mirror.sh:20
| [ 0:00] <======== Info ========>
| [ 0:00] ## DMINFO:   Name             Maj Min Stat Open Targ Event  UUID                                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv3   253   4 L--w    0    1      0 TEST-@PREFIX@pv3                                                 
| [ 0:00] ## DMINFO:   @PREFIX@pv2   253   3 L--w    0    1      0 TEST-@PREFIX@pv2                                                 
| [ 0:00] ## DMINFO:   @PREFIX@pv1   253   5 L--w    0    1      0 TEST-@PREFIX@pv1                                                 
| [ 0:00] <======== Active table ========>
| [ 0:00] ## DMTABLE:  @PREFIX@pv3: 0 69632 linear 7:0 141312
| [ 0:00] ## DMTABLE:  @PREFIX@pv2: 0 69632 linear 7:0 71680
| [ 0:00] ## DMTABLE:  @PREFIX@pv1: 0 69632 linear 7:0 2048
| [ 0:00] <======== Inactive table ========>
| [ 0:00] ## DMITABLE: @PREFIX@pv3: 
| [ 0:00] ## DMITABLE: @PREFIX@pv2: 
| [ 0:00] ## DMITABLE: @PREFIX@pv1: 
| [ 0:00] <======== Status ========>
| [ 0:00] ## DMSTATUS: @PREFIX@pv3: 0 69632 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv2: 0 69632 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv1: 0 69632 linear 
| [ 0:00] <======== Tree ========>
| [ 0:00] ## DMTREE:   @PREFIX@pv3 (253:4)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   @PREFIX@pv2 (253:3)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   @PREFIX@pv1 (253:5)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   LFS_vg-lfs (253:2)
| [ 0:00] ## DMTREE:    `- (8:16)
| [ 0:00] ## DMTREE:   centos-swap (253:1)
| [ 0:00] ## DMTREE:    `- (8:2)
| [ 0:00] ## DMTREE:   centos-root (253:0)
| [ 0:00] ## DMTREE:    `- (8:2)
| [ 0:00] <======== Recursive list of @TESTDIR@/dev ========>
| [ 0:00] ## LSLR:	@TESTDIR@/dev:
| [ 0:00] ## LSLR:	total 4
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 0 Feb 21 02:26 loop0
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 1 Feb 21 02:26 loop1
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 2 Feb 21 02:26 loop2
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 3 Feb 21 02:26 loop3
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 4 Feb 21 02:26 loop4
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 5 Feb 21 02:26 loop5
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 6 Feb 21 02:26 loop6
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 7 Feb 21 02:26 loop7
| [ 0:00] ## LSLR:	drwxr-xr-x 2 root root 4096 Feb 21 02:26 mapper
| [ 0:00] ## LSLR:	crw-r--r-- 1 root root 1, 3 Feb 21 02:26 testnull
| [ 0:00] ## LSLR:	
| [ 0:00] ## LSLR:	@TESTDIR@/dev/mapper:
| [ 0:00] ## LSLR:	total 0
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   5 Feb 21 02:26 @PREFIX@pv1
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   3 Feb 21 02:26 @PREFIX@pv2
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   4 Feb 21 02:26 @PREFIX@pv3
| [ 0:00] ## LSLR:	crw------- 1 root root  10, 236 Feb 21 02:26 control
| [ 0:00] <======== Udev DB content ========>
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-0
| [ 0:00] ## UDEV:	N: dm-0
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-0
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-0
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=0
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-1
| [ 0:00] ## UDEV:	N: dm-1
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-1
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-1
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=1
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-2
| [ 0:00] ## UDEV:	N: dm-2
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-2
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-2
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=2
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-3
| [ 0:00] ## UDEV:	N: dm-3
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-3
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-3
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=3
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-4
| [ 0:00] ## UDEV:	N: dm-4
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-4
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-4
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=4
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-5
| [ 0:00] ## UDEV:	N: dm-5
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-5
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-5
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=5
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/loop0
| [ 0:00] ## UDEV:	N: loop0
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/loop0
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/loop0
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=7
| [ 0:00] ## UDEV:	E: MINOR=0
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] <======== Script file "lvconvert-snapshot-mirror.sh" ========>
| [ 0:00] ## Line: 1 	 #!/usr/bin/env bash
| [ 0:00] ## Line: 2 	 
| [ 0:00] ## Line: 3 	 # Copyright (C) 2017 Red Hat, Inc. All rights reserved.
| [ 0:00] ## Line: 4 	 #
| [ 0:00] ## Line: 5 	 # This copyrighted material is made available to anyone wishing to use,
| [ 0:00] ## Line: 6 	 # modify, copy, or redistribute it subject to the terms and conditions
| [ 0:00] ## Line: 7 	 # of the GNU General Public License v.2.
| [ 0:00] ## Line: 8 	 #
| [ 0:00] ## Line: 9 	 # You should have received a copy of the GNU General Public License
| [ 0:00] ## Line: 10 	 # along with this program; if not, write to the Free Software Foundation,
| [ 0:00] ## Line: 11 	 # Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA
| [ 0:00] ## Line: 12 	 
| [ 0:00] ## Line: 13 	 # Test various supported conversion of snapshot with mirrors
| [ 0:00] ## Line: 14 	 
| [ 0:00] ## Line: 15 	 SKIP_WITH_LVMLOCKD=1
| [ 0:00] ## Line: 16 	 SKIP_WITH_LVMPOLLD=1
| [ 0:00] ## Line: 17 	 
| [ 0:00] ## Line: 18 	 . lib/inittest
| [ 0:00] ## Line: 19 	 
| [ 0:00] ## Line: 20 	 aux prepare_vg 3
| [ 0:00] ## Line: 21 	 
| [ 0:00] ## Line: 22 	 vgchange -s 16k $vg
| [ 0:00] ## Line: 23 	 
| [ 0:00] ## Line: 24 	 lvcreate -L1 -n cow $vg
| [ 0:00] ## Line: 25 	 
| [ 0:00] ## Line: 26 	 # Mirror and snapshot conversion
| [ 0:00] ## Line: 27 	 lvcreate -aye --type mirror -L1 -m1 -n mir $vg
| [ 0:00] ## Line: 28 	 
| [ 0:00] ## Line: 29 	 # Cannot create snapshot of mirror leg
| [ 0:00] ## Line: 30 	 not lvcreate -s -L1 $vg/mir_mimage_0 2>&1 | tee err
| [ 0:00] ## Line: 31 	 grep "not supported" err
| [ 0:00] ## Line: 32 	 
| [ 0:00] ## Line: 33 	 # cannot use 'mirror' as COW
| [ 0:00] ## Line: 34 	 not lvconvert --yes --type snapshot $vg/cow $vg/mir 2>&1 | tee err
| [ 0:00] ## Line: 35 	 grep "not accept" err
| [ 0:00] ## Line: 36 	 
| [ 0:00] ## Line: 37 	 not lvconvert --yes --type snapshot $vg/cow $vg/mir_mimage_0 2>&1 | tee err
| [ 0:00] ## Line: 38 	 grep "lv_is_visible" err
| [ 0:00] ## Line: 39 	 
| [ 0:00] ## Line: 40 	 not lvconvert --yes --type snapshot $vg/cow $vg/mir_mlog 2>&1 | tee err
| [ 0:00] ## Line: 41 	 grep "lv_is_visible" err
| [ 0:00] ## Line: 42 	 
| [ 0:00] ## Line: 43 	 # cannot use _mimage
| [ 0:00] ## Line: 44 	 not lvconvert --yes --type snapshot $vg/mir_mimage_0 $vg/cow 2>&1 | tee err
| [ 0:00] ## Line: 45 	 grep "not supported" err
| [ 0:00] ## Line: 46 	 
| [ 0:00] ## Line: 47 	 # cannot use _mlog
| [ 0:00] ## Line: 48 	 not lvconvert --yes --type snapshot $vg/mir_mlog $vg/cow 2>&1 | tee err
| [ 0:00] ## Line: 49 	 grep "not supported" err
| [ 0:00] ## Line: 50 	 
| [ 0:00] ## Line: 51 	 lvconvert --yes -s $vg/mir $vg/cow
| [ 0:00] ## Line: 52 	 
| [ 0:00] ## Line: 53 	 check lv_field $vg/mir segtype mirror
| [ 0:00] ## Line: 54 	 check lv_field $vg/cow segtype linear
| [ 0:00] ## Line: 55 	 check lv_attr_bit type $vg/cow "s"
| [ 0:00] ## Line: 56 	 check lv_attr_bit type $vg/mir "o"
| [ 0:00] ## Line: 57 	 
| [ 0:00] ## Line: 58 	 lvs -a -o+lv_role,lv_layout $vg
| [ 0:00] ## Line: 59 	 
| [ 0:00] ## Line: 60 	 vgremove -f $vg
| [ 0:00] aux teardown
| [ 0:00] #lvconvert-snapshot-mirror.sh:1+ aux teardown
| [ 0:00] ## teardown.........ok
###       failed: [ndev-vanilla] shell/lvconvert-snapshot-mirror.sh
###      skipped: [ndev-vanilla] shell/lvconvert-snapshot-raid.sh
###      skipped: [ndev-vanilla] shell/lvconvert-snapshot-thin.sh

| [ 0:00] Library version:   1.02.146 (2017-12-18)
| [ 0:00] Driver version:    4.35.0
| [ 0:00] Kernel is Linux localhost.localdomain 3.10.0-693.11.1.el7.x86_64 #1 SMP Mon Dec 4 23:52:40 UTC 2017 x86_64 GNU/Linux
| [ 0:00] Selinux mode is not installed.
| [ 0:00]               total        used        free      shared  buff/cache   available
| [ 0:00] Mem:           7822        1076        4151          10        2594        6439
| [ 0:00] Swap:          4095           0        4095
| [ 0:00] Filesystem      Size  Used Avail Use% Mounted on
| [ 0:00] /dev/sdc1        18G  8.4G  8.4G  50% /
| [ 0:00] /dev/sdd1        51G  6.1G   43G  13% /lfskernel
| [ 0:00] devtmpfs        3.9G     0  3.9G   0% /dev
| [ 0:00] tmpfs           3.9G     0  3.9G   0% /run
| [ 0:00] @TESTDIR=/tmp/LVMTEST2807.Thsu9wKRTT
| [ 0:00] @PREFIX=LVMTEST2807
| [ 0:00] ## LVMCONF: activation {
| [ 0:00] ## LVMCONF:     checks = 1
| [ 0:00] ## LVMCONF:     monitoring = 0
| [ 0:00] ## LVMCONF:     polling_interval = 1
| [ 0:00] ## LVMCONF:     raid_region_size = 512
| [ 0:00] ## LVMCONF:     retry_deactivation = 1
| [ 0:00] ## LVMCONF:     snapshot_autoextend_percent = 50
| [ 0:00] ## LVMCONF:     snapshot_autoextend_threshold = 50
| [ 0:00] ## LVMCONF:     udev_rules = 1
| [ 0:00] ## LVMCONF:     udev_sync = 1
| [ 0:00] ## LVMCONF:     verify_udev_operations = 1
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: allocation {
| [ 0:00] ## LVMCONF:     wipe_signatures_when_zeroing_new_lvs = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: backup {
| [ 0:00] ## LVMCONF:     archive = 0
| [ 0:00] ## LVMCONF:     backup = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: devices {
| [ 0:00] ## LVMCONF:     cache_dir = "@TESTDIR@/etc"
| [ 0:00] ## LVMCONF:     default_data_alignment = 1
| [ 0:00] ## LVMCONF:     dir = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     filter = "a|.*|"
| [ 0:00] ## LVMCONF:     global_filter = [ "a|@TESTDIR@/dev/mapper/@PREFIX@.*pv[0-9_]*$|", "r|.*|" ]
| [ 0:00] ## LVMCONF:     md_component_detection  = 0
| [ 0:00] ## LVMCONF:     scan = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     sysfs_scan = 1
| [ 0:00] ## LVMCONF:     write_cache_state = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: dmeventd {
| [ 0:00] ## LVMCONF:     executable = "/sources/boot/LVM2.2.02.177/test/lib/dmeventd"
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: global {
| [ 0:00] ## LVMCONF:     abort_on_internal_errors = 1
| [ 0:00] ## LVMCONF:     cache_check_executable = "/usr/sbin/cache_check"
| [ 0:00] ## LVMCONF:     cache_dump_executable = "/usr/sbin/cache_dump"
| [ 0:00] ## LVMCONF:     cache_repair_executable = "/usr/sbin/cache_repair"
| [ 0:00] ## LVMCONF:     detect_internal_vg_cache_corruption = 1
| [ 0:00] ## LVMCONF:     fallback_to_local_locking = 0
| [ 0:00] ## LVMCONF:     fsadm_executable = "/sources/boot/LVM2.2.02.177/test/lib/fsadm"
| [ 0:00] ## LVMCONF:     library_dir = "@TESTDIR@/lib"
| [ 0:00] ## LVMCONF:     locking_dir = "@TESTDIR@/var/lock/lvm"
| [ 0:00] ## LVMCONF:     locking_type=1
| [ 0:00] ## LVMCONF:     notify_dbus = 0
| [ 0:00] ## LVMCONF:     si_unit_consistency = 1
| [ 0:00] ## LVMCONF:     thin_check_executable = "/usr/sbin/thin_check"
| [ 0:00] ## LVMCONF:     thin_dump_executable = "/usr/sbin/thin_dump"
| [ 0:00] ## LVMCONF:     thin_repair_executable = "/usr/sbin/thin_repair"
| [ 0:00] ## LVMCONF:     use_lvmetad = 0
| [ 0:00] ## LVMCONF:     use_lvmlockd = 0
| [ 0:00] ## LVMCONF:     use_lvmpolld = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: log {
| [ 0:00] ## LVMCONF:     activation = 1
| [ 0:00] ## LVMCONF:     file = "@TESTDIR@/debug.log"
| [ 0:00] ## LVMCONF:     indent = 1
| [ 0:00] ## LVMCONF:     level = 9
| [ 0:00] ## LVMCONF:     overwrite = 1
| [ 0:00] ## LVMCONF:     syslog = 0
| [ 0:00] ## LVMCONF:     verbose = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] <======== Processing test: "lvconvert-snapshot.sh" ========>
| [ 0:00] 
| [ 0:00] aux prepare_pvs 1
| [ 0:00] #lvconvert-snapshot.sh:20+ aux prepare_pvs 1
| [ 0:00] ## preparing loop device....ok (/dev/loop0)
| [ 0:00] ## preparing 1 devices...lib/utils: line 212: DM_UDEV_COOKIE: unbound variable
| [ 0:00] set +vx; STACKTRACE; set -vx
| [ 0:00] ##lvconvert-snapshot.sh:20+ set +vx
| [ 0:00] ## - /lfskernel/sources/boot/LVM2.2.02.177/test/shell/lvconvert-snapshot.sh:20
| [ 0:00] ## 1 STACKTRACE() called from /lfskernel/sources/boot/LVM2.2.02.177/test/shell/lvconvert-snapshot.sh:20
| [ 0:00] <======== Info ========>
| [ 0:00] ## DMINFO:   Name             Maj Min Stat Open Targ Event  UUID                                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv1   253   3 L--w    0    1      0 TEST-@PREFIX@pv1                                                 
| [ 0:00] <======== Active table ========>
| [ 0:00] ## DMTABLE:  @PREFIX@pv1: 0 69632 linear 7:0 2048
| [ 0:00] <======== Inactive table ========>
| [ 0:00] ## DMITABLE: @PREFIX@pv1: 
| [ 0:00] <======== Status ========>
| [ 0:00] ## DMSTATUS: @PREFIX@pv1: 0 69632 linear 
| [ 0:00] <======== Tree ========>
| [ 0:00] ## DMTREE:   @PREFIX@pv1 (253:3)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   LFS_vg-lfs (253:2)
| [ 0:00] ## DMTREE:    `- (8:16)
| [ 0:00] ## DMTREE:   centos-swap (253:1)
| [ 0:00] ## DMTREE:    `- (8:2)
| [ 0:00] ## DMTREE:   centos-root (253:0)
| [ 0:00] ## DMTREE:    `- (8:2)
| [ 0:00] <======== Recursive list of @TESTDIR@/dev ========>
| [ 0:01] ## LSLR:	@TESTDIR@/dev:
| [ 0:01] ## LSLR:	total 4
| [ 0:01] ## LSLR:	brw-r--r-- 1 root root 7, 0 Feb 21 02:26 loop0
| [ 0:01] ## LSLR:	brw-r--r-- 1 root root 7, 1 Feb 21 02:26 loop1
| [ 0:01] ## LSLR:	brw-r--r-- 1 root root 7, 2 Feb 21 02:26 loop2
| [ 0:01] ## LSLR:	brw-r--r-- 1 root root 7, 3 Feb 21 02:26 loop3
| [ 0:01] ## LSLR:	brw-r--r-- 1 root root 7, 4 Feb 21 02:26 loop4
| [ 0:01] ## LSLR:	brw-r--r-- 1 root root 7, 5 Feb 21 02:26 loop5
| [ 0:01] ## LSLR:	brw-r--r-- 1 root root 7, 6 Feb 21 02:26 loop6
| [ 0:01] ## LSLR:	brw-r--r-- 1 root root 7, 7 Feb 21 02:26 loop7
| [ 0:01] ## LSLR:	drwxr-xr-x 2 root root 4096 Feb 21 02:26 mapper
| [ 0:01] ## LSLR:	crw-r--r-- 1 root root 1, 3 Feb 21 02:26 testnull
| [ 0:01] ## LSLR:	
| [ 0:01] ## LSLR:	@TESTDIR@/dev/mapper:
| [ 0:01] ## LSLR:	total 0
| [ 0:01] ## LSLR:	brw------- 1 root root 253,   3 Feb 21 02:26 @PREFIX@pv1
| [ 0:01] ## LSLR:	crw------- 1 root root  10, 236 Feb 21 02:26 control
| [ 0:01] <======== Udev DB content ========>
| [ 0:01] ## UDEV:	P: /devices/virtual/block/dm-0
| [ 0:01] ## UDEV:	N: dm-0
| [ 0:01] ## UDEV:	E: DEVNAME=/dev/dm-0
| [ 0:01] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-0
| [ 0:01] ## UDEV:	E: DEVTYPE=disk
| [ 0:01] ## UDEV:	E: MAJOR=253
| [ 0:01] ## UDEV:	E: MINOR=0
| [ 0:01] ## UDEV:	E: SUBSYSTEM=block
| [ 0:01] ## UDEV:	
| [ 0:01] ## UDEV:	P: /devices/virtual/block/dm-1
| [ 0:01] ## UDEV:	N: dm-1
| [ 0:01] ## UDEV:	E: DEVNAME=/dev/dm-1
| [ 0:01] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-1
| [ 0:01] ## UDEV:	E: DEVTYPE=disk
| [ 0:01] ## UDEV:	E: MAJOR=253
| [ 0:01] ## UDEV:	E: MINOR=1
| [ 0:01] ## UDEV:	E: SUBSYSTEM=block
| [ 0:01] ## UDEV:	
| [ 0:01] ## UDEV:	P: /devices/virtual/block/dm-2
| [ 0:01] ## UDEV:	N: dm-2
| [ 0:01] ## UDEV:	E: DEVNAME=/dev/dm-2
| [ 0:01] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-2
| [ 0:01] ## UDEV:	E: DEVTYPE=disk
| [ 0:01] ## UDEV:	E: MAJOR=253
| [ 0:01] ## UDEV:	E: MINOR=2
| [ 0:01] ## UDEV:	E: SUBSYSTEM=block
| [ 0:01] ## UDEV:	
| [ 0:01] ## UDEV:	P: /devices/virtual/block/dm-3
| [ 0:01] ## UDEV:	N: dm-3
| [ 0:01] ## UDEV:	E: DEVNAME=/dev/dm-3
| [ 0:01] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-3
| [ 0:01] ## UDEV:	E: DEVTYPE=disk
| [ 0:01] ## UDEV:	E: MAJOR=253
| [ 0:01] ## UDEV:	E: MINOR=3
| [ 0:01] ## UDEV:	E: SUBSYSTEM=block
| [ 0:01] ## UDEV:	
| [ 0:01] ## UDEV:	P: /devices/virtual/block/loop0
| [ 0:01] ## UDEV:	N: loop0
| [ 0:01] ## UDEV:	E: DEVNAME=/dev/loop0
| [ 0:01] ## UDEV:	E: DEVPATH=/devices/virtual/block/loop0
| [ 0:01] ## UDEV:	E: DEVTYPE=disk
| [ 0:01] ## UDEV:	E: MAJOR=7
| [ 0:01] ## UDEV:	E: MINOR=0
| [ 0:01] ## UDEV:	E: SUBSYSTEM=block
| [ 0:01] ## UDEV:	
| [ 0:01] <======== Script file "lvconvert-snapshot.sh" ========>
| [ 0:01] ## Line: 1 	 #!/usr/bin/env bash
| [ 0:01] ## Line: 2 	 
| [ 0:01] ## Line: 3 	 # Copyright (C) 2014 Red Hat, Inc. All rights reserved.
| [ 0:01] ## Line: 4 	 #
| [ 0:01] ## Line: 5 	 # This copyrighted material is made available to anyone wishing to use,
| [ 0:01] ## Line: 6 	 # modify, copy, or redistribute it subject to the terms and conditions
| [ 0:01] ## Line: 7 	 # of the GNU General Public License v.2.
| [ 0:01] ## Line: 8 	 #
| [ 0:01] ## Line: 9 	 # You should have received a copy of the GNU General Public License
| [ 0:01] ## Line: 10 	 # along with this program; if not, write to the Free Software Foundation,
| [ 0:01] ## Line: 11 	 # Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA
| [ 0:01] ## Line: 12 	 
| [ 0:01] ## Line: 13 	 # Test various supported conversion of snapshot
| [ 0:01] ## Line: 14 	 
| [ 0:01] ## Line: 15 	 SKIP_WITH_LVMLOCKD=1
| [ 0:01] ## Line: 16 	 SKIP_WITH_LVMPOLLD=1
| [ 0:01] ## Line: 17 	 
| [ 0:01] ## Line: 18 	 . lib/inittest
| [ 0:01] ## Line: 19 	 
| [ 0:01] ## Line: 20 	 aux prepare_pvs 1
| [ 0:01] ## Line: 21 	 get_devs
| [ 0:01] ## Line: 22 	 
| [ 0:01] ## Line: 23 	 vgcreate -s 1k "$vg" "${DEVICES[@]}"
| [ 0:01] ## Line: 24 	 
| [ 0:01] ## Line: 25 	 lvcreate --type snapshot -V50 -L1 -n $lv1 -s $vg
| [ 0:01] ## Line: 26 	 
| [ 0:01] ## Line: 27 	 lvcreate -aey -L1 -n $lv2 $vg
| [ 0:01] ## Line: 28 	 lvcreate -L1 -s -n $lv3 $vg/$lv2
| [ 0:01] ## Line: 29 	 
| [ 0:01] ## Line: 30 	 lvcreate -l1 -n $lv4 $vg
| [ 0:01] ## Line: 31 	 lvcreate -L1 -n $lv5 $vg
| [ 0:01] ## Line: 32 	 lvcreate -L1 -n $lv6 $vg
| [ 0:01] ## Line: 33 	 
| [ 0:01] ## Line: 34 	 not lvconvert -s $vg/$lv1 $vg/not_exist
| [ 0:01] ## Line: 35 	 
| [ 0:01] ## Line: 36 	 # Can't convert to snapshot of origin
| [ 0:01] ## Line: 37 	 not lvconvert -s $vg/$lv1 $vg/$lv2
| [ 0:01] ## Line: 38 	 not lvconvert -s $vg/$lv2 $vg/$lv1
| [ 0:01] ## Line: 39 	 not lvconvert -s $vg/$lv5 $vg/$lv1
| [ 0:01] ## Line: 40 	 
| [ 0:01] ## Line: 41 	 not lvconvert -s $vg/$lv5 $vg/$lv2
| [ 0:01] ## Line: 42 	 not lvconvert -s $vg/$lv5 $vg/$lv3
| [ 0:01] ## Line: 43 	 
| [ 0:01] ## Line: 44 	 # Can't be itself
| [ 0:01] ## Line: 45 	 not lvconvert -s $vg/$lv1 $vg/$lv1
| [ 0:01] ## Line: 46 	 not lvconvert -s $vg/$lv2 $vg/$lv2
| [ 0:01] ## Line: 47 	 
| [ 0:01] ## Line: 48 	 # Can't convert snapshot to snapshot
| [ 0:01] ## Line: 49 	 not lvconvert -s $vg/$lv1 $vg/$lv3
| [ 0:01] ## Line: 50 	 not lvconvert -s $vg/$lv2 $vg/$lv3
| [ 0:01] ## Line: 51 	 
| [ 0:01] ## Line: 52 	 # Can't make a real LV snapshot of virtual 'zero' snapshot
| [ 0:01] ## Line: 53 	 not lvconvert -s $vg/$lv1 $vg/$lv4
| [ 0:01] ## Line: 54 	 
| [ 0:01] ## Line: 55 	 # Check minimum size
| [ 0:01] ## Line: 56 	 not lvconvert -s $vg/$lv2 $vg/$lv4 2>&1 | tee err
| [ 0:01] ## Line: 57 	 grep "smaller" err
| [ 0:01] ## Line: 58 	 
| [ 0:01] ## Line: 59 	 # This should pass
| [ 0:01] ## Line: 60 	 lvconvert --yes -s $vg/$lv2 $vg/$lv5
| [ 0:01] ## Line: 61 	 lvconvert --yes --type snapshot $vg/$lv2 $vg/$lv6
| [ 0:01] ## Line: 62 	 
| [ 0:01] ## Line: 63 	 vgremove -f $vg
| [ 0:01] aux teardown
| [ 0:01] #lvconvert-snapshot.sh:1+ aux teardown
| [ 0:01] ## teardown.........ok
###       failed: [ndev-vanilla] shell/lvconvert-snapshot.sh
###      skipped: [ndev-vanilla] shell/lvconvert-thin-external-cache.sh
###      skipped: [ndev-vanilla] shell/lvconvert-thin-external.sh
###      skipped: [ndev-vanilla] shell/lvconvert-thin-raid.sh
###      skipped: [ndev-vanilla] shell/lvconvert-thin.sh

| [ 0:00] Library version:   1.02.146 (2017-12-18)
| [ 0:00] Driver version:    4.35.0
| [ 0:00] Kernel is Linux localhost.localdomain 3.10.0-693.11.1.el7.x86_64 #1 SMP Mon Dec 4 23:52:40 UTC 2017 x86_64 GNU/Linux
| [ 0:00] Selinux mode is not installed.
| [ 0:00]               total        used        free      shared  buff/cache   available
| [ 0:00] Mem:           7822        1076        4151          10        2595        6439
| [ 0:00] Swap:          4095           0        4095
| [ 0:00] Filesystem      Size  Used Avail Use% Mounted on
| [ 0:00] /dev/sdc1        18G  8.4G  8.4G  50% /
| [ 0:00] /dev/sdd1        51G  6.1G   43G  13% /lfskernel
| [ 0:00] devtmpfs        3.9G     0  3.9G   0% /dev
| [ 0:00] tmpfs           3.9G     0  3.9G   0% /run
| [ 0:00] @TESTDIR=/tmp/LVMTEST3257.4WeFbYBrvC
| [ 0:00] @PREFIX=LVMTEST3257
| [ 0:00] ## LVMCONF: activation {
| [ 0:00] ## LVMCONF:     checks = 1
| [ 0:00] ## LVMCONF:     monitoring = 0
| [ 0:00] ## LVMCONF:     polling_interval = 1
| [ 0:00] ## LVMCONF:     raid_region_size = 512
| [ 0:00] ## LVMCONF:     retry_deactivation = 1
| [ 0:00] ## LVMCONF:     snapshot_autoextend_percent = 50
| [ 0:00] ## LVMCONF:     snapshot_autoextend_threshold = 50
| [ 0:00] ## LVMCONF:     udev_rules = 1
| [ 0:00] ## LVMCONF:     udev_sync = 1
| [ 0:00] ## LVMCONF:     verify_udev_operations = 1
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: allocation {
| [ 0:00] ## LVMCONF:     wipe_signatures_when_zeroing_new_lvs = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: backup {
| [ 0:00] ## LVMCONF:     archive = 0
| [ 0:00] ## LVMCONF:     backup = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: devices {
| [ 0:00] ## LVMCONF:     cache_dir = "@TESTDIR@/etc"
| [ 0:00] ## LVMCONF:     default_data_alignment = 1
| [ 0:00] ## LVMCONF:     dir = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     filter = "a|.*|"
| [ 0:00] ## LVMCONF:     global_filter = [ "a|@TESTDIR@/dev/mapper/@PREFIX@.*pv[0-9_]*$|", "r|.*|" ]
| [ 0:00] ## LVMCONF:     md_component_detection  = 0
| [ 0:00] ## LVMCONF:     scan = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     sysfs_scan = 1
| [ 0:00] ## LVMCONF:     write_cache_state = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: dmeventd {
| [ 0:00] ## LVMCONF:     executable = "/sources/boot/LVM2.2.02.177/test/lib/dmeventd"
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: global {
| [ 0:00] ## LVMCONF:     abort_on_internal_errors = 1
| [ 0:00] ## LVMCONF:     cache_check_executable = "/usr/sbin/cache_check"
| [ 0:00] ## LVMCONF:     cache_dump_executable = "/usr/sbin/cache_dump"
| [ 0:00] ## LVMCONF:     cache_repair_executable = "/usr/sbin/cache_repair"
| [ 0:00] ## LVMCONF:     detect_internal_vg_cache_corruption = 1
| [ 0:00] ## LVMCONF:     fallback_to_local_locking = 0
| [ 0:00] ## LVMCONF:     fsadm_executable = "/sources/boot/LVM2.2.02.177/test/lib/fsadm"
| [ 0:00] ## LVMCONF:     library_dir = "@TESTDIR@/lib"
| [ 0:00] ## LVMCONF:     locking_dir = "@TESTDIR@/var/lock/lvm"
| [ 0:00] ## LVMCONF:     locking_type=1
| [ 0:00] ## LVMCONF:     notify_dbus = 0
| [ 0:00] ## LVMCONF:     si_unit_consistency = 1
| [ 0:00] ## LVMCONF:     thin_check_executable = "/usr/sbin/thin_check"
| [ 0:00] ## LVMCONF:     thin_dump_executable = "/usr/sbin/thin_dump"
| [ 0:00] ## LVMCONF:     thin_repair_executable = "/usr/sbin/thin_repair"
| [ 0:00] ## LVMCONF:     use_lvmetad = 0
| [ 0:00] ## LVMCONF:     use_lvmlockd = 0
| [ 0:00] ## LVMCONF:     use_lvmpolld = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: log {
| [ 0:00] ## LVMCONF:     activation = 1
| [ 0:00] ## LVMCONF:     file = "@TESTDIR@/debug.log"
| [ 0:00] ## LVMCONF:     indent = 1
| [ 0:00] ## LVMCONF:     level = 9
| [ 0:00] ## LVMCONF:     overwrite = 1
| [ 0:00] ## LVMCONF:     syslog = 0
| [ 0:00] ## LVMCONF:     verbose = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] <======== Processing test: "lvconvert-twostep.sh" ========>
| [ 0:00] 
| [ 0:00] aux prepare_vg 4
| [ 0:00] #lvconvert-twostep.sh:17+ aux prepare_vg 4
| [ 0:00] ## preparing loop device....ok (/dev/loop0)
| [ 0:00] ## preparing 4 devices...lib/utils: line 212: DM_UDEV_COOKIE: unbound variable
| [ 0:00] set +vx; STACKTRACE; set -vx
| [ 0:00] ##lvconvert-twostep.sh:17+ set +vx
| [ 0:00] ## - /lfskernel/sources/boot/LVM2.2.02.177/test/shell/lvconvert-twostep.sh:17
| [ 0:00] ## 1 STACKTRACE() called from /lfskernel/sources/boot/LVM2.2.02.177/test/shell/lvconvert-twostep.sh:17
| [ 0:00] <======== Info ========>
| [ 0:00] ## DMINFO:   Name             Maj Min Stat Open Targ Event  UUID                                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv4   253   4 L--w    0    1      0 TEST-@PREFIX@pv4                                                 
| [ 0:00] ## DMINFO:   @PREFIX@pv3   253   3 L--w    0    1      0 TEST-@PREFIX@pv3                                                 
| [ 0:00] ## DMINFO:   @PREFIX@pv2   253   6 L--w    0    1      0 TEST-@PREFIX@pv2                                                 
| [ 0:00] ## DMINFO:   @PREFIX@pv1   253   5 L--w    0    1      0 TEST-@PREFIX@pv1                                                 
| [ 0:00] <======== Active table ========>
| [ 0:00] ## DMTABLE:  @PREFIX@pv4: 0 69632 linear 7:0 210944
| [ 0:00] ## DMTABLE:  @PREFIX@pv3: 0 69632 linear 7:0 141312
| [ 0:00] ## DMTABLE:  @PREFIX@pv2: 0 69632 linear 7:0 71680
| [ 0:00] ## DMTABLE:  @PREFIX@pv1: 0 69632 linear 7:0 2048
| [ 0:00] <======== Inactive table ========>
| [ 0:00] ## DMITABLE: @PREFIX@pv4: 
| [ 0:00] ## DMITABLE: @PREFIX@pv3: 
| [ 0:00] ## DMITABLE: @PREFIX@pv2: 
| [ 0:00] ## DMITABLE: @PREFIX@pv1: 
| [ 0:00] <======== Status ========>
| [ 0:00] ## DMSTATUS: @PREFIX@pv4: 0 69632 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv3: 0 69632 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv2: 0 69632 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv1: 0 69632 linear 
| [ 0:00] <======== Tree ========>
| [ 0:00] ## DMTREE:   @PREFIX@pv4 (253:4)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   @PREFIX@pv3 (253:3)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   @PREFIX@pv2 (253:6)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   @PREFIX@pv1 (253:5)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   LFS_vg-lfs (253:2)
| [ 0:00] ## DMTREE:    `- (8:16)
| [ 0:00] ## DMTREE:   centos-swap (253:1)
| [ 0:00] ## DMTREE:    `- (8:2)
| [ 0:00] ## DMTREE:   centos-root (253:0)
| [ 0:00] ## DMTREE:    `- (8:2)
| [ 0:00] <======== Recursive list of @TESTDIR@/dev ========>
| [ 0:00] ## LSLR:	@TESTDIR@/dev:
| [ 0:00] ## LSLR:	total 4
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 0 Feb 21 02:26 loop0
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 1 Feb 21 02:26 loop1
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 2 Feb 21 02:26 loop2
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 3 Feb 21 02:26 loop3
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 4 Feb 21 02:26 loop4
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 5 Feb 21 02:26 loop5
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 6 Feb 21 02:26 loop6
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 7 Feb 21 02:26 loop7
| [ 0:00] ## LSLR:	drwxr-xr-x 2 root root 4096 Feb 21 02:26 mapper
| [ 0:00] ## LSLR:	crw-r--r-- 1 root root 1, 3 Feb 21 02:26 testnull
| [ 0:00] ## LSLR:	
| [ 0:00] ## LSLR:	@TESTDIR@/dev/mapper:
| [ 0:00] ## LSLR:	total 0
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   5 Feb 21 02:26 @PREFIX@pv1
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   6 Feb 21 02:26 @PREFIX@pv2
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   3 Feb 21 02:26 @PREFIX@pv3
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   4 Feb 21 02:26 @PREFIX@pv4
| [ 0:00] ## LSLR:	crw------- 1 root root  10, 236 Feb 21 02:26 control
| [ 0:00] <======== Udev DB content ========>
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-0
| [ 0:01] ## UDEV:	N: dm-0
| [ 0:01] ## UDEV:	E: DEVNAME=/dev/dm-0
| [ 0:01] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-0
| [ 0:01] ## UDEV:	E: DEVTYPE=disk
| [ 0:01] ## UDEV:	E: MAJOR=253
| [ 0:01] ## UDEV:	E: MINOR=0
| [ 0:01] ## UDEV:	E: SUBSYSTEM=block
| [ 0:01] ## UDEV:	
| [ 0:01] ## UDEV:	P: /devices/virtual/block/dm-1
| [ 0:01] ## UDEV:	N: dm-1
| [ 0:01] ## UDEV:	E: DEVNAME=/dev/dm-1
| [ 0:01] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-1
| [ 0:01] ## UDEV:	E: DEVTYPE=disk
| [ 0:01] ## UDEV:	E: MAJOR=253
| [ 0:01] ## UDEV:	E: MINOR=1
| [ 0:01] ## UDEV:	E: SUBSYSTEM=block
| [ 0:01] ## UDEV:	
| [ 0:01] ## UDEV:	P: /devices/virtual/block/dm-2
| [ 0:01] ## UDEV:	N: dm-2
| [ 0:01] ## UDEV:	E: DEVNAME=/dev/dm-2
| [ 0:01] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-2
| [ 0:01] ## UDEV:	E: DEVTYPE=disk
| [ 0:01] ## UDEV:	E: MAJOR=253
| [ 0:01] ## UDEV:	E: MINOR=2
| [ 0:01] ## UDEV:	E: SUBSYSTEM=block
| [ 0:01] ## UDEV:	
| [ 0:01] ## UDEV:	P: /devices/virtual/block/dm-3
| [ 0:01] ## UDEV:	N: dm-3
| [ 0:01] ## UDEV:	E: DEVNAME=/dev/dm-3
| [ 0:01] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-3
| [ 0:01] ## UDEV:	E: DEVTYPE=disk
| [ 0:01] ## UDEV:	E: MAJOR=253
| [ 0:01] ## UDEV:	E: MINOR=3
| [ 0:01] ## UDEV:	E: SUBSYSTEM=block
| [ 0:01] ## UDEV:	
| [ 0:01] ## UDEV:	P: /devices/virtual/block/dm-4
| [ 0:01] ## UDEV:	N: dm-4
| [ 0:01] ## UDEV:	E: DEVNAME=/dev/dm-4
| [ 0:01] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-4
| [ 0:01] ## UDEV:	E: DEVTYPE=disk
| [ 0:01] ## UDEV:	E: MAJOR=253
| [ 0:01] ## UDEV:	E: MINOR=4
| [ 0:01] ## UDEV:	E: SUBSYSTEM=block
| [ 0:01] ## UDEV:	
| [ 0:01] ## UDEV:	P: /devices/virtual/block/dm-5
| [ 0:01] ## UDEV:	N: dm-5
| [ 0:01] ## UDEV:	E: DEVNAME=/dev/dm-5
| [ 0:01] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-5
| [ 0:01] ## UDEV:	E: DEVTYPE=disk
| [ 0:01] ## UDEV:	E: MAJOR=253
| [ 0:01] ## UDEV:	E: MINOR=5
| [ 0:01] ## UDEV:	E: SUBSYSTEM=block
| [ 0:01] ## UDEV:	
| [ 0:01] ## UDEV:	P: /devices/virtual/block/dm-6
| [ 0:01] ## UDEV:	N: dm-6
| [ 0:01] ## UDEV:	E: DEVNAME=/dev/dm-6
| [ 0:01] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-6
| [ 0:01] ## UDEV:	E: DEVTYPE=disk
| [ 0:01] ## UDEV:	E: MAJOR=253
| [ 0:01] ## UDEV:	E: MINOR=6
| [ 0:01] ## UDEV:	E: SUBSYSTEM=block
| [ 0:01] ## UDEV:	
| [ 0:01] ## UDEV:	P: /devices/virtual/block/loop0
| [ 0:01] ## UDEV:	N: loop0
| [ 0:01] ## UDEV:	E: DEVNAME=/dev/loop0
| [ 0:01] ## UDEV:	E: DEVPATH=/devices/virtual/block/loop0
| [ 0:01] ## UDEV:	E: DEVTYPE=disk
| [ 0:01] ## UDEV:	E: MAJOR=7
| [ 0:01] ## UDEV:	E: MINOR=0
| [ 0:01] ## UDEV:	E: SUBSYSTEM=block
| [ 0:01] ## UDEV:	
| [ 0:01] <======== Script file "lvconvert-twostep.sh" ========>
| [ 0:01] ## Line: 1 	 #!/usr/bin/env bash
| [ 0:01] ## Line: 2 	 
| [ 0:01] ## Line: 3 	 # Copyright (C) 2010 Red Hat, Inc. All rights reserved.
| [ 0:01] ## Line: 4 	 #
| [ 0:01] ## Line: 5 	 # This copyrighted material is made available to anyone wishing to use,
| [ 0:01] ## Line: 6 	 # modify, copy, or redistribute it subject to the terms and conditions
| [ 0:01] ## Line: 7 	 # of the GNU General Public License v.2.
| [ 0:01] ## Line: 8 	 #
| [ 0:01] ## Line: 9 	 # You should have received a copy of the GNU General Public License
| [ 0:01] ## Line: 10 	 # along with this program; if not, write to the Free Software Foundation,
| [ 0:01] ## Line: 11 	 # Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA
| [ 0:01] ## Line: 12 	 
| [ 0:01] ## Line: 13 	 SKIP_WITH_LVMLOCKD=1
| [ 0:01] ## Line: 14 	 
| [ 0:01] ## Line: 15 	 . lib/inittest
| [ 0:01] ## Line: 16 	 
| [ 0:01] ## Line: 17 	 aux prepare_vg 4
| [ 0:01] ## Line: 18 	 
| [ 0:01] ## Line: 19 	 lvcreate -aey --type mirror -m 1 --mirrorlog disk --ignoremonitoring -L 1 -n mirror $vg
| [ 0:01] ## Line: 20 	 not lvconvert -m 2 --mirrorlog core $vg/mirror "$dev3" 2>&1 | tee errs
| [ 0:01] ## Line: 21 	 grep "two steps" errs
| [ 0:01] ## Line: 22 	 
| [ 0:01] ## Line: 23 	 lvconvert -m 2 $vg/mirror "$dev3"
| [ 0:01] ## Line: 24 	 lvconvert --mirrorlog core $vg/mirror
| [ 0:01] ## Line: 25 	 not lvconvert -m 1 --mirrorlog disk $vg/mirror "$dev3" 2>&1 | tee errs
| [ 0:01] ## Line: 26 	 grep "two steps" errs
| [ 0:01] ## Line: 27 	 
| [ 0:01] ## Line: 28 	 if test ! -e LOCAL_CLVMD ; then
| [ 0:01] ## Line: 29 	 # FIXME  mirrored unsupported in cluster
| [ 0:01] ## Line: 30 	 not lvconvert -m 1 --mirrorlog mirrored $vg/mirror "$dev3" "$dev4" 2>&1 | tee errs
| [ 0:01] ## Line: 31 	 grep "two steps" errs
| [ 0:01] ## Line: 32 	 fi
| [ 0:01] ## Line: 33 	 
| [ 0:01] ## Line: 34 	 vgremove -ff $vg
| [ 0:01] aux teardown
| [ 0:01] #lvconvert-twostep.sh:1+ aux teardown
| [ 0:01] ## teardown.........ok
###       failed: [ndev-vanilla] shell/lvconvert-twostep.sh
###      skipped: [ndev-vanilla] shell/lvcreate-cache-fail.sh
###      skipped: [ndev-vanilla] shell/lvcreate-cache-raid.sh
###      skipped: [ndev-vanilla] shell/lvcreate-cache-snapshot.sh
###      skipped: [ndev-vanilla] shell/lvcreate-cache.sh
###      skipped: [ndev-vanilla] shell/lvcreate-external-dmeventd.sh
###      skipped: [ndev-vanilla] shell/lvcreate-large-raid.sh
###      skipped: [ndev-vanilla] shell/lvcreate-large-raid10.sh

| [ 0:00] Library version:   1.02.146 (2017-12-18)
| [ 0:00] Driver version:    4.35.0
| [ 0:00] Kernel is Linux localhost.localdomain 3.10.0-693.11.1.el7.x86_64 #1 SMP Mon Dec 4 23:52:40 UTC 2017 x86_64 GNU/Linux
| [ 0:00] Selinux mode is not installed.
| [ 0:00]               total        used        free      shared  buff/cache   available
| [ 0:00] Mem:           7822        1076        4151          10        2595        6439
| [ 0:00] Swap:          4095           0        4095
| [ 0:00] Filesystem      Size  Used Avail Use% Mounted on
| [ 0:00] /dev/sdc1        18G  8.4G  8.4G  50% /
| [ 0:00] /dev/sdd1        51G  6.1G   43G  13% /lfskernel
| [ 0:00] devtmpfs        3.9G     0  3.9G   0% /dev
| [ 0:00] tmpfs           3.9G     0  3.9G   0% /run
| [ 0:00] @TESTDIR=/tmp/LVMTEST3951.Gupbpb2Mcm
| [ 0:00] @PREFIX=LVMTEST3951
| [ 0:00] ## LVMCONF: activation {
| [ 0:00] ## LVMCONF:     checks = 1
| [ 0:00] ## LVMCONF:     monitoring = 0
| [ 0:00] ## LVMCONF:     polling_interval = 1
| [ 0:00] ## LVMCONF:     raid_region_size = 512
| [ 0:00] ## LVMCONF:     retry_deactivation = 1
| [ 0:00] ## LVMCONF:     snapshot_autoextend_percent = 50
| [ 0:00] ## LVMCONF:     snapshot_autoextend_threshold = 50
| [ 0:00] ## LVMCONF:     udev_rules = 1
| [ 0:00] ## LVMCONF:     udev_sync = 1
| [ 0:00] ## LVMCONF:     verify_udev_operations = 1
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: allocation {
| [ 0:00] ## LVMCONF:     wipe_signatures_when_zeroing_new_lvs = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: backup {
| [ 0:00] ## LVMCONF:     archive = 0
| [ 0:00] ## LVMCONF:     backup = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: devices {
| [ 0:00] ## LVMCONF:     cache_dir = "@TESTDIR@/etc"
| [ 0:00] ## LVMCONF:     default_data_alignment = 1
| [ 0:00] ## LVMCONF:     dir = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     filter = "a|.*|"
| [ 0:00] ## LVMCONF:     global_filter = [ "a|@TESTDIR@/dev/mapper/@PREFIX@.*pv[0-9_]*$|", "r|.*|" ]
| [ 0:00] ## LVMCONF:     md_component_detection  = 0
| [ 0:00] ## LVMCONF:     scan = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     sysfs_scan = 1
| [ 0:00] ## LVMCONF:     write_cache_state = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: dmeventd {
| [ 0:00] ## LVMCONF:     executable = "/sources/boot/LVM2.2.02.177/test/lib/dmeventd"
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: global {
| [ 0:00] ## LVMCONF:     abort_on_internal_errors = 1
| [ 0:00] ## LVMCONF:     cache_check_executable = "/usr/sbin/cache_check"
| [ 0:00] ## LVMCONF:     cache_dump_executable = "/usr/sbin/cache_dump"
| [ 0:00] ## LVMCONF:     cache_repair_executable = "/usr/sbin/cache_repair"
| [ 0:00] ## LVMCONF:     detect_internal_vg_cache_corruption = 1
| [ 0:00] ## LVMCONF:     fallback_to_local_locking = 0
| [ 0:00] ## LVMCONF:     fsadm_executable = "/sources/boot/LVM2.2.02.177/test/lib/fsadm"
| [ 0:00] ## LVMCONF:     library_dir = "@TESTDIR@/lib"
| [ 0:00] ## LVMCONF:     locking_dir = "@TESTDIR@/var/lock/lvm"
| [ 0:00] ## LVMCONF:     locking_type=1
| [ 0:00] ## LVMCONF:     notify_dbus = 0
| [ 0:00] ## LVMCONF:     si_unit_consistency = 1
| [ 0:00] ## LVMCONF:     thin_check_executable = "/usr/sbin/thin_check"
| [ 0:00] ## LVMCONF:     thin_dump_executable = "/usr/sbin/thin_dump"
| [ 0:00] ## LVMCONF:     thin_repair_executable = "/usr/sbin/thin_repair"
| [ 0:00] ## LVMCONF:     use_lvmetad = 0
| [ 0:00] ## LVMCONF:     use_lvmlockd = 0
| [ 0:00] ## LVMCONF:     use_lvmpolld = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: log {
| [ 0:00] ## LVMCONF:     activation = 1
| [ 0:00] ## LVMCONF:     file = "@TESTDIR@/debug.log"
| [ 0:00] ## LVMCONF:     indent = 1
| [ 0:00] ## LVMCONF:     level = 9
| [ 0:00] ## LVMCONF:     overwrite = 1
| [ 0:00] ## LVMCONF:     syslog = 0
| [ 0:00] ## LVMCONF:     verbose = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] <======== Processing test: "lvcreate-large.sh" ========>
| [ 0:00] 
| [ 0:00] # FIXME  update test to make something useful on <16T
| [ 0:00] aux can_use_16T || skip
| [ 0:00] #lvcreate-large.sh:21+ aux can_use_16T
| [ 0:00] 
| [ 0:00] aux prepare_vg 4
| [ 0:00] #lvcreate-large.sh:23+ aux prepare_vg 4
| [ 0:00] ## preparing loop device....ok (/dev/loop0)
| [ 0:00] ## preparing 4 devices...lib/utils: line 212: DM_UDEV_COOKIE: unbound variable
| [ 0:00] set +vx; STACKTRACE; set -vx
| [ 0:00] ##lvcreate-large.sh:23+ set +vx
| [ 0:00] ## - /lfskernel/sources/boot/LVM2.2.02.177/test/shell/lvcreate-large.sh:23
| [ 0:00] ## 1 STACKTRACE() called from /lfskernel/sources/boot/LVM2.2.02.177/test/shell/lvcreate-large.sh:23
| [ 0:00] <======== Info ========>
| [ 0:01] ## DMINFO:   Name             Maj Min Stat Open Targ Event  UUID                                                                
| [ 0:01] ## DMINFO:   @PREFIX@pv4   253   4 L--w    0    1      0 TEST-@PREFIX@pv4                                                 
| [ 0:01] ## DMINFO:   @PREFIX@pv3   253   3 L--w    0    1      0 TEST-@PREFIX@pv3                                                 
| [ 0:01] ## DMINFO:   @PREFIX@pv2   253   6 L--w    0    1      0 TEST-@PREFIX@pv2                                                 
| [ 0:01] ## DMINFO:   @PREFIX@pv1   253   5 L--w    0    1      0 TEST-@PREFIX@pv1                                                 
| [ 0:01] <======== Active table ========>
| [ 0:01] ## DMTABLE:  @PREFIX@pv4: 0 69632 linear 7:0 210944
| [ 0:01] ## DMTABLE:  @PREFIX@pv3: 0 69632 linear 7:0 141312
| [ 0:01] ## DMTABLE:  @PREFIX@pv2: 0 69632 linear 7:0 71680
| [ 0:01] ## DMTABLE:  @PREFIX@pv1: 0 69632 linear 7:0 2048
| [ 0:01] <======== Inactive table ========>
| [ 0:01] ## DMITABLE: @PREFIX@pv4: 
| [ 0:01] ## DMITABLE: @PREFIX@pv3: 
| [ 0:01] ## DMITABLE: @PREFIX@pv2: 
| [ 0:01] ## DMITABLE: @PREFIX@pv1: 
| [ 0:01] <======== Status ========>
| [ 0:01] ## DMSTATUS: @PREFIX@pv4: 0 69632 linear 
| [ 0:01] ## DMSTATUS: @PREFIX@pv3: 0 69632 linear 
| [ 0:01] ## DMSTATUS: @PREFIX@pv2: 0 69632 linear 
| [ 0:01] ## DMSTATUS: @PREFIX@pv1: 0 69632 linear 
| [ 0:01] <======== Tree ========>
| [ 0:01] ## DMTREE:   @PREFIX@pv4 (253:4)
| [ 0:01] ## DMTREE:    `- (7:0)
| [ 0:01] ## DMTREE:   @PREFIX@pv3 (253:3)
| [ 0:01] ## DMTREE:    `- (7:0)
| [ 0:01] ## DMTREE:   @PREFIX@pv2 (253:6)
| [ 0:01] ## DMTREE:    `- (7:0)
| [ 0:01] ## DMTREE:   LFS_vg-lfs (253:2)
| [ 0:01] ## DMTREE:    `- (8:16)
| [ 0:01] ## DMTREE:   @PREFIX@pv1 (253:5)
| [ 0:01] ## DMTREE:    `- (7:0)
| [ 0:01] ## DMTREE:   centos-swap (253:1)
| [ 0:01] ## DMTREE:    `- (8:2)
| [ 0:01] ## DMTREE:   centos-root (253:0)
| [ 0:01] ## DMTREE:    `- (8:2)
| [ 0:01] <======== Recursive list of @TESTDIR@/dev ========>
| [ 0:01] ## LSLR:	@TESTDIR@/dev:
| [ 0:01] ## LSLR:	total 4
| [ 0:01] ## LSLR:	brw-r--r-- 1 root root 7, 0 Feb 21 02:26 loop0
| [ 0:01] ## LSLR:	brw-r--r-- 1 root root 7, 1 Feb 21 02:26 loop1
| [ 0:01] ## LSLR:	brw-r--r-- 1 root root 7, 2 Feb 21 02:26 loop2
| [ 0:01] ## LSLR:	brw-r--r-- 1 root root 7, 3 Feb 21 02:26 loop3
| [ 0:01] ## LSLR:	brw-r--r-- 1 root root 7, 4 Feb 21 02:26 loop4
| [ 0:01] ## LSLR:	brw-r--r-- 1 root root 7, 5 Feb 21 02:26 loop5
| [ 0:01] ## LSLR:	brw-r--r-- 1 root root 7, 6 Feb 21 02:26 loop6
| [ 0:01] ## LSLR:	brw-r--r-- 1 root root 7, 7 Feb 21 02:26 loop7
| [ 0:01] ## LSLR:	drwxr-xr-x 2 root root 4096 Feb 21 02:26 mapper
| [ 0:01] ## LSLR:	crw-r--r-- 1 root root 1, 3 Feb 21 02:26 testnull
| [ 0:01] ## LSLR:	
| [ 0:01] ## LSLR:	@TESTDIR@/dev/mapper:
| [ 0:01] ## LSLR:	total 0
| [ 0:01] ## LSLR:	brw------- 1 root root 253,   5 Feb 21 02:26 @PREFIX@pv1
| [ 0:01] ## LSLR:	brw------- 1 root root 253,   6 Feb 21 02:26 @PREFIX@pv2
| [ 0:01] ## LSLR:	brw------- 1 root root 253,   3 Feb 21 02:26 @PREFIX@pv3
| [ 0:01] ## LSLR:	brw------- 1 root root 253,   4 Feb 21 02:26 @PREFIX@pv4
| [ 0:01] ## LSLR:	crw------- 1 root root  10, 236 Feb 21 02:26 control
| [ 0:01] <======== Udev DB content ========>
| [ 0:01] ## UDEV:	P: /devices/virtual/block/dm-0
| [ 0:01] ## UDEV:	N: dm-0
| [ 0:01] ## UDEV:	E: DEVNAME=/dev/dm-0
| [ 0:01] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-0
| [ 0:01] ## UDEV:	E: DEVTYPE=disk
| [ 0:01] ## UDEV:	E: MAJOR=253
| [ 0:01] ## UDEV:	E: MINOR=0
| [ 0:01] ## UDEV:	E: SUBSYSTEM=block
| [ 0:01] ## UDEV:	
| [ 0:01] ## UDEV:	P: /devices/virtual/block/dm-1
| [ 0:01] ## UDEV:	N: dm-1
| [ 0:01] ## UDEV:	E: DEVNAME=/dev/dm-1
| [ 0:01] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-1
| [ 0:01] ## UDEV:	E: DEVTYPE=disk
| [ 0:01] ## UDEV:	E: MAJOR=253
| [ 0:01] ## UDEV:	E: MINOR=1
| [ 0:01] ## UDEV:	E: SUBSYSTEM=block
| [ 0:01] ## UDEV:	
| [ 0:01] ## UDEV:	P: /devices/virtual/block/dm-2
| [ 0:01] ## UDEV:	N: dm-2
| [ 0:01] ## UDEV:	E: DEVNAME=/dev/dm-2
| [ 0:01] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-2
| [ 0:01] ## UDEV:	E: DEVTYPE=disk
| [ 0:01] ## UDEV:	E: MAJOR=253
| [ 0:01] ## UDEV:	E: MINOR=2
| [ 0:01] ## UDEV:	E: SUBSYSTEM=block
| [ 0:01] ## UDEV:	
| [ 0:01] ## UDEV:	P: /devices/virtual/block/dm-3
| [ 0:01] ## UDEV:	N: dm-3
| [ 0:01] ## UDEV:	E: DEVNAME=/dev/dm-3
| [ 0:01] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-3
| [ 0:01] ## UDEV:	E: DEVTYPE=disk
| [ 0:01] ## UDEV:	E: MAJOR=253
| [ 0:01] ## UDEV:	E: MINOR=3
| [ 0:01] ## UDEV:	E: SUBSYSTEM=block
| [ 0:01] ## UDEV:	
| [ 0:01] ## UDEV:	P: /devices/virtual/block/dm-4
| [ 0:01] ## UDEV:	N: dm-4
| [ 0:01] ## UDEV:	E: DEVNAME=/dev/dm-4
| [ 0:01] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-4
| [ 0:01] ## UDEV:	E: DEVTYPE=disk
| [ 0:01] ## UDEV:	E: MAJOR=253
| [ 0:01] ## UDEV:	E: MINOR=4
| [ 0:01] ## UDEV:	E: SUBSYSTEM=block
| [ 0:01] ## UDEV:	
| [ 0:01] ## UDEV:	P: /devices/virtual/block/dm-5
| [ 0:01] ## UDEV:	N: dm-5
| [ 0:01] ## UDEV:	E: DEVNAME=/dev/dm-5
| [ 0:01] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-5
| [ 0:01] ## UDEV:	E: DEVTYPE=disk
| [ 0:01] ## UDEV:	E: MAJOR=253
| [ 0:01] ## UDEV:	E: MINOR=5
| [ 0:01] ## UDEV:	E: SUBSYSTEM=block
| [ 0:01] ## UDEV:	
| [ 0:01] ## UDEV:	P: /devices/virtual/block/dm-6
| [ 0:01] ## UDEV:	N: dm-6
| [ 0:01] ## UDEV:	E: DEVNAME=/dev/dm-6
| [ 0:01] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-6
| [ 0:01] ## UDEV:	E: DEVTYPE=disk
| [ 0:01] ## UDEV:	E: MAJOR=253
| [ 0:01] ## UDEV:	E: MINOR=6
| [ 0:01] ## UDEV:	E: SUBSYSTEM=block
| [ 0:01] ## UDEV:	
| [ 0:01] ## UDEV:	P: /devices/virtual/block/loop0
| [ 0:01] ## UDEV:	N: loop0
| [ 0:01] ## UDEV:	E: DEVNAME=/dev/loop0
| [ 0:01] ## UDEV:	E: DEVPATH=/devices/virtual/block/loop0
| [ 0:01] ## UDEV:	E: DEVTYPE=disk
| [ 0:01] ## UDEV:	E: MAJOR=7
| [ 0:01] ## UDEV:	E: MINOR=0
| [ 0:01] ## UDEV:	E: SUBSYSTEM=block
| [ 0:01] ## UDEV:	
| [ 0:01] <======== Script file "lvcreate-large.sh" ========>
| [ 0:01] ## Line: 1 	 #!/usr/bin/env bash
| [ 0:01] ## Line: 2 	 
| [ 0:01] ## Line: 3 	 # Copyright (C) 2011 Red Hat, Inc. All rights reserved.
| [ 0:01] ## Line: 4 	 #
| [ 0:01] ## Line: 5 	 # This copyrighted material is made available to anyone wishing to use,
| [ 0:01] ## Line: 6 	 # modify, copy, or redistribute it subject to the terms and conditions
| [ 0:01] ## Line: 7 	 # of the GNU General Public License v.2.
| [ 0:01] ## Line: 8 	 #
| [ 0:01] ## Line: 9 	 # You should have received a copy of the GNU General Public License
| [ 0:01] ## Line: 10 	 # along with this program; if not, write to the Free Software Foundation,
| [ 0:01] ## Line: 11 	 # Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA
| [ 0:01] ## Line: 12 	 
| [ 0:01] ## Line: 13 	 # 'Exercise some lvcreate diagnostics'
| [ 0:01] ## Line: 14 	 
| [ 0:01] ## Line: 15 	 SKIP_WITH_LVMLOCKD=1
| [ 0:01] ## Line: 16 	 SKIP_WITH_LVMPOLLD=1
| [ 0:01] ## Line: 17 	 
| [ 0:01] ## Line: 18 	 . lib/inittest
| [ 0:01] ## Line: 19 	 
| [ 0:01] ## Line: 20 	 # FIXME  update test to make something useful on <16T
| [ 0:01] ## Line: 21 	 aux can_use_16T || skip
| [ 0:01] ## Line: 22 	 
| [ 0:01] ## Line: 23 	 aux prepare_vg 4
| [ 0:01] ## Line: 24 	 
| [ 0:01] ## Line: 25 	 lvcreate --type snapshot -s -l 100%FREE -n $lv $vg --virtualsize 1024T
| [ 0:01] ## Line: 26 	 
| [ 0:01] ## Line: 27 	 #FIXME this should be 1024T
| [ 0:01] ## Line: 28 	 #check lv_field $vg/$lv size "128.00m"
| [ 0:01] ## Line: 29 	 
| [ 0:01] ## Line: 30 	 aux extend_filter_LVMTEST
| [ 0:01] ## Line: 31 	 
| [ 0:01] ## Line: 32 	 pvcreate "$DM_DEV_DIR/$vg/$lv"
| [ 0:01] ## Line: 33 	 vgcreate $vg1 "$DM_DEV_DIR/$vg/$lv"
| [ 0:01] ## Line: 34 	 
| [ 0:01] ## Line: 35 	 lvcreate -l 100%FREE -n $lv1 $vg1
| [ 0:01] ## Line: 36 	 check lv_field $vg1/$lv1 size "1024.00t" --units t
| [ 0:01] ## Line: 37 	 lvresize -f -l 72%VG $vg1/$lv1
| [ 0:01] ## Line: 38 	 check lv_field $vg1/$lv1 size "737.28t" --units t
| [ 0:01] ## Line: 39 	 lvremove -ff $vg1/$lv1
| [ 0:01] ## Line: 40 	 
| [ 0:01] ## Line: 41 	 lvcreate -l 100%VG -n $lv1 $vg1
| [ 0:01] ## Line: 42 	 check lv_field $vg1/$lv1 size "1024.00t" --units t
| [ 0:01] ## Line: 43 	 lvresize -f -l 72%VG $vg1/$lv1
| [ 0:01] ## Line: 44 	 check lv_field $vg1/$lv1 size "737.28t" --units t
| [ 0:01] ## Line: 45 	 lvremove -ff $vg1/$lv1
| [ 0:01] ## Line: 46 	 
| [ 0:01] ## Line: 47 	 lvremove -ff $vg/$lv
| [ 0:01] ## Line: 48 	 
| [ 0:01] ## Line: 49 	 vgremove -ff $vg
| [ 0:01] aux teardown
| [ 0:01] #lvcreate-large.sh:1+ aux teardown
| [ 0:01] ## teardown.........ok
###       failed: [ndev-vanilla] shell/lvcreate-large.sh

| [ 0:00] Library version:   1.02.146 (2017-12-18)
| [ 0:00] Driver version:    4.35.0
| [ 0:00] Kernel is Linux localhost.localdomain 3.10.0-693.11.1.el7.x86_64 #1 SMP Mon Dec 4 23:52:40 UTC 2017 x86_64 GNU/Linux
| [ 0:00] Selinux mode is not installed.
| [ 0:00]               total        used        free      shared  buff/cache   available
| [ 0:00] Mem:           7822        1076        4150          10        2595        6439
| [ 0:00] Swap:          4095           0        4095
| [ 0:00] Filesystem      Size  Used Avail Use% Mounted on
| [ 0:00] /dev/sdc1        18G  8.4G  8.4G  50% /
| [ 0:00] /dev/sdd1        51G  6.1G   43G  13% /lfskernel
| [ 0:00] devtmpfs        3.9G     0  3.9G   0% /dev
| [ 0:00] tmpfs           3.9G     0  3.9G   0% /run
| [ 0:00] @TESTDIR=/tmp/LVMTEST4156.XCUmmPl59e
| [ 0:00] @PREFIX=LVMTEST4156
| [ 0:00] ## LVMCONF: activation {
| [ 0:00] ## LVMCONF:     checks = 1
| [ 0:00] ## LVMCONF:     monitoring = 0
| [ 0:00] ## LVMCONF:     polling_interval = 1
| [ 0:00] ## LVMCONF:     raid_region_size = 512
| [ 0:00] ## LVMCONF:     retry_deactivation = 1
| [ 0:00] ## LVMCONF:     snapshot_autoextend_percent = 50
| [ 0:00] ## LVMCONF:     snapshot_autoextend_threshold = 50
| [ 0:00] ## LVMCONF:     udev_rules = 1
| [ 0:00] ## LVMCONF:     udev_sync = 1
| [ 0:00] ## LVMCONF:     verify_udev_operations = 1
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: allocation {
| [ 0:00] ## LVMCONF:     wipe_signatures_when_zeroing_new_lvs = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: backup {
| [ 0:00] ## LVMCONF:     archive = 0
| [ 0:00] ## LVMCONF:     backup = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: devices {
| [ 0:00] ## LVMCONF:     cache_dir = "@TESTDIR@/etc"
| [ 0:00] ## LVMCONF:     default_data_alignment = 1
| [ 0:00] ## LVMCONF:     dir = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     filter = "a|.*|"
| [ 0:00] ## LVMCONF:     global_filter = [ "a|@TESTDIR@/dev/mapper/@PREFIX@.*pv[0-9_]*$|", "r|.*|" ]
| [ 0:00] ## LVMCONF:     md_component_detection  = 0
| [ 0:00] ## LVMCONF:     scan = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     sysfs_scan = 1
| [ 0:00] ## LVMCONF:     write_cache_state = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: dmeventd {
| [ 0:00] ## LVMCONF:     executable = "/sources/boot/LVM2.2.02.177/test/lib/dmeventd"
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: global {
| [ 0:00] ## LVMCONF:     abort_on_internal_errors = 1
| [ 0:00] ## LVMCONF:     cache_check_executable = "/usr/sbin/cache_check"
| [ 0:00] ## LVMCONF:     cache_dump_executable = "/usr/sbin/cache_dump"
| [ 0:00] ## LVMCONF:     cache_repair_executable = "/usr/sbin/cache_repair"
| [ 0:00] ## LVMCONF:     detect_internal_vg_cache_corruption = 1
| [ 0:00] ## LVMCONF:     fallback_to_local_locking = 0
| [ 0:00] ## LVMCONF:     fsadm_executable = "/sources/boot/LVM2.2.02.177/test/lib/fsadm"
| [ 0:00] ## LVMCONF:     library_dir = "@TESTDIR@/lib"
| [ 0:00] ## LVMCONF:     locking_dir = "@TESTDIR@/var/lock/lvm"
| [ 0:00] ## LVMCONF:     locking_type=1
| [ 0:00] ## LVMCONF:     notify_dbus = 0
| [ 0:00] ## LVMCONF:     si_unit_consistency = 1
| [ 0:00] ## LVMCONF:     thin_check_executable = "/usr/sbin/thin_check"
| [ 0:00] ## LVMCONF:     thin_dump_executable = "/usr/sbin/thin_dump"
| [ 0:00] ## LVMCONF:     thin_repair_executable = "/usr/sbin/thin_repair"
| [ 0:00] ## LVMCONF:     use_lvmetad = 0
| [ 0:00] ## LVMCONF:     use_lvmlockd = 0
| [ 0:00] ## LVMCONF:     use_lvmpolld = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: log {
| [ 0:00] ## LVMCONF:     activation = 1
| [ 0:00] ## LVMCONF:     file = "@TESTDIR@/debug.log"
| [ 0:00] ## LVMCONF:     indent = 1
| [ 0:00] ## LVMCONF:     level = 9
| [ 0:00] ## LVMCONF:     overwrite = 1
| [ 0:00] ## LVMCONF:     syslog = 0
| [ 0:00] ## LVMCONF:     verbose = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] <======== Processing test: "lvcreate-mirror.sh" ========>
| [ 0:00] 
| [ 0:00] aux prepare_vg 5 80
| [ 0:00] #lvcreate-mirror.sh:18+ aux prepare_vg 5 80
| [ 0:00] ## preparing loop device....ok (/dev/loop0)
| [ 0:00] ## preparing 5 devices...lib/utils: line 212: DM_UDEV_COOKIE: unbound variable
| [ 0:00] set +vx; STACKTRACE; set -vx
| [ 0:00] ##lvcreate-mirror.sh:18+ set +vx
| [ 0:00] ## - /lfskernel/sources/boot/LVM2.2.02.177/test/shell/lvcreate-mirror.sh:18
| [ 0:00] ## 1 STACKTRACE() called from /lfskernel/sources/boot/LVM2.2.02.177/test/shell/lvcreate-mirror.sh:18
| [ 0:00] <======== Info ========>
| [ 0:00] ## DMINFO:   Name             Maj Min Stat Open Targ Event  UUID                                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv5   253   6 L--w    0    1      0 TEST-@PREFIX@pv5                                                 
| [ 0:00] ## DMINFO:   @PREFIX@pv4   253   4 L--w    0    1      0 TEST-@PREFIX@pv4                                                 
| [ 0:00] ## DMINFO:   @PREFIX@pv3   253   3 L--w    0    1      0 TEST-@PREFIX@pv3                                                 
| [ 0:00] ## DMINFO:   @PREFIX@pv2   253   7 L--w    0    1      0 TEST-@PREFIX@pv2                                                 
| [ 0:00] ## DMINFO:   @PREFIX@pv1   253   5 L--w    0    1      0 TEST-@PREFIX@pv1                                                 
| [ 0:00] <======== Active table ========>
| [ 0:00] ## DMTABLE:  @PREFIX@pv5: 0 163840 linear 7:0 657408
| [ 0:00] ## DMTABLE:  @PREFIX@pv4: 0 163840 linear 7:0 493568
| [ 0:00] ## DMTABLE:  @PREFIX@pv3: 0 163840 linear 7:0 329728
| [ 0:00] ## DMTABLE:  @PREFIX@pv2: 0 163840 linear 7:0 165888
| [ 0:00] ## DMTABLE:  @PREFIX@pv1: 0 163840 linear 7:0 2048
| [ 0:00] <======== Inactive table ========>
| [ 0:00] ## DMITABLE: @PREFIX@pv5: 
| [ 0:00] ## DMITABLE: @PREFIX@pv4: 
| [ 0:00] ## DMITABLE: @PREFIX@pv3: 
| [ 0:00] ## DMITABLE: @PREFIX@pv2: 
| [ 0:00] ## DMITABLE: @PREFIX@pv1: 
| [ 0:00] <======== Status ========>
| [ 0:00] ## DMSTATUS: @PREFIX@pv5: 0 163840 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv4: 0 163840 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv3: 0 163840 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv2: 0 163840 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv1: 0 163840 linear 
| [ 0:00] <======== Tree ========>
| [ 0:00] ## DMTREE:   @PREFIX@pv5 (253:6)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   @PREFIX@pv4 (253:4)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   @PREFIX@pv3 (253:3)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   @PREFIX@pv2 (253:7)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   LFS_vg-lfs (253:2)
| [ 0:00] ## DMTREE:    `- (8:16)
| [ 0:00] ## DMTREE:   @PREFIX@pv1 (253:5)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   centos-swap (253:1)
| [ 0:00] ## DMTREE:    `- (8:2)
| [ 0:00] ## DMTREE:   centos-root (253:0)
| [ 0:00] ## DMTREE:    `- (8:2)
| [ 0:00] <======== Recursive list of @TESTDIR@/dev ========>
| [ 0:00] ## LSLR:	@TESTDIR@/dev:
| [ 0:00] ## LSLR:	total 4
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 0 Feb 21 02:27 loop0
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 1 Feb 21 02:27 loop1
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 2 Feb 21 02:27 loop2
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 3 Feb 21 02:27 loop3
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 4 Feb 21 02:27 loop4
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 5 Feb 21 02:27 loop5
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 6 Feb 21 02:27 loop6
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 7 Feb 21 02:27 loop7
| [ 0:00] ## LSLR:	drwxr-xr-x 2 root root 4096 Feb 21 02:27 mapper
| [ 0:00] ## LSLR:	crw-r--r-- 1 root root 1, 3 Feb 21 02:27 testnull
| [ 0:00] ## LSLR:	
| [ 0:00] ## LSLR:	@TESTDIR@/dev/mapper:
| [ 0:00] ## LSLR:	total 0
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   5 Feb 21 02:27 @PREFIX@pv1
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   7 Feb 21 02:27 @PREFIX@pv2
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   3 Feb 21 02:27 @PREFIX@pv3
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   4 Feb 21 02:27 @PREFIX@pv4
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   6 Feb 21 02:27 @PREFIX@pv5
| [ 0:00] ## LSLR:	crw------- 1 root root  10, 236 Feb 21 02:27 control
| [ 0:00] <======== Udev DB content ========>
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-0
| [ 0:00] ## UDEV:	N: dm-0
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-0
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-0
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=0
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-1
| [ 0:00] ## UDEV:	N: dm-1
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-1
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-1
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=1
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-2
| [ 0:00] ## UDEV:	N: dm-2
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-2
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-2
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=2
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-3
| [ 0:00] ## UDEV:	N: dm-3
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-3
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-3
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=3
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-4
| [ 0:00] ## UDEV:	N: dm-4
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-4
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-4
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=4
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-5
| [ 0:00] ## UDEV:	N: dm-5
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-5
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-5
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=5
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-6
| [ 0:00] ## UDEV:	N: dm-6
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-6
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-6
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=6
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-7
| [ 0:00] ## UDEV:	N: dm-7
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-7
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-7
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=7
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/loop0
| [ 0:00] ## UDEV:	N: loop0
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/loop0
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/loop0
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=7
| [ 0:00] ## UDEV:	E: MINOR=0
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] <======== Script file "lvcreate-mirror.sh" ========>
| [ 0:00] ## Line: 1 	 #!/usr/bin/env bash
| [ 0:00] ## Line: 2 	 
| [ 0:00] ## Line: 3 	 # Copyright (C) 2010 Red Hat, Inc. All rights reserved.
| [ 0:00] ## Line: 4 	 #
| [ 0:00] ## Line: 5 	 # This copyrighted material is made available to anyone wishing to use,
| [ 0:00] ## Line: 6 	 # modify, copy, or redistribute it subject to the terms and conditions
| [ 0:00] ## Line: 7 	 # of the GNU General Public License v.2.
| [ 0:00] ## Line: 8 	 #
| [ 0:00] ## Line: 9 	 # You should have received a copy of the GNU General Public License
| [ 0:00] ## Line: 10 	 # along with this program; if not, write to the Free Software Foundation,
| [ 0:00] ## Line: 11 	 # Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA
| [ 0:00] ## Line: 12 	 
| [ 0:00] ## Line: 13 	 SKIP_WITH_LVMLOCKD=1
| [ 0:00] ## Line: 14 	 SKIP_WITH_LVMPOLLD=1
| [ 0:00] ## Line: 15 	 
| [ 0:00] ## Line: 16 	 . lib/inittest
| [ 0:00] ## Line: 17 	 
| [ 0:00] ## Line: 18 	 aux prepare_vg 5 80
| [ 0:00] ## Line: 19 	 aux lvmconf 'allocation/maximise_cling = 0' \
| [ 0:00] ## Line: 20 	 	    'allocation/mirror_logs_require_separate_pvs = 1'
| [ 0:00] ## Line: 21 	 
| [ 0:00] ## Line: 22 	 # 2-way mirror with corelog, 2 PVs
| [ 0:00] ## Line: 23 	 lvcreate -aey -l2 --type mirror -m1 --mirrorlog core -n $lv1 $vg "$dev1" "$dev2"
| [ 0:00] ## Line: 24 	 check mirror_images_redundant $vg $lv1
| [ 0:00] ## Line: 25 	 
| [ 0:00] ## Line: 26 	 # 2-way mirror with disklog, 3 PVs
| [ 0:00] ## Line: 27 	 # lvcreate --nosync is in 100% sync after creation (bz429342)
| [ 0:00] ## Line: 28 	 lvcreate -aey -l2 --type mirror -m1 --nosync -n $lv2 $vg "$dev1" "$dev2" "$dev3":0-1 2>&1 | tee out
| [ 0:00] ## Line: 29 	 grep "New mirror won't be synchronised." out
| [ 0:00] ## Line: 30 	 check lv_field $vg/$lv2 copy_percent "100.00"
| [ 0:00] ## Line: 31 	 check mirror_images_redundant $vg $lv2
| [ 0:00] ## Line: 32 	 check mirror_log_on $vg $lv2 "$dev3"
| [ 0:00] ## Line: 33 	 
| [ 0:00] ## Line: 34 	 # 3-way mirror with disklog, 4 PVs
| [ 0:00] ## Line: 35 	 lvcreate -aey -l2 --type mirror -m2 --nosync --mirrorlog disk -n $lv3 $vg "$dev1" "$dev2" "$dev4" "$dev3":0-1
| [ 0:00] ## Line: 36 	 check mirror_images_redundant $vg $lv3
| [ 0:00] ## Line: 37 	 check mirror_log_on $vg $lv3 "$dev3"
| [ 0:00] ## Line: 38 	 lvremove -ff $vg
| [ 0:00] ## Line: 39 	 
| [ 0:00] ## Line: 40 	 # creating 2-way mirror with disklog from 2 PVs fails
| [ 0:00] ## Line: 41 	 not lvcreate -aey -l2 --type mirror -m1 -n $lv1 $vg "$dev1" "$dev2"
| [ 0:00] ## Line: 42 	 
| [ 0:00] ## Line: 43 	 vgremove -ff $vg
| [ 0:00] aux teardown
| [ 0:00] #lvcreate-mirror.sh:1+ aux teardown
| [ 0:00] ## teardown.........ok
###       failed: [ndev-vanilla] shell/lvcreate-mirror.sh

| [ 0:00] Library version:   1.02.146 (2017-12-18)
| [ 0:00] Driver version:    4.35.0
| [ 0:00] Kernel is Linux localhost.localdomain 3.10.0-693.11.1.el7.x86_64 #1 SMP Mon Dec 4 23:52:40 UTC 2017 x86_64 GNU/Linux
| [ 0:00] Selinux mode is not installed.
| [ 0:00]               total        used        free      shared  buff/cache   available
| [ 0:00] Mem:           7822        1079        4147          10        2595        6436
| [ 0:00] Swap:          4095           0        4095
| [ 0:00] Filesystem      Size  Used Avail Use% Mounted on
| [ 0:00] /dev/sdc1        18G  8.4G  8.4G  50% /
| [ 0:00] /dev/sdd1        51G  6.1G   43G  13% /lfskernel
| [ 0:00] devtmpfs        3.9G     0  3.9G   0% /dev
| [ 0:00] tmpfs           3.9G     0  3.9G   0% /run
| [ 0:00] @TESTDIR=/tmp/LVMTEST4370.0trFZS1oqo
| [ 0:00] @PREFIX=LVMTEST4370
| [ 0:00] ## LVMCONF: activation {
| [ 0:00] ## LVMCONF:     checks = 1
| [ 0:00] ## LVMCONF:     monitoring = 0
| [ 0:00] ## LVMCONF:     polling_interval = 1
| [ 0:00] ## LVMCONF:     raid_region_size = 512
| [ 0:00] ## LVMCONF:     retry_deactivation = 1
| [ 0:00] ## LVMCONF:     snapshot_autoextend_percent = 50
| [ 0:00] ## LVMCONF:     snapshot_autoextend_threshold = 50
| [ 0:00] ## LVMCONF:     udev_rules = 1
| [ 0:00] ## LVMCONF:     udev_sync = 1
| [ 0:00] ## LVMCONF:     verify_udev_operations = 1
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: allocation {
| [ 0:00] ## LVMCONF:     wipe_signatures_when_zeroing_new_lvs = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: backup {
| [ 0:00] ## LVMCONF:     archive = 0
| [ 0:00] ## LVMCONF:     backup = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: devices {
| [ 0:00] ## LVMCONF:     cache_dir = "@TESTDIR@/etc"
| [ 0:00] ## LVMCONF:     default_data_alignment = 1
| [ 0:00] ## LVMCONF:     dir = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     filter = "a|.*|"
| [ 0:00] ## LVMCONF:     global_filter = [ "a|@TESTDIR@/dev/mapper/@PREFIX@.*pv[0-9_]*$|", "r|.*|" ]
| [ 0:00] ## LVMCONF:     md_component_detection  = 0
| [ 0:00] ## LVMCONF:     scan = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     sysfs_scan = 1
| [ 0:00] ## LVMCONF:     write_cache_state = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: dmeventd {
| [ 0:00] ## LVMCONF:     executable = "/sources/boot/LVM2.2.02.177/test/lib/dmeventd"
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: global {
| [ 0:00] ## LVMCONF:     abort_on_internal_errors = 1
| [ 0:00] ## LVMCONF:     cache_check_executable = "/usr/sbin/cache_check"
| [ 0:00] ## LVMCONF:     cache_dump_executable = "/usr/sbin/cache_dump"
| [ 0:00] ## LVMCONF:     cache_repair_executable = "/usr/sbin/cache_repair"
| [ 0:00] ## LVMCONF:     detect_internal_vg_cache_corruption = 1
| [ 0:00] ## LVMCONF:     fallback_to_local_locking = 0
| [ 0:00] ## LVMCONF:     fsadm_executable = "/sources/boot/LVM2.2.02.177/test/lib/fsadm"
| [ 0:00] ## LVMCONF:     library_dir = "@TESTDIR@/lib"
| [ 0:00] ## LVMCONF:     locking_dir = "@TESTDIR@/var/lock/lvm"
| [ 0:00] ## LVMCONF:     locking_type=1
| [ 0:00] ## LVMCONF:     notify_dbus = 0
| [ 0:00] ## LVMCONF:     si_unit_consistency = 1
| [ 0:00] ## LVMCONF:     thin_check_executable = "/usr/sbin/thin_check"
| [ 0:00] ## LVMCONF:     thin_dump_executable = "/usr/sbin/thin_dump"
| [ 0:00] ## LVMCONF:     thin_repair_executable = "/usr/sbin/thin_repair"
| [ 0:00] ## LVMCONF:     use_lvmetad = 0
| [ 0:00] ## LVMCONF:     use_lvmlockd = 0
| [ 0:00] ## LVMCONF:     use_lvmpolld = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: log {
| [ 0:00] ## LVMCONF:     activation = 1
| [ 0:00] ## LVMCONF:     file = "@TESTDIR@/debug.log"
| [ 0:00] ## LVMCONF:     indent = 1
| [ 0:00] ## LVMCONF:     level = 9
| [ 0:00] ## LVMCONF:     overwrite = 1
| [ 0:00] ## LVMCONF:     syslog = 0
| [ 0:00] ## LVMCONF:     verbose = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] <======== Processing test: "lvcreate-missing.sh" ========>
| [ 0:00] 
| [ 0:00] aux prepare_vg 2
| [ 0:00] #lvcreate-missing.sh:18+ aux prepare_vg 2
| [ 0:00] ## preparing loop device....ok (/dev/loop0)
| [ 0:00] ## preparing 2 devices...lib/utils: line 212: DM_UDEV_COOKIE: unbound variable
| [ 0:00] set +vx; STACKTRACE; set -vx
| [ 0:00] ##lvcreate-missing.sh:18+ set +vx
| [ 0:00] ## - /lfskernel/sources/boot/LVM2.2.02.177/test/shell/lvcreate-missing.sh:18
| [ 0:00] ## 1 STACKTRACE() called from /lfskernel/sources/boot/LVM2.2.02.177/test/shell/lvcreate-missing.sh:18
| [ 0:00] <======== Info ========>
| [ 0:00] ## DMINFO:   Name             Maj Min Stat Open Targ Event  UUID                                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv2   253   3 L--w    0    1      0 TEST-@PREFIX@pv2                                                 
| [ 0:00] ## DMINFO:   @PREFIX@pv1   253   4 L--w    0    1      0 TEST-@PREFIX@pv1                                                 
| [ 0:00] <======== Active table ========>
| [ 0:00] ## DMTABLE:  @PREFIX@pv2: 0 69632 linear 7:0 71680
| [ 0:00] ## DMTABLE:  @PREFIX@pv1: 0 69632 linear 7:0 2048
| [ 0:00] <======== Inactive table ========>
| [ 0:00] ## DMITABLE: @PREFIX@pv2: 
| [ 0:00] ## DMITABLE: @PREFIX@pv1: 
| [ 0:00] <======== Status ========>
| [ 0:00] ## DMSTATUS: @PREFIX@pv2: 0 69632 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv1: 0 69632 linear 
| [ 0:00] <======== Tree ========>
| [ 0:00] ## DMTREE:   @PREFIX@pv2 (253:3)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   LFS_vg-lfs (253:2)
| [ 0:00] ## DMTREE:    `- (8:16)
| [ 0:00] ## DMTREE:   centos-swap (253:1)
| [ 0:00] ## DMTREE:    `- (8:2)
| [ 0:00] ## DMTREE:   centos-root (253:0)
| [ 0:00] ## DMTREE:    `- (8:2)
| [ 0:00] ## DMTREE:   @PREFIX@pv1 (253:4)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] <======== Recursive list of @TESTDIR@/dev ========>
| [ 0:00] ## LSLR:	@TESTDIR@/dev:
| [ 0:00] ## LSLR:	total 4
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 0 Feb 21 02:27 loop0
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 1 Feb 21 02:27 loop1
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 2 Feb 21 02:27 loop2
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 3 Feb 21 02:27 loop3
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 4 Feb 21 02:27 loop4
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 5 Feb 21 02:27 loop5
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 6 Feb 21 02:27 loop6
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 7 Feb 21 02:27 loop7
| [ 0:00] ## LSLR:	drwxr-xr-x 2 root root 4096 Feb 21 02:27 mapper
| [ 0:00] ## LSLR:	crw-r--r-- 1 root root 1, 3 Feb 21 02:27 testnull
| [ 0:00] ## LSLR:	
| [ 0:00] ## LSLR:	@TESTDIR@/dev/mapper:
| [ 0:00] ## LSLR:	total 0
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   4 Feb 21 02:27 @PREFIX@pv1
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   3 Feb 21 02:27 @PREFIX@pv2
| [ 0:00] ## LSLR:	crw------- 1 root root  10, 236 Feb 21 02:27 control
| [ 0:00] <======== Udev DB content ========>
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-0
| [ 0:00] ## UDEV:	N: dm-0
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-0
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-0
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=0
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-1
| [ 0:00] ## UDEV:	N: dm-1
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-1
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-1
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=1
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-2
| [ 0:00] ## UDEV:	N: dm-2
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-2
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-2
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=2
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-3
| [ 0:00] ## UDEV:	N: dm-3
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-3
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-3
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=3
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-4
| [ 0:00] ## UDEV:	N: dm-4
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-4
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-4
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=4
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/loop0
| [ 0:00] ## UDEV:	N: loop0
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/loop0
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/loop0
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=7
| [ 0:00] ## UDEV:	E: MINOR=0
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] <======== Script file "lvcreate-missing.sh" ========>
| [ 0:00] ## Line: 1 	 #!/usr/bin/env bash
| [ 0:00] ## Line: 2 	 
| [ 0:00] ## Line: 3 	 # Copyright (C) 2013 Red Hat, Inc. All rights reserved.
| [ 0:00] ## Line: 4 	 #
| [ 0:00] ## Line: 5 	 # This copyrighted material is made available to anyone wishing to use,
| [ 0:00] ## Line: 6 	 # modify, copy, or redistribute it subject to the terms and conditions
| [ 0:00] ## Line: 7 	 # of the GNU General Public License v.2.
| [ 0:00] ## Line: 8 	 #
| [ 0:00] ## Line: 9 	 # You should have received a copy of the GNU General Public License
| [ 0:00] ## Line: 10 	 # along with this program; if not, write to the Free Software Foundation,
| [ 0:00] ## Line: 11 	 # Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA
| [ 0:00] ## Line: 12 	 
| [ 0:00] ## Line: 13 	 SKIP_WITH_LVMLOCKD=1
| [ 0:00] ## Line: 14 	 SKIP_WITH_LVMPOLLD=1
| [ 0:00] ## Line: 15 	 
| [ 0:00] ## Line: 16 	 . lib/inittest
| [ 0:00] ## Line: 17 	 
| [ 0:00] ## Line: 18 	 aux prepare_vg 2
| [ 0:00] ## Line: 19 	 
| [ 0:00] ## Line: 20 	 aux disable_dev "$dev1"
| [ 0:00] ## Line: 21 	 
| [ 0:00] ## Line: 22 	 not lvcreate -n "foo" $vg -l 1
| [ 0:00] ## Line: 23 	 
| [ 0:00] ## Line: 24 	 aux enable_dev "$dev1"
| [ 0:00] ## Line: 25 	 
| [ 0:00] ## Line: 26 	 vgremove -ff $vg
| [ 0:00] aux teardown
| [ 0:00] #lvcreate-missing.sh:1+ aux teardown
| [ 0:00] ## teardown.........ok
###       failed: [ndev-vanilla] shell/lvcreate-missing.sh

| [ 0:00] Library version:   1.02.146 (2017-12-18)
| [ 0:00] Driver version:    4.35.0
| [ 0:00] Kernel is Linux localhost.localdomain 3.10.0-693.11.1.el7.x86_64 #1 SMP Mon Dec 4 23:52:40 UTC 2017 x86_64 GNU/Linux
| [ 0:00] Selinux mode is not installed.
| [ 0:00]               total        used        free      shared  buff/cache   available
| [ 0:00] Mem:           7822        1079        4147          10        2595        6436
| [ 0:00] Swap:          4095           0        4095
| [ 0:00] Filesystem      Size  Used Avail Use% Mounted on
| [ 0:00] /dev/sdc1        18G  8.4G  8.4G  50% /
| [ 0:00] /dev/sdd1        51G  6.1G   43G  13% /lfskernel
| [ 0:00] devtmpfs        3.9G     0  3.9G   0% /dev
| [ 0:00] tmpfs           3.9G     0  3.9G   0% /run
| [ 0:00] @TESTDIR=/tmp/LVMTEST4549.Wl66tfmoIe
| [ 0:00] @PREFIX=LVMTEST4549
| [ 0:00] ## LVMCONF: activation {
| [ 0:00] ## LVMCONF:     checks = 1
| [ 0:00] ## LVMCONF:     monitoring = 0
| [ 0:00] ## LVMCONF:     polling_interval = 1
| [ 0:00] ## LVMCONF:     raid_region_size = 512
| [ 0:00] ## LVMCONF:     retry_deactivation = 1
| [ 0:00] ## LVMCONF:     snapshot_autoextend_percent = 50
| [ 0:00] ## LVMCONF:     snapshot_autoextend_threshold = 50
| [ 0:00] ## LVMCONF:     udev_rules = 1
| [ 0:00] ## LVMCONF:     udev_sync = 1
| [ 0:00] ## LVMCONF:     verify_udev_operations = 1
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: allocation {
| [ 0:00] ## LVMCONF:     wipe_signatures_when_zeroing_new_lvs = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: backup {
| [ 0:00] ## LVMCONF:     archive = 0
| [ 0:00] ## LVMCONF:     backup = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: devices {
| [ 0:00] ## LVMCONF:     cache_dir = "@TESTDIR@/etc"
| [ 0:00] ## LVMCONF:     default_data_alignment = 1
| [ 0:00] ## LVMCONF:     dir = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     filter = "a|.*|"
| [ 0:00] ## LVMCONF:     global_filter = [ "a|@TESTDIR@/dev/mapper/@PREFIX@.*pv[0-9_]*$|", "r|.*|" ]
| [ 0:00] ## LVMCONF:     md_component_detection  = 0
| [ 0:00] ## LVMCONF:     scan = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     sysfs_scan = 1
| [ 0:00] ## LVMCONF:     write_cache_state = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: dmeventd {
| [ 0:00] ## LVMCONF:     executable = "/sources/boot/LVM2.2.02.177/test/lib/dmeventd"
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: global {
| [ 0:00] ## LVMCONF:     abort_on_internal_errors = 1
| [ 0:00] ## LVMCONF:     cache_check_executable = "/usr/sbin/cache_check"
| [ 0:00] ## LVMCONF:     cache_dump_executable = "/usr/sbin/cache_dump"
| [ 0:00] ## LVMCONF:     cache_repair_executable = "/usr/sbin/cache_repair"
| [ 0:00] ## LVMCONF:     detect_internal_vg_cache_corruption = 1
| [ 0:00] ## LVMCONF:     fallback_to_local_locking = 0
| [ 0:00] ## LVMCONF:     fsadm_executable = "/sources/boot/LVM2.2.02.177/test/lib/fsadm"
| [ 0:00] ## LVMCONF:     library_dir = "@TESTDIR@/lib"
| [ 0:00] ## LVMCONF:     locking_dir = "@TESTDIR@/var/lock/lvm"
| [ 0:00] ## LVMCONF:     locking_type=1
| [ 0:00] ## LVMCONF:     notify_dbus = 0
| [ 0:00] ## LVMCONF:     si_unit_consistency = 1
| [ 0:00] ## LVMCONF:     thin_check_executable = "/usr/sbin/thin_check"
| [ 0:00] ## LVMCONF:     thin_dump_executable = "/usr/sbin/thin_dump"
| [ 0:00] ## LVMCONF:     thin_repair_executable = "/usr/sbin/thin_repair"
| [ 0:00] ## LVMCONF:     use_lvmetad = 0
| [ 0:00] ## LVMCONF:     use_lvmlockd = 0
| [ 0:00] ## LVMCONF:     use_lvmpolld = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: log {
| [ 0:00] ## LVMCONF:     activation = 1
| [ 0:00] ## LVMCONF:     file = "@TESTDIR@/debug.log"
| [ 0:00] ## LVMCONF:     indent = 1
| [ 0:00] ## LVMCONF:     level = 9
| [ 0:00] ## LVMCONF:     overwrite = 1
| [ 0:00] ## LVMCONF:     syslog = 0
| [ 0:00] ## LVMCONF:     verbose = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] <======== Processing test: "lvcreate-operation.sh" ========>
| [ 0:00] 
| [ 0:00] cleanup_lvs() {
| [ 0:00] 	lvremove -ff $vg
| [ 0:00] 	(dm_table | not grep $vg) || \
| [ 0:00] 		die "ERROR: lvremove did leave some some mappings in DM behind!"
| [ 0:00] }
| [ 0:00] 
| [ 0:00] aux prepare_pvs 2
| [ 0:00] #lvcreate-operation.sh:26+ aux prepare_pvs 2
| [ 0:00] ## preparing loop device....ok (/dev/loop0)
| [ 0:00] ## preparing 2 devices...lib/utils: line 212: DM_UDEV_COOKIE: unbound variable
| [ 0:00] set +vx; STACKTRACE; set -vx
| [ 0:00] ##lvcreate-operation.sh:26+ set +vx
| [ 0:00] ## - /lfskernel/sources/boot/LVM2.2.02.177/test/shell/lvcreate-operation.sh:26
| [ 0:00] ## 1 STACKTRACE() called from /lfskernel/sources/boot/LVM2.2.02.177/test/shell/lvcreate-operation.sh:26
| [ 0:00] <======== Info ========>
| [ 0:00] ## DMINFO:   Name             Maj Min Stat Open Targ Event  UUID                                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv2   253   3 L--w    0    1      0 TEST-@PREFIX@pv2                                                 
| [ 0:00] ## DMINFO:   @PREFIX@pv1   253   4 L--w    0    1      0 TEST-@PREFIX@pv1                                                 
| [ 0:00] <======== Active table ========>
| [ 0:00] ## DMTABLE:  @PREFIX@pv2: 0 69632 linear 7:0 71680
| [ 0:00] ## DMTABLE:  @PREFIX@pv1: 0 69632 linear 7:0 2048
| [ 0:00] <======== Inactive table ========>
| [ 0:00] ## DMITABLE: @PREFIX@pv2: 
| [ 0:00] ## DMITABLE: @PREFIX@pv1: 
| [ 0:00] <======== Status ========>
| [ 0:00] ## DMSTATUS: @PREFIX@pv2: 0 69632 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv1: 0 69632 linear 
| [ 0:00] <======== Tree ========>
| [ 0:00] ## DMTREE:   @PREFIX@pv2 (253:3)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   @PREFIX@pv1 (253:4)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   LFS_vg-lfs (253:2)
| [ 0:00] ## DMTREE:    `- (8:16)
| [ 0:00] ## DMTREE:   centos-swap (253:1)
| [ 0:00] ## DMTREE:    `- (8:2)
| [ 0:00] ## DMTREE:   centos-root (253:0)
| [ 0:00] ## DMTREE:    `- (8:2)
| [ 0:00] <======== Recursive list of @TESTDIR@/dev ========>
| [ 0:00] ## LSLR:	@TESTDIR@/dev:
| [ 0:00] ## LSLR:	total 4
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 0 Feb 21 02:27 loop0
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 1 Feb 21 02:27 loop1
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 2 Feb 21 02:27 loop2
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 3 Feb 21 02:27 loop3
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 4 Feb 21 02:27 loop4
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 5 Feb 21 02:27 loop5
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 6 Feb 21 02:27 loop6
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 7 Feb 21 02:27 loop7
| [ 0:00] ## LSLR:	drwxr-xr-x 2 root root 4096 Feb 21 02:27 mapper
| [ 0:00] ## LSLR:	crw-r--r-- 1 root root 1, 3 Feb 21 02:27 testnull
| [ 0:00] ## LSLR:	
| [ 0:00] ## LSLR:	@TESTDIR@/dev/mapper:
| [ 0:00] ## LSLR:	total 0
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   4 Feb 21 02:27 @PREFIX@pv1
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   3 Feb 21 02:27 @PREFIX@pv2
| [ 0:00] ## LSLR:	crw------- 1 root root  10, 236 Feb 21 02:27 control
| [ 0:00] <======== Udev DB content ========>
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-0
| [ 0:00] ## UDEV:	N: dm-0
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-0
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-0
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=0
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-1
| [ 0:00] ## UDEV:	N: dm-1
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-1
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-1
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=1
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-2
| [ 0:00] ## UDEV:	N: dm-2
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-2
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-2
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=2
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-3
| [ 0:00] ## UDEV:	N: dm-3
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-3
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-3
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=3
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-4
| [ 0:00] ## UDEV:	N: dm-4
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-4
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-4
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=4
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/loop0
| [ 0:00] ## UDEV:	N: loop0
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/loop0
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/loop0
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=7
| [ 0:00] ## UDEV:	E: MINOR=0
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] <======== Script file "lvcreate-operation.sh" ========>
| [ 0:00] ## Line: 1 	 #!/usr/bin/env bash
| [ 0:00] ## Line: 2 	 
| [ 0:00] ## Line: 3 	 # Copyright (C) 2008 Red Hat, Inc. All rights reserved.
| [ 0:00] ## Line: 4 	 #
| [ 0:00] ## Line: 5 	 # This copyrighted material is made available to anyone wishing to use,
| [ 0:00] ## Line: 6 	 # modify, copy, or redistribute it subject to the terms and conditions
| [ 0:00] ## Line: 7 	 # of the GNU General Public License v.2.
| [ 0:00] ## Line: 8 	 #
| [ 0:00] ## Line: 9 	 # You should have received a copy of the GNU General Public License
| [ 0:00] ## Line: 10 	 # along with this program; if not, write to the Free Software Foundation,
| [ 0:00] ## Line: 11 	 # Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA
| [ 0:00] ## Line: 12 	 
| [ 0:00] ## Line: 13 	 # 'Exercise some lvcreate diagnostics'
| [ 0:00] ## Line: 14 	 
| [ 0:00] ## Line: 15 	 SKIP_WITH_LVMLOCKD=1
| [ 0:00] ## Line: 16 	 SKIP_WITH_LVMPOLLD=1
| [ 0:00] ## Line: 17 	 
| [ 0:00] ## Line: 18 	 . lib/inittest
| [ 0:00] ## Line: 19 	 
| [ 0:00] ## Line: 20 	 cleanup_lvs() {
| [ 0:00] ## Line: 21 	 	lvremove -ff $vg
| [ 0:00] ## Line: 22 	 	(dm_table | not grep $vg) || \
| [ 0:00] ## Line: 23 	 		die "ERROR: lvremove did leave some some mappings in DM behind!"
| [ 0:00] ## Line: 24 	 }
| [ 0:00] ## Line: 25 	 
| [ 0:00] ## Line: 26 	 aux prepare_pvs 2
| [ 0:00] ## Line: 27 	 get_devs
| [ 0:00] ## Line: 28 	 
| [ 0:00] ## Line: 29 	 aux pvcreate --metadatacopies 0 "$dev1"
| [ 0:00] ## Line: 30 	 aux vgcreate "$vg" "${DEVICES[@]}"
| [ 0:00] ## Line: 31 	 
| [ 0:00] ## Line: 32 	 # ---
| [ 0:00] ## Line: 33 	 # Create snapshots of LVs on --metadatacopies 0 PV (bz450651)
| [ 0:00] ## Line: 34 	 lvcreate -aey -n$lv1 -l4 $vg "$dev1"
| [ 0:00] ## Line: 35 	 lvcreate -n$lv2 -l4 -s $vg/$lv1
| [ 0:00] ## Line: 36 	 lvcreate -n$lv3 -l4 --permission r -s $vg/$lv1
| [ 0:00] ## Line: 37 	 cleanup_lvs
| [ 0:00] ## Line: 38 	 
| [ 0:00] ## Line: 39 	 # Skip the rest for cluster
| [ 0:00] ## Line: 40 	 test -e LOCAL_CLVMD && exit 0
| [ 0:00] ## Line: 41 	 
| [ 0:00] ## Line: 42 	 # ---
| [ 0:00] ## Line: 43 	 # Create mirror on two devices with mirrored log using --alloc anywhere
| [ 0:00] ## Line: 44 	 lvcreate --type mirror -m 1 -l4 -n $lv1 --mirrorlog mirrored $vg --alloc anywhere "$dev1" "$dev2"
| [ 0:00] ## Line: 45 	 cleanup_lvs
| [ 0:00] ## Line: 46 	 
| [ 0:00] ## Line: 47 	 # --
| [ 0:00] ## Line: 48 	 # Create mirror on one dev with mirrored log using --alloc anywhere, should fail
| [ 0:00] ## Line: 49 	 not lvcreate --type mirror -m 1 -l4 -n $lv1 --mirrorlog mirrored $vg --alloc anywhere "$dev1"
| [ 0:00] ## Line: 50 	 cleanup_lvs
| [ 0:00] ## Line: 51 	 
| [ 0:00] ## Line: 52 	 vgremove -ff $vg
| [ 0:00] aux teardown
| [ 0:00] #lvcreate-operation.sh:1+ aux teardown
| [ 0:00] ## teardown.........ok
###       failed: [ndev-vanilla] shell/lvcreate-operation.sh

| [ 0:00] Library version:   1.02.146 (2017-12-18)
| [ 0:00] Driver version:    4.35.0
| [ 0:00] Kernel is Linux localhost.localdomain 3.10.0-693.11.1.el7.x86_64 #1 SMP Mon Dec 4 23:52:40 UTC 2017 x86_64 GNU/Linux
| [ 0:00] Selinux mode is not installed.
| [ 0:00]               total        used        free      shared  buff/cache   available
| [ 0:00] Mem:           7822        1079        4147          10        2595        6436
| [ 0:00] Swap:          4095           0        4095
| [ 0:00] Filesystem      Size  Used Avail Use% Mounted on
| [ 0:00] /dev/sdc1        18G  8.4G  8.4G  50% /
| [ 0:00] /dev/sdd1        51G  6.1G   43G  13% /lfskernel
| [ 0:00] devtmpfs        3.9G     0  3.9G   0% /dev
| [ 0:00] tmpfs           3.9G     0  3.9G   0% /run
| [ 0:00] @TESTDIR=/tmp/LVMTEST4717.eogNT2tJrP
| [ 0:00] @PREFIX=LVMTEST4717
| [ 0:00] ## LVMCONF: activation {
| [ 0:00] ## LVMCONF:     checks = 1
| [ 0:00] ## LVMCONF:     monitoring = 0
| [ 0:00] ## LVMCONF:     polling_interval = 1
| [ 0:00] ## LVMCONF:     raid_region_size = 512
| [ 0:00] ## LVMCONF:     retry_deactivation = 1
| [ 0:00] ## LVMCONF:     snapshot_autoextend_percent = 50
| [ 0:00] ## LVMCONF:     snapshot_autoextend_threshold = 50
| [ 0:00] ## LVMCONF:     udev_rules = 1
| [ 0:00] ## LVMCONF:     udev_sync = 1
| [ 0:00] ## LVMCONF:     verify_udev_operations = 1
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: allocation {
| [ 0:00] ## LVMCONF:     wipe_signatures_when_zeroing_new_lvs = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: backup {
| [ 0:00] ## LVMCONF:     archive = 0
| [ 0:00] ## LVMCONF:     backup = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: devices {
| [ 0:00] ## LVMCONF:     cache_dir = "@TESTDIR@/etc"
| [ 0:00] ## LVMCONF:     default_data_alignment = 1
| [ 0:00] ## LVMCONF:     dir = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     filter = "a|.*|"
| [ 0:00] ## LVMCONF:     global_filter = [ "a|@TESTDIR@/dev/mapper/@PREFIX@.*pv[0-9_]*$|", "r|.*|" ]
| [ 0:00] ## LVMCONF:     md_component_detection  = 0
| [ 0:00] ## LVMCONF:     scan = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     sysfs_scan = 1
| [ 0:00] ## LVMCONF:     write_cache_state = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: dmeventd {
| [ 0:00] ## LVMCONF:     executable = "/sources/boot/LVM2.2.02.177/test/lib/dmeventd"
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: global {
| [ 0:00] ## LVMCONF:     abort_on_internal_errors = 1
| [ 0:00] ## LVMCONF:     cache_check_executable = "/usr/sbin/cache_check"
| [ 0:00] ## LVMCONF:     cache_dump_executable = "/usr/sbin/cache_dump"
| [ 0:00] ## LVMCONF:     cache_repair_executable = "/usr/sbin/cache_repair"
| [ 0:00] ## LVMCONF:     detect_internal_vg_cache_corruption = 1
| [ 0:00] ## LVMCONF:     fallback_to_local_locking = 0
| [ 0:00] ## LVMCONF:     fsadm_executable = "/sources/boot/LVM2.2.02.177/test/lib/fsadm"
| [ 0:00] ## LVMCONF:     library_dir = "@TESTDIR@/lib"
| [ 0:00] ## LVMCONF:     locking_dir = "@TESTDIR@/var/lock/lvm"
| [ 0:00] ## LVMCONF:     locking_type=1
| [ 0:00] ## LVMCONF:     notify_dbus = 0
| [ 0:00] ## LVMCONF:     si_unit_consistency = 1
| [ 0:00] ## LVMCONF:     thin_check_executable = "/usr/sbin/thin_check"
| [ 0:00] ## LVMCONF:     thin_dump_executable = "/usr/sbin/thin_dump"
| [ 0:00] ## LVMCONF:     thin_repair_executable = "/usr/sbin/thin_repair"
| [ 0:00] ## LVMCONF:     use_lvmetad = 0
| [ 0:00] ## LVMCONF:     use_lvmlockd = 0
| [ 0:00] ## LVMCONF:     use_lvmpolld = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: log {
| [ 0:00] ## LVMCONF:     activation = 1
| [ 0:00] ## LVMCONF:     file = "@TESTDIR@/debug.log"
| [ 0:00] ## LVMCONF:     indent = 1
| [ 0:00] ## LVMCONF:     level = 9
| [ 0:00] ## LVMCONF:     overwrite = 1
| [ 0:00] ## LVMCONF:     syslog = 0
| [ 0:00] ## LVMCONF:     verbose = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] <======== Processing test: "lvcreate-pvtags.sh" ========>
| [ 0:00] 
| [ 0:00] aux prepare_pvs 3
| [ 0:00] #lvcreate-pvtags.sh:18+ aux prepare_pvs 3
| [ 0:00] ## preparing loop device....ok (/dev/loop0)
| [ 0:00] ## preparing 3 devices...lib/utils: line 212: DM_UDEV_COOKIE: unbound variable
| [ 0:00] set +vx; STACKTRACE; set -vx
| [ 0:00] ##lvcreate-pvtags.sh:18+ set +vx
| [ 0:00] ## - /lfskernel/sources/boot/LVM2.2.02.177/test/shell/lvcreate-pvtags.sh:18
| [ 0:00] ## 1 STACKTRACE() called from /lfskernel/sources/boot/LVM2.2.02.177/test/shell/lvcreate-pvtags.sh:18
| [ 0:00] <======== Info ========>
| [ 0:00] ## DMINFO:   Name             Maj Min Stat Open Targ Event  UUID                                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv3   253   4 L--w    0    1      0 TEST-@PREFIX@pv3                                                 
| [ 0:00] ## DMINFO:   @PREFIX@pv2   253   3 L--w    0    1      0 TEST-@PREFIX@pv2                                                 
| [ 0:00] ## DMINFO:   @PREFIX@pv1   253   5 L--w    0    1      0 TEST-@PREFIX@pv1                                                 
| [ 0:00] <======== Active table ========>
| [ 0:00] ## DMTABLE:  @PREFIX@pv3: 0 69632 linear 7:0 141312
| [ 0:00] ## DMTABLE:  @PREFIX@pv2: 0 69632 linear 7:0 71680
| [ 0:00] ## DMTABLE:  @PREFIX@pv1: 0 69632 linear 7:0 2048
| [ 0:00] <======== Inactive table ========>
| [ 0:00] ## DMITABLE: @PREFIX@pv3: 
| [ 0:00] ## DMITABLE: @PREFIX@pv2: 
| [ 0:00] ## DMITABLE: @PREFIX@pv1: 
| [ 0:00] <======== Status ========>
| [ 0:00] ## DMSTATUS: @PREFIX@pv3: 0 69632 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv2: 0 69632 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv1: 0 69632 linear 
| [ 0:00] <======== Tree ========>
| [ 0:00] ## DMTREE:   @PREFIX@pv3 (253:4)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   @PREFIX@pv2 (253:3)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   @PREFIX@pv1 (253:5)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   LFS_vg-lfs (253:2)
| [ 0:00] ## DMTREE:    `- (8:16)
| [ 0:00] ## DMTREE:   centos-swap (253:1)
| [ 0:00] ## DMTREE:    `- (8:2)
| [ 0:00] ## DMTREE:   centos-root (253:0)
| [ 0:00] ## DMTREE:    `- (8:2)
| [ 0:00] <======== Recursive list of @TESTDIR@/dev ========>
| [ 0:00] ## LSLR:	@TESTDIR@/dev:
| [ 0:00] ## LSLR:	total 4
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 0 Feb 21 02:27 loop0
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 1 Feb 21 02:27 loop1
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 2 Feb 21 02:27 loop2
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 3 Feb 21 02:27 loop3
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 4 Feb 21 02:27 loop4
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 5 Feb 21 02:27 loop5
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 6 Feb 21 02:27 loop6
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 7 Feb 21 02:27 loop7
| [ 0:00] ## LSLR:	drwxr-xr-x 2 root root 4096 Feb 21 02:27 mapper
| [ 0:00] ## LSLR:	crw-r--r-- 1 root root 1, 3 Feb 21 02:27 testnull
| [ 0:00] ## LSLR:	
| [ 0:00] ## LSLR:	@TESTDIR@/dev/mapper:
| [ 0:00] ## LSLR:	total 0
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   5 Feb 21 02:27 @PREFIX@pv1
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   3 Feb 21 02:27 @PREFIX@pv2
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   4 Feb 21 02:27 @PREFIX@pv3
| [ 0:00] ## LSLR:	crw------- 1 root root  10, 236 Feb 21 02:27 control
| [ 0:00] <======== Udev DB content ========>
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-0
| [ 0:00] ## UDEV:	N: dm-0
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-0
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-0
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=0
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-1
| [ 0:00] ## UDEV:	N: dm-1
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-1
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-1
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=1
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-2
| [ 0:00] ## UDEV:	N: dm-2
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-2
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-2
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=2
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-3
| [ 0:00] ## UDEV:	N: dm-3
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-3
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-3
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=3
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-4
| [ 0:00] ## UDEV:	N: dm-4
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-4
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-4
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=4
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-5
| [ 0:00] ## UDEV:	N: dm-5
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-5
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-5
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=5
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/loop0
| [ 0:00] ## UDEV:	N: loop0
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/loop0
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/loop0
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=7
| [ 0:00] ## UDEV:	E: MINOR=0
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] <======== Script file "lvcreate-pvtags.sh" ========>
| [ 0:00] ## Line: 1 	 #!/usr/bin/env bash
| [ 0:00] ## Line: 2 	 
| [ 0:00] ## Line: 3 	 # Copyright (C) 2008 Red Hat, Inc. All rights reserved.
| [ 0:00] ## Line: 4 	 #
| [ 0:00] ## Line: 5 	 # This copyrighted material is made available to anyone wishing to use,
| [ 0:00] ## Line: 6 	 # modify, copy, or redistribute it subject to the terms and conditions
| [ 0:00] ## Line: 7 	 # of the GNU General Public License v.2.
| [ 0:00] ## Line: 8 	 #
| [ 0:00] ## Line: 9 	 # You should have received a copy of the GNU General Public License
| [ 0:00] ## Line: 10 	 # along with this program; if not, write to the Free Software Foundation,
| [ 0:00] ## Line: 11 	 # Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA
| [ 0:00] ## Line: 12 	 
| [ 0:00] ## Line: 13 	 SKIP_WITH_LVMLOCKD=1
| [ 0:00] ## Line: 14 	 SKIP_WITH_LVMPOLLD=1
| [ 0:00] ## Line: 15 	 
| [ 0:00] ## Line: 16 	 . lib/inittest
| [ 0:00] ## Line: 17 	 
| [ 0:00] ## Line: 18 	 aux prepare_pvs 3
| [ 0:00] ## Line: 19 	 get_devs
| [ 0:00] ## Line: 20 	 
| [ 0:00] ## Line: 21 	 aux lvmconf 'allocation/maximise_cling = 0' \
| [ 0:00] ## Line: 22 	 	    'allocation/mirror_logs_require_separate_pvs = 1'
| [ 0:00] ## Line: 23 	 
| [ 0:00] ## Line: 24 	 # not required, just testing
| [ 0:00] ## Line: 25 	 aux pvcreate --metadatacopies 0 "$dev1"
| [ 0:00] ## Line: 26 	 
| [ 0:00] ## Line: 27 	 vgcreate "$vg" "${DEVICES[@]}"
| [ 0:00] ## Line: 28 	 pvchange --addtag fast "${DEVICES[@]}"
| [ 0:00] ## Line: 29 	 
| [ 0:00] ## Line: 30 	 # 3 stripes with 3 PVs (selected by tag, @fast) is fine
| [ 0:00] ## Line: 31 	 lvcreate -l3 -i3 $vg @fast
| [ 0:00] ## Line: 32 	 
| [ 0:00] ## Line: 33 	 # too many stripes(4) for 3 PVs
| [ 0:00] ## Line: 34 	 not lvcreate -l4 -i4 $vg @fast
| [ 0:00] ## Line: 35 	 
| [ 0:00] ## Line: 36 	 # 2 stripes is too many with just one PV
| [ 0:00] ## Line: 37 	 not lvcreate -l2 -i2 $vg "$DM_DEV_DIR/mapper/pv1"
| [ 0:00] ## Line: 38 	 
| [ 0:00] ## Line: 39 	 # lvcreate mirror
| [ 0:00] ## Line: 40 	 lvcreate -aey -l1 --type mirror -m1 --nosync $vg @fast
| [ 0:00] ## Line: 41 	 
| [ 0:00] ## Line: 42 	 # lvcreate mirror w/corelog
| [ 0:00] ## Line: 43 	 lvcreate -aey -l1 --type mirror -m2 --corelog --nosync $vg @fast
| [ 0:00] ## Line: 44 	 
| [ 0:00] ## Line: 45 	 # lvcreate mirror w/no free PVs
| [ 0:00] ## Line: 46 	 not lvcreate -aey -l1 --type mirror -m2 $vg @fast
| [ 0:00] ## Line: 47 	 
| [ 0:00] ## Line: 48 	 # lvcreate mirror (corelog, w/no free PVs)
| [ 0:00] ## Line: 49 	 not lvcreate -aey -l1 --type mirror -m3 --corelog $vg @fast
| [ 0:00] ## Line: 50 	 
| [ 0:00] ## Line: 51 	 # lvcreate mirror with a single PV arg
| [ 0:00] ## Line: 52 	 not lvcreate -aey -l1 --type mirror -m1 --corelog $vg "$dev1"
| [ 0:00] ## Line: 53 	 
| [ 0:00] ## Line: 54 	 vgremove -ff $vg
| [ 0:00] aux teardown
| [ 0:00] #lvcreate-pvtags.sh:1+ aux teardown
| [ 0:00] ## teardown.........ok
###       failed: [ndev-vanilla] shell/lvcreate-pvtags.sh
###      skipped: [ndev-vanilla] shell/lvcreate-raid-nosync.sh
###      skipped: [ndev-vanilla] shell/lvcreate-raid.sh
###      skipped: [ndev-vanilla] shell/lvcreate-raid10.sh

| [ 0:00] Library version:   1.02.146 (2017-12-18)
| [ 0:00] Driver version:    4.35.0
| [ 0:00] Kernel is Linux localhost.localdomain 3.10.0-693.11.1.el7.x86_64 #1 SMP Mon Dec 4 23:52:40 UTC 2017 x86_64 GNU/Linux
| [ 0:00] Selinux mode is not installed.
| [ 0:00]               total        used        free      shared  buff/cache   available
| [ 0:00] Mem:           7822        1079        4147          10        2595        6436
| [ 0:00] Swap:          4095           0        4095
| [ 0:00] Filesystem      Size  Used Avail Use% Mounted on
| [ 0:00] /dev/sdc1        18G  8.4G  8.4G  50% /
| [ 0:00] /dev/sdd1        51G  6.1G   43G  13% /lfskernel
| [ 0:00] devtmpfs        3.9G     0  3.9G   0% /dev
| [ 0:00] tmpfs           3.9G     0  3.9G   0% /run
| [ 0:00] @TESTDIR=/tmp/LVMTEST5108.FkzAdPFnuu
| [ 0:00] @PREFIX=LVMTEST5108
| [ 0:00] ## LVMCONF: activation {
| [ 0:00] ## LVMCONF:     checks = 1
| [ 0:00] ## LVMCONF:     monitoring = 0
| [ 0:00] ## LVMCONF:     polling_interval = 1
| [ 0:00] ## LVMCONF:     raid_region_size = 512
| [ 0:00] ## LVMCONF:     retry_deactivation = 1
| [ 0:00] ## LVMCONF:     snapshot_autoextend_percent = 50
| [ 0:00] ## LVMCONF:     snapshot_autoextend_threshold = 50
| [ 0:00] ## LVMCONF:     udev_rules = 1
| [ 0:00] ## LVMCONF:     udev_sync = 1
| [ 0:00] ## LVMCONF:     verify_udev_operations = 1
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: allocation {
| [ 0:00] ## LVMCONF:     wipe_signatures_when_zeroing_new_lvs = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: backup {
| [ 0:00] ## LVMCONF:     archive = 0
| [ 0:00] ## LVMCONF:     backup = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: devices {
| [ 0:00] ## LVMCONF:     cache_dir = "@TESTDIR@/etc"
| [ 0:00] ## LVMCONF:     default_data_alignment = 1
| [ 0:00] ## LVMCONF:     dir = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     filter = "a|.*|"
| [ 0:00] ## LVMCONF:     global_filter = [ "a|@TESTDIR@/dev/mapper/@PREFIX@.*pv[0-9_]*$|", "r|.*|" ]
| [ 0:00] ## LVMCONF:     md_component_detection  = 0
| [ 0:00] ## LVMCONF:     scan = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     sysfs_scan = 1
| [ 0:00] ## LVMCONF:     write_cache_state = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: dmeventd {
| [ 0:00] ## LVMCONF:     executable = "/sources/boot/LVM2.2.02.177/test/lib/dmeventd"
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: global {
| [ 0:00] ## LVMCONF:     abort_on_internal_errors = 1
| [ 0:00] ## LVMCONF:     cache_check_executable = "/usr/sbin/cache_check"
| [ 0:00] ## LVMCONF:     cache_dump_executable = "/usr/sbin/cache_dump"
| [ 0:00] ## LVMCONF:     cache_repair_executable = "/usr/sbin/cache_repair"
| [ 0:00] ## LVMCONF:     detect_internal_vg_cache_corruption = 1
| [ 0:00] ## LVMCONF:     fallback_to_local_locking = 0
| [ 0:00] ## LVMCONF:     fsadm_executable = "/sources/boot/LVM2.2.02.177/test/lib/fsadm"
| [ 0:00] ## LVMCONF:     library_dir = "@TESTDIR@/lib"
| [ 0:00] ## LVMCONF:     locking_dir = "@TESTDIR@/var/lock/lvm"
| [ 0:00] ## LVMCONF:     locking_type=1
| [ 0:00] ## LVMCONF:     notify_dbus = 0
| [ 0:00] ## LVMCONF:     si_unit_consistency = 1
| [ 0:00] ## LVMCONF:     thin_check_executable = "/usr/sbin/thin_check"
| [ 0:00] ## LVMCONF:     thin_dump_executable = "/usr/sbin/thin_dump"
| [ 0:00] ## LVMCONF:     thin_repair_executable = "/usr/sbin/thin_repair"
| [ 0:00] ## LVMCONF:     use_lvmetad = 0
| [ 0:00] ## LVMCONF:     use_lvmlockd = 0
| [ 0:00] ## LVMCONF:     use_lvmpolld = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: log {
| [ 0:00] ## LVMCONF:     activation = 1
| [ 0:00] ## LVMCONF:     file = "@TESTDIR@/debug.log"
| [ 0:00] ## LVMCONF:     indent = 1
| [ 0:00] ## LVMCONF:     level = 9
| [ 0:00] ## LVMCONF:     overwrite = 1
| [ 0:00] ## LVMCONF:     syslog = 0
| [ 0:00] ## LVMCONF:     verbose = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] <======== Processing test: "lvcreate-repair.sh" ========>
| [ 0:00] 
| [ 0:00] aux prepare_vg 3
| [ 0:00] #lvcreate-repair.sh:18+ aux prepare_vg 3
| [ 0:00] ## preparing loop device....ok (/dev/loop0)
| [ 0:00] ## preparing 3 devices...lib/utils: line 212: DM_UDEV_COOKIE: unbound variable
| [ 0:00] set +vx; STACKTRACE; set -vx
| [ 0:00] ##lvcreate-repair.sh:18+ set +vx
| [ 0:00] ## - /lfskernel/sources/boot/LVM2.2.02.177/test/shell/lvcreate-repair.sh:18
| [ 0:00] ## 1 STACKTRACE() called from /lfskernel/sources/boot/LVM2.2.02.177/test/shell/lvcreate-repair.sh:18
| [ 0:00] <======== Info ========>
| [ 0:00] ## DMINFO:   Name             Maj Min Stat Open Targ Event  UUID                                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv3   253   3 L--w    0    1      0 TEST-@PREFIX@pv3                                                 
| [ 0:00] ## DMINFO:   @PREFIX@pv2   253   5 L--w    0    1      0 TEST-@PREFIX@pv2                                                 
| [ 0:00] ## DMINFO:   @PREFIX@pv1   253   4 L--w    0    1      0 TEST-@PREFIX@pv1                                                 
| [ 0:00] <======== Active table ========>
| [ 0:00] ## DMTABLE:  @PREFIX@pv3: 0 69632 linear 7:0 141312
| [ 0:00] ## DMTABLE:  @PREFIX@pv2: 0 69632 linear 7:0 71680
| [ 0:00] ## DMTABLE:  @PREFIX@pv1: 0 69632 linear 7:0 2048
| [ 0:00] <======== Inactive table ========>
| [ 0:00] ## DMITABLE: @PREFIX@pv3: 
| [ 0:00] ## DMITABLE: @PREFIX@pv2: 
| [ 0:00] ## DMITABLE: @PREFIX@pv1: 
| [ 0:00] <======== Status ========>
| [ 0:00] ## DMSTATUS: @PREFIX@pv3: 0 69632 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv2: 0 69632 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv1: 0 69632 linear 
| [ 0:00] <======== Tree ========>
| [ 0:00] ## DMTREE:   @PREFIX@pv3 (253:3)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   @PREFIX@pv2 (253:5)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   LFS_vg-lfs (253:2)
| [ 0:00] ## DMTREE:    `- (8:16)
| [ 0:00] ## DMTREE:   @PREFIX@pv1 (253:4)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   centos-swap (253:1)
| [ 0:00] ## DMTREE:    `- (8:2)
| [ 0:00] ## DMTREE:   centos-root (253:0)
| [ 0:00] ## DMTREE:    `- (8:2)
| [ 0:00] <======== Recursive list of @TESTDIR@/dev ========>
| [ 0:00] ## LSLR:	@TESTDIR@/dev:
| [ 0:00] ## LSLR:	total 4
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 0 Feb 21 02:27 loop0
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 1 Feb 21 02:27 loop1
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 2 Feb 21 02:27 loop2
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 3 Feb 21 02:27 loop3
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 4 Feb 21 02:27 loop4
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 5 Feb 21 02:27 loop5
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 6 Feb 21 02:27 loop6
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 7 Feb 21 02:27 loop7
| [ 0:00] ## LSLR:	drwxr-xr-x 2 root root 4096 Feb 21 02:27 mapper
| [ 0:00] ## LSLR:	crw-r--r-- 1 root root 1, 3 Feb 21 02:27 testnull
| [ 0:00] ## LSLR:	
| [ 0:00] ## LSLR:	@TESTDIR@/dev/mapper:
| [ 0:00] ## LSLR:	total 0
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   4 Feb 21 02:27 @PREFIX@pv1
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   5 Feb 21 02:27 @PREFIX@pv2
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   3 Feb 21 02:27 @PREFIX@pv3
| [ 0:00] ## LSLR:	crw------- 1 root root  10, 236 Feb 21 02:27 control
| [ 0:00] <======== Udev DB content ========>
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-0
| [ 0:00] ## UDEV:	N: dm-0
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-0
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-0
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=0
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-1
| [ 0:00] ## UDEV:	N: dm-1
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-1
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-1
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=1
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-2
| [ 0:00] ## UDEV:	N: dm-2
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-2
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-2
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=2
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-3
| [ 0:00] ## UDEV:	N: dm-3
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-3
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-3
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=3
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-4
| [ 0:00] ## UDEV:	N: dm-4
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-4
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-4
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=4
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-5
| [ 0:00] ## UDEV:	N: dm-5
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-5
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-5
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=5
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/loop0
| [ 0:00] ## UDEV:	N: loop0
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/loop0
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/loop0
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=7
| [ 0:00] ## UDEV:	E: MINOR=0
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] <======== Script file "lvcreate-repair.sh" ========>
| [ 0:00] ## Line: 1 	 #!/usr/bin/env bash
| [ 0:00] ## Line: 2 	 
| [ 0:00] ## Line: 3 	 # Copyright (C) 2011-2012 Red Hat, Inc. All rights reserved.
| [ 0:00] ## Line: 4 	 #
| [ 0:00] ## Line: 5 	 # This copyrighted material is made available to anyone wishing to use,
| [ 0:00] ## Line: 6 	 # modify, copy, or redistribute it subject to the terms and conditions
| [ 0:00] ## Line: 7 	 # of the GNU General Public License v.2.
| [ 0:00] ## Line: 8 	 #
| [ 0:00] ## Line: 9 	 # You should have received a copy of the GNU General Public License
| [ 0:00] ## Line: 10 	 # along with this program; if not, write to the Free Software Foundation,
| [ 0:00] ## Line: 11 	 # Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA
| [ 0:00] ## Line: 12 	 
| [ 0:00] ## Line: 13 	 SKIP_WITH_LVMLOCKD=1
| [ 0:00] ## Line: 14 	 SKIP_WITH_LVMPOLLD=1
| [ 0:00] ## Line: 15 	 
| [ 0:00] ## Line: 16 	 . lib/inittest
| [ 0:00] ## Line: 17 	 
| [ 0:00] ## Line: 18 	 aux prepare_vg 3
| [ 0:00] ## Line: 19 	 
| [ 0:00] ## Line: 20 	 # fail multiple devices
| [ 0:00] ## Line: 21 	 for i in "$dev1" "$dev2" "$dev3" ; do
| [ 0:00] ## Line: 22 	 	for j in "$dev2" "$dev3" ; do
| [ 0:00] ## Line: 23 	 		if test "$i" = "$j" ; then continue ; fi
| [ 0:00] ## Line: 24 	 
| [ 0:00] ## Line: 25 	 		vgremove -ff $vg
| [ 0:00] ## Line: 26 	 		vgcreate $vg "$dev1" "$dev2" "$dev3"
| [ 0:00] ## Line: 27 	 		# exit 1
| [ 0:00] ## Line: 28 	 
| [ 0:00] ## Line: 29 	 		lvcreate -l1 -n $lv1 $vg "$dev1"
| [ 0:00] ## Line: 30 	 
| [ 0:00] ## Line: 31 	 		aux disable_dev "$i" "$j"
| [ 0:00] ## Line: 32 	 
| [ 0:00] ## Line: 33 	 		vgreduce --removemissing --force $vg
| [ 0:00] ## Line: 34 	 
| [ 0:00] ## Line: 35 	 		# check if reduced device was removed
| [ 0:00] ## Line: 36 	 		test "$i" = "$dev1" && dm_table | not grep -E "$vg-$lv1: *[^ ]+"
| [ 0:00] ## Line: 37 	 
| [ 0:00] ## Line: 38 	 		lvcreate -l1 -n $lv2 $vg
| [ 0:00] ## Line: 39 	 
| [ 0:00] ## Line: 40 	 		test "$i" != "$dev1" && check lv_exists $vg $lv1
| [ 0:00] ## Line: 41 	 		check lv_exists $vg $lv2
| [ 0:00] ## Line: 42 	 
| [ 0:00] ## Line: 43 	 		aux enable_dev "$i" "$j"
| [ 0:00] ## Line: 44 	 		vgscan
| [ 0:00] ## Line: 45 	 
| [ 0:00] ## Line: 46 	 		test "$i" != "$dev1" && check lv_exists $vg $lv1
| [ 0:00] ## Line: 47 	 		check lv_exists $vg $lv2
| [ 0:00] ## Line: 48 	 	done
| [ 0:00] ## Line: 49 	 done
| [ 0:00] ## Line: 50 	 
| [ 0:00] ## Line: 51 	 vgremove -ff $vg
| [ 0:00] ## Line: 52 	 vgcreate $vg "$dev1" "$dev2" "$dev3"
| [ 0:00] ## Line: 53 	 
| [ 0:00] ## Line: 54 	 # use tricky 'dd'
| [ 0:00] ## Line: 55 	 for i in "$dev1" "$dev2" "$dev3" ; do
| [ 0:00] ## Line: 56 	 	for j in "$dev2" "$dev3" ; do
| [ 0:00] ## Line: 57 	 
| [ 0:00] ## Line: 58 	 		if test "$i" = "$j" ; then continue ; fi
| [ 0:00] ## Line: 59 	 
| [ 0:00] ## Line: 60 	 		dd if="$i" of=backup_i bs=256K count=1
| [ 0:00] ## Line: 61 	 		dd if="$j" of=backup_j bs=256K count=1
| [ 0:00] ## Line: 62 	 
| [ 0:00] ## Line: 63 	 		lvcreate -l1 -n $lv1 $vg "$dev1"
| [ 0:00] ## Line: 64 	 
| [ 0:00] ## Line: 65 	 		dd if=backup_j of="$j" bs=256K count=1
| [ 0:00] ## Line: 66 	 		dd if=backup_i of="$i" bs=256K count=1
| [ 0:00] ## Line: 67 	 
| [ 0:00] ## Line: 68 	 		check lv_exists $vg $lv1
| [ 0:00] ## Line: 69 	 		# mda should be now consistent
| [ 0:00] ## Line: 70 	 		lvremove -f $vg/$lv1
| [ 0:00] ## Line: 71 	 	done
| [ 0:00] ## Line: 72 	 done
| [ 0:00] ## Line: 73 	 
| [ 0:00] ## Line: 74 	 
| [ 0:00] ## Line: 75 	 # confuse lvm with active LV left behind
| [ 0:00] ## Line: 76 	 dd if="$dev1" of=backup_i bs=256K count=1
| [ 0:00] ## Line: 77 	 dd if="$dev2" of=backup_j bs=256K count=1
| [ 0:00] ## Line: 78 	 
| [ 0:00] ## Line: 79 	 lvcreate -l1 $vg "$dev1"
| [ 0:00] ## Line: 80 	 
| [ 0:00] ## Line: 81 	 dd if=backup_j of="$dev2" bs=256K count=1
| [ 0:00] ## Line: 82 	 dd if=backup_i of="$dev1" bs=256K count=1
| [ 0:00] ## Line: 83 	 
| [ 0:00] ## Line: 84 	 # CHECKME: following command writes here:
| [ 0:00] ## Line: 85 	 # vgreduce --removemissing --force $vg
| [ 0:00] ## Line: 86 	 #
| [ 0:00] ## Line: 87 	 # WARNING: Inconsistent metadata found for VG LVMTESTvg - updating to use version 2
| [ 0:00] ## Line: 88 	 # Volume group "LVMTESTvg" is already consistent
| [ 0:00] ## Line: 89 	 
| [ 0:00] ## Line: 90 	 # dirty game
| [ 0:00] ## Line: 91 	 dd if=/dev/zero of="$dev3" bs=256K count=1
| [ 0:00] ## Line: 92 	 aux notify_lvmetad "$dev3" # udev be watching you
| [ 0:00] ## Line: 93 	 
| [ 0:00] ## Line: 94 	 vgreduce --removemissing --force $vg
| [ 0:00] ## Line: 95 	 
| [ 0:00] ## Line: 96 	 # FIXME: here is LV1 left active - but metadata does not know about it
| [ 0:00] ## Line: 97 	 # and lvcreate does not check whether such device exists in the table
| [ 0:00] ## Line: 98 	 # so it ends with: 
| [ 0:00] ## Line: 99 	 #
| [ 0:00] ## Line: 100 	 # device-mapper: create ioctl failed: Device or resource busy
| [ 0:00] ## Line: 101 	 # Failed to activate new LV.
| [ 0:00] ## Line: 102 	 
| [ 0:00] ## Line: 103 	 should lvcreate -l1 $vg "$dev1"
| [ 0:00] ## Line: 104 	 should not dmsetup remove ${vg}-lvol0
| [ 0:00] ## Line: 105 	 
| [ 0:00] ## Line: 106 	 vgremove -ff $vg
| [ 0:00] aux teardown
| [ 0:00] #lvcreate-repair.sh:1+ aux teardown
| [ 0:00] ## teardown.........ok
###       failed: [ndev-vanilla] shell/lvcreate-repair.sh

| [ 0:00] Library version:   1.02.146 (2017-12-18)
| [ 0:00] Driver version:    4.35.0
| [ 0:00] Kernel is Linux localhost.localdomain 3.10.0-693.11.1.el7.x86_64 #1 SMP Mon Dec 4 23:52:40 UTC 2017 x86_64 GNU/Linux
| [ 0:00] Selinux mode is not installed.
| [ 0:00]               total        used        free      shared  buff/cache   available
| [ 0:00] Mem:           7822        1079        4147          10        2595        6436
| [ 0:00] Swap:          4095           0        4095
| [ 0:00] Filesystem      Size  Used Avail Use% Mounted on
| [ 0:00] /dev/sdc1        18G  8.4G  8.4G  50% /
| [ 0:00] /dev/sdd1        51G  6.1G   43G  13% /lfskernel
| [ 0:00] devtmpfs        3.9G     0  3.9G   0% /dev
| [ 0:00] tmpfs           3.9G     0  3.9G   0% /run
| [ 0:00] @TESTDIR=/tmp/LVMTEST5298.q76om01BYX
| [ 0:00] @PREFIX=LVMTEST5298
| [ 0:00] ## LVMCONF: activation {
| [ 0:00] ## LVMCONF:     checks = 1
| [ 0:00] ## LVMCONF:     monitoring = 0
| [ 0:00] ## LVMCONF:     polling_interval = 1
| [ 0:00] ## LVMCONF:     raid_region_size = 512
| [ 0:00] ## LVMCONF:     retry_deactivation = 1
| [ 0:00] ## LVMCONF:     snapshot_autoextend_percent = 50
| [ 0:00] ## LVMCONF:     snapshot_autoextend_threshold = 50
| [ 0:00] ## LVMCONF:     udev_rules = 1
| [ 0:00] ## LVMCONF:     udev_sync = 1
| [ 0:00] ## LVMCONF:     verify_udev_operations = 1
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: allocation {
| [ 0:00] ## LVMCONF:     wipe_signatures_when_zeroing_new_lvs = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: backup {
| [ 0:00] ## LVMCONF:     archive = 0
| [ 0:00] ## LVMCONF:     backup = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: devices {
| [ 0:00] ## LVMCONF:     cache_dir = "@TESTDIR@/etc"
| [ 0:00] ## LVMCONF:     default_data_alignment = 1
| [ 0:00] ## LVMCONF:     dir = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     filter = "a|.*|"
| [ 0:00] ## LVMCONF:     global_filter = [ "a|@TESTDIR@/dev/mapper/@PREFIX@.*pv[0-9_]*$|", "r|.*|" ]
| [ 0:00] ## LVMCONF:     md_component_detection  = 0
| [ 0:00] ## LVMCONF:     scan = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     sysfs_scan = 1
| [ 0:00] ## LVMCONF:     write_cache_state = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: dmeventd {
| [ 0:00] ## LVMCONF:     executable = "/sources/boot/LVM2.2.02.177/test/lib/dmeventd"
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: global {
| [ 0:00] ## LVMCONF:     abort_on_internal_errors = 1
| [ 0:00] ## LVMCONF:     cache_check_executable = "/usr/sbin/cache_check"
| [ 0:00] ## LVMCONF:     cache_dump_executable = "/usr/sbin/cache_dump"
| [ 0:00] ## LVMCONF:     cache_repair_executable = "/usr/sbin/cache_repair"
| [ 0:00] ## LVMCONF:     detect_internal_vg_cache_corruption = 1
| [ 0:00] ## LVMCONF:     fallback_to_local_locking = 0
| [ 0:00] ## LVMCONF:     fsadm_executable = "/sources/boot/LVM2.2.02.177/test/lib/fsadm"
| [ 0:00] ## LVMCONF:     library_dir = "@TESTDIR@/lib"
| [ 0:00] ## LVMCONF:     locking_dir = "@TESTDIR@/var/lock/lvm"
| [ 0:00] ## LVMCONF:     locking_type=1
| [ 0:00] ## LVMCONF:     notify_dbus = 0
| [ 0:00] ## LVMCONF:     si_unit_consistency = 1
| [ 0:00] ## LVMCONF:     thin_check_executable = "/usr/sbin/thin_check"
| [ 0:00] ## LVMCONF:     thin_dump_executable = "/usr/sbin/thin_dump"
| [ 0:00] ## LVMCONF:     thin_repair_executable = "/usr/sbin/thin_repair"
| [ 0:00] ## LVMCONF:     use_lvmetad = 0
| [ 0:00] ## LVMCONF:     use_lvmlockd = 0
| [ 0:00] ## LVMCONF:     use_lvmpolld = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: log {
| [ 0:00] ## LVMCONF:     activation = 1
| [ 0:00] ## LVMCONF:     file = "@TESTDIR@/debug.log"
| [ 0:00] ## LVMCONF:     indent = 1
| [ 0:00] ## LVMCONF:     level = 9
| [ 0:00] ## LVMCONF:     overwrite = 1
| [ 0:00] ## LVMCONF:     syslog = 0
| [ 0:00] ## LVMCONF:     verbose = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] <======== Processing test: "lvcreate-signature-wiping.sh" ========>
| [ 0:00] 
| [ 0:00] init_lv_() {
| [ 0:00] 	mkswap "$DM_DEV_DIR/$vg/$lv1"
| [ 0:00] }
| [ 0:00] 
| [ 0:00] test_blkid_() {
| [ 0:00] 	local type
| [ 0:00] 	type=$(blkid -s TYPE -o value -c /dev/null "$DM_DEV_DIR/$vg/$lv1")
| [ 0:00] 	test "$type" = "swap"
| [ 0:00] }
| [ 0:00] 
| [ 0:00] test_msg_() {
| [ 0:00] 	grep "Wiping swap signature" out
| [ 0:00] }
| [ 0:00] 
| [ 0:00] aux prepare_vg
| [ 0:00] #lvcreate-signature-wiping.sh:34+ aux prepare_vg
| [ 0:00] ## preparing loop device....ok (/dev/loop0)
| [ 0:00] ## preparing 3 devices...lib/utils: line 212: DM_UDEV_COOKIE: unbound variable
| [ 0:00] set +vx; STACKTRACE; set -vx
| [ 0:00] ##lvcreate-signature-wiping.sh:34+ set +vx
| [ 0:00] ## - /lfskernel/sources/boot/LVM2.2.02.177/test/shell/lvcreate-signature-wiping.sh:34
| [ 0:00] ## 1 STACKTRACE() called from /lfskernel/sources/boot/LVM2.2.02.177/test/shell/lvcreate-signature-wiping.sh:34
| [ 0:00] <======== Info ========>
| [ 0:00] ## DMINFO:   Name             Maj Min Stat Open Targ Event  UUID                                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv3   253   3 L--w    0    1      0 TEST-@PREFIX@pv3                                                 
| [ 0:00] ## DMINFO:   @PREFIX@pv2   253   5 L--w    0    1      0 TEST-@PREFIX@pv2                                                 
| [ 0:00] ## DMINFO:   @PREFIX@pv1   253   4 L--w    0    1      0 TEST-@PREFIX@pv1                                                 
| [ 0:00] <======== Active table ========>
| [ 0:00] ## DMTABLE:  @PREFIX@pv3: 0 69632 linear 7:0 141312
| [ 0:00] ## DMTABLE:  @PREFIX@pv2: 0 69632 linear 7:0 71680
| [ 0:00] ## DMTABLE:  @PREFIX@pv1: 0 69632 linear 7:0 2048
| [ 0:00] <======== Inactive table ========>
| [ 0:00] ## DMITABLE: @PREFIX@pv3: 
| [ 0:00] ## DMITABLE: @PREFIX@pv2: 
| [ 0:00] ## DMITABLE: @PREFIX@pv1: 
| [ 0:00] <======== Status ========>
| [ 0:00] ## DMSTATUS: @PREFIX@pv3: 0 69632 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv2: 0 69632 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv1: 0 69632 linear 
| [ 0:00] <======== Tree ========>
| [ 0:00] ## DMTREE:   @PREFIX@pv3 (253:3)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   @PREFIX@pv2 (253:5)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   @PREFIX@pv1 (253:4)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   LFS_vg-lfs (253:2)
| [ 0:00] ## DMTREE:    `- (8:16)
| [ 0:00] ## DMTREE:   centos-swap (253:1)
| [ 0:00] ## DMTREE:    `- (8:2)
| [ 0:00] ## DMTREE:   centos-root (253:0)
| [ 0:00] ## DMTREE:    `- (8:2)
| [ 0:00] <======== Recursive list of @TESTDIR@/dev ========>
| [ 0:00] ## LSLR:	@TESTDIR@/dev:
| [ 0:00] ## LSLR:	total 4
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 0 Feb 21 02:27 loop0
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 1 Feb 21 02:27 loop1
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 2 Feb 21 02:27 loop2
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 3 Feb 21 02:27 loop3
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 4 Feb 21 02:27 loop4
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 5 Feb 21 02:27 loop5
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 6 Feb 21 02:27 loop6
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 7 Feb 21 02:27 loop7
| [ 0:00] ## LSLR:	drwxr-xr-x 2 root root 4096 Feb 21 02:27 mapper
| [ 0:00] ## LSLR:	crw-r--r-- 1 root root 1, 3 Feb 21 02:27 testnull
| [ 0:00] ## LSLR:	
| [ 0:00] ## LSLR:	@TESTDIR@/dev/mapper:
| [ 0:00] ## LSLR:	total 0
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   4 Feb 21 02:27 @PREFIX@pv1
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   5 Feb 21 02:27 @PREFIX@pv2
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   3 Feb 21 02:27 @PREFIX@pv3
| [ 0:00] ## LSLR:	crw------- 1 root root  10, 236 Feb 21 02:27 control
| [ 0:00] <======== Udev DB content ========>
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-0
| [ 0:00] ## UDEV:	N: dm-0
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-0
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-0
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=0
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-1
| [ 0:00] ## UDEV:	N: dm-1
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-1
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-1
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=1
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-2
| [ 0:00] ## UDEV:	N: dm-2
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-2
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-2
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=2
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-3
| [ 0:00] ## UDEV:	N: dm-3
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-3
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-3
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=3
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-4
| [ 0:00] ## UDEV:	N: dm-4
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-4
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-4
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=4
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-5
| [ 0:00] ## UDEV:	N: dm-5
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-5
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-5
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=5
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/loop0
| [ 0:00] ## UDEV:	N: loop0
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/loop0
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/loop0
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=7
| [ 0:00] ## UDEV:	E: MINOR=0
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] <======== Script file "lvcreate-signature-wiping.sh" ========>
| [ 0:00] ## Line: 1 	 #!/usr/bin/env bash
| [ 0:00] ## Line: 2 	 
| [ 0:00] ## Line: 3 	 # Copyright (C) 2013 Red Hat, Inc. All rights reserved.
| [ 0:00] ## Line: 4 	 #
| [ 0:00] ## Line: 5 	 # This copyrighted material is made available to anyone wishing to use,
| [ 0:00] ## Line: 6 	 # modify, copy, or redistribute it subject to the terms and conditions
| [ 0:00] ## Line: 7 	 # of the GNU General Public License v.2.
| [ 0:00] ## Line: 8 	 #
| [ 0:00] ## Line: 9 	 # You should have received a copy of the GNU General Public License
| [ 0:00] ## Line: 10 	 # along with this program; if not, write to the Free Software Foundation,
| [ 0:00] ## Line: 11 	 # Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA
| [ 0:00] ## Line: 12 	 
| [ 0:00] ## Line: 13 	 # 'Exercise signature wiping during lvcreate'
| [ 0:00] ## Line: 14 	 
| [ 0:00] ## Line: 15 	 SKIP_WITH_LVMLOCKD=1
| [ 0:00] ## Line: 16 	 SKIP_WITH_LVMPOLLD=1
| [ 0:00] ## Line: 17 	 
| [ 0:00] ## Line: 18 	 . lib/inittest
| [ 0:00] ## Line: 19 	 
| [ 0:00] ## Line: 20 	 init_lv_() {
| [ 0:00] ## Line: 21 	 	mkswap "$DM_DEV_DIR/$vg/$lv1"
| [ 0:00] ## Line: 22 	 }
| [ 0:00] ## Line: 23 	 
| [ 0:00] ## Line: 24 	 test_blkid_() {
| [ 0:00] ## Line: 25 	 	local type
| [ 0:00] ## Line: 26 	 	type=$(blkid -s TYPE -o value -c /dev/null "$DM_DEV_DIR/$vg/$lv1")
| [ 0:00] ## Line: 27 	 	test "$type" = "swap"
| [ 0:00] ## Line: 28 	 }
| [ 0:00] ## Line: 29 	 
| [ 0:00] ## Line: 30 	 test_msg_() {
| [ 0:00] ## Line: 31 	 	grep "Wiping swap signature" out
| [ 0:00] ## Line: 32 	 }
| [ 0:00] ## Line: 33 	 
| [ 0:00] ## Line: 34 	 aux prepare_vg
| [ 0:00] ## Line: 35 	 
| [ 0:00] ## Line: 36 	 # lvcreate wipes signatures when found on newly created LV - test this on "swap".
| [ 0:00] ## Line: 37 	 # Test all combinatios with -Z{y|n} and -W{y|n} and related lvm.conf settings.
| [ 0:00] ## Line: 38 	 
| [ 0:00] ## Line: 39 	 lvcreate -l1 -n $lv1 $vg
| [ 0:00] ## Line: 40 	 init_lv_
| [ 0:00] ## Line: 41 	 # This system has unusable blkid (does not recognize small swap, needs fix...)
| [ 0:00] ## Line: 42 	 test_blkid_ || skip
| [ 0:00] ## Line: 43 	 lvremove -f $vg/$lv1
| [ 0:00] ## Line: 44 	 
| [ 0:00] ## Line: 45 	 aux lvmconf "allocation/wipe_signatures_when_zeroing_new_lvs = 0"
| [ 0:00] ## Line: 46 	 
| [ 0:00] ## Line: 47 	 lvcreate -y -Zn -l1 -n $lv1 $vg 2>&1 | tee out
| [ 0:00] ## Line: 48 	 not test_msg_
| [ 0:00] ## Line: 49 	 test_blkid_
| [ 0:00] ## Line: 50 	 lvremove -f $vg/$lv1
| [ 0:00] ## Line: 51 	 
| [ 0:00] ## Line: 52 	 lvcreate -y -Zn -Wn -l1 -n $lv1 $vg 2>&1 | tee out
| [ 0:00] ## Line: 53 	 not test_msg_
| [ 0:00] ## Line: 54 	 test_blkid_
| [ 0:00] ## Line: 55 	 lvremove -f $vg/$lv1
| [ 0:00] ## Line: 56 	 
| [ 0:00] ## Line: 57 	 lvcreate -y -Zn -Wy -l1 -n $lv1 $vg 2>&1 | tee out
| [ 0:00] ## Line: 58 	 test_msg_
| [ 0:00] ## Line: 59 	 not test_blkid_
| [ 0:00] ## Line: 60 	 init_lv_
| [ 0:00] ## Line: 61 	 lvremove -f $vg/$lv1
| [ 0:00] ## Line: 62 	 
| [ 0:00] ## Line: 63 	 lvcreate -y -Zy -l1 -n $lv1 $vg 2>&1 | tee out
| [ 0:00] ## Line: 64 	 not test_msg_
| [ 0:00] ## Line: 65 	 not test_blkid_
| [ 0:00] ## Line: 66 	 init_lv_
| [ 0:00] ## Line: 67 	 lvremove -f $vg/$lv1
| [ 0:00] ## Line: 68 	 
| [ 0:00] ## Line: 69 	 lvcreate -y -Zy -Wn -l1 -n $lv1 $vg 2>&1 | tee out
| [ 0:00] ## Line: 70 	 not test_msg_
| [ 0:00] ## Line: 71 	 not test_blkid_
| [ 0:00] ## Line: 72 	 init_lv_
| [ 0:00] ## Line: 73 	 lvremove -f $vg/$lv1
| [ 0:00] ## Line: 74 	 
| [ 0:00] ## Line: 75 	 lvcreate -y -Zy -Wy -l1 -n $lv1 $vg 2>&1 | tee out
| [ 0:00] ## Line: 76 	 test_msg_
| [ 0:00] ## Line: 77 	 not test_blkid_
| [ 0:00] ## Line: 78 	 init_lv_
| [ 0:00] ## Line: 79 	 lvremove -f $vg/$lv1
| [ 0:00] ## Line: 80 	 
| [ 0:00] ## Line: 81 	 
| [ 0:00] ## Line: 82 	 aux lvmconf "allocation/wipe_signatures_when_zeroing_new_lvs = 1"
| [ 0:00] ## Line: 83 	 
| [ 0:00] ## Line: 84 	 lvcreate -y -Zn -l1 -n $lv1 $vg 2>&1 | tee out
| [ 0:00] ## Line: 85 	 not test_msg_
| [ 0:00] ## Line: 86 	 test_blkid_
| [ 0:00] ## Line: 87 	 lvremove -f $vg/$lv1
| [ 0:00] ## Line: 88 	 
| [ 0:00] ## Line: 89 	 lvcreate -y -Zn -Wn -l1 -n $lv1 $vg 2>&1 | tee out
| [ 0:00] ## Line: 90 	 not test_msg_
| [ 0:00] ## Line: 91 	 test_blkid_
| [ 0:00] ## Line: 92 	 lvremove -f $vg/$lv1
| [ 0:00] ## Line: 93 	 
| [ 0:00] ## Line: 94 	 lvcreate -y -Zn -Wy -l1 -n $lv1 $vg 2>&1 | tee out
| [ 0:00] ## Line: 95 	 test_msg_
| [ 0:00] ## Line: 96 	 not test_blkid_
| [ 0:00] ## Line: 97 	 init_lv_
| [ 0:00] ## Line: 98 	 lvremove -f $vg/$lv1
| [ 0:00] ## Line: 99 	 
| [ 0:00] ## Line: 100 	 lvcreate -y -Zy -l1 -n $lv1 $vg 2>&1 | tee out
| [ 0:00] ## Line: 101 	 test_msg_
| [ 0:00] ## Line: 102 	 not test_blkid_
| [ 0:00] ## Line: 103 	 init_lv_
| [ 0:00] ## Line: 104 	 lvremove -f $vg/$lv1
| [ 0:00] ## Line: 105 	 
| [ 0:00] ## Line: 106 	 lvcreate -y -Zy -Wn -l1 -n $lv1 $vg 2>&1 | tee out
| [ 0:00] ## Line: 107 	 not test_msg_
| [ 0:00] ## Line: 108 	 not test_blkid_
| [ 0:00] ## Line: 109 	 init_lv_
| [ 0:00] ## Line: 110 	 lvremove -f $vg/$lv1
| [ 0:00] ## Line: 111 	 
| [ 0:00] ## Line: 112 	 lvcreate -y -Zy -Wy -l1 -n $lv1 $vg 2>&1 | tee out
| [ 0:00] ## Line: 113 	 test_msg_
| [ 0:00] ## Line: 114 	 not test_blkid_
| [ 0:00] ## Line: 115 	 init_lv_
| [ 0:00] ## Line: 116 	 lvremove -f $vg/$lv1
| [ 0:00] ## Line: 117 	 
| [ 0:00] ## Line: 118 	 vgremove -f $vg
| [ 0:00] aux teardown
| [ 0:00] #lvcreate-signature-wiping.sh:1+ aux teardown
| [ 0:00] ## teardown.........ok
###       failed: [ndev-vanilla] shell/lvcreate-signature-wiping.sh

| [ 0:00] Library version:   1.02.146 (2017-12-18)
| [ 0:00] Driver version:    4.35.0
| [ 0:00] Kernel is Linux localhost.localdomain 3.10.0-693.11.1.el7.x86_64 #1 SMP Mon Dec 4 23:52:40 UTC 2017 x86_64 GNU/Linux
| [ 0:00] Selinux mode is not installed.
| [ 0:00]               total        used        free      shared  buff/cache   available
| [ 0:00] Mem:           7822        1079        4147          10        2595        6436
| [ 0:00] Swap:          4095           0        4095
| [ 0:00] Filesystem      Size  Used Avail Use% Mounted on
| [ 0:00] /dev/sdc1        18G  8.4G  8.4G  50% /
| [ 0:00] /dev/sdd1        51G  6.1G   43G  13% /lfskernel
| [ 0:00] devtmpfs        3.9G     0  3.9G   0% /dev
| [ 0:00] tmpfs           3.9G     0  3.9G   0% /run
| [ 0:00] @TESTDIR=/tmp/LVMTEST5489.rl4IUug19x
| [ 0:00] @PREFIX=LVMTEST5489
| [ 0:00] ## LVMCONF: activation {
| [ 0:00] ## LVMCONF:     checks = 1
| [ 0:00] ## LVMCONF:     monitoring = 0
| [ 0:00] ## LVMCONF:     polling_interval = 1
| [ 0:00] ## LVMCONF:     raid_region_size = 512
| [ 0:00] ## LVMCONF:     retry_deactivation = 1
| [ 0:00] ## LVMCONF:     snapshot_autoextend_percent = 50
| [ 0:00] ## LVMCONF:     snapshot_autoextend_threshold = 50
| [ 0:00] ## LVMCONF:     udev_rules = 1
| [ 0:00] ## LVMCONF:     udev_sync = 1
| [ 0:00] ## LVMCONF:     verify_udev_operations = 1
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: allocation {
| [ 0:00] ## LVMCONF:     wipe_signatures_when_zeroing_new_lvs = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: backup {
| [ 0:00] ## LVMCONF:     archive = 0
| [ 0:00] ## LVMCONF:     backup = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: devices {
| [ 0:00] ## LVMCONF:     cache_dir = "@TESTDIR@/etc"
| [ 0:00] ## LVMCONF:     default_data_alignment = 1
| [ 0:00] ## LVMCONF:     dir = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     filter = "a|.*|"
| [ 0:00] ## LVMCONF:     global_filter = [ "a|@TESTDIR@/dev/mapper/@PREFIX@.*pv[0-9_]*$|", "r|.*|" ]
| [ 0:00] ## LVMCONF:     md_component_detection  = 0
| [ 0:00] ## LVMCONF:     scan = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     sysfs_scan = 1
| [ 0:00] ## LVMCONF:     write_cache_state = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: dmeventd {
| [ 0:00] ## LVMCONF:     executable = "/sources/boot/LVM2.2.02.177/test/lib/dmeventd"
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: global {
| [ 0:00] ## LVMCONF:     abort_on_internal_errors = 1
| [ 0:00] ## LVMCONF:     cache_check_executable = "/usr/sbin/cache_check"
| [ 0:00] ## LVMCONF:     cache_dump_executable = "/usr/sbin/cache_dump"
| [ 0:00] ## LVMCONF:     cache_repair_executable = "/usr/sbin/cache_repair"
| [ 0:00] ## LVMCONF:     detect_internal_vg_cache_corruption = 1
| [ 0:00] ## LVMCONF:     fallback_to_local_locking = 0
| [ 0:00] ## LVMCONF:     fsadm_executable = "/sources/boot/LVM2.2.02.177/test/lib/fsadm"
| [ 0:00] ## LVMCONF:     library_dir = "@TESTDIR@/lib"
| [ 0:00] ## LVMCONF:     locking_dir = "@TESTDIR@/var/lock/lvm"
| [ 0:00] ## LVMCONF:     locking_type=1
| [ 0:00] ## LVMCONF:     notify_dbus = 0
| [ 0:00] ## LVMCONF:     si_unit_consistency = 1
| [ 0:00] ## LVMCONF:     thin_check_executable = "/usr/sbin/thin_check"
| [ 0:00] ## LVMCONF:     thin_dump_executable = "/usr/sbin/thin_dump"
| [ 0:00] ## LVMCONF:     thin_repair_executable = "/usr/sbin/thin_repair"
| [ 0:00] ## LVMCONF:     use_lvmetad = 0
| [ 0:00] ## LVMCONF:     use_lvmlockd = 0
| [ 0:00] ## LVMCONF:     use_lvmpolld = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: log {
| [ 0:00] ## LVMCONF:     activation = 1
| [ 0:00] ## LVMCONF:     file = "@TESTDIR@/debug.log"
| [ 0:00] ## LVMCONF:     indent = 1
| [ 0:00] ## LVMCONF:     level = 9
| [ 0:00] ## LVMCONF:     overwrite = 1
| [ 0:00] ## LVMCONF:     syslog = 0
| [ 0:00] ## LVMCONF:     verbose = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] <======== Processing test: "lvcreate-small-snap.sh" ========>
| [ 0:00] 
| [ 0:00] aux prepare_pvs
| [ 0:00] #lvcreate-small-snap.sh:18+ aux prepare_pvs
| [ 0:00] ## preparing loop device....ok (/dev/loop0)
| [ 0:00] ## preparing 3 devices...lib/utils: line 212: DM_UDEV_COOKIE: unbound variable
| [ 0:00] set +vx; STACKTRACE; set -vx
| [ 0:00] ##lvcreate-small-snap.sh:18+ set +vx
| [ 0:00] ## - /lfskernel/sources/boot/LVM2.2.02.177/test/shell/lvcreate-small-snap.sh:18
| [ 0:00] ## 1 STACKTRACE() called from /lfskernel/sources/boot/LVM2.2.02.177/test/shell/lvcreate-small-snap.sh:18
| [ 0:00] <======== Info ========>
| [ 0:00] ## DMINFO:   Name             Maj Min Stat Open Targ Event  UUID                                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv3   253   4 L--w    0    1      0 TEST-@PREFIX@pv3                                                 
| [ 0:00] ## DMINFO:   @PREFIX@pv2   253   3 L--w    0    1      0 TEST-@PREFIX@pv2                                                 
| [ 0:00] ## DMINFO:   @PREFIX@pv1   253   5 L--w    0    1      0 TEST-@PREFIX@pv1                                                 
| [ 0:00] <======== Active table ========>
| [ 0:00] ## DMTABLE:  @PREFIX@pv3: 0 69632 linear 7:0 141312
| [ 0:00] ## DMTABLE:  @PREFIX@pv2: 0 69632 linear 7:0 71680
| [ 0:00] ## DMTABLE:  @PREFIX@pv1: 0 69632 linear 7:0 2048
| [ 0:00] <======== Inactive table ========>
| [ 0:00] ## DMITABLE: @PREFIX@pv3: 
| [ 0:00] ## DMITABLE: @PREFIX@pv2: 
| [ 0:00] ## DMITABLE: @PREFIX@pv1: 
| [ 0:00] <======== Status ========>
| [ 0:00] ## DMSTATUS: @PREFIX@pv3: 0 69632 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv2: 0 69632 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv1: 0 69632 linear 
| [ 0:00] <======== Tree ========>
| [ 0:00] ## DMTREE:   @PREFIX@pv3 (253:4)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   @PREFIX@pv2 (253:3)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   @PREFIX@pv1 (253:5)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   LFS_vg-lfs (253:2)
| [ 0:00] ## DMTREE:    `- (8:16)
| [ 0:00] ## DMTREE:   centos-swap (253:1)
| [ 0:00] ## DMTREE:    `- (8:2)
| [ 0:00] ## DMTREE:   centos-root (253:0)
| [ 0:00] ## DMTREE:    `- (8:2)
| [ 0:00] <======== Recursive list of @TESTDIR@/dev ========>
| [ 0:00] ## LSLR:	@TESTDIR@/dev:
| [ 0:00] ## LSLR:	total 4
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 0 Feb 21 02:27 loop0
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 1 Feb 21 02:27 loop1
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 2 Feb 21 02:27 loop2
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 3 Feb 21 02:27 loop3
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 4 Feb 21 02:27 loop4
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 5 Feb 21 02:27 loop5
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 6 Feb 21 02:27 loop6
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 7 Feb 21 02:27 loop7
| [ 0:00] ## LSLR:	drwxr-xr-x 2 root root 4096 Feb 21 02:27 mapper
| [ 0:00] ## LSLR:	crw-r--r-- 1 root root 1, 3 Feb 21 02:27 testnull
| [ 0:00] ## LSLR:	
| [ 0:00] ## LSLR:	@TESTDIR@/dev/mapper:
| [ 0:00] ## LSLR:	total 0
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   5 Feb 21 02:27 @PREFIX@pv1
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   3 Feb 21 02:27 @PREFIX@pv2
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   4 Feb 21 02:27 @PREFIX@pv3
| [ 0:00] ## LSLR:	crw------- 1 root root  10, 236 Feb 21 02:27 control
| [ 0:00] <======== Udev DB content ========>
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-0
| [ 0:00] ## UDEV:	N: dm-0
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-0
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-0
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=0
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-1
| [ 0:00] ## UDEV:	N: dm-1
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-1
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-1
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=1
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-2
| [ 0:00] ## UDEV:	N: dm-2
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-2
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-2
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=2
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-3
| [ 0:00] ## UDEV:	N: dm-3
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-3
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-3
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=3
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-4
| [ 0:00] ## UDEV:	N: dm-4
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-4
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-4
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=4
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-5
| [ 0:00] ## UDEV:	N: dm-5
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-5
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-5
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=5
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/loop0
| [ 0:00] ## UDEV:	N: loop0
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/loop0
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/loop0
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=7
| [ 0:00] ## UDEV:	E: MINOR=0
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] <======== Script file "lvcreate-small-snap.sh" ========>
| [ 0:00] ## Line: 1 	 #!/usr/bin/env bash
| [ 0:00] ## Line: 2 	 
| [ 0:00] ## Line: 3 	 # Copyright (C) 2010-2014 Red Hat, Inc. All rights reserved.
| [ 0:00] ## Line: 4 	 #
| [ 0:00] ## Line: 5 	 # This copyrighted material is made available to anyone wishing to use,
| [ 0:00] ## Line: 6 	 # modify, copy, or redistribute it subject to the terms and conditions
| [ 0:00] ## Line: 7 	 # of the GNU General Public License v.2.
| [ 0:00] ## Line: 8 	 #
| [ 0:00] ## Line: 9 	 # You should have received a copy of the GNU General Public License
| [ 0:00] ## Line: 10 	 # along with this program; if not, write to the Free Software Foundation,
| [ 0:00] ## Line: 11 	 # Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA
| [ 0:00] ## Line: 12 	 
| [ 0:00] ## Line: 13 	 SKIP_WITH_LVMLOCKD=1
| [ 0:00] ## Line: 14 	 SKIP_WITH_LVMPOLLD=1
| [ 0:00] ## Line: 15 	 
| [ 0:00] ## Line: 16 	 . lib/inittest
| [ 0:00] ## Line: 17 	 
| [ 0:00] ## Line: 18 	 aux prepare_pvs
| [ 0:00] ## Line: 19 	 get_devs
| [ 0:00] ## Line: 20 	 
| [ 0:00] ## Line: 21 	 vgcreate -s 1k "$vg" "${DEVICES[@]}"
| [ 0:00] ## Line: 22 	 
| [ 0:00] ## Line: 23 	 # 3 Chunks
| [ 0:00] ## Line: 24 	 lvcreate -aey -n one -l 10 $vg
| [ 0:00] ## Line: 25 	 lvcreate -s -l 12 -n snapA $vg/one
| [ 0:00] ## Line: 26 	 lvcreate -s -c 4k -l 12 -n snapX1 $vg/one
| [ 0:00] ## Line: 27 	 lvcreate -s -c 8k -l 24 -n snapX2 $vg/one
| [ 0:00] ## Line: 28 	 
| [ 0:00] ## Line: 29 	 # Check that snapshots that are too small are caught with correct error.
| [ 0:00] ## Line: 30 	 not lvcreate -s -c 8k -l 8 -n snapX3 $vg/one 2>&1 | tee lvcreate.out
| [ 0:00] ## Line: 31 	 not grep "suspend origin one" lvcreate.out
| [ 0:00] ## Line: 32 	 grep "smaller" lvcreate.out
| [ 0:00] ## Line: 33 	 
| [ 0:00] ## Line: 34 	 not lvcreate -s -l 4 -n snapB $vg/one 2>&1 | tee lvcreate.out
| [ 0:00] ## Line: 35 	 not grep "suspend origin one" lvcreate.out
| [ 0:00] ## Line: 36 	 grep "smaller" lvcreate.out
| [ 0:00] ## Line: 37 	 
| [ 0:00] ## Line: 38 	 vgremove -ff $vg
| [ 0:00] aux teardown
| [ 0:00] #lvcreate-small-snap.sh:1+ aux teardown
| [ 0:00] ## teardown.........ok
###       failed: [ndev-vanilla] shell/lvcreate-small-snap.sh

| [ 0:00] Library version:   1.02.146 (2017-12-18)
| [ 0:00] Driver version:    4.35.0
| [ 0:00] Kernel is Linux localhost.localdomain 3.10.0-693.11.1.el7.x86_64 #1 SMP Mon Dec 4 23:52:40 UTC 2017 x86_64 GNU/Linux
| [ 0:00] Selinux mode is not installed.
| [ 0:00]               total        used        free      shared  buff/cache   available
| [ 0:00] Mem:           7822        1079        4147          10        2595        6436
| [ 0:00] Swap:          4095           0        4095
| [ 0:00] Filesystem      Size  Used Avail Use% Mounted on
| [ 0:00] /dev/sdc1        18G  8.4G  8.4G  50% /
| [ 0:00] /dev/sdd1        51G  6.1G   43G  13% /lfskernel
| [ 0:00] devtmpfs        3.9G     0  3.9G   0% /dev
| [ 0:00] tmpfs           3.9G     0  3.9G   0% /run
| [ 0:00] @TESTDIR=/tmp/LVMTEST5669.D1Gs6lQ8CU
| [ 0:00] @PREFIX=LVMTEST5669
| [ 0:00] ## LVMCONF: activation {
| [ 0:00] ## LVMCONF:     checks = 1
| [ 0:00] ## LVMCONF:     monitoring = 0
| [ 0:00] ## LVMCONF:     polling_interval = 1
| [ 0:00] ## LVMCONF:     raid_region_size = 512
| [ 0:00] ## LVMCONF:     retry_deactivation = 1
| [ 0:00] ## LVMCONF:     snapshot_autoextend_percent = 50
| [ 0:00] ## LVMCONF:     snapshot_autoextend_threshold = 50
| [ 0:00] ## LVMCONF:     udev_rules = 1
| [ 0:00] ## LVMCONF:     udev_sync = 1
| [ 0:00] ## LVMCONF:     verify_udev_operations = 1
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: allocation {
| [ 0:00] ## LVMCONF:     wipe_signatures_when_zeroing_new_lvs = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: backup {
| [ 0:00] ## LVMCONF:     archive = 0
| [ 0:00] ## LVMCONF:     backup = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: devices {
| [ 0:00] ## LVMCONF:     cache_dir = "@TESTDIR@/etc"
| [ 0:00] ## LVMCONF:     default_data_alignment = 1
| [ 0:00] ## LVMCONF:     dir = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     filter = "a|.*|"
| [ 0:00] ## LVMCONF:     global_filter = [ "a|@TESTDIR@/dev/mapper/@PREFIX@.*pv[0-9_]*$|", "r|.*|" ]
| [ 0:00] ## LVMCONF:     md_component_detection  = 0
| [ 0:00] ## LVMCONF:     scan = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     sysfs_scan = 1
| [ 0:00] ## LVMCONF:     write_cache_state = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: dmeventd {
| [ 0:00] ## LVMCONF:     executable = "/sources/boot/LVM2.2.02.177/test/lib/dmeventd"
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: global {
| [ 0:00] ## LVMCONF:     abort_on_internal_errors = 1
| [ 0:00] ## LVMCONF:     cache_check_executable = "/usr/sbin/cache_check"
| [ 0:00] ## LVMCONF:     cache_dump_executable = "/usr/sbin/cache_dump"
| [ 0:00] ## LVMCONF:     cache_repair_executable = "/usr/sbin/cache_repair"
| [ 0:00] ## LVMCONF:     detect_internal_vg_cache_corruption = 1
| [ 0:00] ## LVMCONF:     fallback_to_local_locking = 0
| [ 0:00] ## LVMCONF:     fsadm_executable = "/sources/boot/LVM2.2.02.177/test/lib/fsadm"
| [ 0:00] ## LVMCONF:     library_dir = "@TESTDIR@/lib"
| [ 0:00] ## LVMCONF:     locking_dir = "@TESTDIR@/var/lock/lvm"
| [ 0:00] ## LVMCONF:     locking_type=1
| [ 0:00] ## LVMCONF:     notify_dbus = 0
| [ 0:00] ## LVMCONF:     si_unit_consistency = 1
| [ 0:00] ## LVMCONF:     thin_check_executable = "/usr/sbin/thin_check"
| [ 0:00] ## LVMCONF:     thin_dump_executable = "/usr/sbin/thin_dump"
| [ 0:00] ## LVMCONF:     thin_repair_executable = "/usr/sbin/thin_repair"
| [ 0:00] ## LVMCONF:     use_lvmetad = 0
| [ 0:00] ## LVMCONF:     use_lvmlockd = 0
| [ 0:00] ## LVMCONF:     use_lvmpolld = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: log {
| [ 0:00] ## LVMCONF:     activation = 1
| [ 0:00] ## LVMCONF:     file = "@TESTDIR@/debug.log"
| [ 0:00] ## LVMCONF:     indent = 1
| [ 0:00] ## LVMCONF:     level = 9
| [ 0:00] ## LVMCONF:     overwrite = 1
| [ 0:00] ## LVMCONF:     syslog = 0
| [ 0:00] ## LVMCONF:     verbose = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] <======== Processing test: "lvcreate-striped-mirror.sh" ========>
| [ 0:00] 
| [ 0:00] aux prepare_vg 9
| [ 0:00] #lvcreate-striped-mirror.sh:18+ aux prepare_vg 9
| [ 0:00] ## preparing loop device....ok (/dev/loop0)
| [ 0:00] ## preparing 9 devices...lib/utils: line 212: DM_UDEV_COOKIE: unbound variable
| [ 0:00] set +vx; STACKTRACE; set -vx
| [ 0:00] ##lvcreate-striped-mirror.sh:18+ set +vx
| [ 0:00] ## - /lfskernel/sources/boot/LVM2.2.02.177/test/shell/lvcreate-striped-mirror.sh:18
| [ 0:00] ## 1 STACKTRACE() called from /lfskernel/sources/boot/LVM2.2.02.177/test/shell/lvcreate-striped-mirror.sh:18
| [ 0:00] <======== Info ========>
| [ 0:00] ## DMINFO:   Name             Maj Min Stat Open Targ Event  UUID                                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv6   253   3 L--w    0    1      0 TEST-@PREFIX@pv6                                                 
| [ 0:00] ## DMINFO:   @PREFIX@pv5   253  10 L--w    0    1      0 TEST-@PREFIX@pv5                                                 
| [ 0:00] ## DMINFO:   @PREFIX@pv4   253   6 L--w    0    1      0 TEST-@PREFIX@pv4                                                 
| [ 0:00] ## DMINFO:   @PREFIX@pv3   253   5 L--w    0    1      0 TEST-@PREFIX@pv3                                                 
| [ 0:00] ## DMINFO:   @PREFIX@pv2   253  11 L--w    0    1      0 TEST-@PREFIX@pv2                                                 
| [ 0:00] ## DMINFO:   @PREFIX@pv1   253   9 L--w    0    1      0 TEST-@PREFIX@pv1                                                 
| [ 0:00] ## DMINFO:   @PREFIX@pv9   253   8 L--w    0    1      0 TEST-@PREFIX@pv9                                                 
| [ 0:00] ## DMINFO:   @PREFIX@pv8   253   7 L--w    0    1      0 TEST-@PREFIX@pv8                                                 
| [ 0:00] ## DMINFO:   @PREFIX@pv7   253   4 L--w    0    1      0 TEST-@PREFIX@pv7                                                 
| [ 0:00] <======== Active table ========>
| [ 0:00] ## DMTABLE:  @PREFIX@pv6: 0 69632 linear 7:0 350208
| [ 0:00] ## DMTABLE:  @PREFIX@pv5: 0 69632 linear 7:0 280576
| [ 0:00] ## DMTABLE:  @PREFIX@pv4: 0 69632 linear 7:0 210944
| [ 0:00] ## DMTABLE:  @PREFIX@pv3: 0 69632 linear 7:0 141312
| [ 0:00] ## DMTABLE:  @PREFIX@pv2: 0 69632 linear 7:0 71680
| [ 0:00] ## DMTABLE:  @PREFIX@pv1: 0 69632 linear 7:0 2048
| [ 0:00] ## DMTABLE:  @PREFIX@pv9: 0 69632 linear 7:0 559104
| [ 0:00] ## DMTABLE:  @PREFIX@pv8: 0 69632 linear 7:0 489472
| [ 0:00] ## DMTABLE:  @PREFIX@pv7: 0 69632 linear 7:0 419840
| [ 0:00] <======== Inactive table ========>
| [ 0:00] ## DMITABLE: @PREFIX@pv6: 
| [ 0:00] ## DMITABLE: @PREFIX@pv5: 
| [ 0:00] ## DMITABLE: @PREFIX@pv4: 
| [ 0:00] ## DMITABLE: @PREFIX@pv3: 
| [ 0:00] ## DMITABLE: @PREFIX@pv2: 
| [ 0:00] ## DMITABLE: @PREFIX@pv1: 
| [ 0:00] ## DMITABLE: @PREFIX@pv9: 
| [ 0:00] ## DMITABLE: @PREFIX@pv8: 
| [ 0:00] ## DMITABLE: @PREFIX@pv7: 
| [ 0:00] <======== Status ========>
| [ 0:00] ## DMSTATUS: @PREFIX@pv6: 0 69632 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv5: 0 69632 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv4: 0 69632 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv3: 0 69632 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv2: 0 69632 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv1: 0 69632 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv9: 0 69632 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv8: 0 69632 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv7: 0 69632 linear 
| [ 0:00] <======== Tree ========>
| [ 0:00] ## DMTREE:   @PREFIX@pv6 (253:3)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   @PREFIX@pv5 (253:10)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   @PREFIX@pv4 (253:6)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   @PREFIX@pv3 (253:5)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   @PREFIX@pv2 (253:11)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   @PREFIX@pv1 (253:9)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   @PREFIX@pv9 (253:8)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   @PREFIX@pv8 (253:7)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   LFS_vg-lfs (253:2)
| [ 0:00] ## DMTREE:    `- (8:16)
| [ 0:00] ## DMTREE:   @PREFIX@pv7 (253:4)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   centos-swap (253:1)
| [ 0:00] ## DMTREE:    `- (8:2)
| [ 0:00] ## DMTREE:   centos-root (253:0)
| [ 0:00] ## DMTREE:    `- (8:2)
| [ 0:00] <======== Recursive list of @TESTDIR@/dev ========>
| [ 0:00] ## LSLR:	@TESTDIR@/dev:
| [ 0:00] ## LSLR:	total 4
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 0 Feb 21 02:27 loop0
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 1 Feb 21 02:27 loop1
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 2 Feb 21 02:27 loop2
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 3 Feb 21 02:27 loop3
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 4 Feb 21 02:27 loop4
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 5 Feb 21 02:27 loop5
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 6 Feb 21 02:27 loop6
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 7 Feb 21 02:27 loop7
| [ 0:00] ## LSLR:	drwxr-xr-x 2 root root 4096 Feb 21 02:27 mapper
| [ 0:00] ## LSLR:	crw-r--r-- 1 root root 1, 3 Feb 21 02:27 testnull
| [ 0:00] ## LSLR:	
| [ 0:00] ## LSLR:	@TESTDIR@/dev/mapper:
| [ 0:00] ## LSLR:	total 0
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   9 Feb 21 02:27 @PREFIX@pv1
| [ 0:00] ## LSLR:	brw------- 1 root root 253,  11 Feb 21 02:27 @PREFIX@pv2
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   5 Feb 21 02:27 @PREFIX@pv3
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   6 Feb 21 02:27 @PREFIX@pv4
| [ 0:00] ## LSLR:	brw------- 1 root root 253,  10 Feb 21 02:27 @PREFIX@pv5
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   3 Feb 21 02:27 @PREFIX@pv6
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   4 Feb 21 02:27 @PREFIX@pv7
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   7 Feb 21 02:27 @PREFIX@pv8
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   8 Feb 21 02:27 @PREFIX@pv9
| [ 0:00] ## LSLR:	crw------- 1 root root  10, 236 Feb 21 02:27 control
| [ 0:00] <======== Udev DB content ========>
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-0
| [ 0:00] ## UDEV:	N: dm-0
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-0
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-0
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=0
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-1
| [ 0:00] ## UDEV:	N: dm-1
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-1
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-1
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=1
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-10
| [ 0:00] ## UDEV:	N: dm-10
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-10
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-10
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=10
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-11
| [ 0:00] ## UDEV:	N: dm-11
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-11
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-11
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=11
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-2
| [ 0:00] ## UDEV:	N: dm-2
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-2
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-2
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=2
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-3
| [ 0:00] ## UDEV:	N: dm-3
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-3
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-3
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=3
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-4
| [ 0:00] ## UDEV:	N: dm-4
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-4
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-4
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=4
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-5
| [ 0:00] ## UDEV:	N: dm-5
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-5
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-5
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=5
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-6
| [ 0:00] ## UDEV:	N: dm-6
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-6
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-6
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=6
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-7
| [ 0:00] ## UDEV:	N: dm-7
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-7
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-7
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=7
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-8
| [ 0:00] ## UDEV:	N: dm-8
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-8
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-8
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=8
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-9
| [ 0:00] ## UDEV:	N: dm-9
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-9
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-9
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=9
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/loop0
| [ 0:00] ## UDEV:	N: loop0
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/loop0
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/loop0
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=7
| [ 0:00] ## UDEV:	E: MINOR=0
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] <======== Script file "lvcreate-striped-mirror.sh" ========>
| [ 0:00] ## Line: 1 	 #!/usr/bin/env bash
| [ 0:00] ## Line: 2 	 
| [ 0:00] ## Line: 3 	 # Copyright (C) 2010 Red Hat, Inc. All rights reserved.
| [ 0:00] ## Line: 4 	 #
| [ 0:00] ## Line: 5 	 # This copyrighted material is made available to anyone wishing to use,
| [ 0:00] ## Line: 6 	 # modify, copy, or redistribute it subject to the terms and conditions
| [ 0:00] ## Line: 7 	 # of the GNU General Public License v.2.
| [ 0:00] ## Line: 8 	 #
| [ 0:00] ## Line: 9 	 # You should have received a copy of the GNU General Public License
| [ 0:00] ## Line: 10 	 # along with this program; if not, write to the Free Software Foundation,
| [ 0:00] ## Line: 11 	 # Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA
| [ 0:00] ## Line: 12 	 
| [ 0:00] ## Line: 13 	 SKIP_WITH_LVMLOCKD=1
| [ 0:00] ## Line: 14 	 SKIP_WITH_LVMPOLLD=1
| [ 0:00] ## Line: 15 	 
| [ 0:00] ## Line: 16 	 . lib/inittest
| [ 0:00] ## Line: 17 	 
| [ 0:00] ## Line: 18 	 aux prepare_vg 9
| [ 0:00] ## Line: 19 	 
| [ 0:00] ## Line: 20 	 lvcreate -aey --nosync -i2 -l2 --type mirror -m1 --mirrorlog core -n $lv1 $vg 2>&1 | tee log
| [ 0:00] ## Line: 21 	 not grep "Rounding" log
| [ 0:00] ## Line: 22 	 check mirror_images_redundant $vg $lv1
| [ 0:00] ## Line: 23 	 
| [ 0:00] ## Line: 24 	 lvcreate -aey --nosync -i2 -l4 --type mirror -m1 --mirrorlog core -n $lv2 $vg 2>&1 | tee log
| [ 0:00] ## Line: 25 	 not grep "Rounding" log
| [ 0:00] ## Line: 26 	 check mirror_images_redundant $vg $lv2
| [ 0:00] ## Line: 27 	 
| [ 0:00] ## Line: 28 	 lvcreate -aey --nosync -i3 -l3 --type mirror -m1 --mirrorlog core -n $lv3 $vg 2>&1 | tee log
| [ 0:00] ## Line: 29 	 not grep "Rounding" log
| [ 0:00] ## Line: 30 	 check mirror_images_redundant $vg $lv3
| [ 0:00] ## Line: 31 	 
| [ 0:00] ## Line: 32 	 lvcreate -aey --nosync -i4 -l4 --type mirror -m1 --mirrorlog core -n $lv4 $vg 2>&1 | tee log
| [ 0:00] ## Line: 33 	 not grep "Rounding" log
| [ 0:00] ## Line: 34 	 check mirror_images_redundant $vg $lv4
| [ 0:00] ## Line: 35 	 
| [ 0:00] ## Line: 36 	 lvcreate -aey --nosync -i2 -l2 --type mirror -m2 --mirrorlog core -n $lv5 $vg 2>&1 | tee log
| [ 0:00] ## Line: 37 	 not grep "Rounding" log
| [ 0:00] ## Line: 38 	 check mirror_images_redundant $vg $lv5
| [ 0:00] ## Line: 39 	 
| [ 0:00] ## Line: 40 	 lvcreate -aey --nosync -i3 -l3 --type mirror -m2 --mirrorlog core -n $lv6 $vg 2>&1 | tee log
| [ 0:00] ## Line: 41 	 not grep "Rounding" log
| [ 0:00] ## Line: 42 	 check mirror_images_redundant $vg $lv6
| [ 0:00] ## Line: 43 	 
| [ 0:00] ## Line: 44 	 lvcreate -aey --nosync -i2 -l2 --type mirror -m3 --mirrorlog core -n $lv7 $vg 2>&1 | tee log
| [ 0:00] ## Line: 45 	 not grep "Rounding" log
| [ 0:00] ## Line: 46 	 check mirror_images_redundant $vg $lv7
| [ 0:00] ## Line: 47 	 
| [ 0:00] ## Line: 48 	 lvremove -ff $vg
| [ 0:00] ## Line: 49 	 
| [ 0:00] ## Line: 50 	 lvcreate -aey --nosync -i3 -l4 --type mirror -m1 --mirrorlog core -n $lv1 $vg 2>&1 | tee log
| [ 0:00] ## Line: 51 	 grep "Rounding size .*(4 extents) up to .*(6 extents)" log
| [ 0:00] ## Line: 52 	 
| [ 0:00] ## Line: 53 	 lvcreate -aey --nosync -i3 -l4 --type mirror -m2 --mirrorlog core -n $lv2 $vg 2>&1 | tee log
| [ 0:00] ## Line: 54 	 grep "Rounding size .*(4 extents) up to .*(6 extents)" log
| [ 0:00] ## Line: 55 	 
| [ 0:00] ## Line: 56 	 lvcreate -aey --nosync -i3 -l2 --type mirror -m2 --mirrorlog core -n $lv3 $vg 2>&1 | tee log
| [ 0:00] ## Line: 57 	 grep "Rounding size .*(2 extents) up to .*(3 extents)" log
| [ 0:00] ## Line: 58 	 
| [ 0:00] ## Line: 59 	 lvremove -ff $vg
| [ 0:00] aux teardown
| [ 0:00] #lvcreate-striped-mirror.sh:1+ aux teardown
| [ 0:00] ## teardown.........ok
###       failed: [ndev-vanilla] shell/lvcreate-striped-mirror.sh
###      skipped: [ndev-vanilla] shell/lvcreate-thin-big.sh
###      skipped: [ndev-vanilla] shell/lvcreate-thin-cache.sh
###      skipped: [ndev-vanilla] shell/lvcreate-thin-external-size.sh
###      skipped: [ndev-vanilla] shell/lvcreate-thin-external.sh
###      skipped: [ndev-vanilla] shell/lvcreate-thin-power2.sh
###      skipped: [ndev-vanilla] shell/lvcreate-thin-snap.sh
###      skipped: [ndev-vanilla] shell/lvcreate-thin.sh

| [ 0:00] Library version:   1.02.146 (2017-12-18)
| [ 0:00] Driver version:    4.35.0
| [ 0:00] Kernel is Linux localhost.localdomain 3.10.0-693.11.1.el7.x86_64 #1 SMP Mon Dec 4 23:52:40 UTC 2017 x86_64 GNU/Linux
| [ 0:00] Selinux mode is not installed.
| [ 0:00]               total        used        free      shared  buff/cache   available
| [ 0:00] Mem:           7822        1079        4147          10        2595        6436
| [ 0:00] Swap:          4095           0        4095
| [ 0:00] Filesystem      Size  Used Avail Use% Mounted on
| [ 0:00] /dev/sdc1        18G  8.4G  8.4G  50% /
| [ 0:00] /dev/sdd1        51G  6.1G   43G  13% /lfskernel
| [ 0:00] devtmpfs        3.9G     0  3.9G   0% /dev
| [ 0:00] tmpfs           3.9G     0  3.9G   0% /run
| [ 0:00] @TESTDIR=/tmp/LVMTEST6418.3pFLNkNwfq
| [ 0:00] @PREFIX=LVMTEST6418
| [ 0:00] ## LVMCONF: activation {
| [ 0:00] ## LVMCONF:     checks = 1
| [ 0:00] ## LVMCONF:     monitoring = 0
| [ 0:00] ## LVMCONF:     polling_interval = 1
| [ 0:00] ## LVMCONF:     raid_region_size = 512
| [ 0:00] ## LVMCONF:     retry_deactivation = 1
| [ 0:00] ## LVMCONF:     snapshot_autoextend_percent = 50
| [ 0:00] ## LVMCONF:     snapshot_autoextend_threshold = 50
| [ 0:00] ## LVMCONF:     udev_rules = 1
| [ 0:00] ## LVMCONF:     udev_sync = 1
| [ 0:00] ## LVMCONF:     verify_udev_operations = 1
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: allocation {
| [ 0:00] ## LVMCONF:     wipe_signatures_when_zeroing_new_lvs = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: backup {
| [ 0:00] ## LVMCONF:     archive = 0
| [ 0:00] ## LVMCONF:     backup = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: devices {
| [ 0:00] ## LVMCONF:     cache_dir = "@TESTDIR@/etc"
| [ 0:00] ## LVMCONF:     default_data_alignment = 1
| [ 0:00] ## LVMCONF:     dir = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     filter = "a|.*|"
| [ 0:00] ## LVMCONF:     global_filter = [ "a|@TESTDIR@/dev/mapper/@PREFIX@.*pv[0-9_]*$|", "r|.*|" ]
| [ 0:00] ## LVMCONF:     md_component_detection  = 0
| [ 0:00] ## LVMCONF:     scan = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     sysfs_scan = 1
| [ 0:00] ## LVMCONF:     write_cache_state = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: dmeventd {
| [ 0:00] ## LVMCONF:     executable = "/sources/boot/LVM2.2.02.177/test/lib/dmeventd"
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: global {
| [ 0:00] ## LVMCONF:     abort_on_internal_errors = 1
| [ 0:00] ## LVMCONF:     cache_check_executable = "/usr/sbin/cache_check"
| [ 0:00] ## LVMCONF:     cache_dump_executable = "/usr/sbin/cache_dump"
| [ 0:00] ## LVMCONF:     cache_repair_executable = "/usr/sbin/cache_repair"
| [ 0:00] ## LVMCONF:     detect_internal_vg_cache_corruption = 1
| [ 0:00] ## LVMCONF:     fallback_to_local_locking = 0
| [ 0:00] ## LVMCONF:     fsadm_executable = "/sources/boot/LVM2.2.02.177/test/lib/fsadm"
| [ 0:00] ## LVMCONF:     library_dir = "@TESTDIR@/lib"
| [ 0:00] ## LVMCONF:     locking_dir = "@TESTDIR@/var/lock/lvm"
| [ 0:00] ## LVMCONF:     locking_type=1
| [ 0:00] ## LVMCONF:     notify_dbus = 0
| [ 0:00] ## LVMCONF:     si_unit_consistency = 1
| [ 0:00] ## LVMCONF:     thin_check_executable = "/usr/sbin/thin_check"
| [ 0:00] ## LVMCONF:     thin_dump_executable = "/usr/sbin/thin_dump"
| [ 0:00] ## LVMCONF:     thin_repair_executable = "/usr/sbin/thin_repair"
| [ 0:00] ## LVMCONF:     use_lvmetad = 0
| [ 0:00] ## LVMCONF:     use_lvmlockd = 0
| [ 0:00] ## LVMCONF:     use_lvmpolld = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: log {
| [ 0:00] ## LVMCONF:     activation = 1
| [ 0:00] ## LVMCONF:     file = "@TESTDIR@/debug.log"
| [ 0:00] ## LVMCONF:     indent = 1
| [ 0:00] ## LVMCONF:     level = 9
| [ 0:00] ## LVMCONF:     overwrite = 1
| [ 0:00] ## LVMCONF:     syslog = 0
| [ 0:00] ## LVMCONF:     verbose = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] <======== Processing test: "lvcreate-usage.sh" ========>
| [ 0:00] 
| [ 0:00] aux prepare_pvs 4
| [ 0:00] #lvcreate-usage.sh:19+ aux prepare_pvs 4
| [ 0:00] ## preparing loop device....ok (/dev/loop0)
| [ 0:00] ## preparing 4 devices...lib/utils: line 212: DM_UDEV_COOKIE: unbound variable
| [ 0:00] set +vx; STACKTRACE; set -vx
| [ 0:00] ##lvcreate-usage.sh:19+ set +vx
| [ 0:00] ## - /lfskernel/sources/boot/LVM2.2.02.177/test/shell/lvcreate-usage.sh:19
| [ 0:00] ## 1 STACKTRACE() called from /lfskernel/sources/boot/LVM2.2.02.177/test/shell/lvcreate-usage.sh:19
| [ 0:00] <======== Info ========>
| [ 0:00] ## DMINFO:   Name             Maj Min Stat Open Targ Event  UUID                                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv4   253   5 L--w    0    1      0 TEST-@PREFIX@pv4                                                 
| [ 0:00] ## DMINFO:   @PREFIX@pv3   253   4 L--w    0    1      0 TEST-@PREFIX@pv3                                                 
| [ 0:00] ## DMINFO:   @PREFIX@pv2   253   3 L--w    0    1      0 TEST-@PREFIX@pv2                                                 
| [ 0:00] ## DMINFO:   @PREFIX@pv1   253   6 L--w    0    1      0 TEST-@PREFIX@pv1                                                 
| [ 0:00] <======== Active table ========>
| [ 0:00] ## DMTABLE:  @PREFIX@pv4: 0 69632 linear 7:0 210944
| [ 0:00] ## DMTABLE:  @PREFIX@pv3: 0 69632 linear 7:0 141312
| [ 0:00] ## DMTABLE:  @PREFIX@pv2: 0 69632 linear 7:0 71680
| [ 0:00] ## DMTABLE:  @PREFIX@pv1: 0 69632 linear 7:0 2048
| [ 0:00] <======== Inactive table ========>
| [ 0:00] ## DMITABLE: @PREFIX@pv4: 
| [ 0:00] ## DMITABLE: @PREFIX@pv3: 
| [ 0:00] ## DMITABLE: @PREFIX@pv2: 
| [ 0:00] ## DMITABLE: @PREFIX@pv1: 
| [ 0:00] <======== Status ========>
| [ 0:00] ## DMSTATUS: @PREFIX@pv4: 0 69632 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv3: 0 69632 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv2: 0 69632 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv1: 0 69632 linear 
| [ 0:00] <======== Tree ========>
| [ 0:00] ## DMTREE:   @PREFIX@pv4 (253:5)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   @PREFIX@pv3 (253:4)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   @PREFIX@pv2 (253:3)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   @PREFIX@pv1 (253:6)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   LFS_vg-lfs (253:2)
| [ 0:00] ## DMTREE:    `- (8:16)
| [ 0:00] ## DMTREE:   centos-swap (253:1)
| [ 0:00] ## DMTREE:    `- (8:2)
| [ 0:00] ## DMTREE:   centos-root (253:0)
| [ 0:00] ## DMTREE:    `- (8:2)
| [ 0:00] <======== Recursive list of @TESTDIR@/dev ========>
| [ 0:00] ## LSLR:	@TESTDIR@/dev:
| [ 0:00] ## LSLR:	total 4
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 0 Feb 21 02:27 loop0
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 1 Feb 21 02:27 loop1
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 2 Feb 21 02:27 loop2
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 3 Feb 21 02:27 loop3
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 4 Feb 21 02:27 loop4
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 5 Feb 21 02:27 loop5
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 6 Feb 21 02:27 loop6
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 7 Feb 21 02:27 loop7
| [ 0:00] ## LSLR:	drwxr-xr-x 2 root root 4096 Feb 21 02:27 mapper
| [ 0:00] ## LSLR:	crw-r--r-- 1 root root 1, 3 Feb 21 02:27 testnull
| [ 0:00] ## LSLR:	
| [ 0:00] ## LSLR:	@TESTDIR@/dev/mapper:
| [ 0:00] ## LSLR:	total 0
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   6 Feb 21 02:27 @PREFIX@pv1
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   3 Feb 21 02:27 @PREFIX@pv2
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   4 Feb 21 02:27 @PREFIX@pv3
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   5 Feb 21 02:27 @PREFIX@pv4
| [ 0:00] ## LSLR:	crw------- 1 root root  10, 236 Feb 21 02:27 control
| [ 0:00] <======== Udev DB content ========>
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-0
| [ 0:00] ## UDEV:	N: dm-0
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-0
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-0
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=0
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-1
| [ 0:00] ## UDEV:	N: dm-1
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-1
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-1
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=1
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-2
| [ 0:00] ## UDEV:	N: dm-2
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-2
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-2
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=2
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-3
| [ 0:00] ## UDEV:	N: dm-3
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-3
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-3
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=3
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-4
| [ 0:00] ## UDEV:	N: dm-4
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-4
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-4
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=4
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-5
| [ 0:00] ## UDEV:	N: dm-5
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-5
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-5
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=5
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-6
| [ 0:00] ## UDEV:	N: dm-6
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-6
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-6
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=6
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/loop0
| [ 0:00] ## UDEV:	N: loop0
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/loop0
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/loop0
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=7
| [ 0:00] ## UDEV:	E: MINOR=0
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] <======== Script file "lvcreate-usage.sh" ========>
| [ 0:00] ## Line: 1 	 #!/usr/bin/env bash
| [ 0:00] ## Line: 2 	 
| [ 0:00] ## Line: 3 	 # Copyright (C) 2008-2013 Red Hat, Inc. All rights reserved.
| [ 0:00] ## Line: 4 	 #
| [ 0:00] ## Line: 5 	 # This copyrighted material is made available to anyone wishing to use,
| [ 0:00] ## Line: 6 	 # modify, copy, or redistribute it subject to the terms and conditions
| [ 0:00] ## Line: 7 	 # of the GNU General Public License v.2.
| [ 0:00] ## Line: 8 	 #
| [ 0:00] ## Line: 9 	 # You should have received a copy of the GNU General Public License
| [ 0:00] ## Line: 10 	 # along with this program; if not, write to the Free Software Foundation,
| [ 0:00] ## Line: 11 	 # Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA
| [ 0:00] ## Line: 12 	 
| [ 0:00] ## Line: 13 	 # 'Exercise some lvcreate diagnostics'
| [ 0:00] ## Line: 14 	 
| [ 0:00] ## Line: 15 	 SKIP_WITH_LVMLOCKD=1
| [ 0:00] ## Line: 16 	 
| [ 0:00] ## Line: 17 	 . lib/inittest
| [ 0:00] ## Line: 18 	 
| [ 0:00] ## Line: 19 	 aux prepare_pvs 4
| [ 0:00] ## Line: 20 	 get_devs
| [ 0:00] ## Line: 21 	 
| [ 0:00] ## Line: 22 	 aux pvcreate --metadatacopies 0 "$dev1"
| [ 0:00] ## Line: 23 	 aux vgcreate "$vg" "${DEVICES[@]}"
| [ 0:00] ## Line: 24 	 
| [ 0:00] ## Line: 25 	 invalid lvcreate --type free -l1 -n $lv1 $vg 2>err
| [ 0:00] ## Line: 26 	 grep "Invalid argument for --type" err
| [ 0:00] ## Line: 27 	 invalid lvcreate --type $RANDOM -l1 -n $lv1 $vg
| [ 0:00] ## Line: 28 	 invalid lvcreate --type unknown -l1 -n $lv1 $vg
| [ 0:00] ## Line: 29 	 
| [ 0:00] ## Line: 30 	 invalid lvcreate -L10000000000000000000 -n $lv $vg 2>&1 | tee err
| [ 0:00] ## Line: 31 	 grep "Size is too big" err
| [ 0:00] ## Line: 32 	 invalid lvcreate -L+-10 -n $lv $vg 2>&1 | tee err
| [ 0:00] ## Line: 33 	 grep "Multiple sign" err
| [ 0:00] ## Line: 34 	 invalid lvcreate -L-.1 -n $lv $vg  2>&1 | tee err
| [ 0:00] ## Line: 35 	 grep "Size may not be negative" err
| [ 0:00] ## Line: 36 	 invalid lvcreate -L..1 -n $lv $vg  2>&1 | tee err
| [ 0:00] ## Line: 37 	 grep "Can't parse size" err
| [ 0:00] ## Line: 38 	 
| [ 0:00] ## Line: 39 	 lvcreate --type linear -aey -m0 -l1 -n $lv1 $vg
| [ 0:00] ## Line: 40 	 lvcreate --type snapshot -l1 -n $lv2 $vg/$lv1
| [ 0:00] ## Line: 41 	 # Supporting decimal point with size
| [ 0:00] ## Line: 42 	 lvcreate -L.1 -n $lv3 $vg
| [ 0:00] ## Line: 43 	 
| [ 0:00] ## Line: 44 	 # Reject repeated invocation (run 2 times) (bz178216)
| [ 0:00] ## Line: 45 	 lvcreate -n $lv -l 4 $vg
| [ 0:00] ## Line: 46 	 not lvcreate -n $lv -l 4 $vg
| [ 0:00] ## Line: 47 	 lvremove -ff $vg/$lv
| [ 0:00] ## Line: 48 	 # Try to remove it again - should fail (but not segfault)
| [ 0:00] ## Line: 49 	 not lvremove -ff $vg/$lv
| [ 0:00] ## Line: 50 	 
| [ 0:00] ## Line: 51 	 # Reject a negative stripe_size
| [ 0:00] ## Line: 52 	 invalid lvcreate -L 64m -n $lv -i2 --stripesize -4 $vg 2>err;
| [ 0:00] ## Line: 53 	 grep "may not be negative" err
| [ 0:00] ## Line: 54 	 
| [ 0:00] ## Line: 55 	 # Reject a too-large stripesize
| [ 0:00] ## Line: 56 	 invalid lvcreate -L 64m -n $lv -i2 --stripesize 4294967291 $vg 2>err
| [ 0:00] ## Line: 57 	 grep "Stripe size cannot be larger than" err
| [ 0:00] ## Line: 58 	 
| [ 0:00] ## Line: 59 	 # w/single stripe succeeds with diagnostics to stdout
| [ 0:00] ## Line: 60 	 lvcreate -L 64m -n $lv -i1 --stripesize 4 $vg 2> err | tee out
| [ 0:00] ## Line: 61 	 grep "Ignoring stripesize argument with single stripe" out
| [ 0:00] ## Line: 62 	 lvdisplay $vg
| [ 0:00] ## Line: 63 	 lvremove -ff $vg
| [ 0:00] ## Line: 64 	 
| [ 0:00] ## Line: 65 	 # w/default (64KB) stripe size succeeds with diagnostics to stdout
| [ 0:00] ## Line: 66 	 lvcreate -L 64m -n $lv -i2 $vg > out
| [ 0:00] ## Line: 67 	 grep "Using default stripesize" out
| [ 0:00] ## Line: 68 	 lvdisplay $vg
| [ 0:00] ## Line: 69 	 check lv_field $vg/$lv stripesize "64.00k"
| [ 0:00] ## Line: 70 	 lvremove -ff $vg
| [ 0:00] ## Line: 71 	 
| [ 0:00] ## Line: 72 	 # Reject an invalid number of stripes
| [ 0:00] ## Line: 73 	 invalid lvcreate -L 64m -n $lv -i129 $vg 2>err
| [ 0:00] ## Line: 74 	 grep "Number of stripes (129) must be between 1 and 128" err
| [ 0:00] ## Line: 75 	 
| [ 0:00] ## Line: 76 	 # Reject an invalid stripe size
| [ 0:00] ## Line: 77 	 invalid lvcreate -L 64m -n $lv -i2 --stripesize 3 $vg 2>err
| [ 0:00] ## Line: 78 	 grep "Invalid stripe size" err
| [ 0:00] ## Line: 79 	 # Verify that the LV was not created via lvdisplay empty output
| [ 0:00] ## Line: 80 	 test -z "$(lvdisplay $vg)"
| [ 0:00] ## Line: 81 	 
| [ 0:00] ## Line: 82 	 # Setting max_lv works. (bz490298)
| [ 0:00] ## Line: 83 	 check vg_field $vg max_lv "0"
| [ 0:00] ## Line: 84 	 vgchange -l 3 $vg
| [ 0:00] ## Line: 85 	 check vg_field $vg max_lv "3"
| [ 0:00] ## Line: 86 	 lvcreate -aey -l1 -n $lv1 $vg
| [ 0:00] ## Line: 87 	 lvcreate -l1 -s -n $lv2 $vg/$lv1
| [ 0:00] ## Line: 88 	 lvcreate -l1 -n $lv3 $vg
| [ 0:00] ## Line: 89 	 fail lvcreate -l1 -n $lv4 $vg
| [ 0:00] ## Line: 90 	 lvremove -ff $vg/$lv3
| [ 0:00] ## Line: 91 	 
| [ 0:00] ## Line: 92 	 # Check snapshot of inactive origin
| [ 0:00] ## Line: 93 	 lvchange -an $vg/$lv1
| [ 0:00] ## Line: 94 	 lvcreate -l1 -s -n $lv3 $vg/$lv1
| [ 0:00] ## Line: 95 	 fail lvcreate -l1 -n $lv4 $vg
| [ 0:00] ## Line: 96 	 fail lvcreate -l1 --type mirror -m1 -n $lv4 $vg
| [ 0:00] ## Line: 97 	 
| [ 0:00] ## Line: 98 	 lvremove -ff $vg/$lv3
| [ 0:00] ## Line: 99 	 lvcreate -aey -l1 --type mirror -m1 -n $lv3 $vg
| [ 0:00] ## Line: 100 	 not lvcreate -l1 -n $lv4 $vg
| [ 0:00] ## Line: 101 	 not lvcreate -l1 --type mirror -m1 -n $lv4 $vg
| [ 0:00] ## Line: 102 	 
| [ 0:00] ## Line: 103 	 lvconvert -m0 $vg/$lv3
| [ 0:00] ## Line: 104 	 lvconvert -m2 --type mirror -i 1 $vg/$lv3
| [ 0:00] ## Line: 105 	 lvconvert -m1 $vg/$lv3
| [ 0:00] ## Line: 106 	 
| [ 0:00] ## Line: 107 	 fail vgchange -l 2
| [ 0:00] ## Line: 108 	 check vg_field $vg max_lv "3"
| [ 0:00] ## Line: 109 	 vgchange -l 4
| [ 0:00] ## Line: 110 	 check vg_field $vg max_lv "4"
| [ 0:00] ## Line: 111 	 
| [ 0:00] ## Line: 112 	 lvremove -ff $vg
| [ 0:00] ## Line: 113 	 vgchange -l 0 $vg
| [ 0:00] ## Line: 114 	 check vg_field $vg max_lv "0"
| [ 0:00] ## Line: 115 	 
| [ 0:00] ## Line: 116 	 # Rejects invalid chunksize, accepts between 4K and 512K
| [ 0:00] ## Line: 117 	 # and validate origin_size
| [ 0:00] ## Line: 118 	 lvcreate -aey -L 32m -n $lv1 $vg
| [ 0:00] ## Line: 119 	 not lvcreate -L 8m -n $lv2 -s --chunksize 3k $vg/$lv1
| [ 0:00] ## Line: 120 	 not lvcreate -L 8m -n $lv2 -s --chunksize 1024k $vg/$lv1
| [ 0:00] ## Line: 121 	 lvcreate -L 8m -n $lv2 -s --chunksize 4k $vg/$lv1
| [ 0:00] ## Line: 122 	 check lv_field $vg/$lv2 chunk_size "4.00k"
| [ 0:00] ## Line: 123 	 check lv_field $vg/$lv2 origin_size "32.00m"
| [ 0:00] ## Line: 124 	 lvcreate -L 8m -n $lv3 -s --chunksize 512k $vg/$lv1
| [ 0:00] ## Line: 125 	 check lv_field $vg/$lv3 chunk_size "512.00k"
| [ 0:00] ## Line: 126 	 check lv_field $vg/$lv3 origin_size "32.00m"
| [ 0:00] ## Line: 127 	 lvremove -f $vg
| [ 0:00] ## Line: 128 	 
| [ 0:00] ## Line: 129 	 # Mirror regionsize must be
| [ 0:00] ## Line: 130 	 # - nonzero (bz186013)
| [ 0:00] ## Line: 131 	 # - a power of 2 and a multiple of page size
| [ 0:00] ## Line: 132 	 # - <= size of LV
| [ 0:00] ## Line: 133 	 invalid lvcreate --type mirror -m 1 -L 32m -n $lv -R 0 $vg 2>err
| [ 0:00] ## Line: 134 	 grep "may not be zero" err
| [ 0:00] ## Line: 135 	 invalid lvcreate --type mirror -m 1 -L 32m -n $lv -R 11k $vg
| [ 0:00] ## Line: 136 	 invalid lvcreate --type mirror -m 1 -L 32m -n $lv -R 1k $vg
| [ 0:00] ## Line: 137 	 lvcreate -aey -L 32m -n $lv --regionsize 128m  --type mirror -m 1 $vg
| [ 0:00] ## Line: 138 	 check lv_field $vg/$lv regionsize "32.00m"
| [ 0:00] ## Line: 139 	 lvremove -f $vg
| [ 0:00] ## Line: 140 	 lvcreate -aey -L 32m -n $lv --regionsize 4m --type mirror -m 1 $vg
| [ 0:00] ## Line: 141 	 check lv_field $vg/$lv regionsize "4.00m"
| [ 0:00] ## Line: 142 	 
| [ 0:00] ## Line: 143 	 # -m0 is creating non-mirrored segment and give info about redundant option
| [ 0:00] ## Line: 144 	 lvcreate -m 0 -l1 -n $lv1 $vg 2>&1 | tee err
| [ 0:00] ## Line: 145 	 grep "Redundant" err
| [ 0:00] ## Line: 146 	 check lv_field $vg/$lv1 segtype "linear"
| [ 0:00] ## Line: 147 	 lvremove -ff $vg
| [ 0:00] ## Line: 148 	 
| [ 0:00] ## Line: 149 	 # Old --type snapshot works with -s
| [ 0:00] ## Line: 150 	 lvcreate --type snapshot -s -V64 -L32 -n $lv1 $vg
| [ 0:00] ## Line: 151 	 check lv_field $vg/$lv1 segtype "linear"
| [ 0:00] ## Line: 152 	 lvcreate --type snapshot -V64 -L32 -n $lv2 $vg
| [ 0:00] ## Line: 153 	 check lv_field $vg/$lv2 segtype "linear"
| [ 0:00] ## Line: 154 	 lvremove -ff $vg
| [ 0:00] ## Line: 155 	 
| [ 0:00] ## Line: 156 	 # --virtualoriginsize  always makes old snapshot
| [ 0:00] ## Line: 157 	 lvcreate -s --virtualoriginsize 64m -L 32m -n $lv1 $vg
| [ 0:00] ## Line: 158 	 check lv_field $vg/$lv1 segtype "linear"
| [ 0:00] ## Line: 159 	 lvrename $vg/$lv1 $vg/$lv2
| [ 0:00] ## Line: 160 	 lvcreate -s --virtualoriginsize 64m -L 32m -n $lv1 $vg
| [ 0:00] ## Line: 161 	 lvchange -a n $vg/$lv1
| [ 0:00] ## Line: 162 	 lvremove -ff $vg/$lv1
| [ 0:00] ## Line: 163 	 lvremove -ff $vg
| [ 0:00] ## Line: 164 	 
| [ 0:00] ## Line: 165 	 # readahead default (auto), none, #, auto
| [ 0:00] ## Line: 166 	 lvcreate -L 8 -n $lv1 $vg
| [ 0:00] ## Line: 167 	 check lv_field $vg/$lv1 lv_read_ahead "auto"
| [ 0:00] ## Line: 168 	 lvcreate -L 8 -n $lv2 --readahead none $vg
| [ 0:00] ## Line: 169 	 check lv_field $vg/$lv2 lv_read_ahead "0"
| [ 0:00] ## Line: 170 	 check lv_field $vg/$lv2 lv_kernel_read_ahead "0"
| [ 0:00] ## Line: 171 	 lvcreate -L 8 -n $lv3 --readahead 8k $vg
| [ 0:00] ## Line: 172 	 check lv_field $vg/$lv3 lv_read_ahead "8.00k"
| [ 0:00] ## Line: 173 	 check lv_field $vg/$lv3 lv_kernel_read_ahead "8.00k"
| [ 0:00] ## Line: 174 	 lvcreate -L 8 -n $lv4 --readahead auto $vg
| [ 0:00] ## Line: 175 	 check lv_field $vg/$lv4 lv_read_ahead "auto"
| [ 0:00] ## Line: 176 	 check lv_field $vg/$lv4 lv_kernel_read_ahead "128.00k"
| [ 0:00] ## Line: 177 	 lvcreate -L 8 -n $lv5 -i2 --stripesize 16k --readahead auto $vg
| [ 0:00] ## Line: 178 	 check lv_field $vg/$lv5 lv_read_ahead "auto"
| [ 0:00] ## Line: 179 	 check lv_field $vg/$lv5 lv_kernel_read_ahead "128.00k"
| [ 0:00] ## Line: 180 	 lvcreate -L 8 -n $lv6 -i2 --stripesize 128k --readahead auto $vg
| [ 0:00] ## Line: 181 	 check lv_field $vg/$lv6 lv_read_ahead "auto"
| [ 0:00] ## Line: 182 	 check lv_field $vg/$lv6 lv_kernel_read_ahead "512.00k"
| [ 0:00] ## Line: 183 	 lvremove -ff $vg
| [ 0:00] ## Line: 184 	 
| [ 0:00] ## Line: 185 	 #
| [ 0:00] ## Line: 186 	 # Validate --major --minor,  we need to know VG, thus failing
| [ 0:00] ## Line: 187 	 #
| [ 0:00] ## Line: 188 	 fail lvcreate -My --major 234 -l1 $vg
| [ 0:00] ## Line: 189 	 # cannot specify --major or --minor with -Mn
| [ 0:00] ## Line: 190 	 fail lvcreate -Mn --major 234 -l1 $vg
| [ 0:00] ## Line: 191 	 fail lvcreate --persistent n --minor 234 -l1 $vg
| [ 0:00] ## Line: 192 	 # out-of-range minor value
| [ 0:00] ## Line: 193 	 fail lvcreate --minor 9999999 -l1 $vg
| [ 0:00] ## Line: 194 	 if aux kernel_at_least 2 4 0; then
| [ 0:00] ## Line: 195 	 # On >2.4 we ignore --major
| [ 0:00] ## Line: 196 	 lvcreate --major 234 -l1 $vg 2>&1 | tee err;
| [ 0:00] ## Line: 197 	 grep "Ignoring" err
| [ 0:00] ## Line: 198 	 # Try some bigger possibly unused minor
| [ 0:00] ## Line: 199 	 if test ! -d /sys/block/dm-2345; then
| [ 0:00] ## Line: 200 	 	lvcreate --minor 2345 -l1 -n $lv1 $vg
| [ 0:00] ## Line: 201 	 	check lv_field $vg/$lv1 lv_kernel_minor "2345"
| [ 0:00] ## Line: 202 	 fi
| [ 0:00] ## Line: 203 	 if test ! -d /sys/block/dm-23456; then
| [ 0:00] ## Line: 204 	 	lvcreate -My --minor 23456 -j 122 -l1 -n $lv2 $vg
| [ 0:00] ## Line: 205 	 	check lv_field $vg/$lv2 lv_kernel_minor "23456"
| [ 0:00] ## Line: 206 	 fi
| [ 0:00] ## Line: 207 	 fi # 2.4
| [ 0:00] ## Line: 208 	 lvremove -f $vg
| [ 0:00] ## Line: 209 	 
| [ 0:00] ## Line: 210 	 # prohibited names
| [ 0:00] ## Line: 211 	 for i in pvmove snapshot ; do
| [ 0:00] ## Line: 212 	 	invalid lvcreate -l1 -n ${i}1 $vg
| [ 0:00] ## Line: 213 	 done
| [ 0:00] ## Line: 214 	 for i in _cdata _cmeta _mimage _mlog _pmspare _tdata _tmeta _vorigin ; do
| [ 0:00] ## Line: 215 	 	invalid lvcreate -l1 -n s_${i}_1 $vg
| [ 0:00] ## Line: 216 	 done
| [ 0:00] ## Line: 217 	 
| [ 0:00] ## Line: 218 	 # Check invalid error for pool-only options
| [ 0:00] ## Line: 219 	 invalid lvcreate --poolmetadataspare y -l1 $vg
| [ 0:00] ## Line: 220 	 invalid lvcreate --poolmetadatasize 10 -l1 $vg
| [ 0:00] ## Line: 221 	 invalid lvcreate --discards passdown -l1 $vg
| [ 0:00] aux teardown
| [ 0:00] #lvcreate-usage.sh:1+ aux teardown
| [ 0:00] ## teardown.........ok
###       failed: [ndev-vanilla] shell/lvcreate-usage.sh

| [ 0:00] Library version:   1.02.146 (2017-12-18)
| [ 0:00] Driver version:    4.35.0
| [ 0:00] Kernel is Linux localhost.localdomain 3.10.0-693.11.1.el7.x86_64 #1 SMP Mon Dec 4 23:52:40 UTC 2017 x86_64 GNU/Linux
| [ 0:00] Selinux mode is not installed.
| [ 0:00]               total        used        free      shared  buff/cache   available
| [ 0:00] Mem:           7822        1079        4147          10        2596        6436
| [ 0:00] Swap:          4095           0        4095
| [ 0:00] Filesystem      Size  Used Avail Use% Mounted on
| [ 0:00] /dev/sdc1        18G  8.4G  8.4G  50% /
| [ 0:00] /dev/sdd1        51G  6.1G   43G  13% /lfskernel
| [ 0:00] devtmpfs        3.9G     0  3.9G   0% /dev
| [ 0:00] tmpfs           3.9G     0  3.9G   0% /run
| [ 0:00] @TESTDIR=/tmp/LVMTEST6611.xrGozm14U8
| [ 0:00] @PREFIX=LVMTEST6611
| [ 0:00] ## LVMCONF: activation {
| [ 0:00] ## LVMCONF:     checks = 1
| [ 0:00] ## LVMCONF:     monitoring = 0
| [ 0:00] ## LVMCONF:     polling_interval = 1
| [ 0:00] ## LVMCONF:     raid_region_size = 512
| [ 0:00] ## LVMCONF:     retry_deactivation = 1
| [ 0:00] ## LVMCONF:     snapshot_autoextend_percent = 50
| [ 0:00] ## LVMCONF:     snapshot_autoextend_threshold = 50
| [ 0:00] ## LVMCONF:     udev_rules = 1
| [ 0:00] ## LVMCONF:     udev_sync = 1
| [ 0:00] ## LVMCONF:     verify_udev_operations = 1
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: allocation {
| [ 0:00] ## LVMCONF:     wipe_signatures_when_zeroing_new_lvs = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: backup {
| [ 0:00] ## LVMCONF:     archive = 0
| [ 0:00] ## LVMCONF:     backup = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: devices {
| [ 0:00] ## LVMCONF:     cache_dir = "@TESTDIR@/etc"
| [ 0:00] ## LVMCONF:     default_data_alignment = 1
| [ 0:00] ## LVMCONF:     dir = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     filter = "a|.*|"
| [ 0:00] ## LVMCONF:     global_filter = [ "a|@TESTDIR@/dev/mapper/@PREFIX@.*pv[0-9_]*$|", "r|.*|" ]
| [ 0:00] ## LVMCONF:     md_component_detection  = 0
| [ 0:00] ## LVMCONF:     scan = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     sysfs_scan = 1
| [ 0:00] ## LVMCONF:     write_cache_state = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: dmeventd {
| [ 0:00] ## LVMCONF:     executable = "/sources/boot/LVM2.2.02.177/test/lib/dmeventd"
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: global {
| [ 0:00] ## LVMCONF:     abort_on_internal_errors = 1
| [ 0:00] ## LVMCONF:     cache_check_executable = "/usr/sbin/cache_check"
| [ 0:00] ## LVMCONF:     cache_dump_executable = "/usr/sbin/cache_dump"
| [ 0:00] ## LVMCONF:     cache_repair_executable = "/usr/sbin/cache_repair"
| [ 0:00] ## LVMCONF:     detect_internal_vg_cache_corruption = 1
| [ 0:00] ## LVMCONF:     fallback_to_local_locking = 0
| [ 0:00] ## LVMCONF:     fsadm_executable = "/sources/boot/LVM2.2.02.177/test/lib/fsadm"
| [ 0:00] ## LVMCONF:     library_dir = "@TESTDIR@/lib"
| [ 0:00] ## LVMCONF:     locking_dir = "@TESTDIR@/var/lock/lvm"
| [ 0:00] ## LVMCONF:     locking_type=1
| [ 0:00] ## LVMCONF:     notify_dbus = 0
| [ 0:00] ## LVMCONF:     si_unit_consistency = 1
| [ 0:00] ## LVMCONF:     thin_check_executable = "/usr/sbin/thin_check"
| [ 0:00] ## LVMCONF:     thin_dump_executable = "/usr/sbin/thin_dump"
| [ 0:00] ## LVMCONF:     thin_repair_executable = "/usr/sbin/thin_repair"
| [ 0:00] ## LVMCONF:     use_lvmetad = 0
| [ 0:00] ## LVMCONF:     use_lvmlockd = 0
| [ 0:00] ## LVMCONF:     use_lvmpolld = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: log {
| [ 0:00] ## LVMCONF:     activation = 1
| [ 0:00] ## LVMCONF:     file = "@TESTDIR@/debug.log"
| [ 0:00] ## LVMCONF:     indent = 1
| [ 0:00] ## LVMCONF:     level = 9
| [ 0:00] ## LVMCONF:     overwrite = 1
| [ 0:00] ## LVMCONF:     syslog = 0
| [ 0:00] ## LVMCONF:     verbose = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] <======== Processing test: "lvextend-percent-extents.sh" ========>
| [ 0:00] 
| [ 0:00] aux prepare_pvs 2 128
| [ 0:00] #lvextend-percent-extents.sh:20+ aux prepare_pvs 2 128
| [ 0:00] ## preparing loop device....ok (/dev/loop0)
| [ 0:00] ## preparing 2 devices...lib/utils: line 212: DM_UDEV_COOKIE: unbound variable
| [ 0:00] set +vx; STACKTRACE; set -vx
| [ 0:00] ##lvextend-percent-extents.sh:20+ set +vx
| [ 0:00] ## - /lfskernel/sources/boot/LVM2.2.02.177/test/shell/lvextend-percent-extents.sh:20
| [ 0:00] ## 1 STACKTRACE() called from /lfskernel/sources/boot/LVM2.2.02.177/test/shell/lvextend-percent-extents.sh:20
| [ 0:00] <======== Info ========>
| [ 0:00] ## DMINFO:   Name             Maj Min Stat Open Targ Event  UUID                                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv2   253   3 L--w    0    1      0 TEST-@PREFIX@pv2                                                 
| [ 0:00] ## DMINFO:   @PREFIX@pv1   253   4 L--w    0    1      0 TEST-@PREFIX@pv1                                                 
| [ 0:00] <======== Active table ========>
| [ 0:00] ## DMTABLE:  @PREFIX@pv2: 0 262144 linear 7:0 264192
| [ 0:00] ## DMTABLE:  @PREFIX@pv1: 0 262144 linear 7:0 2048
| [ 0:00] <======== Inactive table ========>
| [ 0:00] ## DMITABLE: @PREFIX@pv2: 
| [ 0:00] ## DMITABLE: @PREFIX@pv1: 
| [ 0:00] <======== Status ========>
| [ 0:00] ## DMSTATUS: @PREFIX@pv2: 0 262144 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv1: 0 262144 linear 
| [ 0:00] <======== Tree ========>
| [ 0:00] ## DMTREE:   @PREFIX@pv2 (253:3)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   @PREFIX@pv1 (253:4)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   LFS_vg-lfs (253:2)
| [ 0:00] ## DMTREE:    `- (8:16)
| [ 0:00] ## DMTREE:   centos-swap (253:1)
| [ 0:00] ## DMTREE:    `- (8:2)
| [ 0:00] ## DMTREE:   centos-root (253:0)
| [ 0:00] ## DMTREE:    `- (8:2)
| [ 0:00] <======== Recursive list of @TESTDIR@/dev ========>
| [ 0:00] ## LSLR:	@TESTDIR@/dev:
| [ 0:00] ## LSLR:	total 4
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 0 Feb 21 02:27 loop0
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 1 Feb 21 02:27 loop1
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 2 Feb 21 02:27 loop2
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 3 Feb 21 02:27 loop3
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 4 Feb 21 02:27 loop4
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 5 Feb 21 02:27 loop5
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 6 Feb 21 02:27 loop6
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 7 Feb 21 02:27 loop7
| [ 0:00] ## LSLR:	drwxr-xr-x 2 root root 4096 Feb 21 02:27 mapper
| [ 0:00] ## LSLR:	crw-r--r-- 1 root root 1, 3 Feb 21 02:27 testnull
| [ 0:00] ## LSLR:	
| [ 0:00] ## LSLR:	@TESTDIR@/dev/mapper:
| [ 0:00] ## LSLR:	total 0
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   4 Feb 21 02:27 @PREFIX@pv1
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   3 Feb 21 02:27 @PREFIX@pv2
| [ 0:00] ## LSLR:	crw------- 1 root root  10, 236 Feb 21 02:27 control
| [ 0:00] <======== Udev DB content ========>
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-0
| [ 0:00] ## UDEV:	N: dm-0
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-0
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-0
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=0
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-1
| [ 0:00] ## UDEV:	N: dm-1
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-1
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-1
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=1
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-2
| [ 0:00] ## UDEV:	N: dm-2
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-2
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-2
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=2
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-3
| [ 0:00] ## UDEV:	N: dm-3
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-3
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-3
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=3
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-4
| [ 0:00] ## UDEV:	N: dm-4
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-4
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-4
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=4
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/loop0
| [ 0:00] ## UDEV:	N: loop0
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/loop0
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/loop0
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=7
| [ 0:00] ## UDEV:	E: MINOR=0
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] <======== Script file "lvextend-percent-extents.sh" ========>
| [ 0:00] ## Line: 1 	 #!/usr/bin/env bash
| [ 0:00] ## Line: 2 	 
| [ 0:00] ## Line: 3 	 # Copyright (C) 2008-2011 Red Hat, Inc. All rights reserved.
| [ 0:00] ## Line: 4 	 #
| [ 0:00] ## Line: 5 	 # This copyrighted material is made available to anyone wishing to use,
| [ 0:00] ## Line: 6 	 # modify, copy, or redistribute it subject to the terms and conditions
| [ 0:00] ## Line: 7 	 # of the GNU General Public License v.2.
| [ 0:00] ## Line: 8 	 #
| [ 0:00] ## Line: 9 	 # You should have received a copy of the GNU General Public License
| [ 0:00] ## Line: 10 	 # along with this program; if not, write to the Free Software Foundation,
| [ 0:00] ## Line: 11 	 # Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA
| [ 0:00] ## Line: 12 	 
| [ 0:00] ## Line: 13 	 # 'Check extents percentage arguments'
| [ 0:00] ## Line: 14 	 
| [ 0:00] ## Line: 15 	 SKIP_WITH_LVMLOCKD=1
| [ 0:00] ## Line: 16 	 SKIP_WITH_LVMPOLLD=1
| [ 0:00] ## Line: 17 	 
| [ 0:00] ## Line: 18 	 . lib/inittest
| [ 0:00] ## Line: 19 	 
| [ 0:00] ## Line: 20 	 aux prepare_pvs 2 128
| [ 0:00] ## Line: 21 	 get_devs
| [ 0:00] ## Line: 22 	 
| [ 0:00] ## Line: 23 	 aux vgcreate "$vg" "${DEVICES[@]}"
| [ 0:00] ## Line: 24 	 
| [ 0:00] ## Line: 25 	 lvcreate -L64 -n $lv $vg
| [ 0:00] ## Line: 26 	 
| [ 0:00] ## Line: 27 	 # 'lvextend rejects both size and extents without PVs'
| [ 0:00] ## Line: 28 	 not lvextend -l 10 -L 64m $vg/$lv 2>err
| [ 0:00] ## Line: 29 	 grep "Please specify either size or extents but not both." err
| [ 0:00] ## Line: 30 	 
| [ 0:00] ## Line: 31 	 # 'lvextend rejects both size and extents with PVs'
| [ 0:00] ## Line: 32 	 not lvextend -l 10 -L 64m $vg/$lv "$dev1" 2>err
| [ 0:00] ## Line: 33 	 grep "Please specify either size or extents but not both." err
| [ 0:00] ## Line: 34 	 
| [ 0:00] ## Line: 35 	 # 'lvextend accepts no size or extents but one PV - bz154691'
| [ 0:00] ## Line: 36 	 lvextend $vg/$lv "$dev1" | tee out
| [ 0:00] ## Line: 37 	 grep "Logical volume $vg/$lv successfully resized" out
| [ 0:00] ## Line: 38 	 check pv_field "$dev1" pv_free "0"
| [ 0:00] ## Line: 39 	 
| [ 0:00] ## Line: 40 	 lvremove -f $vg/$lv
| [ 0:00] ## Line: 41 	 
| [ 0:00] ## Line: 42 	 # 'lvextend computes necessary free space correctly - bz213552'
| [ 0:00] ## Line: 43 	 vgsize=$(get vg_field $vg vg_extent_count)
| [ 0:00] ## Line: 44 	 lvcreate -l $vgsize  -n $lv $vg
| [ 0:00] ## Line: 45 	 lvreduce -f -l $(( vgsize / 2 )) $vg/$lv
| [ 0:00] ## Line: 46 	 lvextend -l $vgsize $vg/$lv
| [ 0:00] ## Line: 47 	 
| [ 0:00] ## Line: 48 	 # 'Reset LV to original size'
| [ 0:00] ## Line: 49 	 lvremove -f $vg/$lv
| [ 0:00] ## Line: 50 	 lvcreate -L 64m -n $lv $vg
| [ 0:00] ## Line: 51 	 
| [ 0:00] ## Line: 52 	 # 'lvextend accepts no size but extents 100%PVS and two PVs - bz154691'
| [ 0:00] ## Line: 53 	 lvextend -l +100%PVS $vg/$lv "$dev1" "$dev2" | tee out
| [ 0:00] ## Line: 54 	 grep "Logical volume $vg/$lv successfully resized" out
| [ 0:00] ## Line: 55 	 check pv_field "$dev1" pv_free "0"
| [ 0:00] ## Line: 56 	 check pv_field "$dev2" pv_free "0"
| [ 0:00] ## Line: 57 	 
| [ 0:00] ## Line: 58 	 # Exercise the range overlap code.  Allocate every 2 extents.
| [ 0:00] ## Line: 59 	 #
| [ 0:00] ## Line: 60 	 #      Physical Extents
| [ 0:00] ## Line: 61 	 #          1         2
| [ 0:00] ## Line: 62 	 #012345678901234567890123
| [ 0:00] ## Line: 63 	 #
| [ 0:00] ## Line: 64 	 #aaXXaaXXaaXXaaXXaaXXaaXX - (a)llocated
| [ 0:00] ## Line: 65 	 #rrrXXXrrrXXXrrrXXXrrrXXX - (r)ange on cmdline
| [ 0:00] ## Line: 66 	 #ooXXXXXXoXXXooXXXXXXoXXX - (o)verlap of range and allocated
| [ 0:00] ## Line: 67 	 #
| [ 0:00] ## Line: 68 	 # Key: a - allocated
| [ 0:00] ## Line: 69 	 #      F - free
| [ 0:00] ## Line: 70 	 #      r - part of a range on the cmdline
| [ 0:00] ## Line: 71 	 #      N - not on cmdline
| [ 0:00] ## Line: 72 	 #
| [ 0:00] ## Line: 73 	 # Create the LV with 12 extents, allocated every other 2 extents.
| [ 0:00] ## Line: 74 	 # Then extend it, with a range of PVs on the cmdline of every other 3 extents.
| [ 0:00] ## Line: 75 	 # Total number of extents should be 12 + overlap = 12 + 6 = 18.
| [ 0:00] ## Line: 76 	 # Thus, total size for the LV should be 18 * 4M = 72M
| [ 0:00] ## Line: 77 	 #
| [ 0:00] ## Line: 78 	 # 'Reset LV to 12 extents, allocate every other 2 extents'
| [ 0:00] ## Line: 79 	 create_pvs=$(for i in $(seq 0 4 20); do echo -n "$dev1:$i-$(( i + 1 )) "; done)
| [ 0:00] ## Line: 80 	 lvremove -f $vg/$lv
| [ 0:00] ## Line: 81 	 lvcreate -l 12 -n $lv $vg $create_pvs
| [ 0:00] ## Line: 82 	 check lv_field $vg/$lv lv_size "48.00m"
| [ 0:00] ## Line: 83 	 
| [ 0:00] ## Line: 84 	 # 'lvextend with partially allocated PVs and extents 100%PVS with PE ranges'
| [ 0:00] ## Line: 85 	 extend_pvs=$(for i in $(seq 0 6 18); do echo -n "$dev1:$i-$(( i + 2 )) "; done)
| [ 0:00] ## Line: 86 	 lvextend -l +100%PVS $vg/$lv $extend_pvs | tee out
| [ 0:00] ## Line: 87 	 grep "Logical volume $vg/$lv successfully resized" out
| [ 0:00] ## Line: 88 	 check lv_field $vg/$lv lv_size "72.00m"
| [ 0:00] ## Line: 89 	 
| [ 0:00] ## Line: 90 	 # Simple seg_count validation; initially create the LV with half the # of
| [ 0:00] ## Line: 91 	 # extents (should be 1 lv segment), extend it (should go to 2 segments),
| [ 0:00] ## Line: 92 	 # then reduce (should be back to 1)
| [ 0:00] ## Line: 93 	 # FIXME: test other segment fields such as seg_size, pvseg_start, pvseg_size
| [ 0:00] ## Line: 94 	 lvremove -f $vg/$lv
| [ 0:00] ## Line: 95 	 pe_count=$(get pv_field "$dev1" pv_pe_count)
| [ 0:00] ## Line: 96 	 pe1=$(( pe_count / 2 ))
| [ 0:00] ## Line: 97 	 lvcreate -l $pe1 -n $lv $vg
| [ 0:00] ## Line: 98 	 pesize=$(get lv_field $vg/$lv vg_extent_size --units b --nosuffix)
| [ 0:00] ## Line: 99 	 segsize=$(( pe1 * pesize / 1024 / 1024 ))m
| [ 0:00] ## Line: 100 	 check lv_field $vg/$lv seg_count "1"
| [ 0:00] ## Line: 101 	 check lv_field $vg/$lv seg_start "0"
| [ 0:00] ## Line: 102 	 check lv_field $vg/$lv seg_start_pe "0"
| [ 0:00] ## Line: 103 	 #check lv_field $vg/$lv seg_size $segsize
| [ 0:00] ## Line: 104 	 lvextend -l +$(( pe_count * 1 )) $vg/$lv
| [ 0:00] ## Line: 105 	 check lv_field $vg/$lv seg_count "2"
| [ 0:00] ## Line: 106 	 lvreduce -f -l -$(( pe_count * 1 )) $vg/$lv
| [ 0:00] ## Line: 107 	 check lv_field $vg/$lv seg_count "1"
| [ 0:00] ## Line: 108 	 
| [ 0:00] ## Line: 109 	 # do not reduce to 0 extents
| [ 0:00] ## Line: 110 	 lvremove -f $vg/$lv
| [ 0:00] ## Line: 111 	 lvcreate -i2 -I 64k -l10 -n $lv $vg
| [ 0:00] ## Line: 112 	 lvreduce -f -l1 $vg/$lv
| [ 0:00] ## Line: 113 	 check lv_field $vg/$lv lv_size "8.00m"
| [ 0:00] ## Line: 114 	 
| [ 0:00] ## Line: 115 	 vgremove -ff $vg
| [ 0:00] aux teardown
| [ 0:00] #lvextend-percent-extents.sh:1+ aux teardown
| [ 0:00] ## teardown.........ok
###       failed: [ndev-vanilla] shell/lvextend-percent-extents.sh
###      skipped: [ndev-vanilla] shell/lvextend-snapshot-dmeventd.sh

| [ 0:00] Library version:   1.02.146 (2017-12-18)
| [ 0:00] Driver version:    4.35.0
| [ 0:00] Kernel is Linux localhost.localdomain 3.10.0-693.11.1.el7.x86_64 #1 SMP Mon Dec 4 23:52:40 UTC 2017 x86_64 GNU/Linux
| [ 0:00] Selinux mode is not installed.
| [ 0:00]               total        used        free      shared  buff/cache   available
| [ 0:00] Mem:           7822        1079        4147          10        2596        6436
| [ 0:00] Swap:          4095           0        4095
| [ 0:00] Filesystem      Size  Used Avail Use% Mounted on
| [ 0:00] /dev/sdc1        18G  8.4G  8.4G  50% /
| [ 0:00] /dev/sdd1        51G  6.1G   43G  13% /lfskernel
| [ 0:00] devtmpfs        3.9G     0  3.9G   0% /dev
| [ 0:00] tmpfs           3.9G     0  3.9G   0% /run
| [ 0:00] @TESTDIR=/tmp/LVMTEST6849.kg4Hz2dBDz
| [ 0:00] @PREFIX=LVMTEST6849
| [ 0:00] ## LVMCONF: activation {
| [ 0:00] ## LVMCONF:     checks = 1
| [ 0:00] ## LVMCONF:     monitoring = 0
| [ 0:00] ## LVMCONF:     polling_interval = 1
| [ 0:00] ## LVMCONF:     raid_region_size = 512
| [ 0:00] ## LVMCONF:     retry_deactivation = 1
| [ 0:00] ## LVMCONF:     snapshot_autoextend_percent = 50
| [ 0:00] ## LVMCONF:     snapshot_autoextend_threshold = 50
| [ 0:00] ## LVMCONF:     udev_rules = 1
| [ 0:00] ## LVMCONF:     udev_sync = 1
| [ 0:00] ## LVMCONF:     verify_udev_operations = 1
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: allocation {
| [ 0:00] ## LVMCONF:     wipe_signatures_when_zeroing_new_lvs = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: backup {
| [ 0:00] ## LVMCONF:     archive = 0
| [ 0:00] ## LVMCONF:     backup = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: devices {
| [ 0:00] ## LVMCONF:     cache_dir = "@TESTDIR@/etc"
| [ 0:00] ## LVMCONF:     default_data_alignment = 1
| [ 0:00] ## LVMCONF:     dir = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     filter = "a|.*|"
| [ 0:00] ## LVMCONF:     global_filter = [ "a|@TESTDIR@/dev/mapper/@PREFIX@.*pv[0-9_]*$|", "r|.*|" ]
| [ 0:00] ## LVMCONF:     md_component_detection  = 0
| [ 0:00] ## LVMCONF:     scan = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     sysfs_scan = 1
| [ 0:00] ## LVMCONF:     write_cache_state = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: dmeventd {
| [ 0:00] ## LVMCONF:     executable = "/sources/boot/LVM2.2.02.177/test/lib/dmeventd"
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: global {
| [ 0:00] ## LVMCONF:     abort_on_internal_errors = 1
| [ 0:00] ## LVMCONF:     cache_check_executable = "/usr/sbin/cache_check"
| [ 0:00] ## LVMCONF:     cache_dump_executable = "/usr/sbin/cache_dump"
| [ 0:00] ## LVMCONF:     cache_repair_executable = "/usr/sbin/cache_repair"
| [ 0:00] ## LVMCONF:     detect_internal_vg_cache_corruption = 1
| [ 0:00] ## LVMCONF:     fallback_to_local_locking = 0
| [ 0:00] ## LVMCONF:     fsadm_executable = "/sources/boot/LVM2.2.02.177/test/lib/fsadm"
| [ 0:00] ## LVMCONF:     library_dir = "@TESTDIR@/lib"
| [ 0:00] ## LVMCONF:     locking_dir = "@TESTDIR@/var/lock/lvm"
| [ 0:00] ## LVMCONF:     locking_type=1
| [ 0:00] ## LVMCONF:     notify_dbus = 0
| [ 0:00] ## LVMCONF:     si_unit_consistency = 1
| [ 0:00] ## LVMCONF:     thin_check_executable = "/usr/sbin/thin_check"
| [ 0:00] ## LVMCONF:     thin_dump_executable = "/usr/sbin/thin_dump"
| [ 0:00] ## LVMCONF:     thin_repair_executable = "/usr/sbin/thin_repair"
| [ 0:00] ## LVMCONF:     use_lvmetad = 0
| [ 0:00] ## LVMCONF:     use_lvmlockd = 0
| [ 0:00] ## LVMCONF:     use_lvmpolld = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: log {
| [ 0:00] ## LVMCONF:     activation = 1
| [ 0:00] ## LVMCONF:     file = "@TESTDIR@/debug.log"
| [ 0:00] ## LVMCONF:     indent = 1
| [ 0:00] ## LVMCONF:     level = 9
| [ 0:00] ## LVMCONF:     overwrite = 1
| [ 0:00] ## LVMCONF:     syslog = 0
| [ 0:00] ## LVMCONF:     verbose = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] <======== Processing test: "lvextend-snapshot-policy.sh" ========>
| [ 0:00] 
| [ 0:00] which mkfs.ext2 || skip
| [ 0:00] #lvextend-snapshot-policy.sh:18+ which mkfs.ext2
| [ 0:00] /sbin/mkfs.ext2
| [ 0:00] 
| [ 0:00] extend() {
| [ 0:00] 	lvextend --use-policies --config "activation { snapshot_autoextend_threshold = $1 }" $vg/snap
| [ 0:00] }
| [ 0:00] 
| [ 0:00] write() {
| [ 0:00] 	mount "$DM_DEV_DIR/$vg/snap" mnt
| [ 0:00] 	dd if=/dev/zero of="mnt/file$1" bs=1k count=$2
| [ 0:00] 	umount mnt
| [ 0:00] }
| [ 0:00] 
| [ 0:00] percent() {
| [ 0:00] 	get lv_field $vg/snap snap_percent | cut -d. -f1
| [ 0:00] }
| [ 0:00] 
| [ 0:00] # no dmeventd running in this test, testing --use-policies
| [ 0:00] aux prepare_vg 2
| [ 0:00] #lvextend-snapshot-policy.sh:35+ aux prepare_vg 2
| [ 0:00] ## preparing loop device....ok (/dev/loop0)
| [ 0:00] ## preparing 2 devices...lib/utils: line 212: DM_UDEV_COOKIE: unbound variable
| [ 0:00] set +vx; STACKTRACE; set -vx
| [ 0:00] ##lvextend-snapshot-policy.sh:35+ set +vx
| [ 0:00] ## - /lfskernel/sources/boot/LVM2.2.02.177/test/shell/lvextend-snapshot-policy.sh:35
| [ 0:00] ## 1 STACKTRACE() called from /lfskernel/sources/boot/LVM2.2.02.177/test/shell/lvextend-snapshot-policy.sh:35
| [ 0:00] <======== Info ========>
| [ 0:00] ## DMINFO:   Name             Maj Min Stat Open Targ Event  UUID                                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv2   253   3 L--w    0    1      0 TEST-@PREFIX@pv2                                                 
| [ 0:00] ## DMINFO:   @PREFIX@pv1   253   4 L--w    0    1      0 TEST-@PREFIX@pv1                                                 
| [ 0:00] <======== Active table ========>
| [ 0:00] ## DMTABLE:  @PREFIX@pv2: 0 69632 linear 7:0 71680
| [ 0:00] ## DMTABLE:  @PREFIX@pv1: 0 69632 linear 7:0 2048
| [ 0:00] <======== Inactive table ========>
| [ 0:00] ## DMITABLE: @PREFIX@pv2: 
| [ 0:00] ## DMITABLE: @PREFIX@pv1: 
| [ 0:00] <======== Status ========>
| [ 0:00] ## DMSTATUS: @PREFIX@pv2: 0 69632 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv1: 0 69632 linear 
| [ 0:00] <======== Tree ========>
| [ 0:00] ## DMTREE:   @PREFIX@pv2 (253:3)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   @PREFIX@pv1 (253:4)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   LFS_vg-lfs (253:2)
| [ 0:00] ## DMTREE:    `- (8:16)
| [ 0:00] ## DMTREE:   centos-swap (253:1)
| [ 0:00] ## DMTREE:    `- (8:2)
| [ 0:00] ## DMTREE:   centos-root (253:0)
| [ 0:00] ## DMTREE:    `- (8:2)
| [ 0:00] <======== Recursive list of @TESTDIR@/dev ========>
| [ 0:00] ## LSLR:	@TESTDIR@/dev:
| [ 0:00] ## LSLR:	total 4
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 0 Feb 21 02:27 loop0
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 1 Feb 21 02:27 loop1
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 2 Feb 21 02:27 loop2
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 3 Feb 21 02:27 loop3
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 4 Feb 21 02:27 loop4
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 5 Feb 21 02:27 loop5
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 6 Feb 21 02:27 loop6
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 7 Feb 21 02:27 loop7
| [ 0:00] ## LSLR:	drwxr-xr-x 2 root root 4096 Feb 21 02:27 mapper
| [ 0:00] ## LSLR:	crw-r--r-- 1 root root 1, 3 Feb 21 02:27 testnull
| [ 0:00] ## LSLR:	
| [ 0:00] ## LSLR:	@TESTDIR@/dev/mapper:
| [ 0:00] ## LSLR:	total 0
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   4 Feb 21 02:27 @PREFIX@pv1
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   3 Feb 21 02:27 @PREFIX@pv2
| [ 0:00] ## LSLR:	crw------- 1 root root  10, 236 Feb 21 02:27 control
| [ 0:00] <======== Udev DB content ========>
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-0
| [ 0:00] ## UDEV:	N: dm-0
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-0
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-0
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=0
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-1
| [ 0:00] ## UDEV:	N: dm-1
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-1
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-1
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=1
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-2
| [ 0:00] ## UDEV:	N: dm-2
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-2
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-2
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=2
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-3
| [ 0:00] ## UDEV:	N: dm-3
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-3
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-3
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=3
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-4
| [ 0:00] ## UDEV:	N: dm-4
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-4
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-4
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=4
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/loop0
| [ 0:00] ## UDEV:	N: loop0
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/loop0
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/loop0
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=7
| [ 0:00] ## UDEV:	E: MINOR=0
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] <======== Script file "lvextend-snapshot-policy.sh" ========>
| [ 0:00] ## Line: 1 	 #!/usr/bin/env bash
| [ 0:00] ## Line: 2 	 
| [ 0:00] ## Line: 3 	 # Copyright (C) 2010 Red Hat, Inc. All rights reserved.
| [ 0:00] ## Line: 4 	 #
| [ 0:00] ## Line: 5 	 # This copyrighted material is made available to anyone wishing to use,
| [ 0:00] ## Line: 6 	 # modify, copy, or redistribute it subject to the terms and conditions
| [ 0:00] ## Line: 7 	 # of the GNU General Public License v.2.
| [ 0:00] ## Line: 8 	 #
| [ 0:00] ## Line: 9 	 # You should have received a copy of the GNU General Public License
| [ 0:00] ## Line: 10 	 # along with this program; if not, write to the Free Software Foundation,
| [ 0:00] ## Line: 11 	 # Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA
| [ 0:00] ## Line: 12 	 
| [ 0:00] ## Line: 13 	 SKIP_WITH_LVMLOCKD=1
| [ 0:00] ## Line: 14 	 SKIP_WITH_LVMPOLLD=1
| [ 0:00] ## Line: 15 	 
| [ 0:00] ## Line: 16 	 . lib/inittest
| [ 0:00] ## Line: 17 	 
| [ 0:00] ## Line: 18 	 which mkfs.ext2 || skip
| [ 0:00] ## Line: 19 	 
| [ 0:00] ## Line: 20 	 extend() {
| [ 0:00] ## Line: 21 	 	lvextend --use-policies --config "activation { snapshot_autoextend_threshold = $1 }" $vg/snap
| [ 0:00] ## Line: 22 	 }
| [ 0:00] ## Line: 23 	 
| [ 0:00] ## Line: 24 	 write() {
| [ 0:00] ## Line: 25 	 	mount "$DM_DEV_DIR/$vg/snap" mnt
| [ 0:00] ## Line: 26 	 	dd if=/dev/zero of="mnt/file$1" bs=1k count=$2
| [ 0:00] ## Line: 27 	 	umount mnt
| [ 0:00] ## Line: 28 	 }
| [ 0:00] ## Line: 29 	 
| [ 0:00] ## Line: 30 	 percent() {
| [ 0:00] ## Line: 31 	 	get lv_field $vg/snap snap_percent | cut -d. -f1
| [ 0:00] ## Line: 32 	 }
| [ 0:00] ## Line: 33 	 
| [ 0:00] ## Line: 34 	 # no dmeventd running in this test, testing --use-policies
| [ 0:00] ## Line: 35 	 aux prepare_vg 2
| [ 0:00] ## Line: 36 	 
| [ 0:00] ## Line: 37 	 lvcreate -aey -L24 -n base $vg
| [ 0:00] ## Line: 38 	 mkfs.ext2 "$DM_DEV_DIR/$vg/base"
| [ 0:00] ## Line: 39 	 
| [ 0:00] ## Line: 40 	 lvcreate -s -L16 -n snap $vg/base
| [ 0:00] ## Line: 41 	 mkdir mnt
| [ 0:00] ## Line: 42 	 
| [ 0:00] ## Line: 43 	 write 1 4096
| [ 0:00] ## Line: 44 	 pre=$(percent)
| [ 0:00] ## Line: 45 	 extend 50
| [ 0:00] ## Line: 46 	 test "$pre" -eq "$(percent)"
| [ 0:00] ## Line: 47 	 
| [ 0:00] ## Line: 48 	 write 2 4096
| [ 0:00] ## Line: 49 	 pre=$(percent)
| [ 0:00] ## Line: 50 	 extend 50
| [ 0:00] ## Line: 51 	 test "$pre" -gt "$(percent)"
| [ 0:00] ## Line: 52 	 
| [ 0:00] ## Line: 53 	 vgremove -f $vg
| [ 0:00] aux teardown
| [ 0:00] #lvextend-snapshot-policy.sh:1+ aux teardown
| [ 0:00] ## teardown.........ok
###       failed: [ndev-vanilla] shell/lvextend-snapshot-policy.sh
###      skipped: [ndev-vanilla] shell/lvextend-thin-cache.sh
###      skipped: [ndev-vanilla] shell/lvextend-thin-data-dmeventd.sh
###      skipped: [ndev-vanilla] shell/lvextend-thin-full.sh
###      skipped: [ndev-vanilla] shell/lvextend-thin-metadata-dmeventd.sh
###      skipped: [ndev-vanilla] shell/lvextend-thin-raid.sh
###      skipped: [ndev-vanilla] shell/lvextend-thin.sh

| [ 0:00] Library version:   1.02.146 (2017-12-18)
| [ 0:00] Driver version:    4.35.0
| [ 0:00] Kernel is Linux localhost.localdomain 3.10.0-693.11.1.el7.x86_64 #1 SMP Mon Dec 4 23:52:40 UTC 2017 x86_64 GNU/Linux
| [ 0:00] Selinux mode is not installed.
| [ 0:00]               total        used        free      shared  buff/cache   available
| [ 0:00] Mem:           7822        1079        4147          10        2596        6436
| [ 0:00] Swap:          4095           0        4095
| [ 0:00] Filesystem      Size  Used Avail Use% Mounted on
| [ 0:00] /dev/sdc1        18G  8.4G  8.4G  50% /
| [ 0:00] /dev/sdd1        51G  6.1G   43G  13% /lfskernel
| [ 0:00] devtmpfs        3.9G     0  3.9G   0% /dev
| [ 0:00] tmpfs           3.9G     0  3.9G   0% /run
| [ 0:00] @TESTDIR=/tmp/LVMTEST7445.W9EEHG4kEI
| [ 0:00] @PREFIX=LVMTEST7445
| [ 0:00] ## LVMCONF: activation {
| [ 0:00] ## LVMCONF:     checks = 1
| [ 0:00] ## LVMCONF:     monitoring = 0
| [ 0:00] ## LVMCONF:     polling_interval = 1
| [ 0:00] ## LVMCONF:     raid_region_size = 512
| [ 0:00] ## LVMCONF:     retry_deactivation = 1
| [ 0:00] ## LVMCONF:     snapshot_autoextend_percent = 50
| [ 0:00] ## LVMCONF:     snapshot_autoextend_threshold = 50
| [ 0:00] ## LVMCONF:     udev_rules = 1
| [ 0:00] ## LVMCONF:     udev_sync = 1
| [ 0:00] ## LVMCONF:     verify_udev_operations = 1
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: allocation {
| [ 0:00] ## LVMCONF:     wipe_signatures_when_zeroing_new_lvs = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: backup {
| [ 0:00] ## LVMCONF:     archive = 0
| [ 0:00] ## LVMCONF:     backup = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: devices {
| [ 0:00] ## LVMCONF:     cache_dir = "@TESTDIR@/etc"
| [ 0:00] ## LVMCONF:     default_data_alignment = 1
| [ 0:00] ## LVMCONF:     dir = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     filter = "a|.*|"
| [ 0:00] ## LVMCONF:     global_filter = [ "a|@TESTDIR@/dev/mapper/@PREFIX@.*pv[0-9_]*$|", "r|.*|" ]
| [ 0:00] ## LVMCONF:     md_component_detection  = 0
| [ 0:00] ## LVMCONF:     scan = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     sysfs_scan = 1
| [ 0:00] ## LVMCONF:     write_cache_state = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: dmeventd {
| [ 0:00] ## LVMCONF:     executable = "/sources/boot/LVM2.2.02.177/test/lib/dmeventd"
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: global {
| [ 0:00] ## LVMCONF:     abort_on_internal_errors = 1
| [ 0:00] ## LVMCONF:     cache_check_executable = "/usr/sbin/cache_check"
| [ 0:00] ## LVMCONF:     cache_dump_executable = "/usr/sbin/cache_dump"
| [ 0:00] ## LVMCONF:     cache_repair_executable = "/usr/sbin/cache_repair"
| [ 0:00] ## LVMCONF:     detect_internal_vg_cache_corruption = 1
| [ 0:00] ## LVMCONF:     fallback_to_local_locking = 0
| [ 0:00] ## LVMCONF:     fsadm_executable = "/sources/boot/LVM2.2.02.177/test/lib/fsadm"
| [ 0:00] ## LVMCONF:     library_dir = "@TESTDIR@/lib"
| [ 0:00] ## LVMCONF:     locking_dir = "@TESTDIR@/var/lock/lvm"
| [ 0:00] ## LVMCONF:     locking_type=1
| [ 0:00] ## LVMCONF:     notify_dbus = 0
| [ 0:00] ## LVMCONF:     si_unit_consistency = 1
| [ 0:00] ## LVMCONF:     thin_check_executable = "/usr/sbin/thin_check"
| [ 0:00] ## LVMCONF:     thin_dump_executable = "/usr/sbin/thin_dump"
| [ 0:00] ## LVMCONF:     thin_repair_executable = "/usr/sbin/thin_repair"
| [ 0:00] ## LVMCONF:     use_lvmetad = 0
| [ 0:00] ## LVMCONF:     use_lvmlockd = 0
| [ 0:00] ## LVMCONF:     use_lvmpolld = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: log {
| [ 0:00] ## LVMCONF:     activation = 1
| [ 0:00] ## LVMCONF:     file = "@TESTDIR@/debug.log"
| [ 0:00] ## LVMCONF:     indent = 1
| [ 0:00] ## LVMCONF:     level = 9
| [ 0:00] ## LVMCONF:     overwrite = 1
| [ 0:00] ## LVMCONF:     syslog = 0
| [ 0:00] ## LVMCONF:     verbose = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] <======== Processing test: "lvm-init.sh" ========>
| [ 0:00] 
| [ 0:00] aux prepare_devs 5
| [ 0:00] #lvm-init.sh:22+ aux prepare_devs 5
| [ 0:00] ## preparing loop device....ok (/dev/loop0)
| [ 0:00] ## preparing 5 devices...lib/utils: line 212: DM_UDEV_COOKIE: unbound variable
| [ 0:00] set +vx; STACKTRACE; set -vx
| [ 0:00] ##lvm-init.sh:22+ set +vx
| [ 0:00] ## - /lfskernel/sources/boot/LVM2.2.02.177/test/shell/lvm-init.sh:22
| [ 0:00] ## 1 STACKTRACE() called from /lfskernel/sources/boot/LVM2.2.02.177/test/shell/lvm-init.sh:22
| [ 0:00] <======== Info ========>
| [ 0:00] ## DMINFO:   Name             Maj Min Stat Open Targ Event  UUID                                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv5   253   6 L--w    0    1      0 TEST-@PREFIX@pv5                                                 
| [ 0:00] ## DMINFO:   @PREFIX@pv4   253   4 L--w    0    1      0 TEST-@PREFIX@pv4                                                 
| [ 0:00] ## DMINFO:   @PREFIX@pv3   253   3 L--w    0    1      0 TEST-@PREFIX@pv3                                                 
| [ 0:00] ## DMINFO:   @PREFIX@pv2   253   7 L--w    0    1      0 TEST-@PREFIX@pv2                                                 
| [ 0:00] ## DMINFO:   @PREFIX@pv1   253   5 L--w    0    1      0 TEST-@PREFIX@pv1                                                 
| [ 0:00] <======== Active table ========>
| [ 0:00] ## DMTABLE:  @PREFIX@pv5: 0 69632 linear 7:0 280576
| [ 0:00] ## DMTABLE:  @PREFIX@pv4: 0 69632 linear 7:0 210944
| [ 0:00] ## DMTABLE:  @PREFIX@pv3: 0 69632 linear 7:0 141312
| [ 0:00] ## DMTABLE:  @PREFIX@pv2: 0 69632 linear 7:0 71680
| [ 0:00] ## DMTABLE:  @PREFIX@pv1: 0 69632 linear 7:0 2048
| [ 0:00] <======== Inactive table ========>
| [ 0:00] ## DMITABLE: @PREFIX@pv5: 
| [ 0:00] ## DMITABLE: @PREFIX@pv4: 
| [ 0:00] ## DMITABLE: @PREFIX@pv3: 
| [ 0:00] ## DMITABLE: @PREFIX@pv2: 
| [ 0:00] ## DMITABLE: @PREFIX@pv1: 
| [ 0:00] <======== Status ========>
| [ 0:00] ## DMSTATUS: @PREFIX@pv5: 0 69632 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv4: 0 69632 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv3: 0 69632 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv2: 0 69632 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv1: 0 69632 linear 
| [ 0:00] <======== Tree ========>
| [ 0:00] ## DMTREE:   @PREFIX@pv5 (253:6)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   @PREFIX@pv4 (253:4)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   @PREFIX@pv3 (253:3)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   @PREFIX@pv2 (253:7)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   @PREFIX@pv1 (253:5)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   LFS_vg-lfs (253:2)
| [ 0:00] ## DMTREE:    `- (8:16)
| [ 0:00] ## DMTREE:   centos-swap (253:1)
| [ 0:00] ## DMTREE:    `- (8:2)
| [ 0:00] ## DMTREE:   centos-root (253:0)
| [ 0:00] ## DMTREE:    `- (8:2)
| [ 0:00] <======== Recursive list of @TESTDIR@/dev ========>
| [ 0:00] ## LSLR:	@TESTDIR@/dev:
| [ 0:00] ## LSLR:	total 4
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 0 Feb 21 02:27 loop0
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 1 Feb 21 02:27 loop1
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 2 Feb 21 02:27 loop2
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 3 Feb 21 02:27 loop3
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 4 Feb 21 02:27 loop4
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 5 Feb 21 02:27 loop5
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 6 Feb 21 02:27 loop6
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 7 Feb 21 02:27 loop7
| [ 0:00] ## LSLR:	drwxr-xr-x 2 root root 4096 Feb 21 02:27 mapper
| [ 0:00] ## LSLR:	crw-r--r-- 1 root root 1, 3 Feb 21 02:27 testnull
| [ 0:00] ## LSLR:	
| [ 0:00] ## LSLR:	@TESTDIR@/dev/mapper:
| [ 0:00] ## LSLR:	total 0
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   5 Feb 21 02:27 @PREFIX@pv1
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   7 Feb 21 02:27 @PREFIX@pv2
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   3 Feb 21 02:27 @PREFIX@pv3
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   4 Feb 21 02:27 @PREFIX@pv4
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   6 Feb 21 02:27 @PREFIX@pv5
| [ 0:00] ## LSLR:	crw------- 1 root root  10, 236 Feb 21 02:27 control
| [ 0:00] <======== Udev DB content ========>
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-0
| [ 0:00] ## UDEV:	N: dm-0
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-0
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-0
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=0
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-1
| [ 0:00] ## UDEV:	N: dm-1
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-1
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-1
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=1
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-2
| [ 0:00] ## UDEV:	N: dm-2
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-2
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-2
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=2
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-3
| [ 0:00] ## UDEV:	N: dm-3
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-3
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-3
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=3
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-4
| [ 0:00] ## UDEV:	N: dm-4
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-4
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-4
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=4
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-5
| [ 0:00] ## UDEV:	N: dm-5
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-5
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-5
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=5
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-6
| [ 0:00] ## UDEV:	N: dm-6
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-6
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-6
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=6
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-7
| [ 0:00] ## UDEV:	N: dm-7
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-7
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-7
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=7
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/loop0
| [ 0:00] ## UDEV:	N: loop0
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/loop0
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/loop0
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=7
| [ 0:00] ## UDEV:	E: MINOR=0
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] <======== Script file "lvm-init.sh" ========>
| [ 0:00] ## Line: 1 	 #!/usr/bin/env bash
| [ 0:00] ## Line: 2 	 
| [ 0:00] ## Line: 3 	 # Copyright (C) 2008 Red Hat, Inc. All rights reserved.
| [ 0:00] ## Line: 4 	 #
| [ 0:00] ## Line: 5 	 # This copyrighted material is made available to anyone wishing to use,
| [ 0:00] ## Line: 6 	 # modify, copy, or redistribute it subject to the terms and conditions
| [ 0:00] ## Line: 7 	 # of the GNU General Public License v.2.
| [ 0:00] ## Line: 8 	 #
| [ 0:00] ## Line: 9 	 # You should have received a copy of the GNU General Public License
| [ 0:00] ## Line: 10 	 # along with this program; if not, write to the Free Software Foundation,
| [ 0:00] ## Line: 11 	 # Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA
| [ 0:00] ## Line: 12 	 
| [ 0:00] ## Line: 13 	 #
| [ 0:00] ## Line: 14 	 # tests lvm initialization, and especially negative tests of error paths
| [ 0:00] ## Line: 15 	 #
| [ 0:00] ## Line: 16 	 
| [ 0:00] ## Line: 17 	 SKIP_WITH_LVMLOCKD=1
| [ 0:00] ## Line: 18 	 SKIP_WITH_LVMPOLLD=1
| [ 0:00] ## Line: 19 	 
| [ 0:00] ## Line: 20 	 . lib/inittest
| [ 0:00] ## Line: 21 	 
| [ 0:00] ## Line: 22 	 aux prepare_devs 5
| [ 0:00] ## Line: 23 	 
| [ 0:00] ## Line: 24 	 # invalid units
| [ 0:00] ## Line: 25 	 not pvs --config 'global { units = "<" }'
| [ 0:00] aux teardown
| [ 0:00] #lvm-init.sh:1+ aux teardown
| [ 0:00] ## teardown.........ok
###       failed: [ndev-vanilla] shell/lvm-init.sh
###      skipped: [ndev-vanilla] shell/lvm1-basic.sh

| [ 0:00] Library version:   1.02.146 (2017-12-18)
| [ 0:00] Driver version:    4.35.0
| [ 0:00] Kernel is Linux localhost.localdomain 3.10.0-693.11.1.el7.x86_64 #1 SMP Mon Dec 4 23:52:40 UTC 2017 x86_64 GNU/Linux
| [ 0:00] Selinux mode is not installed.
| [ 0:00]               total        used        free      shared  buff/cache   available
| [ 0:00] Mem:           7822        1079        4147          10        2596        6436
| [ 0:00] Swap:          4095           0        4095
| [ 0:00] Filesystem      Size  Used Avail Use% Mounted on
| [ 0:00] /dev/sdc1        18G  8.4G  8.4G  50% /
| [ 0:00] /dev/sdd1        51G  6.1G   43G  13% /lfskernel
| [ 0:00] devtmpfs        3.9G     0  3.9G   0% /dev
| [ 0:00] tmpfs           3.9G     0  3.9G   0% /run
| [ 0:00] @TESTDIR=/tmp/LVMTEST7650.cbdMAo3aRj
| [ 0:00] @PREFIX=LVMTEST7650
| [ 0:00] ## LVMCONF: activation {
| [ 0:00] ## LVMCONF:     checks = 1
| [ 0:00] ## LVMCONF:     monitoring = 0
| [ 0:00] ## LVMCONF:     polling_interval = 1
| [ 0:00] ## LVMCONF:     raid_region_size = 512
| [ 0:00] ## LVMCONF:     retry_deactivation = 1
| [ 0:00] ## LVMCONF:     snapshot_autoextend_percent = 50
| [ 0:00] ## LVMCONF:     snapshot_autoextend_threshold = 50
| [ 0:00] ## LVMCONF:     udev_rules = 1
| [ 0:00] ## LVMCONF:     udev_sync = 1
| [ 0:00] ## LVMCONF:     verify_udev_operations = 1
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: allocation {
| [ 0:00] ## LVMCONF:     wipe_signatures_when_zeroing_new_lvs = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: backup {
| [ 0:00] ## LVMCONF:     archive = 0
| [ 0:00] ## LVMCONF:     backup = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: devices {
| [ 0:00] ## LVMCONF:     cache_dir = "@TESTDIR@/etc"
| [ 0:00] ## LVMCONF:     default_data_alignment = 1
| [ 0:00] ## LVMCONF:     dir = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     filter = "a|.*|"
| [ 0:00] ## LVMCONF:     global_filter = [ "a|@TESTDIR@/dev/mapper/@PREFIX@.*pv[0-9_]*$|", "r|.*|" ]
| [ 0:00] ## LVMCONF:     md_component_detection  = 0
| [ 0:00] ## LVMCONF:     scan = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     sysfs_scan = 1
| [ 0:00] ## LVMCONF:     write_cache_state = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: dmeventd {
| [ 0:00] ## LVMCONF:     executable = "/sources/boot/LVM2.2.02.177/test/lib/dmeventd"
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: global {
| [ 0:00] ## LVMCONF:     abort_on_internal_errors = 1
| [ 0:00] ## LVMCONF:     cache_check_executable = "/usr/sbin/cache_check"
| [ 0:00] ## LVMCONF:     cache_dump_executable = "/usr/sbin/cache_dump"
| [ 0:00] ## LVMCONF:     cache_repair_executable = "/usr/sbin/cache_repair"
| [ 0:00] ## LVMCONF:     detect_internal_vg_cache_corruption = 1
| [ 0:00] ## LVMCONF:     fallback_to_local_locking = 0
| [ 0:00] ## LVMCONF:     fsadm_executable = "/sources/boot/LVM2.2.02.177/test/lib/fsadm"
| [ 0:00] ## LVMCONF:     library_dir = "@TESTDIR@/lib"
| [ 0:00] ## LVMCONF:     locking_dir = "@TESTDIR@/var/lock/lvm"
| [ 0:00] ## LVMCONF:     locking_type=1
| [ 0:00] ## LVMCONF:     notify_dbus = 0
| [ 0:00] ## LVMCONF:     si_unit_consistency = 1
| [ 0:00] ## LVMCONF:     thin_check_executable = "/usr/sbin/thin_check"
| [ 0:00] ## LVMCONF:     thin_dump_executable = "/usr/sbin/thin_dump"
| [ 0:00] ## LVMCONF:     thin_repair_executable = "/usr/sbin/thin_repair"
| [ 0:00] ## LVMCONF:     use_lvmetad = 0
| [ 0:00] ## LVMCONF:     use_lvmlockd = 0
| [ 0:00] ## LVMCONF:     use_lvmpolld = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: log {
| [ 0:00] ## LVMCONF:     activation = 1
| [ 0:00] ## LVMCONF:     file = "@TESTDIR@/debug.log"
| [ 0:00] ## LVMCONF:     indent = 1
| [ 0:00] ## LVMCONF:     level = 9
| [ 0:00] ## LVMCONF:     overwrite = 1
| [ 0:00] ## LVMCONF:     syslog = 0
| [ 0:00] ## LVMCONF:     verbose = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] <======== Processing test: "lvmcache-exercise.sh" ========>
| [ 0:00] 
| [ 0:00] aux prepare_pvs 5
| [ 0:00] #lvmcache-exercise.sh:18+ aux prepare_pvs 5
| [ 0:00] ## preparing loop device....ok (/dev/loop0)
| [ 0:00] ## preparing 5 devices...lib/utils: line 212: DM_UDEV_COOKIE: unbound variable
| [ 0:00] set +vx; STACKTRACE; set -vx
| [ 0:00] ##lvmcache-exercise.sh:18+ set +vx
| [ 0:00] ## - /lfskernel/sources/boot/LVM2.2.02.177/test/shell/lvmcache-exercise.sh:18
| [ 0:00] ## 1 STACKTRACE() called from /lfskernel/sources/boot/LVM2.2.02.177/test/shell/lvmcache-exercise.sh:18
| [ 0:00] <======== Info ========>
| [ 0:00] ## DMINFO:   Name             Maj Min Stat Open Targ Event  UUID                                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv5   253   5 L--w    0    1      0 TEST-@PREFIX@pv5                                                 
| [ 0:00] ## DMINFO:   @PREFIX@pv4   253   6 L--w    0    1      0 TEST-@PREFIX@pv4                                                 
| [ 0:00] ## DMINFO:   @PREFIX@pv3   253   3 L--w    0    1      0 TEST-@PREFIX@pv3                                                 
| [ 0:00] ## DMINFO:   @PREFIX@pv2   253   7 L--w    0    1      0 TEST-@PREFIX@pv2                                                 
| [ 0:00] ## DMINFO:   @PREFIX@pv1   253   4 L--w    0    1      0 TEST-@PREFIX@pv1                                                 
| [ 0:00] <======== Active table ========>
| [ 0:00] ## DMTABLE:  @PREFIX@pv5: 0 69632 linear 7:0 280576
| [ 0:00] ## DMTABLE:  @PREFIX@pv4: 0 69632 linear 7:0 210944
| [ 0:00] ## DMTABLE:  @PREFIX@pv3: 0 69632 linear 7:0 141312
| [ 0:00] ## DMTABLE:  @PREFIX@pv2: 0 69632 linear 7:0 71680
| [ 0:00] ## DMTABLE:  @PREFIX@pv1: 0 69632 linear 7:0 2048
| [ 0:00] <======== Inactive table ========>
| [ 0:00] ## DMITABLE: @PREFIX@pv5: 
| [ 0:00] ## DMITABLE: @PREFIX@pv4: 
| [ 0:00] ## DMITABLE: @PREFIX@pv3: 
| [ 0:00] ## DMITABLE: @PREFIX@pv2: 
| [ 0:00] ## DMITABLE: @PREFIX@pv1: 
| [ 0:00] <======== Status ========>
| [ 0:00] ## DMSTATUS: @PREFIX@pv5: 0 69632 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv4: 0 69632 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv3: 0 69632 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv2: 0 69632 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv1: 0 69632 linear 
| [ 0:00] <======== Tree ========>
| [ 0:00] ## DMTREE:   @PREFIX@pv5 (253:5)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   @PREFIX@pv4 (253:6)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   @PREFIX@pv3 (253:3)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   @PREFIX@pv2 (253:7)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   LFS_vg-lfs (253:2)
| [ 0:00] ## DMTREE:    `- (8:16)
| [ 0:00] ## DMTREE:   @PREFIX@pv1 (253:4)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   centos-swap (253:1)
| [ 0:00] ## DMTREE:    `- (8:2)
| [ 0:00] ## DMTREE:   centos-root (253:0)
| [ 0:00] ## DMTREE:    `- (8:2)
| [ 0:00] <======== Recursive list of @TESTDIR@/dev ========>
| [ 0:00] ## LSLR:	@TESTDIR@/dev:
| [ 0:00] ## LSLR:	total 4
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 0 Feb 21 02:27 loop0
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 1 Feb 21 02:27 loop1
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 2 Feb 21 02:27 loop2
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 3 Feb 21 02:27 loop3
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 4 Feb 21 02:27 loop4
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 5 Feb 21 02:27 loop5
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 6 Feb 21 02:27 loop6
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 7 Feb 21 02:27 loop7
| [ 0:00] ## LSLR:	drwxr-xr-x 2 root root 4096 Feb 21 02:27 mapper
| [ 0:00] ## LSLR:	crw-r--r-- 1 root root 1, 3 Feb 21 02:27 testnull
| [ 0:00] ## LSLR:	
| [ 0:00] ## LSLR:	@TESTDIR@/dev/mapper:
| [ 0:00] ## LSLR:	total 0
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   4 Feb 21 02:27 @PREFIX@pv1
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   7 Feb 21 02:27 @PREFIX@pv2
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   3 Feb 21 02:27 @PREFIX@pv3
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   6 Feb 21 02:27 @PREFIX@pv4
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   5 Feb 21 02:27 @PREFIX@pv5
| [ 0:00] ## LSLR:	crw------- 1 root root  10, 236 Feb 21 02:27 control
| [ 0:00] <======== Udev DB content ========>
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-0
| [ 0:00] ## UDEV:	N: dm-0
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-0
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-0
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=0
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-1
| [ 0:00] ## UDEV:	N: dm-1
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-1
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-1
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=1
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-2
| [ 0:00] ## UDEV:	N: dm-2
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-2
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-2
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=2
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-3
| [ 0:00] ## UDEV:	N: dm-3
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-3
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-3
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=3
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-4
| [ 0:00] ## UDEV:	N: dm-4
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-4
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-4
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=4
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-5
| [ 0:00] ## UDEV:	N: dm-5
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-5
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-5
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=5
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-6
| [ 0:00] ## UDEV:	N: dm-6
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-6
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-6
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=6
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-7
| [ 0:00] ## UDEV:	N: dm-7
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-7
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-7
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=7
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/loop0
| [ 0:00] ## UDEV:	N: loop0
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/loop0
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/loop0
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=7
| [ 0:00] ## UDEV:	E: MINOR=0
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] <======== Script file "lvmcache-exercise.sh" ========>
| [ 0:00] ## Line: 1 	 #!/usr/bin/env bash
| [ 0:00] ## Line: 2 	 
| [ 0:00] ## Line: 3 	 # Copyright (C) 2008-2013 Red Hat, Inc. All rights reserved.
| [ 0:00] ## Line: 4 	 #
| [ 0:00] ## Line: 5 	 # This copyrighted material is made available to anyone wishing to use,
| [ 0:00] ## Line: 6 	 # modify, copy, or redistribute it subject to the terms and conditions
| [ 0:00] ## Line: 7 	 # of the GNU General Public License v.2.
| [ 0:00] ## Line: 8 	 #
| [ 0:00] ## Line: 9 	 # You should have received a copy of the GNU General Public License
| [ 0:00] ## Line: 10 	 # along with this program; if not, write to the Free Software Foundation,
| [ 0:00] ## Line: 11 	 # Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA
| [ 0:00] ## Line: 12 	 
| [ 0:00] ## Line: 13 	 SKIP_WITH_LVMLOCKD=1
| [ 0:00] ## Line: 14 	 SKIP_WITH_LVMPOLLD=1
| [ 0:00] ## Line: 15 	 
| [ 0:00] ## Line: 16 	 . lib/inittest
| [ 0:00] ## Line: 17 	 
| [ 0:00] ## Line: 18 	 aux prepare_pvs 5
| [ 0:00] ## Line: 19 	 get_devs
| [ 0:00] ## Line: 20 	 
| [ 0:00] ## Line: 21 	 vgcreate $vg1 "$dev1"
| [ 0:00] ## Line: 22 	 vgcreate $vg2 "$dev3" "$dev4" "$dev5"
| [ 0:00] ## Line: 23 	 
| [ 0:00] ## Line: 24 	 UUID1=$(get vg_field $vg1 uuid)
| [ 0:00] ## Line: 25 	 
| [ 0:00] ## Line: 26 	 aux disable_dev "$dev1"
| [ 0:00] ## Line: 27 	 pvscan
| [ 0:00] ## Line: 28 	 # dev1 is missing
| [ 0:00] ## Line: 29 	 fail pvs "${DEVICES[@]}"
| [ 0:00] ## Line: 30 	 
| [ 0:00] ## Line: 31 	 # create a new vg1 on dev2,
| [ 0:00] ## Line: 32 	 # so dev1 and dev2 have different VGs with the same name
| [ 0:00] ## Line: 33 	 vgcreate $vg1 "$dev2"
| [ 0:00] ## Line: 34 	 
| [ 0:00] ## Line: 35 	 UUID2=$(get vg_field $vg1 uuid)
| [ 0:00] ## Line: 36 	 
| [ 0:00] ## Line: 37 	 # Once dev1 is visible again, both VGs named "vg1" are visible.
| [ 0:00] ## Line: 38 	 aux enable_dev "$dev1"
| [ 0:00] ## Line: 39 	 
| [ 0:00] ## Line: 40 	 pvs "$dev1"
| [ 0:00] ## Line: 41 	 
| [ 0:00] ## Line: 42 	 # reappearing device (rhbz 995440)
| [ 0:00] ## Line: 43 	 lvcreate -aey -m2 --type mirror -l4 --alloc anywhere --corelog -n $lv1 $vg2
| [ 0:00] ## Line: 44 	 
| [ 0:00] ## Line: 45 	 aux disable_dev "$dev3"
| [ 0:00] ## Line: 46 	 lvconvert --yes --repair $vg2/$lv1
| [ 0:00] ## Line: 47 	 aux enable_dev "$dev3"
| [ 0:00] ## Line: 48 	 
| [ 0:00] ## Line: 49 	 # here it should fix any reappeared devices
| [ 0:00] ## Line: 50 	 lvs
| [ 0:00] ## Line: 51 	 
| [ 0:00] ## Line: 52 	 lvs -a $vg2 -o+devices 2>&1 | tee out
| [ 0:00] ## Line: 53 	 not grep reappeared out
| [ 0:00] ## Line: 54 	 
| [ 0:00] ## Line: 55 	 # This removes the first "vg1" using its uuid
| [ 0:00] ## Line: 56 	 vgremove -ff -S vg_uuid=$UUID1
| [ 0:00] ## Line: 57 	 
| [ 0:00] ## Line: 58 	 # This removes the second "vg1" using its name,
| [ 0:00] ## Line: 59 	 # now that there is only one VG with that name.
| [ 0:00] ## Line: 60 	 vgremove -ff $vg1 $vg2
| [ 0:00] ## Line: 61 	 
| [ 0:00] aux teardown
| [ 0:00] #lvmcache-exercise.sh:1+ aux teardown
| [ 0:00] ## teardown.........ok
###       failed: [ndev-vanilla] shell/lvmcache-exercise.sh
###      skipped: [ndev-vanilla] shell/lvmetad-ambiguous.sh
###      skipped: [ndev-vanilla] shell/lvmetad-autoshutdown.sh
###      skipped: [ndev-vanilla] shell/lvmetad-client-filter.sh
###      skipped: [ndev-vanilla] shell/lvmetad-disabled.sh
###      skipped: [ndev-vanilla] shell/lvmetad-dump.sh
###      skipped: [ndev-vanilla] shell/lvmetad-lvscan-cache.sh
###      skipped: [ndev-vanilla] shell/lvmetad-no-cluster.sh
###      skipped: [ndev-vanilla] shell/lvmetad-override.sh

| [ 0:00] Library version:   1.02.146 (2017-12-18)
| [ 0:00] Driver version:    4.35.0
| [ 0:00] Kernel is Linux localhost.localdomain 3.10.0-693.11.1.el7.x86_64 #1 SMP Mon Dec 4 23:52:40 UTC 2017 x86_64 GNU/Linux
| [ 0:00] Selinux mode is not installed.
| [ 0:00]               total        used        free      shared  buff/cache   available
| [ 0:00] Mem:           7822        1079        4146          10        2596        6436
| [ 0:00] Swap:          4095           0        4095
| [ 0:00] Filesystem      Size  Used Avail Use% Mounted on
| [ 0:00] /dev/sdc1        18G  8.4G  8.4G  50% /
| [ 0:00] /dev/sdd1        51G  6.1G   43G  13% /lfskernel
| [ 0:00] devtmpfs        3.9G     0  3.9G   0% /dev
| [ 0:00] tmpfs           3.9G     0  3.9G   0% /run
| [ 0:00] @TESTDIR=/tmp/LVMTEST7863.I6GBJVsQvZ
| [ 0:00] @PREFIX=LVMTEST7863
| [ 0:00] ## LVMCONF: activation {
| [ 0:00] ## LVMCONF:     checks = 1
| [ 0:00] ## LVMCONF:     monitoring = 0
| [ 0:00] ## LVMCONF:     polling_interval = 1
| [ 0:00] ## LVMCONF:     raid_region_size = 512
| [ 0:00] ## LVMCONF:     retry_deactivation = 1
| [ 0:00] ## LVMCONF:     snapshot_autoextend_percent = 50
| [ 0:00] ## LVMCONF:     snapshot_autoextend_threshold = 50
| [ 0:00] ## LVMCONF:     udev_rules = 1
| [ 0:00] ## LVMCONF:     udev_sync = 1
| [ 0:00] ## LVMCONF:     verify_udev_operations = 1
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: allocation {
| [ 0:00] ## LVMCONF:     wipe_signatures_when_zeroing_new_lvs = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: backup {
| [ 0:00] ## LVMCONF:     archive = 0
| [ 0:00] ## LVMCONF:     backup = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: devices {
| [ 0:00] ## LVMCONF:     cache_dir = "@TESTDIR@/etc"
| [ 0:00] ## LVMCONF:     default_data_alignment = 1
| [ 0:00] ## LVMCONF:     dir = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     filter = "a|.*|"
| [ 0:00] ## LVMCONF:     global_filter = [ "a|@TESTDIR@/dev/mapper/@PREFIX@.*pv[0-9_]*$|", "r|.*|" ]
| [ 0:00] ## LVMCONF:     md_component_detection  = 0
| [ 0:00] ## LVMCONF:     scan = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     sysfs_scan = 1
| [ 0:00] ## LVMCONF:     write_cache_state = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: dmeventd {
| [ 0:00] ## LVMCONF:     executable = "/sources/boot/LVM2.2.02.177/test/lib/dmeventd"
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: global {
| [ 0:00] ## LVMCONF:     abort_on_internal_errors = 1
| [ 0:00] ## LVMCONF:     cache_check_executable = "/usr/sbin/cache_check"
| [ 0:00] ## LVMCONF:     cache_dump_executable = "/usr/sbin/cache_dump"
| [ 0:00] ## LVMCONF:     cache_repair_executable = "/usr/sbin/cache_repair"
| [ 0:00] ## LVMCONF:     detect_internal_vg_cache_corruption = 1
| [ 0:00] ## LVMCONF:     fallback_to_local_locking = 0
| [ 0:00] ## LVMCONF:     fsadm_executable = "/sources/boot/LVM2.2.02.177/test/lib/fsadm"
| [ 0:00] ## LVMCONF:     library_dir = "@TESTDIR@/lib"
| [ 0:00] ## LVMCONF:     locking_dir = "@TESTDIR@/var/lock/lvm"
| [ 0:00] ## LVMCONF:     locking_type=1
| [ 0:00] ## LVMCONF:     notify_dbus = 0
| [ 0:00] ## LVMCONF:     si_unit_consistency = 1
| [ 0:00] ## LVMCONF:     thin_check_executable = "/usr/sbin/thin_check"
| [ 0:00] ## LVMCONF:     thin_dump_executable = "/usr/sbin/thin_dump"
| [ 0:00] ## LVMCONF:     thin_repair_executable = "/usr/sbin/thin_repair"
| [ 0:00] ## LVMCONF:     use_lvmetad = 0
| [ 0:00] ## LVMCONF:     use_lvmlockd = 0
| [ 0:00] ## LVMCONF:     use_lvmpolld = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: log {
| [ 0:00] ## LVMCONF:     activation = 1
| [ 0:00] ## LVMCONF:     file = "@TESTDIR@/debug.log"
| [ 0:00] ## LVMCONF:     indent = 1
| [ 0:00] ## LVMCONF:     level = 9
| [ 0:00] ## LVMCONF:     overwrite = 1
| [ 0:00] ## LVMCONF:     syslog = 0
| [ 0:00] ## LVMCONF:     verbose = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] <======== Processing test: "lvmetad-pvs.sh" ========>
| [ 0:00] 
| [ 0:00] aux prepare_pvs 1 20000
| [ 0:00] #lvmetad-pvs.sh:18+ aux prepare_pvs 1 20000
| [ 0:00] ## preparing loop device....ok (/dev/loop0)
| [ 0:00] ## preparing 1 devices...lib/utils: line 212: DM_UDEV_COOKIE: unbound variable
| [ 0:00] set +vx; STACKTRACE; set -vx
| [ 0:00] ##lvmetad-pvs.sh:18+ set +vx
| [ 0:00] ## - /lfskernel/sources/boot/LVM2.2.02.177/test/shell/lvmetad-pvs.sh:18
| [ 0:00] ## 1 STACKTRACE() called from /lfskernel/sources/boot/LVM2.2.02.177/test/shell/lvmetad-pvs.sh:18
| [ 0:00] <======== Info ========>
| [ 0:00] ## DMINFO:   Name             Maj Min Stat Open Targ Event  UUID                                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv1   253   3 L--w    0    1      0 TEST-@PREFIX@pv1                                                 
| [ 0:00] <======== Active table ========>
| [ 0:00] ## DMTABLE:  @PREFIX@pv1: 0 40960000 linear 7:0 2048
| [ 0:00] <======== Inactive table ========>
| [ 0:00] ## DMITABLE: @PREFIX@pv1: 
| [ 0:00] <======== Status ========>
| [ 0:00] ## DMSTATUS: @PREFIX@pv1: 0 40960000 linear 
| [ 0:00] <======== Tree ========>
| [ 0:00] ## DMTREE:   @PREFIX@pv1 (253:3)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   LFS_vg-lfs (253:2)
| [ 0:00] ## DMTREE:    `- (8:16)
| [ 0:00] ## DMTREE:   centos-swap (253:1)
| [ 0:00] ## DMTREE:    `- (8:2)
| [ 0:00] ## DMTREE:   centos-root (253:0)
| [ 0:00] ## DMTREE:    `- (8:2)
| [ 0:00] <======== Recursive list of @TESTDIR@/dev ========>
| [ 0:00] ## LSLR:	@TESTDIR@/dev:
| [ 0:00] ## LSLR:	total 4
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 0 Feb 21 02:27 loop0
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 1 Feb 21 02:27 loop1
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 2 Feb 21 02:27 loop2
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 3 Feb 21 02:27 loop3
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 4 Feb 21 02:27 loop4
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 5 Feb 21 02:27 loop5
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 6 Feb 21 02:27 loop6
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 7 Feb 21 02:27 loop7
| [ 0:00] ## LSLR:	drwxr-xr-x 2 root root 4096 Feb 21 02:27 mapper
| [ 0:00] ## LSLR:	crw-r--r-- 1 root root 1, 3 Feb 21 02:27 testnull
| [ 0:00] ## LSLR:	
| [ 0:00] ## LSLR:	@TESTDIR@/dev/mapper:
| [ 0:00] ## LSLR:	total 0
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   3 Feb 21 02:27 @PREFIX@pv1
| [ 0:00] ## LSLR:	crw------- 1 root root  10, 236 Feb 21 02:27 control
| [ 0:00] <======== Udev DB content ========>
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-0
| [ 0:00] ## UDEV:	N: dm-0
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-0
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-0
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=0
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-1
| [ 0:00] ## UDEV:	N: dm-1
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-1
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-1
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=1
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-2
| [ 0:00] ## UDEV:	N: dm-2
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-2
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-2
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=2
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-3
| [ 0:00] ## UDEV:	N: dm-3
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-3
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-3
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=3
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/loop0
| [ 0:00] ## UDEV:	N: loop0
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/loop0
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/loop0
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=7
| [ 0:00] ## UDEV:	E: MINOR=0
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] <======== Script file "lvmetad-pvs.sh" ========>
| [ 0:00] ## Line: 1 	 #!/usr/bin/env bash
| [ 0:00] ## Line: 2 	 
| [ 0:00] ## Line: 3 	 # Copyright (C) 2012 Red Hat, Inc. All rights reserved.
| [ 0:00] ## Line: 4 	 #
| [ 0:00] ## Line: 5 	 # This copyrighted material is made available to anyone wishing to use,
| [ 0:00] ## Line: 6 	 # modify, copy, or redistribute it subject to the terms and conditions
| [ 0:00] ## Line: 7 	 # of the GNU General Public License v.2.
| [ 0:00] ## Line: 8 	 #
| [ 0:00] ## Line: 9 	 # You should have received a copy of the GNU General Public License
| [ 0:00] ## Line: 10 	 # along with this program; if not, write to the Free Software Foundation,
| [ 0:00] ## Line: 11 	 # Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA
| [ 0:00] ## Line: 12 	 
| [ 0:00] ## Line: 13 	 SKIP_WITH_LVMLOCKD=1
| [ 0:00] ## Line: 14 	 SKIP_WITH_LVMPOLLD=1
| [ 0:00] ## Line: 15 	 
| [ 0:00] ## Line: 16 	 . lib/inittest
| [ 0:00] ## Line: 17 	 
| [ 0:00] ## Line: 18 	 aux prepare_pvs 1 20000
| [ 0:00] ## Line: 19 	 get_devs
| [ 0:00] ## Line: 20 	 
| [ 0:00] ## Line: 21 	 pvs "${DEVICES[@]}" | grep "$dev1"
| [ 0:00] ## Line: 22 	 
| [ 0:00] ## Line: 23 	 # check for PV size overflows
| [ 0:00] ## Line: 24 	 pvs "${DEVICES[@]}" | grep 19.53g
| [ 0:00] ## Line: 25 	 pvs "${DEVICES[@]}" | not grep 16.00e
| [ 0:00] aux teardown
| [ 0:00] #lvmetad-pvs.sh:1+ aux teardown
| [ 0:00] ## teardown.........ok
###       failed: [ndev-vanilla] shell/lvmetad-pvs.sh
###      skipped: [ndev-vanilla] shell/lvmetad-pvscan-autoactivation-polling.sh
###      skipped: [ndev-vanilla] shell/lvmetad-pvscan-cache.sh
###      skipped: [ndev-vanilla] shell/lvmetad-pvscan-filter.sh
###      skipped: [ndev-vanilla] shell/lvmetad-pvscan-md.sh
###      skipped: [ndev-vanilla] shell/lvmetad-pvscan-nomda-bg.sh
###      skipped: [ndev-vanilla] shell/lvmetad-pvscan-nomda.sh
###      skipped: [ndev-vanilla] shell/lvmetad-restart.sh
###      skipped: [ndev-vanilla] shell/lvmetad-sysinit.sh

| [ 0:00] Library version:   1.02.146 (2017-12-18)
| [ 0:00] Driver version:    4.35.0
| [ 0:00] Kernel is Linux localhost.localdomain 3.10.0-693.11.1.el7.x86_64 #1 SMP Mon Dec 4 23:52:40 UTC 2017 x86_64 GNU/Linux
| [ 0:00] Selinux mode is not installed.
| [ 0:00]               total        used        free      shared  buff/cache   available
| [ 0:00] Mem:           7822        1079        4146          10        2596        6436
| [ 0:00] Swap:          4095           0        4095
| [ 0:00] Filesystem      Size  Used Avail Use% Mounted on
| [ 0:00] /dev/sdc1        18G  8.4G  8.4G  50% /
| [ 0:00] /dev/sdd1        51G  6.1G   43G  13% /lfskernel
| [ 0:00] devtmpfs        3.9G     0  3.9G   0% /dev
| [ 0:00] tmpfs           3.9G     0  3.9G   0% /run
| [ 0:00] @TESTDIR=/tmp/LVMTEST8028.0OF8rjqo7w
| [ 0:00] @PREFIX=LVMTEST8028
| [ 0:00] ## LVMCONF: activation {
| [ 0:00] ## LVMCONF:     checks = 1
| [ 0:00] ## LVMCONF:     monitoring = 0
| [ 0:00] ## LVMCONF:     polling_interval = 1
| [ 0:00] ## LVMCONF:     raid_region_size = 512
| [ 0:00] ## LVMCONF:     retry_deactivation = 1
| [ 0:00] ## LVMCONF:     snapshot_autoextend_percent = 50
| [ 0:00] ## LVMCONF:     snapshot_autoextend_threshold = 50
| [ 0:00] ## LVMCONF:     udev_rules = 1
| [ 0:00] ## LVMCONF:     udev_sync = 1
| [ 0:00] ## LVMCONF:     verify_udev_operations = 1
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: allocation {
| [ 0:00] ## LVMCONF:     wipe_signatures_when_zeroing_new_lvs = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: backup {
| [ 0:00] ## LVMCONF:     archive = 0
| [ 0:00] ## LVMCONF:     backup = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: devices {
| [ 0:00] ## LVMCONF:     cache_dir = "@TESTDIR@/etc"
| [ 0:00] ## LVMCONF:     default_data_alignment = 1
| [ 0:00] ## LVMCONF:     dir = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     filter = "a|.*|"
| [ 0:00] ## LVMCONF:     global_filter = [ "a|@TESTDIR@/dev/mapper/@PREFIX@.*pv[0-9_]*$|", "r|.*|" ]
| [ 0:00] ## LVMCONF:     md_component_detection  = 0
| [ 0:00] ## LVMCONF:     scan = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     sysfs_scan = 1
| [ 0:00] ## LVMCONF:     write_cache_state = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: dmeventd {
| [ 0:00] ## LVMCONF:     executable = "/sources/boot/LVM2.2.02.177/test/lib/dmeventd"
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: global {
| [ 0:00] ## LVMCONF:     abort_on_internal_errors = 1
| [ 0:00] ## LVMCONF:     cache_check_executable = "/usr/sbin/cache_check"
| [ 0:00] ## LVMCONF:     cache_dump_executable = "/usr/sbin/cache_dump"
| [ 0:00] ## LVMCONF:     cache_repair_executable = "/usr/sbin/cache_repair"
| [ 0:00] ## LVMCONF:     detect_internal_vg_cache_corruption = 1
| [ 0:00] ## LVMCONF:     fallback_to_local_locking = 0
| [ 0:00] ## LVMCONF:     fsadm_executable = "/sources/boot/LVM2.2.02.177/test/lib/fsadm"
| [ 0:00] ## LVMCONF:     library_dir = "@TESTDIR@/lib"
| [ 0:00] ## LVMCONF:     locking_dir = "@TESTDIR@/var/lock/lvm"
| [ 0:00] ## LVMCONF:     locking_type=1
| [ 0:00] ## LVMCONF:     notify_dbus = 0
| [ 0:00] ## LVMCONF:     si_unit_consistency = 1
| [ 0:00] ## LVMCONF:     thin_check_executable = "/usr/sbin/thin_check"
| [ 0:00] ## LVMCONF:     thin_dump_executable = "/usr/sbin/thin_dump"
| [ 0:00] ## LVMCONF:     thin_repair_executable = "/usr/sbin/thin_repair"
| [ 0:00] ## LVMCONF:     use_lvmetad = 0
| [ 0:00] ## LVMCONF:     use_lvmlockd = 0
| [ 0:00] ## LVMCONF:     use_lvmpolld = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: log {
| [ 0:00] ## LVMCONF:     activation = 1
| [ 0:00] ## LVMCONF:     file = "@TESTDIR@/debug.log"
| [ 0:00] ## LVMCONF:     indent = 1
| [ 0:00] ## LVMCONF:     level = 9
| [ 0:00] ## LVMCONF:     overwrite = 1
| [ 0:00] ## LVMCONF:     syslog = 0
| [ 0:00] ## LVMCONF:     verbose = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] <======== Processing test: "lvmetad-test.sh" ========>
| [ 0:00] 
| [ 0:00] aux prepare_pvs 2
| [ 0:00] #lvmetad-test.sh:18+ aux prepare_pvs 2
| [ 0:00] ## preparing loop device....ok (/dev/loop0)
| [ 0:00] ## preparing 2 devices...lib/utils: line 212: DM_UDEV_COOKIE: unbound variable
| [ 0:00] set +vx; STACKTRACE; set -vx
| [ 0:00] ##lvmetad-test.sh:18+ set +vx
| [ 0:00] ## - /lfskernel/sources/boot/LVM2.2.02.177/test/shell/lvmetad-test.sh:18
| [ 0:00] ## 1 STACKTRACE() called from /lfskernel/sources/boot/LVM2.2.02.177/test/shell/lvmetad-test.sh:18
| [ 0:00] <======== Info ========>
| [ 0:00] ## DMINFO:   Name             Maj Min Stat Open Targ Event  UUID                                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv1   253   4 L--w    0    1      0 TEST-@PREFIX@pv1                                                 
| [ 0:00] ## DMINFO:   @PREFIX@pv2   253   3 L--w    0    1      0 TEST-@PREFIX@pv2                                                 
| [ 0:00] <======== Active table ========>
| [ 0:00] ## DMTABLE:  @PREFIX@pv1: 0 69632 linear 7:0 2048
| [ 0:00] ## DMTABLE:  @PREFIX@pv2: 0 69632 linear 7:0 71680
| [ 0:00] <======== Inactive table ========>
| [ 0:00] ## DMITABLE: @PREFIX@pv1: 
| [ 0:00] ## DMITABLE: @PREFIX@pv2: 
| [ 0:00] <======== Status ========>
| [ 0:00] ## DMSTATUS: @PREFIX@pv1: 0 69632 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv2: 0 69632 linear 
| [ 0:00] <======== Tree ========>
| [ 0:00] ## DMTREE:   @PREFIX@pv1 (253:4)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   LFS_vg-lfs (253:2)
| [ 0:00] ## DMTREE:    `- (8:16)
| [ 0:00] ## DMTREE:   @PREFIX@pv2 (253:3)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   centos-swap (253:1)
| [ 0:00] ## DMTREE:    `- (8:2)
| [ 0:00] ## DMTREE:   centos-root (253:0)
| [ 0:00] ## DMTREE:    `- (8:2)
| [ 0:00] <======== Recursive list of @TESTDIR@/dev ========>
| [ 0:00] ## LSLR:	@TESTDIR@/dev:
| [ 0:00] ## LSLR:	total 4
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 0 Feb 21 02:27 loop0
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 1 Feb 21 02:27 loop1
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 2 Feb 21 02:27 loop2
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 3 Feb 21 02:27 loop3
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 4 Feb 21 02:27 loop4
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 5 Feb 21 02:27 loop5
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 6 Feb 21 02:27 loop6
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 7 Feb 21 02:27 loop7
| [ 0:00] ## LSLR:	drwxr-xr-x 2 root root 4096 Feb 21 02:27 mapper
| [ 0:00] ## LSLR:	crw-r--r-- 1 root root 1, 3 Feb 21 02:27 testnull
| [ 0:00] ## LSLR:	
| [ 0:00] ## LSLR:	@TESTDIR@/dev/mapper:
| [ 0:00] ## LSLR:	total 0
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   4 Feb 21 02:27 @PREFIX@pv1
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   3 Feb 21 02:27 @PREFIX@pv2
| [ 0:00] ## LSLR:	crw------- 1 root root  10, 236 Feb 21 02:27 control
| [ 0:00] <======== Udev DB content ========>
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-0
| [ 0:01] ## UDEV:	N: dm-0
| [ 0:01] ## UDEV:	E: DEVNAME=/dev/dm-0
| [ 0:01] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-0
| [ 0:01] ## UDEV:	E: DEVTYPE=disk
| [ 0:01] ## UDEV:	E: MAJOR=253
| [ 0:01] ## UDEV:	E: MINOR=0
| [ 0:01] ## UDEV:	E: SUBSYSTEM=block
| [ 0:01] ## UDEV:	
| [ 0:01] ## UDEV:	P: /devices/virtual/block/dm-1
| [ 0:01] ## UDEV:	N: dm-1
| [ 0:01] ## UDEV:	E: DEVNAME=/dev/dm-1
| [ 0:01] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-1
| [ 0:01] ## UDEV:	E: DEVTYPE=disk
| [ 0:01] ## UDEV:	E: MAJOR=253
| [ 0:01] ## UDEV:	E: MINOR=1
| [ 0:01] ## UDEV:	E: SUBSYSTEM=block
| [ 0:01] ## UDEV:	
| [ 0:01] ## UDEV:	P: /devices/virtual/block/dm-2
| [ 0:01] ## UDEV:	N: dm-2
| [ 0:01] ## UDEV:	E: DEVNAME=/dev/dm-2
| [ 0:01] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-2
| [ 0:01] ## UDEV:	E: DEVTYPE=disk
| [ 0:01] ## UDEV:	E: MAJOR=253
| [ 0:01] ## UDEV:	E: MINOR=2
| [ 0:01] ## UDEV:	E: SUBSYSTEM=block
| [ 0:01] ## UDEV:	
| [ 0:01] ## UDEV:	P: /devices/virtual/block/dm-3
| [ 0:01] ## UDEV:	N: dm-3
| [ 0:01] ## UDEV:	E: DEVNAME=/dev/dm-3
| [ 0:01] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-3
| [ 0:01] ## UDEV:	E: DEVTYPE=disk
| [ 0:01] ## UDEV:	E: MAJOR=253
| [ 0:01] ## UDEV:	E: MINOR=3
| [ 0:01] ## UDEV:	E: SUBSYSTEM=block
| [ 0:01] ## UDEV:	
| [ 0:01] ## UDEV:	P: /devices/virtual/block/dm-4
| [ 0:01] ## UDEV:	N: dm-4
| [ 0:01] ## UDEV:	E: DEVNAME=/dev/dm-4
| [ 0:01] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-4
| [ 0:01] ## UDEV:	E: DEVTYPE=disk
| [ 0:01] ## UDEV:	E: MAJOR=253
| [ 0:01] ## UDEV:	E: MINOR=4
| [ 0:01] ## UDEV:	E: SUBSYSTEM=block
| [ 0:01] ## UDEV:	
| [ 0:01] ## UDEV:	P: /devices/virtual/block/loop0
| [ 0:01] ## UDEV:	N: loop0
| [ 0:01] ## UDEV:	E: DEVNAME=/dev/loop0
| [ 0:01] ## UDEV:	E: DEVPATH=/devices/virtual/block/loop0
| [ 0:01] ## UDEV:	E: DEVTYPE=disk
| [ 0:01] ## UDEV:	E: MAJOR=7
| [ 0:01] ## UDEV:	E: MINOR=0
| [ 0:01] ## UDEV:	E: SUBSYSTEM=block
| [ 0:01] ## UDEV:	
| [ 0:01] <======== Script file "lvmetad-test.sh" ========>
| [ 0:01] ## Line: 1 	 #!/usr/bin/env bash
| [ 0:01] ## Line: 2 	 
| [ 0:01] ## Line: 3 	 # Copyright (C) 2012 Red Hat, Inc. All rights reserved.
| [ 0:01] ## Line: 4 	 #
| [ 0:01] ## Line: 5 	 # This copyrighted material is made available to anyone wishing to use,
| [ 0:01] ## Line: 6 	 # modify, copy, or redistribute it subject to the terms and conditions
| [ 0:01] ## Line: 7 	 # of the GNU General Public License v.2.
| [ 0:01] ## Line: 8 	 #
| [ 0:01] ## Line: 9 	 # You should have received a copy of the GNU General Public License
| [ 0:01] ## Line: 10 	 # along with this program; if not, write to the Free Software Foundation,
| [ 0:01] ## Line: 11 	 # Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA
| [ 0:01] ## Line: 12 	 
| [ 0:01] ## Line: 13 	 SKIP_WITH_LVMLOCKD=1
| [ 0:01] ## Line: 14 	 SKIP_WITH_LVMPOLLD=1
| [ 0:01] ## Line: 15 	 
| [ 0:01] ## Line: 16 	 . lib/inittest
| [ 0:01] ## Line: 17 	 
| [ 0:01] ## Line: 18 	 aux prepare_pvs 2
| [ 0:01] ## Line: 19 	 
| [ 0:01] ## Line: 20 	 vgcreate $vg1 "$dev1" "$dev2" --test
| [ 0:01] ## Line: 21 	 vgs | not grep $vg1
| [ 0:01] ## Line: 22 	 vgcreate $vg1 "$dev1" "$dev2"
| [ 0:01] ## Line: 23 	 vgs | grep $vg1
| [ 0:01] ## Line: 24 	 
| [ 0:01] ## Line: 25 	 lvcreate -n bar -l 1 $vg1 --test
| [ 0:01] ## Line: 26 	 lvs | not grep bar
| [ 0:01] ## Line: 27 	 lvcreate -n bar -l 1 $vg1
| [ 0:01] ## Line: 28 	 lvs | grep bar
| [ 0:01] ## Line: 29 	 
| [ 0:01] ## Line: 30 	 lvremove $vg1/bar -f --test
| [ 0:01] ## Line: 31 	 lvs | grep bar
| [ 0:01] ## Line: 32 	 lvremove $vg1/bar -f
| [ 0:01] ## Line: 33 	 lvs | not grep bar
| [ 0:01] ## Line: 34 	 
| [ 0:01] ## Line: 35 	 vgremove $vg1 --test
| [ 0:01] ## Line: 36 	 vgs | grep $vg1
| [ 0:01] ## Line: 37 	 vgremove $vg1
| [ 0:01] ## Line: 38 	 vgs | not grep $vg1
| [ 0:01] aux teardown
| [ 0:01] #lvmetad-test.sh:1+ aux teardown
| [ 0:01] ## teardown.........ok
###       failed: [ndev-vanilla] shell/lvmetad-test.sh
###      skipped: [ndev-vanilla] shell/lvmlockd-hello-world.sh
###      skipped: [ndev-vanilla] shell/lvmlockd-lv-types.sh
###      skipped: [ndev-vanilla] shell/lvrename-cache-thin.sh

| [ 0:00] Library version:   1.02.146 (2017-12-18)
| [ 0:00] Driver version:    4.35.0
| [ 0:00] Kernel is Linux localhost.localdomain 3.10.0-693.11.1.el7.x86_64 #1 SMP Mon Dec 4 23:52:40 UTC 2017 x86_64 GNU/Linux
| [ 0:00] Selinux mode is not installed.
| [ 0:00]               total        used        free      shared  buff/cache   available
| [ 0:00] Mem:           7822        1079        4147          10        2596        6436
| [ 0:00] Swap:          4095           0        4095
| [ 0:00] Filesystem      Size  Used Avail Use% Mounted on
| [ 0:00] /dev/sdc1        18G  8.4G  8.4G  50% /
| [ 0:00] /dev/sdd1        51G  6.1G   43G  13% /lfskernel
| [ 0:00] devtmpfs        3.9G     0  3.9G   0% /dev
| [ 0:00] tmpfs           3.9G     0  3.9G   0% /run
| [ 0:00] @TESTDIR=/tmp/LVMTEST8392.yecy7zGtrZ
| [ 0:00] @PREFIX=LVMTEST8392
| [ 0:00] ## LVMCONF: activation {
| [ 0:00] ## LVMCONF:     checks = 1
| [ 0:00] ## LVMCONF:     monitoring = 0
| [ 0:00] ## LVMCONF:     polling_interval = 1
| [ 0:00] ## LVMCONF:     raid_region_size = 512
| [ 0:00] ## LVMCONF:     retry_deactivation = 1
| [ 0:00] ## LVMCONF:     snapshot_autoextend_percent = 50
| [ 0:00] ## LVMCONF:     snapshot_autoextend_threshold = 50
| [ 0:00] ## LVMCONF:     udev_rules = 1
| [ 0:00] ## LVMCONF:     udev_sync = 1
| [ 0:00] ## LVMCONF:     verify_udev_operations = 1
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: allocation {
| [ 0:00] ## LVMCONF:     wipe_signatures_when_zeroing_new_lvs = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: backup {
| [ 0:00] ## LVMCONF:     archive = 0
| [ 0:00] ## LVMCONF:     backup = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: devices {
| [ 0:00] ## LVMCONF:     cache_dir = "@TESTDIR@/etc"
| [ 0:00] ## LVMCONF:     default_data_alignment = 1
| [ 0:00] ## LVMCONF:     dir = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     filter = "a|.*|"
| [ 0:00] ## LVMCONF:     global_filter = [ "a|@TESTDIR@/dev/mapper/@PREFIX@.*pv[0-9_]*$|", "r|.*|" ]
| [ 0:00] ## LVMCONF:     md_component_detection  = 0
| [ 0:00] ## LVMCONF:     scan = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     sysfs_scan = 1
| [ 0:00] ## LVMCONF:     write_cache_state = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: dmeventd {
| [ 0:00] ## LVMCONF:     executable = "/sources/boot/LVM2.2.02.177/test/lib/dmeventd"
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: global {
| [ 0:00] ## LVMCONF:     abort_on_internal_errors = 1
| [ 0:00] ## LVMCONF:     cache_check_executable = "/usr/sbin/cache_check"
| [ 0:00] ## LVMCONF:     cache_dump_executable = "/usr/sbin/cache_dump"
| [ 0:00] ## LVMCONF:     cache_repair_executable = "/usr/sbin/cache_repair"
| [ 0:00] ## LVMCONF:     detect_internal_vg_cache_corruption = 1
| [ 0:00] ## LVMCONF:     fallback_to_local_locking = 0
| [ 0:00] ## LVMCONF:     fsadm_executable = "/sources/boot/LVM2.2.02.177/test/lib/fsadm"
| [ 0:00] ## LVMCONF:     library_dir = "@TESTDIR@/lib"
| [ 0:00] ## LVMCONF:     locking_dir = "@TESTDIR@/var/lock/lvm"
| [ 0:00] ## LVMCONF:     locking_type=1
| [ 0:00] ## LVMCONF:     notify_dbus = 0
| [ 0:00] ## LVMCONF:     si_unit_consistency = 1
| [ 0:00] ## LVMCONF:     thin_check_executable = "/usr/sbin/thin_check"
| [ 0:00] ## LVMCONF:     thin_dump_executable = "/usr/sbin/thin_dump"
| [ 0:00] ## LVMCONF:     thin_repair_executable = "/usr/sbin/thin_repair"
| [ 0:00] ## LVMCONF:     use_lvmetad = 0
| [ 0:00] ## LVMCONF:     use_lvmlockd = 0
| [ 0:00] ## LVMCONF:     use_lvmpolld = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: log {
| [ 0:00] ## LVMCONF:     activation = 1
| [ 0:00] ## LVMCONF:     file = "@TESTDIR@/debug.log"
| [ 0:00] ## LVMCONF:     indent = 1
| [ 0:00] ## LVMCONF:     level = 9
| [ 0:00] ## LVMCONF:     overwrite = 1
| [ 0:00] ## LVMCONF:     syslog = 0
| [ 0:00] ## LVMCONF:     verbose = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] <======== Processing test: "lvresize-full.sh" ========>
| [ 0:00] 
| [ 0:00] FSCK=${FSCK-fsck}
| [ 0:00] #lvresize-full.sh:21+ FSCK=fsck
| [ 0:00] MKFS=${MKFS-mkfs.ext3}
| [ 0:00] #lvresize-full.sh:22+ MKFS=mkfs.ext3
| [ 0:00] RESIZEFS=${RESIZEFS-resize2fs}
| [ 0:00] #lvresize-full.sh:23+ RESIZEFS=resize2fs
| [ 0:00] LVM_BINARY=$(which lvm)
| [ 0:00] ##lvresize-full.sh:24+ which lvm
| [ 0:00] #lvresize-full.sh:24+ LVM_BINARY=/sources/boot/LVM2.2.02.177/test/lib/lvm
| [ 0:00] export LVM_BINARY
| [ 0:00] #lvresize-full.sh:25+ export LVM_BINARY
| [ 0:00] 
| [ 0:00] which $FSCK || skip
| [ 0:00] #lvresize-full.sh:27+ which fsck
| [ 0:00] /sbin/fsck
| [ 0:00] which $MKFS || skip
| [ 0:00] #lvresize-full.sh:28+ which mkfs.ext3
| [ 0:00] /sbin/mkfs.ext3
| [ 0:00] which $RESIZEFS || skip
| [ 0:00] #lvresize-full.sh:29+ which resize2fs
| [ 0:00] /sbin/resize2fs
| [ 0:00] 
| [ 0:00] aux prepare_vg 2 20
| [ 0:00] #lvresize-full.sh:31+ aux prepare_vg 2 20
| [ 0:00] ## preparing loop device....ok (/dev/loop0)
| [ 0:00] ## preparing 2 devices...lib/utils: line 212: DM_UDEV_COOKIE: unbound variable
| [ 0:00] set +vx; STACKTRACE; set -vx
| [ 0:00] ##lvresize-full.sh:31+ set +vx
| [ 0:00] ## - /lfskernel/sources/boot/LVM2.2.02.177/test/shell/lvresize-full.sh:31
| [ 0:00] ## 1 STACKTRACE() called from /lfskernel/sources/boot/LVM2.2.02.177/test/shell/lvresize-full.sh:31
| [ 0:00] <======== Info ========>
| [ 0:00] ## DMINFO:   Name             Maj Min Stat Open Targ Event  UUID                                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv1   253   3 L--w    0    1      0 TEST-@PREFIX@pv1                                                 
| [ 0:00] ## DMINFO:   @PREFIX@pv2   253   4 L--w    0    1      0 TEST-@PREFIX@pv2                                                 
| [ 0:00] <======== Active table ========>
| [ 0:00] ## DMTABLE:  @PREFIX@pv1: 0 40960 linear 7:0 2048
| [ 0:00] ## DMTABLE:  @PREFIX@pv2: 0 40960 linear 7:0 43008
| [ 0:00] <======== Inactive table ========>
| [ 0:00] ## DMITABLE: @PREFIX@pv1: 
| [ 0:00] ## DMITABLE: @PREFIX@pv2: 
| [ 0:00] <======== Status ========>
| [ 0:00] ## DMSTATUS: @PREFIX@pv1: 0 40960 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv2: 0 40960 linear 
| [ 0:00] <======== Tree ========>
| [ 0:00] ## DMTREE:   @PREFIX@pv1 (253:3)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   LFS_vg-lfs (253:2)
| [ 0:00] ## DMTREE:    `- (8:16)
| [ 0:00] ## DMTREE:   centos-swap (253:1)
| [ 0:00] ## DMTREE:    `- (8:2)
| [ 0:00] ## DMTREE:   @PREFIX@pv2 (253:4)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   centos-root (253:0)
| [ 0:00] ## DMTREE:    `- (8:2)
| [ 0:00] <======== Recursive list of @TESTDIR@/dev ========>
| [ 0:00] ## LSLR:	@TESTDIR@/dev:
| [ 0:00] ## LSLR:	total 4
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 0 Feb 21 02:27 loop0
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 1 Feb 21 02:27 loop1
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 2 Feb 21 02:27 loop2
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 3 Feb 21 02:27 loop3
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 4 Feb 21 02:27 loop4
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 5 Feb 21 02:27 loop5
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 6 Feb 21 02:27 loop6
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 7 Feb 21 02:27 loop7
| [ 0:00] ## LSLR:	drwxr-xr-x 2 root root 4096 Feb 21 02:27 mapper
| [ 0:00] ## LSLR:	crw-r--r-- 1 root root 1, 3 Feb 21 02:27 testnull
| [ 0:00] ## LSLR:	
| [ 0:00] ## LSLR:	@TESTDIR@/dev/mapper:
| [ 0:00] ## LSLR:	total 0
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   3 Feb 21 02:27 @PREFIX@pv1
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   4 Feb 21 02:27 @PREFIX@pv2
| [ 0:00] ## LSLR:	crw------- 1 root root  10, 236 Feb 21 02:27 control
| [ 0:00] <======== Udev DB content ========>
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-0
| [ 0:00] ## UDEV:	N: dm-0
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-0
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-0
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=0
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-1
| [ 0:00] ## UDEV:	N: dm-1
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-1
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-1
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=1
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-2
| [ 0:00] ## UDEV:	N: dm-2
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-2
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-2
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=2
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-3
| [ 0:00] ## UDEV:	N: dm-3
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-3
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-3
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=3
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-4
| [ 0:00] ## UDEV:	N: dm-4
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-4
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-4
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=4
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/loop0
| [ 0:00] ## UDEV:	N: loop0
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/loop0
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/loop0
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=7
| [ 0:00] ## UDEV:	E: MINOR=0
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] <======== Script file "lvresize-full.sh" ========>
| [ 0:00] ## Line: 1 	 #!/usr/bin/env bash
| [ 0:00] ## Line: 2 	 
| [ 0:00] ## Line: 3 	 # Copyright (C) 2016 Red Hat, Inc. All rights reserved.
| [ 0:00] ## Line: 4 	 #
| [ 0:00] ## Line: 5 	 # This copyrighted material is made available to anyone wishing to use,
| [ 0:00] ## Line: 6 	 # modify, copy, or redistribute it subject to the terms and conditions
| [ 0:00] ## Line: 7 	 # of the GNU General Public License v.2.
| [ 0:00] ## Line: 8 	 #
| [ 0:00] ## Line: 9 	 # You should have received a copy of the GNU General Public License
| [ 0:00] ## Line: 10 	 # along with this program; if not, write to the Free Software Foundation,
| [ 0:00] ## Line: 11 	 # Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA
| [ 0:00] ## Line: 12 	 
| [ 0:00] ## Line: 13 	 # Excersize resize of filesystem when size of LV already matches
| [ 0:00] ## Line: 14 	 # https://bugzilla.redhat.com/1354396
| [ 0:00] ## Line: 15 	 
| [ 0:00] ## Line: 16 	 SKIP_WITH_LVMLOCKD=1
| [ 0:00] ## Line: 17 	 SKIP_WITH_LVMPOLLD=1
| [ 0:00] ## Line: 18 	 
| [ 0:00] ## Line: 19 	 . lib/inittest
| [ 0:00] ## Line: 20 	 
| [ 0:00] ## Line: 21 	 FSCK=${FSCK-fsck}
| [ 0:00] ## Line: 22 	 MKFS=${MKFS-mkfs.ext3}
| [ 0:00] ## Line: 23 	 RESIZEFS=${RESIZEFS-resize2fs}
| [ 0:00] ## Line: 24 	 LVM_BINARY=$(which lvm)
| [ 0:00] ## Line: 25 	 export LVM_BINARY
| [ 0:00] ## Line: 26 	 
| [ 0:00] ## Line: 27 	 which $FSCK || skip
| [ 0:00] ## Line: 28 	 which $MKFS || skip
| [ 0:00] ## Line: 29 	 which $RESIZEFS || skip
| [ 0:00] ## Line: 30 	 
| [ 0:00] ## Line: 31 	 aux prepare_vg 2 20
| [ 0:00] ## Line: 32 	 
| [ 0:00] ## Line: 33 	 lvcreate -l100%FREE -n $lv1 $vg
| [ 0:00] ## Line: 34 	 
| [ 0:00] ## Line: 35 	 lvdev="$DM_DEV_DIR/$vg/$lv1"
| [ 0:00] ## Line: 36 	 
| [ 0:00] ## Line: 37 	 lvs -a $vg
| [ 0:00] ## Line: 38 	 
| [ 0:00] ## Line: 39 	 "$MKFS" "$lvdev"
| [ 0:00] ## Line: 40 	 
| [ 0:00] ## Line: 41 	 # this should resolve to resize to same actual size
| [ 0:00] ## Line: 42 	 lvreduce -r -f -l-100%FREE $vg/$lv1
| [ 0:00] ## Line: 43 	 "$FSCK" -n "$lvdev"
| [ 0:00] ## Line: 44 	 
| [ 0:00] ## Line: 45 	 # size should remain the same
| [ 0:00] ## Line: 46 	 lvextend -r -f -l+100%FREE $vg/$lv1
| [ 0:00] ## Line: 47 	 "$FSCK" -n "$lvdev"
| [ 0:00] ## Line: 48 	 
| [ 0:00] ## Line: 49 	 #lvchange -an $vg/$lv1
| [ 0:00] ## Line: 50 	 lvresize -r -f -l+100%FREE $vg/$lv1
| [ 0:00] ## Line: 51 	 "$FSCK" -n "$lvdev"
| [ 0:00] ## Line: 52 	 
| [ 0:00] ## Line: 53 	 # Check there is really file system resize happening
| [ 0:00] ## Line: 54 	 # even when LV itself has still the same size
| [ 0:00] ## Line: 55 	 "$RESIZEFS" -f "$lvdev" 20000
| [ 0:00] ## Line: 56 	 "$FSCK" -n "$lvdev" | tee out
| [ 0:00] ## Line: 57 	 grep "20000 blocks" out
| [ 0:00] ## Line: 58 	 
| [ 0:00] ## Line: 59 	 SIZE=$(get lv_field $vg/$lv1 size)
| [ 0:00] ## Line: 60 	 lvresize -r -f -l-100%FREE $vg/$lv1
| [ 0:00] ## Line: 61 	 test "$SIZE" = "$(get lv_field $vg/$lv1 size)"
| [ 0:00] ## Line: 62 	 
| [ 0:00] ## Line: 63 	 "$FSCK" -n "$lvdev" | tee out
| [ 0:00] ## Line: 64 	 grep -v "20000 blocks" out
| [ 0:00] ## Line: 65 	 
| [ 0:00] ## Line: 66 	 
| [ 0:00] ## Line: 67 	 # Also check it fails when the user 'resize' volume without
| [ 0:00] ## Line: 68 	 # resizing fs and then retries with '-r'.
| [ 0:00] ## Line: 69 	 lvreduce -f -l50%VG $vg/$lv1
| [ 0:00] ## Line: 70 	 fail lvresize -r -f -l50%VG $vg/$lv1
| [ 0:00] ## Line: 71 	 
| [ 0:00] ## Line: 72 	 lvremove -ff $vg
| [ 0:00] aux teardown
| [ 0:00] #lvresize-full.sh:1+ aux teardown
| [ 0:00] ## teardown.........ok
###       failed: [ndev-vanilla] shell/lvresize-full.sh

| [ 0:00] Library version:   1.02.146 (2017-12-18)
| [ 0:00] Driver version:    4.35.0
| [ 0:00] Kernel is Linux localhost.localdomain 3.10.0-693.11.1.el7.x86_64 #1 SMP Mon Dec 4 23:52:40 UTC 2017 x86_64 GNU/Linux
| [ 0:00] Selinux mode is not installed.
| [ 0:00]               total        used        free      shared  buff/cache   available
| [ 0:00] Mem:           7822        1079        4146          10        2596        6436
| [ 0:00] Swap:          4095           0        4095
| [ 0:00] Filesystem      Size  Used Avail Use% Mounted on
| [ 0:00] /dev/sdc1        18G  8.4G  8.4G  50% /
| [ 0:00] /dev/sdd1        51G  6.1G   43G  13% /lfskernel
| [ 0:00] devtmpfs        3.9G     0  3.9G   0% /dev
| [ 0:00] tmpfs           3.9G     0  3.9G   0% /run
| [ 0:00] @TESTDIR=/tmp/LVMTEST8577.zc5wzNU6Zm
| [ 0:00] @PREFIX=LVMTEST8577
| [ 0:00] ## LVMCONF: activation {
| [ 0:00] ## LVMCONF:     checks = 1
| [ 0:00] ## LVMCONF:     monitoring = 0
| [ 0:00] ## LVMCONF:     polling_interval = 1
| [ 0:00] ## LVMCONF:     raid_region_size = 512
| [ 0:00] ## LVMCONF:     retry_deactivation = 1
| [ 0:00] ## LVMCONF:     snapshot_autoextend_percent = 50
| [ 0:00] ## LVMCONF:     snapshot_autoextend_threshold = 50
| [ 0:00] ## LVMCONF:     udev_rules = 1
| [ 0:00] ## LVMCONF:     udev_sync = 1
| [ 0:00] ## LVMCONF:     verify_udev_operations = 1
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: allocation {
| [ 0:00] ## LVMCONF:     wipe_signatures_when_zeroing_new_lvs = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: backup {
| [ 0:00] ## LVMCONF:     archive = 0
| [ 0:00] ## LVMCONF:     backup = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: devices {
| [ 0:00] ## LVMCONF:     cache_dir = "@TESTDIR@/etc"
| [ 0:00] ## LVMCONF:     default_data_alignment = 1
| [ 0:00] ## LVMCONF:     dir = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     filter = "a|.*|"
| [ 0:00] ## LVMCONF:     global_filter = [ "a|@TESTDIR@/dev/mapper/@PREFIX@.*pv[0-9_]*$|", "r|.*|" ]
| [ 0:00] ## LVMCONF:     md_component_detection  = 0
| [ 0:00] ## LVMCONF:     scan = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     sysfs_scan = 1
| [ 0:00] ## LVMCONF:     write_cache_state = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: dmeventd {
| [ 0:00] ## LVMCONF:     executable = "/sources/boot/LVM2.2.02.177/test/lib/dmeventd"
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: global {
| [ 0:00] ## LVMCONF:     abort_on_internal_errors = 1
| [ 0:00] ## LVMCONF:     cache_check_executable = "/usr/sbin/cache_check"
| [ 0:00] ## LVMCONF:     cache_dump_executable = "/usr/sbin/cache_dump"
| [ 0:00] ## LVMCONF:     cache_repair_executable = "/usr/sbin/cache_repair"
| [ 0:00] ## LVMCONF:     detect_internal_vg_cache_corruption = 1
| [ 0:00] ## LVMCONF:     fallback_to_local_locking = 0
| [ 0:00] ## LVMCONF:     fsadm_executable = "/sources/boot/LVM2.2.02.177/test/lib/fsadm"
| [ 0:00] ## LVMCONF:     library_dir = "@TESTDIR@/lib"
| [ 0:00] ## LVMCONF:     locking_dir = "@TESTDIR@/var/lock/lvm"
| [ 0:00] ## LVMCONF:     locking_type=1
| [ 0:00] ## LVMCONF:     notify_dbus = 0
| [ 0:00] ## LVMCONF:     si_unit_consistency = 1
| [ 0:00] ## LVMCONF:     thin_check_executable = "/usr/sbin/thin_check"
| [ 0:00] ## LVMCONF:     thin_dump_executable = "/usr/sbin/thin_dump"
| [ 0:00] ## LVMCONF:     thin_repair_executable = "/usr/sbin/thin_repair"
| [ 0:00] ## LVMCONF:     use_lvmetad = 0
| [ 0:00] ## LVMCONF:     use_lvmlockd = 0
| [ 0:00] ## LVMCONF:     use_lvmpolld = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: log {
| [ 0:00] ## LVMCONF:     activation = 1
| [ 0:00] ## LVMCONF:     file = "@TESTDIR@/debug.log"
| [ 0:00] ## LVMCONF:     indent = 1
| [ 0:00] ## LVMCONF:     level = 9
| [ 0:00] ## LVMCONF:     overwrite = 1
| [ 0:00] ## LVMCONF:     syslog = 0
| [ 0:00] ## LVMCONF:     verbose = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] <======== Processing test: "lvresize-mirror.sh" ========>
| [ 0:00] 
| [ 0:00] aux prepare_vg 5
| [ 0:00] #lvresize-mirror.sh:18+ aux prepare_vg 5
| [ 0:00] ## preparing loop device....ok (/dev/loop0)
| [ 0:00] ## preparing 5 devices...lib/utils: line 212: DM_UDEV_COOKIE: unbound variable
| [ 0:00] set +vx; STACKTRACE; set -vx
| [ 0:00] ##lvresize-mirror.sh:18+ set +vx
| [ 0:00] ## - /lfskernel/sources/boot/LVM2.2.02.177/test/shell/lvresize-mirror.sh:18
| [ 0:00] ## 1 STACKTRACE() called from /lfskernel/sources/boot/LVM2.2.02.177/test/shell/lvresize-mirror.sh:18
| [ 0:00] <======== Info ========>
| [ 0:00] ## DMINFO:   Name             Maj Min Stat Open Targ Event  UUID                                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv5   253   7 L--w    0    1      0 TEST-@PREFIX@pv5                                                 
| [ 0:00] ## DMINFO:   @PREFIX@pv4   253   5 L--w    0    1      0 TEST-@PREFIX@pv4                                                 
| [ 0:00] ## DMINFO:   @PREFIX@pv3   253   3 L--w    0    1      0 TEST-@PREFIX@pv3                                                 
| [ 0:00] ## DMINFO:   @PREFIX@pv2   253   4 L--w    0    1      0 TEST-@PREFIX@pv2                                                 
| [ 0:00] ## DMINFO:   @PREFIX@pv1   253   6 L--w    0    1      0 TEST-@PREFIX@pv1                                                 
| [ 0:00] <======== Active table ========>
| [ 0:00] ## DMTABLE:  @PREFIX@pv5: 0 69632 linear 7:0 280576
| [ 0:00] ## DMTABLE:  @PREFIX@pv4: 0 69632 linear 7:0 210944
| [ 0:00] ## DMTABLE:  @PREFIX@pv3: 0 69632 linear 7:0 141312
| [ 0:00] ## DMTABLE:  @PREFIX@pv2: 0 69632 linear 7:0 71680
| [ 0:00] ## DMTABLE:  @PREFIX@pv1: 0 69632 linear 7:0 2048
| [ 0:00] <======== Inactive table ========>
| [ 0:00] ## DMITABLE: @PREFIX@pv5: 
| [ 0:00] ## DMITABLE: @PREFIX@pv4: 
| [ 0:00] ## DMITABLE: @PREFIX@pv3: 
| [ 0:00] ## DMITABLE: @PREFIX@pv2: 
| [ 0:00] ## DMITABLE: @PREFIX@pv1: 
| [ 0:00] <======== Status ========>
| [ 0:00] ## DMSTATUS: @PREFIX@pv5: 0 69632 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv4: 0 69632 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv3: 0 69632 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv2: 0 69632 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv1: 0 69632 linear 
| [ 0:00] <======== Tree ========>
| [ 0:00] ## DMTREE:   @PREFIX@pv5 (253:7)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   @PREFIX@pv4 (253:5)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   @PREFIX@pv3 (253:3)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   @PREFIX@pv2 (253:4)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   @PREFIX@pv1 (253:6)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   LFS_vg-lfs (253:2)
| [ 0:00] ## DMTREE:    `- (8:16)
| [ 0:00] ## DMTREE:   centos-swap (253:1)
| [ 0:00] ## DMTREE:    `- (8:2)
| [ 0:00] ## DMTREE:   centos-root (253:0)
| [ 0:00] ## DMTREE:    `- (8:2)
| [ 0:00] <======== Recursive list of @TESTDIR@/dev ========>
| [ 0:00] ## LSLR:	@TESTDIR@/dev:
| [ 0:00] ## LSLR:	total 4
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 0 Feb 21 02:27 loop0
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 1 Feb 21 02:27 loop1
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 2 Feb 21 02:27 loop2
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 3 Feb 21 02:27 loop3
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 4 Feb 21 02:27 loop4
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 5 Feb 21 02:27 loop5
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 6 Feb 21 02:27 loop6
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 7 Feb 21 02:27 loop7
| [ 0:00] ## LSLR:	drwxr-xr-x 2 root root 4096 Feb 21 02:27 mapper
| [ 0:00] ## LSLR:	crw-r--r-- 1 root root 1, 3 Feb 21 02:27 testnull
| [ 0:00] ## LSLR:	
| [ 0:00] ## LSLR:	@TESTDIR@/dev/mapper:
| [ 0:00] ## LSLR:	total 0
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   6 Feb 21 02:27 @PREFIX@pv1
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   4 Feb 21 02:27 @PREFIX@pv2
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   3 Feb 21 02:27 @PREFIX@pv3
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   5 Feb 21 02:27 @PREFIX@pv4
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   7 Feb 21 02:27 @PREFIX@pv5
| [ 0:00] ## LSLR:	crw------- 1 root root  10, 236 Feb 21 02:27 control
| [ 0:00] <======== Udev DB content ========>
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-0
| [ 0:00] ## UDEV:	N: dm-0
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-0
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-0
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=0
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-1
| [ 0:00] ## UDEV:	N: dm-1
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-1
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-1
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=1
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-2
| [ 0:00] ## UDEV:	N: dm-2
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-2
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-2
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=2
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-3
| [ 0:00] ## UDEV:	N: dm-3
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-3
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-3
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=3
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-4
| [ 0:00] ## UDEV:	N: dm-4
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-4
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-4
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=4
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-5
| [ 0:00] ## UDEV:	N: dm-5
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-5
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-5
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=5
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-6
| [ 0:00] ## UDEV:	N: dm-6
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-6
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-6
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=6
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-7
| [ 0:00] ## UDEV:	N: dm-7
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-7
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-7
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=7
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/loop0
| [ 0:00] ## UDEV:	N: loop0
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/loop0
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/loop0
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=7
| [ 0:00] ## UDEV:	E: MINOR=0
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] <======== Script file "lvresize-mirror.sh" ========>
| [ 0:00] ## Line: 1 	 #!/usr/bin/env bash
| [ 0:00] ## Line: 2 	 
| [ 0:00] ## Line: 3 	 # Copyright (C) 2010 Red Hat, Inc. All rights reserved.
| [ 0:00] ## Line: 4 	 #
| [ 0:00] ## Line: 5 	 # This copyrighted material is made available to anyone wishing to use,
| [ 0:00] ## Line: 6 	 # modify, copy, or redistribute it subject to the terms and conditions
| [ 0:00] ## Line: 7 	 # of the GNU General Public License v.2.
| [ 0:00] ## Line: 8 	 #
| [ 0:00] ## Line: 9 	 # You should have received a copy of the GNU General Public License
| [ 0:00] ## Line: 10 	 # along with this program; if not, write to the Free Software Foundation,
| [ 0:00] ## Line: 11 	 # Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA
| [ 0:00] ## Line: 12 	 
| [ 0:00] ## Line: 13 	 SKIP_WITH_LVMLOCKD=1
| [ 0:00] ## Line: 14 	 SKIP_WITH_LVMPOLLD=1
| [ 0:00] ## Line: 15 	 
| [ 0:00] ## Line: 16 	 . lib/inittest
| [ 0:00] ## Line: 17 	 
| [ 0:00] ## Line: 18 	 aux prepare_vg 5
| [ 0:00] ## Line: 19 	 
| [ 0:00] ## Line: 20 	 for deactivate in true false; do
| [ 0:00] ## Line: 21 	 
| [ 0:00] ## Line: 22 	 # extend 2-way mirror
| [ 0:00] ## Line: 23 	 	lvcreate -aye -l2 --type mirror -m1 -n $lv1 $vg "$dev1" "$dev2" "$dev3":0-1
| [ 0:00] ## Line: 24 	 
| [ 0:00] ## Line: 25 	 	test $deactivate && lvchange -an $vg/$lv1
| [ 0:00] ## Line: 26 	 
| [ 0:00] ## Line: 27 	 	lvextend -l+2 $vg/$lv1
| [ 0:00] ## Line: 28 	 	check mirror $vg $lv1 "$dev3"
| [ 0:00] ## Line: 29 	 	check mirror_images_contiguous $vg $lv1
| [ 0:00] ## Line: 30 	 
| [ 0:00] ## Line: 31 	 # reduce 2-way mirror
| [ 0:00] ## Line: 32 	 	lvreduce -f -l-2 $vg/$lv1
| [ 0:00] ## Line: 33 	 	check mirror $vg $lv1 "$dev3"
| [ 0:00] ## Line: 34 	 
| [ 0:00] ## Line: 35 	 # extend 2-way mirror (cling if not contiguous)
| [ 0:00] ## Line: 36 	 	lvcreate -aye -l2 --type mirror -m1 -n $lv2 $vg "$dev1" "$dev2" "$dev3":0-1
| [ 0:00] ## Line: 37 	 	lvcreate -l1 -n $lv3 $vg "$dev1"
| [ 0:00] ## Line: 38 	 	lvcreate -l1 -n $lv4 $vg "$dev2"
| [ 0:00] ## Line: 39 	 
| [ 0:00] ## Line: 40 	 	test $deactivate && lvchange -an $vg/$lv2
| [ 0:00] ## Line: 41 	 
| [ 0:00] ## Line: 42 	 	lvextend -l+2 $vg/$lv2
| [ 0:00] ## Line: 43 	 	check mirror $vg $lv2 "$dev3"
| [ 0:00] ## Line: 44 	 	check mirror_images_clung $vg $lv2
| [ 0:00] ## Line: 45 	 
| [ 0:00] ## Line: 46 	 	lvremove -ff $vg
| [ 0:00] ## Line: 47 	 done
| [ 0:00] ## Line: 48 	 
| [ 0:00] ## Line: 49 	 vgremove -ff $vg
| [ 0:00] aux teardown
| [ 0:00] #lvresize-mirror.sh:1+ aux teardown
| [ 0:00] ## teardown.........ok
###       failed: [ndev-vanilla] shell/lvresize-mirror.sh
###      skipped: [ndev-vanilla] shell/lvresize-raid.sh
###      skipped: [ndev-vanilla] shell/lvresize-raid10.sh

| [ 0:00] Library version:   1.02.146 (2017-12-18)
| [ 0:00] Driver version:    4.35.0
| [ 0:00] Kernel is Linux localhost.localdomain 3.10.0-693.11.1.el7.x86_64 #1 SMP Mon Dec 4 23:52:40 UTC 2017 x86_64 GNU/Linux
| [ 0:00] Selinux mode is not installed.
| [ 0:00]               total        used        free      shared  buff/cache   available
| [ 0:00] Mem:           7822        1079        4146          10        2596        6436
| [ 0:00] Swap:          4095           0        4095
| [ 0:00] Filesystem      Size  Used Avail Use% Mounted on
| [ 0:00] /dev/sdc1        18G  8.4G  8.4G  50% /
| [ 0:00] /dev/sdd1        51G  6.1G   43G  13% /lfskernel
| [ 0:00] devtmpfs        3.9G     0  3.9G   0% /dev
| [ 0:00] tmpfs           3.9G     0  3.9G   0% /run
| [ 0:00] @TESTDIR=/tmp/LVMTEST8932.GhlnRmpgzb
| [ 0:00] @PREFIX=LVMTEST8932
| [ 0:00] ## LVMCONF: activation {
| [ 0:00] ## LVMCONF:     checks = 1
| [ 0:00] ## LVMCONF:     monitoring = 0
| [ 0:00] ## LVMCONF:     polling_interval = 1
| [ 0:00] ## LVMCONF:     raid_region_size = 512
| [ 0:00] ## LVMCONF:     retry_deactivation = 1
| [ 0:00] ## LVMCONF:     snapshot_autoextend_percent = 50
| [ 0:00] ## LVMCONF:     snapshot_autoextend_threshold = 50
| [ 0:00] ## LVMCONF:     udev_rules = 1
| [ 0:00] ## LVMCONF:     udev_sync = 1
| [ 0:00] ## LVMCONF:     verify_udev_operations = 1
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: allocation {
| [ 0:00] ## LVMCONF:     wipe_signatures_when_zeroing_new_lvs = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: backup {
| [ 0:00] ## LVMCONF:     archive = 0
| [ 0:00] ## LVMCONF:     backup = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: devices {
| [ 0:00] ## LVMCONF:     cache_dir = "@TESTDIR@/etc"
| [ 0:00] ## LVMCONF:     default_data_alignment = 1
| [ 0:00] ## LVMCONF:     dir = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     filter = "a|.*|"
| [ 0:00] ## LVMCONF:     global_filter = [ "a|@TESTDIR@/dev/mapper/@PREFIX@.*pv[0-9_]*$|", "r|.*|" ]
| [ 0:00] ## LVMCONF:     md_component_detection  = 0
| [ 0:00] ## LVMCONF:     scan = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     sysfs_scan = 1
| [ 0:00] ## LVMCONF:     write_cache_state = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: dmeventd {
| [ 0:00] ## LVMCONF:     executable = "/sources/boot/LVM2.2.02.177/test/lib/dmeventd"
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: global {
| [ 0:00] ## LVMCONF:     abort_on_internal_errors = 1
| [ 0:00] ## LVMCONF:     cache_check_executable = "/usr/sbin/cache_check"
| [ 0:00] ## LVMCONF:     cache_dump_executable = "/usr/sbin/cache_dump"
| [ 0:00] ## LVMCONF:     cache_repair_executable = "/usr/sbin/cache_repair"
| [ 0:00] ## LVMCONF:     detect_internal_vg_cache_corruption = 1
| [ 0:00] ## LVMCONF:     fallback_to_local_locking = 0
| [ 0:00] ## LVMCONF:     fsadm_executable = "/sources/boot/LVM2.2.02.177/test/lib/fsadm"
| [ 0:00] ## LVMCONF:     library_dir = "@TESTDIR@/lib"
| [ 0:00] ## LVMCONF:     locking_dir = "@TESTDIR@/var/lock/lvm"
| [ 0:00] ## LVMCONF:     locking_type=1
| [ 0:00] ## LVMCONF:     notify_dbus = 0
| [ 0:00] ## LVMCONF:     si_unit_consistency = 1
| [ 0:00] ## LVMCONF:     thin_check_executable = "/usr/sbin/thin_check"
| [ 0:00] ## LVMCONF:     thin_dump_executable = "/usr/sbin/thin_dump"
| [ 0:00] ## LVMCONF:     thin_repair_executable = "/usr/sbin/thin_repair"
| [ 0:00] ## LVMCONF:     use_lvmetad = 0
| [ 0:00] ## LVMCONF:     use_lvmlockd = 0
| [ 0:00] ## LVMCONF:     use_lvmpolld = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: log {
| [ 0:00] ## LVMCONF:     activation = 1
| [ 0:00] ## LVMCONF:     file = "@TESTDIR@/debug.log"
| [ 0:00] ## LVMCONF:     indent = 1
| [ 0:00] ## LVMCONF:     level = 9
| [ 0:00] ## LVMCONF:     overwrite = 1
| [ 0:00] ## LVMCONF:     syslog = 0
| [ 0:00] ## LVMCONF:     verbose = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] <======== Processing test: "lvresize-rounding.sh" ========>
| [ 0:00] 
| [ 0:00] aux prepare_pvs 3 22
| [ 0:00] #lvresize-rounding.sh:18+ aux prepare_pvs 3 22
| [ 0:00] ## preparing loop device....ok (/dev/loop0)
| [ 0:00] ## preparing 3 devices...lib/utils: line 212: DM_UDEV_COOKIE: unbound variable
| [ 0:00] set +vx; STACKTRACE; set -vx
| [ 0:00] ##lvresize-rounding.sh:18+ set +vx
| [ 0:00] ## - /lfskernel/sources/boot/LVM2.2.02.177/test/shell/lvresize-rounding.sh:18
| [ 0:00] ## 1 STACKTRACE() called from /lfskernel/sources/boot/LVM2.2.02.177/test/shell/lvresize-rounding.sh:18
| [ 0:00] <======== Info ========>
| [ 0:00] ## DMINFO:   Name             Maj Min Stat Open Targ Event  UUID                                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv3   253   4 L--w    0    1      0 TEST-@PREFIX@pv3                                                 
| [ 0:00] ## DMINFO:   @PREFIX@pv2   253   3 L--w    0    1      0 TEST-@PREFIX@pv2                                                 
| [ 0:00] ## DMINFO:   @PREFIX@pv1   253   5 L--w    0    1      0 TEST-@PREFIX@pv1                                                 
| [ 0:00] <======== Active table ========>
| [ 0:00] ## DMTABLE:  @PREFIX@pv3: 0 45056 linear 7:0 92160
| [ 0:00] ## DMTABLE:  @PREFIX@pv2: 0 45056 linear 7:0 47104
| [ 0:00] ## DMTABLE:  @PREFIX@pv1: 0 45056 linear 7:0 2048
| [ 0:00] <======== Inactive table ========>
| [ 0:00] ## DMITABLE: @PREFIX@pv3: 
| [ 0:00] ## DMITABLE: @PREFIX@pv2: 
| [ 0:00] ## DMITABLE: @PREFIX@pv1: 
| [ 0:00] <======== Status ========>
| [ 0:00] ## DMSTATUS: @PREFIX@pv3: 0 45056 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv2: 0 45056 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv1: 0 45056 linear 
| [ 0:00] <======== Tree ========>
| [ 0:00] ## DMTREE:   @PREFIX@pv3 (253:4)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   @PREFIX@pv2 (253:3)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   @PREFIX@pv1 (253:5)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   LFS_vg-lfs (253:2)
| [ 0:00] ## DMTREE:    `- (8:16)
| [ 0:00] ## DMTREE:   centos-swap (253:1)
| [ 0:00] ## DMTREE:    `- (8:2)
| [ 0:00] ## DMTREE:   centos-root (253:0)
| [ 0:00] ## DMTREE:    `- (8:2)
| [ 0:00] <======== Recursive list of @TESTDIR@/dev ========>
| [ 0:00] ## LSLR:	@TESTDIR@/dev:
| [ 0:00] ## LSLR:	total 4
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 0 Feb 21 02:27 loop0
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 1 Feb 21 02:27 loop1
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 2 Feb 21 02:27 loop2
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 3 Feb 21 02:27 loop3
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 4 Feb 21 02:27 loop4
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 5 Feb 21 02:27 loop5
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 6 Feb 21 02:27 loop6
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 7 Feb 21 02:27 loop7
| [ 0:00] ## LSLR:	drwxr-xr-x 2 root root 4096 Feb 21 02:27 mapper
| [ 0:00] ## LSLR:	crw-r--r-- 1 root root 1, 3 Feb 21 02:27 testnull
| [ 0:00] ## LSLR:	
| [ 0:00] ## LSLR:	@TESTDIR@/dev/mapper:
| [ 0:00] ## LSLR:	total 0
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   5 Feb 21 02:27 @PREFIX@pv1
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   3 Feb 21 02:27 @PREFIX@pv2
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   4 Feb 21 02:27 @PREFIX@pv3
| [ 0:00] ## LSLR:	crw------- 1 root root  10, 236 Feb 21 02:27 control
| [ 0:00] <======== Udev DB content ========>
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-0
| [ 0:00] ## UDEV:	N: dm-0
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-0
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-0
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=0
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-1
| [ 0:00] ## UDEV:	N: dm-1
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-1
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-1
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=1
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-2
| [ 0:00] ## UDEV:	N: dm-2
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-2
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-2
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=2
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-3
| [ 0:00] ## UDEV:	N: dm-3
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-3
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-3
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=3
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-4
| [ 0:00] ## UDEV:	N: dm-4
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-4
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-4
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=4
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-5
| [ 0:00] ## UDEV:	N: dm-5
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-5
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-5
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=5
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/loop0
| [ 0:00] ## UDEV:	N: loop0
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/loop0
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/loop0
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=7
| [ 0:00] ## UDEV:	E: MINOR=0
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] <======== Script file "lvresize-rounding.sh" ========>
| [ 0:00] ## Line: 1 	 #!/usr/bin/env bash
| [ 0:00] ## Line: 2 	 
| [ 0:00] ## Line: 3 	 # Copyright (C) 2007-2012 Red Hat, Inc. All rights reserved.
| [ 0:00] ## Line: 4 	 #
| [ 0:00] ## Line: 5 	 # This copyrighted material is made available to anyone wishing to use,
| [ 0:00] ## Line: 6 	 # modify, copy, or redistribute it subject to the terms and conditions
| [ 0:00] ## Line: 7 	 # of the GNU General Public License v.2.
| [ 0:00] ## Line: 8 	 #
| [ 0:00] ## Line: 9 	 # You should have received a copy of the GNU General Public License
| [ 0:00] ## Line: 10 	 # along with this program; if not, write to the Free Software Foundation,
| [ 0:00] ## Line: 11 	 # Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA
| [ 0:00] ## Line: 12 	 
| [ 0:00] ## Line: 13 	 SKIP_WITH_LVMLOCKD=1
| [ 0:00] ## Line: 14 	 SKIP_WITH_LVMPOLLD=1
| [ 0:00] ## Line: 15 	 
| [ 0:00] ## Line: 16 	 . lib/inittest
| [ 0:00] ## Line: 17 	 
| [ 0:00] ## Line: 18 	 aux prepare_pvs 3 22
| [ 0:00] ## Line: 19 	 get_devs
| [ 0:00] ## Line: 20 	 
| [ 0:00] ## Line: 21 	 vgcreate -s 32K "$vg" "${DEVICES[@]}"
| [ 0:00] ## Line: 22 	 
| [ 0:00] ## Line: 23 	 lvcreate -an -Zn -l4 -i3 -I64 $vg
| [ 0:00] ## Line: 24 	 
| [ 0:00] ## Line: 25 	 lvcreate -an -Zn -l8 -i2 -I64 $vg
| [ 0:00] ## Line: 26 	 
| [ 0:00] ## Line: 27 	 lvcreate -an -Zn -l16 $vg
| [ 0:00] ## Line: 28 	 
| [ 0:00] ## Line: 29 	 lvcreate -an -Zn -l32 -i3 -I64 -n $lv1 $vg
| [ 0:00] ## Line: 30 	 
| [ 0:00] ## Line: 31 	 lvresize -l+64 -i3 -I64 $vg/$lv1
| [ 0:00] ## Line: 32 	 
| [ 0:00] ## Line: 33 	 lvresize -l+64 -i3 -I128 $vg/$lv1
| [ 0:00] ## Line: 34 	 
| [ 0:00] ## Line: 35 	 #lvcreate -l100%FREE -i3 -I64 --alloc anywhere $vg
| [ 0:00] ## Line: 36 	 vgremove -f $vg
| [ 0:00] ## Line: 37 	 
| [ 0:00] ## Line: 38 	 # 15 extents
| [ 0:00] ## Line: 39 	 LVM_TEST_AUX_TRACE=yes
| [ 0:00] ## Line: 40 	 aux prepare_vg 3 22
| [ 0:00] ## Line: 41 	 unset LVM_TEST_AUX_TRACE
| [ 0:00] ## Line: 42 	 
| [ 0:00] ## Line: 43 	 # Block some extents
| [ 0:00] ## Line: 44 	 lvcreate -an -Zn -l4 -i3 $vg
| [ 0:00] ## Line: 45 	 lvcreate -an -Zn -l1 $vg
| [ 0:00] ## Line: 46 	 
| [ 0:00] ## Line: 47 	 lvcreate -an -Zn -l100%FREE -n $lv1 -i3 $vg
| [ 0:00] ## Line: 48 	 check vg_field $vg vg_free_count 2
| [ 0:00] ## Line: 49 	 lvremove -f $vg/$lv1
| [ 0:00] ## Line: 50 	 
| [ 0:00] ## Line: 51 	 lvcreate -an -Zn -l1 -n $lv1 -i3 $vg
| [ 0:00] ## Line: 52 	 lvextend -l+100%FREE -i3 $vg/$lv1
| [ 0:00] ## Line: 53 	 check vg_field $vg vg_free_count 2
| [ 0:00] ## Line: 54 	 
| [ 0:00] ## Line: 55 	 lvreduce -f -l50%LV $vg/$lv1
| [ 0:00] ## Line: 56 	 vgremove -f $vg
| [ 0:00] ## Line: 57 	 
| [ 0:00] ## Line: 58 	 vgcreate -s 4M $vg "$dev1" "$dev2" "$dev3"
| [ 0:00] ## Line: 59 	 
| [ 0:00] ## Line: 60 	 # Expect to play with 15 extents
| [ 0:00] ## Line: 61 	 check vg_field $vg vg_free_count 15
| [ 0:00] ## Line: 62 	 
| [ 0:00] ## Line: 63 	 # Should be rounded to 12 extents
| [ 0:00] ## Line: 64 	 lvcreate -an -Zn -l10 -n lv -i3 $vg
| [ 0:00] ## Line: 65 	 check vg_field $vg vg_free_count 3
| [ 0:00] ## Line: 66 	 
| [ 0:00] ## Line: 67 	 # Should want 16 extents
| [ 0:00] ## Line: 68 	 not lvextend -l+4 $vg/lv
| [ 0:00] ## Line: 69 	 
| [ 0:00] ## Line: 70 	 # Round up to whole free space
| [ 0:00] ## Line: 71 	 lvextend -l+100%FREE $vg/lv
| [ 0:00] ## Line: 72 	 check vg_field $vg vg_free_count 0
| [ 0:00] ## Line: 73 	 
| [ 0:00] ## Line: 74 	 # Rounds up and should reduce just by 3 extents
| [ 0:00] ## Line: 75 	 lvreduce -f -l-4 $vg/lv
| [ 0:00] ## Line: 76 	 check vg_field $vg vg_free_count 3
| [ 0:00] ## Line: 77 	 
| [ 0:00] ## Line: 78 	 # Should round up to 15 extents
| [ 0:00] ## Line: 79 	 lvextend -f -l+1 $vg/lv
| [ 0:00] ## Line: 80 	 check vg_field $vg vg_free_count 0
| [ 0:00] ## Line: 81 	 
| [ 0:00] ## Line: 82 	 lvreduce -f -l-4 $vg/lv
| [ 0:00] ## Line: 83 	 check vg_field $vg vg_free_count 3
| [ 0:00] ## Line: 84 	 
| [ 0:00] ## Line: 85 	 lvextend -l90%VG $vg/lv
| [ 0:00] ## Line: 86 	 check vg_field $vg vg_free_count 0
| [ 0:00] ## Line: 87 	 
| [ 0:00] ## Line: 88 	 not lvreduce -f -l-10%LV $vg/lv
| [ 0:00] ## Line: 89 	 check vg_field $vg vg_free_count 0
| [ 0:00] ## Line: 90 	 
| [ 0:00] ## Line: 91 	 lvreduce -f -l-20%LV $vg/lv
| [ 0:00] ## Line: 92 	 check vg_field $vg vg_free_count 3
| [ 0:00] aux teardown
| [ 0:00] #lvresize-rounding.sh:1+ aux teardown
| [ 0:00] ## teardown.........ok
###       failed: [ndev-vanilla] shell/lvresize-rounding.sh
###      skipped: [ndev-vanilla] shell/lvresize-thin-external-origin.sh
###      skipped: [ndev-vanilla] shell/lvresize-thin-metadata.sh

| [ 0:00] Library version:   1.02.146 (2017-12-18)
| [ 0:00] Driver version:    4.35.0
| [ 0:00] Kernel is Linux localhost.localdomain 3.10.0-693.11.1.el7.x86_64 #1 SMP Mon Dec 4 23:52:40 UTC 2017 x86_64 GNU/Linux
| [ 0:00] Selinux mode is not installed.
| [ 0:00]               total        used        free      shared  buff/cache   available
| [ 0:00] Mem:           7822        1079        4146          10        2596        6436
| [ 0:00] Swap:          4095           0        4095
| [ 0:00] Filesystem      Size  Used Avail Use% Mounted on
| [ 0:00] /dev/sdc1        18G  8.4G  8.4G  50% /
| [ 0:00] /dev/sdd1        51G  6.1G   43G  13% /lfskernel
| [ 0:00] devtmpfs        3.9G     0  3.9G   0% /dev
| [ 0:00] tmpfs           3.9G     0  3.9G   0% /run
| [ 0:00] @TESTDIR=/tmp/LVMTEST9251.UCJt9AgARL
| [ 0:00] @PREFIX=LVMTEST9251
| [ 0:00] ## LVMCONF: activation {
| [ 0:00] ## LVMCONF:     checks = 1
| [ 0:00] ## LVMCONF:     monitoring = 0
| [ 0:00] ## LVMCONF:     polling_interval = 1
| [ 0:00] ## LVMCONF:     raid_region_size = 512
| [ 0:00] ## LVMCONF:     retry_deactivation = 1
| [ 0:00] ## LVMCONF:     snapshot_autoextend_percent = 50
| [ 0:00] ## LVMCONF:     snapshot_autoextend_threshold = 50
| [ 0:00] ## LVMCONF:     udev_rules = 1
| [ 0:00] ## LVMCONF:     udev_sync = 1
| [ 0:00] ## LVMCONF:     verify_udev_operations = 1
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: allocation {
| [ 0:00] ## LVMCONF:     wipe_signatures_when_zeroing_new_lvs = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: backup {
| [ 0:00] ## LVMCONF:     archive = 0
| [ 0:00] ## LVMCONF:     backup = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: devices {
| [ 0:00] ## LVMCONF:     cache_dir = "@TESTDIR@/etc"
| [ 0:00] ## LVMCONF:     default_data_alignment = 1
| [ 0:00] ## LVMCONF:     dir = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     filter = "a|.*|"
| [ 0:00] ## LVMCONF:     global_filter = [ "a|@TESTDIR@/dev/mapper/@PREFIX@.*pv[0-9_]*$|", "r|.*|" ]
| [ 0:00] ## LVMCONF:     md_component_detection  = 0
| [ 0:00] ## LVMCONF:     scan = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     sysfs_scan = 1
| [ 0:00] ## LVMCONF:     write_cache_state = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: dmeventd {
| [ 0:00] ## LVMCONF:     executable = "/sources/boot/LVM2.2.02.177/test/lib/dmeventd"
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: global {
| [ 0:00] ## LVMCONF:     abort_on_internal_errors = 1
| [ 0:00] ## LVMCONF:     cache_check_executable = "/usr/sbin/cache_check"
| [ 0:00] ## LVMCONF:     cache_dump_executable = "/usr/sbin/cache_dump"
| [ 0:00] ## LVMCONF:     cache_repair_executable = "/usr/sbin/cache_repair"
| [ 0:00] ## LVMCONF:     detect_internal_vg_cache_corruption = 1
| [ 0:00] ## LVMCONF:     fallback_to_local_locking = 0
| [ 0:00] ## LVMCONF:     fsadm_executable = "/sources/boot/LVM2.2.02.177/test/lib/fsadm"
| [ 0:00] ## LVMCONF:     library_dir = "@TESTDIR@/lib"
| [ 0:00] ## LVMCONF:     locking_dir = "@TESTDIR@/var/lock/lvm"
| [ 0:00] ## LVMCONF:     locking_type=1
| [ 0:00] ## LVMCONF:     notify_dbus = 0
| [ 0:00] ## LVMCONF:     si_unit_consistency = 1
| [ 0:00] ## LVMCONF:     thin_check_executable = "/usr/sbin/thin_check"
| [ 0:00] ## LVMCONF:     thin_dump_executable = "/usr/sbin/thin_dump"
| [ 0:00] ## LVMCONF:     thin_repair_executable = "/usr/sbin/thin_repair"
| [ 0:00] ## LVMCONF:     use_lvmetad = 0
| [ 0:00] ## LVMCONF:     use_lvmlockd = 0
| [ 0:00] ## LVMCONF:     use_lvmpolld = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: log {
| [ 0:00] ## LVMCONF:     activation = 1
| [ 0:00] ## LVMCONF:     file = "@TESTDIR@/debug.log"
| [ 0:00] ## LVMCONF:     indent = 1
| [ 0:00] ## LVMCONF:     level = 9
| [ 0:00] ## LVMCONF:     overwrite = 1
| [ 0:00] ## LVMCONF:     syslog = 0
| [ 0:00] ## LVMCONF:     verbose = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] <======== Processing test: "lvresize-usage.sh" ========>
| [ 0:00] 
| [ 0:00] aux prepare_vg 2 80
| [ 0:00] #lvresize-usage.sh:18+ aux prepare_vg 2 80
| [ 0:00] ## preparing loop device....ok (/dev/loop0)
| [ 0:00] ## preparing 2 devices...lib/utils: line 212: DM_UDEV_COOKIE: unbound variable
| [ 0:00] set +vx; STACKTRACE; set -vx
| [ 0:00] ##lvresize-usage.sh:18+ set +vx
| [ 0:00] ## - /lfskernel/sources/boot/LVM2.2.02.177/test/shell/lvresize-usage.sh:18
| [ 0:00] ## 1 STACKTRACE() called from /lfskernel/sources/boot/LVM2.2.02.177/test/shell/lvresize-usage.sh:18
| [ 0:00] <======== Info ========>
| [ 0:00] ## DMINFO:   Name             Maj Min Stat Open Targ Event  UUID                                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv2   253   4 L--w    0    1      0 TEST-@PREFIX@pv2                                                 
| [ 0:00] ## DMINFO:   @PREFIX@pv1   253   3 L--w    0    1      0 TEST-@PREFIX@pv1                                                 
| [ 0:00] <======== Active table ========>
| [ 0:00] ## DMTABLE:  @PREFIX@pv2: 0 163840 linear 7:0 165888
| [ 0:00] ## DMTABLE:  @PREFIX@pv1: 0 163840 linear 7:0 2048
| [ 0:00] <======== Inactive table ========>
| [ 0:00] ## DMITABLE: @PREFIX@pv2: 
| [ 0:00] ## DMITABLE: @PREFIX@pv1: 
| [ 0:00] <======== Status ========>
| [ 0:00] ## DMSTATUS: @PREFIX@pv2: 0 163840 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv1: 0 163840 linear 
| [ 0:00] <======== Tree ========>
| [ 0:00] ## DMTREE:   @PREFIX@pv2 (253:4)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   @PREFIX@pv1 (253:3)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   LFS_vg-lfs (253:2)
| [ 0:00] ## DMTREE:    `- (8:16)
| [ 0:00] ## DMTREE:   centos-swap (253:1)
| [ 0:00] ## DMTREE:    `- (8:2)
| [ 0:00] ## DMTREE:   centos-root (253:0)
| [ 0:00] ## DMTREE:    `- (8:2)
| [ 0:00] <======== Recursive list of @TESTDIR@/dev ========>
| [ 0:00] ## LSLR:	@TESTDIR@/dev:
| [ 0:00] ## LSLR:	total 4
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 0 Feb 21 02:27 loop0
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 1 Feb 21 02:27 loop1
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 2 Feb 21 02:27 loop2
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 3 Feb 21 02:27 loop3
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 4 Feb 21 02:27 loop4
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 5 Feb 21 02:27 loop5
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 6 Feb 21 02:27 loop6
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 7 Feb 21 02:27 loop7
| [ 0:00] ## LSLR:	drwxr-xr-x 2 root root 4096 Feb 21 02:27 mapper
| [ 0:00] ## LSLR:	crw-r--r-- 1 root root 1, 3 Feb 21 02:27 testnull
| [ 0:00] ## LSLR:	
| [ 0:00] ## LSLR:	@TESTDIR@/dev/mapper:
| [ 0:00] ## LSLR:	total 0
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   3 Feb 21 02:27 @PREFIX@pv1
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   4 Feb 21 02:27 @PREFIX@pv2
| [ 0:00] ## LSLR:	crw------- 1 root root  10, 236 Feb 21 02:27 control
| [ 0:00] <======== Udev DB content ========>
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-0
| [ 0:00] ## UDEV:	N: dm-0
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-0
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-0
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=0
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-1
| [ 0:00] ## UDEV:	N: dm-1
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-1
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-1
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=1
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-2
| [ 0:00] ## UDEV:	N: dm-2
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-2
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-2
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=2
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-3
| [ 0:00] ## UDEV:	N: dm-3
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-3
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-3
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=3
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-4
| [ 0:00] ## UDEV:	N: dm-4
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-4
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-4
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=4
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/loop0
| [ 0:00] ## UDEV:	N: loop0
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/loop0
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/loop0
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=7
| [ 0:00] ## UDEV:	E: MINOR=0
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] <======== Script file "lvresize-usage.sh" ========>
| [ 0:00] ## Line: 1 	 #!/usr/bin/env bash
| [ 0:00] ## Line: 2 	 
| [ 0:00] ## Line: 3 	 # Copyright (C) 2007-2016 Red Hat, Inc. All rights reserved.
| [ 0:00] ## Line: 4 	 #
| [ 0:00] ## Line: 5 	 # This copyrighted material is made available to anyone wishing to use,
| [ 0:00] ## Line: 6 	 # modify, copy, or redistribute it subject to the terms and conditions
| [ 0:00] ## Line: 7 	 # of the GNU General Public License v.2.
| [ 0:00] ## Line: 8 	 #
| [ 0:00] ## Line: 9 	 # You should have received a copy of the GNU General Public License
| [ 0:00] ## Line: 10 	 # along with this program; if not, write to the Free Software Foundation,
| [ 0:00] ## Line: 11 	 # Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA
| [ 0:00] ## Line: 12 	 
| [ 0:00] ## Line: 13 	 SKIP_WITH_LVMLOCKD=1
| [ 0:00] ## Line: 14 	 SKIP_WITH_LVMPOLLD=1
| [ 0:00] ## Line: 15 	 
| [ 0:00] ## Line: 16 	 . lib/inittest
| [ 0:00] ## Line: 17 	 
| [ 0:00] ## Line: 18 	 aux prepare_vg 2 80
| [ 0:00] ## Line: 19 	 
| [ 0:00] ## Line: 20 	 lvcreate -L 10M -n lv -i2 $vg
| [ 0:00] ## Line: 21 	 lvresize -l +4 $vg/lv
| [ 0:00] ## Line: 22 	 not lvextend -L+0 $vg/lv
| [ 0:00] ## Line: 23 	 not lvextend -l+0 $vg/lv
| [ 0:00] ## Line: 24 	 lvremove -ff $vg
| [ 0:00] ## Line: 25 	 
| [ 0:00] ## Line: 26 	 lvcreate -L 64M -n $lv -i2 $vg
| [ 0:00] ## Line: 27 	 not lvresize -v -l +4 xxx/$lv
| [ 0:00] ## Line: 28 	 
| [ 0:00] ## Line: 29 	 # Check stripe size is reduced to extent size when it's bigger
| [ 0:00] ## Line: 30 	 ESIZE=$(get vg_field $vg vg_extent_size --units b)
| [ 0:00] ## Line: 31 	 lvextend -L+64m -i 2 -I$(( ${ESIZE%%B} * 2 ))B $vg/$lv 2>&1 | tee err
| [ 0:00] ## Line: 32 	 grep "Reducing stripe size" err
| [ 0:00] ## Line: 33 	 
| [ 0:00] ## Line: 34 	 lvremove -ff $vg
| [ 0:00] ## Line: 35 	 
| [ 0:00] ## Line: 36 	 lvcreate -L 10M -n lv $vg "$dev1"
| [ 0:00] ## Line: 37 	 lvextend -L +10M $vg/lv "$dev2"
| [ 0:00] ## Line: 38 	 lvextend --type striped -m0 -L +10M $vg/lv "$dev2"
| [ 0:00] ## Line: 39 	 
| [ 0:00] ## Line: 40 	 # Attempt to reduce with lvextend and vice versa:
| [ 0:00] ## Line: 41 	 not lvextend -L 16M $vg/lv
| [ 0:00] ## Line: 42 	 not lvreduce -L 32M $vg/lv
| [ 0:00] ## Line: 43 	 
| [ 0:00] ## Line: 44 	 lvremove -ff $vg
| [ 0:00] ## Line: 45 	 
| [ 0:00] ## Line: 46 	 lvcreate --type mirror -aey -L 4 -n $lv1 $vg
| [ 0:00] ## Line: 47 	 # Incorrent name for resized LV
| [ 0:00] ## Line: 48 	 not lvextend --type mirror -L 10 -n $lv1 $vg
| [ 0:00] ## Line: 49 	 # Same size
| [ 0:00] ## Line: 50 	 not lvextend --type mirror -L 4 $vg/$lv1
| [ 0:00] ## Line: 51 	 # Cannot use any '-' or '+'  sign for --mirror arg
| [ 0:00] ## Line: 52 	 not lvextend --type mirror -L+2 -m-1 $vg/$lv1
| [ 0:00] ## Line: 53 	 not lvextend --type mirror -L+2 -m+1 $vg/$lv1
| [ 0:00] ## Line: 54 	 
| [ 0:00] ## Line: 55 	 lvextend --type mirror -L+4 -m1 $vg/$lv1
| [ 0:00] ## Line: 56 	 
| [ 0:00] ## Line: 57 	 lvs -a $vg
| [ 0:00] ## Line: 58 	 check  lv_field $vg/$lv1 size "8.00m"
| [ 0:00] ## Line: 59 	 
| [ 0:00] ## Line: 60 	 lvremove -ff $vg
| [ 0:00] aux teardown
| [ 0:00] #lvresize-usage.sh:1+ aux teardown
| [ 0:00] ## teardown.........ok
###       failed: [ndev-vanilla] shell/lvresize-usage.sh
###      skipped: [ndev-vanilla] shell/lvs-cache.sh

| [ 0:00] Library version:   1.02.146 (2017-12-18)
| [ 0:00] Driver version:    4.35.0
| [ 0:00] Kernel is Linux localhost.localdomain 3.10.0-693.11.1.el7.x86_64 #1 SMP Mon Dec 4 23:52:40 UTC 2017 x86_64 GNU/Linux
| [ 0:00] Selinux mode is not installed.
| [ 0:00]               total        used        free      shared  buff/cache   available
| [ 0:00] Mem:           7822        1079        4146          10        2596        6436
| [ 0:00] Swap:          4095           0        4095
| [ 0:00] Filesystem      Size  Used Avail Use% Mounted on
| [ 0:00] /dev/sdc1        18G  8.4G  8.4G  50% /
| [ 0:00] /dev/sdd1        51G  6.1G   43G  13% /lfskernel
| [ 0:00] devtmpfs        3.9G     0  3.9G   0% /dev
| [ 0:00] tmpfs           3.9G     0  3.9G   0% /run
| [ 0:00] @TESTDIR=/tmp/LVMTEST9499.REzjOvvgTB
| [ 0:00] @PREFIX=LVMTEST9499
| [ 0:00] ## LVMCONF: activation {
| [ 0:00] ## LVMCONF:     checks = 1
| [ 0:00] ## LVMCONF:     monitoring = 0
| [ 0:00] ## LVMCONF:     polling_interval = 1
| [ 0:00] ## LVMCONF:     raid_region_size = 512
| [ 0:00] ## LVMCONF:     retry_deactivation = 1
| [ 0:00] ## LVMCONF:     snapshot_autoextend_percent = 50
| [ 0:00] ## LVMCONF:     snapshot_autoextend_threshold = 50
| [ 0:00] ## LVMCONF:     udev_rules = 1
| [ 0:00] ## LVMCONF:     udev_sync = 1
| [ 0:00] ## LVMCONF:     verify_udev_operations = 1
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: allocation {
| [ 0:00] ## LVMCONF:     wipe_signatures_when_zeroing_new_lvs = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: backup {
| [ 0:00] ## LVMCONF:     archive = 0
| [ 0:00] ## LVMCONF:     backup = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: devices {
| [ 0:00] ## LVMCONF:     cache_dir = "@TESTDIR@/etc"
| [ 0:00] ## LVMCONF:     default_data_alignment = 1
| [ 0:00] ## LVMCONF:     dir = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     filter = "a|.*|"
| [ 0:00] ## LVMCONF:     global_filter = [ "a|@TESTDIR@/dev/mapper/@PREFIX@.*pv[0-9_]*$|", "r|.*|" ]
| [ 0:00] ## LVMCONF:     md_component_detection  = 0
| [ 0:00] ## LVMCONF:     scan = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     sysfs_scan = 1
| [ 0:00] ## LVMCONF:     write_cache_state = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: dmeventd {
| [ 0:00] ## LVMCONF:     executable = "/sources/boot/LVM2.2.02.177/test/lib/dmeventd"
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: global {
| [ 0:00] ## LVMCONF:     abort_on_internal_errors = 1
| [ 0:00] ## LVMCONF:     cache_check_executable = "/usr/sbin/cache_check"
| [ 0:00] ## LVMCONF:     cache_dump_executable = "/usr/sbin/cache_dump"
| [ 0:00] ## LVMCONF:     cache_repair_executable = "/usr/sbin/cache_repair"
| [ 0:00] ## LVMCONF:     detect_internal_vg_cache_corruption = 1
| [ 0:00] ## LVMCONF:     fallback_to_local_locking = 0
| [ 0:00] ## LVMCONF:     fsadm_executable = "/sources/boot/LVM2.2.02.177/test/lib/fsadm"
| [ 0:00] ## LVMCONF:     library_dir = "@TESTDIR@/lib"
| [ 0:00] ## LVMCONF:     locking_dir = "@TESTDIR@/var/lock/lvm"
| [ 0:00] ## LVMCONF:     locking_type=1
| [ 0:00] ## LVMCONF:     notify_dbus = 0
| [ 0:00] ## LVMCONF:     si_unit_consistency = 1
| [ 0:00] ## LVMCONF:     thin_check_executable = "/usr/sbin/thin_check"
| [ 0:00] ## LVMCONF:     thin_dump_executable = "/usr/sbin/thin_dump"
| [ 0:00] ## LVMCONF:     thin_repair_executable = "/usr/sbin/thin_repair"
| [ 0:00] ## LVMCONF:     use_lvmetad = 0
| [ 0:00] ## LVMCONF:     use_lvmlockd = 0
| [ 0:00] ## LVMCONF:     use_lvmpolld = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: log {
| [ 0:00] ## LVMCONF:     activation = 1
| [ 0:00] ## LVMCONF:     file = "@TESTDIR@/debug.log"
| [ 0:00] ## LVMCONF:     indent = 1
| [ 0:00] ## LVMCONF:     level = 9
| [ 0:00] ## LVMCONF:     overwrite = 1
| [ 0:00] ## LVMCONF:     syslog = 0
| [ 0:00] ## LVMCONF:     verbose = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] <======== Processing test: "mda-rollback.sh" ========>
| [ 0:00] 
| [ 0:00] aux prepare_devs 3
| [ 0:00] #mda-rollback.sh:18+ aux prepare_devs 3
| [ 0:00] ## preparing loop device....ok (/dev/loop0)
| [ 0:01] ## preparing 3 devices...lib/utils: line 212: DM_UDEV_COOKIE: unbound variable
| [ 0:01] set +vx; STACKTRACE; set -vx
| [ 0:01] ##mda-rollback.sh:18+ set +vx
| [ 0:01] ## - /lfskernel/sources/boot/LVM2.2.02.177/test/shell/mda-rollback.sh:18
| [ 0:01] ## 1 STACKTRACE() called from /lfskernel/sources/boot/LVM2.2.02.177/test/shell/mda-rollback.sh:18
| [ 0:01] <======== Info ========>
| [ 0:01] ## DMINFO:   Name             Maj Min Stat Open Targ Event  UUID                                                                
| [ 0:01] ## DMINFO:   @PREFIX@pv3   253   4 L--w    0    1      0 TEST-@PREFIX@pv3                                                 
| [ 0:01] ## DMINFO:   @PREFIX@pv2   253   3 L--w    0    1      0 TEST-@PREFIX@pv2                                                 
| [ 0:01] ## DMINFO:   @PREFIX@pv1   253   5 L--w    0    1      0 TEST-@PREFIX@pv1                                                 
| [ 0:01] <======== Active table ========>
| [ 0:01] ## DMTABLE:  @PREFIX@pv3: 0 69632 linear 7:0 141312
| [ 0:01] ## DMTABLE:  @PREFIX@pv2: 0 69632 linear 7:0 71680
| [ 0:01] ## DMTABLE:  @PREFIX@pv1: 0 69632 linear 7:0 2048
| [ 0:01] <======== Inactive table ========>
| [ 0:01] ## DMITABLE: @PREFIX@pv3: 
| [ 0:01] ## DMITABLE: @PREFIX@pv2: 
| [ 0:01] ## DMITABLE: @PREFIX@pv1: 
| [ 0:01] <======== Status ========>
| [ 0:01] ## DMSTATUS: @PREFIX@pv3: 0 69632 linear 
| [ 0:01] ## DMSTATUS: @PREFIX@pv2: 0 69632 linear 
| [ 0:01] ## DMSTATUS: @PREFIX@pv1: 0 69632 linear 
| [ 0:01] <======== Tree ========>
| [ 0:01] ## DMTREE:   @PREFIX@pv3 (253:4)
| [ 0:01] ## DMTREE:    `- (7:0)
| [ 0:01] ## DMTREE:   @PREFIX@pv2 (253:3)
| [ 0:01] ## DMTREE:    `- (7:0)
| [ 0:01] ## DMTREE:   @PREFIX@pv1 (253:5)
| [ 0:01] ## DMTREE:    `- (7:0)
| [ 0:01] ## DMTREE:   LFS_vg-lfs (253:2)
| [ 0:01] ## DMTREE:    `- (8:16)
| [ 0:01] ## DMTREE:   centos-swap (253:1)
| [ 0:01] ## DMTREE:    `- (8:2)
| [ 0:01] ## DMTREE:   centos-root (253:0)
| [ 0:01] ## DMTREE:    `- (8:2)
| [ 0:01] <======== Recursive list of @TESTDIR@/dev ========>
| [ 0:01] ## LSLR:	@TESTDIR@/dev:
| [ 0:01] ## LSLR:	total 4
| [ 0:01] ## LSLR:	brw-r--r-- 1 root root 7, 0 Feb 21 02:27 loop0
| [ 0:01] ## LSLR:	brw-r--r-- 1 root root 7, 1 Feb 21 02:27 loop1
| [ 0:01] ## LSLR:	brw-r--r-- 1 root root 7, 2 Feb 21 02:27 loop2
| [ 0:01] ## LSLR:	brw-r--r-- 1 root root 7, 3 Feb 21 02:27 loop3
| [ 0:01] ## LSLR:	brw-r--r-- 1 root root 7, 4 Feb 21 02:27 loop4
| [ 0:01] ## LSLR:	brw-r--r-- 1 root root 7, 5 Feb 21 02:27 loop5
| [ 0:01] ## LSLR:	brw-r--r-- 1 root root 7, 6 Feb 21 02:27 loop6
| [ 0:01] ## LSLR:	brw-r--r-- 1 root root 7, 7 Feb 21 02:27 loop7
| [ 0:01] ## LSLR:	drwxr-xr-x 2 root root 4096 Feb 21 02:27 mapper
| [ 0:01] ## LSLR:	crw-r--r-- 1 root root 1, 3 Feb 21 02:27 testnull
| [ 0:01] ## LSLR:	
| [ 0:01] ## LSLR:	@TESTDIR@/dev/mapper:
| [ 0:01] ## LSLR:	total 0
| [ 0:01] ## LSLR:	brw------- 1 root root 253,   5 Feb 21 02:27 @PREFIX@pv1
| [ 0:01] ## LSLR:	brw------- 1 root root 253,   3 Feb 21 02:27 @PREFIX@pv2
| [ 0:01] ## LSLR:	brw------- 1 root root 253,   4 Feb 21 02:27 @PREFIX@pv3
| [ 0:01] ## LSLR:	crw------- 1 root root  10, 236 Feb 21 02:27 control
| [ 0:01] <======== Udev DB content ========>
| [ 0:01] ## UDEV:	P: /devices/virtual/block/dm-0
| [ 0:01] ## UDEV:	N: dm-0
| [ 0:01] ## UDEV:	E: DEVNAME=/dev/dm-0
| [ 0:01] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-0
| [ 0:01] ## UDEV:	E: DEVTYPE=disk
| [ 0:01] ## UDEV:	E: MAJOR=253
| [ 0:01] ## UDEV:	E: MINOR=0
| [ 0:01] ## UDEV:	E: SUBSYSTEM=block
| [ 0:01] ## UDEV:	
| [ 0:01] ## UDEV:	P: /devices/virtual/block/dm-1
| [ 0:01] ## UDEV:	N: dm-1
| [ 0:01] ## UDEV:	E: DEVNAME=/dev/dm-1
| [ 0:01] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-1
| [ 0:01] ## UDEV:	E: DEVTYPE=disk
| [ 0:01] ## UDEV:	E: MAJOR=253
| [ 0:01] ## UDEV:	E: MINOR=1
| [ 0:01] ## UDEV:	E: SUBSYSTEM=block
| [ 0:01] ## UDEV:	
| [ 0:01] ## UDEV:	P: /devices/virtual/block/dm-2
| [ 0:01] ## UDEV:	N: dm-2
| [ 0:01] ## UDEV:	E: DEVNAME=/dev/dm-2
| [ 0:01] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-2
| [ 0:01] ## UDEV:	E: DEVTYPE=disk
| [ 0:01] ## UDEV:	E: MAJOR=253
| [ 0:01] ## UDEV:	E: MINOR=2
| [ 0:01] ## UDEV:	E: SUBSYSTEM=block
| [ 0:01] ## UDEV:	
| [ 0:01] ## UDEV:	P: /devices/virtual/block/dm-3
| [ 0:01] ## UDEV:	N: dm-3
| [ 0:01] ## UDEV:	E: DEVNAME=/dev/dm-3
| [ 0:01] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-3
| [ 0:01] ## UDEV:	E: DEVTYPE=disk
| [ 0:01] ## UDEV:	E: MAJOR=253
| [ 0:01] ## UDEV:	E: MINOR=3
| [ 0:01] ## UDEV:	E: SUBSYSTEM=block
| [ 0:01] ## UDEV:	
| [ 0:01] ## UDEV:	P: /devices/virtual/block/dm-4
| [ 0:01] ## UDEV:	N: dm-4
| [ 0:01] ## UDEV:	E: DEVNAME=/dev/dm-4
| [ 0:01] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-4
| [ 0:01] ## UDEV:	E: DEVTYPE=disk
| [ 0:01] ## UDEV:	E: MAJOR=253
| [ 0:01] ## UDEV:	E: MINOR=4
| [ 0:01] ## UDEV:	E: SUBSYSTEM=block
| [ 0:01] ## UDEV:	
| [ 0:01] ## UDEV:	P: /devices/virtual/block/dm-5
| [ 0:01] ## UDEV:	N: dm-5
| [ 0:01] ## UDEV:	E: DEVNAME=/dev/dm-5
| [ 0:01] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-5
| [ 0:01] ## UDEV:	E: DEVTYPE=disk
| [ 0:01] ## UDEV:	E: MAJOR=253
| [ 0:01] ## UDEV:	E: MINOR=5
| [ 0:01] ## UDEV:	E: SUBSYSTEM=block
| [ 0:01] ## UDEV:	
| [ 0:01] ## UDEV:	P: /devices/virtual/block/loop0
| [ 0:01] ## UDEV:	N: loop0
| [ 0:01] ## UDEV:	E: DEVNAME=/dev/loop0
| [ 0:01] ## UDEV:	E: DEVPATH=/devices/virtual/block/loop0
| [ 0:01] ## UDEV:	E: DEVTYPE=disk
| [ 0:01] ## UDEV:	E: MAJOR=7
| [ 0:01] ## UDEV:	E: MINOR=0
| [ 0:01] ## UDEV:	E: SUBSYSTEM=block
| [ 0:01] ## UDEV:	
| [ 0:01] <======== Script file "mda-rollback.sh" ========>
| [ 0:01] ## Line: 1 	 #!/usr/bin/env bash
| [ 0:01] ## Line: 2 	 
| [ 0:01] ## Line: 3 	 # Copyright (C) 2013 Red Hat, Inc. All rights reserved.
| [ 0:01] ## Line: 4 	 #
| [ 0:01] ## Line: 5 	 # This copyrighted material is made available to anyone wishing to use,
| [ 0:01] ## Line: 6 	 # modify, copy, or redistribute it subject to the terms and conditions
| [ 0:01] ## Line: 7 	 # of the GNU General Public License v.2.
| [ 0:01] ## Line: 8 	 #
| [ 0:01] ## Line: 9 	 # You should have received a copy of the GNU General Public License
| [ 0:01] ## Line: 10 	 # along with this program; if not, write to the Free Software Foundation,
| [ 0:01] ## Line: 11 	 # Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA
| [ 0:01] ## Line: 12 	 
| [ 0:01] ## Line: 13 	 SKIP_WITH_LVMLOCKD=1
| [ 0:01] ## Line: 14 	 SKIP_WITH_LVMPOLLD=1
| [ 0:01] ## Line: 15 	 
| [ 0:01] ## Line: 16 	 . lib/inittest
| [ 0:01] ## Line: 17 	 
| [ 0:01] ## Line: 18 	 aux prepare_devs 3
| [ 0:01] ## Line: 19 	 
| [ 0:01] ## Line: 20 	 vgcreate --metadatasize 128k $vg1 "$dev1" "$dev2" "$dev3"
| [ 0:01] ## Line: 21 	 
| [ 0:01] ## Line: 22 	 vgreduce $vg1 "$dev1"
| [ 0:01] ## Line: 23 	 dd if="$dev1" of=badmda bs=256K count=1
| [ 0:01] ## Line: 24 	 vgextend $vg1 "$dev1"
| [ 0:01] ## Line: 25 	 
| [ 0:01] ## Line: 26 	 dd if=badmda of="$dev1" bs=256K count=1
| [ 0:01] ## Line: 27 	 
| [ 0:01] ## Line: 28 	 # dev1 is part of vg1 (as witnessed by metadata on dev2 and dev3), but its mda
| [ 0:01] ## Line: 29 	 # was corrupt (written over by a backup from time dev1 was an orphan)
| [ 0:01] ## Line: 30 	 check pv_field "$dev1" vg_name $vg1
| [ 0:01] aux teardown
| [ 0:01] #mda-rollback.sh:1+ aux teardown
| [ 0:01] ## teardown.........ok
###       failed: [ndev-vanilla] shell/mda-rollback.sh

| [ 0:00] Library version:   1.02.146 (2017-12-18)
| [ 0:00] Driver version:    4.35.0
| [ 0:00] Kernel is Linux localhost.localdomain 3.10.0-693.11.1.el7.x86_64 #1 SMP Mon Dec 4 23:52:40 UTC 2017 x86_64 GNU/Linux
| [ 0:00] Selinux mode is not installed.
| [ 0:00]               total        used        free      shared  buff/cache   available
| [ 0:00] Mem:           7822        1079        4146          10        2596        6436
| [ 0:00] Swap:          4095           0        4095
| [ 0:00] Filesystem      Size  Used Avail Use% Mounted on
| [ 0:00] /dev/sdc1        18G  8.4G  8.4G  50% /
| [ 0:00] /dev/sdd1        51G  6.1G   43G  13% /lfskernel
| [ 0:00] devtmpfs        3.9G     0  3.9G   0% /dev
| [ 0:00] tmpfs           3.9G     0  3.9G   0% /run
| [ 0:00] @TESTDIR=/tmp/LVMTEST9679.U3bU6wL5EI
| [ 0:00] @PREFIX=LVMTEST9679
| [ 0:00] ## LVMCONF: activation {
| [ 0:00] ## LVMCONF:     checks = 1
| [ 0:00] ## LVMCONF:     monitoring = 0
| [ 0:00] ## LVMCONF:     polling_interval = 1
| [ 0:00] ## LVMCONF:     raid_region_size = 512
| [ 0:00] ## LVMCONF:     retry_deactivation = 1
| [ 0:00] ## LVMCONF:     snapshot_autoextend_percent = 50
| [ 0:00] ## LVMCONF:     snapshot_autoextend_threshold = 50
| [ 0:00] ## LVMCONF:     udev_rules = 1
| [ 0:00] ## LVMCONF:     udev_sync = 1
| [ 0:00] ## LVMCONF:     verify_udev_operations = 1
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: allocation {
| [ 0:00] ## LVMCONF:     wipe_signatures_when_zeroing_new_lvs = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: backup {
| [ 0:00] ## LVMCONF:     archive = 0
| [ 0:00] ## LVMCONF:     backup = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: devices {
| [ 0:00] ## LVMCONF:     cache_dir = "@TESTDIR@/etc"
| [ 0:00] ## LVMCONF:     default_data_alignment = 1
| [ 0:00] ## LVMCONF:     dir = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     filter = "a|.*|"
| [ 0:00] ## LVMCONF:     global_filter = [ "a|@TESTDIR@/dev/mapper/@PREFIX@.*pv[0-9_]*$|", "r|.*|" ]
| [ 0:00] ## LVMCONF:     md_component_detection  = 0
| [ 0:00] ## LVMCONF:     scan = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     sysfs_scan = 1
| [ 0:00] ## LVMCONF:     write_cache_state = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: dmeventd {
| [ 0:00] ## LVMCONF:     executable = "/sources/boot/LVM2.2.02.177/test/lib/dmeventd"
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: global {
| [ 0:00] ## LVMCONF:     abort_on_internal_errors = 1
| [ 0:00] ## LVMCONF:     cache_check_executable = "/usr/sbin/cache_check"
| [ 0:00] ## LVMCONF:     cache_dump_executable = "/usr/sbin/cache_dump"
| [ 0:00] ## LVMCONF:     cache_repair_executable = "/usr/sbin/cache_repair"
| [ 0:00] ## LVMCONF:     detect_internal_vg_cache_corruption = 1
| [ 0:00] ## LVMCONF:     fallback_to_local_locking = 0
| [ 0:00] ## LVMCONF:     fsadm_executable = "/sources/boot/LVM2.2.02.177/test/lib/fsadm"
| [ 0:00] ## LVMCONF:     library_dir = "@TESTDIR@/lib"
| [ 0:00] ## LVMCONF:     locking_dir = "@TESTDIR@/var/lock/lvm"
| [ 0:00] ## LVMCONF:     locking_type=1
| [ 0:00] ## LVMCONF:     notify_dbus = 0
| [ 0:00] ## LVMCONF:     si_unit_consistency = 1
| [ 0:00] ## LVMCONF:     thin_check_executable = "/usr/sbin/thin_check"
| [ 0:00] ## LVMCONF:     thin_dump_executable = "/usr/sbin/thin_dump"
| [ 0:00] ## LVMCONF:     thin_repair_executable = "/usr/sbin/thin_repair"
| [ 0:00] ## LVMCONF:     use_lvmetad = 0
| [ 0:00] ## LVMCONF:     use_lvmlockd = 0
| [ 0:00] ## LVMCONF:     use_lvmpolld = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: log {
| [ 0:00] ## LVMCONF:     activation = 1
| [ 0:00] ## LVMCONF:     file = "@TESTDIR@/debug.log"
| [ 0:00] ## LVMCONF:     indent = 1
| [ 0:00] ## LVMCONF:     level = 9
| [ 0:00] ## LVMCONF:     overwrite = 1
| [ 0:00] ## LVMCONF:     syslog = 0
| [ 0:00] ## LVMCONF:     verbose = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] <======== Processing test: "mdata-strings.sh" ========>
| [ 0:00] 
| [ 0:00] # For udev impossible to create
| [ 0:00] test "$LVM_TEST_DEVDIR" = "/dev" && skip
| [ 0:00] #mdata-strings.sh:21+ test '' = /dev
| [ 0:00] 
| [ 0:00] aux prepare_devs 2
| [ 0:00] #mdata-strings.sh:23+ aux prepare_devs 2
| [ 0:00] ## preparing loop device....ok (/dev/loop0)
| [ 0:00] ## preparing 2 devices...lib/utils: line 212: DM_UDEV_COOKIE: unbound variable
| [ 0:00] set +vx; STACKTRACE; set -vx
| [ 0:00] ##mdata-strings.sh:23+ set +vx
| [ 0:00] ## - /lfskernel/sources/boot/LVM2.2.02.177/test/shell/mdata-strings.sh:23
| [ 0:00] ## 1 STACKTRACE() called from /lfskernel/sources/boot/LVM2.2.02.177/test/shell/mdata-strings.sh:23
| [ 0:00] <======== Info ========>
| [ 0:00] ## DMINFO:   Name             Maj Min Stat Open Targ Event  UUID                                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv2   253   4 L--w    0    1      0 TEST-@PREFIX@pv2                                                 
| [ 0:00] ## DMINFO:   @PREFIX@pv1   253   3 L--w    0    1      0 TEST-@PREFIX@pv1                                                 
| [ 0:00] <======== Active table ========>
| [ 0:00] ## DMTABLE:  @PREFIX@pv2: 0 69632 linear 7:0 71680
| [ 0:00] ## DMTABLE:  @PREFIX@pv1: 0 69632 linear 7:0 2048
| [ 0:00] <======== Inactive table ========>
| [ 0:00] ## DMITABLE: @PREFIX@pv2: 
| [ 0:00] ## DMITABLE: @PREFIX@pv1: 
| [ 0:00] <======== Status ========>
| [ 0:00] ## DMSTATUS: @PREFIX@pv2: 0 69632 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv1: 0 69632 linear 
| [ 0:00] <======== Tree ========>
| [ 0:00] ## DMTREE:   @PREFIX@pv2 (253:4)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   @PREFIX@pv1 (253:3)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   LFS_vg-lfs (253:2)
| [ 0:00] ## DMTREE:    `- (8:16)
| [ 0:00] ## DMTREE:   centos-swap (253:1)
| [ 0:00] ## DMTREE:    `- (8:2)
| [ 0:00] ## DMTREE:   centos-root (253:0)
| [ 0:00] ## DMTREE:    `- (8:2)
| [ 0:00] <======== Recursive list of @TESTDIR@/dev ========>
| [ 0:00] ## LSLR:	@TESTDIR@/dev:
| [ 0:00] ## LSLR:	total 4
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 0 Feb 21 02:27 loop0
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 1 Feb 21 02:27 loop1
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 2 Feb 21 02:27 loop2
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 3 Feb 21 02:27 loop3
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 4 Feb 21 02:27 loop4
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 5 Feb 21 02:27 loop5
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 6 Feb 21 02:27 loop6
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 7 Feb 21 02:27 loop7
| [ 0:00] ## LSLR:	drwxr-xr-x 2 root root 4096 Feb 21 02:27 mapper
| [ 0:00] ## LSLR:	crw-r--r-- 1 root root 1, 3 Feb 21 02:27 testnull
| [ 0:00] ## LSLR:	
| [ 0:00] ## LSLR:	@TESTDIR@/dev/mapper:
| [ 0:00] ## LSLR:	total 0
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   3 Feb 21 02:27 @PREFIX@pv1
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   4 Feb 21 02:27 @PREFIX@pv2
| [ 0:00] ## LSLR:	crw------- 1 root root  10, 236 Feb 21 02:27 control
| [ 0:00] <======== Udev DB content ========>
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-0
| [ 0:00] ## UDEV:	N: dm-0
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-0
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-0
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=0
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-1
| [ 0:00] ## UDEV:	N: dm-1
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-1
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-1
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=1
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-2
| [ 0:00] ## UDEV:	N: dm-2
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-2
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-2
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=2
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-3
| [ 0:00] ## UDEV:	N: dm-3
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-3
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-3
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=3
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-4
| [ 0:00] ## UDEV:	N: dm-4
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-4
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-4
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=4
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/loop0
| [ 0:00] ## UDEV:	N: loop0
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/loop0
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/loop0
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=7
| [ 0:00] ## UDEV:	E: MINOR=0
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] <======== Script file "mdata-strings.sh" ========>
| [ 0:00] ## Line: 1 	 #!/usr/bin/env bash
| [ 0:00] ## Line: 2 	 
| [ 0:00] ## Line: 3 	 # Copyright (C) 2008-2013 Red Hat, Inc. All rights reserved.
| [ 0:00] ## Line: 4 	 #
| [ 0:00] ## Line: 5 	 # This copyrighted material is made available to anyone wishing to use,
| [ 0:00] ## Line: 6 	 # modify, copy, or redistribute it subject to the terms and conditions
| [ 0:00] ## Line: 7 	 # of the GNU General Public License v.2.
| [ 0:00] ## Line: 8 	 #
| [ 0:00] ## Line: 9 	 # You should have received a copy of the GNU General Public License
| [ 0:00] ## Line: 10 	 # along with this program; if not, write to the Free Software Foundation,
| [ 0:00] ## Line: 11 	 # Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA
| [ 0:00] ## Line: 12 	 
| [ 0:00] ## Line: 13 	 # 'Test for proper escaping of strings in metadata (bz431474)'
| [ 0:00] ## Line: 14 	 
| [ 0:00] ## Line: 15 	 SKIP_WITH_LVMLOCKD=1
| [ 0:00] ## Line: 16 	 SKIP_WITH_LVMPOLLD=1
| [ 0:00] ## Line: 17 	 
| [ 0:00] ## Line: 18 	 . lib/inittest
| [ 0:00] ## Line: 19 	 
| [ 0:00] ## Line: 20 	 # For udev impossible to create
| [ 0:00] ## Line: 21 	 test "$LVM_TEST_DEVDIR" = "/dev" && skip
| [ 0:00] ## Line: 22 	 
| [ 0:00] ## Line: 23 	 aux prepare_devs 2
| [ 0:00] ## Line: 24 	 aux extend_filter_LVMTEST
| [ 0:00] ## Line: 25 	 
| [ 0:00] ## Line: 26 	 # Setup mangling to 'none' globaly for all libdm users
| [ 0:00] ## Line: 27 	 export DM_DEFAULT_NAME_MANGLING_MODE=none
| [ 0:00] ## Line: 28 	 
| [ 0:00] ## Line: 29 	 pv_ugly="__\"!@#\$%^&*,()|@||'\\\"__pv1"
| [ 0:00] ## Line: 30 	 
| [ 0:00] ## Line: 31 	 # 'set up temp files, loopback devices'
| [ 0:00] ## Line: 32 	 name=$(basename "$dev1")
| [ 0:00] ## Line: 33 	 dmsetup rename "$name" "$PREFIX$pv_ugly"
| [ 0:00] ## Line: 34 	 dev1=$(dirname "$dev1")/"$PREFIX$pv_ugly"
| [ 0:00] ## Line: 35 	 
| [ 0:00] ## Line: 36 	 dm_table | grep -F "$pv_ugly"
| [ 0:00] ## Line: 37 	 
| [ 0:00] ## Line: 38 	 # 'pvcreate, vgcreate on filename with backslashed chars'
| [ 0:00] ## Line: 39 	 created="$dev1"
| [ 0:00] ## Line: 40 	 # when used with real udev without fallback, it will fail here
| [ 0:00] ## Line: 41 	 pvcreate "$dev1" || created="$dev2"
| [ 0:00] ## Line: 42 	 pvdisplay 2>&1 | tee err
| [ 0:00] ## Line: 43 	 should grep -F "$pv_ugly" err
| [ 0:00] ## Line: 44 	 should check pv_field "$dev1" pv_name "$dev1"
| [ 0:00] ## Line: 45 	 vgcreate $vg "$created"
| [ 0:00] ## Line: 46 	 # 'no parse errors and VG really exists'
| [ 0:00] ## Line: 47 	 vgs $vg 2>err
| [ 0:00] ## Line: 48 	 not grep "Parse error" err
| [ 0:00] ## Line: 49 	 
| [ 0:00] ## Line: 50 	 dmsetup remove "${PREFIX}${pv_ugly}"
| [ 0:00] aux teardown
| [ 0:00] #mdata-strings.sh:1+ aux teardown
| [ 0:00] ## teardown.........ok
###       failed: [ndev-vanilla] shell/mdata-strings.sh

| [ 0:00] Library version:   1.02.146 (2017-12-18)
| [ 0:00] Driver version:    4.35.0
| [ 0:00] Kernel is Linux localhost.localdomain 3.10.0-693.11.1.el7.x86_64 #1 SMP Mon Dec 4 23:52:40 UTC 2017 x86_64 GNU/Linux
| [ 0:00] Selinux mode is not installed.
| [ 0:00]               total        used        free      shared  buff/cache   available
| [ 0:00] Mem:           7822        1079        4146          10        2596        6436
| [ 0:00] Swap:          4095           0        4095
| [ 0:00] Filesystem      Size  Used Avail Use% Mounted on
| [ 0:00] /dev/sdc1        18G  8.4G  8.4G  50% /
| [ 0:00] /dev/sdd1        51G  6.1G   43G  13% /lfskernel
| [ 0:00] devtmpfs        3.9G     0  3.9G   0% /dev
| [ 0:00] tmpfs           3.9G     0  3.9G   0% /run
| [ 0:00] @TESTDIR=/tmp/LVMTEST9848.mu68nxIfrz
| [ 0:00] @PREFIX=LVMTEST9848
| [ 0:00] ## LVMCONF: activation {
| [ 0:00] ## LVMCONF:     checks = 1
| [ 0:00] ## LVMCONF:     monitoring = 0
| [ 0:00] ## LVMCONF:     polling_interval = 1
| [ 0:00] ## LVMCONF:     raid_region_size = 512
| [ 0:00] ## LVMCONF:     retry_deactivation = 1
| [ 0:00] ## LVMCONF:     snapshot_autoextend_percent = 50
| [ 0:00] ## LVMCONF:     snapshot_autoextend_threshold = 50
| [ 0:00] ## LVMCONF:     udev_rules = 1
| [ 0:00] ## LVMCONF:     udev_sync = 1
| [ 0:00] ## LVMCONF:     verify_udev_operations = 1
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: allocation {
| [ 0:00] ## LVMCONF:     wipe_signatures_when_zeroing_new_lvs = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: backup {
| [ 0:00] ## LVMCONF:     archive = 0
| [ 0:00] ## LVMCONF:     backup = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: devices {
| [ 0:00] ## LVMCONF:     cache_dir = "@TESTDIR@/etc"
| [ 0:00] ## LVMCONF:     default_data_alignment = 1
| [ 0:00] ## LVMCONF:     dir = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     filter = "a|.*|"
| [ 0:00] ## LVMCONF:     global_filter = [ "a|@TESTDIR@/dev/mapper/@PREFIX@.*pv[0-9_]*$|", "r|.*|" ]
| [ 0:00] ## LVMCONF:     md_component_detection  = 0
| [ 0:00] ## LVMCONF:     scan = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     sysfs_scan = 1
| [ 0:00] ## LVMCONF:     write_cache_state = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: dmeventd {
| [ 0:00] ## LVMCONF:     executable = "/sources/boot/LVM2.2.02.177/test/lib/dmeventd"
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: global {
| [ 0:00] ## LVMCONF:     abort_on_internal_errors = 1
| [ 0:00] ## LVMCONF:     cache_check_executable = "/usr/sbin/cache_check"
| [ 0:00] ## LVMCONF:     cache_dump_executable = "/usr/sbin/cache_dump"
| [ 0:00] ## LVMCONF:     cache_repair_executable = "/usr/sbin/cache_repair"
| [ 0:00] ## LVMCONF:     detect_internal_vg_cache_corruption = 1
| [ 0:00] ## LVMCONF:     fallback_to_local_locking = 0
| [ 0:00] ## LVMCONF:     fsadm_executable = "/sources/boot/LVM2.2.02.177/test/lib/fsadm"
| [ 0:00] ## LVMCONF:     library_dir = "@TESTDIR@/lib"
| [ 0:00] ## LVMCONF:     locking_dir = "@TESTDIR@/var/lock/lvm"
| [ 0:00] ## LVMCONF:     locking_type=1
| [ 0:00] ## LVMCONF:     notify_dbus = 0
| [ 0:00] ## LVMCONF:     si_unit_consistency = 1
| [ 0:00] ## LVMCONF:     thin_check_executable = "/usr/sbin/thin_check"
| [ 0:00] ## LVMCONF:     thin_dump_executable = "/usr/sbin/thin_dump"
| [ 0:00] ## LVMCONF:     thin_repair_executable = "/usr/sbin/thin_repair"
| [ 0:00] ## LVMCONF:     use_lvmetad = 0
| [ 0:00] ## LVMCONF:     use_lvmlockd = 0
| [ 0:00] ## LVMCONF:     use_lvmpolld = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: log {
| [ 0:00] ## LVMCONF:     activation = 1
| [ 0:00] ## LVMCONF:     file = "@TESTDIR@/debug.log"
| [ 0:00] ## LVMCONF:     indent = 1
| [ 0:00] ## LVMCONF:     level = 9
| [ 0:00] ## LVMCONF:     overwrite = 1
| [ 0:00] ## LVMCONF:     syslog = 0
| [ 0:00] ## LVMCONF:     verbose = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] <======== Processing test: "metadata-balance.sh" ========>
| [ 0:00] 
| [ 0:00] aux prepare_devs 6
| [ 0:00] #metadata-balance.sh:18+ aux prepare_devs 6
| [ 0:00] ## preparing loop device....ok (/dev/loop0)
| [ 0:00] ## preparing 6 devices...lib/utils: line 212: DM_UDEV_COOKIE: unbound variable
| [ 0:00] set +vx; STACKTRACE; set -vx
| [ 0:00] ##metadata-balance.sh:18+ set +vx
| [ 0:00] ## - /lfskernel/sources/boot/LVM2.2.02.177/test/shell/metadata-balance.sh:18
| [ 0:00] ## 1 STACKTRACE() called from /lfskernel/sources/boot/LVM2.2.02.177/test/shell/metadata-balance.sh:18
| [ 0:00] <======== Info ========>
| [ 0:00] ## DMINFO:   Name             Maj Min Stat Open Targ Event  UUID                                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv6   253   4 L--w    0    1      0 TEST-@PREFIX@pv6                                                 
| [ 0:00] ## DMINFO:   @PREFIX@pv5   253   3 L--w    0    1      0 TEST-@PREFIX@pv5                                                 
| [ 0:00] ## DMINFO:   @PREFIX@pv4   253   7 L--w    0    1      0 TEST-@PREFIX@pv4                                                 
| [ 0:00] ## DMINFO:   @PREFIX@pv3   253   5 L--w    0    1      0 TEST-@PREFIX@pv3                                                 
| [ 0:00] ## DMINFO:   @PREFIX@pv2   253   8 L--w    0    1      0 TEST-@PREFIX@pv2                                                 
| [ 0:00] ## DMINFO:   @PREFIX@pv1   253   6 L--w    0    1      0 TEST-@PREFIX@pv1                                                 
| [ 0:00] <======== Active table ========>
| [ 0:00] ## DMTABLE:  @PREFIX@pv6: 0 69632 linear 7:0 350208
| [ 0:00] ## DMTABLE:  @PREFIX@pv5: 0 69632 linear 7:0 280576
| [ 0:00] ## DMTABLE:  @PREFIX@pv4: 0 69632 linear 7:0 210944
| [ 0:00] ## DMTABLE:  @PREFIX@pv3: 0 69632 linear 7:0 141312
| [ 0:00] ## DMTABLE:  @PREFIX@pv2: 0 69632 linear 7:0 71680
| [ 0:00] ## DMTABLE:  @PREFIX@pv1: 0 69632 linear 7:0 2048
| [ 0:00] <======== Inactive table ========>
| [ 0:00] ## DMITABLE: @PREFIX@pv6: 
| [ 0:00] ## DMITABLE: @PREFIX@pv5: 
| [ 0:00] ## DMITABLE: @PREFIX@pv4: 
| [ 0:00] ## DMITABLE: @PREFIX@pv3: 
| [ 0:00] ## DMITABLE: @PREFIX@pv2: 
| [ 0:00] ## DMITABLE: @PREFIX@pv1: 
| [ 0:00] <======== Status ========>
| [ 0:00] ## DMSTATUS: @PREFIX@pv6: 0 69632 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv5: 0 69632 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv4: 0 69632 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv3: 0 69632 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv2: 0 69632 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv1: 0 69632 linear 
| [ 0:00] <======== Tree ========>
| [ 0:00] ## DMTREE:   @PREFIX@pv6 (253:4)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   @PREFIX@pv5 (253:3)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   @PREFIX@pv4 (253:7)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   @PREFIX@pv3 (253:5)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   @PREFIX@pv2 (253:8)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   @PREFIX@pv1 (253:6)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   LFS_vg-lfs (253:2)
| [ 0:00] ## DMTREE:    `- (8:16)
| [ 0:00] ## DMTREE:   centos-swap (253:1)
| [ 0:00] ## DMTREE:    `- (8:2)
| [ 0:00] ## DMTREE:   centos-root (253:0)
| [ 0:00] ## DMTREE:    `- (8:2)
| [ 0:00] <======== Recursive list of @TESTDIR@/dev ========>
| [ 0:00] ## LSLR:	@TESTDIR@/dev:
| [ 0:00] ## LSLR:	total 4
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 0 Feb 21 02:27 loop0
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 1 Feb 21 02:27 loop1
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 2 Feb 21 02:27 loop2
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 3 Feb 21 02:27 loop3
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 4 Feb 21 02:27 loop4
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 5 Feb 21 02:27 loop5
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 6 Feb 21 02:27 loop6
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 7 Feb 21 02:27 loop7
| [ 0:00] ## LSLR:	drwxr-xr-x 2 root root 4096 Feb 21 02:27 mapper
| [ 0:00] ## LSLR:	crw-r--r-- 1 root root 1, 3 Feb 21 02:27 testnull
| [ 0:00] ## LSLR:	
| [ 0:00] ## LSLR:	@TESTDIR@/dev/mapper:
| [ 0:00] ## LSLR:	total 0
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   6 Feb 21 02:27 @PREFIX@pv1
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   8 Feb 21 02:27 @PREFIX@pv2
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   5 Feb 21 02:27 @PREFIX@pv3
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   7 Feb 21 02:27 @PREFIX@pv4
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   3 Feb 21 02:27 @PREFIX@pv5
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   4 Feb 21 02:27 @PREFIX@pv6
| [ 0:00] ## LSLR:	crw------- 1 root root  10, 236 Feb 21 02:27 control
| [ 0:00] <======== Udev DB content ========>
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-0
| [ 0:00] ## UDEV:	N: dm-0
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-0
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-0
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=0
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-1
| [ 0:00] ## UDEV:	N: dm-1
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-1
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-1
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=1
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-2
| [ 0:00] ## UDEV:	N: dm-2
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-2
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-2
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=2
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-3
| [ 0:00] ## UDEV:	N: dm-3
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-3
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-3
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=3
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-4
| [ 0:00] ## UDEV:	N: dm-4
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-4
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-4
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=4
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-5
| [ 0:00] ## UDEV:	N: dm-5
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-5
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-5
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=5
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-6
| [ 0:00] ## UDEV:	N: dm-6
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-6
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-6
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=6
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-7
| [ 0:00] ## UDEV:	N: dm-7
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-7
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-7
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=7
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-8
| [ 0:00] ## UDEV:	N: dm-8
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-8
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-8
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=8
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/loop0
| [ 0:00] ## UDEV:	N: loop0
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/loop0
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/loop0
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=7
| [ 0:00] ## UDEV:	E: MINOR=0
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] <======== Script file "metadata-balance.sh" ========>
| [ 0:00] ## Line: 1 	 #!/usr/bin/env bash
| [ 0:00] ## Line: 2 	 
| [ 0:00] ## Line: 3 	 # Copyright (C) 2008 Red Hat, Inc. All rights reserved.
| [ 0:00] ## Line: 4 	 #
| [ 0:00] ## Line: 5 	 # This copyrighted material is made available to anyone wishing to use,
| [ 0:00] ## Line: 6 	 # modify, copy, or redistribute it subject to the terms and conditions
| [ 0:00] ## Line: 7 	 # of the GNU General Public License v.2.
| [ 0:00] ## Line: 8 	 #
| [ 0:00] ## Line: 9 	 # You should have received a copy of the GNU General Public License
| [ 0:00] ## Line: 10 	 # along with this program; if not, write to the Free Software Foundation,
| [ 0:00] ## Line: 11 	 # Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA
| [ 0:00] ## Line: 12 	 
| [ 0:00] ## Line: 13 	 SKIP_WITH_LVMLOCKD=1
| [ 0:00] ## Line: 14 	 SKIP_WITH_LVMPOLLD=1
| [ 0:00] ## Line: 15 	 
| [ 0:00] ## Line: 16 	 . lib/inittest
| [ 0:00] ## Line: 17 	 
| [ 0:00] ## Line: 18 	 aux prepare_devs 6
| [ 0:00] ## Line: 19 	 
| [ 0:00] ## Line: 20 	 echo Make sure we can ignore / un-ignore mdas on a per-PV basis
| [ 0:00] ## Line: 21 	 for pv_in_vg in 1 0; do
| [ 0:00] ## Line: 22 	 for mdacp in 1 2; do
| [ 0:00] ## Line: 23 	 	pvcreate --metadatacopies $mdacp "$dev1" "$dev2"
| [ 0:00] ## Line: 24 	         pvcreate --metadatacopies 0 "$dev3"
| [ 0:00] ## Line: 25 	 	if [ $pv_in_vg = 1 ]; then
| [ 0:00] ## Line: 26 	 		vgcreate $vg "$dev1" "$dev2" "$dev3"
| [ 0:00] ## Line: 27 	 	fi
| [ 0:00] ## Line: 28 	 	pvchange --metadataignore y "$dev1"
| [ 0:00] ## Line: 29 	 	check pv_field "$dev1" pv_mda_count $mdacp
| [ 0:00] ## Line: 30 	 	check pv_field "$dev1" pv_mda_used_count 0
| [ 0:00] ## Line: 31 	 	check pv_field "$dev2" pv_mda_count $mdacp
| [ 0:00] ## Line: 32 	 	check pv_field "$dev2" pv_mda_used_count $mdacp
| [ 0:00] ## Line: 33 	 	if [ $pv_in_vg = 1 ]; then
| [ 0:00] ## Line: 34 	 		check vg_field $vg vg_mda_count $(( mdacp * 2 ))
| [ 0:00] ## Line: 35 	 		check vg_field $vg vg_mda_used_count $mdacp
| [ 0:00] ## Line: 36 	 		check vg_field $vg vg_mda_copies unmanaged
| [ 0:00] ## Line: 37 	 	fi
| [ 0:00] ## Line: 38 	 	pvchange --metadataignore n "$dev1"
| [ 0:00] ## Line: 39 	 	check pv_field "$dev1" pv_mda_count $mdacp
| [ 0:00] ## Line: 40 	 	check pv_field "$dev1" pv_mda_used_count $mdacp
| [ 0:00] ## Line: 41 	 	if [ $pv_in_vg = 1 ]; then
| [ 0:00] ## Line: 42 	 		check vg_field $vg vg_mda_count $(( mdacp * 2 ))
| [ 0:00] ## Line: 43 	 		check vg_field $vg vg_mda_used_count $(( mdacp * 2 ))
| [ 0:00] ## Line: 44 	 		check vg_field $vg vg_mda_copies unmanaged
| [ 0:00] ## Line: 45 	 		vgremove -f $vg
| [ 0:00] ## Line: 46 	 	fi
| [ 0:00] ## Line: 47 	 done
| [ 0:00] ## Line: 48 	 done
| [ 0:00] ## Line: 49 	 
| [ 0:00] ## Line: 50 	 # Check if a PV has unignored (used) mdas, and if so, ignore
| [ 0:00] ## Line: 51 	 pvignore_ () {
| [ 0:00] ## Line: 52 	 	pv_mda_used_count=$(get pv_field "$1" pv_mda_used_count)
| [ 0:00] ## Line: 53 	 	if [ $pv_mda_used_count -ne 0 ]; then
| [ 0:00] ## Line: 54 	 	    pvchange --metadataignore y $1
| [ 0:00] ## Line: 55 	 	fi
| [ 0:00] ## Line: 56 	 }
| [ 0:00] ## Line: 57 	 
| [ 0:00] ## Line: 58 	 # Check if a PV has ignored mdas, and if so, unignore (make used)
| [ 0:00] ## Line: 59 	 pvunignore_ () {
| [ 0:00] ## Line: 60 	 	pv_mda_count=$(get pv_field "$1" pv_mda_count)
| [ 0:00] ## Line: 61 	 	pv_mda_used_count=$(get pv_field "$1" pv_mda_used_count)
| [ 0:00] ## Line: 62 	 	if [ $pv_mda_count -gt $pv_mda_used_count ]; then
| [ 0:00] ## Line: 63 	 	    pvchange --metadataignore n $1
| [ 0:00] ## Line: 64 	 	fi
| [ 0:00] ## Line: 65 	 }
| [ 0:00] ## Line: 66 	 
| [ 0:00] ## Line: 67 	 echo Test of vgmetadatacopies with vgcreate and vgchange
| [ 0:00] ## Line: 68 	 for mdacp in 1 2; do
| [ 0:00] ## Line: 69 	 	pvcreate --metadatacopies $mdacp "$dev1" "$dev2" "$dev4" "$dev5"
| [ 0:00] ## Line: 70 	 	check pv_field "$dev1" pv_mda_used_count $mdacp
| [ 0:00] ## Line: 71 	 	check pv_field "$dev2" pv_mda_used_count $mdacp
| [ 0:00] ## Line: 72 	 	check pv_field "$dev4" pv_mda_used_count $mdacp
| [ 0:00] ## Line: 73 	 	check pv_field "$dev5" pv_mda_used_count $mdacp
| [ 0:00] ## Line: 74 	 	pvcreate --metadatacopies 0 "$dev3"
| [ 0:00] ## Line: 75 	 	vgcreate $vg "$dev1" "$dev2" "$dev3"
| [ 0:00] ## Line: 76 	 	check vg_field $vg vg_mda_copies unmanaged
| [ 0:00] ## Line: 77 	 	echo ensure both --vgmetadatacopies and --metadatacopies accepted
| [ 0:00] ## Line: 78 	 	vgchange --metadatacopies $(( mdacp * 1 )) $vg
| [ 0:00] ## Line: 79 	 	echo --vgmetadatacopies is persistent on disk
| [ 0:00] ## Line: 80 	 	echo --vgmetadatacopies affects underlying pv mda ignore
| [ 0:00] ## Line: 81 	 	check vg_field $vg vg_mda_copies $(( mdacp * 1 ))
| [ 0:00] ## Line: 82 	 	check vg_field $vg vg_mda_used_count $(( mdacp * 1 ))
| [ 0:00] ## Line: 83 	 	vgchange --vgmetadatacopies $(( mdacp * 2 )) $vg
| [ 0:00] ## Line: 84 	 	check vg_field $vg vg_mda_copies $(( mdacp * 2 ))
| [ 0:00] ## Line: 85 	 	check vg_field $vg vg_mda_used_count $(( mdacp * 2 ))
| [ 0:00] ## Line: 86 	 	echo allow setting metadatacopies larger than number of PVs
| [ 0:00] ## Line: 87 	 	vgchange --vgmetadatacopies $(( mdacp * 5 )) $vg
| [ 0:00] ## Line: 88 	 	check vg_field $vg vg_mda_copies $(( mdacp * 5 ))
| [ 0:00] ## Line: 89 	 	check vg_field $vg vg_mda_used_count $(( mdacp * 2 ))
| [ 0:00] ## Line: 90 	 	echo setting to 0 disables automatic balancing
| [ 0:00] ## Line: 91 	 	vgchange --vgmetadatacopies unmanaged $vg
| [ 0:00] ## Line: 92 	 	check vg_field $vg vg_mda_copies unmanaged
| [ 0:00] ## Line: 93 	 	vgremove -f $vg
| [ 0:00] ## Line: 94 	 	echo vgcreate succeeds even when creating a VG w/all ignored mdas
| [ 0:00] ## Line: 95 	 	pvchange --metadataignore y "$dev1" "$dev2"
| [ 0:00] ## Line: 96 	 	check pv_field "$dev1" pv_mda_count $mdacp
| [ 0:00] ## Line: 97 	 	check pv_field "$dev2" pv_mda_used_count 0
| [ 0:00] ## Line: 98 	 	vgcreate $vg "$dev1" "$dev2"
| [ 0:00] ## Line: 99 	 	check vg_field $vg vg_mda_copies unmanaged
| [ 0:00] ## Line: 100 	 	vgremove -f $vg
| [ 0:00] ## Line: 101 	 	echo vgcreate succeeds with a specific number of metadata copies
| [ 0:00] ## Line: 102 	 	vgcreate --vgmetadatacopies $(( mdacp * 2 )) $vg "$dev1" "$dev2"
| [ 0:00] ## Line: 103 	 	check vg_field $vg vg_mda_copies $(( mdacp * 2 ))
| [ 0:00] ## Line: 104 	 	vgremove -f $vg
| [ 0:00] ## Line: 105 	 	vgcreate --vgmetadatacopies $(( mdacp * 1 )) $vg "$dev1" "$dev2"
| [ 0:00] ## Line: 106 	 	check vg_field $vg vg_mda_copies $(( mdacp * 1 ))
| [ 0:00] ## Line: 107 	 	vgremove -f $vg
| [ 0:00] ## Line: 108 	 	echo vgcreate succeeds with a larger value than total metadatacopies
| [ 0:00] ## Line: 109 	 	vgcreate --vgmetadatacopies $(( mdacp * 5 )) $vg "$dev1" "$dev2"
| [ 0:00] ## Line: 110 	 	check vg_field $vg vg_mda_copies $(( mdacp * 5 ))
| [ 0:00] ## Line: 111 	 	vgremove -f $vg
| [ 0:00] ## Line: 112 	 	echo vgcreate succeeds with --vgmetadatacopies unmanaged
| [ 0:00] ## Line: 113 	 	vgcreate --vgmetadatacopies unmanaged $vg "$dev1" "$dev2"
| [ 0:00] ## Line: 114 	 	check vg_field $vg vg_mda_copies unmanaged
| [ 0:00] ## Line: 115 	 	vgremove -f $vg
| [ 0:00] ## Line: 116 	 	pvunignore_ "$dev1"
| [ 0:00] ## Line: 117 	 	pvunignore_ "$dev2"
| [ 0:00] ## Line: 118 	 	pvunignore_ "$dev4"
| [ 0:00] ## Line: 119 	 	pvunignore_ "$dev5"
| [ 0:00] ## Line: 120 	 	echo vgcreate succeds with small value of --metadatacopies, ignores mdas
| [ 0:00] ## Line: 121 	 	vgcreate --vgmetadatacopies 1 $vg "$dev1" "$dev2" "$dev4" "$dev5"
| [ 0:00] ## Line: 122 	 	check vg_field $vg vg_mda_copies 1
| [ 0:00] ## Line: 123 	 	check vg_field $vg vg_mda_count $(( mdacp * 4 ))
| [ 0:00] ## Line: 124 	 	check vg_field $vg vg_mda_used_count 1
| [ 0:00] ## Line: 125 	 	echo Setting a larger value should trigger non-ignore of mdas
| [ 0:00] ## Line: 126 	 	vgchange --metadatacopies 3 $vg
| [ 0:00] ## Line: 127 	 	check vg_field $vg vg_mda_copies 3
| [ 0:00] ## Line: 128 	 	check vg_field $vg vg_mda_used_count 3
| [ 0:00] ## Line: 129 	 	echo Setting all should trigger unignore of all mdas
| [ 0:00] ## Line: 130 	 	vgchange --vgmetadatacopies all $vg
| [ 0:00] ## Line: 131 	 	check vg_field $vg vg_mda_count $(( mdacp * 4 ))
| [ 0:00] ## Line: 132 	 	check vg_field $vg vg_mda_copies unmanaged
| [ 0:00] ## Line: 133 	 	check vg_field $vg vg_mda_used_count $(( mdacp * 4 ))
| [ 0:00] ## Line: 134 	 	echo --vgmetadatacopies 0 should be unmanaged for vgchange and vgcreate
| [ 0:00] ## Line: 135 	 	vgchange --vgmetadatacopies 0 $vg
| [ 0:00] ## Line: 136 	 	check vg_field $vg vg_mda_copies unmanaged
| [ 0:00] ## Line: 137 	 	vgremove -f $vg
| [ 0:00] ## Line: 138 	 	vgcreate --vgmetadatacopies 0 $vg "$dev1" "$dev2" "$dev4" "$dev5"
| [ 0:00] ## Line: 139 	 	check vg_field $vg vg_mda_copies unmanaged
| [ 0:00] ## Line: 140 	 	vgremove -f $vg
| [ 0:00] ## Line: 141 	 done
| [ 0:00] ## Line: 142 	 
| [ 0:00] ## Line: 143 	 echo Test vgextend / vgreduce with vgmetadatacopies
| [ 0:00] ## Line: 144 	 for mdacp in 1 2; do
| [ 0:00] ## Line: 145 	 	pvcreate --metadatacopies $mdacp "$dev1" "$dev2" "$dev4" "$dev5"
| [ 0:00] ## Line: 146 	 	pvcreate --metadatacopies 0 "$dev3"
| [ 0:00] ## Line: 147 	 	echo Set a large value of vgmetadatacopies
| [ 0:00] ## Line: 148 	 	vgcreate --vgmetadatacopies $(( mdacp * 5 )) $vg "$dev1" "$dev2" "$dev3"
| [ 0:00] ## Line: 149 	 	check vg_field $vg vg_mda_copies $(( mdacp * 5 ))
| [ 0:00] ## Line: 150 	 	echo Ignore mdas on devices to be used for vgextend
| [ 0:00] ## Line: 151 	 	echo Large value of vgetadatacopies should automatically un-ignore mdas
| [ 0:00] ## Line: 152 	 	pvchange --metadataignore y "$dev4" "$dev5"
| [ 0:00] ## Line: 153 	 	check pv_field "$dev4" pv_mda_used_count 0
| [ 0:00] ## Line: 154 	 	vgextend $vg "$dev4" "$dev5"
| [ 0:00] ## Line: 155 	 	check pv_field "$dev4" pv_mda_used_count $mdacp
| [ 0:00] ## Line: 156 	 	check pv_field "$dev5" pv_mda_used_count $mdacp
| [ 0:00] ## Line: 157 	 	vgremove -f $vg
| [ 0:00] ## Line: 158 	 	echo Set a small value of vgmetadatacopies
| [ 0:00] ## Line: 159 	 	vgcreate --vgmetadatacopies $(( mdacp * 1 )) $vg "$dev1" "$dev2" "$dev3"
| [ 0:00] ## Line: 160 	 	check vg_field $vg vg_mda_copies $(( mdacp * 1 ))
| [ 0:00] ## Line: 161 	 	echo Ignore mdas on devices to be used for vgextend
| [ 0:00] ## Line: 162 	 	echo Small value of vgetadatacopies should leave mdas as ignored
| [ 0:00] ## Line: 163 	 	pvchange --metadataignore y "$dev4" "$dev5"
| [ 0:00] ## Line: 164 	 	check pv_field "$dev4" pv_mda_used_count 0
| [ 0:00] ## Line: 165 	 	vgextend $vg "$dev4" "$dev5"
| [ 0:00] ## Line: 166 	 	check pv_field "$dev4" pv_mda_used_count 0
| [ 0:00] ## Line: 167 	 	check pv_field "$dev5" pv_mda_used_count 0
| [ 0:00] ## Line: 168 	 	echo vgreduce of ignored pv w/mda should not trigger any change to ignore bits
| [ 0:00] ## Line: 169 	 	vgreduce $vg "$dev4"
| [ 0:00] ## Line: 170 	 	check pv_field "$dev4" pv_mda_used_count 0
| [ 0:00] ## Line: 171 	 	check pv_field "$dev5" pv_mda_used_count 0
| [ 0:00] ## Line: 172 	 	echo vgreduce of un-ignored pv w/mda should trigger un-ignore on an mda
| [ 0:00] ## Line: 173 	 	vgreduce $vg "$dev1" "$dev2" "$dev3"
| [ 0:00] ## Line: 174 	 	check pv_field "$dev5" pv_mda_used_count $mdacp
| [ 0:00] ## Line: 175 	 	check vg_field $vg vg_mda_copies $(( mdacp * 1 ))
| [ 0:00] ## Line: 176 	 	pvunignore_ "$dev1"
| [ 0:00] ## Line: 177 	 	pvunignore_ "$dev2"
| [ 0:00] ## Line: 178 	 	echo setting vgmetadatacopies to unmanaged should allow vgextend to add w/out balancing
| [ 0:00] ## Line: 179 	 	vgchange --vgmetadatacopies unmanaged $vg
| [ 0:00] ## Line: 180 	 	vgextend $vg "$dev1" "$dev2"
| [ 0:00] ## Line: 181 	 	check vg_field $vg vg_mda_copies unmanaged
| [ 0:00] ## Line: 182 	 	check vg_field $vg vg_mda_count $(( mdacp * 3 ))
| [ 0:00] ## Line: 183 	 	check vg_field $vg vg_mda_used_count $(( mdacp * 3 ))
| [ 0:00] ## Line: 184 	 	check pv_field "$dev1" pv_mda_used_count $mdacp
| [ 0:00] ## Line: 185 	 	check pv_field "$dev2" pv_mda_used_count $mdacp
| [ 0:00] ## Line: 186 	 	vgremove -f $vg
| [ 0:00] ## Line: 187 	 done
| [ 0:00] ## Line: 188 	 
| [ 0:00] ## Line: 189 	 echo Test special situations, vgsplit, vgmerge, etc
| [ 0:00] ## Line: 190 	 for mdacp in 1 2; do
| [ 0:00] ## Line: 191 	 	pvcreate --metadatacopies $mdacp "$dev1" "$dev2" "$dev3" "$dev4" "$dev5"
| [ 0:00] ## Line: 192 	 	vgcreate --vgmetadatacopies 2 $vg1 "$dev1" "$dev2" "$dev3"
| [ 0:00] ## Line: 193 	 	vgcreate --vgmetadatacopies $(( mdacp * 1 )) $vg2 "$dev4" "$dev5"
| [ 0:00] ## Line: 194 	 	echo vgsplit/vgmerge preserves value of metadata copies
| [ 0:00] ## Line: 195 	 	check vg_field $vg1 vg_mda_copies 2
| [ 0:00] ## Line: 196 	 	check vg_field $vg2 vg_mda_copies $(( mdacp * 1 ))
| [ 0:00] ## Line: 197 	 	vgsplit $vg1 $vg2 "$dev1"
| [ 0:00] ## Line: 198 	 	check vg_field $vg2 vg_mda_copies $(( mdacp * 1 ))
| [ 0:00] ## Line: 199 	 	vgmerge $vg1 $vg2
| [ 0:00] ## Line: 200 	 	check vg_field $vg1 vg_mda_copies 2
| [ 0:00] ## Line: 201 	 	check vg_field $vg1 vg_mda_count $(( mdacp * 5 ))
| [ 0:00] ## Line: 202 	 	echo vgsplit into new vg sets proper value of vgmetadatacopies
| [ 0:00] ## Line: 203 	 	vgsplit --vgmetadatacopies $(( mdacp * 2 )) $vg1 $vg2 "$dev1" "$dev2"
| [ 0:00] ## Line: 204 	 	check vg_field $vg2 vg_mda_copies $(( mdacp * 2 ))
| [ 0:00] ## Line: 205 	 	echo vgchange fails if given both vgmetadatacopies and metadatacopies
| [ 0:00] ## Line: 206 	 	not vgchange --vgmetadatacopies 5 --metadatacopies 7 $vg2
| [ 0:00] ## Line: 207 	 	vgremove -f $vg1 $vg2
| [ 0:00] ## Line: 208 	 done
| [ 0:00] ## Line: 209 	 
| [ 0:00] ## Line: 210 	 echo Test combination of --vgmetadatacopies and pvchange --metadataignore
| [ 0:00] ## Line: 211 	 for mdacp in 1 2; do
| [ 0:00] ## Line: 212 	 	pvcreate --metadatacopies $mdacp "$dev1" "$dev2" "$dev3" "$dev4" "$dev5"
| [ 0:00] ## Line: 213 	 	vgcreate --vgmetadatacopies $(( mdacp * 1 )) $vg1 "$dev1" "$dev2"
| [ 0:00] ## Line: 214 	 	check vg_field $vg1 vg_mda_copies $(( mdacp * 1 ))
| [ 0:00] ## Line: 215 	 	check vg_field $vg1 vg_mda_used_count $(( mdacp * 1 ))
| [ 0:00] ## Line: 216 	 	pvignore_ "$dev3"
| [ 0:00] ## Line: 217 	 	echo Ensure vgextend of PVs with ignored MDAs does not add to vg_mda_used_count
| [ 0:00] ## Line: 218 	 	vgextend $vg1 "$dev3"
| [ 0:00] ## Line: 219 	 	check vg_field $vg1 vg_mda_used_count $(( mdacp * 1 ))
| [ 0:00] ## Line: 220 	 	echo Using pvchange to unignore should update vg_mda_used_count
| [ 0:00] ## Line: 221 	 	pvchange -f --metadataignore n "$dev3"
| [ 0:00] ## Line: 222 	 	check pv_field "$dev3" pv_mda_used_count $mdacp
| [ 0:00] ## Line: 223 	 	check vg_field $vg1 vg_mda_used_count $(( mdacp * 2 ))
| [ 0:00] ## Line: 224 	 	echo Set unmanaged on the vg should keep ignore bits the same during vgextend
| [ 0:00] ## Line: 225 	 	vgchange --vgmetadatacopies unmanaged $vg1
| [ 0:00] ## Line: 226 	 	check vg_field $vg1 vg_mda_used_count $(( mdacp * 2 ))
| [ 0:00] ## Line: 227 	 	pvunignore_ "$dev4"
| [ 0:00] ## Line: 228 	 	vgextend $vg1 "$dev4"
| [ 0:00] ## Line: 229 	 	check pv_field "$dev4" pv_mda_used_count $mdacp
| [ 0:00] ## Line: 230 	 	check vg_field $vg1 vg_mda_used_count $(( mdacp * 3 ))
| [ 0:00] ## Line: 231 	 	echo Using pvchange to ignore should update vg_mda_used_count
| [ 0:00] ## Line: 232 	 	pvchange -f --metadataignore y "$dev4"
| [ 0:00] ## Line: 233 	 	check pv_field "$dev4" pv_mda_used_count 0
| [ 0:00] ## Line: 234 	 	check vg_field $vg1 vg_mda_used_count $(( mdacp * 2 ))
| [ 0:00] ## Line: 235 	 	vgremove -f $vg1
| [ 0:00] ## Line: 236 	 done
| [ 0:00] aux teardown
| [ 0:00] #metadata-balance.sh:1+ aux teardown
| [ 0:00] ## teardown.........ok
###       failed: [ndev-vanilla] shell/metadata-balance.sh

| [ 0:00] Library version:   1.02.146 (2017-12-18)
| [ 0:00] Driver version:    4.35.0
| [ 0:00] Kernel is Linux localhost.localdomain 3.10.0-693.11.1.el7.x86_64 #1 SMP Mon Dec 4 23:52:40 UTC 2017 x86_64 GNU/Linux
| [ 0:00] Selinux mode is not installed.
| [ 0:00]               total        used        free      shared  buff/cache   available
| [ 0:00] Mem:           7822        1079        4146          10        2596        6436
| [ 0:00] Swap:          4095           0        4095
| [ 0:00] Filesystem      Size  Used Avail Use% Mounted on
| [ 0:00] /dev/sdc1        18G  8.4G  8.4G  50% /
| [ 0:00] /dev/sdd1        51G  6.1G   43G  13% /lfskernel
| [ 0:00] devtmpfs        3.9G     0  3.9G   0% /dev
| [ 0:00] tmpfs           3.9G     0  3.9G   0% /run
| [ 0:00] @TESTDIR=/tmp/LVMTEST10064.j96Q4yqaLP
| [ 0:00] @PREFIX=LVMTEST10064
| [ 0:00] ## LVMCONF: activation {
| [ 0:00] ## LVMCONF:     checks = 1
| [ 0:00] ## LVMCONF:     monitoring = 0
| [ 0:00] ## LVMCONF:     polling_interval = 1
| [ 0:00] ## LVMCONF:     raid_region_size = 512
| [ 0:00] ## LVMCONF:     retry_deactivation = 1
| [ 0:00] ## LVMCONF:     snapshot_autoextend_percent = 50
| [ 0:00] ## LVMCONF:     snapshot_autoextend_threshold = 50
| [ 0:00] ## LVMCONF:     udev_rules = 1
| [ 0:00] ## LVMCONF:     udev_sync = 1
| [ 0:00] ## LVMCONF:     verify_udev_operations = 1
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: allocation {
| [ 0:00] ## LVMCONF:     wipe_signatures_when_zeroing_new_lvs = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: backup {
| [ 0:00] ## LVMCONF:     archive = 0
| [ 0:00] ## LVMCONF:     backup = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: devices {
| [ 0:00] ## LVMCONF:     cache_dir = "@TESTDIR@/etc"
| [ 0:00] ## LVMCONF:     default_data_alignment = 1
| [ 0:00] ## LVMCONF:     dir = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     filter = "a|.*|"
| [ 0:00] ## LVMCONF:     global_filter = [ "a|@TESTDIR@/dev/mapper/@PREFIX@.*pv[0-9_]*$|", "r|.*|" ]
| [ 0:00] ## LVMCONF:     md_component_detection  = 0
| [ 0:00] ## LVMCONF:     scan = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     sysfs_scan = 1
| [ 0:00] ## LVMCONF:     write_cache_state = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: dmeventd {
| [ 0:00] ## LVMCONF:     executable = "/sources/boot/LVM2.2.02.177/test/lib/dmeventd"
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: global {
| [ 0:00] ## LVMCONF:     abort_on_internal_errors = 1
| [ 0:00] ## LVMCONF:     cache_check_executable = "/usr/sbin/cache_check"
| [ 0:00] ## LVMCONF:     cache_dump_executable = "/usr/sbin/cache_dump"
| [ 0:00] ## LVMCONF:     cache_repair_executable = "/usr/sbin/cache_repair"
| [ 0:00] ## LVMCONF:     detect_internal_vg_cache_corruption = 1
| [ 0:00] ## LVMCONF:     fallback_to_local_locking = 0
| [ 0:00] ## LVMCONF:     fsadm_executable = "/sources/boot/LVM2.2.02.177/test/lib/fsadm"
| [ 0:00] ## LVMCONF:     library_dir = "@TESTDIR@/lib"
| [ 0:00] ## LVMCONF:     locking_dir = "@TESTDIR@/var/lock/lvm"
| [ 0:00] ## LVMCONF:     locking_type=1
| [ 0:00] ## LVMCONF:     notify_dbus = 0
| [ 0:00] ## LVMCONF:     si_unit_consistency = 1
| [ 0:00] ## LVMCONF:     thin_check_executable = "/usr/sbin/thin_check"
| [ 0:00] ## LVMCONF:     thin_dump_executable = "/usr/sbin/thin_dump"
| [ 0:00] ## LVMCONF:     thin_repair_executable = "/usr/sbin/thin_repair"
| [ 0:00] ## LVMCONF:     use_lvmetad = 0
| [ 0:00] ## LVMCONF:     use_lvmlockd = 0
| [ 0:00] ## LVMCONF:     use_lvmpolld = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: log {
| [ 0:00] ## LVMCONF:     activation = 1
| [ 0:00] ## LVMCONF:     file = "@TESTDIR@/debug.log"
| [ 0:00] ## LVMCONF:     indent = 1
| [ 0:00] ## LVMCONF:     level = 9
| [ 0:00] ## LVMCONF:     overwrite = 1
| [ 0:00] ## LVMCONF:     syslog = 0
| [ 0:00] ## LVMCONF:     verbose = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] <======== Processing test: "metadata-dirs.sh" ========>
| [ 0:00] 
| [ 0:00] aux prepare_devs 3
| [ 0:00] #metadata-dirs.sh:18+ aux prepare_devs 3
| [ 0:00] ## preparing loop device....ok (/dev/loop0)
| [ 0:00] ## preparing 3 devices...lib/utils: line 212: DM_UDEV_COOKIE: unbound variable
| [ 0:00] set +vx; STACKTRACE; set -vx
| [ 0:00] ##metadata-dirs.sh:18+ set +vx
| [ 0:00] ## - /lfskernel/sources/boot/LVM2.2.02.177/test/shell/metadata-dirs.sh:18
| [ 0:00] ## 1 STACKTRACE() called from /lfskernel/sources/boot/LVM2.2.02.177/test/shell/metadata-dirs.sh:18
| [ 0:00] <======== Info ========>
| [ 0:00] ## DMINFO:   Name             Maj Min Stat Open Targ Event  UUID                                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv3  253   3 L--w    0    1      0 TEST-@PREFIX@pv3                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv2  253   5 L--w    0    1      0 TEST-@PREFIX@pv2                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv1  253   4 L--w    0    1      0 TEST-@PREFIX@pv1                                                
| [ 0:00] <======== Active table ========>
| [ 0:00] ## DMTABLE:  @PREFIX@pv3: 0 69632 linear 7:0 141312
| [ 0:00] ## DMTABLE:  @PREFIX@pv2: 0 69632 linear 7:0 71680
| [ 0:00] ## DMTABLE:  @PREFIX@pv1: 0 69632 linear 7:0 2048
| [ 0:00] <======== Inactive table ========>
| [ 0:00] ## DMITABLE: @PREFIX@pv3: 
| [ 0:00] ## DMITABLE: @PREFIX@pv2: 
| [ 0:00] ## DMITABLE: @PREFIX@pv1: 
| [ 0:00] <======== Status ========>
| [ 0:00] ## DMSTATUS: @PREFIX@pv3: 0 69632 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv2: 0 69632 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv1: 0 69632 linear 
| [ 0:00] <======== Tree ========>
| [ 0:00] ## DMTREE:   @PREFIX@pv3 (253:3)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   @PREFIX@pv2 (253:5)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   @PREFIX@pv1 (253:4)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   LFS_vg-lfs (253:2)
| [ 0:00] ## DMTREE:    `- (8:16)
| [ 0:00] ## DMTREE:   centos-swap (253:1)
| [ 0:00] ## DMTREE:    `- (8:2)
| [ 0:00] ## DMTREE:   centos-root (253:0)
| [ 0:00] ## DMTREE:    `- (8:2)
| [ 0:00] <======== Recursive list of @TESTDIR@/dev ========>
| [ 0:00] ## LSLR:	@TESTDIR@/dev:
| [ 0:00] ## LSLR:	total 4
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 0 Feb 21 02:27 loop0
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 1 Feb 21 02:27 loop1
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 2 Feb 21 02:27 loop2
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 3 Feb 21 02:27 loop3
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 4 Feb 21 02:27 loop4
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 5 Feb 21 02:27 loop5
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 6 Feb 21 02:27 loop6
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 7 Feb 21 02:27 loop7
| [ 0:00] ## LSLR:	drwxr-xr-x 2 root root 4096 Feb 21 02:27 mapper
| [ 0:00] ## LSLR:	crw-r--r-- 1 root root 1, 3 Feb 21 02:27 testnull
| [ 0:00] ## LSLR:	
| [ 0:00] ## LSLR:	@TESTDIR@/dev/mapper:
| [ 0:00] ## LSLR:	total 0
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   4 Feb 21 02:27 @PREFIX@pv1
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   5 Feb 21 02:27 @PREFIX@pv2
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   3 Feb 21 02:27 @PREFIX@pv3
| [ 0:00] ## LSLR:	crw------- 1 root root  10, 236 Feb 21 02:27 control
| [ 0:00] <======== Udev DB content ========>
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-0
| [ 0:00] ## UDEV:	N: dm-0
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-0
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-0
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=0
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-1
| [ 0:00] ## UDEV:	N: dm-1
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-1
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-1
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=1
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-2
| [ 0:00] ## UDEV:	N: dm-2
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-2
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-2
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=2
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-3
| [ 0:00] ## UDEV:	N: dm-3
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-3
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-3
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=3
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-4
| [ 0:00] ## UDEV:	N: dm-4
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-4
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-4
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=4
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-5
| [ 0:00] ## UDEV:	N: dm-5
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-5
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-5
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=5
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/loop0
| [ 0:00] ## UDEV:	N: loop0
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/loop0
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/loop0
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=7
| [ 0:00] ## UDEV:	E: MINOR=0
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] <======== Script file "metadata-dirs.sh" ========>
| [ 0:00] ## Line: 1 	 #!/usr/bin/env bash
| [ 0:00] ## Line: 2 	 
| [ 0:00] ## Line: 3 	 # Copyright (C) 2011 Red Hat, Inc. All rights reserved.
| [ 0:00] ## Line: 4 	 #
| [ 0:00] ## Line: 5 	 # This copyrighted material is made available to anyone wishing to use,
| [ 0:00] ## Line: 6 	 # modify, copy, or redistribute it subject to the terms and conditions
| [ 0:00] ## Line: 7 	 # of the GNU General Public License v.2.
| [ 0:00] ## Line: 8 	 #
| [ 0:00] ## Line: 9 	 # You should have received a copy of the GNU General Public License
| [ 0:00] ## Line: 10 	 # along with this program; if not, write to the Free Software Foundation,
| [ 0:00] ## Line: 11 	 # Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA
| [ 0:00] ## Line: 12 	 
| [ 0:00] ## Line: 13 	 SKIP_WITH_LVMLOCKD=1
| [ 0:00] ## Line: 14 	 SKIP_WITH_LVMPOLLD=1
| [ 0:00] ## Line: 15 	 
| [ 0:00] ## Line: 16 	 . lib/inittest
| [ 0:00] ## Line: 17 	 
| [ 0:00] ## Line: 18 	 aux prepare_devs 3
| [ 0:00] ## Line: 19 	 get_devs
| [ 0:00] ## Line: 20 	 
| [ 0:00] ## Line: 21 	 pvcreate --metadatacopies 0 "${DEVICES[@]}"
| [ 0:00] ## Line: 22 	 not vgcreate "$vg" "${DEVICES[@]}"
| [ 0:00] ## Line: 23 	 
| [ 0:00] ## Line: 24 	 aux lvmconf "metadata/dirs = [ \"$TESTDIR/mda\" ]"
| [ 0:00] ## Line: 25 	 
| [ 0:00] ## Line: 26 	 vgcreate $vg "$dev1"
| [ 0:00] ## Line: 27 	 check vg_field $vg vg_mda_count 1
| [ 0:00] ## Line: 28 	 vgremove -ff $vg
| [ 0:00] ## Line: 29 	 
| [ 0:00] ## Line: 30 	 vgcreate "$vg" "${DEVICES[@]}"
| [ 0:00] ## Line: 31 	 check vg_field $vg vg_mda_count 1
| [ 0:00] ## Line: 32 	 vgremove -ff $vg
| [ 0:00] ## Line: 33 	 
| [ 0:00] ## Line: 34 	 pvcreate --metadatacopies 1 --metadataignore y "$dev1"
| [ 0:00] ## Line: 35 	 vgcreate "$vg" "${DEVICES[@]}"
| [ 0:00] ## Line: 36 	 check vg_field $vg vg_mda_count 2
| [ 0:00] ## Line: 37 	 vgremove -ff $vg
| [ 0:00] ## Line: 38 	 
| [ 0:00] ## Line: 39 	 pvcreate --metadatacopies 1 --metadataignore n "$dev1"
| [ 0:00] ## Line: 40 	 vgcreate "$vg" "${DEVICES[@]}"
| [ 0:00] ## Line: 41 	 check vg_field $vg vg_mda_count 2
| [ 0:00] ## Line: 42 	 vgremove -ff $vg
| [ 0:00] ## Line: 43 	 
| [ 0:00] ## Line: 44 	 pvcreate --metadatacopies 0 "$dev1"
| [ 0:00] ## Line: 45 	 aux lvmconf "metadata/dirs = [ \"$TESTDIR/mda\", \"$TESTDIR/mda2\" ]"
| [ 0:00] ## Line: 46 	 vgcreate "$vg" "${DEVICES[@]}"
| [ 0:00] ## Line: 47 	 check vg_field $vg vg_mda_count 2
| [ 0:00] ## Line: 48 	 vgremove -ff $vg
| [ 0:00] aux teardown
| [ 0:00] #metadata-dirs.sh:1+ aux teardown
| [ 0:00] ## teardown.........ok
###       failed: [ndev-vanilla] shell/metadata-dirs.sh

| [ 0:00] Library version:   1.02.146 (2017-12-18)
| [ 0:00] Driver version:    4.35.0
| [ 0:00] Kernel is Linux localhost.localdomain 3.10.0-693.11.1.el7.x86_64 #1 SMP Mon Dec 4 23:52:40 UTC 2017 x86_64 GNU/Linux
| [ 0:00] Selinux mode is not installed.
| [ 0:00]               total        used        free      shared  buff/cache   available
| [ 0:00] Mem:           7822        1079        4146          10        2596        6436
| [ 0:00] Swap:          4095           0        4095
| [ 0:00] Filesystem      Size  Used Avail Use% Mounted on
| [ 0:00] /dev/sdc1        18G  8.4G  8.4G  50% /
| [ 0:00] /dev/sdd1        51G  6.1G   43G  13% /lfskernel
| [ 0:00] devtmpfs        3.9G     0  3.9G   0% /dev
| [ 0:00] tmpfs           3.9G     0  3.9G   0% /run
| [ 0:00] @TESTDIR=/tmp/LVMTEST10244.xiyOAuZV46
| [ 0:00] @PREFIX=LVMTEST10244
| [ 0:00] ## LVMCONF: activation {
| [ 0:00] ## LVMCONF:     checks = 1
| [ 0:00] ## LVMCONF:     monitoring = 0
| [ 0:00] ## LVMCONF:     polling_interval = 1
| [ 0:00] ## LVMCONF:     raid_region_size = 512
| [ 0:00] ## LVMCONF:     retry_deactivation = 1
| [ 0:00] ## LVMCONF:     snapshot_autoextend_percent = 50
| [ 0:00] ## LVMCONF:     snapshot_autoextend_threshold = 50
| [ 0:00] ## LVMCONF:     udev_rules = 1
| [ 0:00] ## LVMCONF:     udev_sync = 1
| [ 0:00] ## LVMCONF:     verify_udev_operations = 1
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: allocation {
| [ 0:00] ## LVMCONF:     wipe_signatures_when_zeroing_new_lvs = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: backup {
| [ 0:00] ## LVMCONF:     archive = 0
| [ 0:00] ## LVMCONF:     backup = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: devices {
| [ 0:00] ## LVMCONF:     cache_dir = "@TESTDIR@/etc"
| [ 0:00] ## LVMCONF:     default_data_alignment = 1
| [ 0:00] ## LVMCONF:     dir = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     filter = "a|.*|"
| [ 0:00] ## LVMCONF:     global_filter = [ "a|@TESTDIR@/dev/mapper/@PREFIX@.*pv[0-9_]*$|", "r|.*|" ]
| [ 0:00] ## LVMCONF:     md_component_detection  = 0
| [ 0:00] ## LVMCONF:     scan = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     sysfs_scan = 1
| [ 0:00] ## LVMCONF:     write_cache_state = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: dmeventd {
| [ 0:00] ## LVMCONF:     executable = "/sources/boot/LVM2.2.02.177/test/lib/dmeventd"
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: global {
| [ 0:00] ## LVMCONF:     abort_on_internal_errors = 1
| [ 0:00] ## LVMCONF:     cache_check_executable = "/usr/sbin/cache_check"
| [ 0:00] ## LVMCONF:     cache_dump_executable = "/usr/sbin/cache_dump"
| [ 0:00] ## LVMCONF:     cache_repair_executable = "/usr/sbin/cache_repair"
| [ 0:00] ## LVMCONF:     detect_internal_vg_cache_corruption = 1
| [ 0:00] ## LVMCONF:     fallback_to_local_locking = 0
| [ 0:00] ## LVMCONF:     fsadm_executable = "/sources/boot/LVM2.2.02.177/test/lib/fsadm"
| [ 0:00] ## LVMCONF:     library_dir = "@TESTDIR@/lib"
| [ 0:00] ## LVMCONF:     locking_dir = "@TESTDIR@/var/lock/lvm"
| [ 0:00] ## LVMCONF:     locking_type=1
| [ 0:00] ## LVMCONF:     notify_dbus = 0
| [ 0:00] ## LVMCONF:     si_unit_consistency = 1
| [ 0:00] ## LVMCONF:     thin_check_executable = "/usr/sbin/thin_check"
| [ 0:00] ## LVMCONF:     thin_dump_executable = "/usr/sbin/thin_dump"
| [ 0:00] ## LVMCONF:     thin_repair_executable = "/usr/sbin/thin_repair"
| [ 0:00] ## LVMCONF:     use_lvmetad = 0
| [ 0:00] ## LVMCONF:     use_lvmlockd = 0
| [ 0:00] ## LVMCONF:     use_lvmpolld = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: log {
| [ 0:00] ## LVMCONF:     activation = 1
| [ 0:00] ## LVMCONF:     file = "@TESTDIR@/debug.log"
| [ 0:00] ## LVMCONF:     indent = 1
| [ 0:00] ## LVMCONF:     level = 9
| [ 0:00] ## LVMCONF:     overwrite = 1
| [ 0:00] ## LVMCONF:     syslog = 0
| [ 0:00] ## LVMCONF:     verbose = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] <======== Processing test: "metadata.sh" ========>
| [ 0:00] 
| [ 0:00] aux prepare_devs 5
| [ 0:00] #metadata.sh:18+ aux prepare_devs 5
| [ 0:00] ## preparing loop device....ok (/dev/loop0)
| [ 0:00] ## preparing 5 devices...lib/utils: line 212: DM_UDEV_COOKIE: unbound variable
| [ 0:00] set +vx; STACKTRACE; set -vx
| [ 0:00] ##metadata.sh:18+ set +vx
| [ 0:00] ## - /lfskernel/sources/boot/LVM2.2.02.177/test/shell/metadata.sh:18
| [ 0:00] ## 1 STACKTRACE() called from /lfskernel/sources/boot/LVM2.2.02.177/test/shell/metadata.sh:18
| [ 0:00] <======== Info ========>
| [ 0:00] ## DMINFO:   Name             Maj Min Stat Open Targ Event  UUID                                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv5  253   3 L--w    0    1      0 TEST-@PREFIX@pv5                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv4  253   6 L--w    0    1      0 TEST-@PREFIX@pv4                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv3  253   5 L--w    0    1      0 TEST-@PREFIX@pv3                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv2  253   4 L--w    0    1      0 TEST-@PREFIX@pv2                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv1  253   7 L--w    0    1      0 TEST-@PREFIX@pv1                                                
| [ 0:00] <======== Active table ========>
| [ 0:00] ## DMTABLE:  @PREFIX@pv5: 0 69632 linear 7:0 280576
| [ 0:00] ## DMTABLE:  @PREFIX@pv4: 0 69632 linear 7:0 210944
| [ 0:00] ## DMTABLE:  @PREFIX@pv3: 0 69632 linear 7:0 141312
| [ 0:00] ## DMTABLE:  @PREFIX@pv2: 0 69632 linear 7:0 71680
| [ 0:00] ## DMTABLE:  @PREFIX@pv1: 0 69632 linear 7:0 2048
| [ 0:00] <======== Inactive table ========>
| [ 0:00] ## DMITABLE: @PREFIX@pv5: 
| [ 0:00] ## DMITABLE: @PREFIX@pv4: 
| [ 0:00] ## DMITABLE: @PREFIX@pv3: 
| [ 0:00] ## DMITABLE: @PREFIX@pv2: 
| [ 0:00] ## DMITABLE: @PREFIX@pv1: 
| [ 0:00] <======== Status ========>
| [ 0:00] ## DMSTATUS: @PREFIX@pv5: 0 69632 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv4: 0 69632 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv3: 0 69632 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv2: 0 69632 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv1: 0 69632 linear 
| [ 0:00] <======== Tree ========>
| [ 0:00] ## DMTREE:   @PREFIX@pv5 (253:3)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   @PREFIX@pv4 (253:6)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   @PREFIX@pv3 (253:5)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   @PREFIX@pv2 (253:4)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   @PREFIX@pv1 (253:7)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   LFS_vg-lfs (253:2)
| [ 0:00] ## DMTREE:    `- (8:16)
| [ 0:00] ## DMTREE:   centos-swap (253:1)
| [ 0:00] ## DMTREE:    `- (8:2)
| [ 0:00] ## DMTREE:   centos-root (253:0)
| [ 0:00] ## DMTREE:    `- (8:2)
| [ 0:00] <======== Recursive list of @TESTDIR@/dev ========>
| [ 0:00] ## LSLR:	@TESTDIR@/dev:
| [ 0:00] ## LSLR:	total 4
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 0 Feb 21 02:27 loop0
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 1 Feb 21 02:27 loop1
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 2 Feb 21 02:27 loop2
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 3 Feb 21 02:27 loop3
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 4 Feb 21 02:27 loop4
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 5 Feb 21 02:27 loop5
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 6 Feb 21 02:27 loop6
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 7 Feb 21 02:27 loop7
| [ 0:00] ## LSLR:	drwxr-xr-x 2 root root 4096 Feb 21 02:27 mapper
| [ 0:00] ## LSLR:	crw-r--r-- 1 root root 1, 3 Feb 21 02:27 testnull
| [ 0:00] ## LSLR:	
| [ 0:00] ## LSLR:	@TESTDIR@/dev/mapper:
| [ 0:00] ## LSLR:	total 0
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   7 Feb 21 02:27 @PREFIX@pv1
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   4 Feb 21 02:27 @PREFIX@pv2
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   5 Feb 21 02:27 @PREFIX@pv3
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   6 Feb 21 02:27 @PREFIX@pv4
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   3 Feb 21 02:27 @PREFIX@pv5
| [ 0:00] ## LSLR:	crw------- 1 root root  10, 236 Feb 21 02:27 control
| [ 0:00] <======== Udev DB content ========>
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-0
| [ 0:00] ## UDEV:	N: dm-0
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-0
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-0
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=0
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-1
| [ 0:00] ## UDEV:	N: dm-1
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-1
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-1
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=1
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-2
| [ 0:00] ## UDEV:	N: dm-2
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-2
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-2
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=2
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-3
| [ 0:00] ## UDEV:	N: dm-3
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-3
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-3
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=3
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-4
| [ 0:00] ## UDEV:	N: dm-4
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-4
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-4
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=4
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-5
| [ 0:00] ## UDEV:	N: dm-5
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-5
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-5
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=5
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-6
| [ 0:00] ## UDEV:	N: dm-6
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-6
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-6
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=6
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-7
| [ 0:00] ## UDEV:	N: dm-7
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-7
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-7
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=7
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/loop0
| [ 0:00] ## UDEV:	N: loop0
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/loop0
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/loop0
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=7
| [ 0:00] ## UDEV:	E: MINOR=0
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] <======== Script file "metadata.sh" ========>
| [ 0:00] ## Line: 1 	 #!/usr/bin/env bash
| [ 0:00] ## Line: 2 	 
| [ 0:00] ## Line: 3 	 # Copyright (C) 2008 Red Hat, Inc. All rights reserved.
| [ 0:00] ## Line: 4 	 #
| [ 0:00] ## Line: 5 	 # This copyrighted material is made available to anyone wishing to use,
| [ 0:00] ## Line: 6 	 # modify, copy, or redistribute it subject to the terms and conditions
| [ 0:00] ## Line: 7 	 # of the GNU General Public License v.2.
| [ 0:00] ## Line: 8 	 #
| [ 0:00] ## Line: 9 	 # You should have received a copy of the GNU General Public License
| [ 0:00] ## Line: 10 	 # along with this program; if not, write to the Free Software Foundation,
| [ 0:00] ## Line: 11 	 # Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA
| [ 0:00] ## Line: 12 	 
| [ 0:00] ## Line: 13 	 SKIP_WITH_LVMLOCKD=1
| [ 0:00] ## Line: 14 	 SKIP_WITH_LVMPOLLD=1
| [ 0:00] ## Line: 15 	 
| [ 0:00] ## Line: 16 	 . lib/inittest
| [ 0:00] ## Line: 17 	 
| [ 0:00] ## Line: 18 	 aux prepare_devs 5
| [ 0:00] ## Line: 19 	 get_devs
| [ 0:00] ## Line: 20 	 
| [ 0:00] ## Line: 21 	 pvcreate "$dev1"
| [ 0:00] ## Line: 22 	 pvcreate --metadatacopies 0 "$dev2"
| [ 0:00] ## Line: 23 	 pvcreate --metadatacopies 0 "$dev3"
| [ 0:00] ## Line: 24 	 pvcreate "$dev4"
| [ 0:00] ## Line: 25 	 pvcreate --metadatacopies 0 "$dev5"
| [ 0:00] ## Line: 26 	 
| [ 0:00] ## Line: 27 	 vgcreate "$vg" "${DEVICES[@]}"
| [ 0:00] ## Line: 28 	 lvcreate -n $lv -l 1 -i5 -I256 $vg
| [ 0:00] ## Line: 29 	 
| [ 0:00] ## Line: 30 	 pvchange -x n "$dev1"
| [ 0:00] ## Line: 31 	 pvchange -x y "$dev1"
| [ 0:00] ## Line: 32 	 vgchange -a n $vg
| [ 0:00] ## Line: 33 	 pvchange --uuid "$dev1"
| [ 0:00] ## Line: 34 	 pvchange --uuid "$dev2"
| [ 0:00] ## Line: 35 	 vgremove -f $vg
| [ 0:00] ## Line: 36 	 
| [ 0:00] ## Line: 37 	 # check that PVs without metadata don't cause too many full device rescans (bz452606)
| [ 0:00] ## Line: 38 	 for mdacp in 1 0; do
| [ 0:00] ## Line: 39 	 	pvcreate --metadatacopies "$mdacp" "${DEVICES[@]}"
| [ 0:00] ## Line: 40 	 	pvcreate "$dev1"
| [ 0:00] ## Line: 41 	 	vgcreate "$vg" "${DEVICES[@]}"
| [ 0:00] ## Line: 42 	 	lvcreate -n $lv1 -l 2 -i5 -I256 $vg
| [ 0:00] ## Line: 43 	 	lvcreate -aey -n $lv2 --type mirror -m2 -l 2  $vg
| [ 0:00] ## Line: 44 	 	lvchange -an $vg/$lv1 $vg/$lv2
| [ 0:00] ## Line: 45 	 	vgchange -aey $vg
| [ 0:00] ## Line: 46 	 	lvchange -an $vg/$lv1 $vg/$lv2
| [ 0:00] ## Line: 47 	 	vgremove -f $vg
| [ 0:00] ## Line: 48 	 done
| [ 0:00] ## Line: 49 	 not grep "Cached VG .* incorrect PV list" out0
| [ 0:00] ## Line: 50 	 
| [ 0:00] ## Line: 51 	 # begin M1 metadata tests
| [ 0:00] ## Line: 52 	 if test -n "$LVM_TEST_LVM1" ; then
| [ 0:00] ## Line: 53 	 
| [ 0:00] ## Line: 54 	 pvcreate -M1 "$dev1" "$dev2" "$dev3"
| [ 0:00] ## Line: 55 	 pv3_uuid=$(get pv_field "$dev3" pv_uuid)
| [ 0:00] ## Line: 56 	 vgcreate -M1 $vg "$dev1" "$dev2" "$dev3"
| [ 0:00] ## Line: 57 	 pvchange --uuid "$dev1"
| [ 0:00] ## Line: 58 	 
| [ 0:00] ## Line: 59 	 # verify pe_start of all M1 PVs
| [ 0:00] ## Line: 60 	 pv_align="128.00k"
| [ 0:00] ## Line: 61 	 check pv_field "$dev1" pe_start $pv_align
| [ 0:00] ## Line: 62 	 check pv_field "$dev2" pe_start $pv_align
| [ 0:00] ## Line: 63 	 check pv_field "$dev3" pe_start $pv_align
| [ 0:00] ## Line: 64 	 
| [ 0:00] ## Line: 65 	 pvs --units k -o name,pe_start,vg_mda_size,vg_name "${DEVICES[@]}"
| [ 0:00] ## Line: 66 	 
| [ 0:00] ## Line: 67 	 # upgrade from v1 to v2 metadata
| [ 0:00] ## Line: 68 	 vgconvert -M2 $vg
| [ 0:00] ## Line: 69 	 
| [ 0:00] ## Line: 70 	 # verify pe_start of all M2 PVs
| [ 0:00] ## Line: 71 	 check pv_field "$dev1" pe_start $pv_align
| [ 0:00] ## Line: 72 	 check pv_field "$dev2" pe_start $pv_align
| [ 0:00] ## Line: 73 	 check pv_field "$dev3" pe_start $pv_align
| [ 0:00] ## Line: 74 	 
| [ 0:00] ## Line: 75 	 pvs --units k -o name,pe_start,vg_mda_size,vg_name "${DEVICES[@]}"
| [ 0:00] ## Line: 76 	 
| [ 0:00] ## Line: 77 	 # create backup and then restore $dev3
| [ 0:00] ## Line: 78 	 vgcfgbackup -f "$TESTDIR/bak-%s" "$vg"
| [ 0:00] ## Line: 79 	 pvcreate -ff -y --restorefile "$TESTDIR/bak-$vg" --uuid "$pv3_uuid" "$dev3"
| [ 0:00] ## Line: 80 	 vgcfgrestore -f "$TESTDIR/bak-$vg" "$vg"
| [ 0:00] ## Line: 81 	 
| [ 0:00] ## Line: 82 	 # verify pe_start of $dev3
| [ 0:00] ## Line: 83 	 check pv_field "$dev3" pe_start $pv_align
| [ 0:00] ## Line: 84 	 
| [ 0:00] ## Line: 85 	 fi
| [ 0:00] ## Line: 86 	 # end M1 metadata tests
| [ 0:00] ## Line: 87 	 
| [ 0:00] aux teardown
| [ 0:00] #metadata.sh:1+ aux teardown
| [ 0:00] ## teardown.........ok
###       failed: [ndev-vanilla] shell/metadata.sh

| [ 0:00] Library version:   1.02.146 (2017-12-18)
| [ 0:00] Driver version:    4.35.0
| [ 0:00] Kernel is Linux localhost.localdomain 3.10.0-693.11.1.el7.x86_64 #1 SMP Mon Dec 4 23:52:40 UTC 2017 x86_64 GNU/Linux
| [ 0:00] Selinux mode is not installed.
| [ 0:00]               total        used        free      shared  buff/cache   available
| [ 0:00] Mem:           7822        1079        4146          10        2596        6436
| [ 0:00] Swap:          4095           0        4095
| [ 0:00] Filesystem      Size  Used Avail Use% Mounted on
| [ 0:00] /dev/sdc1        18G  8.4G  8.4G  50% /
| [ 0:00] /dev/sdd1        51G  6.1G   43G  13% /lfskernel
| [ 0:00] devtmpfs        3.9G     0  3.9G   0% /dev
| [ 0:00] tmpfs           3.9G     0  3.9G   0% /run
| [ 0:00] @TESTDIR=/tmp/LVMTEST10449.pIL1e8jIqJ
| [ 0:00] @PREFIX=LVMTEST10449
| [ 0:00] ## LVMCONF: activation {
| [ 0:00] ## LVMCONF:     checks = 1
| [ 0:00] ## LVMCONF:     monitoring = 0
| [ 0:00] ## LVMCONF:     polling_interval = 1
| [ 0:00] ## LVMCONF:     raid_region_size = 512
| [ 0:00] ## LVMCONF:     retry_deactivation = 1
| [ 0:00] ## LVMCONF:     snapshot_autoextend_percent = 50
| [ 0:00] ## LVMCONF:     snapshot_autoextend_threshold = 50
| [ 0:00] ## LVMCONF:     udev_rules = 1
| [ 0:00] ## LVMCONF:     udev_sync = 1
| [ 0:00] ## LVMCONF:     verify_udev_operations = 1
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: allocation {
| [ 0:00] ## LVMCONF:     wipe_signatures_when_zeroing_new_lvs = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: backup {
| [ 0:00] ## LVMCONF:     archive = 0
| [ 0:00] ## LVMCONF:     backup = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: devices {
| [ 0:00] ## LVMCONF:     cache_dir = "@TESTDIR@/etc"
| [ 0:00] ## LVMCONF:     default_data_alignment = 1
| [ 0:00] ## LVMCONF:     dir = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     filter = "a|.*|"
| [ 0:00] ## LVMCONF:     global_filter = [ "a|@TESTDIR@/dev/mapper/@PREFIX@.*pv[0-9_]*$|", "r|.*|" ]
| [ 0:00] ## LVMCONF:     md_component_detection  = 0
| [ 0:00] ## LVMCONF:     scan = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     sysfs_scan = 1
| [ 0:00] ## LVMCONF:     write_cache_state = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: dmeventd {
| [ 0:00] ## LVMCONF:     executable = "/sources/boot/LVM2.2.02.177/test/lib/dmeventd"
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: global {
| [ 0:00] ## LVMCONF:     abort_on_internal_errors = 1
| [ 0:00] ## LVMCONF:     cache_check_executable = "/usr/sbin/cache_check"
| [ 0:00] ## LVMCONF:     cache_dump_executable = "/usr/sbin/cache_dump"
| [ 0:00] ## LVMCONF:     cache_repair_executable = "/usr/sbin/cache_repair"
| [ 0:00] ## LVMCONF:     detect_internal_vg_cache_corruption = 1
| [ 0:00] ## LVMCONF:     fallback_to_local_locking = 0
| [ 0:00] ## LVMCONF:     fsadm_executable = "/sources/boot/LVM2.2.02.177/test/lib/fsadm"
| [ 0:00] ## LVMCONF:     library_dir = "@TESTDIR@/lib"
| [ 0:00] ## LVMCONF:     locking_dir = "@TESTDIR@/var/lock/lvm"
| [ 0:00] ## LVMCONF:     locking_type=1
| [ 0:00] ## LVMCONF:     notify_dbus = 0
| [ 0:00] ## LVMCONF:     si_unit_consistency = 1
| [ 0:00] ## LVMCONF:     thin_check_executable = "/usr/sbin/thin_check"
| [ 0:00] ## LVMCONF:     thin_dump_executable = "/usr/sbin/thin_dump"
| [ 0:00] ## LVMCONF:     thin_repair_executable = "/usr/sbin/thin_repair"
| [ 0:00] ## LVMCONF:     use_lvmetad = 0
| [ 0:00] ## LVMCONF:     use_lvmlockd = 0
| [ 0:00] ## LVMCONF:     use_lvmpolld = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: log {
| [ 0:00] ## LVMCONF:     activation = 1
| [ 0:00] ## LVMCONF:     file = "@TESTDIR@/debug.log"
| [ 0:00] ## LVMCONF:     indent = 1
| [ 0:00] ## LVMCONF:     level = 9
| [ 0:00] ## LVMCONF:     overwrite = 1
| [ 0:00] ## LVMCONF:     syslog = 0
| [ 0:00] ## LVMCONF:     verbose = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] <======== Processing test: "mirror-names.sh" ========>
| [ 0:00] 
| [ 0:00] # ---------------------------------------------------------------------
| [ 0:00] # Utilities
| [ 0:00] 
| [ 0:00] lv_devices_() {
| [ 0:00] 	local d
| [ 0:00] 	local i
| [ 0:00] 	local lv=$1
| [ 0:00] 	shift
| [ 0:00] 	local devices=( "$@" )
| [ 0:00] 	local devs
| [ 0:00] 
| [ 0:00] 	devs=$(get lv_devices "$lv")
| [ 0:00] 
| [ 0:00] 	for d in $devs; do
| [ 0:00] 		(echo "${devices[@]}" | grep "$d") || return 1
| [ 0:00] 		for i in "${!devices[@]}"; do
| [ 0:00] 			if [ "${devices[i]}" = "$d" ] ; then
| [ 0:00] 				unset "devices[i]"
| [ 0:00] 			fi
| [ 0:00] 		done
| [ 0:00] 	done
| [ 0:00] 
| [ 0:00] 	test "${#devices[@]}" -eq 0 ||
| [ 0:00] 		die "Left devices " "${devices[@]}"
| [ 0:00] }
| [ 0:00] 
| [ 0:00] lv_mirror_log_() {
| [ 0:00] 	get lv_field "$1" mirror_log | tr -d []
| [ 0:00] }
| [ 0:00] 
| [ 0:00] lv_convert_lv_() {
| [ 0:00] 	get lv_field "$1" convert_lv | tr -d []
| [ 0:00] }
| [ 0:00] 
| [ 0:00] enable_devs() {
| [ 0:00] 	for i in "$dev1" "$dev2" "$dev3" "$dev4" "$dev5" ; do
| [ 0:00] 		aux enable_dev "$i"
| [ 0:00] 	done
| [ 0:00] }
| [ 0:00] 
| [ 0:00] delay_devs() {
| [ 0:00] 	for i in "$dev1" "$dev2" "$dev3" "$dev4" "$dev5" ; do
| [ 0:00] 		aux delay_dev "$i" 0 1000 "$(get first_extent_sector "$i"):"
| [ 0:00] 	done
| [ 0:00] }
| [ 0:00] 
| [ 0:00] # ---------------------------------------------------------------------
| [ 0:00] # Common environment setup/cleanup for each sub testcases
| [ 0:00] 
| [ 0:00] check_and_cleanup_lvs_() {
| [ 0:00] 	lvs -a -o+devices $vg
| [ 0:00] 	lvremove -ff $vg
| [ 0:00] 	(dm_table | not grep $vg) || \
| [ 0:00] 		die "ERROR: lvremove did leave some some mappings in DM behind!"
| [ 0:00] }
| [ 0:00] 
| [ 0:00] # ---------------------------------------------------------------------
| [ 0:00] # Initialize PVs and VGs
| [ 0:00] 
| [ 0:00] aux prepare_vg 5 80
| [ 0:00] #mirror-names.sh:79+ aux prepare_vg 5 80
| [ 0:00] ## preparing loop device....ok (/dev/loop0)
| [ 0:00] ## preparing 5 devices...lib/utils: line 212: DM_UDEV_COOKIE: unbound variable
| [ 0:00] set +vx; STACKTRACE; set -vx
| [ 0:00] ##mirror-names.sh:79+ set +vx
| [ 0:00] ## - /lfskernel/sources/boot/LVM2.2.02.177/test/shell/mirror-names.sh:79
| [ 0:00] ## 1 STACKTRACE() called from /lfskernel/sources/boot/LVM2.2.02.177/test/shell/mirror-names.sh:79
| [ 0:00] <======== Info ========>
| [ 0:01] ## DMINFO:   Name             Maj Min Stat Open Targ Event  UUID                                                                
| [ 0:01] ## DMINFO:   @PREFIX@pv5  253   6 L--w    0    1      0 TEST-@PREFIX@pv5                                                
| [ 0:01] ## DMINFO:   @PREFIX@pv4  253   5 L--w    0    1      0 TEST-@PREFIX@pv4                                                
| [ 0:01] ## DMINFO:   @PREFIX@pv3  253   4 L--w    0    1      0 TEST-@PREFIX@pv3                                                
| [ 0:01] ## DMINFO:   @PREFIX@pv2  253   3 L--w    0    1      0 TEST-@PREFIX@pv2                                                
| [ 0:01] ## DMINFO:   @PREFIX@pv1  253   7 L--w    0    1      0 TEST-@PREFIX@pv1                                                
| [ 0:01] <======== Active table ========>
| [ 0:01] ## DMTABLE:  @PREFIX@pv5: 0 163840 linear 7:0 657408
| [ 0:01] ## DMTABLE:  @PREFIX@pv4: 0 163840 linear 7:0 493568
| [ 0:01] ## DMTABLE:  @PREFIX@pv3: 0 163840 linear 7:0 329728
| [ 0:01] ## DMTABLE:  @PREFIX@pv2: 0 163840 linear 7:0 165888
| [ 0:01] ## DMTABLE:  @PREFIX@pv1: 0 163840 linear 7:0 2048
| [ 0:01] <======== Inactive table ========>
| [ 0:01] ## DMITABLE: @PREFIX@pv5: 
| [ 0:01] ## DMITABLE: @PREFIX@pv4: 
| [ 0:01] ## DMITABLE: @PREFIX@pv3: 
| [ 0:01] ## DMITABLE: @PREFIX@pv2: 
| [ 0:01] ## DMITABLE: @PREFIX@pv1: 
| [ 0:01] <======== Status ========>
| [ 0:01] ## DMSTATUS: @PREFIX@pv5: 0 163840 linear 
| [ 0:01] ## DMSTATUS: @PREFIX@pv4: 0 163840 linear 
| [ 0:01] ## DMSTATUS: @PREFIX@pv3: 0 163840 linear 
| [ 0:01] ## DMSTATUS: @PREFIX@pv2: 0 163840 linear 
| [ 0:01] ## DMSTATUS: @PREFIX@pv1: 0 163840 linear 
| [ 0:01] <======== Tree ========>
| [ 0:01] ## DMTREE:   @PREFIX@pv5 (253:6)
| [ 0:01] ## DMTREE:    `- (7:0)
| [ 0:01] ## DMTREE:   @PREFIX@pv4 (253:5)
| [ 0:01] ## DMTREE:    `- (7:0)
| [ 0:01] ## DMTREE:   @PREFIX@pv3 (253:4)
| [ 0:01] ## DMTREE:    `- (7:0)
| [ 0:01] ## DMTREE:   @PREFIX@pv2 (253:3)
| [ 0:01] ## DMTREE:    `- (7:0)
| [ 0:01] ## DMTREE:   @PREFIX@pv1 (253:7)
| [ 0:01] ## DMTREE:    `- (7:0)
| [ 0:01] ## DMTREE:   LFS_vg-lfs (253:2)
| [ 0:01] ## DMTREE:    `- (8:16)
| [ 0:01] ## DMTREE:   centos-swap (253:1)
| [ 0:01] ## DMTREE:    `- (8:2)
| [ 0:01] ## DMTREE:   centos-root (253:0)
| [ 0:01] ## DMTREE:    `- (8:2)
| [ 0:01] <======== Recursive list of @TESTDIR@/dev ========>
| [ 0:01] ## LSLR:	@TESTDIR@/dev:
| [ 0:01] ## LSLR:	total 4
| [ 0:01] ## LSLR:	brw-r--r-- 1 root root 7, 0 Feb 21 02:27 loop0
| [ 0:01] ## LSLR:	brw-r--r-- 1 root root 7, 1 Feb 21 02:27 loop1
| [ 0:01] ## LSLR:	brw-r--r-- 1 root root 7, 2 Feb 21 02:27 loop2
| [ 0:01] ## LSLR:	brw-r--r-- 1 root root 7, 3 Feb 21 02:27 loop3
| [ 0:01] ## LSLR:	brw-r--r-- 1 root root 7, 4 Feb 21 02:27 loop4
| [ 0:01] ## LSLR:	brw-r--r-- 1 root root 7, 5 Feb 21 02:27 loop5
| [ 0:01] ## LSLR:	brw-r--r-- 1 root root 7, 6 Feb 21 02:27 loop6
| [ 0:01] ## LSLR:	brw-r--r-- 1 root root 7, 7 Feb 21 02:27 loop7
| [ 0:01] ## LSLR:	drwxr-xr-x 2 root root 4096 Feb 21 02:27 mapper
| [ 0:01] ## LSLR:	crw-r--r-- 1 root root 1, 3 Feb 21 02:27 testnull
| [ 0:01] ## LSLR:	
| [ 0:01] ## LSLR:	@TESTDIR@/dev/mapper:
| [ 0:01] ## LSLR:	total 0
| [ 0:01] ## LSLR:	brw------- 1 root root 253,   7 Feb 21 02:27 @PREFIX@pv1
| [ 0:01] ## LSLR:	brw------- 1 root root 253,   3 Feb 21 02:27 @PREFIX@pv2
| [ 0:01] ## LSLR:	brw------- 1 root root 253,   4 Feb 21 02:27 @PREFIX@pv3
| [ 0:01] ## LSLR:	brw------- 1 root root 253,   5 Feb 21 02:27 @PREFIX@pv4
| [ 0:01] ## LSLR:	brw------- 1 root root 253,   6 Feb 21 02:27 @PREFIX@pv5
| [ 0:01] ## LSLR:	crw------- 1 root root  10, 236 Feb 21 02:27 control
| [ 0:01] <======== Udev DB content ========>
| [ 0:01] ## UDEV:	P: /devices/virtual/block/dm-0
| [ 0:01] ## UDEV:	N: dm-0
| [ 0:01] ## UDEV:	E: DEVNAME=/dev/dm-0
| [ 0:01] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-0
| [ 0:01] ## UDEV:	E: DEVTYPE=disk
| [ 0:01] ## UDEV:	E: MAJOR=253
| [ 0:01] ## UDEV:	E: MINOR=0
| [ 0:01] ## UDEV:	E: SUBSYSTEM=block
| [ 0:01] ## UDEV:	
| [ 0:01] ## UDEV:	P: /devices/virtual/block/dm-1
| [ 0:01] ## UDEV:	N: dm-1
| [ 0:01] ## UDEV:	E: DEVNAME=/dev/dm-1
| [ 0:01] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-1
| [ 0:01] ## UDEV:	E: DEVTYPE=disk
| [ 0:01] ## UDEV:	E: MAJOR=253
| [ 0:01] ## UDEV:	E: MINOR=1
| [ 0:01] ## UDEV:	E: SUBSYSTEM=block
| [ 0:01] ## UDEV:	
| [ 0:01] ## UDEV:	P: /devices/virtual/block/dm-2
| [ 0:01] ## UDEV:	N: dm-2
| [ 0:01] ## UDEV:	E: DEVNAME=/dev/dm-2
| [ 0:01] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-2
| [ 0:01] ## UDEV:	E: DEVTYPE=disk
| [ 0:01] ## UDEV:	E: MAJOR=253
| [ 0:01] ## UDEV:	E: MINOR=2
| [ 0:01] ## UDEV:	E: SUBSYSTEM=block
| [ 0:01] ## UDEV:	
| [ 0:01] ## UDEV:	P: /devices/virtual/block/dm-3
| [ 0:01] ## UDEV:	N: dm-3
| [ 0:01] ## UDEV:	E: DEVNAME=/dev/dm-3
| [ 0:01] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-3
| [ 0:01] ## UDEV:	E: DEVTYPE=disk
| [ 0:01] ## UDEV:	E: MAJOR=253
| [ 0:01] ## UDEV:	E: MINOR=3
| [ 0:01] ## UDEV:	E: SUBSYSTEM=block
| [ 0:01] ## UDEV:	
| [ 0:01] ## UDEV:	P: /devices/virtual/block/dm-4
| [ 0:01] ## UDEV:	N: dm-4
| [ 0:01] ## UDEV:	E: DEVNAME=/dev/dm-4
| [ 0:01] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-4
| [ 0:01] ## UDEV:	E: DEVTYPE=disk
| [ 0:01] ## UDEV:	E: MAJOR=253
| [ 0:01] ## UDEV:	E: MINOR=4
| [ 0:01] ## UDEV:	E: SUBSYSTEM=block
| [ 0:01] ## UDEV:	
| [ 0:01] ## UDEV:	P: /devices/virtual/block/dm-5
| [ 0:01] ## UDEV:	N: dm-5
| [ 0:01] ## UDEV:	E: DEVNAME=/dev/dm-5
| [ 0:01] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-5
| [ 0:01] ## UDEV:	E: DEVTYPE=disk
| [ 0:01] ## UDEV:	E: MAJOR=253
| [ 0:01] ## UDEV:	E: MINOR=5
| [ 0:01] ## UDEV:	E: SUBSYSTEM=block
| [ 0:01] ## UDEV:	
| [ 0:01] ## UDEV:	P: /devices/virtual/block/dm-6
| [ 0:01] ## UDEV:	N: dm-6
| [ 0:01] ## UDEV:	E: DEVNAME=/dev/dm-6
| [ 0:01] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-6
| [ 0:01] ## UDEV:	E: DEVTYPE=disk
| [ 0:01] ## UDEV:	E: MAJOR=253
| [ 0:01] ## UDEV:	E: MINOR=6
| [ 0:01] ## UDEV:	E: SUBSYSTEM=block
| [ 0:01] ## UDEV:	
| [ 0:01] ## UDEV:	P: /devices/virtual/block/dm-7
| [ 0:01] ## UDEV:	N: dm-7
| [ 0:01] ## UDEV:	E: DEVNAME=/dev/dm-7
| [ 0:01] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-7
| [ 0:01] ## UDEV:	E: DEVTYPE=disk
| [ 0:01] ## UDEV:	E: MAJOR=253
| [ 0:01] ## UDEV:	E: MINOR=7
| [ 0:01] ## UDEV:	E: SUBSYSTEM=block
| [ 0:01] ## UDEV:	
| [ 0:01] ## UDEV:	P: /devices/virtual/block/loop0
| [ 0:01] ## UDEV:	N: loop0
| [ 0:01] ## UDEV:	E: DEVNAME=/dev/loop0
| [ 0:01] ## UDEV:	E: DEVPATH=/devices/virtual/block/loop0
| [ 0:01] ## UDEV:	E: DEVTYPE=disk
| [ 0:01] ## UDEV:	E: MAJOR=7
| [ 0:01] ## UDEV:	E: MINOR=0
| [ 0:01] ## UDEV:	E: SUBSYSTEM=block
| [ 0:01] ## UDEV:	
| [ 0:01] <======== Script file "mirror-names.sh" ========>
| [ 0:01] ## Line: 1 	 #!/usr/bin/env bash
| [ 0:01] ## Line: 2 	 
| [ 0:01] ## Line: 3 	 # Copyright (C) 2007-2017 Red Hat, Inc. All rights reserved.
| [ 0:01] ## Line: 4 	 # Copyright (C) 2007-2008 NEC Corporation
| [ 0:01] ## Line: 5 	 #
| [ 0:01] ## Line: 6 	 # This copyrighted material is made available to anyone wishing to use,
| [ 0:01] ## Line: 7 	 # modify, copy, or redistribute it subject to the terms and conditions
| [ 0:01] ## Line: 8 	 # of the GNU General Public License v.2.
| [ 0:01] ## Line: 9 	 #
| [ 0:01] ## Line: 10 	 # You should have received a copy of the GNU General Public License
| [ 0:01] ## Line: 11 	 # along with this program; if not, write to the Free Software Foundation,
| [ 0:01] ## Line: 12 	 # Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA
| [ 0:01] ## Line: 13 	 
| [ 0:01] ## Line: 14 	 test_description="check namings of mirrored LV"
| [ 0:01] ## Line: 15 	 
| [ 0:01] ## Line: 16 	 SKIP_WITH_LVMLOCKD=1
| [ 0:01] ## Line: 17 	 
| [ 0:01] ## Line: 18 	 . lib/inittest
| [ 0:01] ## Line: 19 	 
| [ 0:01] ## Line: 20 	 # ---------------------------------------------------------------------
| [ 0:01] ## Line: 21 	 # Utilities
| [ 0:01] ## Line: 22 	 
| [ 0:01] ## Line: 23 	 lv_devices_() {
| [ 0:01] ## Line: 24 	 	local d
| [ 0:01] ## Line: 25 	 	local i
| [ 0:01] ## Line: 26 	 	local lv=$1
| [ 0:01] ## Line: 27 	 	shift
| [ 0:01] ## Line: 28 	 	local devices=( "$@" )
| [ 0:01] ## Line: 29 	 	local devs
| [ 0:01] ## Line: 30 	 
| [ 0:01] ## Line: 31 	 	devs=$(get lv_devices "$lv")
| [ 0:01] ## Line: 32 	 
| [ 0:01] ## Line: 33 	 	for d in $devs; do
| [ 0:01] ## Line: 34 	 		(echo "${devices[@]}" | grep "$d") || return 1
| [ 0:01] ## Line: 35 	 		for i in "${!devices[@]}"; do
| [ 0:01] ## Line: 36 	 			if [ "${devices[i]}" = "$d" ] ; then
| [ 0:01] ## Line: 37 	 				unset "devices[i]"
| [ 0:01] ## Line: 38 	 			fi
| [ 0:01] ## Line: 39 	 		done
| [ 0:01] ## Line: 40 	 	done
| [ 0:01] ## Line: 41 	 
| [ 0:01] ## Line: 42 	 	test "${#devices[@]}" -eq 0 ||
| [ 0:01] ## Line: 43 	 		die "Left devices " "${devices[@]}"
| [ 0:01] ## Line: 44 	 }
| [ 0:01] ## Line: 45 	 
| [ 0:01] ## Line: 46 	 lv_mirror_log_() {
| [ 0:01] ## Line: 47 	 	get lv_field "$1" mirror_log | tr -d []
| [ 0:01] ## Line: 48 	 }
| [ 0:01] ## Line: 49 	 
| [ 0:01] ## Line: 50 	 lv_convert_lv_() {
| [ 0:01] ## Line: 51 	 	get lv_field "$1" convert_lv | tr -d []
| [ 0:01] ## Line: 52 	 }
| [ 0:01] ## Line: 53 	 
| [ 0:01] ## Line: 54 	 enable_devs() {
| [ 0:01] ## Line: 55 	 	for i in "$dev1" "$dev2" "$dev3" "$dev4" "$dev5" ; do
| [ 0:01] ## Line: 56 	 		aux enable_dev "$i"
| [ 0:01] ## Line: 57 	 	done
| [ 0:01] ## Line: 58 	 }
| [ 0:01] ## Line: 59 	 
| [ 0:01] ## Line: 60 	 delay_devs() {
| [ 0:01] ## Line: 61 	 	for i in "$dev1" "$dev2" "$dev3" "$dev4" "$dev5" ; do
| [ 0:01] ## Line: 62 	 		aux delay_dev "$i" 0 1000 "$(get first_extent_sector "$i"):"
| [ 0:01] ## Line: 63 	 	done
| [ 0:01] ## Line: 64 	 }
| [ 0:01] ## Line: 65 	 
| [ 0:01] ## Line: 66 	 # ---------------------------------------------------------------------
| [ 0:01] ## Line: 67 	 # Common environment setup/cleanup for each sub testcases
| [ 0:01] ## Line: 68 	 
| [ 0:01] ## Line: 69 	 check_and_cleanup_lvs_() {
| [ 0:01] ## Line: 70 	 	lvs -a -o+devices $vg
| [ 0:01] ## Line: 71 	 	lvremove -ff $vg
| [ 0:01] ## Line: 72 	 	(dm_table | not grep $vg) || \
| [ 0:01] ## Line: 73 	 		die "ERROR: lvremove did leave some some mappings in DM behind!"
| [ 0:01] ## Line: 74 	 }
| [ 0:01] ## Line: 75 	 
| [ 0:01] ## Line: 76 	 # ---------------------------------------------------------------------
| [ 0:01] ## Line: 77 	 # Initialize PVs and VGs
| [ 0:01] ## Line: 78 	 
| [ 0:01] ## Line: 79 	 aux prepare_vg 5 80
| [ 0:01] ## Line: 80 	 
| [ 0:01] ## Line: 81 	 check_and_cleanup_lvs_
| [ 0:01] ## Line: 82 	 
| [ 0:01] ## Line: 83 	 # ---------------------------------------------------------------------
| [ 0:01] ## Line: 84 	 # basic
| [ 0:01] ## Line: 85 	 
| [ 0:01] ## Line: 86 	 #COMM "init: lvcreate"
| [ 0:01] ## Line: 87 	 
| [ 0:01] ## Line: 88 	 #COMM "mirror images are ${lv1}_mimage_x"
| [ 0:01] ## Line: 89 	 lvcreate -an -Zn -l2 --type mirror -m1 -n $lv1 $vg
| [ 0:01] ## Line: 90 	 lv_devices_ $vg/$lv1 ${lv1}_mimage_0 ${lv1}_mimage_1
| [ 0:01] ## Line: 91 	 
| [ 0:01] ## Line: 92 	 #COMM "mirror log is ${lv1}_mlog"
| [ 0:01] ## Line: 93 	 test "$(lv_mirror_log_ $vg/$lv1)" = "${lv1}_mlog"
| [ 0:01] ## Line: 94 	 
| [ 0:01] ## Line: 95 	 # "cleanup"
| [ 0:01] ## Line: 96 	 check_and_cleanup_lvs_
| [ 0:01] ## Line: 97 	 
| [ 0:01] ## Line: 98 	 #COMM "mirror with name longer than 22 characters (bz221322)"
| [ 0:01] ## Line: 99 	 name="LVwithanamelogerthan22characters_butidontwonttocounthem"
| [ 0:01] ## Line: 100 	 lvcreate -an -Zn --type mirror -m1 -l2 -n $name $vg
| [ 0:01] ## Line: 101 	 lvs $vg/$name
| [ 0:01] ## Line: 102 	 check_and_cleanup_lvs_
| [ 0:01] ## Line: 103 	 
| [ 0:01] ## Line: 104 	 # ---------------------------------------------------------------------
| [ 0:01] ## Line: 105 	 # lvrename
| [ 0:01] ## Line: 106 	 
| [ 0:01] ## Line: 107 	 #COMM "init: lvrename"
| [ 0:01] ## Line: 108 	 
| [ 0:01] ## Line: 109 	 #COMM "renamed mirror names: $lv1 to $lv2"
| [ 0:01] ## Line: 110 	 lvcreate -an -Zn -l2 --type mirror -m1 -n $lv1 $vg
| [ 0:01] ## Line: 111 	 lvrename $vg/$lv1 $vg/$lv2
| [ 0:01] ## Line: 112 	 lv_devices_ $vg/$lv2 ${lv2}_mimage_0 ${lv2}_mimage_1
| [ 0:01] ## Line: 113 	 lv_mirror_log_ $vg/$lv2 ${lv2}_mlog
| [ 0:01] ## Line: 114 	 
| [ 0:01] ## Line: 115 	 #COMM "cleanup"
| [ 0:01] ## Line: 116 	 check_and_cleanup_lvs_
| [ 0:01] ## Line: 117 	 
| [ 0:01] ## Line: 118 	 # ---------------------------------------------------------------------
| [ 0:01] ## Line: 119 	 # lvconvert
| [ 0:01] ## Line: 120 	 
| [ 0:01] ## Line: 121 	 #COMM "init: lvconvert"
| [ 0:01] ## Line: 122 	 
| [ 0:01] ## Line: 123 	 #COMM "converting mirror names is ${lv1}_mimagetmp_2"
| [ 0:01] ## Line: 124 	 lvcreate -aey -l2 --type mirror -m1 -n $lv1 $vg
| [ 0:01] ## Line: 125 	 delay_devs
| [ 0:01] ## Line: 126 	 LVM_TEST_TAG="kill_me_$PREFIX" lvconvert -m+1 -i+40 -b $vg/$lv1
| [ 0:01] ## Line: 127 	 convlv=$(lv_convert_lv_ $vg/$lv1)
| [ 0:01] ## Line: 128 	 test "$convlv" = "${lv1}_mimagetmp_2"
| [ 0:01] ## Line: 129 	 lv_devices_ $vg/$lv1 $convlv ${lv1}_mimage_2
| [ 0:01] ## Line: 130 	 lv_devices_ $vg/$convlv ${lv1}_mimage_0 ${lv1}_mimage_1
| [ 0:01] ## Line: 131 	 lv_mirror_log_ $vg/$convlv ${lv1}_mlog
| [ 0:01] ## Line: 132 	 enable_devs
| [ 0:01] ## Line: 133 	 
| [ 0:01] ## Line: 134 	 #COMM "mirror log name after re-adding is ${lv1}_mlog"
| [ 0:01] ## Line: 135 	 lvconvert -f --mirrorlog core $vg/$lv1
| [ 0:01] ## Line: 136 	 lvconvert --mirrorlog disk $vg/$lv1
| [ 0:01] ## Line: 137 	 convlv=$(lv_convert_lv_ $vg/$lv1)
| [ 0:01] ## Line: 138 	 lv_devices_ $vg/$lv1 $convlv ${lv1}_mimage_2
| [ 0:01] ## Line: 139 	 lv_devices_ $vg/$convlv ${lv1}_mimage_0 ${lv1}_mimage_1
| [ 0:01] ## Line: 140 	 lv_mirror_log_ $vg/$convlv ${lv1}_mlog
| [ 0:01] ## Line: 141 	 
| [ 0:01] ## Line: 142 	 #COMM "renamed converting mirror names: $lv1 to $lv2"
| [ 0:01] ## Line: 143 	 lvrename $vg/$lv1 $vg/$lv2
| [ 0:01] ## Line: 144 	 convlv=$(lv_convert_lv_ $vg/$lv2)
| [ 0:01] ## Line: 145 	 lv_devices_ $vg/$lv2 $convlv ${lv2}_mimage_2
| [ 0:01] ## Line: 146 	 lv_devices_ $vg/$convlv ${lv2}_mimage_0 ${lv2}_mimage_1
| [ 0:01] ## Line: 147 	 lv_mirror_log_ $vg/$convlv ${lv2}_mlog
| [ 0:01] ## Line: 148 	 
| [ 0:01] ## Line: 149 	 #COMM "cleanup"
| [ 0:01] ## Line: 150 	 check_and_cleanup_lvs_
| [ 0:01] ## Line: 151 	 
| [ 0:01] ## Line: 152 	 # Temporary mirror log should have "_mlogtmp_<n>" suffix
| [ 0:01] ## Line: 153 	 # but currently lvconvert doesn't have an option to add the log.
| [ 0:01] ## Line: 154 	 # If such feature is added in future, a test for that should
| [ 0:01] ## Line: 155 	 # be added.
| [ 0:01] ## Line: 156 	 
| [ 0:01] ## Line: 157 	 # ---------------------------------------------------------------------
| [ 0:01] aux teardown
| [ 0:01] #mirror-names.sh:1+ aux teardown
| [ 0:01] ## teardown.........ok
###       failed: [ndev-vanilla] shell/mirror-names.sh

| [ 0:00] Library version:   1.02.146 (2017-12-18)
| [ 0:00] Driver version:    4.35.0
| [ 0:00] Kernel is Linux localhost.localdomain 3.10.0-693.11.1.el7.x86_64 #1 SMP Mon Dec 4 23:52:40 UTC 2017 x86_64 GNU/Linux
| [ 0:00] Selinux mode is not installed.
| [ 0:00]               total        used        free      shared  buff/cache   available
| [ 0:00] Mem:           7822        1079        4146          10        2596        6436
| [ 0:00] Swap:          4095           0        4095
| [ 0:00] Filesystem      Size  Used Avail Use% Mounted on
| [ 0:00] /dev/sdc1        18G  8.4G  8.4G  50% /
| [ 0:00] /dev/sdd1        51G  6.1G   43G  13% /lfskernel
| [ 0:00] devtmpfs        3.9G     0  3.9G   0% /dev
| [ 0:00] tmpfs           3.9G     0  3.9G   0% /run
| [ 0:00] @TESTDIR=/tmp/LVMTEST10663.wjaRsmtnNM
| [ 0:00] @PREFIX=LVMTEST10663
| [ 0:00] ## LVMCONF: activation {
| [ 0:00] ## LVMCONF:     checks = 1
| [ 0:00] ## LVMCONF:     monitoring = 0
| [ 0:00] ## LVMCONF:     polling_interval = 1
| [ 0:00] ## LVMCONF:     raid_region_size = 512
| [ 0:00] ## LVMCONF:     retry_deactivation = 1
| [ 0:00] ## LVMCONF:     snapshot_autoextend_percent = 50
| [ 0:00] ## LVMCONF:     snapshot_autoextend_threshold = 50
| [ 0:00] ## LVMCONF:     udev_rules = 1
| [ 0:00] ## LVMCONF:     udev_sync = 1
| [ 0:00] ## LVMCONF:     verify_udev_operations = 1
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: allocation {
| [ 0:00] ## LVMCONF:     wipe_signatures_when_zeroing_new_lvs = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: backup {
| [ 0:00] ## LVMCONF:     archive = 0
| [ 0:00] ## LVMCONF:     backup = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: devices {
| [ 0:00] ## LVMCONF:     cache_dir = "@TESTDIR@/etc"
| [ 0:00] ## LVMCONF:     default_data_alignment = 1
| [ 0:00] ## LVMCONF:     dir = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     filter = "a|.*|"
| [ 0:00] ## LVMCONF:     global_filter = [ "a|@TESTDIR@/dev/mapper/@PREFIX@.*pv[0-9_]*$|", "r|.*|" ]
| [ 0:00] ## LVMCONF:     md_component_detection  = 0
| [ 0:00] ## LVMCONF:     scan = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     sysfs_scan = 1
| [ 0:00] ## LVMCONF:     write_cache_state = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: dmeventd {
| [ 0:00] ## LVMCONF:     executable = "/sources/boot/LVM2.2.02.177/test/lib/dmeventd"
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: global {
| [ 0:00] ## LVMCONF:     abort_on_internal_errors = 1
| [ 0:00] ## LVMCONF:     cache_check_executable = "/usr/sbin/cache_check"
| [ 0:00] ## LVMCONF:     cache_dump_executable = "/usr/sbin/cache_dump"
| [ 0:00] ## LVMCONF:     cache_repair_executable = "/usr/sbin/cache_repair"
| [ 0:00] ## LVMCONF:     detect_internal_vg_cache_corruption = 1
| [ 0:00] ## LVMCONF:     fallback_to_local_locking = 0
| [ 0:00] ## LVMCONF:     fsadm_executable = "/sources/boot/LVM2.2.02.177/test/lib/fsadm"
| [ 0:00] ## LVMCONF:     library_dir = "@TESTDIR@/lib"
| [ 0:00] ## LVMCONF:     locking_dir = "@TESTDIR@/var/lock/lvm"
| [ 0:00] ## LVMCONF:     locking_type=1
| [ 0:00] ## LVMCONF:     notify_dbus = 0
| [ 0:00] ## LVMCONF:     si_unit_consistency = 1
| [ 0:00] ## LVMCONF:     thin_check_executable = "/usr/sbin/thin_check"
| [ 0:00] ## LVMCONF:     thin_dump_executable = "/usr/sbin/thin_dump"
| [ 0:00] ## LVMCONF:     thin_repair_executable = "/usr/sbin/thin_repair"
| [ 0:00] ## LVMCONF:     use_lvmetad = 0
| [ 0:00] ## LVMCONF:     use_lvmlockd = 0
| [ 0:00] ## LVMCONF:     use_lvmpolld = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: log {
| [ 0:00] ## LVMCONF:     activation = 1
| [ 0:00] ## LVMCONF:     file = "@TESTDIR@/debug.log"
| [ 0:00] ## LVMCONF:     indent = 1
| [ 0:00] ## LVMCONF:     level = 9
| [ 0:00] ## LVMCONF:     overwrite = 1
| [ 0:00] ## LVMCONF:     syslog = 0
| [ 0:00] ## LVMCONF:     verbose = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] <======== Processing test: "mirror-vgreduce-removemissing.sh" ========>
| [ 0:00] 
| [ 0:00] list_pvs=()
| [ 0:00] #mirror-vgreduce-removemissing.sh:23+ list_pvs=()
| [ 0:00] 
| [ 0:00] lv_is_on_ ()
| [ 0:00] {
| [ 0:00] 	local lv=$vg/$1
| [ 0:00] 	shift
| [ 0:00] 	local list_pvs=( "$@" )
| [ 0:00] 
| [ 0:00] 	echo "Check if $lv is exactly on PVs" "${list_pvs[@]}"
| [ 0:00] 	rm -f out1 out2
| [ 0:00] 	printf "%s\n" "${list_pvs[@]}" | sort | uniq > out1
| [ 0:00] 
| [ 0:00] 	lvs -a -o+devices $lv
| [ 0:00] 	get lv_devices "$lv" | sort | uniq > out2
| [ 0:00] 
| [ 0:00] 	diff --ignore-blank-lines out1 out2
| [ 0:00] }
| [ 0:00] 
| [ 0:00] mimages_are_on_ ()
| [ 0:00] {
| [ 0:00] 	local lv=$1
| [ 0:00] 	shift
| [ 0:00] 	local list_pvs=( "$@" )
| [ 0:00] 	local mimages=()
| [ 0:00] 	local i
| [ 0:00] 
| [ 0:00] 	echo "Check if mirror images of $lv are on PVs" "${list_pvs[@]}"
| [ 0:00] 	printf "%s\n" "${list_pvs[@]}" | sort | uniq > out1
| [ 0:00] 
| [ 0:00] 	get lv_field_lv_ "$vg" lv_name -a | grep "${lv}_mimage_" | tee lvs_log
| [ 0:00] 	test -s lvs_log || return 1
| [ 0:00] 
| [ 0:00] 	while IFS= read -r i ; do
| [ 0:00] 		mimages+=( "$i" )
| [ 0:00] 	done < lvs_log
| [ 0:00] 
| [ 0:00] 	for i in "${mimages[@]}"; do
| [ 0:00] 		echo "Checking $vg/$i"
| [ 0:00] 		lvs -a -o+devices "$vg/$i"
| [ 0:00] 	done
| [ 0:00] 
| [ 0:00] 	for i in "${mimages[@]}"; do
| [ 0:00] 		get lv_devices "$vg/$i"
| [ 0:00] 	done | sort | uniq > out2
| [ 0:00] 
| [ 0:00] 	diff --ignore-blank-lines out1 out2
| [ 0:00] }
| [ 0:00] 
| [ 0:00] mirrorlog_is_on_()
| [ 0:00] {
| [ 0:00] 	local lv=${1}_mlog
| [ 0:00] 	shift
| [ 0:00] 	lv_is_on_ $lv "$@"
| [ 0:00] }
| [ 0:00] 
| [ 0:00] lv_is_linear_()
| [ 0:00] {
| [ 0:00] 	echo "Check if $1 is linear LV (i.e. not a mirror)"
| [ 0:00] 	get lv_field $vg/$1 "stripes,attr" | tee out
| [ 0:00] 	grep "^1 -" out >/dev/null
| [ 0:00] }
| [ 0:00] 
| [ 0:00] rest_pvs_()
| [ 0:00] {
| [ 0:00] 	local index=$1
| [ 0:00] 	local num=$2
| [ 0:00] 	local rem=()
| [ 0:00] 	local n
| [ 0:00] 	local dev
| [ 0:00] 
| [ 0:00] 	for n in $(seq 1 $(( index - 1 )) ) $(seq $(( index + 1 )) $num); do
| [ 0:00] 		eval "dev=\$dev$n"
| [ 0:00] 		rem+=( "$dev" )
| [ 0:00] 	done
| [ 0:00] 
| [ 0:00] 	printf "%s\n" "${rem[@]}"
| [ 0:00] }
| [ 0:00] 
| [ 0:00] # ---------------------------------------------------------------------
| [ 0:00] # Initialize PVs and VGs
| [ 0:00] 
| [ 0:00] aux prepare_pvs 5 80
| [ 0:00] #mirror-vgreduce-removemissing.sh:104+ aux prepare_pvs 5 80
| [ 0:00] ## preparing loop device....ok (/dev/loop0)
| [ 0:00] ## preparing 5 devices...lib/utils: line 212: DM_UDEV_COOKIE: unbound variable
| [ 0:00] set +vx; STACKTRACE; set -vx
| [ 0:00] ##mirror-vgreduce-removemissing.sh:104+ set +vx
| [ 0:00] ## - /lfskernel/sources/boot/LVM2.2.02.177/test/shell/mirror-vgreduce-removemissing.sh:104
| [ 0:00] ## 1 STACKTRACE() called from /lfskernel/sources/boot/LVM2.2.02.177/test/shell/mirror-vgreduce-removemissing.sh:104
| [ 0:00] <======== Info ========>
| [ 0:00] ## DMINFO:   Name             Maj Min Stat Open Targ Event  UUID                                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv5  253   6 L--w    0    1      0 TEST-@PREFIX@pv5                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv4  253   4 L--w    0    1      0 TEST-@PREFIX@pv4                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv3  253   3 L--w    0    1      0 TEST-@PREFIX@pv3                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv2  253   7 L--w    0    1      0 TEST-@PREFIX@pv2                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv1  253   5 L--w    0    1      0 TEST-@PREFIX@pv1                                                
| [ 0:00] <======== Active table ========>
| [ 0:00] ## DMTABLE:  @PREFIX@pv5: 0 163840 linear 7:0 657408
| [ 0:00] ## DMTABLE:  @PREFIX@pv4: 0 163840 linear 7:0 493568
| [ 0:00] ## DMTABLE:  @PREFIX@pv3: 0 163840 linear 7:0 329728
| [ 0:00] ## DMTABLE:  @PREFIX@pv2: 0 163840 linear 7:0 165888
| [ 0:00] ## DMTABLE:  @PREFIX@pv1: 0 163840 linear 7:0 2048
| [ 0:00] <======== Inactive table ========>
| [ 0:00] ## DMITABLE: @PREFIX@pv5: 
| [ 0:00] ## DMITABLE: @PREFIX@pv4: 
| [ 0:00] ## DMITABLE: @PREFIX@pv3: 
| [ 0:00] ## DMITABLE: @PREFIX@pv2: 
| [ 0:00] ## DMITABLE: @PREFIX@pv1: 
| [ 0:00] <======== Status ========>
| [ 0:00] ## DMSTATUS: @PREFIX@pv5: 0 163840 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv4: 0 163840 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv3: 0 163840 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv2: 0 163840 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv1: 0 163840 linear 
| [ 0:00] <======== Tree ========>
| [ 0:00] ## DMTREE:   @PREFIX@pv5 (253:6)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   @PREFIX@pv4 (253:4)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   @PREFIX@pv3 (253:3)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   @PREFIX@pv2 (253:7)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   @PREFIX@pv1 (253:5)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   LFS_vg-lfs (253:2)
| [ 0:00] ## DMTREE:    `- (8:16)
| [ 0:00] ## DMTREE:   centos-swap (253:1)
| [ 0:00] ## DMTREE:    `- (8:2)
| [ 0:00] ## DMTREE:   centos-root (253:0)
| [ 0:00] ## DMTREE:    `- (8:2)
| [ 0:00] <======== Recursive list of @TESTDIR@/dev ========>
| [ 0:00] ## LSLR:	@TESTDIR@/dev:
| [ 0:00] ## LSLR:	total 4
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 0 Feb 21 02:27 loop0
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 1 Feb 21 02:27 loop1
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 2 Feb 21 02:27 loop2
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 3 Feb 21 02:27 loop3
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 4 Feb 21 02:27 loop4
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 5 Feb 21 02:27 loop5
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 6 Feb 21 02:27 loop6
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 7 Feb 21 02:27 loop7
| [ 0:00] ## LSLR:	drwxr-xr-x 2 root root 4096 Feb 21 02:27 mapper
| [ 0:00] ## LSLR:	crw-r--r-- 1 root root 1, 3 Feb 21 02:27 testnull
| [ 0:00] ## LSLR:	
| [ 0:00] ## LSLR:	@TESTDIR@/dev/mapper:
| [ 0:00] ## LSLR:	total 0
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   5 Feb 21 02:27 @PREFIX@pv1
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   7 Feb 21 02:27 @PREFIX@pv2
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   3 Feb 21 02:27 @PREFIX@pv3
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   4 Feb 21 02:27 @PREFIX@pv4
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   6 Feb 21 02:27 @PREFIX@pv5
| [ 0:00] ## LSLR:	crw------- 1 root root  10, 236 Feb 21 02:27 control
| [ 0:00] <======== Udev DB content ========>
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-0
| [ 0:00] ## UDEV:	N: dm-0
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-0
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-0
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=0
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-1
| [ 0:00] ## UDEV:	N: dm-1
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-1
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-1
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=1
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-2
| [ 0:00] ## UDEV:	N: dm-2
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-2
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-2
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=2
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-3
| [ 0:00] ## UDEV:	N: dm-3
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-3
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-3
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=3
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-4
| [ 0:00] ## UDEV:	N: dm-4
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-4
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-4
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=4
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-5
| [ 0:00] ## UDEV:	N: dm-5
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-5
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-5
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=5
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-6
| [ 0:00] ## UDEV:	N: dm-6
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-6
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-6
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=6
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-7
| [ 0:00] ## UDEV:	N: dm-7
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-7
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-7
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=7
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/loop0
| [ 0:00] ## UDEV:	N: loop0
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/loop0
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/loop0
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=7
| [ 0:00] ## UDEV:	E: MINOR=0
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] <======== Script file "mirror-vgreduce-removemissing.sh" ========>
| [ 0:00] ## Line: 1 	 #!/usr/bin/env bash
| [ 0:00] ## Line: 2 	 
| [ 0:00] ## Line: 3 	 # Copyright (C) 2008-2017 Red Hat, Inc. All rights reserved.
| [ 0:00] ## Line: 4 	 # Copyright (C) 2007 NEC Corporation
| [ 0:00] ## Line: 5 	 #
| [ 0:00] ## Line: 6 	 # This copyrighted material is made available to anyone wishing to use,
| [ 0:00] ## Line: 7 	 # modify, copy, or redistribute it subject to the terms and conditions
| [ 0:00] ## Line: 8 	 # of the GNU General Public License v.2.
| [ 0:00] ## Line: 9 	 #
| [ 0:00] ## Line: 10 	 # You should have received a copy of the GNU General Public License
| [ 0:00] ## Line: 11 	 # along with this program; if not, write to the Free Software Foundation,
| [ 0:00] ## Line: 12 	 # Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA
| [ 0:00] ## Line: 13 	 
| [ 0:00] ## Line: 14 	 test_description="ensure that 'vgreduce --removemissing' works on mirrored LV"
| [ 0:00] ## Line: 15 	 SKIP_WITH_LVMLOCKD=1
| [ 0:00] ## Line: 16 	 SKIP_WITH_LVMPOLLD=1
| [ 0:00] ## Line: 17 	 
| [ 0:00] ## Line: 18 	 # disable lvmetad logging as it bogs down test systems
| [ 0:00] ## Line: 19 	 export LVM_TEST_LVMETAD_DEBUG_OPTS=${LVM_TEST_LVMETAD_DEBUG_OPTS-}
| [ 0:00] ## Line: 20 	 
| [ 0:00] ## Line: 21 	 . lib/inittest
| [ 0:00] ## Line: 22 	 
| [ 0:00] ## Line: 23 	 list_pvs=()
| [ 0:00] ## Line: 24 	 
| [ 0:00] ## Line: 25 	 lv_is_on_ ()
| [ 0:00] ## Line: 26 	 {
| [ 0:00] ## Line: 27 	 	local lv=$vg/$1
| [ 0:00] ## Line: 28 	 	shift
| [ 0:00] ## Line: 29 	 	local list_pvs=( "$@" )
| [ 0:00] ## Line: 30 	 
| [ 0:00] ## Line: 31 	 	echo "Check if $lv is exactly on PVs" "${list_pvs[@]}"
| [ 0:00] ## Line: 32 	 	rm -f out1 out2
| [ 0:00] ## Line: 33 	 	printf "%s\n" "${list_pvs[@]}" | sort | uniq > out1
| [ 0:00] ## Line: 34 	 
| [ 0:00] ## Line: 35 	 	lvs -a -o+devices $lv
| [ 0:00] ## Line: 36 	 	get lv_devices "$lv" | sort | uniq > out2
| [ 0:00] ## Line: 37 	 
| [ 0:00] ## Line: 38 	 	diff --ignore-blank-lines out1 out2
| [ 0:00] ## Line: 39 	 }
| [ 0:00] ## Line: 40 	 
| [ 0:00] ## Line: 41 	 mimages_are_on_ ()
| [ 0:00] ## Line: 42 	 {
| [ 0:00] ## Line: 43 	 	local lv=$1
| [ 0:00] ## Line: 44 	 	shift
| [ 0:00] ## Line: 45 	 	local list_pvs=( "$@" )
| [ 0:00] ## Line: 46 	 	local mimages=()
| [ 0:00] ## Line: 47 	 	local i
| [ 0:00] ## Line: 48 	 
| [ 0:00] ## Line: 49 	 	echo "Check if mirror images of $lv are on PVs" "${list_pvs[@]}"
| [ 0:00] ## Line: 50 	 	printf "%s\n" "${list_pvs[@]}" | sort | uniq > out1
| [ 0:00] ## Line: 51 	 
| [ 0:00] ## Line: 52 	 	get lv_field_lv_ "$vg" lv_name -a | grep "${lv}_mimage_" | tee lvs_log
| [ 0:00] ## Line: 53 	 	test -s lvs_log || return 1
| [ 0:00] ## Line: 54 	 
| [ 0:00] ## Line: 55 	 	while IFS= read -r i ; do
| [ 0:00] ## Line: 56 	 		mimages+=( "$i" )
| [ 0:00] ## Line: 57 	 	done < lvs_log
| [ 0:00] ## Line: 58 	 
| [ 0:00] ## Line: 59 	 	for i in "${mimages[@]}"; do
| [ 0:00] ## Line: 60 	 		echo "Checking $vg/$i"
| [ 0:00] ## Line: 61 	 		lvs -a -o+devices "$vg/$i"
| [ 0:00] ## Line: 62 	 	done
| [ 0:00] ## Line: 63 	 
| [ 0:00] ## Line: 64 	 	for i in "${mimages[@]}"; do
| [ 0:00] ## Line: 65 	 		get lv_devices "$vg/$i"
| [ 0:00] ## Line: 66 	 	done | sort | uniq > out2
| [ 0:00] ## Line: 67 	 
| [ 0:00] ## Line: 68 	 	diff --ignore-blank-lines out1 out2
| [ 0:00] ## Line: 69 	 }
| [ 0:00] ## Line: 70 	 
| [ 0:00] ## Line: 71 	 mirrorlog_is_on_()
| [ 0:00] ## Line: 72 	 {
| [ 0:00] ## Line: 73 	 	local lv=${1}_mlog
| [ 0:00] ## Line: 74 	 	shift
| [ 0:00] ## Line: 75 	 	lv_is_on_ $lv "$@"
| [ 0:00] ## Line: 76 	 }
| [ 0:00] ## Line: 77 	 
| [ 0:00] ## Line: 78 	 lv_is_linear_()
| [ 0:00] ## Line: 79 	 {
| [ 0:00] ## Line: 80 	 	echo "Check if $1 is linear LV (i.e. not a mirror)"
| [ 0:00] ## Line: 81 	 	get lv_field $vg/$1 "stripes,attr" | tee out
| [ 0:00] ## Line: 82 	 	grep "^1 -" out >/dev/null
| [ 0:00] ## Line: 83 	 }
| [ 0:00] ## Line: 84 	 
| [ 0:00] ## Line: 85 	 rest_pvs_()
| [ 0:00] ## Line: 86 	 {
| [ 0:00] ## Line: 87 	 	local index=$1
| [ 0:00] ## Line: 88 	 	local num=$2
| [ 0:00] ## Line: 89 	 	local rem=()
| [ 0:00] ## Line: 90 	 	local n
| [ 0:00] ## Line: 91 	 	local dev
| [ 0:00] ## Line: 92 	 
| [ 0:00] ## Line: 93 	 	for n in $(seq 1 $(( index - 1 )) ) $(seq $(( index + 1 )) $num); do
| [ 0:00] ## Line: 94 	 		eval "dev=\$dev$n"
| [ 0:00] ## Line: 95 	 		rem+=( "$dev" )
| [ 0:00] ## Line: 96 	 	done
| [ 0:00] ## Line: 97 	 
| [ 0:00] ## Line: 98 	 	printf "%s\n" "${rem[@]}"
| [ 0:00] ## Line: 99 	 }
| [ 0:00] ## Line: 100 	 
| [ 0:00] ## Line: 101 	 # ---------------------------------------------------------------------
| [ 0:00] ## Line: 102 	 # Initialize PVs and VGs
| [ 0:00] ## Line: 103 	 
| [ 0:00] ## Line: 104 	 aux prepare_pvs 5 80
| [ 0:00] ## Line: 105 	 get_devs
| [ 0:00] ## Line: 106 	 
| [ 0:00] ## Line: 107 	 vgcreate -s 64k "$vg" "${DEVICES[@]}"
| [ 0:00] ## Line: 108 	 BLOCKS=0-7
| [ 0:00] ## Line: 109 	 BLOCKS1=8-15
| [ 0:00] ## Line: 110 	 # ---------------------------------------------------------------------
| [ 0:00] ## Line: 111 	 # Common environment setup/cleanup for each sub testcases
| [ 0:00] ## Line: 112 	 
| [ 0:00] ## Line: 113 	 prepare_lvs_()
| [ 0:00] ## Line: 114 	 {
| [ 0:00] ## Line: 115 	 	lvremove -ff $vg
| [ 0:00] ## Line: 116 	 	(dm_table | not grep $vg) || \
| [ 0:00] ## Line: 117 	 		die "ERROR: lvremove did leave some some mappings in DM behind!"
| [ 0:00] ## Line: 118 	 }
| [ 0:00] ## Line: 119 	 
| [ 0:00] ## Line: 120 	 check_and_cleanup_lvs_()
| [ 0:00] ## Line: 121 	 {
| [ 0:00] ## Line: 122 	 	lvs -a -o+devices $vg
| [ 0:00] ## Line: 123 	 	prepare_lvs_
| [ 0:00] ## Line: 124 	 }
| [ 0:00] ## Line: 125 	 
| [ 0:00] ## Line: 126 	 recover_vg_()
| [ 0:00] ## Line: 127 	 {
| [ 0:00] ## Line: 128 	 	aux enable_dev "$@"
| [ 0:00] ## Line: 129 	 	pvcreate -ff "$@"
| [ 0:00] ## Line: 130 	 	vgextend $vg "$@"
| [ 0:00] ## Line: 131 	 	check_and_cleanup_lvs_
| [ 0:00] ## Line: 132 	 }
| [ 0:00] ## Line: 133 	 
| [ 0:00] ## Line: 134 	 #COMM "check environment setup/cleanup"
| [ 0:00] ## Line: 135 	 prepare_lvs_
| [ 0:00] ## Line: 136 	 check_and_cleanup_lvs_
| [ 0:00] ## Line: 137 	 
| [ 0:00] ## Line: 138 	 # ---------------------------------------------------------------------
| [ 0:00] ## Line: 139 	 # one of mirror images has failed
| [ 0:00] ## Line: 140 	 
| [ 0:00] ## Line: 141 	 #COMM "basic: fail the 2nd mirror image of 2-way mirrored LV"
| [ 0:00] ## Line: 142 	 prepare_lvs_
| [ 0:00] ## Line: 143 	 lvcreate -an -Zn -l2 --type mirror -m1 --nosync -n $lv1 $vg "$dev1" "$dev2" "$dev3":$BLOCKS
| [ 0:00] ## Line: 144 	 mimages_are_on_ $lv1 "$dev1" "$dev2"
| [ 0:00] ## Line: 145 	 mirrorlog_is_on_ $lv1 "$dev3"
| [ 0:00] ## Line: 146 	 aux disable_dev "$dev2"
| [ 0:00] ## Line: 147 	 vgreduce --removemissing --force $vg
| [ 0:00] ## Line: 148 	 lv_is_linear_ $lv1
| [ 0:00] ## Line: 149 	 lv_is_on_ $lv1 "$dev1"
| [ 0:00] ## Line: 150 	 
| [ 0:00] ## Line: 151 	 # "cleanup"
| [ 0:00] ## Line: 152 	 recover_vg_ "$dev2"
| [ 0:00] ## Line: 153 	 
| [ 0:00] ## Line: 154 	 # ---------------------------------------------------------------------
| [ 0:00] ## Line: 155 	 # LV has 3 images in flat,
| [ 0:00] ## Line: 156 	 # 1 out of 3 images fails
| [ 0:00] ## Line: 157 	 
| [ 0:00] ## Line: 158 	 #COMM test_3way_mirror_fail_1_ <PV# to fail>
| [ 0:00] ## Line: 159 	 test_3way_mirror_fail_1_()
| [ 0:00] ## Line: 160 	 {
| [ 0:00] ## Line: 161 	 	local index=$1
| [ 0:00] ## Line: 162 	 
| [ 0:00] ## Line: 163 	 	lvcreate -an -Zn -l2 --type mirror -m2 --nosync -n $lv1 $vg "$dev1" "$dev2" "$dev3" "$dev4":$BLOCKS
| [ 0:00] ## Line: 164 	 	mimages_are_on_ $lv1 "$dev1" "$dev2" "$dev3"
| [ 0:00] ## Line: 165 	 	mirrorlog_is_on_ $lv1 "$dev4"
| [ 0:00] ## Line: 166 	 	eval aux disable_dev "\$dev$index"
| [ 0:00] ## Line: 167 	 	vgreduce --removemissing --force $vg
| [ 0:00] ## Line: 168 	 
| [ 0:00] ## Line: 169 	 	list_pvs=(); while IFS= read -r line ; do
| [ 0:00] ## Line: 170 	 		list_pvs+=( "$line" )
| [ 0:00] ## Line: 171 	 	done < <( rest_pvs_ "$index" 3 )
| [ 0:00] ## Line: 172 	 
| [ 0:00] ## Line: 173 	 	mimages_are_on_ "$lv1" "${list_pvs[@]}"
| [ 0:00] ## Line: 174 	 	mirrorlog_is_on_ $lv1 "$dev4"
| [ 0:00] ## Line: 175 	 }
| [ 0:00] ## Line: 176 	 
| [ 0:00] ## Line: 177 	 for n in $(seq 1 3); do
| [ 0:00] ## Line: 178 	 	#COMM fail mirror image $(($n - 1)) of 3-way mirrored LV"
| [ 0:00] ## Line: 179 	 	prepare_lvs_
| [ 0:00] ## Line: 180 	 	test_3way_mirror_fail_1_ $n
| [ 0:00] ## Line: 181 	 	eval recover_vg_ "\$dev$n"
| [ 0:00] ## Line: 182 	 done
| [ 0:00] ## Line: 183 	 
| [ 0:00] ## Line: 184 	 # ---------------------------------------------------------------------
| [ 0:00] ## Line: 185 	 # LV has 3 images in flat,
| [ 0:00] ## Line: 186 	 # 2 out of 3 images fail
| [ 0:00] ## Line: 187 	 
| [ 0:00] ## Line: 188 	 #COMM test_3way_mirror_fail_2_ <PV# NOT to fail>
| [ 0:00] ## Line: 189 	 test_3way_mirror_fail_2_()
| [ 0:00] ## Line: 190 	 {
| [ 0:00] ## Line: 191 	 	local index=$1
| [ 0:00] ## Line: 192 	 
| [ 0:00] ## Line: 193 	 	lvcreate -an -Zn -l2 --type mirror -m2 --nosync -n $lv1 $vg "$dev1" "$dev2" "$dev3" "$dev4":$BLOCKS
| [ 0:00] ## Line: 194 	 	mimages_are_on_ $lv1 "$dev1" "$dev2" "$dev3"
| [ 0:00] ## Line: 195 	 	mirrorlog_is_on_ $lv1 "$dev4"
| [ 0:00] ## Line: 196 	 
| [ 0:00] ## Line: 197 	 	list_pvs=(); while IFS= read -r line ; do
| [ 0:00] ## Line: 198 	 		list_pvs+=( "$line" )
| [ 0:00] ## Line: 199 	 	done < <( rest_pvs_ "$index" 3 )
| [ 0:00] ## Line: 200 	 
| [ 0:00] ## Line: 201 	 	aux disable_dev "${list_pvs[@]}"
| [ 0:00] ## Line: 202 	 	vgreduce --force --removemissing $vg
| [ 0:00] ## Line: 203 	 	lv_is_linear_ $lv1
| [ 0:00] ## Line: 204 	 	eval lv_is_on_ $lv1 "\$dev$n"
| [ 0:00] ## Line: 205 	 }
| [ 0:00] ## Line: 206 	 
| [ 0:00] ## Line: 207 	 for n in $(seq 1 3); do
| [ 0:00] ## Line: 208 	 	#COMM fail mirror images other than mirror image $(($n - 1)) of 3-way mirrored LV
| [ 0:00] ## Line: 209 	 	prepare_lvs_
| [ 0:00] ## Line: 210 	 	test_3way_mirror_fail_2_ $n
| [ 0:00] ## Line: 211 	 
| [ 0:00] ## Line: 212 	 	list_pvs=(); while IFS= read -r line ; do
| [ 0:00] ## Line: 213 	 		list_pvs+=( "$line" )
| [ 0:00] ## Line: 214 	 	done < <( rest_pvs_ "$n" 3 )
| [ 0:00] ## Line: 215 	 
| [ 0:00] ## Line: 216 	 	recover_vg_ "${list_pvs[@]}"
| [ 0:00] ## Line: 217 	 done
| [ 0:00] ## Line: 218 	 
| [ 0:00] ## Line: 219 	 # ---------------------------------------------------------------------
| [ 0:00] ## Line: 220 	 # LV has 4 images, 1 of them is in the temporary mirror for syncing.
| [ 0:00] ## Line: 221 	 # 1 out of 4 images fails
| [ 0:00] ## Line: 222 	 
| [ 0:00] ## Line: 223 	 #COMM test_3way_mirror_plus_1_fail_1_ <PV# to fail>
| [ 0:00] ## Line: 224 	 test_3way_mirror_plus_1_fail_1_()
| [ 0:00] ## Line: 225 	 {
| [ 0:00] ## Line: 226 	 	local index=$1
| [ 0:00] ## Line: 227 	 
| [ 0:00] ## Line: 228 	 	lvcreate -an -Zn -l2 --type mirror -m2 -n $lv1 $vg "$dev1" "$dev2" "$dev3" "$dev5":$BLOCKS
| [ 0:00] ## Line: 229 	 	lvconvert -m+1 $vg/$lv1 "$dev4"
| [ 0:00] ## Line: 230 	 	check mirror_images_on $vg $lv1 "$dev1" "$dev2" "$dev3" "$dev4"
| [ 0:00] ## Line: 231 	 	check mirror_log_on $vg $lv1 "$dev5"
| [ 0:00] ## Line: 232 	 	eval aux disable_dev \$dev$index
| [ 0:00] ## Line: 233 	 	vgreduce --removemissing --force $vg
| [ 0:00] ## Line: 234 	 
| [ 0:00] ## Line: 235 	 	list_pvs=(); while IFS= read -r line ; do
| [ 0:00] ## Line: 236 	 		list_pvs+=( "$line" )
| [ 0:00] ## Line: 237 	 	done < <( rest_pvs_ "$index" 4 )
| [ 0:00] ## Line: 238 	 
| [ 0:00] ## Line: 239 	 	check mirror_images_on $vg $lv1 "${list_pvs[@]}"
| [ 0:00] ## Line: 240 	 	check mirror_log_on $vg $lv1 "$dev5"
| [ 0:00] ## Line: 241 	 }
| [ 0:00] ## Line: 242 	 
| [ 0:00] ## Line: 243 	 for n in $(seq 1 4); do
| [ 0:00] ## Line: 244 	 	#COMM "fail mirror image $(($n - 1)) of 4-way (1 converting) mirrored LV"
| [ 0:00] ## Line: 245 	 	prepare_lvs_
| [ 0:00] ## Line: 246 	 	test_3way_mirror_plus_1_fail_1_ $n
| [ 0:00] ## Line: 247 	 	eval recover_vg_ \$dev$n
| [ 0:00] ## Line: 248 	 done
| [ 0:00] ## Line: 249 	 
| [ 0:00] ## Line: 250 	 # ---------------------------------------------------------------------
| [ 0:00] ## Line: 251 	 # LV has 4 images, 1 of them is in the temporary mirror for syncing.
| [ 0:00] ## Line: 252 	 # 3 out of 4 images fail
| [ 0:00] ## Line: 253 	 
| [ 0:00] ## Line: 254 	 #COMM test_3way_mirror_plus_1_fail_3_ <PV# NOT to fail>
| [ 0:00] ## Line: 255 	 test_3way_mirror_plus_1_fail_3_()
| [ 0:00] ## Line: 256 	 {
| [ 0:00] ## Line: 257 	 	local index=$1
| [ 0:00] ## Line: 258 	 	local dev
| [ 0:00] ## Line: 259 	 
| [ 0:00] ## Line: 260 	 	lvcreate -an -Zn -l2 --type mirror -m2 -n $lv1 $vg "$dev1" "$dev2" "$dev3" "$dev5":$BLOCKS
| [ 0:00] ## Line: 261 	 	lvconvert -m+1 $vg/$lv1 "$dev4"
| [ 0:00] ## Line: 262 	 	check mirror_images_on $vg $lv1 "$dev1" "$dev2" "$dev3" "$dev4"
| [ 0:00] ## Line: 263 	 	check mirror_log_on $vg $lv1 "$dev5"
| [ 0:00] ## Line: 264 	 
| [ 0:00] ## Line: 265 	 	list_pvs=(); while IFS= read -r line ; do
| [ 0:00] ## Line: 266 	 		list_pvs+=( "$line" )
| [ 0:00] ## Line: 267 	 	done < <( rest_pvs_ "$index" 4 )
| [ 0:00] ## Line: 268 	 
| [ 0:00] ## Line: 269 	 	aux disable_dev "${list_pvs[@]}"
| [ 0:00] ## Line: 270 	 	vgreduce --removemissing --force $vg
| [ 0:00] ## Line: 271 	 	lvs -a -o+devices $vg
| [ 0:00] ## Line: 272 	 	eval dev=\$dev$n
| [ 0:00] ## Line: 273 	 	check linear $vg $lv1
| [ 0:00] ## Line: 274 	 	check lv_on $vg $lv1 "$dev"
| [ 0:00] ## Line: 275 	 }
| [ 0:00] ## Line: 276 	 
| [ 0:00] ## Line: 277 	 for n in $(seq 1 4); do
| [ 0:00] ## Line: 278 	 	#COMM "fail mirror images other than mirror image $(($n - 1)) of 4-way (1 converting) mirrored LV"
| [ 0:00] ## Line: 279 	 	prepare_lvs_
| [ 0:00] ## Line: 280 	 	test_3way_mirror_plus_1_fail_3_ $n
| [ 0:00] ## Line: 281 	 
| [ 0:00] ## Line: 282 	 	list_pvs=(); while IFS= read -r line ; do
| [ 0:00] ## Line: 283 	 		list_pvs+=( "$line" )
| [ 0:00] ## Line: 284 	 	done < <( rest_pvs_ "$n" 4 )
| [ 0:00] ## Line: 285 	 
| [ 0:00] ## Line: 286 	 	recover_vg_ "${list_pvs[@]}"
| [ 0:00] ## Line: 287 	 done
| [ 0:00] ## Line: 288 	 
| [ 0:00] ## Line: 289 	 # ---------------------------------------------------------------------
| [ 0:00] ## Line: 290 	 # LV has 4 images, 2 of them are in the temporary mirror for syncing.
| [ 0:00] ## Line: 291 	 # 1 out of 4 images fail
| [ 0:00] ## Line: 292 	 
| [ 0:00] ## Line: 293 	 # test_2way_mirror_plus_2_fail_1_ <PV# to fail>
| [ 0:00] ## Line: 294 	 test_2way_mirror_plus_2_fail_1_()
| [ 0:00] ## Line: 295 	 {
| [ 0:00] ## Line: 296 	 	local index=$1
| [ 0:00] ## Line: 297 	 
| [ 0:00] ## Line: 298 	 	lvcreate -an -Zn -l2 --type mirror -m1 -n $lv1 $vg "$dev1" "$dev2" "$dev5":$BLOCKS
| [ 0:00] ## Line: 299 	 	lvconvert -m+2 $vg/$lv1 "$dev3" "$dev4"
| [ 0:00] ## Line: 300 	 	mimages_are_on_ $lv1 "$dev1" "$dev2" "$dev3" "$dev4"
| [ 0:00] ## Line: 301 	 	mirrorlog_is_on_ $lv1 "$dev5"
| [ 0:00] ## Line: 302 	 	eval aux disable_dev \$dev$n
| [ 0:00] ## Line: 303 	 	vgreduce --removemissing --force $vg
| [ 0:00] ## Line: 304 	 
| [ 0:00] ## Line: 305 	 	list_pvs=(); while IFS= read -r line ; do
| [ 0:00] ## Line: 306 	 		list_pvs+=( "$line" )
| [ 0:00] ## Line: 307 	 	done < <( rest_pvs_ "$index" 4 )
| [ 0:00] ## Line: 308 	 
| [ 0:00] ## Line: 309 	 	mimages_are_on_ "$lv1" "${list_pvs[@]}"
| [ 0:00] ## Line: 310 	 	mirrorlog_is_on_ $lv1 "$dev5"
| [ 0:00] ## Line: 311 	 }
| [ 0:00] ## Line: 312 	 
| [ 0:00] ## Line: 313 	 for n in $(seq 1 4); do
| [ 0:00] ## Line: 314 	 	#COMM "fail mirror image $(($n - 1)) of 4-way (2 converting) mirrored LV"
| [ 0:00] ## Line: 315 	 	prepare_lvs_
| [ 0:00] ## Line: 316 	 	test_2way_mirror_plus_2_fail_1_ $n
| [ 0:00] ## Line: 317 	 	eval recover_vg_ "\$dev$n"
| [ 0:00] ## Line: 318 	 done
| [ 0:00] ## Line: 319 	 
| [ 0:00] ## Line: 320 	 # ---------------------------------------------------------------------
| [ 0:00] ## Line: 321 	 # LV has 4 images, 2 of them are in the temporary mirror for syncing.
| [ 0:00] ## Line: 322 	 # 3 out of 4 images fail
| [ 0:00] ## Line: 323 	 
| [ 0:00] ## Line: 324 	 # test_2way_mirror_plus_2_fail_3_ <PV# NOT to fail>
| [ 0:00] ## Line: 325 	 test_2way_mirror_plus_2_fail_3_()
| [ 0:00] ## Line: 326 	 {
| [ 0:00] ## Line: 327 	 	local index=$1
| [ 0:00] ## Line: 328 	 	local dev
| [ 0:00] ## Line: 329 	 
| [ 0:00] ## Line: 330 	 	lvcreate -an -Zn -l2 --type mirror -m1 -n $lv1 $vg "$dev1" "$dev2" "$dev5":$BLOCKS
| [ 0:00] ## Line: 331 	 	lvconvert -m+2 $vg/$lv1 "$dev3" "$dev4"
| [ 0:00] ## Line: 332 	 	mimages_are_on_ $lv1 "$dev1" "$dev2" "$dev3" "$dev4"
| [ 0:00] ## Line: 333 	 	mirrorlog_is_on_ $lv1 "$dev5"
| [ 0:00] ## Line: 334 	 
| [ 0:00] ## Line: 335 	 	list_pvs=(); while IFS= read -r line ; do
| [ 0:00] ## Line: 336 	 		list_pvs+=( "$line" )
| [ 0:00] ## Line: 337 	 	done < <( rest_pvs_ "$index" 4 )
| [ 0:00] ## Line: 338 	 
| [ 0:00] ## Line: 339 	 	aux disable_dev "${list_pvs[@]}"
| [ 0:00] ## Line: 340 	 	vgreduce --removemissing --force $vg
| [ 0:00] ## Line: 341 	 	lvs -a -o+devices $vg
| [ 0:00] ## Line: 342 	 	eval dev=\$dev$n
| [ 0:00] ## Line: 343 	 	not mimages_are_on_ $lv1 "$dev"
| [ 0:00] ## Line: 344 	 	lv_is_on_ $lv1 "$dev"
| [ 0:00] ## Line: 345 	 	not mirrorlog_is_on_ $lv1 "$dev5"
| [ 0:00] ## Line: 346 	 }
| [ 0:00] ## Line: 347 	 
| [ 0:00] ## Line: 348 	 for n in $(seq 1 4); do
| [ 0:00] ## Line: 349 	 	#COMM "fail mirror images other than mirror image $(($n - 1)) of 4-way (2 converting) mirrored LV"
| [ 0:00] ## Line: 350 	 	prepare_lvs_
| [ 0:00] ## Line: 351 	 	test_2way_mirror_plus_2_fail_3_ $n
| [ 0:00] ## Line: 352 	 
| [ 0:00] ## Line: 353 	 	list_pvs=(); while IFS= read -r line ; do
| [ 0:00] ## Line: 354 	 		list_pvs+=( "$line" )
| [ 0:00] ## Line: 355 	 	done < <( rest_pvs_ "$n" 4 )
| [ 0:00] ## Line: 356 	 
| [ 0:00] ## Line: 357 	 	recover_vg_ "${list_pvs[@]}"
| [ 0:00] ## Line: 358 	 done
| [ 0:00] ## Line: 359 	 
| [ 0:00] ## Line: 360 	 # ---------------------------------------------------------------------
| [ 0:00] ## Line: 361 	 # log device is gone (flat mirror and stacked mirror)
| [ 0:00] ## Line: 362 	 
| [ 0:00] ## Line: 363 	 #COMM "fail mirror log of 2-way mirrored LV"
| [ 0:00] ## Line: 364 	 prepare_lvs_
| [ 0:00] ## Line: 365 	 lvcreate -aey -l2 --type mirror -m1 -n $lv1 $vg "$dev1" "$dev2" "$dev5":$BLOCKS
| [ 0:00] ## Line: 366 	 mimages_are_on_ $lv1 "$dev1" "$dev2"
| [ 0:00] ## Line: 367 	 mirrorlog_is_on_ $lv1 "$dev5"
| [ 0:00] ## Line: 368 	 aux disable_dev "$dev5"
| [ 0:00] ## Line: 369 	 vgreduce --removemissing --force $vg
| [ 0:00] ## Line: 370 	 mimages_are_on_ $lv1 "$dev1" "$dev2"
| [ 0:00] ## Line: 371 	 not mirrorlog_is_on_ $lv1 "$dev5"
| [ 0:00] ## Line: 372 	 recover_vg_ "$dev5"
| [ 0:00] ## Line: 373 	 
| [ 0:00] ## Line: 374 	 #COMM "fail mirror log of 3-way (1 converting) mirrored LV"
| [ 0:00] ## Line: 375 	 prepare_lvs_
| [ 0:00] ## Line: 376 	 lvcreate -aey -l2 --type mirror -m1 -n $lv1 $vg "$dev1" "$dev2" "$dev5":$BLOCKS
| [ 0:00] ## Line: 377 	 lvconvert -m+1 $vg/$lv1 "$dev3"
| [ 0:00] ## Line: 378 	 mimages_are_on_ $lv1 "$dev1" "$dev2" "$dev3"
| [ 0:00] ## Line: 379 	 mirrorlog_is_on_ $lv1 "$dev5"
| [ 0:00] ## Line: 380 	 aux disable_dev "$dev5"
| [ 0:00] ## Line: 381 	 vgreduce --removemissing --force $vg
| [ 0:00] ## Line: 382 	 mimages_are_on_ $lv1 "$dev1" "$dev2" "$dev3"
| [ 0:00] ## Line: 383 	 not mirrorlog_is_on_ $lv1 "$dev5"
| [ 0:00] ## Line: 384 	 recover_vg_ "$dev5"
| [ 0:00] ## Line: 385 	 
| [ 0:00] ## Line: 386 	 # ---------------------------------------------------------------------
| [ 0:00] ## Line: 387 	 # all images are gone (flat mirror and stacked mirror)
| [ 0:00] ## Line: 388 	 
| [ 0:00] ## Line: 389 	 #COMM "fail all mirror images of 2-way mirrored LV"
| [ 0:00] ## Line: 390 	 prepare_lvs_
| [ 0:00] ## Line: 391 	 lvcreate -an -Zn -l2 --type mirror -m1 --nosync -n $lv1 $vg "$dev1" "$dev2" "$dev5":$BLOCKS
| [ 0:00] ## Line: 392 	 mimages_are_on_ $lv1 "$dev1" "$dev2"
| [ 0:00] ## Line: 393 	 mirrorlog_is_on_ $lv1 "$dev5"
| [ 0:00] ## Line: 394 	 aux disable_dev "$dev1" "$dev2"
| [ 0:00] ## Line: 395 	 vgreduce --removemissing --force $vg
| [ 0:00] ## Line: 396 	 not lvs $vg/$lv1
| [ 0:00] ## Line: 397 	 recover_vg_ "$dev1" "$dev2"
| [ 0:00] ## Line: 398 	 
| [ 0:00] ## Line: 399 	 #COMM "fail all mirror images of 3-way (1 converting) mirrored LV"
| [ 0:00] ## Line: 400 	 prepare_lvs_
| [ 0:00] ## Line: 401 	 lvcreate -an -Zn -l2 --type mirror -m1 -n $lv1 $vg "$dev1" "$dev2" "$dev5":$BLOCKS
| [ 0:00] ## Line: 402 	 lvconvert -m+1 $vg/$lv1 "$dev3"
| [ 0:00] ## Line: 403 	 mimages_are_on_ $lv1 "$dev1" "$dev2" "$dev3"
| [ 0:00] ## Line: 404 	 mirrorlog_is_on_ $lv1 "$dev5"
| [ 0:00] ## Line: 405 	 aux disable_dev "$dev1" "$dev2" "$dev3"
| [ 0:00] ## Line: 406 	 vgreduce --removemissing --force $vg
| [ 0:00] ## Line: 407 	 not lvs $vg/$lv1
| [ 0:00] ## Line: 408 	 recover_vg_ "$dev1" "$dev2" "$dev3"
| [ 0:00] ## Line: 409 	 
| [ 0:00] ## Line: 410 	 # ---------------------------------------------------------------------
| [ 0:00] ## Line: 411 	 # Multiple LVs
| [ 0:00] ## Line: 412 	 
| [ 0:00] ## Line: 413 	 #COMM "fail a mirror image of one of mirrored LV"
| [ 0:00] ## Line: 414 	 prepare_lvs_
| [ 0:00] ## Line: 415 	 lvcreate -an -Zn -l2 --type mirror -m1 --nosync -n $lv1 $vg "$dev1" "$dev2" "$dev5":$BLOCKS
| [ 0:00] ## Line: 416 	 lvcreate -an -Zn -l2 --type mirror -m1 --nosync -n $lv2 $vg "$dev3" "$dev4" "$dev5":$BLOCKS1
| [ 0:00] ## Line: 417 	 mimages_are_on_ $lv1 "$dev1" "$dev2"
| [ 0:00] ## Line: 418 	 mimages_are_on_ $lv2 "$dev3" "$dev4"
| [ 0:00] ## Line: 419 	 mirrorlog_is_on_ $lv1 "$dev5"
| [ 0:00] ## Line: 420 	 mirrorlog_is_on_ $lv2 "$dev5"
| [ 0:00] ## Line: 421 	 aux disable_dev "$dev2"
| [ 0:00] ## Line: 422 	 vgreduce --removemissing --force $vg
| [ 0:00] ## Line: 423 	 mimages_are_on_ $lv2 "$dev3" "$dev4"
| [ 0:00] ## Line: 424 	 mirrorlog_is_on_ $lv2 "$dev5"
| [ 0:00] ## Line: 425 	 lv_is_linear_ $lv1
| [ 0:00] ## Line: 426 	 lv_is_on_ $lv1 "$dev1"
| [ 0:00] ## Line: 427 	 recover_vg_ "$dev2"
| [ 0:00] ## Line: 428 	 
| [ 0:00] ## Line: 429 	 #COMM "fail mirror images, one for each mirrored LV"
| [ 0:00] ## Line: 430 	 prepare_lvs_
| [ 0:00] ## Line: 431 	 lvcreate -an -Zn -l2 --type mirror -m1 --nosync -n $lv1 $vg "$dev1" "$dev2" "$dev5":$BLOCKS
| [ 0:00] ## Line: 432 	 lvcreate -an -Zn -l2 --type mirror -m1 --nosync -n $lv2 $vg "$dev3" "$dev4" "$dev5":$BLOCKS1
| [ 0:00] ## Line: 433 	 mimages_are_on_ $lv1 "$dev1" "$dev2"
| [ 0:00] ## Line: 434 	 mimages_are_on_ $lv2 "$dev3" "$dev4"
| [ 0:00] ## Line: 435 	 mirrorlog_is_on_ $lv1 "$dev5"
| [ 0:00] ## Line: 436 	 mirrorlog_is_on_ $lv2 "$dev5"
| [ 0:00] ## Line: 437 	 aux disable_dev "$dev2"
| [ 0:00] ## Line: 438 	 aux disable_dev "$dev4"
| [ 0:00] ## Line: 439 	 vgreduce --removemissing --force $vg
| [ 0:00] ## Line: 440 	 lv_is_linear_ $lv1
| [ 0:00] ## Line: 441 	 lv_is_on_ $lv1 "$dev1"
| [ 0:00] ## Line: 442 	 lv_is_linear_ $lv2
| [ 0:00] ## Line: 443 	 lv_is_on_ $lv2 "$dev3"
| [ 0:00] ## Line: 444 	 recover_vg_ "$dev2" "$dev4"
| [ 0:00] ## Line: 445 	 
| [ 0:00] ## Line: 446 	 # ---------------------------------------------------------------------
| [ 0:00] ## Line: 447 	 # no failure
| [ 0:00] ## Line: 448 	 
| [ 0:00] ## Line: 449 	 #COMM "no failures"
| [ 0:00] ## Line: 450 	 prepare_lvs_
| [ 0:00] ## Line: 451 	 lvcreate -an -Zn -l2 --type mirror -m1 --nosync -n $lv1 $vg "$dev1" "$dev2" "$dev5":$BLOCKS
| [ 0:00] ## Line: 452 	 mimages_are_on_ $lv1 "$dev1" "$dev2"
| [ 0:00] ## Line: 453 	 mirrorlog_is_on_ $lv1 "$dev5"
| [ 0:00] ## Line: 454 	 vgreduce --removemissing --force $vg
| [ 0:00] ## Line: 455 	 mimages_are_on_ $lv1 "$dev1" "$dev2"
| [ 0:00] ## Line: 456 	 mirrorlog_is_on_ $lv1 "$dev5"
| [ 0:00] ## Line: 457 	 check_and_cleanup_lvs_
| [ 0:00] ## Line: 458 	 
| [ 0:00] ## Line: 459 	 # ---------------------------------------------------------------------
| [ 0:00] aux teardown
| [ 0:00] #mirror-vgreduce-removemissing.sh:1+ aux teardown
| [ 0:00] ## teardown.........ok
###       failed: [ndev-vanilla] shell/mirror-vgreduce-removemissing.sh
###       passed: [ndev-vanilla] shell/name-mangling.sh

| [ 0:00] Library version:   1.02.146 (2017-12-18)
| [ 0:00] Driver version:    4.35.0
| [ 0:00] Kernel is Linux localhost.localdomain 3.10.0-693.11.1.el7.x86_64 #1 SMP Mon Dec 4 23:52:40 UTC 2017 x86_64 GNU/Linux
| [ 0:00] Selinux mode is not installed.
| [ 0:00]               total        used        free      shared  buff/cache   available
| [ 0:00] Mem:           7822        1080        4145          10        2596        6435
| [ 0:00] Swap:          4095           0        4095
| [ 0:00] Filesystem      Size  Used Avail Use% Mounted on
| [ 0:00] /dev/sdc1        18G  8.4G  8.4G  50% /
| [ 0:00] /dev/sdd1        51G  6.1G   43G  13% /lfskernel
| [ 0:00] devtmpfs        3.9G     0  3.9G   0% /dev
| [ 0:00] tmpfs           3.9G     0  3.9G   0% /run
| [ 0:00] @TESTDIR=/tmp/LVMTEST11829.RAy9s2htM1
| [ 0:00] @PREFIX=LVMTEST11829
| [ 0:00] ## LVMCONF: activation {
| [ 0:00] ## LVMCONF:     checks = 1
| [ 0:00] ## LVMCONF:     monitoring = 0
| [ 0:00] ## LVMCONF:     polling_interval = 1
| [ 0:00] ## LVMCONF:     raid_region_size = 512
| [ 0:00] ## LVMCONF:     retry_deactivation = 1
| [ 0:00] ## LVMCONF:     snapshot_autoextend_percent = 50
| [ 0:00] ## LVMCONF:     snapshot_autoextend_threshold = 50
| [ 0:00] ## LVMCONF:     udev_rules = 1
| [ 0:00] ## LVMCONF:     udev_sync = 1
| [ 0:00] ## LVMCONF:     verify_udev_operations = 1
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: allocation {
| [ 0:00] ## LVMCONF:     wipe_signatures_when_zeroing_new_lvs = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: backup {
| [ 0:00] ## LVMCONF:     archive = 0
| [ 0:00] ## LVMCONF:     backup = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: devices {
| [ 0:00] ## LVMCONF:     cache_dir = "@TESTDIR@/etc"
| [ 0:00] ## LVMCONF:     default_data_alignment = 1
| [ 0:00] ## LVMCONF:     dir = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     filter = "a|.*|"
| [ 0:00] ## LVMCONF:     global_filter = [ "a|@TESTDIR@/dev/mapper/@PREFIX@.*pv[0-9_]*$|", "r|.*|" ]
| [ 0:00] ## LVMCONF:     md_component_detection  = 0
| [ 0:00] ## LVMCONF:     scan = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     sysfs_scan = 1
| [ 0:00] ## LVMCONF:     write_cache_state = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: dmeventd {
| [ 0:00] ## LVMCONF:     executable = "/sources/boot/LVM2.2.02.177/test/lib/dmeventd"
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: global {
| [ 0:00] ## LVMCONF:     abort_on_internal_errors = 1
| [ 0:00] ## LVMCONF:     cache_check_executable = "/usr/sbin/cache_check"
| [ 0:00] ## LVMCONF:     cache_dump_executable = "/usr/sbin/cache_dump"
| [ 0:00] ## LVMCONF:     cache_repair_executable = "/usr/sbin/cache_repair"
| [ 0:00] ## LVMCONF:     detect_internal_vg_cache_corruption = 1
| [ 0:00] ## LVMCONF:     fallback_to_local_locking = 0
| [ 0:00] ## LVMCONF:     fsadm_executable = "/sources/boot/LVM2.2.02.177/test/lib/fsadm"
| [ 0:00] ## LVMCONF:     library_dir = "@TESTDIR@/lib"
| [ 0:00] ## LVMCONF:     locking_dir = "@TESTDIR@/var/lock/lvm"
| [ 0:00] ## LVMCONF:     locking_type=1
| [ 0:00] ## LVMCONF:     notify_dbus = 0
| [ 0:00] ## LVMCONF:     si_unit_consistency = 1
| [ 0:00] ## LVMCONF:     thin_check_executable = "/usr/sbin/thin_check"
| [ 0:00] ## LVMCONF:     thin_dump_executable = "/usr/sbin/thin_dump"
| [ 0:00] ## LVMCONF:     thin_repair_executable = "/usr/sbin/thin_repair"
| [ 0:00] ## LVMCONF:     use_lvmetad = 0
| [ 0:00] ## LVMCONF:     use_lvmlockd = 0
| [ 0:00] ## LVMCONF:     use_lvmpolld = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: log {
| [ 0:00] ## LVMCONF:     activation = 1
| [ 0:00] ## LVMCONF:     file = "@TESTDIR@/debug.log"
| [ 0:00] ## LVMCONF:     indent = 1
| [ 0:00] ## LVMCONF:     level = 9
| [ 0:00] ## LVMCONF:     overwrite = 1
| [ 0:00] ## LVMCONF:     syslog = 0
| [ 0:00] ## LVMCONF:     verbose = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] <======== Processing test: "nomda-missing.sh" ========>
| [ 0:00] 
| [ 0:00] aux prepare_devs 4
| [ 0:00] #nomda-missing.sh:18+ aux prepare_devs 4
| [ 0:00] ## preparing loop device....ok (/dev/loop0)
| [ 0:00] ## preparing 4 devices...lib/utils: line 212: DM_UDEV_COOKIE: unbound variable
| [ 0:00] set +vx; STACKTRACE; set -vx
| [ 0:00] ##nomda-missing.sh:18+ set +vx
| [ 0:00] ## - /lfskernel/sources/boot/LVM2.2.02.177/test/shell/nomda-missing.sh:18
| [ 0:00] ## 1 STACKTRACE() called from /lfskernel/sources/boot/LVM2.2.02.177/test/shell/nomda-missing.sh:18
| [ 0:00] <======== Info ========>
| [ 0:00] ## DMINFO:   Name             Maj Min Stat Open Targ Event  UUID                                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv4  253   5 L--w    0    1      0 TEST-@PREFIX@pv4                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv3  253   4 L--w    0    1      0 TEST-@PREFIX@pv3                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv2  253   3 L--w    0    1      0 TEST-@PREFIX@pv2                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv1  253   6 L--w    0    1      0 TEST-@PREFIX@pv1                                                
| [ 0:00] <======== Active table ========>
| [ 0:00] ## DMTABLE:  @PREFIX@pv4: 0 69632 linear 7:0 210944
| [ 0:00] ## DMTABLE:  @PREFIX@pv3: 0 69632 linear 7:0 141312
| [ 0:00] ## DMTABLE:  @PREFIX@pv2: 0 69632 linear 7:0 71680
| [ 0:00] ## DMTABLE:  @PREFIX@pv1: 0 69632 linear 7:0 2048
| [ 0:00] <======== Inactive table ========>
| [ 0:00] ## DMITABLE: @PREFIX@pv4: 
| [ 0:00] ## DMITABLE: @PREFIX@pv3: 
| [ 0:00] ## DMITABLE: @PREFIX@pv2: 
| [ 0:00] ## DMITABLE: @PREFIX@pv1: 
| [ 0:00] <======== Status ========>
| [ 0:00] ## DMSTATUS: @PREFIX@pv4: 0 69632 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv3: 0 69632 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv2: 0 69632 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv1: 0 69632 linear 
| [ 0:00] <======== Tree ========>
| [ 0:00] ## DMTREE:   @PREFIX@pv4 (253:5)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   @PREFIX@pv3 (253:4)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   @PREFIX@pv2 (253:3)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   @PREFIX@pv1 (253:6)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   LFS_vg-lfs (253:2)
| [ 0:00] ## DMTREE:    `- (8:16)
| [ 0:00] ## DMTREE:   centos-swap (253:1)
| [ 0:00] ## DMTREE:    `- (8:2)
| [ 0:00] ## DMTREE:   centos-root (253:0)
| [ 0:00] ## DMTREE:    `- (8:2)
| [ 0:00] <======== Recursive list of @TESTDIR@/dev ========>
| [ 0:00] ## LSLR:	@TESTDIR@/dev:
| [ 0:00] ## LSLR:	total 4
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 0 Feb 21 02:27 loop0
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 1 Feb 21 02:27 loop1
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 2 Feb 21 02:27 loop2
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 3 Feb 21 02:27 loop3
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 4 Feb 21 02:27 loop4
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 5 Feb 21 02:27 loop5
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 6 Feb 21 02:27 loop6
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 7 Feb 21 02:27 loop7
| [ 0:00] ## LSLR:	drwxr-xr-x 2 root root 4096 Feb 21 02:27 mapper
| [ 0:00] ## LSLR:	crw-r--r-- 1 root root 1, 3 Feb 21 02:27 testnull
| [ 0:00] ## LSLR:	
| [ 0:00] ## LSLR:	@TESTDIR@/dev/mapper:
| [ 0:00] ## LSLR:	total 0
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   6 Feb 21 02:27 @PREFIX@pv1
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   3 Feb 21 02:27 @PREFIX@pv2
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   4 Feb 21 02:27 @PREFIX@pv3
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   5 Feb 21 02:27 @PREFIX@pv4
| [ 0:00] ## LSLR:	crw------- 1 root root  10, 236 Feb 21 02:27 control
| [ 0:00] <======== Udev DB content ========>
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-0
| [ 0:01] ## UDEV:	N: dm-0
| [ 0:01] ## UDEV:	E: DEVNAME=/dev/dm-0
| [ 0:01] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-0
| [ 0:01] ## UDEV:	E: DEVTYPE=disk
| [ 0:01] ## UDEV:	E: MAJOR=253
| [ 0:01] ## UDEV:	E: MINOR=0
| [ 0:01] ## UDEV:	E: SUBSYSTEM=block
| [ 0:01] ## UDEV:	
| [ 0:01] ## UDEV:	P: /devices/virtual/block/dm-1
| [ 0:01] ## UDEV:	N: dm-1
| [ 0:01] ## UDEV:	E: DEVNAME=/dev/dm-1
| [ 0:01] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-1
| [ 0:01] ## UDEV:	E: DEVTYPE=disk
| [ 0:01] ## UDEV:	E: MAJOR=253
| [ 0:01] ## UDEV:	E: MINOR=1
| [ 0:01] ## UDEV:	E: SUBSYSTEM=block
| [ 0:01] ## UDEV:	
| [ 0:01] ## UDEV:	P: /devices/virtual/block/dm-2
| [ 0:01] ## UDEV:	N: dm-2
| [ 0:01] ## UDEV:	E: DEVNAME=/dev/dm-2
| [ 0:01] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-2
| [ 0:01] ## UDEV:	E: DEVTYPE=disk
| [ 0:01] ## UDEV:	E: MAJOR=253
| [ 0:01] ## UDEV:	E: MINOR=2
| [ 0:01] ## UDEV:	E: SUBSYSTEM=block
| [ 0:01] ## UDEV:	
| [ 0:01] ## UDEV:	P: /devices/virtual/block/dm-3
| [ 0:01] ## UDEV:	N: dm-3
| [ 0:01] ## UDEV:	E: DEVNAME=/dev/dm-3
| [ 0:01] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-3
| [ 0:01] ## UDEV:	E: DEVTYPE=disk
| [ 0:01] ## UDEV:	E: MAJOR=253
| [ 0:01] ## UDEV:	E: MINOR=3
| [ 0:01] ## UDEV:	E: SUBSYSTEM=block
| [ 0:01] ## UDEV:	
| [ 0:01] ## UDEV:	P: /devices/virtual/block/dm-4
| [ 0:01] ## UDEV:	N: dm-4
| [ 0:01] ## UDEV:	E: DEVNAME=/dev/dm-4
| [ 0:01] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-4
| [ 0:01] ## UDEV:	E: DEVTYPE=disk
| [ 0:01] ## UDEV:	E: MAJOR=253
| [ 0:01] ## UDEV:	E: MINOR=4
| [ 0:01] ## UDEV:	E: SUBSYSTEM=block
| [ 0:01] ## UDEV:	
| [ 0:01] ## UDEV:	P: /devices/virtual/block/dm-5
| [ 0:01] ## UDEV:	N: dm-5
| [ 0:01] ## UDEV:	E: DEVNAME=/dev/dm-5
| [ 0:01] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-5
| [ 0:01] ## UDEV:	E: DEVTYPE=disk
| [ 0:01] ## UDEV:	E: MAJOR=253
| [ 0:01] ## UDEV:	E: MINOR=5
| [ 0:01] ## UDEV:	E: SUBSYSTEM=block
| [ 0:01] ## UDEV:	
| [ 0:01] ## UDEV:	P: /devices/virtual/block/dm-6
| [ 0:01] ## UDEV:	N: dm-6
| [ 0:01] ## UDEV:	E: DEVNAME=/dev/dm-6
| [ 0:01] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-6
| [ 0:01] ## UDEV:	E: DEVTYPE=disk
| [ 0:01] ## UDEV:	E: MAJOR=253
| [ 0:01] ## UDEV:	E: MINOR=6
| [ 0:01] ## UDEV:	E: SUBSYSTEM=block
| [ 0:01] ## UDEV:	
| [ 0:01] ## UDEV:	P: /devices/virtual/block/loop0
| [ 0:01] ## UDEV:	N: loop0
| [ 0:01] ## UDEV:	E: DEVNAME=/dev/loop0
| [ 0:01] ## UDEV:	E: DEVPATH=/devices/virtual/block/loop0
| [ 0:01] ## UDEV:	E: DEVTYPE=disk
| [ 0:01] ## UDEV:	E: MAJOR=7
| [ 0:01] ## UDEV:	E: MINOR=0
| [ 0:01] ## UDEV:	E: SUBSYSTEM=block
| [ 0:01] ## UDEV:	
| [ 0:01] <======== Script file "nomda-missing.sh" ========>
| [ 0:01] ## Line: 1 	 #!/usr/bin/env bash
| [ 0:01] ## Line: 2 	 
| [ 0:01] ## Line: 3 	 # Copyright (C) 2010 Red Hat, Inc. All rights reserved.
| [ 0:01] ## Line: 4 	 #
| [ 0:01] ## Line: 5 	 # This copyrighted material is made available to anyone wishing to use,
| [ 0:01] ## Line: 6 	 # modify, copy, or redistribute it subject to the terms and conditions
| [ 0:01] ## Line: 7 	 # of the GNU General Public License v.2.
| [ 0:01] ## Line: 8 	 #
| [ 0:01] ## Line: 9 	 # You should have received a copy of the GNU General Public License
| [ 0:01] ## Line: 10 	 # along with this program; if not, write to the Free Software Foundation,
| [ 0:01] ## Line: 11 	 # Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA
| [ 0:01] ## Line: 12 	 
| [ 0:01] ## Line: 13 	 SKIP_WITH_LVMLOCKD=1
| [ 0:01] ## Line: 14 	 SKIP_WITH_LVMPOLLD=1
| [ 0:01] ## Line: 15 	 
| [ 0:01] ## Line: 16 	 . lib/inittest
| [ 0:01] ## Line: 17 	 
| [ 0:01] ## Line: 18 	 aux prepare_devs 4
| [ 0:01] ## Line: 19 	 pvcreate "$dev1" "$dev2"
| [ 0:01] ## Line: 20 	 pvcreate --metadatacopies 0 "$dev3" "$dev4"
| [ 0:01] ## Line: 21 	 vgcreate $vg "$dev1" "$dev2" "$dev3" "$dev4"
| [ 0:01] ## Line: 22 	 
| [ 0:01] ## Line: 23 	 lvcreate -l1 -n linear1 $vg "$dev1"
| [ 0:01] ## Line: 24 	 lvcreate -l1 -n linear2 $vg "$dev2"
| [ 0:01] ## Line: 25 	 lvcreate -l2 -n linear12 $vg "$dev1":4 "$dev2":4
| [ 0:01] ## Line: 26 	 
| [ 0:01] ## Line: 27 	 lvcreate -aey -l1 -n origin1 $vg "$dev1"
| [ 0:01] ## Line: 28 	 lvcreate -s $vg/origin1 -l1 -n s_napshot2 "$dev2"
| [ 0:01] ## Line: 29 	 
| [ 0:01] ## Line: 30 	 lvcreate -aey -l1 --type mirror -m1 -n mirror12 --mirrorlog core $vg "$dev1" "$dev2"
| [ 0:01] ## Line: 31 	 lvcreate -aey -l1 --type mirror -m1 -n mirror123 $vg "$dev1" "$dev2" "$dev3"
| [ 0:01] ## Line: 32 	 
| [ 0:01] ## Line: 33 	 vgchange -a n $vg
| [ 0:01] ## Line: 34 	 aux disable_dev "$dev1"
| [ 0:01] ## Line: 35 	 not vgchange -aey $vg
| [ 0:01] ## Line: 36 	 not vgck $vg
| [ 0:01] ## Line: 37 	 
| [ 0:01] ## Line: 38 	 check inactive $vg linear1
| [ 0:01] ## Line: 39 	 check active $vg linear2
| [ 0:01] ## Line: 40 	 check inactive $vg origin1
| [ 0:01] ## Line: 41 	 check inactive $vg s_napshot2
| [ 0:01] ## Line: 42 	 check inactive $vg linear12
| [ 0:01] ## Line: 43 	 check inactive $vg mirror12
| [ 0:01] ## Line: 44 	 check inactive $vg mirror123
| [ 0:01] ## Line: 45 	 
| [ 0:01] ## Line: 46 	 vgchange -a n $vg
| [ 0:01] ## Line: 47 	 aux enable_dev "$dev1"
| [ 0:01] ## Line: 48 	 aux disable_dev "$dev2"
| [ 0:01] ## Line: 49 	 not vgchange -aey $vg
| [ 0:01] ## Line: 50 	 not vgck $vg
| [ 0:01] ## Line: 51 	 
| [ 0:01] ## Line: 52 	 check active $vg linear1
| [ 0:01] ## Line: 53 	 check inactive $vg linear2
| [ 0:01] ## Line: 54 	 check inactive $vg linear12
| [ 0:01] ## Line: 55 	 check inactive $vg origin1
| [ 0:01] ## Line: 56 	 check inactive $vg s_napshot2
| [ 0:01] ## Line: 57 	 check inactive $vg mirror12
| [ 0:01] ## Line: 58 	 check inactive $vg mirror123
| [ 0:01] ## Line: 59 	 
| [ 0:01] ## Line: 60 	 vgchange -a n $vg
| [ 0:01] ## Line: 61 	 aux enable_dev "$dev2"
| [ 0:01] ## Line: 62 	 aux disable_dev "$dev3"
| [ 0:01] ## Line: 63 	 not vgchange -aey $vg
| [ 0:01] ## Line: 64 	 not vgck $vg
| [ 0:01] ## Line: 65 	 
| [ 0:01] ## Line: 66 	 check active $vg origin1
| [ 0:01] ## Line: 67 	 check active $vg s_napshot2
| [ 0:01] ## Line: 68 	 check active $vg linear1
| [ 0:01] ## Line: 69 	 check active $vg linear2
| [ 0:01] ## Line: 70 	 check active $vg linear12
| [ 0:01] ## Line: 71 	 check inactive $vg mirror123
| [ 0:01] ## Line: 72 	 check active $vg mirror12
| [ 0:01] ## Line: 73 	 
| [ 0:01] ## Line: 74 	 vgchange -a n $vg
| [ 0:01] ## Line: 75 	 aux enable_dev "$dev3"
| [ 0:01] ## Line: 76 	 aux disable_dev "$dev4"
| [ 0:01] ## Line: 77 	 vgchange -aey $vg
| [ 0:01] ## Line: 78 	 not vgck $vg
| [ 0:01] ## Line: 79 	 
| [ 0:01] ## Line: 80 	 check active $vg origin1
| [ 0:01] ## Line: 81 	 check active $vg s_napshot2
| [ 0:01] ## Line: 82 	 check active $vg linear1
| [ 0:01] ## Line: 83 	 check active $vg linear2
| [ 0:01] ## Line: 84 	 check active $vg linear12
| [ 0:01] ## Line: 85 	 check active $vg mirror12
| [ 0:01] ## Line: 86 	 check active $vg mirror123
| [ 0:01] ## Line: 87 	 
| [ 0:01] ## Line: 88 	 vgremove -ff $vg
| [ 0:01] aux teardown
| [ 0:01] #nomda-missing.sh:1+ aux teardown
| [ 0:01] ## teardown.........ok
###       failed: [ndev-vanilla] shell/nomda-missing.sh

| [ 0:00] Library version:   1.02.146 (2017-12-18)
| [ 0:00] Driver version:    4.35.0
| [ 0:00] Kernel is Linux localhost.localdomain 3.10.0-693.11.1.el7.x86_64 #1 SMP Mon Dec 4 23:52:40 UTC 2017 x86_64 GNU/Linux
| [ 0:00] Selinux mode is not installed.
| [ 0:00]               total        used        free      shared  buff/cache   available
| [ 0:00] Mem:           7822        1080        4145          10        2596        6436
| [ 0:00] Swap:          4095           0        4095
| [ 0:00] Filesystem      Size  Used Avail Use% Mounted on
| [ 0:00] /dev/sdc1        18G  8.4G  8.4G  50% /
| [ 0:00] /dev/sdd1        51G  6.1G   43G  13% /lfskernel
| [ 0:00] devtmpfs        3.9G     0  3.9G   0% /dev
| [ 0:00] tmpfs           3.9G     0  3.9G   0% /run
| [ 0:00] @TESTDIR=/tmp/LVMTEST12021.QoVIdwAaX5
| [ 0:00] @PREFIX=LVMTEST12021
| [ 0:00] ## LVMCONF: activation {
| [ 0:00] ## LVMCONF:     checks = 1
| [ 0:00] ## LVMCONF:     monitoring = 0
| [ 0:00] ## LVMCONF:     polling_interval = 1
| [ 0:00] ## LVMCONF:     raid_region_size = 512
| [ 0:00] ## LVMCONF:     retry_deactivation = 1
| [ 0:00] ## LVMCONF:     snapshot_autoextend_percent = 50
| [ 0:00] ## LVMCONF:     snapshot_autoextend_threshold = 50
| [ 0:00] ## LVMCONF:     udev_rules = 1
| [ 0:00] ## LVMCONF:     udev_sync = 1
| [ 0:00] ## LVMCONF:     verify_udev_operations = 1
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: allocation {
| [ 0:00] ## LVMCONF:     wipe_signatures_when_zeroing_new_lvs = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: backup {
| [ 0:00] ## LVMCONF:     archive = 0
| [ 0:00] ## LVMCONF:     backup = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: devices {
| [ 0:00] ## LVMCONF:     cache_dir = "@TESTDIR@/etc"
| [ 0:00] ## LVMCONF:     default_data_alignment = 1
| [ 0:00] ## LVMCONF:     dir = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     filter = "a|.*|"
| [ 0:00] ## LVMCONF:     global_filter = [ "a|@TESTDIR@/dev/mapper/@PREFIX@.*pv[0-9_]*$|", "r|.*|" ]
| [ 0:00] ## LVMCONF:     md_component_detection  = 0
| [ 0:00] ## LVMCONF:     scan = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     sysfs_scan = 1
| [ 0:00] ## LVMCONF:     write_cache_state = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: dmeventd {
| [ 0:00] ## LVMCONF:     executable = "/sources/boot/LVM2.2.02.177/test/lib/dmeventd"
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: global {
| [ 0:00] ## LVMCONF:     abort_on_internal_errors = 1
| [ 0:00] ## LVMCONF:     cache_check_executable = "/usr/sbin/cache_check"
| [ 0:00] ## LVMCONF:     cache_dump_executable = "/usr/sbin/cache_dump"
| [ 0:00] ## LVMCONF:     cache_repair_executable = "/usr/sbin/cache_repair"
| [ 0:00] ## LVMCONF:     detect_internal_vg_cache_corruption = 1
| [ 0:00] ## LVMCONF:     fallback_to_local_locking = 0
| [ 0:00] ## LVMCONF:     fsadm_executable = "/sources/boot/LVM2.2.02.177/test/lib/fsadm"
| [ 0:00] ## LVMCONF:     library_dir = "@TESTDIR@/lib"
| [ 0:00] ## LVMCONF:     locking_dir = "@TESTDIR@/var/lock/lvm"
| [ 0:00] ## LVMCONF:     locking_type=1
| [ 0:00] ## LVMCONF:     notify_dbus = 0
| [ 0:00] ## LVMCONF:     si_unit_consistency = 1
| [ 0:00] ## LVMCONF:     thin_check_executable = "/usr/sbin/thin_check"
| [ 0:00] ## LVMCONF:     thin_dump_executable = "/usr/sbin/thin_dump"
| [ 0:00] ## LVMCONF:     thin_repair_executable = "/usr/sbin/thin_repair"
| [ 0:00] ## LVMCONF:     use_lvmetad = 0
| [ 0:00] ## LVMCONF:     use_lvmlockd = 0
| [ 0:00] ## LVMCONF:     use_lvmpolld = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: log {
| [ 0:00] ## LVMCONF:     activation = 1
| [ 0:00] ## LVMCONF:     file = "@TESTDIR@/debug.log"
| [ 0:00] ## LVMCONF:     indent = 1
| [ 0:00] ## LVMCONF:     level = 9
| [ 0:00] ## LVMCONF:     overwrite = 1
| [ 0:00] ## LVMCONF:     syslog = 0
| [ 0:00] ## LVMCONF:     verbose = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] <======== Processing test: "nomda-restoremissing.sh" ========>
| [ 0:00] 
| [ 0:00] aux prepare_vg 3
| [ 0:00] #nomda-restoremissing.sh:18+ aux prepare_vg 3
| [ 0:00] ## preparing loop device....ok (/dev/loop0)
| [ 0:00] ## preparing 3 devices...lib/utils: line 212: DM_UDEV_COOKIE: unbound variable
| [ 0:00] set +vx; STACKTRACE; set -vx
| [ 0:00] ##nomda-restoremissing.sh:18+ set +vx
| [ 0:00] ## - /lfskernel/sources/boot/LVM2.2.02.177/test/shell/nomda-restoremissing.sh:18
| [ 0:00] ## 1 STACKTRACE() called from /lfskernel/sources/boot/LVM2.2.02.177/test/shell/nomda-restoremissing.sh:18
| [ 0:00] <======== Info ========>
| [ 0:00] ## DMINFO:   Name             Maj Min Stat Open Targ Event  UUID                                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv3  253   4 L--w    0    1      0 TEST-@PREFIX@pv3                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv2  253   3 L--w    0    1      0 TEST-@PREFIX@pv2                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv1  253   5 L--w    0    1      0 TEST-@PREFIX@pv1                                                
| [ 0:00] <======== Active table ========>
| [ 0:00] ## DMTABLE:  @PREFIX@pv3: 0 69632 linear 7:0 141312
| [ 0:00] ## DMTABLE:  @PREFIX@pv2: 0 69632 linear 7:0 71680
| [ 0:00] ## DMTABLE:  @PREFIX@pv1: 0 69632 linear 7:0 2048
| [ 0:00] <======== Inactive table ========>
| [ 0:00] ## DMITABLE: @PREFIX@pv3: 
| [ 0:00] ## DMITABLE: @PREFIX@pv2: 
| [ 0:00] ## DMITABLE: @PREFIX@pv1: 
| [ 0:00] <======== Status ========>
| [ 0:00] ## DMSTATUS: @PREFIX@pv3: 0 69632 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv2: 0 69632 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv1: 0 69632 linear 
| [ 0:00] <======== Tree ========>
| [ 0:00] ## DMTREE:   @PREFIX@pv3 (253:4)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   @PREFIX@pv2 (253:3)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   @PREFIX@pv1 (253:5)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   LFS_vg-lfs (253:2)
| [ 0:00] ## DMTREE:    `- (8:16)
| [ 0:00] ## DMTREE:   centos-swap (253:1)
| [ 0:00] ## DMTREE:    `- (8:2)
| [ 0:00] ## DMTREE:   centos-root (253:0)
| [ 0:00] ## DMTREE:    `- (8:2)
| [ 0:00] <======== Recursive list of @TESTDIR@/dev ========>
| [ 0:00] ## LSLR:	@TESTDIR@/dev:
| [ 0:00] ## LSLR:	total 4
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 0 Feb 21 02:27 loop0
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 1 Feb 21 02:27 loop1
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 2 Feb 21 02:27 loop2
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 3 Feb 21 02:27 loop3
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 4 Feb 21 02:27 loop4
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 5 Feb 21 02:27 loop5
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 6 Feb 21 02:27 loop6
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 7 Feb 21 02:27 loop7
| [ 0:00] ## LSLR:	drwxr-xr-x 2 root root 4096 Feb 21 02:27 mapper
| [ 0:00] ## LSLR:	crw-r--r-- 1 root root 1, 3 Feb 21 02:27 testnull
| [ 0:00] ## LSLR:	
| [ 0:00] ## LSLR:	@TESTDIR@/dev/mapper:
| [ 0:00] ## LSLR:	total 0
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   5 Feb 21 02:27 @PREFIX@pv1
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   3 Feb 21 02:27 @PREFIX@pv2
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   4 Feb 21 02:27 @PREFIX@pv3
| [ 0:00] ## LSLR:	crw------- 1 root root  10, 236 Feb 21 02:27 control
| [ 0:00] <======== Udev DB content ========>
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-0
| [ 0:00] ## UDEV:	N: dm-0
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-0
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-0
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=0
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-1
| [ 0:00] ## UDEV:	N: dm-1
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-1
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-1
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=1
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-2
| [ 0:00] ## UDEV:	N: dm-2
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-2
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-2
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=2
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-3
| [ 0:00] ## UDEV:	N: dm-3
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-3
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-3
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=3
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-4
| [ 0:00] ## UDEV:	N: dm-4
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-4
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-4
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=4
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-5
| [ 0:00] ## UDEV:	N: dm-5
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-5
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-5
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=5
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/loop0
| [ 0:00] ## UDEV:	N: loop0
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/loop0
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/loop0
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=7
| [ 0:00] ## UDEV:	E: MINOR=0
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] <======== Script file "nomda-restoremissing.sh" ========>
| [ 0:00] ## Line: 1 	 #!/usr/bin/env bash
| [ 0:00] ## Line: 2 	 
| [ 0:00] ## Line: 3 	 # Copyright (C) 2010 Red Hat, Inc. All rights reserved.
| [ 0:00] ## Line: 4 	 #
| [ 0:00] ## Line: 5 	 # This copyrighted material is made available to anyone wishing to use,
| [ 0:00] ## Line: 6 	 # modify, copy, or redistribute it subject to the terms and conditions
| [ 0:00] ## Line: 7 	 # of the GNU General Public License v.2.
| [ 0:00] ## Line: 8 	 #
| [ 0:00] ## Line: 9 	 # You should have received a copy of the GNU General Public License
| [ 0:00] ## Line: 10 	 # along with this program; if not, write to the Free Software Foundation,
| [ 0:00] ## Line: 11 	 # Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA
| [ 0:00] ## Line: 12 	 
| [ 0:00] ## Line: 13 	 SKIP_WITH_LVMLOCKD=1
| [ 0:00] ## Line: 14 	 SKIP_WITH_LVMPOLLD=1
| [ 0:00] ## Line: 15 	 
| [ 0:00] ## Line: 16 	 . lib/inittest
| [ 0:00] ## Line: 17 	 
| [ 0:00] ## Line: 18 	 aux prepare_vg 3
| [ 0:00] ## Line: 19 	 
| [ 0:00] ## Line: 20 	 pvchange --metadataignore y "$dev1"
| [ 0:00] ## Line: 21 	 
| [ 0:00] ## Line: 22 	 lvcreate -aey --type mirror -m 1 -l 1 -n mirror $vg
| [ 0:00] ## Line: 23 	 lvchange -a n $vg/mirror
| [ 0:00] ## Line: 24 	 lvcreate -l 1 -n lv1 $vg "$dev1"
| [ 0:00] ## Line: 25 	 
| [ 0:00] ## Line: 26 	 # try to just change metadata; we expect the new version (with MISSING_PV set
| [ 0:00] ## Line: 27 	 # on the reappeared volume) to be written out to the previously missing PV
| [ 0:00] ## Line: 28 	 aux disable_dev "$dev1"
| [ 0:00] ## Line: 29 	 lvremove $vg/mirror
| [ 0:00] ## Line: 30 	 not vgck $vg 2>&1 | tee log
| [ 0:00] ## Line: 31 	 grep "missing 1 physical volume" log
| [ 0:00] ## Line: 32 	 not lvcreate -aey --type mirror -m 1 -l 1 -n mirror $vg # write operations fail
| [ 0:00] ## Line: 33 	 aux enable_dev "$dev1"
| [ 0:00] ## Line: 34 	 lvcreate -aey --type mirror -m 1 -l 1 -n mirror $vg # no MDA => automatically restored
| [ 0:00] ## Line: 35 	 vgck $vg
| [ 0:00] ## Line: 36 	 
| [ 0:00] ## Line: 37 	 vgremove -ff $vg
| [ 0:00] aux teardown
| [ 0:00] #nomda-restoremissing.sh:1+ aux teardown
| [ 0:00] ## teardown.........ok
###       failed: [ndev-vanilla] shell/nomda-restoremissing.sh

| [ 0:00] Library version:   1.02.146 (2017-12-18)
| [ 0:00] Driver version:    4.35.0
| [ 0:00] Kernel is Linux localhost.localdomain 3.10.0-693.11.1.el7.x86_64 #1 SMP Mon Dec 4 23:52:40 UTC 2017 x86_64 GNU/Linux
| [ 0:00] Selinux mode is not installed.
| [ 0:00]               total        used        free      shared  buff/cache   available
| [ 0:00] Mem:           7822        1080        4145          10        2596        6436
| [ 0:00] Swap:          4095           0        4095
| [ 0:00] Filesystem      Size  Used Avail Use% Mounted on
| [ 0:00] /dev/sdc1        18G  8.4G  8.4G  50% /
| [ 0:00] /dev/sdd1        51G  6.1G   43G  13% /lfskernel
| [ 0:00] devtmpfs        3.9G     0  3.9G   0% /dev
| [ 0:00] tmpfs           3.9G     0  3.9G   0% /run
| [ 0:00] @TESTDIR=/tmp/LVMTEST12211.VVTgPTbhzP
| [ 0:00] @PREFIX=LVMTEST12211
| [ 0:00] ## LVMCONF: activation {
| [ 0:00] ## LVMCONF:     checks = 1
| [ 0:00] ## LVMCONF:     monitoring = 0
| [ 0:00] ## LVMCONF:     polling_interval = 1
| [ 0:00] ## LVMCONF:     raid_region_size = 512
| [ 0:00] ## LVMCONF:     retry_deactivation = 1
| [ 0:00] ## LVMCONF:     snapshot_autoextend_percent = 50
| [ 0:00] ## LVMCONF:     snapshot_autoextend_threshold = 50
| [ 0:00] ## LVMCONF:     udev_rules = 1
| [ 0:00] ## LVMCONF:     udev_sync = 1
| [ 0:00] ## LVMCONF:     verify_udev_operations = 1
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: allocation {
| [ 0:00] ## LVMCONF:     wipe_signatures_when_zeroing_new_lvs = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: backup {
| [ 0:00] ## LVMCONF:     archive = 0
| [ 0:00] ## LVMCONF:     backup = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: devices {
| [ 0:00] ## LVMCONF:     cache_dir = "@TESTDIR@/etc"
| [ 0:00] ## LVMCONF:     default_data_alignment = 1
| [ 0:00] ## LVMCONF:     dir = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     filter = "a|.*|"
| [ 0:00] ## LVMCONF:     global_filter = [ "a|@TESTDIR@/dev/mapper/@PREFIX@.*pv[0-9_]*$|", "r|.*|" ]
| [ 0:00] ## LVMCONF:     md_component_detection  = 0
| [ 0:00] ## LVMCONF:     scan = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     sysfs_scan = 1
| [ 0:00] ## LVMCONF:     write_cache_state = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: dmeventd {
| [ 0:00] ## LVMCONF:     executable = "/sources/boot/LVM2.2.02.177/test/lib/dmeventd"
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: global {
| [ 0:00] ## LVMCONF:     abort_on_internal_errors = 1
| [ 0:00] ## LVMCONF:     cache_check_executable = "/usr/sbin/cache_check"
| [ 0:00] ## LVMCONF:     cache_dump_executable = "/usr/sbin/cache_dump"
| [ 0:00] ## LVMCONF:     cache_repair_executable = "/usr/sbin/cache_repair"
| [ 0:00] ## LVMCONF:     detect_internal_vg_cache_corruption = 1
| [ 0:00] ## LVMCONF:     fallback_to_local_locking = 0
| [ 0:00] ## LVMCONF:     fsadm_executable = "/sources/boot/LVM2.2.02.177/test/lib/fsadm"
| [ 0:00] ## LVMCONF:     library_dir = "@TESTDIR@/lib"
| [ 0:00] ## LVMCONF:     locking_dir = "@TESTDIR@/var/lock/lvm"
| [ 0:00] ## LVMCONF:     locking_type=1
| [ 0:00] ## LVMCONF:     notify_dbus = 0
| [ 0:00] ## LVMCONF:     si_unit_consistency = 1
| [ 0:00] ## LVMCONF:     thin_check_executable = "/usr/sbin/thin_check"
| [ 0:00] ## LVMCONF:     thin_dump_executable = "/usr/sbin/thin_dump"
| [ 0:00] ## LVMCONF:     thin_repair_executable = "/usr/sbin/thin_repair"
| [ 0:00] ## LVMCONF:     use_lvmetad = 0
| [ 0:00] ## LVMCONF:     use_lvmlockd = 0
| [ 0:00] ## LVMCONF:     use_lvmpolld = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: log {
| [ 0:00] ## LVMCONF:     activation = 1
| [ 0:00] ## LVMCONF:     file = "@TESTDIR@/debug.log"
| [ 0:00] ## LVMCONF:     indent = 1
| [ 0:00] ## LVMCONF:     level = 9
| [ 0:00] ## LVMCONF:     overwrite = 1
| [ 0:00] ## LVMCONF:     syslog = 0
| [ 0:00] ## LVMCONF:     verbose = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] <======== Processing test: "orphan-ondisk.sh" ========>
| [ 0:00] 
| [ 0:00] aux prepare_vg 2
| [ 0:00] #orphan-ondisk.sh:18+ aux prepare_vg 2
| [ 0:00] ## preparing loop device....ok (/dev/loop0)
| [ 0:00] ## preparing 2 devices...lib/utils: line 212: DM_UDEV_COOKIE: unbound variable
| [ 0:00] set +vx; STACKTRACE; set -vx
| [ 0:00] ##orphan-ondisk.sh:18+ set +vx
| [ 0:00] ## - /lfskernel/sources/boot/LVM2.2.02.177/test/shell/orphan-ondisk.sh:18
| [ 0:00] ## 1 STACKTRACE() called from /lfskernel/sources/boot/LVM2.2.02.177/test/shell/orphan-ondisk.sh:18
| [ 0:00] <======== Info ========>
| [ 0:00] ## DMINFO:   Name             Maj Min Stat Open Targ Event  UUID                                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv2  253   3 L--w    0    1      0 TEST-@PREFIX@pv2                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv1  253   4 L--w    0    1      0 TEST-@PREFIX@pv1                                                
| [ 0:00] <======== Active table ========>
| [ 0:00] ## DMTABLE:  @PREFIX@pv2: 0 69632 linear 7:0 71680
| [ 0:00] ## DMTABLE:  @PREFIX@pv1: 0 69632 linear 7:0 2048
| [ 0:00] <======== Inactive table ========>
| [ 0:00] ## DMITABLE: @PREFIX@pv2: 
| [ 0:00] ## DMITABLE: @PREFIX@pv1: 
| [ 0:00] <======== Status ========>
| [ 0:00] ## DMSTATUS: @PREFIX@pv2: 0 69632 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv1: 0 69632 linear 
| [ 0:00] <======== Tree ========>
| [ 0:00] ## DMTREE:   @PREFIX@pv2 (253:3)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   @PREFIX@pv1 (253:4)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   LFS_vg-lfs (253:2)
| [ 0:00] ## DMTREE:    `- (8:16)
| [ 0:00] ## DMTREE:   centos-swap (253:1)
| [ 0:00] ## DMTREE:    `- (8:2)
| [ 0:00] ## DMTREE:   centos-root (253:0)
| [ 0:00] ## DMTREE:    `- (8:2)
| [ 0:00] <======== Recursive list of @TESTDIR@/dev ========>
| [ 0:00] ## LSLR:	@TESTDIR@/dev:
| [ 0:00] ## LSLR:	total 4
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 0 Feb 21 02:27 loop0
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 1 Feb 21 02:27 loop1
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 2 Feb 21 02:27 loop2
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 3 Feb 21 02:27 loop3
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 4 Feb 21 02:27 loop4
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 5 Feb 21 02:27 loop5
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 6 Feb 21 02:27 loop6
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 7 Feb 21 02:27 loop7
| [ 0:00] ## LSLR:	drwxr-xr-x 2 root root 4096 Feb 21 02:27 mapper
| [ 0:00] ## LSLR:	crw-r--r-- 1 root root 1, 3 Feb 21 02:27 testnull
| [ 0:00] ## LSLR:	
| [ 0:00] ## LSLR:	@TESTDIR@/dev/mapper:
| [ 0:00] ## LSLR:	total 0
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   4 Feb 21 02:27 @PREFIX@pv1
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   3 Feb 21 02:27 @PREFIX@pv2
| [ 0:00] ## LSLR:	crw------- 1 root root  10, 236 Feb 21 02:27 control
| [ 0:00] <======== Udev DB content ========>
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-0
| [ 0:00] ## UDEV:	N: dm-0
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-0
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-0
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=0
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-1
| [ 0:00] ## UDEV:	N: dm-1
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-1
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-1
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=1
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-2
| [ 0:00] ## UDEV:	N: dm-2
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-2
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-2
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=2
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-3
| [ 0:00] ## UDEV:	N: dm-3
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-3
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-3
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=3
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-4
| [ 0:00] ## UDEV:	N: dm-4
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-4
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-4
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=4
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/loop0
| [ 0:00] ## UDEV:	N: loop0
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/loop0
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/loop0
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=7
| [ 0:00] ## UDEV:	E: MINOR=0
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] <======== Script file "orphan-ondisk.sh" ========>
| [ 0:00] ## Line: 1 	 #!/usr/bin/env bash
| [ 0:00] ## Line: 2 	 
| [ 0:00] ## Line: 3 	 # Copyright (C) 2010 Red Hat, Inc. All rights reserved.
| [ 0:00] ## Line: 4 	 #
| [ 0:00] ## Line: 5 	 # This copyrighted material is made available to anyone wishing to use,
| [ 0:00] ## Line: 6 	 # modify, copy, or redistribute it subject to the terms and conditions
| [ 0:00] ## Line: 7 	 # of the GNU General Public License v.2.
| [ 0:00] ## Line: 8 	 #
| [ 0:00] ## Line: 9 	 # You should have received a copy of the GNU General Public License
| [ 0:00] ## Line: 10 	 # along with this program; if not, write to the Free Software Foundation,
| [ 0:00] ## Line: 11 	 # Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA
| [ 0:00] ## Line: 12 	 
| [ 0:00] ## Line: 13 	 SKIP_WITH_LVMLOCKD=1
| [ 0:00] ## Line: 14 	 SKIP_WITH_LVMPOLLD=1
| [ 0:00] ## Line: 15 	 
| [ 0:00] ## Line: 16 	 . lib/inittest
| [ 0:00] ## Line: 17 	 
| [ 0:00] ## Line: 18 	 aux prepare_vg 2
| [ 0:00] ## Line: 19 	 vgreduce $vg "$dev1" 2>&1 | not grep -i 'parse error'
| [ 0:00] aux teardown
| [ 0:00] #orphan-ondisk.sh:1+ aux teardown
| [ 0:00] ## teardown.........ok
###       failed: [ndev-vanilla] shell/orphan-ondisk.sh

| [ 0:00] Library version:   1.02.146 (2017-12-18)
| [ 0:00] Driver version:    4.35.0
| [ 0:00] Kernel is Linux localhost.localdomain 3.10.0-693.11.1.el7.x86_64 #1 SMP Mon Dec 4 23:52:40 UTC 2017 x86_64 GNU/Linux
| [ 0:00] Selinux mode is not installed.
| [ 0:00]               total        used        free      shared  buff/cache   available
| [ 0:00] Mem:           7822        1079        4145          10        2597        6436
| [ 0:00] Swap:          4095           0        4095
| [ 0:00] Filesystem      Size  Used Avail Use% Mounted on
| [ 0:00] /dev/sdc1        18G  8.4G  8.4G  50% /
| [ 0:00] /dev/sdd1        51G  6.1G   43G  13% /lfskernel
| [ 0:00] devtmpfs        3.9G     0  3.9G   0% /dev
| [ 0:00] tmpfs           3.9G     0  3.9G   0% /run
| [ 0:00] @TESTDIR=/tmp/LVMTEST12390.ENH6j229JU
| [ 0:00] @PREFIX=LVMTEST12390
| [ 0:00] ## LVMCONF: activation {
| [ 0:00] ## LVMCONF:     checks = 1
| [ 0:00] ## LVMCONF:     monitoring = 0
| [ 0:00] ## LVMCONF:     polling_interval = 1
| [ 0:00] ## LVMCONF:     raid_region_size = 512
| [ 0:00] ## LVMCONF:     retry_deactivation = 1
| [ 0:00] ## LVMCONF:     snapshot_autoextend_percent = 50
| [ 0:00] ## LVMCONF:     snapshot_autoextend_threshold = 50
| [ 0:00] ## LVMCONF:     udev_rules = 1
| [ 0:00] ## LVMCONF:     udev_sync = 1
| [ 0:00] ## LVMCONF:     verify_udev_operations = 1
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: allocation {
| [ 0:00] ## LVMCONF:     wipe_signatures_when_zeroing_new_lvs = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: backup {
| [ 0:00] ## LVMCONF:     archive = 0
| [ 0:00] ## LVMCONF:     backup = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: devices {
| [ 0:00] ## LVMCONF:     cache_dir = "@TESTDIR@/etc"
| [ 0:00] ## LVMCONF:     default_data_alignment = 1
| [ 0:00] ## LVMCONF:     dir = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     filter = "a|.*|"
| [ 0:00] ## LVMCONF:     global_filter = [ "a|@TESTDIR@/dev/mapper/@PREFIX@.*pv[0-9_]*$|", "r|.*|" ]
| [ 0:00] ## LVMCONF:     md_component_detection  = 0
| [ 0:00] ## LVMCONF:     scan = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     sysfs_scan = 1
| [ 0:00] ## LVMCONF:     write_cache_state = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: dmeventd {
| [ 0:00] ## LVMCONF:     executable = "/sources/boot/LVM2.2.02.177/test/lib/dmeventd"
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: global {
| [ 0:00] ## LVMCONF:     abort_on_internal_errors = 1
| [ 0:00] ## LVMCONF:     cache_check_executable = "/usr/sbin/cache_check"
| [ 0:00] ## LVMCONF:     cache_dump_executable = "/usr/sbin/cache_dump"
| [ 0:00] ## LVMCONF:     cache_repair_executable = "/usr/sbin/cache_repair"
| [ 0:00] ## LVMCONF:     detect_internal_vg_cache_corruption = 1
| [ 0:00] ## LVMCONF:     fallback_to_local_locking = 0
| [ 0:00] ## LVMCONF:     fsadm_executable = "/sources/boot/LVM2.2.02.177/test/lib/fsadm"
| [ 0:00] ## LVMCONF:     library_dir = "@TESTDIR@/lib"
| [ 0:00] ## LVMCONF:     locking_dir = "@TESTDIR@/var/lock/lvm"
| [ 0:00] ## LVMCONF:     locking_type=1
| [ 0:00] ## LVMCONF:     notify_dbus = 0
| [ 0:00] ## LVMCONF:     si_unit_consistency = 1
| [ 0:00] ## LVMCONF:     thin_check_executable = "/usr/sbin/thin_check"
| [ 0:00] ## LVMCONF:     thin_dump_executable = "/usr/sbin/thin_dump"
| [ 0:00] ## LVMCONF:     thin_repair_executable = "/usr/sbin/thin_repair"
| [ 0:00] ## LVMCONF:     use_lvmetad = 0
| [ 0:00] ## LVMCONF:     use_lvmlockd = 0
| [ 0:00] ## LVMCONF:     use_lvmpolld = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: log {
| [ 0:00] ## LVMCONF:     activation = 1
| [ 0:00] ## LVMCONF:     file = "@TESTDIR@/debug.log"
| [ 0:00] ## LVMCONF:     indent = 1
| [ 0:00] ## LVMCONF:     level = 9
| [ 0:00] ## LVMCONF:     overwrite = 1
| [ 0:00] ## LVMCONF:     syslog = 0
| [ 0:00] ## LVMCONF:     verbose = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] <======== Processing test: "pool-labels.sh" ========>
| [ 0:00] 
| [ 0:00] env printf "" || skip # skip if printf is not available
| [ 0:00] #pool-labels.sh:20+ env printf ''
| [ 0:00] 
| [ 0:00] # create the old GFS pool labeled linear devices
| [ 0:00] create_pool_label_()
| [ 0:00] {
| [ 0:00]   # FIXME
| [ 0:00]   # echo -e is bashism, dash builtin sh doesn't do \xNN in printf either
| [ 0:00]   # printf comes from coreutils, and is probably not posix either
| [ 0:00]   env printf "\x01\x16\x70\x06\x5f\xcf\xff\xb9\xf8\x24\x8apool1" | dd of="$2" bs=5 seek=1 conv=notrunc
| [ 0:00]   env printf "\x04\x01\x03\x00\x00\x00\x01\x00\x00\x00\x00\x00\x00\x00\x02\x00\x00\x00\x0$1\x68\x01\x16\x70\x00\x00\x00\x00\x00\x06\x5f\xd0" | dd of=$2 bs=273 seek=1 conv=notrunc
| [ 0:00]   aux notify_lvmetad "$2"
| [ 0:00] }
| [ 0:00] 
| [ 0:00] 
| [ 0:00] aux prepare_devs 2
| [ 0:00] #pool-labels.sh:34+ aux prepare_devs 2
| [ 0:00] ## preparing loop device....ok (/dev/loop0)
| [ 0:00] ## preparing 2 devices...lib/utils: line 212: DM_UDEV_COOKIE: unbound variable
| [ 0:00] set +vx; STACKTRACE; set -vx
| [ 0:00] ##pool-labels.sh:34+ set +vx
| [ 0:00] ## - /lfskernel/sources/boot/LVM2.2.02.177/test/shell/pool-labels.sh:34
| [ 0:00] ## 1 STACKTRACE() called from /lfskernel/sources/boot/LVM2.2.02.177/test/shell/pool-labels.sh:34
| [ 0:00] <======== Info ========>
| [ 0:00] ## DMINFO:   Name             Maj Min Stat Open Targ Event  UUID                                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv2  253   4 L--w    0    1      0 TEST-@PREFIX@pv2                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv1  253   3 L--w    0    1      0 TEST-@PREFIX@pv1                                                
| [ 0:00] <======== Active table ========>
| [ 0:00] ## DMTABLE:  @PREFIX@pv2: 0 69632 linear 7:0 71680
| [ 0:00] ## DMTABLE:  @PREFIX@pv1: 0 69632 linear 7:0 2048
| [ 0:00] <======== Inactive table ========>
| [ 0:00] ## DMITABLE: @PREFIX@pv2: 
| [ 0:00] ## DMITABLE: @PREFIX@pv1: 
| [ 0:00] <======== Status ========>
| [ 0:00] ## DMSTATUS: @PREFIX@pv2: 0 69632 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv1: 0 69632 linear 
| [ 0:00] <======== Tree ========>
| [ 0:00] ## DMTREE:   @PREFIX@pv2 (253:4)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   @PREFIX@pv1 (253:3)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   LFS_vg-lfs (253:2)
| [ 0:00] ## DMTREE:    `- (8:16)
| [ 0:00] ## DMTREE:   centos-swap (253:1)
| [ 0:00] ## DMTREE:    `- (8:2)
| [ 0:00] ## DMTREE:   centos-root (253:0)
| [ 0:00] ## DMTREE:    `- (8:2)
| [ 0:00] <======== Recursive list of @TESTDIR@/dev ========>
| [ 0:00] ## LSLR:	@TESTDIR@/dev:
| [ 0:00] ## LSLR:	total 4
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 0 Feb 21 02:27 loop0
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 1 Feb 21 02:27 loop1
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 2 Feb 21 02:27 loop2
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 3 Feb 21 02:27 loop3
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 4 Feb 21 02:27 loop4
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 5 Feb 21 02:27 loop5
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 6 Feb 21 02:27 loop6
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 7 Feb 21 02:27 loop7
| [ 0:00] ## LSLR:	drwxr-xr-x 2 root root 4096 Feb 21 02:27 mapper
| [ 0:00] ## LSLR:	crw-r--r-- 1 root root 1, 3 Feb 21 02:27 testnull
| [ 0:00] ## LSLR:	
| [ 0:00] ## LSLR:	@TESTDIR@/dev/mapper:
| [ 0:00] ## LSLR:	total 0
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   3 Feb 21 02:27 @PREFIX@pv1
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   4 Feb 21 02:27 @PREFIX@pv2
| [ 0:00] ## LSLR:	crw------- 1 root root  10, 236 Feb 21 02:27 control
| [ 0:00] <======== Udev DB content ========>
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-0
| [ 0:00] ## UDEV:	N: dm-0
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-0
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-0
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=0
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-1
| [ 0:00] ## UDEV:	N: dm-1
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-1
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-1
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=1
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-2
| [ 0:00] ## UDEV:	N: dm-2
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-2
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-2
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=2
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-3
| [ 0:00] ## UDEV:	N: dm-3
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-3
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-3
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=3
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-4
| [ 0:00] ## UDEV:	N: dm-4
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-4
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-4
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=4
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/loop0
| [ 0:00] ## UDEV:	N: loop0
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/loop0
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/loop0
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=7
| [ 0:00] ## UDEV:	E: MINOR=0
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] <======== Script file "pool-labels.sh" ========>
| [ 0:00] ## Line: 1 	 #!/usr/bin/env bash
| [ 0:00] ## Line: 2 	 
| [ 0:00] ## Line: 3 	 # Copyright (C) 2007 Red Hat, Inc. All rights reserved.
| [ 0:00] ## Line: 4 	 #
| [ 0:00] ## Line: 5 	 # This copyrighted material is made available to anyone wishing to use,
| [ 0:00] ## Line: 6 	 # modify, copy, or redistribute it subject to the terms and conditions
| [ 0:00] ## Line: 7 	 # of the GNU General Public License v.2.
| [ 0:00] ## Line: 8 	 #
| [ 0:00] ## Line: 9 	 # You should have received a copy of the GNU General Public License
| [ 0:00] ## Line: 10 	 # along with this program; if not, write to the Free Software Foundation,
| [ 0:00] ## Line: 11 	 # Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA
| [ 0:00] ## Line: 12 	 
| [ 0:00] ## Line: 13 	 # lvmetad does not handle pool labels so skip test.
| [ 0:00] ## Line: 14 	 SKIP_WITH_LVMLOCKD=1
| [ 0:00] ## Line: 15 	 SKIP_WITH_LVMETAD=1
| [ 0:00] ## Line: 16 	 SKIP_WITH_LVMPOLLD=1
| [ 0:00] ## Line: 17 	 
| [ 0:00] ## Line: 18 	 . lib/inittest
| [ 0:00] ## Line: 19 	 
| [ 0:00] ## Line: 20 	 env printf "" || skip # skip if printf is not available
| [ 0:00] ## Line: 21 	 
| [ 0:00] ## Line: 22 	 # create the old GFS pool labeled linear devices
| [ 0:00] ## Line: 23 	 create_pool_label_()
| [ 0:00] ## Line: 24 	 {
| [ 0:00] ## Line: 25 	   # FIXME
| [ 0:00] ## Line: 26 	   # echo -e is bashism, dash builtin sh doesn't do \xNN in printf either
| [ 0:00] ## Line: 27 	   # printf comes from coreutils, and is probably not posix either
| [ 0:00] ## Line: 28 	   env printf "\x01\x16\x70\x06\x5f\xcf\xff\xb9\xf8\x24\x8apool1" | dd of="$2" bs=5 seek=1 conv=notrunc
| [ 0:00] ## Line: 29 	   env printf "\x04\x01\x03\x00\x00\x00\x01\x00\x00\x00\x00\x00\x00\x00\x02\x00\x00\x00\x0$1\x68\x01\x16\x70\x00\x00\x00\x00\x00\x06\x5f\xd0" | dd of=$2 bs=273 seek=1 conv=notrunc
| [ 0:00] ## Line: 30 	   aux notify_lvmetad "$2"
| [ 0:00] ## Line: 31 	 }
| [ 0:00] ## Line: 32 	 
| [ 0:00] ## Line: 33 	 
| [ 0:00] ## Line: 34 	 aux prepare_devs 2
| [ 0:00] ## Line: 35 	 
| [ 0:00] ## Line: 36 	 create_pool_label_ 0 "$dev1"
| [ 0:00] ## Line: 37 	 create_pool_label_ 1 "$dev2"
| [ 0:00] ## Line: 38 	 
| [ 0:00] ## Line: 39 	 # check that pvcreate fails without -ff on the pool device
| [ 0:00] ## Line: 40 	 not pvcreate "$dev1"
| [ 0:00] ## Line: 41 	 
| [ 0:00] ## Line: 42 	 # check that vgdisplay and pvcreate -ff works with the pool device
| [ 0:00] ## Line: 43 	 vgdisplay --config 'global { locking_type = 0 }'
| [ 0:00] ## Line: 44 	 aux disable_dev "$dev2"
| [ 0:00] ## Line: 45 	 # FIXME! since pool1 cannot be opened, vgdisplay gives error... should we say
| [ 0:00] ## Line: 46 	 # "not" there instead, checking that it indeed does fail?
| [ 0:00] ## Line: 47 	 vgdisplay --config 'global { locking_type = 0 }' || true
| [ 0:00] ## Line: 48 	 pvcreate -ff -y "$dev1"
| [ 0:00] aux teardown
| [ 0:00] #pool-labels.sh:1+ aux teardown
| [ 0:00] ## teardown.........ok
###       failed: [ndev-vanilla] shell/pool-labels.sh

| [ 0:00] Library version:   1.02.146 (2017-12-18)
| [ 0:00] Driver version:    4.35.0
| [ 0:00] Kernel is Linux localhost.localdomain 3.10.0-693.11.1.el7.x86_64 #1 SMP Mon Dec 4 23:52:40 UTC 2017 x86_64 GNU/Linux
| [ 0:00] Selinux mode is not installed.
| [ 0:00]               total        used        free      shared  buff/cache   available
| [ 0:00] Mem:           7822        1079        4145          10        2597        6436
| [ 0:00] Swap:          4095           0        4095
| [ 0:00] Filesystem      Size  Used Avail Use% Mounted on
| [ 0:00] /dev/sdc1        18G  8.4G  8.4G  50% /
| [ 0:00] /dev/sdd1        51G  6.1G   43G  13% /lfskernel
| [ 0:00] devtmpfs        3.9G     0  3.9G   0% /dev
| [ 0:00] tmpfs           3.9G     0  3.9G   0% /run
| [ 0:00] @TESTDIR=/tmp/LVMTEST12560.nUvkVeW2QW
| [ 0:00] @PREFIX=LVMTEST12560
| [ 0:00] ## LVMCONF: activation {
| [ 0:00] ## LVMCONF:     checks = 1
| [ 0:00] ## LVMCONF:     monitoring = 0
| [ 0:00] ## LVMCONF:     polling_interval = 1
| [ 0:00] ## LVMCONF:     raid_region_size = 512
| [ 0:00] ## LVMCONF:     retry_deactivation = 1
| [ 0:00] ## LVMCONF:     snapshot_autoextend_percent = 50
| [ 0:00] ## LVMCONF:     snapshot_autoextend_threshold = 50
| [ 0:00] ## LVMCONF:     udev_rules = 1
| [ 0:00] ## LVMCONF:     udev_sync = 1
| [ 0:00] ## LVMCONF:     verify_udev_operations = 1
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: allocation {
| [ 0:00] ## LVMCONF:     wipe_signatures_when_zeroing_new_lvs = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: backup {
| [ 0:00] ## LVMCONF:     archive = 0
| [ 0:00] ## LVMCONF:     backup = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: devices {
| [ 0:00] ## LVMCONF:     cache_dir = "@TESTDIR@/etc"
| [ 0:00] ## LVMCONF:     default_data_alignment = 1
| [ 0:00] ## LVMCONF:     dir = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     filter = "a|.*|"
| [ 0:00] ## LVMCONF:     global_filter = [ "a|@TESTDIR@/dev/mapper/@PREFIX@.*pv[0-9_]*$|", "r|.*|" ]
| [ 0:00] ## LVMCONF:     md_component_detection  = 0
| [ 0:00] ## LVMCONF:     scan = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     sysfs_scan = 1
| [ 0:00] ## LVMCONF:     write_cache_state = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: dmeventd {
| [ 0:00] ## LVMCONF:     executable = "/sources/boot/LVM2.2.02.177/test/lib/dmeventd"
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: global {
| [ 0:00] ## LVMCONF:     abort_on_internal_errors = 1
| [ 0:00] ## LVMCONF:     cache_check_executable = "/usr/sbin/cache_check"
| [ 0:00] ## LVMCONF:     cache_dump_executable = "/usr/sbin/cache_dump"
| [ 0:00] ## LVMCONF:     cache_repair_executable = "/usr/sbin/cache_repair"
| [ 0:00] ## LVMCONF:     detect_internal_vg_cache_corruption = 1
| [ 0:00] ## LVMCONF:     fallback_to_local_locking = 0
| [ 0:00] ## LVMCONF:     fsadm_executable = "/sources/boot/LVM2.2.02.177/test/lib/fsadm"
| [ 0:00] ## LVMCONF:     library_dir = "@TESTDIR@/lib"
| [ 0:00] ## LVMCONF:     locking_dir = "@TESTDIR@/var/lock/lvm"
| [ 0:00] ## LVMCONF:     locking_type=1
| [ 0:00] ## LVMCONF:     notify_dbus = 0
| [ 0:00] ## LVMCONF:     si_unit_consistency = 1
| [ 0:00] ## LVMCONF:     thin_check_executable = "/usr/sbin/thin_check"
| [ 0:00] ## LVMCONF:     thin_dump_executable = "/usr/sbin/thin_dump"
| [ 0:00] ## LVMCONF:     thin_repair_executable = "/usr/sbin/thin_repair"
| [ 0:00] ## LVMCONF:     use_lvmetad = 0
| [ 0:00] ## LVMCONF:     use_lvmlockd = 0
| [ 0:00] ## LVMCONF:     use_lvmpolld = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: log {
| [ 0:00] ## LVMCONF:     activation = 1
| [ 0:00] ## LVMCONF:     file = "@TESTDIR@/debug.log"
| [ 0:00] ## LVMCONF:     indent = 1
| [ 0:00] ## LVMCONF:     level = 9
| [ 0:00] ## LVMCONF:     overwrite = 1
| [ 0:00] ## LVMCONF:     syslog = 0
| [ 0:00] ## LVMCONF:     verbose = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] <======== Processing test: "process-each-duplicate-pvs.sh" ========>
| [ 0:00] 
| [ 0:00] aux prepare_devs 6 16
| [ 0:00] #process-each-duplicate-pvs.sh:17+ aux prepare_devs 6 16
| [ 0:00] ## preparing loop device....ok (/dev/loop0)
| [ 0:00] ## preparing 6 devices...lib/utils: line 212: DM_UDEV_COOKIE: unbound variable
| [ 0:00] set +vx; STACKTRACE; set -vx
| [ 0:00] ##process-each-duplicate-pvs.sh:17+ set +vx
| [ 0:00] ## - /lfskernel/sources/boot/LVM2.2.02.177/test/shell/process-each-duplicate-pvs.sh:17
| [ 0:00] ## 1 STACKTRACE() called from /lfskernel/sources/boot/LVM2.2.02.177/test/shell/process-each-duplicate-pvs.sh:17
| [ 0:00] <======== Info ========>
| [ 0:00] ## DMINFO:   Name             Maj Min Stat Open Targ Event  UUID                                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv6  253   3 L--w    0    1      0 TEST-@PREFIX@pv6                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv5  253   6 L--w    0    1      0 TEST-@PREFIX@pv5                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv4  253   5 L--w    0    1      0 TEST-@PREFIX@pv4                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv3  253   4 L--w    0    1      0 TEST-@PREFIX@pv3                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv2  253   8 L--w    0    1      0 TEST-@PREFIX@pv2                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv1  253   7 L--w    0    1      0 TEST-@PREFIX@pv1                                                
| [ 0:00] <======== Active table ========>
| [ 0:00] ## DMTABLE:  @PREFIX@pv6: 0 32768 linear 7:0 165888
| [ 0:00] ## DMTABLE:  @PREFIX@pv5: 0 32768 linear 7:0 133120
| [ 0:00] ## DMTABLE:  @PREFIX@pv4: 0 32768 linear 7:0 100352
| [ 0:00] ## DMTABLE:  @PREFIX@pv3: 0 32768 linear 7:0 67584
| [ 0:00] ## DMTABLE:  @PREFIX@pv2: 0 32768 linear 7:0 34816
| [ 0:00] ## DMTABLE:  @PREFIX@pv1: 0 32768 linear 7:0 2048
| [ 0:00] <======== Inactive table ========>
| [ 0:00] ## DMITABLE: @PREFIX@pv6: 
| [ 0:00] ## DMITABLE: @PREFIX@pv5: 
| [ 0:00] ## DMITABLE: @PREFIX@pv4: 
| [ 0:00] ## DMITABLE: @PREFIX@pv3: 
| [ 0:00] ## DMITABLE: @PREFIX@pv2: 
| [ 0:00] ## DMITABLE: @PREFIX@pv1: 
| [ 0:00] <======== Status ========>
| [ 0:00] ## DMSTATUS: @PREFIX@pv6: 0 32768 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv5: 0 32768 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv4: 0 32768 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv3: 0 32768 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv2: 0 32768 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv1: 0 32768 linear 
| [ 0:00] <======== Tree ========>
| [ 0:00] ## DMTREE:   @PREFIX@pv6 (253:3)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   @PREFIX@pv5 (253:6)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   @PREFIX@pv4 (253:5)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   @PREFIX@pv3 (253:4)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   @PREFIX@pv2 (253:8)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   LFS_vg-lfs (253:2)
| [ 0:00] ## DMTREE:    `- (8:16)
| [ 0:00] ## DMTREE:   @PREFIX@pv1 (253:7)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   centos-swap (253:1)
| [ 0:00] ## DMTREE:    `- (8:2)
| [ 0:00] ## DMTREE:   centos-root (253:0)
| [ 0:00] ## DMTREE:    `- (8:2)
| [ 0:00] <======== Recursive list of @TESTDIR@/dev ========>
| [ 0:00] ## LSLR:	@TESTDIR@/dev:
| [ 0:00] ## LSLR:	total 4
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 0 Feb 21 02:27 loop0
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 1 Feb 21 02:27 loop1
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 2 Feb 21 02:27 loop2
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 3 Feb 21 02:27 loop3
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 4 Feb 21 02:27 loop4
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 5 Feb 21 02:27 loop5
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 6 Feb 21 02:27 loop6
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 7 Feb 21 02:27 loop7
| [ 0:00] ## LSLR:	drwxr-xr-x 2 root root 4096 Feb 21 02:27 mapper
| [ 0:00] ## LSLR:	crw-r--r-- 1 root root 1, 3 Feb 21 02:27 testnull
| [ 0:00] ## LSLR:	
| [ 0:00] ## LSLR:	@TESTDIR@/dev/mapper:
| [ 0:00] ## LSLR:	total 0
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   7 Feb 21 02:27 @PREFIX@pv1
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   8 Feb 21 02:27 @PREFIX@pv2
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   4 Feb 21 02:27 @PREFIX@pv3
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   5 Feb 21 02:27 @PREFIX@pv4
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   6 Feb 21 02:27 @PREFIX@pv5
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   3 Feb 21 02:27 @PREFIX@pv6
| [ 0:00] ## LSLR:	crw------- 1 root root  10, 236 Feb 21 02:27 control
| [ 0:00] <======== Udev DB content ========>
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-0
| [ 0:00] ## UDEV:	N: dm-0
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-0
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-0
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=0
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-1
| [ 0:00] ## UDEV:	N: dm-1
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-1
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-1
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=1
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-2
| [ 0:00] ## UDEV:	N: dm-2
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-2
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-2
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=2
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-3
| [ 0:00] ## UDEV:	N: dm-3
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-3
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-3
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=3
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-4
| [ 0:00] ## UDEV:	N: dm-4
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-4
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-4
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=4
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-5
| [ 0:00] ## UDEV:	N: dm-5
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-5
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-5
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=5
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-6
| [ 0:00] ## UDEV:	N: dm-6
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-6
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-6
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=6
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-7
| [ 0:00] ## UDEV:	N: dm-7
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-7
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-7
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=7
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-8
| [ 0:00] ## UDEV:	N: dm-8
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-8
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-8
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=8
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/loop0
| [ 0:00] ## UDEV:	N: loop0
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/loop0
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/loop0
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=7
| [ 0:00] ## UDEV:	E: MINOR=0
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] <======== Script file "process-each-duplicate-pvs.sh" ========>
| [ 0:00] ## Line: 1 	 #!/usr/bin/env bash
| [ 0:00] ## Line: 2 	 
| [ 0:00] ## Line: 3 	 # Copyright (C) 2008-2013 Red Hat, Inc. All rights reserved.
| [ 0:00] ## Line: 4 	 #
| [ 0:00] ## Line: 5 	 # This copyrighted material is made available to anyone wishing to use,
| [ 0:00] ## Line: 6 	 # modify, copy, or redistribute it subject to the terms and conditions
| [ 0:00] ## Line: 7 	 # of the GNU General Public License v.2.
| [ 0:00] ## Line: 8 	 
| [ 0:00] ## Line: 9 	 test_description='Test duplicate PVs'
| [ 0:00] ## Line: 10 	 
| [ 0:00] ## Line: 11 	 SKIP_WITH_LVMLOCKD=1
| [ 0:00] ## Line: 12 	 SKIP_WITH_LVMPOLLD=1
| [ 0:00] ## Line: 13 	 SKIP_WITH_CLVMD=1
| [ 0:00] ## Line: 14 	 
| [ 0:00] ## Line: 15 	 . lib/inittest
| [ 0:00] ## Line: 16 	 
| [ 0:00] ## Line: 17 	 aux prepare_devs 6 16
| [ 0:00] ## Line: 18 	 
| [ 0:00] ## Line: 19 	 # The LV-using-PV tests (DEV_USED_FOR_LV, where a PV is
| [ 0:00] ## Line: 20 	 # preferred if an active LV is using it) depend on sysfs
| [ 0:00] ## Line: 21 	 # info that is not available in RHEL5 kernels.
| [ 0:00] ## Line: 22 	 aux driver_at_least 4 15 || skip
| [ 0:00] ## Line: 23 	 
| [ 0:00] ## Line: 24 	 aux lvmconf 'devices/allow_changes_with_duplicate_pvs = 0'
| [ 0:00] ## Line: 25 	 
| [ 0:00] ## Line: 26 	 pvcreate "$dev1"
| [ 0:00] ## Line: 27 	 pvcreate "$dev2"
| [ 0:00] ## Line: 28 	 vgcreate $vg1 "$dev1"
| [ 0:00] ## Line: 29 	 vgcreate $vg2 "$dev2"
| [ 0:00] ## Line: 30 	 pvresize --setphysicalvolumesize 8m -y "$dev2"
| [ 0:00] ## Line: 31 	 lvcreate -an -l1 -n $lv1 $vg1
| [ 0:00] ## Line: 32 	 
| [ 0:00] ## Line: 33 	 # Both devs are shown and used by the VG
| [ 0:00] ## Line: 34 	 
| [ 0:00] ## Line: 35 	 pvs 2>&1 | tee out
| [ 0:00] ## Line: 36 	 
| [ 0:00] ## Line: 37 	 grep "$dev1" out
| [ 0:00] ## Line: 38 	 grep "$dev2" out
| [ 0:00] ## Line: 39 	 grep "$dev1" out | grep $vg1
| [ 0:00] ## Line: 40 	 grep "$dev2" out | grep $vg2
| [ 0:00] ## Line: 41 	 check pv_field "$dev1" pv_allocatable "allocatable"
| [ 0:00] ## Line: 42 	 check pv_field "$dev2" pv_allocatable "allocatable"
| [ 0:00] ## Line: 43 	 not grep WARNING out
| [ 0:00] ## Line: 44 	 
| [ 0:00] ## Line: 45 	 UUID1=$(get pv_field "$dev1" uuid)
| [ 0:00] ## Line: 46 	 UUID2=$(get pv_field "$dev2" uuid)
| [ 0:00] ## Line: 47 	 
| [ 0:00] ## Line: 48 	 SIZE1=$(get pv_field "$dev1" dev_size)
| [ 0:00] ## Line: 49 	 SIZE2=$(get pv_field "$dev2" dev_size)
| [ 0:00] ## Line: 50 	 
| [ 0:00] ## Line: 51 	 MINOR1=$(get pv_field "$dev1" minor)
| [ 0:00] ## Line: 52 	 MINOR2=$(get pv_field "$dev2" minor)
| [ 0:00] ## Line: 53 	 
| [ 0:00] ## Line: 54 	 check pv_field "$dev1" dev_size "$SIZE1"
| [ 0:00] ## Line: 55 	 check pv_field "$dev2" dev_size "$SIZE2"
| [ 0:00] ## Line: 56 	 
| [ 0:00] ## Line: 57 	 # Copy dev1 over dev2.
| [ 0:00] ## Line: 58 	 dd if="$dev1" of="$dev2" bs=1M iflag=direct oflag=direct,sync
| [ 0:00] ## Line: 59 	 pvscan --cache
| [ 0:00] ## Line: 60 	 
| [ 0:00] ## Line: 61 	 # The single preferred dev is shown from 'pvs'.
| [ 0:00] ## Line: 62 	 pvs -o+uuid,duplicate 2>&1 | tee out
| [ 0:00] ## Line: 63 	 
| [ 0:00] ## Line: 64 	 rm warn main || true
| [ 0:00] ## Line: 65 	 grep    WARNING out > warn || true
| [ 0:00] ## Line: 66 	 grep -v WARNING out > main || true
| [ 0:00] ## Line: 67 	 
| [ 0:00] ## Line: 68 	 # Don't know yet if dev1 or dev2 is preferred, so count just one is.
| [ 0:00] ## Line: 69 	 test "$(grep -c "$vg1" main)" -eq 1
| [ 0:00] ## Line: 70 	 test "$(grep -c "$UUID1" main)" -eq 1
| [ 0:00] ## Line: 71 	 not grep duplicate main
| [ 0:00] ## Line: 72 	 not grep $vg2 main
| [ 0:00] ## Line: 73 	 not grep $UUID2 main
| [ 0:00] ## Line: 74 	 
| [ 0:00] ## Line: 75 	 grep "was already found on" warn
| [ 0:00] ## Line: 76 	 grep "prefers device" warn
| [ 0:00] ## Line: 77 	 
| [ 0:00] ## Line: 78 	 # Find which is the preferred dev and which is the duplicate.
| [ 0:00] ## Line: 79 	 PV=$(pvs --noheadings -o name -S uuid="$UUID1" | xargs)
| [ 0:00] ## Line: 80 	 if [ "$PV" = "$dev1" ]; then
| [ 0:00] ## Line: 81 	 	DUP=$dev2
| [ 0:00] ## Line: 82 	 else
| [ 0:00] ## Line: 83 	 	DUP=$dev1
| [ 0:00] ## Line: 84 	 fi
| [ 0:00] ## Line: 85 	 
| [ 0:00] ## Line: 86 	 echo "PV is $PV"
| [ 0:00] ## Line: 87 	 echo "DUP is $DUP"
| [ 0:00] ## Line: 88 	 
| [ 0:00] ## Line: 89 	 grep "$PV" main
| [ 0:00] ## Line: 90 	 not grep "$DUP" main
| [ 0:00] ## Line: 91 	 
| [ 0:00] ## Line: 92 	 # Repeat above checking preferred/dup in output
| [ 0:00] ## Line: 93 	 pvs 2>&1 | tee out
| [ 0:00] ## Line: 94 	 
| [ 0:00] ## Line: 95 	 rm warn main || true
| [ 0:00] ## Line: 96 	 grep    WARNING out > warn || true
| [ 0:00] ## Line: 97 	 grep -v WARNING out > main || true
| [ 0:00] ## Line: 98 	 
| [ 0:00] ## Line: 99 	 grep "$PV" main
| [ 0:00] ## Line: 100 	 not grep "$DUP" main
| [ 0:00] ## Line: 101 	 
| [ 0:00] ## Line: 102 	 # The duplicate dev is included in 'pvs -a'
| [ 0:00] ## Line: 103 	 pvs -a -o+uuid,duplicate 2>&1 | tee out
| [ 0:00] ## Line: 104 	 
| [ 0:00] ## Line: 105 	 rm warn main || true
| [ 0:00] ## Line: 106 	 grep    WARNING out > warn || true
| [ 0:00] ## Line: 107 	 grep -v WARNING out > main || true
| [ 0:00] ## Line: 108 	 
| [ 0:00] ## Line: 109 	 grep "$dev1" main
| [ 0:00] ## Line: 110 	 grep "$dev2" main
| [ 0:00] ## Line: 111 	 grep $PV main
| [ 0:00] ## Line: 112 	 grep $DUP main
| [ 0:00] ## Line: 113 	 test "$(grep -c duplicate main)" -eq 1
| [ 0:00] ## Line: 114 	 grep $DUP main | grep duplicate
| [ 0:00] ## Line: 115 	 not grep $vg2 main
| [ 0:00] ## Line: 116 	 not grep $UUID2 main
| [ 0:00] ## Line: 117 	 grep "$dev1" main | grep $vg1
| [ 0:00] ## Line: 118 	 grep "$dev2" main | grep $vg1
| [ 0:00] ## Line: 119 	 grep "$dev1" main | grep $UUID1
| [ 0:00] ## Line: 120 	 grep "$dev2" main | grep $UUID1
| [ 0:00] ## Line: 121 	 
| [ 0:00] ## Line: 122 	 grep "was already found on" warn
| [ 0:00] ## Line: 123 	 grep "prefers device" warn
| [ 0:00] ## Line: 124 	 
| [ 0:00] ## Line: 125 	 #
| [ 0:00] ## Line: 126 	 # Passing a dev name arg always includes that dev.
| [ 0:00] ## Line: 127 	 #
| [ 0:00] ## Line: 128 	 
| [ 0:00] ## Line: 129 	 pvs -o+uuid "$dev1" 2>&1 | tee out
| [ 0:00] ## Line: 130 	 
| [ 0:00] ## Line: 131 	 rm warn main || true
| [ 0:00] ## Line: 132 	 grep    WARNING out > warn || true
| [ 0:00] ## Line: 133 	 grep -v WARNING out > main || true
| [ 0:00] ## Line: 134 	 
| [ 0:00] ## Line: 135 	 grep "$dev1" main
| [ 0:00] ## Line: 136 	 not grep "$dev2" main
| [ 0:00] ## Line: 137 	 grep "$UUID1" main
| [ 0:00] ## Line: 138 	 grep "$vg1" main
| [ 0:00] ## Line: 139 	 grep "was already found on" warn
| [ 0:00] ## Line: 140 	 grep "prefers device" warn
| [ 0:00] ## Line: 141 	 
| [ 0:00] ## Line: 142 	 pvs -o+uuid "$dev2" 2>&1 | tee out
| [ 0:00] ## Line: 143 	 
| [ 0:00] ## Line: 144 	 rm warn main || true
| [ 0:00] ## Line: 145 	 grep    WARNING out > warn || true
| [ 0:00] ## Line: 146 	 grep -v WARNING out > main || true
| [ 0:00] ## Line: 147 	 
| [ 0:00] ## Line: 148 	 grep "$dev2" main
| [ 0:00] ## Line: 149 	 not grep "$dev1" main
| [ 0:00] ## Line: 150 	 grep "$UUID1" main
| [ 0:00] ## Line: 151 	 grep "$vg1" main
| [ 0:00] ## Line: 152 	 grep "was already found on" warn
| [ 0:00] ## Line: 153 	 grep "prefers device" warn
| [ 0:00] ## Line: 154 	 
| [ 0:00] ## Line: 155 	 pvs -o+uuid,duplicate "$dev1" "$dev2" 2>&1 | tee out
| [ 0:00] ## Line: 156 	 
| [ 0:00] ## Line: 157 	 rm warn main || true
| [ 0:00] ## Line: 158 	 grep    WARNING out > warn || true
| [ 0:00] ## Line: 159 	 grep -v WARNING out > main || true
| [ 0:00] ## Line: 160 	 
| [ 0:00] ## Line: 161 	 grep "$dev1" main
| [ 0:00] ## Line: 162 	 grep "$dev2" main
| [ 0:00] ## Line: 163 	 grep "$dev1" main | grep $vg1
| [ 0:00] ## Line: 164 	 grep "$dev2" main | grep $vg1
| [ 0:00] ## Line: 165 	 grep "$dev1" main | grep $UUID1
| [ 0:00] ## Line: 166 	 grep "$dev2" main | grep $UUID1
| [ 0:00] ## Line: 167 	 test "$(grep -c duplicate main)" -eq 1
| [ 0:00] ## Line: 168 	 grep $DUP main | grep duplicate
| [ 0:00] ## Line: 169 	 
| [ 0:00] ## Line: 170 	 #
| [ 0:00] ## Line: 171 	 # Test specific report fields for each dev.
| [ 0:00] ## Line: 172 	 #
| [ 0:00] ## Line: 173 	 
| [ 0:00] ## Line: 174 	 pvs --noheadings -o vg_name,vg_uuid "$dev1" 2>&1 | tee out1
| [ 0:00] ## Line: 175 	 pvs --noheadings -o vg_name,vg_uuid "$dev2" 2>&1 | tee out2
| [ 0:00] ## Line: 176 	 
| [ 0:00] ## Line: 177 	 grep -v WARNING out1 > main1 || true
| [ 0:00] ## Line: 178 	 grep -v WARNING out2 > main2 || true
| [ 0:00] ## Line: 179 	 diff main1 main2
| [ 0:00] ## Line: 180 	 rm out1 out2 main1 main2 || true
| [ 0:00] ## Line: 181 	 
| [ 0:00] ## Line: 182 	 check pv_field "$dev1" pv_in_use "used"
| [ 0:00] ## Line: 183 	 check pv_field "$dev2" pv_in_use "used"
| [ 0:00] ## Line: 184 	 
| [ 0:00] ## Line: 185 	 check pv_field "$PV"  pv_allocatable "allocatable"
| [ 0:00] ## Line: 186 	 check pv_field "$DUP" pv_allocatable ""
| [ 0:00] ## Line: 187 	 
| [ 0:00] ## Line: 188 	 check pv_field "$PV"  pv_duplicate ""
| [ 0:00] ## Line: 189 	 check pv_field "$DUP" pv_duplicate "duplicate"
| [ 0:00] ## Line: 190 	 
| [ 0:00] ## Line: 191 	 pvs --noheadings -o name,pv_allocatable "$dev1" "$dev2" 2>&1 | tee out
| [ 0:00] ## Line: 192 	 
| [ 0:00] ## Line: 193 	 rm warn main || true
| [ 0:00] ## Line: 194 	 grep    WARNING out > warn || true
| [ 0:00] ## Line: 195 	 grep -v WARNING out > main || true
| [ 0:00] ## Line: 196 	 
| [ 0:00] ## Line: 197 	 grep "$PV" main
| [ 0:00] ## Line: 198 	 grep "$DUP" main
| [ 0:00] ## Line: 199 	 grep "$dev1" main
| [ 0:00] ## Line: 200 	 grep "$dev2" main
| [ 0:00] ## Line: 201 	 test "$(grep -c allocatable main)" -eq 1
| [ 0:00] ## Line: 202 	 
| [ 0:00] ## Line: 203 	 pvs --noheadings -o name,pv_duplicate "$dev1" "$dev2" 2>&1 | tee out
| [ 0:00] ## Line: 204 	 
| [ 0:00] ## Line: 205 	 rm warn main || true
| [ 0:00] ## Line: 206 	 grep    WARNING out > warn || true
| [ 0:00] ## Line: 207 	 grep -v WARNING out > main || true
| [ 0:00] ## Line: 208 	 
| [ 0:00] ## Line: 209 	 grep "$PV" main
| [ 0:00] ## Line: 210 	 grep "$DUP" main
| [ 0:00] ## Line: 211 	 grep "$dev1" main
| [ 0:00] ## Line: 212 	 grep "$dev2" main
| [ 0:00] ## Line: 213 	 test "$(grep -c duplicate main)" -eq 1
| [ 0:00] ## Line: 214 	 
| [ 0:00] ## Line: 215 	 #
| [ 0:00] ## Line: 216 	 # A filter can be used to show only one.
| [ 0:00] ## Line: 217 	 #
| [ 0:00] ## Line: 218 	 
| [ 0:00] ## Line: 219 	 pvs --config "devices { filter=[ \"a|$dev2|\", \"r|.*|\" ] }" 2>&1 | tee out
| [ 0:00] ## Line: 220 	 
| [ 0:00] ## Line: 221 	 rm warn main || true
| [ 0:00] ## Line: 222 	 grep    WARNING out > warn || true
| [ 0:00] ## Line: 223 	 grep -v WARNING out > main || true
| [ 0:00] ## Line: 224 	 
| [ 0:00] ## Line: 225 	 not grep "$dev1" main
| [ 0:00] ## Line: 226 	 grep "$dev2" main
| [ 0:00] ## Line: 227 	 
| [ 0:00] ## Line: 228 	 not grep "was already found on" warn
| [ 0:00] ## Line: 229 	 not grep "prefers device" warn
| [ 0:00] ## Line: 230 	 
| [ 0:00] ## Line: 231 	 
| [ 0:00] ## Line: 232 	 pvs --config "devices { filter=[ \"a|$dev1|\", \"r|.*|\"] }" 2>&1 | tee out
| [ 0:00] ## Line: 233 	 
| [ 0:00] ## Line: 234 	 rm warn main || true
| [ 0:00] ## Line: 235 	 grep    WARNING out > warn || true
| [ 0:00] ## Line: 236 	 grep -v WARNING out > main || true
| [ 0:00] ## Line: 237 	 
| [ 0:00] ## Line: 238 	 grep "$dev1" main
| [ 0:00] ## Line: 239 	 not grep "$dev2" main
| [ 0:00] ## Line: 240 	 
| [ 0:00] ## Line: 241 	 not grep "was already found on" warn
| [ 0:00] ## Line: 242 	 not grep "prefers device" warn
| [ 0:00] ## Line: 243 	 
| [ 0:00] ## Line: 244 	 # PV size and minor is still reported correctly for each.
| [ 0:00] ## Line: 245 	 
| [ 0:00] ## Line: 246 	 check pv_field "$dev1" dev_size "$SIZE1"
| [ 0:00] ## Line: 247 	 check pv_field "$dev2" dev_size "$SIZE2"
| [ 0:00] ## Line: 248 	 
| [ 0:00] ## Line: 249 	 check pv_field "$dev1" minor "$MINOR1"
| [ 0:00] ## Line: 250 	 check pv_field "$dev2" minor "$MINOR2"
| [ 0:00] ## Line: 251 	 
| [ 0:00] ## Line: 252 	 # With allow_changes_with_duplicate_pvs=0, a VG with duplicate devs
| [ 0:00] ## Line: 253 	 # cannot be modified or activated.
| [ 0:00] ## Line: 254 	 
| [ 0:00] ## Line: 255 	 not lvcreate -an -l1 -n $lv2 $vg1
| [ 0:00] ## Line: 256 	 not lvremove $vg1/$lv1
| [ 0:00] ## Line: 257 	 not lvchange -ay $vg1/$lv1
| [ 0:00] ## Line: 258 	 not vgremove $vg1
| [ 0:00] ## Line: 259 	 
| [ 0:00] ## Line: 260 	 
| [ 0:00] ## Line: 261 	 # With allow_changes_with_duplicate_pvs=1, changes above are permitted.
| [ 0:00] ## Line: 262 	 
| [ 0:00] ## Line: 263 	 aux lvmconf 'devices/allow_changes_with_duplicate_pvs = 1'
| [ 0:00] ## Line: 264 	 
| [ 0:00] ## Line: 265 	 lvcreate -an -l1 -n $lv2 $vg1
| [ 0:00] ## Line: 266 	 lvremove $vg1/$lv1
| [ 0:00] ## Line: 267 	 lvchange -ay $vg1/$lv2
| [ 0:00] ## Line: 268 	 lvchange -an $vg1/$lv2
| [ 0:00] ## Line: 269 	 lvremove $vg1/$lv2
| [ 0:00] ## Line: 270 	 vgremove -f $vg1
| [ 0:00] ## Line: 271 	 pvremove -ff -y "$dev1"
| [ 0:00] ## Line: 272 	 pvremove -ff -y "$dev2"
| [ 0:00] ## Line: 273 	 
| [ 0:00] ## Line: 274 	 
| [ 0:00] ## Line: 275 	 # dev3 and dev4 are copies, orphans
| [ 0:00] ## Line: 276 	 
| [ 0:00] ## Line: 277 	 pvcreate "$dev3"
| [ 0:00] ## Line: 278 	 pvcreate "$dev4"
| [ 0:00] ## Line: 279 	 pvresize --setphysicalvolumesize 8m -y "$dev4"
| [ 0:00] ## Line: 280 	 
| [ 0:00] ## Line: 281 	 UUID3=$(get pv_field "$dev3" uuid)
| [ 0:00] ## Line: 282 	 UUID4=$(get pv_field "$dev4" uuid)
| [ 0:00] ## Line: 283 	 
| [ 0:00] ## Line: 284 	 SIZE3=$(get pv_field "$dev3" dev_size)
| [ 0:00] ## Line: 285 	 SIZE4=$(get pv_field "$dev4" dev_size)
| [ 0:00] ## Line: 286 	 
| [ 0:00] ## Line: 287 	 check pv_field "$dev3" dev_size "$SIZE3"
| [ 0:00] ## Line: 288 	 check pv_field "$dev4" dev_size "$SIZE4"
| [ 0:00] ## Line: 289 	 
| [ 0:00] ## Line: 290 	 pvs 2>&1 | tee out
| [ 0:00] ## Line: 291 	 
| [ 0:00] ## Line: 292 	 grep "$dev3" out
| [ 0:00] ## Line: 293 	 grep "$dev4" out
| [ 0:00] ## Line: 294 	 
| [ 0:00] ## Line: 295 	 dd if="$dev3" of="$dev4" bs=1M iflag=direct oflag=direct,sync
| [ 0:00] ## Line: 296 	 pvscan --cache
| [ 0:00] ## Line: 297 	 
| [ 0:00] ## Line: 298 	 # One appears with 'pvs'
| [ 0:00] ## Line: 299 	 
| [ 0:00] ## Line: 300 	 pvs -o+uuid 2>&1 | tee out
| [ 0:00] ## Line: 301 	 
| [ 0:00] ## Line: 302 	 rm warn main || true
| [ 0:00] ## Line: 303 	 grep    WARNING out > warn || true
| [ 0:00] ## Line: 304 	 grep -v WARNING out > main || true
| [ 0:00] ## Line: 305 	 
| [ 0:00] ## Line: 306 	 test "$(grep -c "$UUID3" main)" -eq 1
| [ 0:00] ## Line: 307 	 not grep "$UUID4" main
| [ 0:00] ## Line: 308 	 
| [ 0:00] ## Line: 309 	 grep "was already found on" warn
| [ 0:00] ## Line: 310 	 grep "prefers device" warn
| [ 0:00] ## Line: 311 	 
| [ 0:00] ## Line: 312 	 # Both appear with 'pvs -a'
| [ 0:00] ## Line: 313 	 
| [ 0:00] ## Line: 314 	 pvs -a -o+uuid 2>&1 | tee out
| [ 0:00] ## Line: 315 	 
| [ 0:00] ## Line: 316 	 rm warn main || true
| [ 0:00] ## Line: 317 	 grep    WARNING out > warn || true
| [ 0:00] ## Line: 318 	 grep -v WARNING out > main || true
| [ 0:00] ## Line: 319 	 
| [ 0:00] ## Line: 320 	 test "$(grep -c "$UUID3" main)" -eq 2
| [ 0:00] ## Line: 321 	 
| [ 0:00] ## Line: 322 	 grep "$dev3" main
| [ 0:00] ## Line: 323 	 grep "$dev4" main
| [ 0:00] ## Line: 324 	 
| [ 0:00] ## Line: 325 	 grep $UUID3 main
| [ 0:00] ## Line: 326 	 not grep $UUID4 main
| [ 0:00] ## Line: 327 	 
| [ 0:00] ## Line: 328 	 grep "was already found on" warn
| [ 0:00] ## Line: 329 	 grep "prefers device" warn
| [ 0:00] ## Line: 330 	 
| [ 0:00] ## Line: 331 	 # Show each dev individually and both together
| [ 0:00] ## Line: 332 	 
| [ 0:00] ## Line: 333 	 pvs -o+uuid "$dev3" 2>&1 | tee out
| [ 0:00] ## Line: 334 	 
| [ 0:00] ## Line: 335 	 rm warn main || true
| [ 0:00] ## Line: 336 	 grep    WARNING out > warn || true
| [ 0:00] ## Line: 337 	 grep -v WARNING out > main || true
| [ 0:00] ## Line: 338 	 
| [ 0:00] ## Line: 339 	 grep "$dev3" main
| [ 0:00] ## Line: 340 	 not grep "$dev4" main
| [ 0:00] ## Line: 341 	 
| [ 0:00] ## Line: 342 	 grep "was already found on" warn
| [ 0:00] ## Line: 343 	 grep "prefers device" warn
| [ 0:00] ## Line: 344 	 
| [ 0:00] ## Line: 345 	 pvs -o+uuid "$dev4" 2>&1 | tee out
| [ 0:00] ## Line: 346 	 
| [ 0:00] ## Line: 347 	 rm warn main || true
| [ 0:00] ## Line: 348 	 grep    WARNING out > warn || true
| [ 0:00] ## Line: 349 	 grep -v WARNING out > main || true
| [ 0:00] ## Line: 350 	 
| [ 0:00] ## Line: 351 	 not grep "$dev3" main
| [ 0:00] ## Line: 352 	 grep "$dev4" main
| [ 0:00] ## Line: 353 	 
| [ 0:00] ## Line: 354 	 grep "was already found on" warn
| [ 0:00] ## Line: 355 	 grep "prefers device" warn
| [ 0:00] ## Line: 356 	 
| [ 0:00] ## Line: 357 	 pvs -o+uuid "$dev3" "$dev4" 2>&1 | tee out
| [ 0:00] ## Line: 358 	 
| [ 0:00] ## Line: 359 	 rm warn main || true
| [ 0:00] ## Line: 360 	 grep    WARNING out > warn || true
| [ 0:00] ## Line: 361 	 grep -v WARNING out > main || true
| [ 0:00] ## Line: 362 	 
| [ 0:00] ## Line: 363 	 grep "$dev3" main
| [ 0:00] ## Line: 364 	 grep "$dev4" main
| [ 0:00] ## Line: 365 	 
| [ 0:00] ## Line: 366 	 grep "was already found on" warn
| [ 0:00] ## Line: 367 	 grep "prefers device" warn
| [ 0:00] ## Line: 368 	 
| [ 0:00] ## Line: 369 	 # Same sizes shown.
| [ 0:00] ## Line: 370 	 
| [ 0:00] ## Line: 371 	 check pv_field "$dev3" dev_size "$SIZE3"
| [ 0:00] ## Line: 372 	 check pv_field "$dev4" dev_size "$SIZE4"
| [ 0:00] ## Line: 373 	 
| [ 0:00] ## Line: 374 	 # Verify that devs being used by an active LV are
| [ 0:00] ## Line: 375 	 # preferred over duplicates that are not used by an LV.
| [ 0:00] ## Line: 376 	 
| [ 0:00] ## Line: 377 	 dd if=/dev/zero of="$dev3" bs=1M oflag=direct,sync || true
| [ 0:00] ## Line: 378 	 dd if=/dev/zero of="$dev4" bs=1M oflag=direct,sync || true
| [ 0:00] ## Line: 379 	 pvscan --cache
| [ 0:00] ## Line: 380 	 
| [ 0:00] ## Line: 381 	 vgcreate "$vg2" "$dev3" "$dev4"
| [ 0:00] ## Line: 382 	 lvcreate -l1 -n $lv1 $vg2 "$dev3"
| [ 0:00] ## Line: 383 	 lvcreate -l1 -n $lv2 $vg2 "$dev4"
| [ 0:00] ## Line: 384 	 
| [ 0:00] ## Line: 385 	 dd if="$dev3" of="$dev5" bs=1M iflag=direct oflag=direct,sync
| [ 0:00] ## Line: 386 	 dd if="$dev4" of="$dev6" bs=1M iflag=direct oflag=direct,sync
| [ 0:00] ## Line: 387 	 pvscan --cache
| [ 0:00] ## Line: 388 	 
| [ 0:00] ## Line: 389 	 pvs -o+uuid,duplicate 2>&1 | tee out
| [ 0:00] ## Line: 390 	 
| [ 0:00] ## Line: 391 	 rm warn main || true
| [ 0:00] ## Line: 392 	 grep    WARNING out > warn || true
| [ 0:00] ## Line: 393 	 grep -v WARNING out > main || true
| [ 0:00] ## Line: 394 	 
| [ 0:00] ## Line: 395 	 grep "$dev3" main
| [ 0:00] ## Line: 396 	 grep "$dev4" main
| [ 0:00] ## Line: 397 	 not grep duplicate main
| [ 0:00] ## Line: 398 	 check pv_field "$dev3" pv_duplicate ""
| [ 0:00] ## Line: 399 	 check pv_field "$dev4" pv_duplicate ""
| [ 0:00] ## Line: 400 	 check pv_field "$dev5" pv_duplicate "duplicate"
| [ 0:00] ## Line: 401 	 check pv_field "$dev6" pv_duplicate "duplicate"
| [ 0:00] ## Line: 402 	 
| [ 0:00] ## Line: 403 	 grep "prefers device $dev3" warn
| [ 0:00] ## Line: 404 	 grep "prefers device $dev4" warn
| [ 0:00] ## Line: 405 	 not grep "prefers device $dev5" warn
| [ 0:00] ## Line: 406 	 not grep "prefers device $dev6" warn
| [ 0:00] ## Line: 407 	 
| [ 0:00] ## Line: 408 	 pvs -a -o+uuid,duplicate 2>&1 | tee out
| [ 0:00] ## Line: 409 	 
| [ 0:00] ## Line: 410 	 rm warn main || true
| [ 0:00] ## Line: 411 	 grep    WARNING out > warn || true
| [ 0:00] ## Line: 412 	 grep -v WARNING out > main || true
| [ 0:00] ## Line: 413 	 
| [ 0:00] ## Line: 414 	 test "$(grep -c duplicate main)" -eq 2
| [ 0:00] ## Line: 415 	 grep "$dev3" main
| [ 0:00] ## Line: 416 	 grep "$dev4" main
| [ 0:00] ## Line: 417 	 grep "$dev5" main
| [ 0:00] ## Line: 418 	 grep "$dev6" main
| [ 0:00] ## Line: 419 	 
| [ 0:00] ## Line: 420 	 grep "prefers device $dev3" warn
| [ 0:00] ## Line: 421 	 grep "prefers device $dev4" warn
| [ 0:00] ## Line: 422 	 not grep "prefers device $dev5" warn
| [ 0:00] ## Line: 423 	 not grep "prefers device $dev6" warn
| [ 0:00] ## Line: 424 	 
| [ 0:00] ## Line: 425 	 pvs -o+uuid,duplicate "$dev3" "$dev4" "$dev5" "$dev6" 2>&1 | tee out
| [ 0:00] ## Line: 426 	 
| [ 0:00] ## Line: 427 	 rm warn main || true
| [ 0:00] ## Line: 428 	 grep    WARNING out > warn || true
| [ 0:00] ## Line: 429 	 grep -v WARNING out > main || true
| [ 0:00] ## Line: 430 	 
| [ 0:00] ## Line: 431 	 test "$(grep -c duplicate main)" -eq 2
| [ 0:00] ## Line: 432 	 grep "$dev3" main
| [ 0:00] ## Line: 433 	 grep "$dev4" main
| [ 0:00] ## Line: 434 	 grep "$dev5" main
| [ 0:00] ## Line: 435 	 grep "$dev6" main
| [ 0:00] ## Line: 436 	 
| [ 0:00] ## Line: 437 	 grep "prefers device $dev3" warn
| [ 0:00] ## Line: 438 	 grep "prefers device $dev4" warn
| [ 0:00] ## Line: 439 	 not grep "prefers device $dev5" warn
| [ 0:00] ## Line: 440 	 not grep "prefers device $dev6" warn
| [ 0:00] ## Line: 441 	 
| [ 0:00] ## Line: 442 	 
| [ 0:00] ## Line: 443 	 dd if=/dev/zero of="$dev5" bs=1M oflag=direct,sync || true
| [ 0:00] ## Line: 444 	 dd if=/dev/zero of="$dev6" bs=1M oflag=direct,sync || true
| [ 0:00] ## Line: 445 	 pvscan --cache
| [ 0:00] ## Line: 446 	 
| [ 0:00] ## Line: 447 	 lvremove -y $vg2/$lv1
| [ 0:00] ## Line: 448 	 lvremove -y $vg2/$lv2
| [ 0:00] ## Line: 449 	 vgremove $vg2
| [ 0:00] ## Line: 450 	 pvremove -ff -y "$dev3"
| [ 0:00] ## Line: 451 	 pvremove -ff -y "$dev4"
| [ 0:00] ## Line: 452 	 
| [ 0:00] ## Line: 453 	 dd if=/dev/zero of="$dev3" bs=1M oflag=direct,sync || true
| [ 0:00] ## Line: 454 	 dd if=/dev/zero of="$dev4" bs=1M oflag=direct,sync || true
| [ 0:00] ## Line: 455 	 pvscan --cache
| [ 0:00] ## Line: 456 	 
| [ 0:00] ## Line: 457 	 # Reverse devs in the previous in case dev3/dev4 would be
| [ 0:00] ## Line: 458 	 # preferred even without an active LV using them.
| [ 0:00] ## Line: 459 	 
| [ 0:00] ## Line: 460 	 vgcreate $vg2 "$dev5" "$dev6"
| [ 0:00] ## Line: 461 	 lvcreate -l1 -n $lv1 $vg2 "$dev5"
| [ 0:00] ## Line: 462 	 lvcreate -l1 -n $lv2 $vg2 "$dev6"
| [ 0:00] ## Line: 463 	 
| [ 0:00] ## Line: 464 	 dd if="$dev5" of="$dev3" bs=1M iflag=direct oflag=direct,sync
| [ 0:00] ## Line: 465 	 dd if="$dev6" of="$dev4" bs=1M iflag=direct oflag=direct,sync
| [ 0:00] ## Line: 466 	 pvscan --cache
| [ 0:00] ## Line: 467 	 
| [ 0:00] ## Line: 468 	 pvs -o+uuid,duplicate 2>&1 | tee out
| [ 0:00] ## Line: 469 	 
| [ 0:00] ## Line: 470 	 rm warn main || true
| [ 0:00] ## Line: 471 	 grep    WARNING out > warn || true
| [ 0:00] ## Line: 472 	 grep -v WARNING out > main || true
| [ 0:00] ## Line: 473 	 
| [ 0:00] ## Line: 474 	 grep "$dev5" main
| [ 0:00] ## Line: 475 	 grep "$dev6" main
| [ 0:00] ## Line: 476 	 not grep duplicate main
| [ 0:00] ## Line: 477 	 check pv_field "$dev5" pv_duplicate ""
| [ 0:00] ## Line: 478 	 check pv_field "$dev6" pv_duplicate ""
| [ 0:00] ## Line: 479 	 check pv_field "$dev3" pv_duplicate "duplicate"
| [ 0:00] ## Line: 480 	 check pv_field "$dev4" pv_duplicate "duplicate"
| [ 0:00] ## Line: 481 	 
| [ 0:00] ## Line: 482 	 pvs -a -o+uuid,duplicate 2>&1 | tee out
| [ 0:00] ## Line: 483 	 
| [ 0:00] ## Line: 484 	 rm warn main || true
| [ 0:00] ## Line: 485 	 grep    WARNING out > warn || true
| [ 0:00] ## Line: 486 	 grep -v WARNING out > main || true
| [ 0:00] ## Line: 487 	 
| [ 0:00] ## Line: 488 	 test "$(grep -c duplicate main)" -eq 2
| [ 0:00] ## Line: 489 	 grep "$dev3" main
| [ 0:00] ## Line: 490 	 grep "$dev4" main
| [ 0:00] ## Line: 491 	 grep "$dev5" main
| [ 0:00] ## Line: 492 	 grep "$dev6" main
| [ 0:00] ## Line: 493 	 
| [ 0:00] ## Line: 494 	 grep "prefers device $dev5" warn
| [ 0:00] ## Line: 495 	 grep "prefers device $dev6" warn
| [ 0:00] ## Line: 496 	 not grep "prefers device $dev3" warn
| [ 0:00] ## Line: 497 	 not grep "prefers device $dev4" warn
| [ 0:00] ## Line: 498 	 
| [ 0:00] ## Line: 499 	 dd if=/dev/zero of="$dev3" bs=1M oflag=direct,sync || true
| [ 0:00] ## Line: 500 	 dd if=/dev/zero of="$dev4" bs=1M oflag=direct,sync || true
| [ 0:00] ## Line: 501 	 pvscan --cache
| [ 0:00] ## Line: 502 	 
| [ 0:00] ## Line: 503 	 lvremove -y $vg2/$lv1
| [ 0:00] ## Line: 504 	 lvremove -y $vg2/$lv2
| [ 0:00] ## Line: 505 	 vgremove $vg2
| [ 0:00] aux teardown
| [ 0:00] #process-each-duplicate-pvs.sh:1+ aux teardown
| [ 0:00] ## teardown.........ok
###       failed: [ndev-vanilla] shell/process-each-duplicate-pvs.sh

| [ 0:00] Library version:   1.02.146 (2017-12-18)
| [ 0:00] Driver version:    4.35.0
| [ 0:00] Kernel is Linux localhost.localdomain 3.10.0-693.11.1.el7.x86_64 #1 SMP Mon Dec 4 23:52:40 UTC 2017 x86_64 GNU/Linux
| [ 0:00] Selinux mode is not installed.
| [ 0:00]               total        used        free      shared  buff/cache   available
| [ 0:00] Mem:           7822        1080        4145          10        2597        6435
| [ 0:00] Swap:          4095           0        4095
| [ 0:00] Filesystem      Size  Used Avail Use% Mounted on
| [ 0:00] /dev/sdc1        18G  8.4G  8.4G  50% /
| [ 0:00] /dev/sdd1        51G  6.1G   43G  13% /lfskernel
| [ 0:00] devtmpfs        3.9G     0  3.9G   0% /dev
| [ 0:00] tmpfs           3.9G     0  3.9G   0% /run
| [ 0:00] @TESTDIR=/tmp/LVMTEST12779.lXiOr84kqu
| [ 0:00] @PREFIX=LVMTEST12779
| [ 0:00] ## LVMCONF: activation {
| [ 0:00] ## LVMCONF:     checks = 1
| [ 0:00] ## LVMCONF:     monitoring = 0
| [ 0:00] ## LVMCONF:     polling_interval = 1
| [ 0:00] ## LVMCONF:     raid_region_size = 512
| [ 0:00] ## LVMCONF:     retry_deactivation = 1
| [ 0:00] ## LVMCONF:     snapshot_autoextend_percent = 50
| [ 0:00] ## LVMCONF:     snapshot_autoextend_threshold = 50
| [ 0:00] ## LVMCONF:     udev_rules = 1
| [ 0:00] ## LVMCONF:     udev_sync = 1
| [ 0:00] ## LVMCONF:     verify_udev_operations = 1
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: allocation {
| [ 0:00] ## LVMCONF:     wipe_signatures_when_zeroing_new_lvs = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: backup {
| [ 0:00] ## LVMCONF:     archive = 0
| [ 0:00] ## LVMCONF:     backup = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: devices {
| [ 0:00] ## LVMCONF:     cache_dir = "@TESTDIR@/etc"
| [ 0:00] ## LVMCONF:     default_data_alignment = 1
| [ 0:00] ## LVMCONF:     dir = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     filter = "a|.*|"
| [ 0:00] ## LVMCONF:     global_filter = [ "a|@TESTDIR@/dev/mapper/@PREFIX@.*pv[0-9_]*$|", "r|.*|" ]
| [ 0:00] ## LVMCONF:     md_component_detection  = 0
| [ 0:00] ## LVMCONF:     scan = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     sysfs_scan = 1
| [ 0:00] ## LVMCONF:     write_cache_state = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: dmeventd {
| [ 0:00] ## LVMCONF:     executable = "/sources/boot/LVM2.2.02.177/test/lib/dmeventd"
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: global {
| [ 0:00] ## LVMCONF:     abort_on_internal_errors = 1
| [ 0:00] ## LVMCONF:     cache_check_executable = "/usr/sbin/cache_check"
| [ 0:00] ## LVMCONF:     cache_dump_executable = "/usr/sbin/cache_dump"
| [ 0:00] ## LVMCONF:     cache_repair_executable = "/usr/sbin/cache_repair"
| [ 0:00] ## LVMCONF:     detect_internal_vg_cache_corruption = 1
| [ 0:00] ## LVMCONF:     fallback_to_local_locking = 0
| [ 0:00] ## LVMCONF:     fsadm_executable = "/sources/boot/LVM2.2.02.177/test/lib/fsadm"
| [ 0:00] ## LVMCONF:     library_dir = "@TESTDIR@/lib"
| [ 0:00] ## LVMCONF:     locking_dir = "@TESTDIR@/var/lock/lvm"
| [ 0:00] ## LVMCONF:     locking_type=1
| [ 0:00] ## LVMCONF:     notify_dbus = 0
| [ 0:00] ## LVMCONF:     si_unit_consistency = 1
| [ 0:00] ## LVMCONF:     thin_check_executable = "/usr/sbin/thin_check"
| [ 0:00] ## LVMCONF:     thin_dump_executable = "/usr/sbin/thin_dump"
| [ 0:00] ## LVMCONF:     thin_repair_executable = "/usr/sbin/thin_repair"
| [ 0:00] ## LVMCONF:     use_lvmetad = 0
| [ 0:00] ## LVMCONF:     use_lvmlockd = 0
| [ 0:00] ## LVMCONF:     use_lvmpolld = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: log {
| [ 0:00] ## LVMCONF:     activation = 1
| [ 0:00] ## LVMCONF:     file = "@TESTDIR@/debug.log"
| [ 0:00] ## LVMCONF:     indent = 1
| [ 0:00] ## LVMCONF:     level = 9
| [ 0:00] ## LVMCONF:     overwrite = 1
| [ 0:00] ## LVMCONF:     syslog = 0
| [ 0:00] ## LVMCONF:     verbose = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] <======== Processing test: "process-each-duplicate-vgnames.sh" ========>
| [ 0:00] 
| [ 0:00] aux prepare_devs 2
| [ 0:00] #process-each-duplicate-vgnames.sh:15+ aux prepare_devs 2
| [ 0:00] ## preparing loop device....ok (/dev/loop0)
| [ 0:01] ## preparing 2 devices...lib/utils: line 212: DM_UDEV_COOKIE: unbound variable
| [ 0:01] set +vx; STACKTRACE; set -vx
| [ 0:01] ##process-each-duplicate-vgnames.sh:15+ set +vx
| [ 0:01] ## - /lfskernel/sources/boot/LVM2.2.02.177/test/shell/process-each-duplicate-vgnames.sh:15
| [ 0:01] ## 1 STACKTRACE() called from /lfskernel/sources/boot/LVM2.2.02.177/test/shell/process-each-duplicate-vgnames.sh:15
| [ 0:01] <======== Info ========>
| [ 0:01] ## DMINFO:   Name             Maj Min Stat Open Targ Event  UUID                                                                
| [ 0:01] ## DMINFO:   @PREFIX@pv2  253   3 L--w    0    1      0 TEST-@PREFIX@pv2                                                
| [ 0:01] ## DMINFO:   @PREFIX@pv1  253   4 L--w    0    1      0 TEST-@PREFIX@pv1                                                
| [ 0:01] <======== Active table ========>
| [ 0:01] ## DMTABLE:  @PREFIX@pv2: 0 69632 linear 7:0 71680
| [ 0:01] ## DMTABLE:  @PREFIX@pv1: 0 69632 linear 7:0 2048
| [ 0:01] <======== Inactive table ========>
| [ 0:01] ## DMITABLE: @PREFIX@pv2: 
| [ 0:01] ## DMITABLE: @PREFIX@pv1: 
| [ 0:01] <======== Status ========>
| [ 0:01] ## DMSTATUS: @PREFIX@pv2: 0 69632 linear 
| [ 0:01] ## DMSTATUS: @PREFIX@pv1: 0 69632 linear 
| [ 0:01] <======== Tree ========>
| [ 0:01] ## DMTREE:   @PREFIX@pv2 (253:3)
| [ 0:01] ## DMTREE:    `- (7:0)
| [ 0:01] ## DMTREE:   @PREFIX@pv1 (253:4)
| [ 0:01] ## DMTREE:    `- (7:0)
| [ 0:01] ## DMTREE:   LFS_vg-lfs (253:2)
| [ 0:01] ## DMTREE:    `- (8:16)
| [ 0:01] ## DMTREE:   centos-swap (253:1)
| [ 0:01] ## DMTREE:    `- (8:2)
| [ 0:01] ## DMTREE:   centos-root (253:0)
| [ 0:01] ## DMTREE:    `- (8:2)
| [ 0:01] <======== Recursive list of @TESTDIR@/dev ========>
| [ 0:01] ## LSLR:	@TESTDIR@/dev:
| [ 0:01] ## LSLR:	total 4
| [ 0:01] ## LSLR:	brw-r--r-- 1 root root 7, 0 Feb 21 02:27 loop0
| [ 0:01] ## LSLR:	brw-r--r-- 1 root root 7, 1 Feb 21 02:27 loop1
| [ 0:01] ## LSLR:	brw-r--r-- 1 root root 7, 2 Feb 21 02:27 loop2
| [ 0:01] ## LSLR:	brw-r--r-- 1 root root 7, 3 Feb 21 02:27 loop3
| [ 0:01] ## LSLR:	brw-r--r-- 1 root root 7, 4 Feb 21 02:27 loop4
| [ 0:01] ## LSLR:	brw-r--r-- 1 root root 7, 5 Feb 21 02:27 loop5
| [ 0:01] ## LSLR:	brw-r--r-- 1 root root 7, 6 Feb 21 02:27 loop6
| [ 0:01] ## LSLR:	brw-r--r-- 1 root root 7, 7 Feb 21 02:27 loop7
| [ 0:01] ## LSLR:	drwxr-xr-x 2 root root 4096 Feb 21 02:27 mapper
| [ 0:01] ## LSLR:	crw-r--r-- 1 root root 1, 3 Feb 21 02:27 testnull
| [ 0:01] ## LSLR:	
| [ 0:01] ## LSLR:	@TESTDIR@/dev/mapper:
| [ 0:01] ## LSLR:	total 0
| [ 0:01] ## LSLR:	brw------- 1 root root 253,   4 Feb 21 02:27 @PREFIX@pv1
| [ 0:01] ## LSLR:	brw------- 1 root root 253,   3 Feb 21 02:27 @PREFIX@pv2
| [ 0:01] ## LSLR:	crw------- 1 root root  10, 236 Feb 21 02:27 control
| [ 0:01] <======== Udev DB content ========>
| [ 0:01] ## UDEV:	P: /devices/virtual/block/dm-0
| [ 0:01] ## UDEV:	N: dm-0
| [ 0:01] ## UDEV:	E: DEVNAME=/dev/dm-0
| [ 0:01] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-0
| [ 0:01] ## UDEV:	E: DEVTYPE=disk
| [ 0:01] ## UDEV:	E: MAJOR=253
| [ 0:01] ## UDEV:	E: MINOR=0
| [ 0:01] ## UDEV:	E: SUBSYSTEM=block
| [ 0:01] ## UDEV:	
| [ 0:01] ## UDEV:	P: /devices/virtual/block/dm-1
| [ 0:01] ## UDEV:	N: dm-1
| [ 0:01] ## UDEV:	E: DEVNAME=/dev/dm-1
| [ 0:01] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-1
| [ 0:01] ## UDEV:	E: DEVTYPE=disk
| [ 0:01] ## UDEV:	E: MAJOR=253
| [ 0:01] ## UDEV:	E: MINOR=1
| [ 0:01] ## UDEV:	E: SUBSYSTEM=block
| [ 0:01] ## UDEV:	
| [ 0:01] ## UDEV:	P: /devices/virtual/block/dm-2
| [ 0:01] ## UDEV:	N: dm-2
| [ 0:01] ## UDEV:	E: DEVNAME=/dev/dm-2
| [ 0:01] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-2
| [ 0:01] ## UDEV:	E: DEVTYPE=disk
| [ 0:01] ## UDEV:	E: MAJOR=253
| [ 0:01] ## UDEV:	E: MINOR=2
| [ 0:01] ## UDEV:	E: SUBSYSTEM=block
| [ 0:01] ## UDEV:	
| [ 0:01] ## UDEV:	P: /devices/virtual/block/dm-3
| [ 0:01] ## UDEV:	N: dm-3
| [ 0:01] ## UDEV:	E: DEVNAME=/dev/dm-3
| [ 0:01] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-3
| [ 0:01] ## UDEV:	E: DEVTYPE=disk
| [ 0:01] ## UDEV:	E: MAJOR=253
| [ 0:01] ## UDEV:	E: MINOR=3
| [ 0:01] ## UDEV:	E: SUBSYSTEM=block
| [ 0:01] ## UDEV:	
| [ 0:01] ## UDEV:	P: /devices/virtual/block/dm-4
| [ 0:01] ## UDEV:	N: dm-4
| [ 0:01] ## UDEV:	E: DEVNAME=/dev/dm-4
| [ 0:01] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-4
| [ 0:01] ## UDEV:	E: DEVTYPE=disk
| [ 0:01] ## UDEV:	E: MAJOR=253
| [ 0:01] ## UDEV:	E: MINOR=4
| [ 0:01] ## UDEV:	E: SUBSYSTEM=block
| [ 0:01] ## UDEV:	
| [ 0:01] ## UDEV:	P: /devices/virtual/block/loop0
| [ 0:01] ## UDEV:	N: loop0
| [ 0:01] ## UDEV:	E: DEVNAME=/dev/loop0
| [ 0:01] ## UDEV:	E: DEVPATH=/devices/virtual/block/loop0
| [ 0:01] ## UDEV:	E: DEVTYPE=disk
| [ 0:01] ## UDEV:	E: MAJOR=7
| [ 0:01] ## UDEV:	E: MINOR=0
| [ 0:01] ## UDEV:	E: SUBSYSTEM=block
| [ 0:01] ## UDEV:	
| [ 0:01] <======== Script file "process-each-duplicate-vgnames.sh" ========>
| [ 0:01] ## Line: 1 	 #!/usr/bin/env bash
| [ 0:01] ## Line: 2 	 
| [ 0:01] ## Line: 3 	 # Copyright (C) 2008-2013 Red Hat, Inc. All rights reserved.
| [ 0:01] ## Line: 4 	 #
| [ 0:01] ## Line: 5 	 # This copyrighted material is made available to anyone wishing to use,
| [ 0:01] ## Line: 6 	 # modify, copy, or redistribute it subject to the terms and conditions
| [ 0:01] ## Line: 7 	 # of the GNU General Public License v.2.
| [ 0:01] ## Line: 8 	 
| [ 0:01] ## Line: 9 	 test_description='Test vgs with duplicate vg names'
| [ 0:01] ## Line: 10 	 SKIP_WITH_LVMLOCKD=1
| [ 0:01] ## Line: 11 	 SKIP_WITH_LVMPOLLD=1
| [ 0:01] ## Line: 12 	 
| [ 0:01] ## Line: 13 	 . lib/inittest
| [ 0:01] ## Line: 14 	 
| [ 0:01] ## Line: 15 	 aux prepare_devs 2
| [ 0:01] ## Line: 16 	 
| [ 0:01] ## Line: 17 	 pvcreate "$dev1"
| [ 0:01] ## Line: 18 	 pvcreate "$dev2"
| [ 0:01] ## Line: 19 	 
| [ 0:01] ## Line: 20 	 aux disable_dev "$dev1" "$dev2"
| [ 0:01] ## Line: 21 	 
| [ 0:01] ## Line: 22 	 aux enable_dev "$dev1"
| [ 0:01] ## Line: 23 	 vgscan
| [ 0:01] ## Line: 24 	 vgcreate $vg1 "$dev1"
| [ 0:01] ## Line: 25 	 UUID1=$(vgs --noheading -o vg_uuid $vg1)
| [ 0:01] ## Line: 26 	 aux disable_dev "$dev1"
| [ 0:01] ## Line: 27 	 
| [ 0:01] ## Line: 28 	 aux enable_dev "$dev2"
| [ 0:01] ## Line: 29 	 vgscan
| [ 0:01] ## Line: 30 	 vgcreate $vg1 "$dev2"
| [ 0:01] ## Line: 31 	 UUID2=$(vgs --noheading -o vg_uuid $vg1)
| [ 0:01] ## Line: 32 	 
| [ 0:01] ## Line: 33 	 aux enable_dev "$dev1"
| [ 0:01] ## Line: 34 	 # need vgscan after enabling/disabling devs
| [ 0:01] ## Line: 35 	 # so that the next commands properly see them
| [ 0:01] ## Line: 36 	 vgscan
| [ 0:01] ## Line: 37 	 pvs "$dev1"
| [ 0:01] ## Line: 38 	 pvs "$dev2"
| [ 0:01] ## Line: 39 	 
| [ 0:01] ## Line: 40 	 vgs -o+vg_uuid | tee err
| [ 0:01] ## Line: 41 	 grep $UUID1 err
| [ 0:01] ## Line: 42 	 grep $UUID2 err
| [ 0:01] ## Line: 43 	 
| [ 0:01] ## Line: 44 	 # should we specify and test which should be displayed?
| [ 0:01] ## Line: 45 	 # vgs --noheading -o vg_uuid $vg1 >err
| [ 0:01] ## Line: 46 	 # grep $UUID1 err
| [ 0:01] ## Line: 47 	 
| [ 0:01] ## Line: 48 	 aux disable_dev "$dev2"
| [ 0:01] ## Line: 49 	 vgs -o+vg_uuid | tee err
| [ 0:01] ## Line: 50 	 grep $UUID1 err
| [ 0:01] ## Line: 51 	 not grep $UUID2 err
| [ 0:01] ## Line: 52 	 aux enable_dev "$dev2"
| [ 0:01] ## Line: 53 	 vgscan
| [ 0:01] ## Line: 54 	 
| [ 0:01] ## Line: 55 	 aux disable_dev "$dev1"
| [ 0:01] ## Line: 56 	 vgs -o+vg_uuid | tee err
| [ 0:01] ## Line: 57 	 grep $UUID2 err
| [ 0:01] ## Line: 58 	 not grep $UUID1 err
| [ 0:01] ## Line: 59 	 aux enable_dev "$dev1"
| [ 0:01] ## Line: 60 	 vgscan
| [ 0:01] aux teardown
| [ 0:01] #process-each-duplicate-vgnames.sh:1+ aux teardown
| [ 0:01] ## teardown.........ok
###       failed: [ndev-vanilla] shell/process-each-duplicate-vgnames.sh

| [ 0:00] Library version:   1.02.146 (2017-12-18)
| [ 0:00] Driver version:    4.35.0
| [ 0:00] Kernel is Linux localhost.localdomain 3.10.0-693.11.1.el7.x86_64 #1 SMP Mon Dec 4 23:52:40 UTC 2017 x86_64 GNU/Linux
| [ 0:00] Selinux mode is not installed.
| [ 0:00]               total        used        free      shared  buff/cache   available
| [ 0:00] Mem:           7822        1080        4145          10        2597        6435
| [ 0:00] Swap:          4095           0        4095
| [ 0:00] Filesystem      Size  Used Avail Use% Mounted on
| [ 0:00] /dev/sdc1        18G  8.4G  8.4G  50% /
| [ 0:00] /dev/sdd1        51G  6.1G   43G  13% /lfskernel
| [ 0:00] devtmpfs        3.9G     0  3.9G   0% /dev
| [ 0:00] tmpfs           3.9G     0  3.9G   0% /run
| [ 0:00] @TESTDIR=/tmp/LVMTEST12947.FmgzOovgwr
| [ 0:00] @PREFIX=LVMTEST12947
| [ 0:00] ## LVMCONF: activation {
| [ 0:00] ## LVMCONF:     checks = 1
| [ 0:00] ## LVMCONF:     monitoring = 0
| [ 0:00] ## LVMCONF:     polling_interval = 1
| [ 0:00] ## LVMCONF:     raid_region_size = 512
| [ 0:00] ## LVMCONF:     retry_deactivation = 1
| [ 0:00] ## LVMCONF:     snapshot_autoextend_percent = 50
| [ 0:00] ## LVMCONF:     snapshot_autoextend_threshold = 50
| [ 0:00] ## LVMCONF:     udev_rules = 1
| [ 0:00] ## LVMCONF:     udev_sync = 1
| [ 0:00] ## LVMCONF:     verify_udev_operations = 1
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: allocation {
| [ 0:00] ## LVMCONF:     wipe_signatures_when_zeroing_new_lvs = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: backup {
| [ 0:00] ## LVMCONF:     archive = 0
| [ 0:00] ## LVMCONF:     backup = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: devices {
| [ 0:00] ## LVMCONF:     cache_dir = "@TESTDIR@/etc"
| [ 0:00] ## LVMCONF:     default_data_alignment = 1
| [ 0:00] ## LVMCONF:     dir = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     filter = "a|.*|"
| [ 0:00] ## LVMCONF:     global_filter = [ "a|@TESTDIR@/dev/mapper/@PREFIX@.*pv[0-9_]*$|", "r|.*|" ]
| [ 0:00] ## LVMCONF:     md_component_detection  = 0
| [ 0:00] ## LVMCONF:     scan = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     sysfs_scan = 1
| [ 0:00] ## LVMCONF:     write_cache_state = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: dmeventd {
| [ 0:00] ## LVMCONF:     executable = "/sources/boot/LVM2.2.02.177/test/lib/dmeventd"
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: global {
| [ 0:00] ## LVMCONF:     abort_on_internal_errors = 1
| [ 0:00] ## LVMCONF:     cache_check_executable = "/usr/sbin/cache_check"
| [ 0:00] ## LVMCONF:     cache_dump_executable = "/usr/sbin/cache_dump"
| [ 0:00] ## LVMCONF:     cache_repair_executable = "/usr/sbin/cache_repair"
| [ 0:00] ## LVMCONF:     detect_internal_vg_cache_corruption = 1
| [ 0:00] ## LVMCONF:     fallback_to_local_locking = 0
| [ 0:00] ## LVMCONF:     fsadm_executable = "/sources/boot/LVM2.2.02.177/test/lib/fsadm"
| [ 0:00] ## LVMCONF:     library_dir = "@TESTDIR@/lib"
| [ 0:00] ## LVMCONF:     locking_dir = "@TESTDIR@/var/lock/lvm"
| [ 0:00] ## LVMCONF:     locking_type=1
| [ 0:00] ## LVMCONF:     notify_dbus = 0
| [ 0:00] ## LVMCONF:     si_unit_consistency = 1
| [ 0:00] ## LVMCONF:     thin_check_executable = "/usr/sbin/thin_check"
| [ 0:00] ## LVMCONF:     thin_dump_executable = "/usr/sbin/thin_dump"
| [ 0:00] ## LVMCONF:     thin_repair_executable = "/usr/sbin/thin_repair"
| [ 0:00] ## LVMCONF:     use_lvmetad = 0
| [ 0:00] ## LVMCONF:     use_lvmlockd = 0
| [ 0:00] ## LVMCONF:     use_lvmpolld = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: log {
| [ 0:00] ## LVMCONF:     activation = 1
| [ 0:00] ## LVMCONF:     file = "@TESTDIR@/debug.log"
| [ 0:00] ## LVMCONF:     indent = 1
| [ 0:00] ## LVMCONF:     level = 9
| [ 0:00] ## LVMCONF:     overwrite = 1
| [ 0:00] ## LVMCONF:     syslog = 0
| [ 0:00] ## LVMCONF:     verbose = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] <======== Processing test: "process-each-lv.sh" ========>
| [ 0:00] 
| [ 0:00] aux prepare_devs 10
| [ 0:00] #process-each-lv.sh:21+ aux prepare_devs 10
| [ 0:00] ## preparing loop device....ok (/dev/loop0)
| [ 0:00] ## preparing 10 devices...lib/utils: line 212: DM_UDEV_COOKIE: unbound variable
| [ 0:00] set +vx; STACKTRACE; set -vx
| [ 0:00] ##process-each-lv.sh:21+ set +vx
| [ 0:00] ## - /lfskernel/sources/boot/LVM2.2.02.177/test/shell/process-each-lv.sh:21
| [ 0:00] ## 1 STACKTRACE() called from /lfskernel/sources/boot/LVM2.2.02.177/test/shell/process-each-lv.sh:21
| [ 0:00] <======== Info ========>
| [ 0:00] ## DMINFO:   Name             Maj Min Stat Open Targ Event  UUID                                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv7  253   4 L--w    0    1      0 TEST-@PREFIX@pv7                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv6  253   3 L--w    0    1      0 TEST-@PREFIX@pv6                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv5  253  11 L--w    0    1      0 TEST-@PREFIX@pv5                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv4  253   6 L--w    0    1      0 TEST-@PREFIX@pv4                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv3  253   5 L--w    0    1      0 TEST-@PREFIX@pv3                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv2  253  12 L--w    0    1      0 TEST-@PREFIX@pv2                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv1  253  10 L--w    0    1      0 TEST-@PREFIX@pv1                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv10 253   9 L--w    0    1      0 TEST-@PREFIX@pv10                                               
| [ 0:00] ## DMINFO:   @PREFIX@pv9  253   8 L--w    0    1      0 TEST-@PREFIX@pv9                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv8  253   7 L--w    0    1      0 TEST-@PREFIX@pv8                                                
| [ 0:00] <======== Active table ========>
| [ 0:00] ## DMTABLE:  @PREFIX@pv7: 0 69632 linear 7:0 419840
| [ 0:00] ## DMTABLE:  @PREFIX@pv6: 0 69632 linear 7:0 350208
| [ 0:00] ## DMTABLE:  @PREFIX@pv5: 0 69632 linear 7:0 280576
| [ 0:00] ## DMTABLE:  @PREFIX@pv4: 0 69632 linear 7:0 210944
| [ 0:00] ## DMTABLE:  @PREFIX@pv3: 0 69632 linear 7:0 141312
| [ 0:00] ## DMTABLE:  @PREFIX@pv2: 0 69632 linear 7:0 71680
| [ 0:00] ## DMTABLE:  @PREFIX@pv1: 0 69632 linear 7:0 2048
| [ 0:00] ## DMTABLE:  @PREFIX@pv10: 0 69632 linear 7:0 628736
| [ 0:00] ## DMTABLE:  @PREFIX@pv9: 0 69632 linear 7:0 559104
| [ 0:00] ## DMTABLE:  @PREFIX@pv8: 0 69632 linear 7:0 489472
| [ 0:00] <======== Inactive table ========>
| [ 0:00] ## DMITABLE: @PREFIX@pv7: 
| [ 0:00] ## DMITABLE: @PREFIX@pv6: 
| [ 0:00] ## DMITABLE: @PREFIX@pv5: 
| [ 0:00] ## DMITABLE: @PREFIX@pv4: 
| [ 0:00] ## DMITABLE: @PREFIX@pv3: 
| [ 0:00] ## DMITABLE: @PREFIX@pv2: 
| [ 0:00] ## DMITABLE: @PREFIX@pv1: 
| [ 0:00] ## DMITABLE: @PREFIX@pv10: 
| [ 0:00] ## DMITABLE: @PREFIX@pv9: 
| [ 0:00] ## DMITABLE: @PREFIX@pv8: 
| [ 0:00] <======== Status ========>
| [ 0:00] ## DMSTATUS: @PREFIX@pv7: 0 69632 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv6: 0 69632 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv5: 0 69632 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv4: 0 69632 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv3: 0 69632 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv2: 0 69632 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv1: 0 69632 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv10: 0 69632 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv9: 0 69632 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv8: 0 69632 linear 
| [ 0:00] <======== Tree ========>
| [ 0:00] ## DMTREE:   @PREFIX@pv7 (253:4)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   @PREFIX@pv6 (253:3)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   @PREFIX@pv5 (253:11)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   @PREFIX@pv4 (253:6)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   @PREFIX@pv3 (253:5)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   @PREFIX@pv2 (253:12)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   @PREFIX@pv1 (253:10)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   @PREFIX@pv10 (253:9)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   @PREFIX@pv9 (253:8)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   LFS_vg-lfs (253:2)
| [ 0:00] ## DMTREE:    `- (8:16)
| [ 0:00] ## DMTREE:   @PREFIX@pv8 (253:7)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   centos-swap (253:1)
| [ 0:00] ## DMTREE:    `- (8:2)
| [ 0:00] ## DMTREE:   centos-root (253:0)
| [ 0:00] ## DMTREE:    `- (8:2)
| [ 0:00] <======== Recursive list of @TESTDIR@/dev ========>
| [ 0:00] ## LSLR:	@TESTDIR@/dev:
| [ 0:00] ## LSLR:	total 4
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 0 Feb 21 02:27 loop0
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 1 Feb 21 02:27 loop1
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 2 Feb 21 02:27 loop2
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 3 Feb 21 02:27 loop3
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 4 Feb 21 02:27 loop4
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 5 Feb 21 02:27 loop5
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 6 Feb 21 02:27 loop6
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 7 Feb 21 02:27 loop7
| [ 0:00] ## LSLR:	drwxr-xr-x 2 root root 4096 Feb 21 02:27 mapper
| [ 0:00] ## LSLR:	crw-r--r-- 1 root root 1, 3 Feb 21 02:27 testnull
| [ 0:00] ## LSLR:	
| [ 0:00] ## LSLR:	@TESTDIR@/dev/mapper:
| [ 0:00] ## LSLR:	total 0
| [ 0:00] ## LSLR:	brw------- 1 root root 253,  10 Feb 21 02:27 @PREFIX@pv1
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   9 Feb 21 02:27 @PREFIX@pv10
| [ 0:00] ## LSLR:	brw------- 1 root root 253,  12 Feb 21 02:27 @PREFIX@pv2
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   5 Feb 21 02:27 @PREFIX@pv3
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   6 Feb 21 02:27 @PREFIX@pv4
| [ 0:00] ## LSLR:	brw------- 1 root root 253,  11 Feb 21 02:27 @PREFIX@pv5
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   3 Feb 21 02:27 @PREFIX@pv6
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   4 Feb 21 02:27 @PREFIX@pv7
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   7 Feb 21 02:27 @PREFIX@pv8
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   8 Feb 21 02:27 @PREFIX@pv9
| [ 0:00] ## LSLR:	crw------- 1 root root  10, 236 Feb 21 02:27 control
| [ 0:00] <======== Udev DB content ========>
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-0
| [ 0:00] ## UDEV:	N: dm-0
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-0
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-0
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=0
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-1
| [ 0:00] ## UDEV:	N: dm-1
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-1
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-1
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=1
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-10
| [ 0:00] ## UDEV:	N: dm-10
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-10
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-10
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=10
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-11
| [ 0:00] ## UDEV:	N: dm-11
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-11
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-11
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=11
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-12
| [ 0:00] ## UDEV:	N: dm-12
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-12
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-12
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=12
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-2
| [ 0:00] ## UDEV:	N: dm-2
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-2
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-2
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=2
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-3
| [ 0:00] ## UDEV:	N: dm-3
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-3
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-3
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=3
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-4
| [ 0:00] ## UDEV:	N: dm-4
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-4
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-4
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=4
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-5
| [ 0:00] ## UDEV:	N: dm-5
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-5
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-5
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=5
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-6
| [ 0:00] ## UDEV:	N: dm-6
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-6
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-6
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=6
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-7
| [ 0:00] ## UDEV:	N: dm-7
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-7
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-7
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=7
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-8
| [ 0:00] ## UDEV:	N: dm-8
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-8
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-8
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=8
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-9
| [ 0:00] ## UDEV:	N: dm-9
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-9
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-9
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=9
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/loop0
| [ 0:00] ## UDEV:	N: loop0
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/loop0
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/loop0
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=7
| [ 0:00] ## UDEV:	E: MINOR=0
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] <======== Script file "process-each-lv.sh" ========>
| [ 0:00] ## Line: 1 	 #!/usr/bin/env bash
| [ 0:00] ## Line: 2 	 
| [ 0:00] ## Line: 3 	 # Copyright (C) 2008-2013 Red Hat, Inc. All rights reserved.
| [ 0:00] ## Line: 4 	 #
| [ 0:00] ## Line: 5 	 # This copyrighted material is made available to anyone wishing to use,
| [ 0:00] ## Line: 6 	 # modify, copy, or redistribute it subject to the terms and conditions
| [ 0:00] ## Line: 7 	 # of the GNU General Public License v.2.
| [ 0:00] ## Line: 8 	 #
| [ 0:00] ## Line: 9 	 # You should have received a copy of the GNU General Public License
| [ 0:00] ## Line: 10 	 # along with this program; if not, write to the Free Software Foundation,
| [ 0:00] ## Line: 11 	 # Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA
| [ 0:00] ## Line: 12 	 
| [ 0:00] ## Line: 13 	 test_description='Exercise toollib process_each_lv'
| [ 0:00] ## Line: 14 	 SKIP_WITH_LVMPOLLD=1
| [ 0:00] ## Line: 15 	 
| [ 0:00] ## Line: 16 	 # disable lvmetad logging as it bogs down test systems
| [ 0:00] ## Line: 17 	 export LVM_TEST_LVMETAD_DEBUG_OPTS=${LVM_TEST_LVMETAD_DEBUG_OPTS-}
| [ 0:00] ## Line: 18 	 
| [ 0:00] ## Line: 19 	 . lib/inittest
| [ 0:00] ## Line: 20 	 
| [ 0:00] ## Line: 21 	 aux prepare_devs 10
| [ 0:00] ## Line: 22 	 
| [ 0:00] ## Line: 23 	 #
| [ 0:00] ## Line: 24 	 # process_each_lv is used by a number of lv commands:
| [ 0:00] ## Line: 25 	 # lvconvert lv      (none is error)
| [ 0:00] ## Line: 26 	 # lvchange  vg|lv   (none is error)
| [ 0:00] ## Line: 27 	 # lvremove  vg|lv   (none is error)
| [ 0:00] ## Line: 28 	 # lvdisplay [vg|lv] (none is all)
| [ 0:00] ## Line: 29 	 # vgmknodes [vg|lv] (none is all)
| [ 0:00] ## Line: 30 	 # lvs       [vg|lv] (none is all)
| [ 0:00] ## Line: 31 	 # lvscan            (none is all)
| [ 0:00] ## Line: 32 	 #
| [ 0:00] ## Line: 33 	 # (lv can also be a tag matching an lv tag, and
| [ 0:00] ## Line: 34 	 #  vg can also be a tag matching a vg tag.)
| [ 0:00] ## Line: 35 	 #
| [ 0:00] ## Line: 36 	 # The logic in process_each_vl is mainly related to
| [ 0:00] ## Line: 37 	 # selecting which vgs/lvs to process.
| [ 0:00] ## Line: 38 	 #
| [ 0:00] ## Line: 39 	 
| [ 0:00] ## Line: 40 	 #
| [ 0:00] ## Line: 41 	 # test lvremove vg|lv names
| [ 0:00] ## Line: 42 	 #
| [ 0:00] ## Line: 43 	 
| [ 0:00] ## Line: 44 	 prepare_vgs_() {
| [ 0:00] ## Line: 45 	 	# set up vgs/lvs that we will remove
| [ 0:00] ## Line: 46 	 	vgcreate $SHARED $vg1 "$dev1" "$dev2"
| [ 0:00] ## Line: 47 	 	vgcreate $SHARED $vg2 "$dev3" "$dev4"
| [ 0:00] ## Line: 48 	 	vgcreate $SHARED $vg3 "$dev5" "$dev6"
| [ 0:00] ## Line: 49 	 	vgcreate $SHARED $vg4 "$dev7" "$dev8"
| [ 0:00] ## Line: 50 	 	vgcreate $SHARED $vg5 "$dev9" "$dev10"
| [ 0:00] ## Line: 51 	 	lvcreate -Zn -an -l 2 -n $lv1 $vg1
| [ 0:00] ## Line: 52 	 	lvcreate -Zn -an -l 2 -n $lv1 $vg2
| [ 0:00] ## Line: 53 	 	lvcreate -Zn -an -l 2 -n $lv2 $vg2
| [ 0:00] ## Line: 54 	 	lvcreate -Zn -an -l 2 -n $lv1 $vg3
| [ 0:00] ## Line: 55 	 	lvcreate -Zn -an -l 2 -n $lv2 $vg3
| [ 0:00] ## Line: 56 	 	lvcreate -Zn -an -l 2 -n $lv3 $vg3
| [ 0:00] ## Line: 57 	 	lvcreate -Zn -an -l 2 -n $lv1 $vg5
| [ 0:00] ## Line: 58 	 	lvcreate -Zn -an -l 2 -n $lv2 $vg5
| [ 0:00] ## Line: 59 	 	lvcreate -Zn -an -l 2 -n $lv3 $vg5
| [ 0:00] ## Line: 60 	 	lvcreate -Zn -an -l 2 -n $lv4 $vg5
| [ 0:00] ## Line: 61 	 	lvcreate -Zn -an -l 2 -n $lv5 $vg5
| [ 0:00] ## Line: 62 	 }
| [ 0:00] ## Line: 63 	 
| [ 0:00] ## Line: 64 	 #
| [ 0:00] ## Line: 65 	 #
| [ 0:00] ## Line: 66 	 #
| [ 0:00] ## Line: 67 	 prepare_vgs_
| [ 0:00] ## Line: 68 	 
| [ 0:00] ## Line: 69 	 not lvremove
| [ 0:00] ## Line: 70 	 not lvremove garbage
| [ 0:00] ## Line: 71 	 not lvremove $vg1/garbage
| [ 0:00] ## Line: 72 	 
| [ 0:00] ## Line: 73 	 lvremove $vg1
| [ 0:00] ## Line: 74 	 check lv_exists $vg1
| [ 0:00] ## Line: 75 	 check lv_not_exists $vg1 $lv1
| [ 0:00] ## Line: 76 	 vgremove $vg1
| [ 0:00] ## Line: 77 	 
| [ 0:00] ## Line: 78 	 lvremove $vg2
| [ 0:00] ## Line: 79 	 check lv_exists $vg2
| [ 0:00] ## Line: 80 	 check lv_not_exists $vg2 $lv1 $lv2
| [ 0:00] ## Line: 81 	 vgremove $vg2
| [ 0:00] ## Line: 82 	 
| [ 0:00] ## Line: 83 	 lvremove $vg3/$lv1
| [ 0:00] ## Line: 84 	 lvremove $vg3/$lv2 $vg3/$lv3
| [ 0:00] ## Line: 85 	 check lv_exists $vg3
| [ 0:00] ## Line: 86 	 check lv_not_exists $vg3 $lv1 $lv2 $lv3
| [ 0:00] ## Line: 87 	 vgremove $vg3
| [ 0:00] ## Line: 88 	 
| [ 0:00] ## Line: 89 	 lvremove $vg4
| [ 0:00] ## Line: 90 	 check lv_exists $vg4
| [ 0:00] ## Line: 91 	 vgremove $vg4
| [ 0:00] ## Line: 92 	 
| [ 0:00] ## Line: 93 	 lvremove $vg5/$lv1 $vg5 $vg5/$lv3
| [ 0:00] ## Line: 94 	 check lv_not_exists $vg5 $lv1 $lv2 $lv3 $lv4 $lv5
| [ 0:00] ## Line: 95 	 vgremove $vg5
| [ 0:00] ## Line: 96 	 
| [ 0:00] ## Line: 97 	 
| [ 0:00] ## Line: 98 	 #
| [ 0:00] ## Line: 99 	 # test lvremove vg|lv names from multiple vgs
| [ 0:00] ## Line: 100 	 #
| [ 0:00] ## Line: 101 	 prepare_vgs_
| [ 0:00] ## Line: 102 	 
| [ 0:00] ## Line: 103 	 lvremove $vg2 $vg3/$lv3 $vg5/$lv1
| [ 0:00] ## Line: 104 	 check lv_not_exists $vg2 $lv1 $lv2
| [ 0:00] ## Line: 105 	 check lv_not_exists $vg3 $lv3
| [ 0:00] ## Line: 106 	 check lv_not_exists $vg5 $lv1
| [ 0:00] ## Line: 107 	 
| [ 0:00] ## Line: 108 	 lvremove $vg2 $vg1
| [ 0:00] ## Line: 109 	 check lv_not_exists $vg1 $lv1
| [ 0:00] ## Line: 110 	 
| [ 0:00] ## Line: 111 	 lvremove $vg3/$lv1 $vg3 $vg4 $vg5/$lv2
| [ 0:00] ## Line: 112 	 check lv_not_exists $vg3 $lv1 $lv2
| [ 0:00] ## Line: 113 	 check lv_not_exists $vg5 $lv2
| [ 0:00] ## Line: 114 	 
| [ 0:00] ## Line: 115 	 lvremove $vg5 $vg1 $vg5/$lv3
| [ 0:00] ## Line: 116 	 check lv_not_exists $vg5 $lv3 $lv4 $lv5
| [ 0:00] ## Line: 117 	 
| [ 0:00] ## Line: 118 	 vgremove $vg1 $vg2 $vg3 $vg4 $vg5
| [ 0:00] ## Line: 119 	 
| [ 0:00] ## Line: 120 	 
| [ 0:00] ## Line: 121 	 #
| [ 0:00] ## Line: 122 	 # test lvremove @lvtags
| [ 0:00] ## Line: 123 	 #
| [ 0:00] ## Line: 124 	 prepare_vgs_
| [ 0:00] ## Line: 125 	 
| [ 0:00] ## Line: 126 	 lvchange --addtag V1L1 $vg1/$lv1
| [ 0:00] ## Line: 127 	 lvchange --addtag V2L1 $vg2/$lv1
| [ 0:00] ## Line: 128 	 lvchange --addtag V2L2 $vg2/$lv2
| [ 0:00] ## Line: 129 	 lvchange --addtag V23  $vg2/$lv1
| [ 0:00] ## Line: 130 	 lvchange --addtag V23  $vg2/$lv2
| [ 0:00] ## Line: 131 	 lvchange --addtag V23  $vg3/$lv1
| [ 0:00] ## Line: 132 	 lvchange --addtag V23  $vg3/$lv2
| [ 0:00] ## Line: 133 	 lvchange --addtag V23  $vg3/$lv3
| [ 0:00] ## Line: 134 	 lvchange --addtag V3L2 $vg3/$lv2
| [ 0:00] ## Line: 135 	 lvchange --addtag V3L3A $vg3/$lv3
| [ 0:00] ## Line: 136 	 lvchange --addtag V3L3B $vg3/$lv3
| [ 0:00] ## Line: 137 	 lvchange --addtag V5L1   $vg5/$lv1
| [ 0:00] ## Line: 138 	 lvchange --addtag V5L234 $vg5/$lv2
| [ 0:00] ## Line: 139 	 lvchange --addtag V5L234 $vg5/$lv3
| [ 0:00] ## Line: 140 	 lvchange --addtag V5L234 $vg5/$lv4
| [ 0:00] ## Line: 141 	 lvchange --addtag V5L5   $vg5/$lv5
| [ 0:00] ## Line: 142 	 vgchange -an $vg1 $vg2 $vg3 $vg4 $vg5
| [ 0:00] ## Line: 143 	 
| [ 0:00] ## Line: 144 	 # verify all exist
| [ 0:00] ## Line: 145 	 check lv_exists $vg1 $lv1
| [ 0:00] ## Line: 146 	 check lv_exists $vg2 $lv1 $lv2
| [ 0:00] ## Line: 147 	 check lv_exists $vg3 $lv1 $lv2 $lv3
| [ 0:00] ## Line: 148 	 check lv_exists $vg5 $lv1 $lv2 $lv3 $lv4 $lv5
| [ 0:00] ## Line: 149 	 
| [ 0:00] ## Line: 150 	 lvremove @garbage
| [ 0:00] ## Line: 151 	 
| [ 0:00] ## Line: 152 	 lvremove @V3L3A
| [ 0:00] ## Line: 153 	 check lv_not_exists $vg3 $lv3
| [ 0:00] ## Line: 154 	 # verify unremoved still exist
| [ 0:00] ## Line: 155 	 check lv_exists $vg1 $lv1
| [ 0:00] ## Line: 156 	 check lv_exists $vg2 $lv1 $lv2
| [ 0:00] ## Line: 157 	 check lv_exists $vg3 $lv1 $lv2
| [ 0:00] ## Line: 158 	 check lv_exists $vg5 $lv1 $lv2 $lv3 $lv4 $lv5
| [ 0:00] ## Line: 159 	 
| [ 0:00] ## Line: 160 	 lvremove @V5L234
| [ 0:00] ## Line: 161 	 check lv_not_exists $vg5 $lv2 $lv3 $lv4
| [ 0:00] ## Line: 162 	 # verify unremoved still exist
| [ 0:00] ## Line: 163 	 check lv_exists $vg1 $lv1
| [ 0:00] ## Line: 164 	 check lv_exists $vg2 $lv1 $lv2
| [ 0:00] ## Line: 165 	 check lv_exists $vg3 $lv1 $lv2
| [ 0:00] ## Line: 166 	 check lv_exists $vg5 $lv1 $lv5
| [ 0:00] ## Line: 167 	 
| [ 0:00] ## Line: 168 	 lvremove @V5L1 @V5L5
| [ 0:00] ## Line: 169 	 check lv_not_exists $vg5 $lv1 $lv5
| [ 0:00] ## Line: 170 	 # verify unremoved still exist
| [ 0:00] ## Line: 171 	 check lv_exists $vg1 $lv1
| [ 0:00] ## Line: 172 	 check lv_exists $vg2 $lv1 $lv2
| [ 0:00] ## Line: 173 	 check lv_exists $vg3 $lv1 $lv2
| [ 0:00] ## Line: 174 	 
| [ 0:00] ## Line: 175 	 lvremove @V23 @V1L1 @V3L2
| [ 0:00] ## Line: 176 	 check lv_not_exists $vg1 $lv1
| [ 0:00] ## Line: 177 	 check lv_not_exists $vg2 $lv1 $lv2
| [ 0:00] ## Line: 178 	 check lv_not_exists $vg3 $lv1 $lv2
| [ 0:00] ## Line: 179 	 
| [ 0:00] ## Line: 180 	 vgremove $vg1 $vg2 $vg3 $vg4 $vg5
| [ 0:00] ## Line: 181 	 
| [ 0:00] ## Line: 182 	 
| [ 0:00] ## Line: 183 	 #
| [ 0:00] ## Line: 184 	 # test lvremove @vgtags
| [ 0:00] ## Line: 185 	 #
| [ 0:00] ## Line: 186 	 prepare_vgs_
| [ 0:00] ## Line: 187 	 
| [ 0:00] ## Line: 188 	 vgchange --addtag V1  $vg1
| [ 0:00] ## Line: 189 	 vgchange --addtag V23 $vg2
| [ 0:00] ## Line: 190 	 vgchange --addtag V23 $vg3
| [ 0:00] ## Line: 191 	 vgchange --addtag V35 $vg3
| [ 0:00] ## Line: 192 	 vgchange --addtag V4  $vg4
| [ 0:00] ## Line: 193 	 vgchange --addtag V35 $vg5
| [ 0:00] ## Line: 194 	 vgchange --addtag V5  $vg5
| [ 0:00] ## Line: 195 	 vgchange -an $vg1 $vg2 $vg3 $vg4 $vg5
| [ 0:00] ## Line: 196 	 
| [ 0:00] ## Line: 197 	 lvremove @V4
| [ 0:00] ## Line: 198 	 # verify unremoved exist
| [ 0:00] ## Line: 199 	 check lv_exists $vg1 $lv1
| [ 0:00] ## Line: 200 	 check lv_exists $vg2 $lv1 $lv2
| [ 0:00] ## Line: 201 	 check lv_exists $vg3 $lv1 $lv2 $lv3
| [ 0:00] ## Line: 202 	 check lv_exists $vg5 $lv1 $lv2 $lv3 $lv4 $lv5
| [ 0:00] ## Line: 203 	 
| [ 0:00] ## Line: 204 	 lvremove @V5
| [ 0:00] ## Line: 205 	 check lv_not_exists $vg5 $lv1 $lv2 $lv3 $lv4 $lv5
| [ 0:00] ## Line: 206 	 # verify unremoved exist
| [ 0:00] ## Line: 207 	 check lv_exists $vg1 $lv1
| [ 0:00] ## Line: 208 	 check lv_exists $vg2 $lv1 $lv2
| [ 0:00] ## Line: 209 	 check lv_exists $vg3 $lv1 $lv2 $lv3
| [ 0:00] ## Line: 210 	 
| [ 0:00] ## Line: 211 	 lvremove @V1 @V23
| [ 0:00] ## Line: 212 	 check lv_not_exists $vg1 $lv1
| [ 0:00] ## Line: 213 	 check lv_not_exists $vg2 $lv1 $lv2
| [ 0:00] ## Line: 214 	 check lv_not_exists $vg3 $lv1 $lv2 $lv3
| [ 0:00] ## Line: 215 	 
| [ 0:00] ## Line: 216 	 vgremove $vg1 $vg2 $vg3 $vg4 $vg5
| [ 0:00] ## Line: 217 	 
| [ 0:00] ## Line: 218 	 #
| [ 0:00] ## Line: 219 	 #
| [ 0:00] ## Line: 220 	 #
| [ 0:00] ## Line: 221 	 prepare_vgs_
| [ 0:00] ## Line: 222 	 
| [ 0:00] ## Line: 223 	 vgchange --addtag V1  $vg1
| [ 0:00] ## Line: 224 	 vgchange --addtag V23 $vg2
| [ 0:00] ## Line: 225 	 vgchange --addtag V23 $vg3
| [ 0:00] ## Line: 226 	 vgchange --addtag V35 $vg3
| [ 0:00] ## Line: 227 	 vgchange --addtag V4  $vg4
| [ 0:00] ## Line: 228 	 vgchange --addtag V35 $vg5
| [ 0:00] ## Line: 229 	 vgchange --addtag V5  $vg5
| [ 0:00] ## Line: 230 	 
| [ 0:00] ## Line: 231 	 lvremove @V35 @V5
| [ 0:00] ## Line: 232 	 check lv_not_exists $vg3 $lv1 $lv2 /$lv3
| [ 0:00] ## Line: 233 	 check lv_not_exists $vg5 $lv1 $lv2 $lv3 $lv4 $lv5
| [ 0:00] ## Line: 234 	 # verify unremoved exist
| [ 0:00] ## Line: 235 	 check lv_exists $vg1 $lv1
| [ 0:00] ## Line: 236 	 check lv_exists $vg2 $lv1 $lv2
| [ 0:00] ## Line: 237 	 
| [ 0:00] ## Line: 238 	 lvremove @V1 @V23
| [ 0:00] ## Line: 239 	 check lv_not_exists $vg1 $lv1
| [ 0:00] ## Line: 240 	 check lv_not_exists $vg2 $lv1 $lv2
| [ 0:00] ## Line: 241 	 
| [ 0:00] ## Line: 242 	 vgremove $vg1 $vg2 $vg3 $vg4 $vg5
| [ 0:00] ## Line: 243 	 
| [ 0:00] ## Line: 244 	 
| [ 0:00] ## Line: 245 	 #
| [ 0:00] ## Line: 246 	 # test lvremove vg|lv names and @lvtags
| [ 0:00] ## Line: 247 	 #
| [ 0:00] ## Line: 248 	 prepare_vgs_
| [ 0:00] ## Line: 249 	 
| [ 0:00] ## Line: 250 	 lvchange --addtag V1L1 $vg1/$lv1
| [ 0:00] ## Line: 251 	 lvchange --addtag V2L1 $vg2/$lv1
| [ 0:00] ## Line: 252 	 lvchange --addtag V2L2 $vg2/$lv2
| [ 0:00] ## Line: 253 	 lvchange --addtag V23  $vg2/$lv1
| [ 0:00] ## Line: 254 	 lvchange --addtag V23  $vg2/$lv2
| [ 0:00] ## Line: 255 	 lvchange --addtag V23  $vg3/$lv1
| [ 0:00] ## Line: 256 	 lvchange --addtag V23  $vg3/$lv2
| [ 0:00] ## Line: 257 	 lvchange --addtag V23  $vg3/$lv3
| [ 0:00] ## Line: 258 	 lvchange --addtag V3L2 $vg3/$lv2
| [ 0:00] ## Line: 259 	 lvchange --addtag V3L3A $vg3/$lv3
| [ 0:00] ## Line: 260 	 lvchange --addtag V3L3B $vg3/$lv3
| [ 0:00] ## Line: 261 	 lvchange --addtag V5L1   $vg5/$lv1
| [ 0:00] ## Line: 262 	 lvchange --addtag V5L234 $vg5/$lv2
| [ 0:00] ## Line: 263 	 lvchange --addtag V5L234 $vg5/$lv3
| [ 0:00] ## Line: 264 	 lvchange --addtag V5L234 $vg5/$lv4
| [ 0:00] ## Line: 265 	 lvchange --addtag V5L5   $vg5/$lv5
| [ 0:00] ## Line: 266 	 vgchange -an $vg1 $vg2 $vg3 $vg4 $vg5
| [ 0:00] ## Line: 267 	 
| [ 0:00] ## Line: 268 	 lvremove $vg1/$lv1 @V3L2 @V5L234
| [ 0:00] ## Line: 269 	 check lv_not_exists $vg1 $lv1
| [ 0:00] ## Line: 270 	 check lv_not_exists $vg3 $lv2
| [ 0:00] ## Line: 271 	 check lv_not_exists $vg5 $lv2 $lv3 $lv4
| [ 0:00] ## Line: 272 	 # verify unremoved exist
| [ 0:00] ## Line: 273 	 check lv_exists $vg2 $lv1 $lv2
| [ 0:00] ## Line: 274 	 check lv_exists $vg3 $lv1 $lv3
| [ 0:00] ## Line: 275 	 check lv_exists $vg5 $lv1 $lv5
| [ 0:00] ## Line: 276 	 
| [ 0:00] ## Line: 277 	 lvremove $vg2/$lv1 @V23 $vg5/$lv1 @V5L5
| [ 0:00] ## Line: 278 	 
| [ 0:00] ## Line: 279 	 vgremove $vg1 $vg2 $vg3 $vg4 $vg5
| [ 0:00] ## Line: 280 	 
| [ 0:00] ## Line: 281 	 
| [ 0:00] ## Line: 282 	 #
| [ 0:00] ## Line: 283 	 # test lvremove vg|lv names and @vgtags
| [ 0:00] ## Line: 284 	 #
| [ 0:00] ## Line: 285 	 prepare_vgs_
| [ 0:00] ## Line: 286 	 
| [ 0:00] ## Line: 287 	 vgchange --addtag V1  $vg1
| [ 0:00] ## Line: 288 	 vgchange --addtag V23 $vg2
| [ 0:00] ## Line: 289 	 vgchange --addtag V23 $vg3
| [ 0:00] ## Line: 290 	 vgchange --addtag V35 $vg3
| [ 0:00] ## Line: 291 	 vgchange --addtag V4  $vg4
| [ 0:00] ## Line: 292 	 vgchange --addtag V35 $vg5
| [ 0:00] ## Line: 293 	 vgchange --addtag V5  $vg5
| [ 0:00] ## Line: 294 	 
| [ 0:00] ## Line: 295 	 lvremove $vg1/$lv1 @V35
| [ 0:00] ## Line: 296 	 check lv_not_exists $vg1 $lv1
| [ 0:00] ## Line: 297 	 check lv_not_exists $vg3 $lv1 $lv2 $lv3
| [ 0:00] ## Line: 298 	 check lv_not_exists $vg5 $lv1 $lv2 $lv3 $lv4 $lv5
| [ 0:00] ## Line: 299 	 # verify unremoved exist
| [ 0:00] ## Line: 300 	 check lv_exists $vg2 $lv1 $lv2
| [ 0:00] ## Line: 301 	 
| [ 0:00] ## Line: 302 	 lvremove $vg2/$lv1 @V23 $vg2/$lv2
| [ 0:00] ## Line: 303 	 
| [ 0:00] ## Line: 304 	 vgremove $vg1 $vg2 $vg3 $vg4 $vg5
| [ 0:00] ## Line: 305 	 
| [ 0:00] ## Line: 306 	 
| [ 0:00] ## Line: 307 	 #
| [ 0:00] ## Line: 308 	 # test lvremove @lvtags and @vgtags
| [ 0:00] ## Line: 309 	 #
| [ 0:00] ## Line: 310 	 prepare_vgs_
| [ 0:00] ## Line: 311 	 
| [ 0:00] ## Line: 312 	 lvchange --addtag V1L1 $vg1/$lv1
| [ 0:00] ## Line: 313 	 lvchange --addtag V2L1 $vg2/$lv1
| [ 0:00] ## Line: 314 	 lvchange --addtag V2L2 $vg2/$lv2
| [ 0:00] ## Line: 315 	 lvchange --addtag V23  $vg2/$lv1
| [ 0:00] ## Line: 316 	 lvchange --addtag V23  $vg2/$lv2
| [ 0:00] ## Line: 317 	 lvchange --addtag V23  $vg3/$lv1
| [ 0:00] ## Line: 318 	 lvchange --addtag V23  $vg3/$lv2
| [ 0:00] ## Line: 319 	 # to check that vg tag @V23 includes this
| [ 0:00] ## Line: 320 	 # lvchange --addtag V23  $vg3/$lv3
| [ 0:00] ## Line: 321 	 lvchange --addtag V3L2 $vg3/$lv2
| [ 0:00] ## Line: 322 	 lvchange --addtag V3L3A $vg3/$lv3
| [ 0:00] ## Line: 323 	 lvchange --addtag V3L3B $vg3/$lv3
| [ 0:00] ## Line: 324 	 lvchange --addtag V5L1   $vg5/$lv1
| [ 0:00] ## Line: 325 	 lvchange --addtag V5L234 $vg5/$lv2
| [ 0:00] ## Line: 326 	 lvchange --addtag V5L234 $vg5/$lv3
| [ 0:00] ## Line: 327 	 lvchange --addtag V5L234 $vg5/$lv4
| [ 0:00] ## Line: 328 	 lvchange --addtag V5L5   $vg5/$lv5
| [ 0:00] ## Line: 329 	 vgchange --addtag V1  $vg1
| [ 0:00] ## Line: 330 	 vgchange --addtag V23 $vg2
| [ 0:00] ## Line: 331 	 vgchange --addtag V23 $vg3
| [ 0:00] ## Line: 332 	 vgchange --addtag V35 $vg3
| [ 0:00] ## Line: 333 	 vgchange --addtag V4  $vg4
| [ 0:00] ## Line: 334 	 vgchange --addtag V35 $vg5
| [ 0:00] ## Line: 335 	 vgchange --addtag V5  $vg5
| [ 0:00] ## Line: 336 	 
| [ 0:00] ## Line: 337 	 lvremove @V23 @V35
| [ 0:00] ## Line: 338 	 check lv_not_exists $vg2 $lv1 $lv2
| [ 0:00] ## Line: 339 	 check lv_not_exists $vg3 $lv1 $lv2 $lv3
| [ 0:00] ## Line: 340 	 check lv_not_exists $vg5 $lv1 $lv2 $lv3 $lv4 $lv5
| [ 0:00] ## Line: 341 	 # verify unremoved exist
| [ 0:00] ## Line: 342 	 check lv_exists $vg1 $lv1
| [ 0:00] ## Line: 343 	 
| [ 0:00] ## Line: 344 	 lvremove @V1 @V1L1
| [ 0:00] ## Line: 345 	 check lv_not_exists $vg1 $lv1
| [ 0:00] ## Line: 346 	 
| [ 0:00] ## Line: 347 	 vgremove $vg1 $vg2 $vg3 $vg4 $vg5
| [ 0:00] ## Line: 348 	 
| [ 0:00] ## Line: 349 	 
| [ 0:00] ## Line: 350 	 #
| [ 0:00] ## Line: 351 	 # test lvremove vg|lv names and @lvtags and @vgtags
| [ 0:00] ## Line: 352 	 #
| [ 0:00] ## Line: 353 	 prepare_vgs_
| [ 0:00] ## Line: 354 	 
| [ 0:00] ## Line: 355 	 lvchange --addtag V1L1 $vg1/$lv1
| [ 0:00] ## Line: 356 	 lvchange --addtag V2L1 $vg2/$lv1
| [ 0:00] ## Line: 357 	 lvchange --addtag V2L2 $vg2/$lv2
| [ 0:00] ## Line: 358 	 lvchange --addtag V23  $vg2/$lv1
| [ 0:00] ## Line: 359 	 lvchange --addtag V23  $vg2/$lv2
| [ 0:00] ## Line: 360 	 lvchange --addtag V23  $vg3/$lv1
| [ 0:00] ## Line: 361 	 lvchange --addtag V23  $vg3/$lv2
| [ 0:00] ## Line: 362 	 # to check that vg tag @V23 includes this
| [ 0:00] ## Line: 363 	 # lvchange --addtag V23  $vg3/$lv3
| [ 0:00] ## Line: 364 	 lvchange --addtag V3L2 $vg3/$lv2
| [ 0:00] ## Line: 365 	 lvchange --addtag V3L3A $vg3/$lv3
| [ 0:00] ## Line: 366 	 lvchange --addtag V3L3B $vg3/$lv3
| [ 0:00] ## Line: 367 	 lvchange --addtag V5L1   $vg5/$lv1
| [ 0:00] ## Line: 368 	 lvchange --addtag V5L234 $vg5/$lv2
| [ 0:00] ## Line: 369 	 lvchange --addtag V5L234 $vg5/$lv3
| [ 0:00] ## Line: 370 	 lvchange --addtag V5L234 $vg5/$lv4
| [ 0:00] ## Line: 371 	 lvchange --addtag V5L5   $vg5/$lv5
| [ 0:00] ## Line: 372 	 vgchange --addtag V1  $vg1
| [ 0:00] ## Line: 373 	 vgchange --addtag V23 $vg2
| [ 0:00] ## Line: 374 	 vgchange --addtag V23 $vg3
| [ 0:00] ## Line: 375 	 vgchange --addtag V35 $vg3
| [ 0:00] ## Line: 376 	 vgchange --addtag V4  $vg4
| [ 0:00] ## Line: 377 	 vgchange --addtag V35 $vg5
| [ 0:00] ## Line: 378 	 vgchange --addtag V5  $vg5
| [ 0:00] ## Line: 379 	 
| [ 0:00] ## Line: 380 	 lvremove $vg1/$lv1 @V23 @V5L5
| [ 0:00] ## Line: 381 	 check lv_not_exists $vg1 $lv1
| [ 0:00] ## Line: 382 	 check lv_not_exists $vg2 $lv1 $lv2
| [ 0:00] ## Line: 383 	 check lv_not_exists $vg3 $lv1 $lv2 $lv3
| [ 0:00] ## Line: 384 	 check lv_not_exists $vg5 $lv5
| [ 0:00] ## Line: 385 	 # verify unremoved exist
| [ 0:00] ## Line: 386 	 check lv_exists $vg5 $lv1 $lv2 $lv3 $lv4
| [ 0:00] ## Line: 387 	 
| [ 0:00] ## Line: 388 	 lvremove $vg5/$lv2 @V5L234 @V5
| [ 0:00] ## Line: 389 	 check lv_not_exists $vg5 $lv1 $lv2 $lv3 $lv4
| [ 0:00] ## Line: 390 	 
| [ 0:00] ## Line: 391 	 vgremove $vg1 $vg2 $vg3 $vg4 $vg5
| [ 0:00] ## Line: 392 	 
| [ 0:00] ## Line: 393 	 
| [ 0:00] ## Line: 394 	 #
| [ 0:00] ## Line: 395 	 # test lvs: empty, vg(s), lv(s), vgtag(s), lvtag(s), garbage, combinations
| [ 0:00] ## Line: 396 	 #
| [ 0:00] ## Line: 397 	 prepare_vgs_
| [ 0:00] ## Line: 398 	 
| [ 0:00] ## Line: 399 	 lvchange --addtag V1L1 $vg1/$lv1
| [ 0:00] ## Line: 400 	 lvchange --addtag V2L1 $vg2/$lv1
| [ 0:00] ## Line: 401 	 lvchange --addtag V2L2 $vg2/$lv2
| [ 0:00] ## Line: 402 	 lvchange --addtag V23  $vg2/$lv1
| [ 0:00] ## Line: 403 	 lvchange --addtag V23  $vg2/$lv2
| [ 0:00] ## Line: 404 	 lvchange --addtag V23  $vg3/$lv1
| [ 0:00] ## Line: 405 	 lvchange --addtag V23  $vg3/$lv2
| [ 0:00] ## Line: 406 	 lvchange --addtag V23  $vg3/$lv3
| [ 0:00] ## Line: 407 	 lvchange --addtag V3L2 $vg3/$lv2
| [ 0:00] ## Line: 408 	 lvchange --addtag V3L3A $vg3/$lv3
| [ 0:00] ## Line: 409 	 lvchange --addtag V3L3B $vg3/$lv3
| [ 0:00] ## Line: 410 	 lvchange --addtag V5L1   $vg5/$lv1
| [ 0:00] ## Line: 411 	 lvchange --addtag V5L234 $vg5/$lv2
| [ 0:00] ## Line: 412 	 lvchange --addtag V5L234 $vg5/$lv3
| [ 0:00] ## Line: 413 	 lvchange --addtag V5L234 $vg5/$lv4
| [ 0:00] ## Line: 414 	 lvchange --addtag V5L5   $vg5/$lv5
| [ 0:00] ## Line: 415 	 vgchange --addtag V1  $vg1
| [ 0:00] ## Line: 416 	 vgchange --addtag V23 $vg2
| [ 0:00] ## Line: 417 	 vgchange --addtag V23 $vg3
| [ 0:00] ## Line: 418 	 vgchange --addtag V35 $vg3
| [ 0:00] ## Line: 419 	 vgchange --addtag V4  $vg4
| [ 0:00] ## Line: 420 	 vgchange --addtag V35 $vg5
| [ 0:00] ## Line: 421 	 vgchange --addtag V5  $vg5
| [ 0:00] ## Line: 422 	 
| [ 0:00] ## Line: 423 	 # empty
| [ 0:00] ## Line: 424 	 lvs -o vg_name,lv_name --separator '-' >err
| [ 0:00] ## Line: 425 	 grep $vg1-$lv1 err
| [ 0:00] ## Line: 426 	 grep $vg2-$lv1 err
| [ 0:00] ## Line: 427 	 grep $vg2-$lv2 err
| [ 0:00] ## Line: 428 	 grep $vg3-$lv1 err
| [ 0:00] ## Line: 429 	 grep $vg3-$lv2 err
| [ 0:00] ## Line: 430 	 grep $vg3-$lv3 err
| [ 0:00] ## Line: 431 	 grep $vg5-$lv1 err
| [ 0:00] ## Line: 432 	 grep $vg5-$lv2 err
| [ 0:00] ## Line: 433 	 grep $vg5-$lv3 err
| [ 0:00] ## Line: 434 	 grep $vg5-$lv4 err
| [ 0:00] ## Line: 435 	 grep $vg5-$lv5 err
| [ 0:00] ## Line: 436 	 
| [ 0:00] ## Line: 437 	 # vg
| [ 0:00] ## Line: 438 	 lvs -o vg_name,lv_name --separator '-' $vg1 >err
| [ 0:00] ## Line: 439 	 grep $vg1-$lv1 err
| [ 0:00] ## Line: 440 	 not grep $vg2-$lv1 err
| [ 0:00] ## Line: 441 	 not grep $vg2-$lv2 err
| [ 0:00] ## Line: 442 	 not grep $vg3-$lv1 err
| [ 0:00] ## Line: 443 	 not grep $vg3-$lv2 err
| [ 0:00] ## Line: 444 	 not grep $vg3-$lv3 err
| [ 0:00] ## Line: 445 	 not grep $vg5-$lv1 err
| [ 0:00] ## Line: 446 	 not grep $vg5-$lv2 err
| [ 0:00] ## Line: 447 	 not grep $vg5-$lv3 err
| [ 0:00] ## Line: 448 	 not grep $vg5-$lv4 err
| [ 0:00] ## Line: 449 	 not grep $vg5-$lv5 err
| [ 0:00] ## Line: 450 	 
| [ 0:00] ## Line: 451 	 # vgs
| [ 0:00] ## Line: 452 	 lvs -o vg_name,lv_name --separator '-' $vg1 $vg2 >err
| [ 0:00] ## Line: 453 	 grep $vg1-$lv1 err
| [ 0:00] ## Line: 454 	 grep $vg2-$lv1 err
| [ 0:00] ## Line: 455 	 grep $vg2-$lv2 err
| [ 0:00] ## Line: 456 	 not grep $vg3-$lv1 err
| [ 0:00] ## Line: 457 	 not grep $vg3-$lv2 err
| [ 0:00] ## Line: 458 	 not grep $vg3-$lv3 err
| [ 0:00] ## Line: 459 	 not grep $vg5-$lv1 err
| [ 0:00] ## Line: 460 	 not grep $vg5-$lv2 err
| [ 0:00] ## Line: 461 	 not grep $vg5-$lv3 err
| [ 0:00] ## Line: 462 	 not grep $vg5-$lv4 err
| [ 0:00] ## Line: 463 	 not grep $vg5-$lv5 err
| [ 0:00] ## Line: 464 	 
| [ 0:00] ## Line: 465 	 # lv
| [ 0:00] ## Line: 466 	 lvs -o vg_name,lv_name --separator '-' $vg1/$lv1 >err
| [ 0:00] ## Line: 467 	 grep $vg1-$lv1 err
| [ 0:00] ## Line: 468 	 not grep $vg2-$lv1 err
| [ 0:00] ## Line: 469 	 not grep $vg2-$lv2 err
| [ 0:00] ## Line: 470 	 not grep $vg3-$lv1 err
| [ 0:00] ## Line: 471 	 not grep $vg3-$lv2 err
| [ 0:00] ## Line: 472 	 not grep $vg3-$lv3 err
| [ 0:00] ## Line: 473 	 not grep $vg5-$lv1 err
| [ 0:00] ## Line: 474 	 not grep $vg5-$lv2 err
| [ 0:00] ## Line: 475 	 not grep $vg5-$lv3 err
| [ 0:00] ## Line: 476 	 not grep $vg5-$lv4 err
| [ 0:00] ## Line: 477 	 not grep $vg5-$lv5 err
| [ 0:00] ## Line: 478 	 
| [ 0:00] ## Line: 479 	 # lvs
| [ 0:00] ## Line: 480 	 lvs -o vg_name,lv_name --separator '-' $vg1/$lv1 $vg2/$lv1 $vg2/$lv2 >err
| [ 0:00] ## Line: 481 	 grep $vg1-$lv1 err
| [ 0:00] ## Line: 482 	 grep $vg2-$lv1 err
| [ 0:00] ## Line: 483 	 grep $vg2-$lv2 err
| [ 0:00] ## Line: 484 	 not grep $vg3-$lv1 err
| [ 0:00] ## Line: 485 	 not grep $vg3-$lv2 err
| [ 0:00] ## Line: 486 	 not grep $vg3-$lv3 err
| [ 0:00] ## Line: 487 	 not grep $vg5-$lv1 err
| [ 0:00] ## Line: 488 	 not grep $vg5-$lv2 err
| [ 0:00] ## Line: 489 	 not grep $vg5-$lv3 err
| [ 0:00] ## Line: 490 	 not grep $vg5-$lv4 err
| [ 0:00] ## Line: 491 	 not grep $vg5-$lv5 err
| [ 0:00] ## Line: 492 	 
| [ 0:00] ## Line: 493 	 # vgtag
| [ 0:00] ## Line: 494 	 lvs -o vg_name,lv_name --separator '-' @V1 >err
| [ 0:00] ## Line: 495 	 grep $vg1-$lv1 err
| [ 0:00] ## Line: 496 	 not grep $vg2-$lv1 err
| [ 0:00] ## Line: 497 	 not grep $vg2-$lv2 err
| [ 0:00] ## Line: 498 	 not grep $vg3-$lv1 err
| [ 0:00] ## Line: 499 	 not grep $vg3-$lv2 err
| [ 0:00] ## Line: 500 	 not grep $vg3-$lv3 err
| [ 0:00] ## Line: 501 	 not grep $vg5-$lv1 err
| [ 0:00] ## Line: 502 	 not grep $vg5-$lv2 err
| [ 0:00] ## Line: 503 	 not grep $vg5-$lv3 err
| [ 0:00] ## Line: 504 	 not grep $vg5-$lv4 err
| [ 0:00] ## Line: 505 	 not grep $vg5-$lv5 err
| [ 0:00] ## Line: 506 	 
| [ 0:00] ## Line: 507 	 # vgtags
| [ 0:00] ## Line: 508 	 lvs -o vg_name,lv_name --separator '-' @V1 @V35 >err
| [ 0:00] ## Line: 509 	 grep $vg1-$lv1 err
| [ 0:00] ## Line: 510 	 not grep $vg2-$lv1 err
| [ 0:00] ## Line: 511 	 not grep $vg2-$lv2 err
| [ 0:00] ## Line: 512 	 grep $vg3-$lv1 err
| [ 0:00] ## Line: 513 	 grep $vg3-$lv2 err
| [ 0:00] ## Line: 514 	 grep $vg3-$lv3 err
| [ 0:00] ## Line: 515 	 grep $vg5-$lv1 err
| [ 0:00] ## Line: 516 	 grep $vg5-$lv2 err
| [ 0:00] ## Line: 517 	 grep $vg5-$lv3 err
| [ 0:00] ## Line: 518 	 grep $vg5-$lv4 err
| [ 0:00] ## Line: 519 	 grep $vg5-$lv5 err
| [ 0:00] ## Line: 520 	 
| [ 0:00] ## Line: 521 	 # lvtag
| [ 0:00] ## Line: 522 	 lvs -o vg_name,lv_name --separator '-' @V1L1 >err
| [ 0:00] ## Line: 523 	 grep $vg1-$lv1 err
| [ 0:00] ## Line: 524 	 not grep $vg2-$lv1 err
| [ 0:00] ## Line: 525 	 not grep $vg2-$lv2 err
| [ 0:00] ## Line: 526 	 not grep $vg3-$lv1 err
| [ 0:00] ## Line: 527 	 not grep $vg3-$lv2 err
| [ 0:00] ## Line: 528 	 not grep $vg3-$lv3 err
| [ 0:00] ## Line: 529 	 not grep $vg5-$lv1 err
| [ 0:00] ## Line: 530 	 not grep $vg5-$lv2 err
| [ 0:00] ## Line: 531 	 not grep $vg5-$lv3 err
| [ 0:00] ## Line: 532 	 not grep $vg5-$lv4 err
| [ 0:00] ## Line: 533 	 not grep $vg5-$lv5 err
| [ 0:00] ## Line: 534 	 
| [ 0:00] ## Line: 535 	 # lvtags
| [ 0:00] ## Line: 536 	 lvs -o vg_name,lv_name --separator '-' @V1L1 @V5L234 >err
| [ 0:00] ## Line: 537 	 grep $vg1-$lv1 err
| [ 0:00] ## Line: 538 	 not grep $vg2-$lv1 err
| [ 0:00] ## Line: 539 	 not grep $vg2-$lv2 err
| [ 0:00] ## Line: 540 	 not grep $vg3-$lv1 err
| [ 0:00] ## Line: 541 	 not grep $vg3-$lv2 err
| [ 0:00] ## Line: 542 	 not grep $vg3-$lv3 err
| [ 0:00] ## Line: 543 	 not grep $vg5-$lv1 err
| [ 0:00] ## Line: 544 	 grep $vg5-$lv2 err
| [ 0:00] ## Line: 545 	 grep $vg5-$lv3 err
| [ 0:00] ## Line: 546 	 grep $vg5-$lv4 err
| [ 0:00] ## Line: 547 	 not grep $vg5-$lv5 err
| [ 0:00] ## Line: 548 	 
| [ 0:00] ## Line: 549 	 # vg and lv and vgtag and lvtag
| [ 0:00] ## Line: 550 	 lvs -o vg_name,lv_name --separator '-' $vg2 $vg5/$lv5 @V1 @V5L234 >err
| [ 0:00] ## Line: 551 	 grep $vg1-$lv1 err
| [ 0:00] ## Line: 552 	 grep $vg2-$lv1 err
| [ 0:00] ## Line: 553 	 grep $vg2-$lv2 err
| [ 0:00] ## Line: 554 	 not grep $vg3-$lv1 err
| [ 0:00] ## Line: 555 	 not grep $vg3-$lv2 err
| [ 0:00] ## Line: 556 	 not grep $vg3-$lv3 err
| [ 0:00] ## Line: 557 	 not grep $vg5-$lv1 err
| [ 0:00] ## Line: 558 	 grep $vg5-$lv2 err
| [ 0:00] ## Line: 559 	 grep $vg5-$lv3 err
| [ 0:00] ## Line: 560 	 grep $vg5-$lv4 err
| [ 0:00] ## Line: 561 	 grep $vg5-$lv5 err
| [ 0:00] ## Line: 562 	 
| [ 0:00] ## Line: 563 	 # garbage name gives an error if used without a tag
| [ 0:00] ## Line: 564 	 
| [ 0:00] ## Line: 565 	 not lvs -o vg_name,lv_name --separator '-' garbage >err
| [ 0:00] ## Line: 566 	 not grep $vg1-$lv1 err
| [ 0:00] ## Line: 567 	 not grep $vg2-$lv1 err
| [ 0:00] ## Line: 568 	 not grep $vg2-$lv2 err
| [ 0:00] ## Line: 569 	 not grep $vg3-$lv1 err
| [ 0:00] ## Line: 570 	 not grep $vg3-$lv2 err
| [ 0:00] ## Line: 571 	 not grep $vg3-$lv3 err
| [ 0:00] ## Line: 572 	 not grep $vg5-$lv1 err
| [ 0:00] ## Line: 573 	 not grep $vg5-$lv2 err
| [ 0:00] ## Line: 574 	 not grep $vg5-$lv3 err
| [ 0:00] ## Line: 575 	 not grep $vg5-$lv4 err
| [ 0:00] ## Line: 576 	 not grep $vg5-$lv5 err
| [ 0:00] ## Line: 577 	 
| [ 0:00] ## Line: 578 	 not lvs -o vg_name,lv_name --separator '-' $vg1/$lv1 garbage >err
| [ 0:00] ## Line: 579 	 grep $vg1-$lv1 err
| [ 0:00] ## Line: 580 	 not grep $vg2-$lv1 err
| [ 0:00] ## Line: 581 	 not grep $vg2-$lv2 err
| [ 0:00] ## Line: 582 	 not grep $vg3-$lv1 err
| [ 0:00] ## Line: 583 	 not grep $vg3-$lv2 err
| [ 0:00] ## Line: 584 	 not grep $vg3-$lv3 err
| [ 0:00] ## Line: 585 	 not grep $vg5-$lv1 err
| [ 0:00] ## Line: 586 	 not grep $vg5-$lv2 err
| [ 0:00] ## Line: 587 	 not grep $vg5-$lv3 err
| [ 0:00] ## Line: 588 	 not grep $vg5-$lv4 err
| [ 0:00] ## Line: 589 	 not grep $vg5-$lv5 err
| [ 0:00] ## Line: 590 	 
| [ 0:00] ## Line: 591 	 # garbage name does not give an error if used with a tag
| [ 0:00] ## Line: 592 	 
| [ 0:00] ## Line: 593 	 lvs -o vg_name,lv_name --separator '-' @V1 garbage >err
| [ 0:00] ## Line: 594 	 grep $vg1-$lv1 err
| [ 0:00] ## Line: 595 	 not grep $vg2-$lv1 err
| [ 0:00] ## Line: 596 	 not grep $vg2-$lv2 err
| [ 0:00] ## Line: 597 	 not grep $vg3-$lv1 err
| [ 0:00] ## Line: 598 	 not grep $vg3-$lv2 err
| [ 0:00] ## Line: 599 	 not grep $vg3-$lv3 err
| [ 0:00] ## Line: 600 	 not grep $vg5-$lv1 err
| [ 0:00] ## Line: 601 	 not grep $vg5-$lv2 err
| [ 0:00] ## Line: 602 	 not grep $vg5-$lv3 err
| [ 0:00] ## Line: 603 	 not grep $vg5-$lv4 err
| [ 0:00] ## Line: 604 	 not grep $vg5-$lv5 err
| [ 0:00] ## Line: 605 	 
| [ 0:00] ## Line: 606 	 lvs -o vg_name,lv_name --separator '-' @garbage garbage >err
| [ 0:00] ## Line: 607 	 not grep $vg1-$lv1 err
| [ 0:00] ## Line: 608 	 not grep $vg2-$lv1 err
| [ 0:00] ## Line: 609 	 not grep $vg2-$lv2 err
| [ 0:00] ## Line: 610 	 not grep $vg3-$lv1 err
| [ 0:00] ## Line: 611 	 not grep $vg3-$lv2 err
| [ 0:00] ## Line: 612 	 not grep $vg3-$lv3 err
| [ 0:00] ## Line: 613 	 not grep $vg5-$lv1 err
| [ 0:00] ## Line: 614 	 not grep $vg5-$lv2 err
| [ 0:00] ## Line: 615 	 not grep $vg5-$lv3 err
| [ 0:00] ## Line: 616 	 not grep $vg5-$lv4 err
| [ 0:00] ## Line: 617 	 not grep $vg5-$lv5 err
| [ 0:00] ## Line: 618 	 
| [ 0:00] ## Line: 619 	 # garbage tag never gives an error
| [ 0:00] ## Line: 620 	 
| [ 0:00] ## Line: 621 	 lvs -o vg_name,lv_name --separator '-' @V1 @garbage >err
| [ 0:00] ## Line: 622 	 grep $vg1-$lv1 err
| [ 0:00] ## Line: 623 	 not grep $vg2-$lv1 err
| [ 0:00] ## Line: 624 	 not grep $vg2-$lv2 err
| [ 0:00] ## Line: 625 	 not grep $vg3-$lv1 err
| [ 0:00] ## Line: 626 	 not grep $vg3-$lv2 err
| [ 0:00] ## Line: 627 	 not grep $vg3-$lv3 err
| [ 0:00] ## Line: 628 	 not grep $vg5-$lv1 err
| [ 0:00] ## Line: 629 	 not grep $vg5-$lv2 err
| [ 0:00] ## Line: 630 	 not grep $vg5-$lv3 err
| [ 0:00] ## Line: 631 	 not grep $vg5-$lv4 err
| [ 0:00] ## Line: 632 	 not grep $vg5-$lv5 err
| [ 0:00] ## Line: 633 	 
| [ 0:00] ## Line: 634 	 lvs -o vg_name,lv_name --separator '-' $vg1/$lv1 @garbage >err
| [ 0:00] ## Line: 635 	 grep $vg1-$lv1 err
| [ 0:00] ## Line: 636 	 not grep $vg2-$lv1 err
| [ 0:00] ## Line: 637 	 not grep $vg2-$lv2 err
| [ 0:00] ## Line: 638 	 not grep $vg3-$lv1 err
| [ 0:00] ## Line: 639 	 not grep $vg3-$lv2 err
| [ 0:00] ## Line: 640 	 not grep $vg3-$lv3 err
| [ 0:00] ## Line: 641 	 not grep $vg5-$lv1 err
| [ 0:00] ## Line: 642 	 not grep $vg5-$lv2 err
| [ 0:00] ## Line: 643 	 not grep $vg5-$lv3 err
| [ 0:00] ## Line: 644 	 not grep $vg5-$lv4 err
| [ 0:00] ## Line: 645 	 not grep $vg5-$lv5 err
| [ 0:00] ## Line: 646 	 
| [ 0:00] ## Line: 647 	 lvs -o vg_name,lv_name --separator '-' @garbage >err
| [ 0:00] ## Line: 648 	 not grep $vg1-$lv1 err
| [ 0:00] ## Line: 649 	 not grep $vg2-$lv1 err
| [ 0:00] ## Line: 650 	 not grep $vg2-$lv2 err
| [ 0:00] ## Line: 651 	 not grep $vg3-$lv1 err
| [ 0:00] ## Line: 652 	 not grep $vg3-$lv2 err
| [ 0:00] ## Line: 653 	 not grep $vg3-$lv3 err
| [ 0:00] ## Line: 654 	 not grep $vg5-$lv1 err
| [ 0:00] ## Line: 655 	 not grep $vg5-$lv2 err
| [ 0:00] ## Line: 656 	 not grep $vg5-$lv3 err
| [ 0:00] ## Line: 657 	 not grep $vg5-$lv4 err
| [ 0:00] ## Line: 658 	 not grep $vg5-$lv5 err
| [ 0:00] ## Line: 659 	 
| [ 0:00] ## Line: 660 	 vgremove -f $vg1 $vg2 $vg3 $vg4 $vg5
| [ 0:00] aux teardown
| [ 0:00] #process-each-lv.sh:1+ aux teardown
| [ 0:00] ## teardown.........ok
###       failed: [ndev-vanilla] shell/process-each-lv.sh

| [ 0:00] Library version:   1.02.146 (2017-12-18)
| [ 0:00] Driver version:    4.35.0
| [ 0:00] Kernel is Linux localhost.localdomain 3.10.0-693.11.1.el7.x86_64 #1 SMP Mon Dec 4 23:52:40 UTC 2017 x86_64 GNU/Linux
| [ 0:00] Selinux mode is not installed.
| [ 0:00]               total        used        free      shared  buff/cache   available
| [ 0:00] Mem:           7822        1080        4145          10        2597        6435
| [ 0:00] Swap:          4095           0        4095
| [ 0:00] Filesystem      Size  Used Avail Use% Mounted on
| [ 0:00] /dev/sdc1        18G  8.4G  8.4G  50% /
| [ 0:00] /dev/sdd1        51G  6.1G   43G  13% /lfskernel
| [ 0:00] devtmpfs        3.9G     0  3.9G   0% /dev
| [ 0:00] tmpfs           3.9G     0  3.9G   0% /run
| [ 0:00] @TESTDIR=/tmp/LVMTEST13212.DskCrG4QUE
| [ 0:00] @PREFIX=LVMTEST13212
| [ 0:00] ## LVMCONF: activation {
| [ 0:00] ## LVMCONF:     checks = 1
| [ 0:00] ## LVMCONF:     monitoring = 0
| [ 0:00] ## LVMCONF:     polling_interval = 1
| [ 0:00] ## LVMCONF:     raid_region_size = 512
| [ 0:00] ## LVMCONF:     retry_deactivation = 1
| [ 0:00] ## LVMCONF:     snapshot_autoextend_percent = 50
| [ 0:00] ## LVMCONF:     snapshot_autoextend_threshold = 50
| [ 0:00] ## LVMCONF:     udev_rules = 1
| [ 0:00] ## LVMCONF:     udev_sync = 1
| [ 0:00] ## LVMCONF:     verify_udev_operations = 1
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: allocation {
| [ 0:00] ## LVMCONF:     wipe_signatures_when_zeroing_new_lvs = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: backup {
| [ 0:00] ## LVMCONF:     archive = 0
| [ 0:00] ## LVMCONF:     backup = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: devices {
| [ 0:00] ## LVMCONF:     cache_dir = "@TESTDIR@/etc"
| [ 0:00] ## LVMCONF:     default_data_alignment = 1
| [ 0:00] ## LVMCONF:     dir = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     filter = "a|.*|"
| [ 0:00] ## LVMCONF:     global_filter = [ "a|@TESTDIR@/dev/mapper/@PREFIX@.*pv[0-9_]*$|", "r|.*|" ]
| [ 0:00] ## LVMCONF:     md_component_detection  = 0
| [ 0:00] ## LVMCONF:     scan = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     sysfs_scan = 1
| [ 0:00] ## LVMCONF:     write_cache_state = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: dmeventd {
| [ 0:00] ## LVMCONF:     executable = "/sources/boot/LVM2.2.02.177/test/lib/dmeventd"
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: global {
| [ 0:00] ## LVMCONF:     abort_on_internal_errors = 1
| [ 0:00] ## LVMCONF:     cache_check_executable = "/usr/sbin/cache_check"
| [ 0:00] ## LVMCONF:     cache_dump_executable = "/usr/sbin/cache_dump"
| [ 0:00] ## LVMCONF:     cache_repair_executable = "/usr/sbin/cache_repair"
| [ 0:00] ## LVMCONF:     detect_internal_vg_cache_corruption = 1
| [ 0:00] ## LVMCONF:     fallback_to_local_locking = 0
| [ 0:00] ## LVMCONF:     fsadm_executable = "/sources/boot/LVM2.2.02.177/test/lib/fsadm"
| [ 0:00] ## LVMCONF:     library_dir = "@TESTDIR@/lib"
| [ 0:00] ## LVMCONF:     locking_dir = "@TESTDIR@/var/lock/lvm"
| [ 0:00] ## LVMCONF:     locking_type=1
| [ 0:00] ## LVMCONF:     notify_dbus = 0
| [ 0:00] ## LVMCONF:     si_unit_consistency = 1
| [ 0:00] ## LVMCONF:     thin_check_executable = "/usr/sbin/thin_check"
| [ 0:00] ## LVMCONF:     thin_dump_executable = "/usr/sbin/thin_dump"
| [ 0:00] ## LVMCONF:     thin_repair_executable = "/usr/sbin/thin_repair"
| [ 0:00] ## LVMCONF:     use_lvmetad = 0
| [ 0:00] ## LVMCONF:     use_lvmlockd = 0
| [ 0:00] ## LVMCONF:     use_lvmpolld = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: log {
| [ 0:00] ## LVMCONF:     activation = 1
| [ 0:00] ## LVMCONF:     file = "@TESTDIR@/debug.log"
| [ 0:00] ## LVMCONF:     indent = 1
| [ 0:00] ## LVMCONF:     level = 9
| [ 0:00] ## LVMCONF:     overwrite = 1
| [ 0:00] ## LVMCONF:     syslog = 0
| [ 0:00] ## LVMCONF:     verbose = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] <======== Processing test: "process-each-pv-nomda-all.sh" ========>
| [ 0:00] 
| [ 0:00] aux prepare_devs 14
| [ 0:00] #process-each-pv-nomda-all.sh:18+ aux prepare_devs 14
| [ 0:00] ## preparing loop device....ok (/dev/loop0)
| [ 0:00] ## preparing 14 devices...lib/utils: line 212: DM_UDEV_COOKIE: unbound variable
| [ 0:00] set +vx; STACKTRACE; set -vx
| [ 0:00] ##process-each-pv-nomda-all.sh:18+ set +vx
| [ 0:00] ## - /lfskernel/sources/boot/LVM2.2.02.177/test/shell/process-each-pv-nomda-all.sh:18
| [ 0:00] ## 1 STACKTRACE() called from /lfskernel/sources/boot/LVM2.2.02.177/test/shell/process-each-pv-nomda-all.sh:18
| [ 0:00] <======== Info ========>
| [ 0:01] ## DMINFO:   Name             Maj Min Stat Open Targ Event  UUID                                                                
| [ 0:01] ## DMINFO:   @PREFIX@pv6  253   7 L--w    0    1      0 TEST-@PREFIX@pv6                                                
| [ 0:01] ## DMINFO:   @PREFIX@pv5  253  14 L--w    0    1      0 TEST-@PREFIX@pv5                                                
| [ 0:01] ## DMINFO:   @PREFIX@pv4  253   3 L--w    0    1      0 TEST-@PREFIX@pv4                                                
| [ 0:01] ## DMINFO:   @PREFIX@pv3  253   9 L--w    0    1      0 TEST-@PREFIX@pv3                                                
| [ 0:01] ## DMINFO:   @PREFIX@pv2  253  16 L--w    0    1      0 TEST-@PREFIX@pv2                                                
| [ 0:01] ## DMINFO:   @PREFIX@pv1  253  13 L--w    0    1      0 TEST-@PREFIX@pv1                                                
| [ 0:01] ## DMINFO:   @PREFIX@pv14 253   5 L--w    0    1      0 TEST-@PREFIX@pv14                                               
| [ 0:01] ## DMINFO:   @PREFIX@pv13 253   4 L--w    0    1      0 TEST-@PREFIX@pv13                                               
| [ 0:01] ## DMINFO:   @PREFIX@pv12 253  15 L--w    0    1      0 TEST-@PREFIX@pv12                                               
| [ 0:01] ## DMINFO:   @PREFIX@pv9  253  11 L--w    0    1      0 TEST-@PREFIX@pv9                                                
| [ 0:01] ## DMINFO:   @PREFIX@pv8  253  10 L--w    0    1      0 TEST-@PREFIX@pv8                                                
| [ 0:01] ## DMINFO:   @PREFIX@pv11 253   6 L--w    0    1      0 TEST-@PREFIX@pv11                                               
| [ 0:01] ## DMINFO:   @PREFIX@pv7  253   8 L--w    0    1      0 TEST-@PREFIX@pv7                                                
| [ 0:01] ## DMINFO:   @PREFIX@pv10 253  12 L--w    0    1      0 TEST-@PREFIX@pv10                                               
| [ 0:01] <======== Active table ========>
| [ 0:01] ## DMTABLE:  @PREFIX@pv6: 0 69632 linear 7:0 350208
| [ 0:01] ## DMTABLE:  @PREFIX@pv5: 0 69632 linear 7:0 280576
| [ 0:01] ## DMTABLE:  @PREFIX@pv4: 0 69632 linear 7:0 210944
| [ 0:01] ## DMTABLE:  @PREFIX@pv3: 0 69632 linear 7:0 141312
| [ 0:01] ## DMTABLE:  @PREFIX@pv2: 0 69632 linear 7:0 71680
| [ 0:01] ## DMTABLE:  @PREFIX@pv1: 0 69632 linear 7:0 2048
| [ 0:01] ## DMTABLE:  @PREFIX@pv14: 0 69632 linear 7:0 907264
| [ 0:01] ## DMTABLE:  @PREFIX@pv13: 0 69632 linear 7:0 837632
| [ 0:01] ## DMTABLE:  @PREFIX@pv12: 0 69632 linear 7:0 768000
| [ 0:01] ## DMTABLE:  @PREFIX@pv9: 0 69632 linear 7:0 559104
| [ 0:01] ## DMTABLE:  @PREFIX@pv8: 0 69632 linear 7:0 489472
| [ 0:01] ## DMTABLE:  @PREFIX@pv11: 0 69632 linear 7:0 698368
| [ 0:01] ## DMTABLE:  @PREFIX@pv7: 0 69632 linear 7:0 419840
| [ 0:01] ## DMTABLE:  @PREFIX@pv10: 0 69632 linear 7:0 628736
| [ 0:01] <======== Inactive table ========>
| [ 0:01] ## DMITABLE: @PREFIX@pv6: 
| [ 0:01] ## DMITABLE: @PREFIX@pv5: 
| [ 0:01] ## DMITABLE: @PREFIX@pv4: 
| [ 0:01] ## DMITABLE: @PREFIX@pv3: 
| [ 0:01] ## DMITABLE: @PREFIX@pv2: 
| [ 0:01] ## DMITABLE: @PREFIX@pv1: 
| [ 0:01] ## DMITABLE: @PREFIX@pv14: 
| [ 0:01] ## DMITABLE: @PREFIX@pv13: 
| [ 0:01] ## DMITABLE: @PREFIX@pv12: 
| [ 0:01] ## DMITABLE: @PREFIX@pv9: 
| [ 0:01] ## DMITABLE: @PREFIX@pv8: 
| [ 0:01] ## DMITABLE: @PREFIX@pv11: 
| [ 0:01] ## DMITABLE: @PREFIX@pv7: 
| [ 0:01] ## DMITABLE: @PREFIX@pv10: 
| [ 0:01] <======== Status ========>
| [ 0:01] ## DMSTATUS: @PREFIX@pv6: 0 69632 linear 
| [ 0:01] ## DMSTATUS: @PREFIX@pv5: 0 69632 linear 
| [ 0:01] ## DMSTATUS: @PREFIX@pv4: 0 69632 linear 
| [ 0:01] ## DMSTATUS: @PREFIX@pv3: 0 69632 linear 
| [ 0:01] ## DMSTATUS: @PREFIX@pv2: 0 69632 linear 
| [ 0:01] ## DMSTATUS: @PREFIX@pv1: 0 69632 linear 
| [ 0:01] ## DMSTATUS: @PREFIX@pv14: 0 69632 linear 
| [ 0:01] ## DMSTATUS: @PREFIX@pv13: 0 69632 linear 
| [ 0:01] ## DMSTATUS: @PREFIX@pv12: 0 69632 linear 
| [ 0:01] ## DMSTATUS: @PREFIX@pv9: 0 69632 linear 
| [ 0:01] ## DMSTATUS: @PREFIX@pv8: 0 69632 linear 
| [ 0:01] ## DMSTATUS: @PREFIX@pv11: 0 69632 linear 
| [ 0:01] ## DMSTATUS: @PREFIX@pv7: 0 69632 linear 
| [ 0:01] ## DMSTATUS: @PREFIX@pv10: 0 69632 linear 
| [ 0:01] <======== Tree ========>
| [ 0:01] ## DMTREE:   @PREFIX@pv6 (253:7)
| [ 0:01] ## DMTREE:    `- (7:0)
| [ 0:01] ## DMTREE:   @PREFIX@pv5 (253:14)
| [ 0:01] ## DMTREE:    `- (7:0)
| [ 0:01] ## DMTREE:   @PREFIX@pv4 (253:3)
| [ 0:01] ## DMTREE:    `- (7:0)
| [ 0:01] ## DMTREE:   @PREFIX@pv3 (253:9)
| [ 0:01] ## DMTREE:    `- (7:0)
| [ 0:01] ## DMTREE:   @PREFIX@pv2 (253:16)
| [ 0:01] ## DMTREE:    `- (7:0)
| [ 0:01] ## DMTREE:   @PREFIX@pv1 (253:13)
| [ 0:01] ## DMTREE:    `- (7:0)
| [ 0:01] ## DMTREE:   @PREFIX@pv14 (253:5)
| [ 0:01] ## DMTREE:    `- (7:0)
| [ 0:01] ## DMTREE:   @PREFIX@pv13 (253:4)
| [ 0:01] ## DMTREE:    `- (7:0)
| [ 0:01] ## DMTREE:   @PREFIX@pv12 (253:15)
| [ 0:01] ## DMTREE:    `- (7:0)
| [ 0:01] ## DMTREE:   @PREFIX@pv9 (253:11)
| [ 0:01] ## DMTREE:    `- (7:0)
| [ 0:01] ## DMTREE:   LFS_vg-lfs (253:2)
| [ 0:01] ## DMTREE:    `- (8:16)
| [ 0:01] ## DMTREE:   @PREFIX@pv8 (253:10)
| [ 0:01] ## DMTREE:    `- (7:0)
| [ 0:01] ## DMTREE:   @PREFIX@pv11 (253:6)
| [ 0:01] ## DMTREE:    `- (7:0)
| [ 0:01] ## DMTREE:   centos-swap (253:1)
| [ 0:01] ## DMTREE:    `- (8:2)
| [ 0:01] ## DMTREE:   centos-root (253:0)
| [ 0:01] ## DMTREE:    `- (8:2)
| [ 0:01] ## DMTREE:   @PREFIX@pv7 (253:8)
| [ 0:01] ## DMTREE:    `- (7:0)
| [ 0:01] ## DMTREE:   @PREFIX@pv10 (253:12)
| [ 0:01] ## DMTREE:    `- (7:0)
| [ 0:01] <======== Recursive list of @TESTDIR@/dev ========>
| [ 0:01] ## LSLR:	@TESTDIR@/dev:
| [ 0:01] ## LSLR:	total 4
| [ 0:01] ## LSLR:	brw-r--r-- 1 root root 7, 0 Feb 21 02:27 loop0
| [ 0:01] ## LSLR:	brw-r--r-- 1 root root 7, 1 Feb 21 02:27 loop1
| [ 0:01] ## LSLR:	brw-r--r-- 1 root root 7, 2 Feb 21 02:27 loop2
| [ 0:01] ## LSLR:	brw-r--r-- 1 root root 7, 3 Feb 21 02:27 loop3
| [ 0:01] ## LSLR:	brw-r--r-- 1 root root 7, 4 Feb 21 02:27 loop4
| [ 0:01] ## LSLR:	brw-r--r-- 1 root root 7, 5 Feb 21 02:27 loop5
| [ 0:01] ## LSLR:	brw-r--r-- 1 root root 7, 6 Feb 21 02:27 loop6
| [ 0:01] ## LSLR:	brw-r--r-- 1 root root 7, 7 Feb 21 02:27 loop7
| [ 0:01] ## LSLR:	drwxr-xr-x 2 root root 4096 Feb 21 02:27 mapper
| [ 0:01] ## LSLR:	crw-r--r-- 1 root root 1, 3 Feb 21 02:27 testnull
| [ 0:01] ## LSLR:	
| [ 0:01] ## LSLR:	@TESTDIR@/dev/mapper:
| [ 0:01] ## LSLR:	total 0
| [ 0:01] ## LSLR:	brw------- 1 root root 253,  13 Feb 21 02:27 @PREFIX@pv1
| [ 0:01] ## LSLR:	brw------- 1 root root 253,  12 Feb 21 02:27 @PREFIX@pv10
| [ 0:01] ## LSLR:	brw------- 1 root root 253,   6 Feb 21 02:27 @PREFIX@pv11
| [ 0:01] ## LSLR:	brw------- 1 root root 253,  15 Feb 21 02:27 @PREFIX@pv12
| [ 0:01] ## LSLR:	brw------- 1 root root 253,   4 Feb 21 02:27 @PREFIX@pv13
| [ 0:01] ## LSLR:	brw------- 1 root root 253,   5 Feb 21 02:27 @PREFIX@pv14
| [ 0:01] ## LSLR:	brw------- 1 root root 253,  16 Feb 21 02:27 @PREFIX@pv2
| [ 0:01] ## LSLR:	brw------- 1 root root 253,   9 Feb 21 02:27 @PREFIX@pv3
| [ 0:01] ## LSLR:	brw------- 1 root root 253,   3 Feb 21 02:27 @PREFIX@pv4
| [ 0:01] ## LSLR:	brw------- 1 root root 253,  14 Feb 21 02:27 @PREFIX@pv5
| [ 0:01] ## LSLR:	brw------- 1 root root 253,   7 Feb 21 02:27 @PREFIX@pv6
| [ 0:01] ## LSLR:	brw------- 1 root root 253,   8 Feb 21 02:27 @PREFIX@pv7
| [ 0:01] ## LSLR:	brw------- 1 root root 253,  10 Feb 21 02:27 @PREFIX@pv8
| [ 0:01] ## LSLR:	brw------- 1 root root 253,  11 Feb 21 02:27 @PREFIX@pv9
| [ 0:01] ## LSLR:	crw------- 1 root root  10, 236 Feb 21 02:27 control
| [ 0:01] <======== Udev DB content ========>
| [ 0:01] ## UDEV:	P: /devices/virtual/block/dm-0
| [ 0:01] ## UDEV:	N: dm-0
| [ 0:01] ## UDEV:	E: DEVNAME=/dev/dm-0
| [ 0:01] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-0
| [ 0:01] ## UDEV:	E: DEVTYPE=disk
| [ 0:01] ## UDEV:	E: MAJOR=253
| [ 0:01] ## UDEV:	E: MINOR=0
| [ 0:01] ## UDEV:	E: SUBSYSTEM=block
| [ 0:01] ## UDEV:	
| [ 0:01] ## UDEV:	P: /devices/virtual/block/dm-1
| [ 0:01] ## UDEV:	N: dm-1
| [ 0:01] ## UDEV:	E: DEVNAME=/dev/dm-1
| [ 0:01] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-1
| [ 0:01] ## UDEV:	E: DEVTYPE=disk
| [ 0:01] ## UDEV:	E: MAJOR=253
| [ 0:01] ## UDEV:	E: MINOR=1
| [ 0:01] ## UDEV:	E: SUBSYSTEM=block
| [ 0:01] ## UDEV:	
| [ 0:01] ## UDEV:	P: /devices/virtual/block/dm-10
| [ 0:01] ## UDEV:	N: dm-10
| [ 0:01] ## UDEV:	E: DEVNAME=/dev/dm-10
| [ 0:01] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-10
| [ 0:01] ## UDEV:	E: DEVTYPE=disk
| [ 0:01] ## UDEV:	E: MAJOR=253
| [ 0:01] ## UDEV:	E: MINOR=10
| [ 0:01] ## UDEV:	E: SUBSYSTEM=block
| [ 0:01] ## UDEV:	
| [ 0:01] ## UDEV:	P: /devices/virtual/block/dm-11
| [ 0:01] ## UDEV:	N: dm-11
| [ 0:01] ## UDEV:	E: DEVNAME=/dev/dm-11
| [ 0:01] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-11
| [ 0:01] ## UDEV:	E: DEVTYPE=disk
| [ 0:01] ## UDEV:	E: MAJOR=253
| [ 0:01] ## UDEV:	E: MINOR=11
| [ 0:01] ## UDEV:	E: SUBSYSTEM=block
| [ 0:01] ## UDEV:	
| [ 0:01] ## UDEV:	P: /devices/virtual/block/dm-12
| [ 0:01] ## UDEV:	N: dm-12
| [ 0:01] ## UDEV:	E: DEVNAME=/dev/dm-12
| [ 0:01] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-12
| [ 0:01] ## UDEV:	E: DEVTYPE=disk
| [ 0:01] ## UDEV:	E: MAJOR=253
| [ 0:01] ## UDEV:	E: MINOR=12
| [ 0:01] ## UDEV:	E: SUBSYSTEM=block
| [ 0:01] ## UDEV:	
| [ 0:01] ## UDEV:	P: /devices/virtual/block/dm-13
| [ 0:01] ## UDEV:	N: dm-13
| [ 0:01] ## UDEV:	E: DEVNAME=/dev/dm-13
| [ 0:01] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-13
| [ 0:01] ## UDEV:	E: DEVTYPE=disk
| [ 0:01] ## UDEV:	E: MAJOR=253
| [ 0:01] ## UDEV:	E: MINOR=13
| [ 0:01] ## UDEV:	E: SUBSYSTEM=block
| [ 0:01] ## UDEV:	
| [ 0:01] ## UDEV:	P: /devices/virtual/block/dm-14
| [ 0:01] ## UDEV:	N: dm-14
| [ 0:01] ## UDEV:	E: DEVNAME=/dev/dm-14
| [ 0:01] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-14
| [ 0:01] ## UDEV:	E: DEVTYPE=disk
| [ 0:01] ## UDEV:	E: MAJOR=253
| [ 0:01] ## UDEV:	E: MINOR=14
| [ 0:01] ## UDEV:	E: SUBSYSTEM=block
| [ 0:01] ## UDEV:	
| [ 0:01] ## UDEV:	P: /devices/virtual/block/dm-15
| [ 0:01] ## UDEV:	N: dm-15
| [ 0:01] ## UDEV:	E: DEVNAME=/dev/dm-15
| [ 0:01] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-15
| [ 0:01] ## UDEV:	E: DEVTYPE=disk
| [ 0:01] ## UDEV:	E: MAJOR=253
| [ 0:01] ## UDEV:	E: MINOR=15
| [ 0:01] ## UDEV:	E: SUBSYSTEM=block
| [ 0:01] ## UDEV:	
| [ 0:01] ## UDEV:	P: /devices/virtual/block/dm-16
| [ 0:01] ## UDEV:	N: dm-16
| [ 0:01] ## UDEV:	E: DEVNAME=/dev/dm-16
| [ 0:01] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-16
| [ 0:01] ## UDEV:	E: DEVTYPE=disk
| [ 0:01] ## UDEV:	E: MAJOR=253
| [ 0:01] ## UDEV:	E: MINOR=16
| [ 0:01] ## UDEV:	E: SUBSYSTEM=block
| [ 0:01] ## UDEV:	
| [ 0:01] ## UDEV:	P: /devices/virtual/block/dm-2
| [ 0:01] ## UDEV:	N: dm-2
| [ 0:01] ## UDEV:	E: DEVNAME=/dev/dm-2
| [ 0:01] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-2
| [ 0:01] ## UDEV:	E: DEVTYPE=disk
| [ 0:01] ## UDEV:	E: MAJOR=253
| [ 0:01] ## UDEV:	E: MINOR=2
| [ 0:01] ## UDEV:	E: SUBSYSTEM=block
| [ 0:01] ## UDEV:	
| [ 0:01] ## UDEV:	P: /devices/virtual/block/dm-3
| [ 0:01] ## UDEV:	N: dm-3
| [ 0:01] ## UDEV:	E: DEVNAME=/dev/dm-3
| [ 0:01] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-3
| [ 0:01] ## UDEV:	E: DEVTYPE=disk
| [ 0:01] ## UDEV:	E: MAJOR=253
| [ 0:01] ## UDEV:	E: MINOR=3
| [ 0:01] ## UDEV:	E: SUBSYSTEM=block
| [ 0:01] ## UDEV:	
| [ 0:01] ## UDEV:	P: /devices/virtual/block/dm-4
| [ 0:01] ## UDEV:	N: dm-4
| [ 0:01] ## UDEV:	E: DEVNAME=/dev/dm-4
| [ 0:01] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-4
| [ 0:01] ## UDEV:	E: DEVTYPE=disk
| [ 0:01] ## UDEV:	E: MAJOR=253
| [ 0:01] ## UDEV:	E: MINOR=4
| [ 0:01] ## UDEV:	E: SUBSYSTEM=block
| [ 0:01] ## UDEV:	
| [ 0:01] ## UDEV:	P: /devices/virtual/block/dm-5
| [ 0:01] ## UDEV:	N: dm-5
| [ 0:01] ## UDEV:	E: DEVNAME=/dev/dm-5
| [ 0:01] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-5
| [ 0:01] ## UDEV:	E: DEVTYPE=disk
| [ 0:01] ## UDEV:	E: MAJOR=253
| [ 0:01] ## UDEV:	E: MINOR=5
| [ 0:01] ## UDEV:	E: SUBSYSTEM=block
| [ 0:01] ## UDEV:	
| [ 0:01] ## UDEV:	P: /devices/virtual/block/dm-6
| [ 0:01] ## UDEV:	N: dm-6
| [ 0:01] ## UDEV:	E: DEVNAME=/dev/dm-6
| [ 0:01] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-6
| [ 0:01] ## UDEV:	E: DEVTYPE=disk
| [ 0:01] ## UDEV:	E: MAJOR=253
| [ 0:01] ## UDEV:	E: MINOR=6
| [ 0:01] ## UDEV:	E: SUBSYSTEM=block
| [ 0:01] ## UDEV:	
| [ 0:01] ## UDEV:	P: /devices/virtual/block/dm-7
| [ 0:01] ## UDEV:	N: dm-7
| [ 0:01] ## UDEV:	E: DEVNAME=/dev/dm-7
| [ 0:01] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-7
| [ 0:01] ## UDEV:	E: DEVTYPE=disk
| [ 0:01] ## UDEV:	E: MAJOR=253
| [ 0:01] ## UDEV:	E: MINOR=7
| [ 0:01] ## UDEV:	E: SUBSYSTEM=block
| [ 0:01] ## UDEV:	
| [ 0:01] ## UDEV:	P: /devices/virtual/block/dm-8
| [ 0:01] ## UDEV:	N: dm-8
| [ 0:01] ## UDEV:	E: DEVNAME=/dev/dm-8
| [ 0:01] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-8
| [ 0:01] ## UDEV:	E: DEVTYPE=disk
| [ 0:01] ## UDEV:	E: MAJOR=253
| [ 0:01] ## UDEV:	E: MINOR=8
| [ 0:01] ## UDEV:	E: SUBSYSTEM=block
| [ 0:01] ## UDEV:	
| [ 0:01] ## UDEV:	P: /devices/virtual/block/dm-9
| [ 0:01] ## UDEV:	N: dm-9
| [ 0:01] ## UDEV:	E: DEVNAME=/dev/dm-9
| [ 0:01] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-9
| [ 0:01] ## UDEV:	E: DEVTYPE=disk
| [ 0:01] ## UDEV:	E: MAJOR=253
| [ 0:01] ## UDEV:	E: MINOR=9
| [ 0:01] ## UDEV:	E: SUBSYSTEM=block
| [ 0:01] ## UDEV:	
| [ 0:01] ## UDEV:	P: /devices/virtual/block/loop0
| [ 0:01] ## UDEV:	N: loop0
| [ 0:01] ## UDEV:	E: DEVNAME=/dev/loop0
| [ 0:01] ## UDEV:	E: DEVPATH=/devices/virtual/block/loop0
| [ 0:01] ## UDEV:	E: DEVTYPE=disk
| [ 0:01] ## UDEV:	E: MAJOR=7
| [ 0:01] ## UDEV:	E: MINOR=0
| [ 0:01] ## UDEV:	E: SUBSYSTEM=block
| [ 0:01] ## UDEV:	
| [ 0:01] <======== Script file "process-each-pv-nomda-all.sh" ========>
| [ 0:01] ## Line: 1 	 #!/usr/bin/env bash
| [ 0:01] ## Line: 2 	 
| [ 0:01] ## Line: 3 	 # Copyright (C) 2008-2013 Red Hat, Inc. All rights reserved.
| [ 0:01] ## Line: 4 	 #
| [ 0:01] ## Line: 5 	 # This copyrighted material is made available to anyone wishing to use,
| [ 0:01] ## Line: 6 	 # modify, copy, or redistribute it subject to the terms and conditions
| [ 0:01] ## Line: 7 	 # of the GNU General Public License v.2.
| [ 0:01] ## Line: 8 	 #
| [ 0:01] ## Line: 9 	 # You should have received a copy of the GNU General Public License
| [ 0:01] ## Line: 10 	 # along with this program; if not, write to the Free Software Foundation,
| [ 0:01] ## Line: 11 	 # Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA
| [ 0:01] ## Line: 12 	 
| [ 0:01] ## Line: 13 	 test_description='Test process_each_pv with zero mda'
| [ 0:01] ## Line: 14 	 SKIP_WITH_LVMPOLLD=1
| [ 0:01] ## Line: 15 	 
| [ 0:01] ## Line: 16 	 . lib/inittest
| [ 0:01] ## Line: 17 	 
| [ 0:01] ## Line: 18 	 aux prepare_devs 14
| [ 0:01] ## Line: 19 	 
| [ 0:01] ## Line: 20 	 # for vg1
| [ 0:01] ## Line: 21 	 pvcreate "$dev10"
| [ 0:01] ## Line: 22 	 
| [ 0:01] ## Line: 23 	 # for vg2
| [ 0:01] ## Line: 24 	 pvcreate "$dev2" --metadatacopies 0
| [ 0:01] ## Line: 25 	 pvcreate "$dev3"
| [ 0:01] ## Line: 26 	 pvcreate "$dev4"
| [ 0:01] ## Line: 27 	 pvcreate "$dev5"
| [ 0:01] ## Line: 28 	 
| [ 0:01] ## Line: 29 	 # for vg3
| [ 0:01] ## Line: 30 	 pvcreate "$dev6" --metadatacopies 0
| [ 0:01] ## Line: 31 	 pvcreate "$dev7" --metadatacopies 0
| [ 0:01] ## Line: 32 	 pvcreate "$dev8" --metadatacopies 0
| [ 0:01] ## Line: 33 	 pvcreate "$dev9"
| [ 0:01] ## Line: 34 	 
| [ 0:01] ## Line: 35 	 # orphan with mda
| [ 0:01] ## Line: 36 	 pvcreate "$dev11"
| [ 0:01] ## Line: 37 	 # orphan without mda
| [ 0:01] ## Line: 38 	 pvcreate "$dev14" --metadatacopies 0
| [ 0:01] ## Line: 39 	 
| [ 0:01] ## Line: 40 	 # non-pv devs
| [ 0:01] ## Line: 41 	 # dev12
| [ 0:01] ## Line: 42 	 # dev13
| [ 0:01] ## Line: 43 	 
| [ 0:01] ## Line: 44 	 vgcreate $SHARED $vg1 "$dev10"
| [ 0:01] ## Line: 45 	 vgcreate $SHARED $vg2 "$dev2" "$dev3" "$dev4" "$dev5"
| [ 0:01] ## Line: 46 	 vgcreate $SHARED $vg3 "$dev6" "$dev7" "$dev8" "$dev9"
| [ 0:01] ## Line: 47 	 
| [ 0:01] ## Line: 48 	 pvs -a | tee err
| [ 0:01] ## Line: 49 	 grep "$dev10" err
| [ 0:01] ## Line: 50 	 grep "$dev2" err
| [ 0:01] ## Line: 51 	 grep "$dev3" err
| [ 0:01] ## Line: 52 	 grep "$dev4" err
| [ 0:01] ## Line: 53 	 grep "$dev5" err
| [ 0:01] ## Line: 54 	 grep "$dev6" err
| [ 0:01] ## Line: 55 	 grep "$dev7" err
| [ 0:01] ## Line: 56 	 grep "$dev8" err
| [ 0:01] ## Line: 57 	 grep "$dev9" err
| [ 0:01] ## Line: 58 	 grep "$dev11" err
| [ 0:01] ## Line: 59 	 grep "$dev12" err
| [ 0:01] ## Line: 60 	 grep "$dev13" err
| [ 0:01] ## Line: 61 	 grep "$dev14" err
| [ 0:01] ## Line: 62 	 
| [ 0:01] ## Line: 63 	 vgremove $vg1 $vg2 $vg3
| [ 0:01] aux teardown
| [ 0:01] #process-each-pv-nomda-all.sh:1+ aux teardown
| [ 0:01] ## teardown.........ok
###       failed: [ndev-vanilla] shell/process-each-pv-nomda-all.sh

| [ 0:00] Library version:   1.02.146 (2017-12-18)
| [ 0:00] Driver version:    4.35.0
| [ 0:00] Kernel is Linux localhost.localdomain 3.10.0-693.11.1.el7.x86_64 #1 SMP Mon Dec 4 23:52:40 UTC 2017 x86_64 GNU/Linux
| [ 0:00] Selinux mode is not installed.
| [ 0:00]               total        used        free      shared  buff/cache   available
| [ 0:00] Mem:           7822        1080        4144          10        2597        6435
| [ 0:00] Swap:          4095           0        4095
| [ 0:00] Filesystem      Size  Used Avail Use% Mounted on
| [ 0:00] /dev/sdc1        18G  8.4G  8.4G  50% /
| [ 0:00] /dev/sdd1        51G  6.1G   43G  13% /lfskernel
| [ 0:00] devtmpfs        3.9G     0  3.9G   0% /dev
| [ 0:00] tmpfs           3.9G     0  3.9G   0% /run
| [ 0:00] @TESTDIR=/tmp/LVMTEST13524.pwIaDJXZIe
| [ 0:00] @PREFIX=LVMTEST13524
| [ 0:00] ## LVMCONF: activation {
| [ 0:00] ## LVMCONF:     checks = 1
| [ 0:00] ## LVMCONF:     monitoring = 0
| [ 0:00] ## LVMCONF:     polling_interval = 1
| [ 0:00] ## LVMCONF:     raid_region_size = 512
| [ 0:00] ## LVMCONF:     retry_deactivation = 1
| [ 0:00] ## LVMCONF:     snapshot_autoextend_percent = 50
| [ 0:00] ## LVMCONF:     snapshot_autoextend_threshold = 50
| [ 0:00] ## LVMCONF:     udev_rules = 1
| [ 0:00] ## LVMCONF:     udev_sync = 1
| [ 0:00] ## LVMCONF:     verify_udev_operations = 1
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: allocation {
| [ 0:00] ## LVMCONF:     wipe_signatures_when_zeroing_new_lvs = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: backup {
| [ 0:00] ## LVMCONF:     archive = 0
| [ 0:00] ## LVMCONF:     backup = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: devices {
| [ 0:00] ## LVMCONF:     cache_dir = "@TESTDIR@/etc"
| [ 0:00] ## LVMCONF:     default_data_alignment = 1
| [ 0:00] ## LVMCONF:     dir = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     filter = "a|.*|"
| [ 0:00] ## LVMCONF:     global_filter = [ "a|@TESTDIR@/dev/mapper/@PREFIX@.*pv[0-9_]*$|", "r|.*|" ]
| [ 0:00] ## LVMCONF:     md_component_detection  = 0
| [ 0:00] ## LVMCONF:     scan = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     sysfs_scan = 1
| [ 0:00] ## LVMCONF:     write_cache_state = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: dmeventd {
| [ 0:00] ## LVMCONF:     executable = "/sources/boot/LVM2.2.02.177/test/lib/dmeventd"
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: global {
| [ 0:00] ## LVMCONF:     abort_on_internal_errors = 1
| [ 0:00] ## LVMCONF:     cache_check_executable = "/usr/sbin/cache_check"
| [ 0:00] ## LVMCONF:     cache_dump_executable = "/usr/sbin/cache_dump"
| [ 0:00] ## LVMCONF:     cache_repair_executable = "/usr/sbin/cache_repair"
| [ 0:00] ## LVMCONF:     detect_internal_vg_cache_corruption = 1
| [ 0:00] ## LVMCONF:     fallback_to_local_locking = 0
| [ 0:00] ## LVMCONF:     fsadm_executable = "/sources/boot/LVM2.2.02.177/test/lib/fsadm"
| [ 0:00] ## LVMCONF:     library_dir = "@TESTDIR@/lib"
| [ 0:00] ## LVMCONF:     locking_dir = "@TESTDIR@/var/lock/lvm"
| [ 0:00] ## LVMCONF:     locking_type=1
| [ 0:00] ## LVMCONF:     notify_dbus = 0
| [ 0:00] ## LVMCONF:     si_unit_consistency = 1
| [ 0:00] ## LVMCONF:     thin_check_executable = "/usr/sbin/thin_check"
| [ 0:00] ## LVMCONF:     thin_dump_executable = "/usr/sbin/thin_dump"
| [ 0:00] ## LVMCONF:     thin_repair_executable = "/usr/sbin/thin_repair"
| [ 0:00] ## LVMCONF:     use_lvmetad = 0
| [ 0:00] ## LVMCONF:     use_lvmlockd = 0
| [ 0:00] ## LVMCONF:     use_lvmpolld = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: log {
| [ 0:00] ## LVMCONF:     activation = 1
| [ 0:00] ## LVMCONF:     file = "@TESTDIR@/debug.log"
| [ 0:00] ## LVMCONF:     indent = 1
| [ 0:00] ## LVMCONF:     level = 9
| [ 0:00] ## LVMCONF:     overwrite = 1
| [ 0:00] ## LVMCONF:     syslog = 0
| [ 0:00] ## LVMCONF:     verbose = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] <======== Processing test: "process-each-pv-nomda.sh" ========>
| [ 0:00] 
| [ 0:00] aux prepare_devs 2
| [ 0:00] #process-each-pv-nomda.sh:19+ aux prepare_devs 2
| [ 0:00] ## preparing loop device....ok (/dev/loop0)
| [ 0:00] ## preparing 2 devices...lib/utils: line 212: DM_UDEV_COOKIE: unbound variable
| [ 0:00] set +vx; STACKTRACE; set -vx
| [ 0:00] ##process-each-pv-nomda.sh:19+ set +vx
| [ 0:00] ## - /lfskernel/sources/boot/LVM2.2.02.177/test/shell/process-each-pv-nomda.sh:19
| [ 0:00] ## 1 STACKTRACE() called from /lfskernel/sources/boot/LVM2.2.02.177/test/shell/process-each-pv-nomda.sh:19
| [ 0:00] <======== Info ========>
| [ 0:00] ## DMINFO:   Name             Maj Min Stat Open Targ Event  UUID                                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv2  253   4 L--w    0    1      0 TEST-@PREFIX@pv2                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv1  253   3 L--w    0    1      0 TEST-@PREFIX@pv1                                                
| [ 0:00] <======== Active table ========>
| [ 0:00] ## DMTABLE:  @PREFIX@pv2: 0 69632 linear 7:0 71680
| [ 0:00] ## DMTABLE:  @PREFIX@pv1: 0 69632 linear 7:0 2048
| [ 0:00] <======== Inactive table ========>
| [ 0:00] ## DMITABLE: @PREFIX@pv2: 
| [ 0:00] ## DMITABLE: @PREFIX@pv1: 
| [ 0:00] <======== Status ========>
| [ 0:00] ## DMSTATUS: @PREFIX@pv2: 0 69632 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv1: 0 69632 linear 
| [ 0:00] <======== Tree ========>
| [ 0:00] ## DMTREE:   @PREFIX@pv2 (253:4)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   @PREFIX@pv1 (253:3)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   LFS_vg-lfs (253:2)
| [ 0:00] ## DMTREE:    `- (8:16)
| [ 0:00] ## DMTREE:   centos-swap (253:1)
| [ 0:00] ## DMTREE:    `- (8:2)
| [ 0:00] ## DMTREE:   centos-root (253:0)
| [ 0:00] ## DMTREE:    `- (8:2)
| [ 0:00] <======== Recursive list of @TESTDIR@/dev ========>
| [ 0:00] ## LSLR:	@TESTDIR@/dev:
| [ 0:00] ## LSLR:	total 4
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 0 Feb 21 02:27 loop0
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 1 Feb 21 02:27 loop1
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 2 Feb 21 02:27 loop2
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 3 Feb 21 02:27 loop3
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 4 Feb 21 02:27 loop4
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 5 Feb 21 02:27 loop5
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 6 Feb 21 02:27 loop6
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 7 Feb 21 02:27 loop7
| [ 0:00] ## LSLR:	drwxr-xr-x 2 root root 4096 Feb 21 02:27 mapper
| [ 0:00] ## LSLR:	crw-r--r-- 1 root root 1, 3 Feb 21 02:27 testnull
| [ 0:00] ## LSLR:	
| [ 0:00] ## LSLR:	@TESTDIR@/dev/mapper:
| [ 0:00] ## LSLR:	total 0
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   3 Feb 21 02:27 @PREFIX@pv1
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   4 Feb 21 02:27 @PREFIX@pv2
| [ 0:00] ## LSLR:	crw------- 1 root root  10, 236 Feb 21 02:27 control
| [ 0:00] <======== Udev DB content ========>
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-0
| [ 0:00] ## UDEV:	N: dm-0
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-0
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-0
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=0
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-1
| [ 0:00] ## UDEV:	N: dm-1
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-1
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-1
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=1
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-2
| [ 0:00] ## UDEV:	N: dm-2
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-2
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-2
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=2
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-3
| [ 0:00] ## UDEV:	N: dm-3
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-3
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-3
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=3
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-4
| [ 0:00] ## UDEV:	N: dm-4
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-4
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-4
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=4
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/loop0
| [ 0:00] ## UDEV:	N: loop0
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/loop0
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/loop0
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=7
| [ 0:00] ## UDEV:	E: MINOR=0
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] <======== Script file "process-each-pv-nomda.sh" ========>
| [ 0:00] ## Line: 1 	 #!/usr/bin/env bash
| [ 0:00] ## Line: 2 	 
| [ 0:00] ## Line: 3 	 # Copyright (C) 2014 Red Hat, Inc. All rights reserved.
| [ 0:00] ## Line: 4 	 #
| [ 0:00] ## Line: 5 	 # This copyrighted material is made available to anyone wishing to use,
| [ 0:00] ## Line: 6 	 # modify, copy, or redistribute it subject to the terms and conditions
| [ 0:00] ## Line: 7 	 # of the GNU General Public License v.2.
| [ 0:00] ## Line: 8 	 #
| [ 0:00] ## Line: 9 	 # You should have received a copy of the GNU General Public License
| [ 0:00] ## Line: 10 	 # along with this program; if not, write to the Free Software Foundation,
| [ 0:00] ## Line: 11 	 # Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA
| [ 0:00] ## Line: 12 	 
| [ 0:00] ## Line: 13 	 test_description='Test process_each_pv with zero mda'
| [ 0:00] ## Line: 14 	 SKIP_WITH_LVMLOCKD=1
| [ 0:00] ## Line: 15 	 SKIP_WITH_LVMPOLLD=1
| [ 0:00] ## Line: 16 	 
| [ 0:00] ## Line: 17 	 . lib/inittest
| [ 0:00] ## Line: 18 	 
| [ 0:00] ## Line: 19 	 aux prepare_devs 2
| [ 0:00] ## Line: 20 	 
| [ 0:00] ## Line: 21 	 pvcreate "$dev1" --metadatacopies 0
| [ 0:00] ## Line: 22 	 pvcreate "$dev2"
| [ 0:00] ## Line: 23 	 
| [ 0:00] ## Line: 24 	 vgcreate $SHARED $vg1 "$dev1" "$dev2"
| [ 0:00] ## Line: 25 	 
| [ 0:00] ## Line: 26 	 pvdisplay -a -C | tee err
| [ 0:00] ## Line: 27 	 grep "$dev1" err
| [ 0:00] ## Line: 28 	 grep "$dev2" err
| [ 0:00] ## Line: 29 	 
| [ 0:00] ## Line: 30 	 vgremove $vg1
| [ 0:00] aux teardown
| [ 0:00] #process-each-pv-nomda.sh:1+ aux teardown
| [ 0:00] ## teardown.........ok
###       failed: [ndev-vanilla] shell/process-each-pv-nomda.sh

| [ 0:01] Library version:   1.02.146 (2017-12-18)
| [ 0:01] Driver version:    4.35.0
| [ 0:01] Kernel is Linux localhost.localdomain 3.10.0-693.11.1.el7.x86_64 #1 SMP Mon Dec 4 23:52:40 UTC 2017 x86_64 GNU/Linux
| [ 0:01] Selinux mode is not installed.
| [ 0:01]               total        used        free      shared  buff/cache   available
| [ 0:01] Mem:           7822        1080        4144          10        2597        6435
| [ 0:01] Swap:          4095           0        4095
| [ 0:01] Filesystem      Size  Used Avail Use% Mounted on
| [ 0:01] /dev/sdc1        18G  8.4G  8.4G  50% /
| [ 0:01] /dev/sdd1        51G  6.1G   43G  13% /lfskernel
| [ 0:01] devtmpfs        3.9G     0  3.9G   0% /dev
| [ 0:01] tmpfs           3.9G     0  3.9G   0% /run
| [ 0:01] @TESTDIR=/tmp/LVMTEST13693.97cX2nF6zv
| [ 0:01] @PREFIX=LVMTEST13693
| [ 0:01] ## LVMCONF: activation {
| [ 0:01] ## LVMCONF:     checks = 1
| [ 0:01] ## LVMCONF:     monitoring = 0
| [ 0:01] ## LVMCONF:     polling_interval = 1
| [ 0:01] ## LVMCONF:     raid_region_size = 512
| [ 0:01] ## LVMCONF:     retry_deactivation = 1
| [ 0:01] ## LVMCONF:     snapshot_autoextend_percent = 50
| [ 0:01] ## LVMCONF:     snapshot_autoextend_threshold = 50
| [ 0:01] ## LVMCONF:     udev_rules = 1
| [ 0:01] ## LVMCONF:     udev_sync = 1
| [ 0:01] ## LVMCONF:     verify_udev_operations = 1
| [ 0:01] ## LVMCONF: }
| [ 0:01] ## LVMCONF: allocation {
| [ 0:01] ## LVMCONF:     wipe_signatures_when_zeroing_new_lvs = 0
| [ 0:01] ## LVMCONF: }
| [ 0:01] ## LVMCONF: backup {
| [ 0:01] ## LVMCONF:     archive = 0
| [ 0:01] ## LVMCONF:     backup = 0
| [ 0:01] ## LVMCONF: }
| [ 0:01] ## LVMCONF: devices {
| [ 0:01] ## LVMCONF:     cache_dir = "@TESTDIR@/etc"
| [ 0:01] ## LVMCONF:     default_data_alignment = 1
| [ 0:01] ## LVMCONF:     dir = "@TESTDIR@/dev"
| [ 0:01] ## LVMCONF:     filter = "a|.*|"
| [ 0:01] ## LVMCONF:     global_filter = [ "a|@TESTDIR@/dev/mapper/@PREFIX@.*pv[0-9_]*$|", "r|.*|" ]
| [ 0:01] ## LVMCONF:     md_component_detection  = 0
| [ 0:01] ## LVMCONF:     scan = "@TESTDIR@/dev"
| [ 0:01] ## LVMCONF:     sysfs_scan = 1
| [ 0:01] ## LVMCONF:     write_cache_state = 0
| [ 0:01] ## LVMCONF: }
| [ 0:01] ## LVMCONF: dmeventd {
| [ 0:01] ## LVMCONF:     executable = "/sources/boot/LVM2.2.02.177/test/lib/dmeventd"
| [ 0:01] ## LVMCONF: }
| [ 0:01] ## LVMCONF: global {
| [ 0:01] ## LVMCONF:     abort_on_internal_errors = 1
| [ 0:01] ## LVMCONF:     cache_check_executable = "/usr/sbin/cache_check"
| [ 0:01] ## LVMCONF:     cache_dump_executable = "/usr/sbin/cache_dump"
| [ 0:01] ## LVMCONF:     cache_repair_executable = "/usr/sbin/cache_repair"
| [ 0:01] ## LVMCONF:     detect_internal_vg_cache_corruption = 1
| [ 0:01] ## LVMCONF:     fallback_to_local_locking = 0
| [ 0:01] ## LVMCONF:     fsadm_executable = "/sources/boot/LVM2.2.02.177/test/lib/fsadm"
| [ 0:01] ## LVMCONF:     library_dir = "@TESTDIR@/lib"
| [ 0:01] ## LVMCONF:     locking_dir = "@TESTDIR@/var/lock/lvm"
| [ 0:01] ## LVMCONF:     locking_type=1
| [ 0:01] ## LVMCONF:     notify_dbus = 0
| [ 0:01] ## LVMCONF:     si_unit_consistency = 1
| [ 0:01] ## LVMCONF:     thin_check_executable = "/usr/sbin/thin_check"
| [ 0:01] ## LVMCONF:     thin_dump_executable = "/usr/sbin/thin_dump"
| [ 0:01] ## LVMCONF:     thin_repair_executable = "/usr/sbin/thin_repair"
| [ 0:01] ## LVMCONF:     use_lvmetad = 0
| [ 0:01] ## LVMCONF:     use_lvmlockd = 0
| [ 0:01] ## LVMCONF:     use_lvmpolld = 0
| [ 0:01] ## LVMCONF: }
| [ 0:01] ## LVMCONF: log {
| [ 0:01] ## LVMCONF:     activation = 1
| [ 0:01] ## LVMCONF:     file = "@TESTDIR@/debug.log"
| [ 0:01] ## LVMCONF:     indent = 1
| [ 0:01] ## LVMCONF:     level = 9
| [ 0:01] ## LVMCONF:     overwrite = 1
| [ 0:01] ## LVMCONF:     syslog = 0
| [ 0:01] ## LVMCONF:     verbose = 0
| [ 0:01] ## LVMCONF: }
| [ 0:01] <======== Processing test: "process-each-pv.sh" ========>
| [ 0:01] 
| [ 0:01] aux prepare_devs 14
| [ 0:01] #process-each-pv.sh:18+ aux prepare_devs 14
| [ 0:01] ## preparing loop device....ok (/dev/loop0)
| [ 0:01] ## preparing 14 devices...lib/utils: line 212: DM_UDEV_COOKIE: unbound variable
| [ 0:01] set +vx; STACKTRACE; set -vx
| [ 0:01] ##process-each-pv.sh:18+ set +vx
| [ 0:01] ## - /lfskernel/sources/boot/LVM2.2.02.177/test/shell/process-each-pv.sh:18
| [ 0:01] ## 1 STACKTRACE() called from /lfskernel/sources/boot/LVM2.2.02.177/test/shell/process-each-pv.sh:18
| [ 0:01] <======== Info ========>
| [ 0:01] ## DMINFO:   Name             Maj Min Stat Open Targ Event  UUID                                                                
| [ 0:01] ## DMINFO:   @PREFIX@pv3  253   8 L--w    0    1      0 TEST-@PREFIX@pv3                                                
| [ 0:01] ## DMINFO:   @PREFIX@pv2  253   7 L--w    0    1      0 TEST-@PREFIX@pv2                                                
| [ 0:01] ## DMINFO:   @PREFIX@pv14 253   3 L--w    0    1      0 TEST-@PREFIX@pv14                                               
| [ 0:01] ## DMINFO:   @PREFIX@pv1  253  16 L--w    0    1      0 TEST-@PREFIX@pv1                                                
| [ 0:01] ## DMINFO:   @PREFIX@pv13 253  13 L--w    0    1      0 TEST-@PREFIX@pv13                                               
| [ 0:01] ## DMINFO:   @PREFIX@pv12 253  15 L--w    0    1      0 TEST-@PREFIX@pv12                                               
| [ 0:01] ## DMINFO:   @PREFIX@pv11 253   4 L--w    0    1      0 TEST-@PREFIX@pv11                                               
| [ 0:01] ## DMINFO:   @PREFIX@pv10 253  12 L--w    0    1      0 TEST-@PREFIX@pv10                                               
| [ 0:01] ## DMINFO:   @PREFIX@pv9  253  11 L--w    0    1      0 TEST-@PREFIX@pv9                                                
| [ 0:01] ## DMINFO:   @PREFIX@pv8  253  10 L--w    0    1      0 TEST-@PREFIX@pv8                                                
| [ 0:01] ## DMINFO:   @PREFIX@pv7  253   6 L--w    0    1      0 TEST-@PREFIX@pv7                                                
| [ 0:01] ## DMINFO:   @PREFIX@pv6  253   5 L--w    0    1      0 TEST-@PREFIX@pv6                                                
| [ 0:01] ## DMINFO:   @PREFIX@pv5  253  14 L--w    0    1      0 TEST-@PREFIX@pv5                                                
| [ 0:01] ## DMINFO:   @PREFIX@pv4  253   9 L--w    0    1      0 TEST-@PREFIX@pv4                                                
| [ 0:01] <======== Active table ========>
| [ 0:01] ## DMTABLE:  @PREFIX@pv3: 0 69632 linear 7:0 141312
| [ 0:01] ## DMTABLE:  @PREFIX@pv2: 0 69632 linear 7:0 71680
| [ 0:01] ## DMTABLE:  @PREFIX@pv14: 0 69632 linear 7:0 907264
| [ 0:01] ## DMTABLE:  @PREFIX@pv1: 0 69632 linear 7:0 2048
| [ 0:01] ## DMTABLE:  @PREFIX@pv13: 0 69632 linear 7:0 837632
| [ 0:01] ## DMTABLE:  @PREFIX@pv12: 0 69632 linear 7:0 768000
| [ 0:01] ## DMTABLE:  @PREFIX@pv11: 0 69632 linear 7:0 698368
| [ 0:01] ## DMTABLE:  @PREFIX@pv10: 0 69632 linear 7:0 628736
| [ 0:01] ## DMTABLE:  @PREFIX@pv9: 0 69632 linear 7:0 559104
| [ 0:01] ## DMTABLE:  @PREFIX@pv8: 0 69632 linear 7:0 489472
| [ 0:01] ## DMTABLE:  @PREFIX@pv7: 0 69632 linear 7:0 419840
| [ 0:01] ## DMTABLE:  @PREFIX@pv6: 0 69632 linear 7:0 350208
| [ 0:01] ## DMTABLE:  @PREFIX@pv5: 0 69632 linear 7:0 280576
| [ 0:01] ## DMTABLE:  @PREFIX@pv4: 0 69632 linear 7:0 210944
| [ 0:01] <======== Inactive table ========>
| [ 0:01] ## DMITABLE: @PREFIX@pv3: 
| [ 0:01] ## DMITABLE: @PREFIX@pv2: 
| [ 0:01] ## DMITABLE: @PREFIX@pv14: 
| [ 0:01] ## DMITABLE: @PREFIX@pv1: 
| [ 0:01] ## DMITABLE: @PREFIX@pv13: 
| [ 0:01] ## DMITABLE: @PREFIX@pv12: 
| [ 0:01] ## DMITABLE: @PREFIX@pv11: 
| [ 0:01] ## DMITABLE: @PREFIX@pv10: 
| [ 0:01] ## DMITABLE: @PREFIX@pv9: 
| [ 0:01] ## DMITABLE: @PREFIX@pv8: 
| [ 0:01] ## DMITABLE: @PREFIX@pv7: 
| [ 0:01] ## DMITABLE: @PREFIX@pv6: 
| [ 0:01] ## DMITABLE: @PREFIX@pv5: 
| [ 0:01] ## DMITABLE: @PREFIX@pv4: 
| [ 0:01] <======== Status ========>
| [ 0:01] ## DMSTATUS: @PREFIX@pv3: 0 69632 linear 
| [ 0:01] ## DMSTATUS: @PREFIX@pv2: 0 69632 linear 
| [ 0:01] ## DMSTATUS: @PREFIX@pv14: 0 69632 linear 
| [ 0:01] ## DMSTATUS: @PREFIX@pv1: 0 69632 linear 
| [ 0:01] ## DMSTATUS: @PREFIX@pv13: 0 69632 linear 
| [ 0:01] ## DMSTATUS: @PREFIX@pv12: 0 69632 linear 
| [ 0:01] ## DMSTATUS: @PREFIX@pv11: 0 69632 linear 
| [ 0:01] ## DMSTATUS: @PREFIX@pv10: 0 69632 linear 
| [ 0:01] ## DMSTATUS: @PREFIX@pv9: 0 69632 linear 
| [ 0:01] ## DMSTATUS: @PREFIX@pv8: 0 69632 linear 
| [ 0:01] ## DMSTATUS: @PREFIX@pv7: 0 69632 linear 
| [ 0:01] ## DMSTATUS: @PREFIX@pv6: 0 69632 linear 
| [ 0:01] ## DMSTATUS: @PREFIX@pv5: 0 69632 linear 
| [ 0:01] ## DMSTATUS: @PREFIX@pv4: 0 69632 linear 
| [ 0:01] <======== Tree ========>
| [ 0:01] ## DMTREE:   @PREFIX@pv3 (253:8)
| [ 0:01] ## DMTREE:    `- (7:0)
| [ 0:01] ## DMTREE:   @PREFIX@pv2 (253:7)
| [ 0:01] ## DMTREE:    `- (7:0)
| [ 0:01] ## DMTREE:   @PREFIX@pv14 (253:3)
| [ 0:01] ## DMTREE:    `- (7:0)
| [ 0:01] ## DMTREE:   @PREFIX@pv1 (253:16)
| [ 0:01] ## DMTREE:    `- (7:0)
| [ 0:01] ## DMTREE:   @PREFIX@pv13 (253:13)
| [ 0:01] ## DMTREE:    `- (7:0)
| [ 0:01] ## DMTREE:   @PREFIX@pv12 (253:15)
| [ 0:01] ## DMTREE:    `- (7:0)
| [ 0:01] ## DMTREE:   @PREFIX@pv11 (253:4)
| [ 0:01] ## DMTREE:    `- (7:0)
| [ 0:01] ## DMTREE:   @PREFIX@pv10 (253:12)
| [ 0:01] ## DMTREE:    `- (7:0)
| [ 0:01] ## DMTREE:   @PREFIX@pv9 (253:11)
| [ 0:01] ## DMTREE:    `- (7:0)
| [ 0:01] ## DMTREE:   @PREFIX@pv8 (253:10)
| [ 0:01] ## DMTREE:    `- (7:0)
| [ 0:01] ## DMTREE:   @PREFIX@pv7 (253:6)
| [ 0:01] ## DMTREE:    `- (7:0)
| [ 0:01] ## DMTREE:   @PREFIX@pv6 (253:5)
| [ 0:01] ## DMTREE:    `- (7:0)
| [ 0:01] ## DMTREE:   @PREFIX@pv5 (253:14)
| [ 0:01] ## DMTREE:    `- (7:0)
| [ 0:01] ## DMTREE:   LFS_vg-lfs (253:2)
| [ 0:01] ## DMTREE:    `- (8:16)
| [ 0:01] ## DMTREE:   @PREFIX@pv4 (253:9)
| [ 0:01] ## DMTREE:    `- (7:0)
| [ 0:01] ## DMTREE:   centos-swap (253:1)
| [ 0:01] ## DMTREE:    `- (8:2)
| [ 0:01] ## DMTREE:   centos-root (253:0)
| [ 0:01] ## DMTREE:    `- (8:2)
| [ 0:01] <======== Recursive list of @TESTDIR@/dev ========>
| [ 0:01] ## LSLR:	@TESTDIR@/dev:
| [ 0:01] ## LSLR:	total 4
| [ 0:01] ## LSLR:	brw-r--r-- 1 root root 7, 0 Feb 21 02:27 loop0
| [ 0:01] ## LSLR:	brw-r--r-- 1 root root 7, 1 Feb 21 02:27 loop1
| [ 0:01] ## LSLR:	brw-r--r-- 1 root root 7, 2 Feb 21 02:27 loop2
| [ 0:01] ## LSLR:	brw-r--r-- 1 root root 7, 3 Feb 21 02:27 loop3
| [ 0:01] ## LSLR:	brw-r--r-- 1 root root 7, 4 Feb 21 02:27 loop4
| [ 0:01] ## LSLR:	brw-r--r-- 1 root root 7, 5 Feb 21 02:27 loop5
| [ 0:01] ## LSLR:	brw-r--r-- 1 root root 7, 6 Feb 21 02:27 loop6
| [ 0:01] ## LSLR:	brw-r--r-- 1 root root 7, 7 Feb 21 02:27 loop7
| [ 0:01] ## LSLR:	drwxr-xr-x 2 root root 4096 Feb 21 02:27 mapper
| [ 0:01] ## LSLR:	crw-r--r-- 1 root root 1, 3 Feb 21 02:27 testnull
| [ 0:01] ## LSLR:	
| [ 0:01] ## LSLR:	@TESTDIR@/dev/mapper:
| [ 0:01] ## LSLR:	total 0
| [ 0:01] ## LSLR:	brw------- 1 root root 253,  16 Feb 21 02:27 @PREFIX@pv1
| [ 0:01] ## LSLR:	brw------- 1 root root 253,  12 Feb 21 02:27 @PREFIX@pv10
| [ 0:01] ## LSLR:	brw------- 1 root root 253,   4 Feb 21 02:27 @PREFIX@pv11
| [ 0:01] ## LSLR:	brw------- 1 root root 253,  15 Feb 21 02:27 @PREFIX@pv12
| [ 0:01] ## LSLR:	brw------- 1 root root 253,  13 Feb 21 02:27 @PREFIX@pv13
| [ 0:01] ## LSLR:	brw------- 1 root root 253,   3 Feb 21 02:27 @PREFIX@pv14
| [ 0:01] ## LSLR:	brw------- 1 root root 253,   7 Feb 21 02:27 @PREFIX@pv2
| [ 0:01] ## LSLR:	brw------- 1 root root 253,   8 Feb 21 02:27 @PREFIX@pv3
| [ 0:01] ## LSLR:	brw------- 1 root root 253,   9 Feb 21 02:27 @PREFIX@pv4
| [ 0:01] ## LSLR:	brw------- 1 root root 253,  14 Feb 21 02:27 @PREFIX@pv5
| [ 0:01] ## LSLR:	brw------- 1 root root 253,   5 Feb 21 02:27 @PREFIX@pv6
| [ 0:01] ## LSLR:	brw------- 1 root root 253,   6 Feb 21 02:27 @PREFIX@pv7
| [ 0:01] ## LSLR:	brw------- 1 root root 253,  10 Feb 21 02:27 @PREFIX@pv8
| [ 0:01] ## LSLR:	brw------- 1 root root 253,  11 Feb 21 02:27 @PREFIX@pv9
| [ 0:01] ## LSLR:	crw------- 1 root root  10, 236 Feb 21 02:27 control
| [ 0:01] <======== Udev DB content ========>
| [ 0:01] ## UDEV:	P: /devices/virtual/block/dm-0
| [ 0:01] ## UDEV:	N: dm-0
| [ 0:01] ## UDEV:	E: DEVNAME=/dev/dm-0
| [ 0:01] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-0
| [ 0:01] ## UDEV:	E: DEVTYPE=disk
| [ 0:01] ## UDEV:	E: MAJOR=253
| [ 0:01] ## UDEV:	E: MINOR=0
| [ 0:01] ## UDEV:	E: SUBSYSTEM=block
| [ 0:01] ## UDEV:	
| [ 0:01] ## UDEV:	P: /devices/virtual/block/dm-1
| [ 0:01] ## UDEV:	N: dm-1
| [ 0:01] ## UDEV:	E: DEVNAME=/dev/dm-1
| [ 0:01] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-1
| [ 0:01] ## UDEV:	E: DEVTYPE=disk
| [ 0:01] ## UDEV:	E: MAJOR=253
| [ 0:01] ## UDEV:	E: MINOR=1
| [ 0:01] ## UDEV:	E: SUBSYSTEM=block
| [ 0:01] ## UDEV:	
| [ 0:01] ## UDEV:	P: /devices/virtual/block/dm-10
| [ 0:01] ## UDEV:	N: dm-10
| [ 0:01] ## UDEV:	E: DEVNAME=/dev/dm-10
| [ 0:01] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-10
| [ 0:01] ## UDEV:	E: DEVTYPE=disk
| [ 0:01] ## UDEV:	E: MAJOR=253
| [ 0:01] ## UDEV:	E: MINOR=10
| [ 0:01] ## UDEV:	E: SUBSYSTEM=block
| [ 0:01] ## UDEV:	
| [ 0:01] ## UDEV:	P: /devices/virtual/block/dm-11
| [ 0:01] ## UDEV:	N: dm-11
| [ 0:01] ## UDEV:	E: DEVNAME=/dev/dm-11
| [ 0:01] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-11
| [ 0:01] ## UDEV:	E: DEVTYPE=disk
| [ 0:01] ## UDEV:	E: MAJOR=253
| [ 0:01] ## UDEV:	E: MINOR=11
| [ 0:01] ## UDEV:	E: SUBSYSTEM=block
| [ 0:01] ## UDEV:	
| [ 0:01] ## UDEV:	P: /devices/virtual/block/dm-12
| [ 0:01] ## UDEV:	N: dm-12
| [ 0:01] ## UDEV:	E: DEVNAME=/dev/dm-12
| [ 0:01] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-12
| [ 0:01] ## UDEV:	E: DEVTYPE=disk
| [ 0:01] ## UDEV:	E: MAJOR=253
| [ 0:01] ## UDEV:	E: MINOR=12
| [ 0:01] ## UDEV:	E: SUBSYSTEM=block
| [ 0:01] ## UDEV:	
| [ 0:01] ## UDEV:	P: /devices/virtual/block/dm-13
| [ 0:01] ## UDEV:	N: dm-13
| [ 0:01] ## UDEV:	E: DEVNAME=/dev/dm-13
| [ 0:01] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-13
| [ 0:01] ## UDEV:	E: DEVTYPE=disk
| [ 0:01] ## UDEV:	E: MAJOR=253
| [ 0:01] ## UDEV:	E: MINOR=13
| [ 0:01] ## UDEV:	E: SUBSYSTEM=block
| [ 0:01] ## UDEV:	
| [ 0:01] ## UDEV:	P: /devices/virtual/block/dm-14
| [ 0:01] ## UDEV:	N: dm-14
| [ 0:01] ## UDEV:	E: DEVNAME=/dev/dm-14
| [ 0:01] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-14
| [ 0:01] ## UDEV:	E: DEVTYPE=disk
| [ 0:01] ## UDEV:	E: MAJOR=253
| [ 0:01] ## UDEV:	E: MINOR=14
| [ 0:01] ## UDEV:	E: SUBSYSTEM=block
| [ 0:01] ## UDEV:	
| [ 0:01] ## UDEV:	P: /devices/virtual/block/dm-15
| [ 0:01] ## UDEV:	N: dm-15
| [ 0:01] ## UDEV:	E: DEVNAME=/dev/dm-15
| [ 0:01] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-15
| [ 0:01] ## UDEV:	E: DEVTYPE=disk
| [ 0:01] ## UDEV:	E: MAJOR=253
| [ 0:01] ## UDEV:	E: MINOR=15
| [ 0:01] ## UDEV:	E: SUBSYSTEM=block
| [ 0:01] ## UDEV:	
| [ 0:01] ## UDEV:	P: /devices/virtual/block/dm-16
| [ 0:01] ## UDEV:	N: dm-16
| [ 0:01] ## UDEV:	E: DEVNAME=/dev/dm-16
| [ 0:01] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-16
| [ 0:01] ## UDEV:	E: DEVTYPE=disk
| [ 0:01] ## UDEV:	E: MAJOR=253
| [ 0:01] ## UDEV:	E: MINOR=16
| [ 0:01] ## UDEV:	E: SUBSYSTEM=block
| [ 0:01] ## UDEV:	
| [ 0:01] ## UDEV:	P: /devices/virtual/block/dm-2
| [ 0:01] ## UDEV:	N: dm-2
| [ 0:01] ## UDEV:	E: DEVNAME=/dev/dm-2
| [ 0:01] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-2
| [ 0:01] ## UDEV:	E: DEVTYPE=disk
| [ 0:01] ## UDEV:	E: MAJOR=253
| [ 0:01] ## UDEV:	E: MINOR=2
| [ 0:01] ## UDEV:	E: SUBSYSTEM=block
| [ 0:01] ## UDEV:	
| [ 0:01] ## UDEV:	P: /devices/virtual/block/dm-3
| [ 0:01] ## UDEV:	N: dm-3
| [ 0:01] ## UDEV:	E: DEVNAME=/dev/dm-3
| [ 0:01] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-3
| [ 0:01] ## UDEV:	E: DEVTYPE=disk
| [ 0:01] ## UDEV:	E: MAJOR=253
| [ 0:01] ## UDEV:	E: MINOR=3
| [ 0:01] ## UDEV:	E: SUBSYSTEM=block
| [ 0:01] ## UDEV:	
| [ 0:01] ## UDEV:	P: /devices/virtual/block/dm-4
| [ 0:01] ## UDEV:	N: dm-4
| [ 0:01] ## UDEV:	E: DEVNAME=/dev/dm-4
| [ 0:01] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-4
| [ 0:01] ## UDEV:	E: DEVTYPE=disk
| [ 0:01] ## UDEV:	E: MAJOR=253
| [ 0:01] ## UDEV:	E: MINOR=4
| [ 0:01] ## UDEV:	E: SUBSYSTEM=block
| [ 0:01] ## UDEV:	
| [ 0:01] ## UDEV:	P: /devices/virtual/block/dm-5
| [ 0:01] ## UDEV:	N: dm-5
| [ 0:01] ## UDEV:	E: DEVNAME=/dev/dm-5
| [ 0:01] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-5
| [ 0:01] ## UDEV:	E: DEVTYPE=disk
| [ 0:01] ## UDEV:	E: MAJOR=253
| [ 0:01] ## UDEV:	E: MINOR=5
| [ 0:01] ## UDEV:	E: SUBSYSTEM=block
| [ 0:01] ## UDEV:	
| [ 0:01] ## UDEV:	P: /devices/virtual/block/dm-6
| [ 0:01] ## UDEV:	N: dm-6
| [ 0:01] ## UDEV:	E: DEVNAME=/dev/dm-6
| [ 0:01] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-6
| [ 0:01] ## UDEV:	E: DEVTYPE=disk
| [ 0:01] ## UDEV:	E: MAJOR=253
| [ 0:01] ## UDEV:	E: MINOR=6
| [ 0:01] ## UDEV:	E: SUBSYSTEM=block
| [ 0:01] ## UDEV:	
| [ 0:01] ## UDEV:	P: /devices/virtual/block/dm-7
| [ 0:01] ## UDEV:	N: dm-7
| [ 0:01] ## UDEV:	E: DEVNAME=/dev/dm-7
| [ 0:01] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-7
| [ 0:01] ## UDEV:	E: DEVTYPE=disk
| [ 0:01] ## UDEV:	E: MAJOR=253
| [ 0:01] ## UDEV:	E: MINOR=7
| [ 0:01] ## UDEV:	E: SUBSYSTEM=block
| [ 0:01] ## UDEV:	
| [ 0:01] ## UDEV:	P: /devices/virtual/block/dm-8
| [ 0:01] ## UDEV:	N: dm-8
| [ 0:01] ## UDEV:	E: DEVNAME=/dev/dm-8
| [ 0:01] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-8
| [ 0:01] ## UDEV:	E: DEVTYPE=disk
| [ 0:01] ## UDEV:	E: MAJOR=253
| [ 0:01] ## UDEV:	E: MINOR=8
| [ 0:01] ## UDEV:	E: SUBSYSTEM=block
| [ 0:01] ## UDEV:	
| [ 0:01] ## UDEV:	P: /devices/virtual/block/dm-9
| [ 0:01] ## UDEV:	N: dm-9
| [ 0:01] ## UDEV:	E: DEVNAME=/dev/dm-9
| [ 0:01] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-9
| [ 0:01] ## UDEV:	E: DEVTYPE=disk
| [ 0:01] ## UDEV:	E: MAJOR=253
| [ 0:01] ## UDEV:	E: MINOR=9
| [ 0:01] ## UDEV:	E: SUBSYSTEM=block
| [ 0:01] ## UDEV:	
| [ 0:01] ## UDEV:	P: /devices/virtual/block/loop0
| [ 0:01] ## UDEV:	N: loop0
| [ 0:01] ## UDEV:	E: DEVNAME=/dev/loop0
| [ 0:01] ## UDEV:	E: DEVPATH=/devices/virtual/block/loop0
| [ 0:01] ## UDEV:	E: DEVTYPE=disk
| [ 0:01] ## UDEV:	E: MAJOR=7
| [ 0:01] ## UDEV:	E: MINOR=0
| [ 0:01] ## UDEV:	E: SUBSYSTEM=block
| [ 0:01] ## UDEV:	
| [ 0:01] <======== Script file "process-each-pv.sh" ========>
| [ 0:01] ## Line: 1 	 #!/usr/bin/env bash
| [ 0:01] ## Line: 2 	 
| [ 0:01] ## Line: 3 	 # Copyright (C) 2014 Red Hat, Inc. All rights reserved.
| [ 0:01] ## Line: 4 	 #
| [ 0:01] ## Line: 5 	 # This copyrighted material is made available to anyone wishing to use,
| [ 0:01] ## Line: 6 	 # modify, copy, or redistribute it subject to the terms and conditions
| [ 0:01] ## Line: 7 	 # of the GNU General Public License v.2.
| [ 0:01] ## Line: 8 	 #
| [ 0:01] ## Line: 9 	 # You should have received a copy of the GNU General Public License
| [ 0:01] ## Line: 10 	 # along with this program; if not, write to the Free Software Foundation,
| [ 0:01] ## Line: 11 	 # Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA
| [ 0:01] ## Line: 12 	 
| [ 0:01] ## Line: 13 	 test_description='Exercise toollib process_each_pv'
| [ 0:01] ## Line: 14 	 SKIP_WITH_LVMPOLLD=1
| [ 0:01] ## Line: 15 	 
| [ 0:01] ## Line: 16 	 . lib/inittest
| [ 0:01] ## Line: 17 	 
| [ 0:01] ## Line: 18 	 aux prepare_devs 14
| [ 0:01] ## Line: 19 	 
| [ 0:01] ## Line: 20 	 #
| [ 0:01] ## Line: 21 	 # process_each_pv is used by a number of pv commands:
| [ 0:01] ## Line: 22 	 # pvdisplay
| [ 0:01] ## Line: 23 	 # pvresize
| [ 0:01] ## Line: 24 	 # pvs
| [ 0:01] ## Line: 25 	 #
| [ 0:01] ## Line: 26 	 # process-each-pvresize.sh covers pvresize.
| [ 0:01] ## Line: 27 	 # process-each-vgreduce.sh covers vgreduce.
| [ 0:01] ## Line: 28 	 #
| [ 0:01] ## Line: 29 	 
| [ 0:01] ## Line: 30 	 
| [ 0:01] ## Line: 31 	 #
| [ 0:01] ## Line: 32 	 # set up
| [ 0:01] ## Line: 33 	 #
| [ 0:01] ## Line: 34 	 # use use dev10 instead of dev1 because simple grep for
| [ 0:01] ## Line: 35 	 # dev1 matchines dev10,dev11,etc
| [ 0:01] ## Line: 36 	 #
| [ 0:01] ## Line: 37 	 
| [ 0:01] ## Line: 38 	 vgcreate $SHARED $vg1 "$dev10"
| [ 0:01] ## Line: 39 	 vgcreate $SHARED $vg2 "$dev2" "$dev3" "$dev4" "$dev5"
| [ 0:01] ## Line: 40 	 vgcreate $SHARED $vg3 "$dev6" "$dev7" "$dev8" "$dev9"
| [ 0:01] ## Line: 41 	 
| [ 0:01] ## Line: 42 	 pvchange --addtag V2D3 "$dev3"
| [ 0:01] ## Line: 43 	 pvchange --addtag V2D4 "$dev4"
| [ 0:01] ## Line: 44 	 pvchange --addtag V2D45 "$dev4"
| [ 0:01] ## Line: 45 	 pvchange --addtag V2D5 "$dev5"
| [ 0:01] ## Line: 46 	 pvchange --addtag V2D45 "$dev5"
| [ 0:01] ## Line: 47 	 
| [ 0:01] ## Line: 48 	 pvchange --addtag V3 "$dev6" "$dev7" "$dev8" "$dev9"
| [ 0:01] ## Line: 49 	 pvchange --addtag V3D9 "$dev9"
| [ 0:01] ## Line: 50 	 
| [ 0:01] ## Line: 51 	 # orphan
| [ 0:01] ## Line: 52 	 pvcreate "$dev11"
| [ 0:01] ## Line: 53 	 
| [ 0:01] ## Line: 54 	 # dev (a non-pv device)
| [ 0:01] ## Line: 55 	 pvcreate "$dev12"
| [ 0:01] ## Line: 56 	 pvremove "$dev12"
| [ 0:01] ## Line: 57 	 
| [ 0:01] ## Line: 58 	 # dev13 is intentionally untouched so we can
| [ 0:01] ## Line: 59 	 # test that it is handled appropriately as a non-pv
| [ 0:01] ## Line: 60 	 
| [ 0:01] ## Line: 61 	 # orphan
| [ 0:01] ## Line: 62 	 pvcreate "$dev14"
| [ 0:01] ## Line: 63 	 
| [ 0:01] ## Line: 64 	 
| [ 0:01] ## Line: 65 	 #
| [ 0:01] ## Line: 66 	 # test pvdisplay
| [ 0:01] ## Line: 67 	 #
| [ 0:01] ## Line: 68 	 
| [ 0:01] ## Line: 69 	 # pv in vg
| [ 0:01] ## Line: 70 	 pvdisplay -s "$dev10" | tee err
| [ 0:01] ## Line: 71 	 grep "$dev10" err
| [ 0:01] ## Line: 72 	 not grep "$dev2" err
| [ 0:01] ## Line: 73 	 not grep "$dev3" err
| [ 0:01] ## Line: 74 	 not grep "$dev4" err
| [ 0:01] ## Line: 75 	 not grep "$dev5" err
| [ 0:01] ## Line: 76 	 not grep "$dev6" err
| [ 0:01] ## Line: 77 	 not grep "$dev7" err
| [ 0:01] ## Line: 78 	 not grep "$dev8" err
| [ 0:01] ## Line: 79 	 not grep "$dev9" err
| [ 0:01] ## Line: 80 	 not grep "$dev11" err
| [ 0:01] ## Line: 81 	 not grep "$dev12" err
| [ 0:01] ## Line: 82 	 not grep "$dev13" err
| [ 0:01] ## Line: 83 	 not grep "$dev14" err
| [ 0:01] ## Line: 84 	 
| [ 0:01] ## Line: 85 	 # pv not in vg (one orphan)
| [ 0:01] ## Line: 86 	 pvdisplay -s "$dev11" | tee err
| [ 0:01] ## Line: 87 	 not grep "$dev10" err
| [ 0:01] ## Line: 88 	 not grep "$dev2" err
| [ 0:01] ## Line: 89 	 not grep "$dev3" err
| [ 0:01] ## Line: 90 	 not grep "$dev4" err
| [ 0:01] ## Line: 91 	 not grep "$dev5" err
| [ 0:01] ## Line: 92 	 not grep "$dev6" err
| [ 0:01] ## Line: 93 	 not grep "$dev7" err
| [ 0:01] ## Line: 94 	 not grep "$dev8" err
| [ 0:01] ## Line: 95 	 not grep "$dev9" err
| [ 0:01] ## Line: 96 	 grep "$dev11" err
| [ 0:01] ## Line: 97 	 not grep "$dev12" err
| [ 0:01] ## Line: 98 	 not grep "$dev13" err
| [ 0:01] ## Line: 99 	 not grep "$dev14" err
| [ 0:01] ## Line: 100 	 
| [ 0:01] ## Line: 101 	 # dev is not a pv
| [ 0:01] ## Line: 102 	 not pvdisplay -s "$dev12" | tee err
| [ 0:01] ## Line: 103 	 not grep "$dev10" err
| [ 0:01] ## Line: 104 	 not grep "$dev2" err
| [ 0:01] ## Line: 105 	 not grep "$dev3" err
| [ 0:01] ## Line: 106 	 not grep "$dev4" err
| [ 0:01] ## Line: 107 	 not grep "$dev5" err
| [ 0:01] ## Line: 108 	 not grep "$dev6" err
| [ 0:01] ## Line: 109 	 not grep "$dev7" err
| [ 0:01] ## Line: 110 	 not grep "$dev8" err
| [ 0:01] ## Line: 111 	 not grep "$dev9" err
| [ 0:01] ## Line: 112 	 not grep "$dev11" err
| [ 0:01] ## Line: 113 	 not grep "$dev12" err
| [ 0:01] ## Line: 114 	 not grep "$dev13" err
| [ 0:01] ## Line: 115 	 not grep "$dev14" err
| [ 0:01] ## Line: 116 	 
| [ 0:01] ## Line: 117 	 # two pvs in different vgs
| [ 0:01] ## Line: 118 	 pvdisplay -s "$dev10" "$dev2" | tee err
| [ 0:01] ## Line: 119 	 grep "$dev10" err
| [ 0:01] ## Line: 120 	 grep "$dev2" err
| [ 0:01] ## Line: 121 	 not grep "$dev3" err
| [ 0:01] ## Line: 122 	 not grep "$dev4" err
| [ 0:01] ## Line: 123 	 not grep "$dev5" err
| [ 0:01] ## Line: 124 	 not grep "$dev6" err
| [ 0:01] ## Line: 125 	 not grep "$dev7" err
| [ 0:01] ## Line: 126 	 not grep "$dev8" err
| [ 0:01] ## Line: 127 	 not grep "$dev9" err
| [ 0:01] ## Line: 128 	 not grep "$dev11" err
| [ 0:01] ## Line: 129 	 not grep "$dev12" err
| [ 0:01] ## Line: 130 	 not grep "$dev13" err
| [ 0:01] ## Line: 131 	 not grep "$dev14" err
| [ 0:01] ## Line: 132 	 
| [ 0:01] ## Line: 133 	 # -a is invalid when used alone
| [ 0:01] ## Line: 134 	 not pvdisplay -a | tee err
| [ 0:01] ## Line: 135 	 not grep "$dev10" err
| [ 0:01] ## Line: 136 	 not grep "$dev2" err
| [ 0:01] ## Line: 137 	 not grep "$dev3" err
| [ 0:01] ## Line: 138 	 not grep "$dev4" err
| [ 0:01] ## Line: 139 	 not grep "$dev5" err
| [ 0:01] ## Line: 140 	 not grep "$dev6" err
| [ 0:01] ## Line: 141 	 not grep "$dev7" err
| [ 0:01] ## Line: 142 	 not grep "$dev8" err
| [ 0:01] ## Line: 143 	 not grep "$dev9" err
| [ 0:01] ## Line: 144 	 not grep "$dev11" err
| [ 0:01] ## Line: 145 	 not grep "$dev12" err
| [ 0:01] ## Line: 146 	 not grep "$dev13" err
| [ 0:01] ## Line: 147 	 not grep "$dev14" err
| [ 0:01] ## Line: 148 	 
| [ 0:01] ## Line: 149 	 # one pv and one orphan
| [ 0:01] ## Line: 150 	 pvdisplay -s "$dev10" "$dev11" | tee err
| [ 0:01] ## Line: 151 	 grep "$dev10" err
| [ 0:01] ## Line: 152 	 not grep "$dev2" err
| [ 0:01] ## Line: 153 	 not grep "$dev3" err
| [ 0:01] ## Line: 154 	 not grep "$dev4" err
| [ 0:01] ## Line: 155 	 not grep "$dev5" err
| [ 0:01] ## Line: 156 	 not grep "$dev6" err
| [ 0:01] ## Line: 157 	 not grep "$dev7" err
| [ 0:01] ## Line: 158 	 not grep "$dev8" err
| [ 0:01] ## Line: 159 	 not grep "$dev9" err
| [ 0:01] ## Line: 160 	 grep "$dev11" err
| [ 0:01] ## Line: 161 	 not grep "$dev12" err
| [ 0:01] ## Line: 162 	 not grep "$dev13" err
| [ 0:01] ## Line: 163 	 not grep "$dev14" err
| [ 0:01] ## Line: 164 	 
| [ 0:01] ## Line: 165 	 # one pv and one dev (dev refers to a non-pv device)
| [ 0:01] ## Line: 166 	 not pvdisplay -s "$dev10" "$dev12" | tee err
| [ 0:01] ## Line: 167 	 grep "$dev10" err
| [ 0:01] ## Line: 168 	 not grep "$dev2" err
| [ 0:01] ## Line: 169 	 not grep "$dev3" err
| [ 0:01] ## Line: 170 	 not grep "$dev4" err
| [ 0:01] ## Line: 171 	 not grep "$dev5" err
| [ 0:01] ## Line: 172 	 not grep "$dev6" err
| [ 0:01] ## Line: 173 	 not grep "$dev7" err
| [ 0:01] ## Line: 174 	 not grep "$dev8" err
| [ 0:01] ## Line: 175 	 not grep "$dev9" err
| [ 0:01] ## Line: 176 	 not grep "$dev11" err
| [ 0:01] ## Line: 177 	 not grep "$dev12" err
| [ 0:01] ## Line: 178 	 not grep "$dev13" err
| [ 0:01] ## Line: 179 	 not grep "$dev14" err
| [ 0:01] ## Line: 180 	 
| [ 0:01] ## Line: 181 	 # one orphan and one dev
| [ 0:01] ## Line: 182 	 not pvdisplay -s "$dev11" "$dev12" | tee err
| [ 0:01] ## Line: 183 	 not grep "$dev10" err
| [ 0:01] ## Line: 184 	 not grep "$dev2" err
| [ 0:01] ## Line: 185 	 not grep "$dev3" err
| [ 0:01] ## Line: 186 	 not grep "$dev4" err
| [ 0:01] ## Line: 187 	 not grep "$dev5" err
| [ 0:01] ## Line: 188 	 not grep "$dev6" err
| [ 0:01] ## Line: 189 	 not grep "$dev7" err
| [ 0:01] ## Line: 190 	 not grep "$dev8" err
| [ 0:01] ## Line: 191 	 not grep "$dev9" err
| [ 0:01] ## Line: 192 	 grep "$dev11" err
| [ 0:01] ## Line: 193 	 not grep "$dev12" err
| [ 0:01] ## Line: 194 	 not grep "$dev13" err
| [ 0:01] ## Line: 195 	 not grep "$dev14" err
| [ 0:01] ## Line: 196 	 
| [ 0:01] ## Line: 197 	 # all pvs (pvs in vgs and orphan pvs)
| [ 0:01] ## Line: 198 	 pvdisplay -s | tee err
| [ 0:01] ## Line: 199 	 grep "$dev10" err
| [ 0:01] ## Line: 200 	 grep "$dev2" err
| [ 0:01] ## Line: 201 	 grep "$dev3" err
| [ 0:01] ## Line: 202 	 grep "$dev4" err
| [ 0:01] ## Line: 203 	 grep "$dev5" err
| [ 0:01] ## Line: 204 	 grep "$dev6" err
| [ 0:01] ## Line: 205 	 grep "$dev7" err
| [ 0:01] ## Line: 206 	 grep "$dev8" err
| [ 0:01] ## Line: 207 	 grep "$dev9" err
| [ 0:01] ## Line: 208 	 grep "$dev11" err
| [ 0:01] ## Line: 209 	 not grep "$dev12" err
| [ 0:01] ## Line: 210 	 not grep "$dev13" err
| [ 0:01] ## Line: 211 	 grep "$dev14" err
| [ 0:01] ## Line: 212 	 
| [ 0:01] ## Line: 213 	 # all devs (pvs in vgs, orphan pvs, and devs)
| [ 0:01] ## Line: 214 	 pvdisplay -a -C | tee err
| [ 0:01] ## Line: 215 	 grep "$dev10" err
| [ 0:01] ## Line: 216 	 grep "$dev2" err
| [ 0:01] ## Line: 217 	 grep "$dev3" err
| [ 0:01] ## Line: 218 	 grep "$dev4" err
| [ 0:01] ## Line: 219 	 grep "$dev5" err
| [ 0:01] ## Line: 220 	 grep "$dev6" err
| [ 0:01] ## Line: 221 	 grep "$dev7" err
| [ 0:01] ## Line: 222 	 grep "$dev8" err
| [ 0:01] ## Line: 223 	 grep "$dev9" err
| [ 0:01] ## Line: 224 	 grep "$dev11" err
| [ 0:01] ## Line: 225 	 grep "$dev12" err
| [ 0:01] ## Line: 226 	 grep "$dev13" err
| [ 0:01] ## Line: 227 	 grep "$dev14" err
| [ 0:01] ## Line: 228 	 
| [ 0:01] ## Line: 229 	 # pv and orphan and dev
| [ 0:01] ## Line: 230 	 not pvdisplay -s "$dev9" "$dev11" "$dev12" | tee err
| [ 0:01] ## Line: 231 	 not grep "$dev10" err
| [ 0:01] ## Line: 232 	 not grep "$dev2" err
| [ 0:01] ## Line: 233 	 not grep "$dev3" err
| [ 0:01] ## Line: 234 	 not grep "$dev4" err
| [ 0:01] ## Line: 235 	 not grep "$dev5" err
| [ 0:01] ## Line: 236 	 not grep "$dev6" err
| [ 0:01] ## Line: 237 	 not grep "$dev7" err
| [ 0:01] ## Line: 238 	 not grep "$dev8" err
| [ 0:01] ## Line: 239 	 grep "$dev9" err
| [ 0:01] ## Line: 240 	 grep "$dev11" err
| [ 0:01] ## Line: 241 	 not grep "$dev12" err
| [ 0:01] ## Line: 242 	 not grep "$dev13" err
| [ 0:01] ## Line: 243 	 not grep "$dev14" err
| [ 0:01] ## Line: 244 	 
| [ 0:01] ## Line: 245 	 # -s option not allowed with -a -C
| [ 0:01] ## Line: 246 	 not pvdisplay -s -a -C | tee err
| [ 0:01] ## Line: 247 	 not grep "$dev10" err
| [ 0:01] ## Line: 248 	 not grep "$dev2" err
| [ 0:01] ## Line: 249 	 not grep "$dev3" err
| [ 0:01] ## Line: 250 	 not grep "$dev4" err
| [ 0:01] ## Line: 251 	 not grep "$dev5" err
| [ 0:01] ## Line: 252 	 not grep "$dev6" err
| [ 0:01] ## Line: 253 	 not grep "$dev7" err
| [ 0:01] ## Line: 254 	 not grep "$dev8" err
| [ 0:01] ## Line: 255 	 not grep "$dev9" err
| [ 0:01] ## Line: 256 	 not grep "$dev11" err
| [ 0:01] ## Line: 257 	 not grep "$dev12" err
| [ 0:01] ## Line: 258 	 not grep "$dev13" err
| [ 0:01] ## Line: 259 	 not grep "$dev14" err
| [ 0:01] ## Line: 260 	 
| [ 0:01] ## Line: 261 	 # pv and all (all ignored)
| [ 0:01] ## Line: 262 	 pvdisplay -a -C "$dev9" | tee err
| [ 0:01] ## Line: 263 	 not grep "$dev10" err
| [ 0:01] ## Line: 264 	 not grep "$dev2" err
| [ 0:01] ## Line: 265 	 not grep "$dev3" err
| [ 0:01] ## Line: 266 	 not grep "$dev4" err
| [ 0:01] ## Line: 267 	 not grep "$dev5" err
| [ 0:01] ## Line: 268 	 not grep "$dev6" err
| [ 0:01] ## Line: 269 	 not grep "$dev7" err
| [ 0:01] ## Line: 270 	 not grep "$dev8" err
| [ 0:01] ## Line: 271 	 grep "$dev9" err
| [ 0:01] ## Line: 272 	 not grep "$dev11" err
| [ 0:01] ## Line: 273 	 not grep "$dev12" err
| [ 0:01] ## Line: 274 	 not grep "$dev13" err
| [ 0:01] ## Line: 275 	 not grep "$dev14" err
| [ 0:01] ## Line: 276 	 
| [ 0:01] ## Line: 277 	 # orphan and all (all ignored)
| [ 0:01] ## Line: 278 	 pvdisplay -a -C "$dev11" | tee err
| [ 0:01] ## Line: 279 	 not grep "$dev10" err
| [ 0:01] ## Line: 280 	 not grep "$dev2" err
| [ 0:01] ## Line: 281 	 not grep "$dev3" err
| [ 0:01] ## Line: 282 	 not grep "$dev4" err
| [ 0:01] ## Line: 283 	 not grep "$dev5" err
| [ 0:01] ## Line: 284 	 not grep "$dev6" err
| [ 0:01] ## Line: 285 	 not grep "$dev7" err
| [ 0:01] ## Line: 286 	 not grep "$dev8" err
| [ 0:01] ## Line: 287 	 not grep "$dev9" err
| [ 0:01] ## Line: 288 	 grep "$dev11" err
| [ 0:01] ## Line: 289 	 not grep "$dev12" err
| [ 0:01] ## Line: 290 	 not grep "$dev13" err
| [ 0:01] ## Line: 291 	 not grep "$dev14" err
| [ 0:01] ## Line: 292 	 
| [ 0:01] ## Line: 293 	 # one tag
| [ 0:01] ## Line: 294 	 pvdisplay -s @V2D3 | tee err
| [ 0:01] ## Line: 295 	 not grep "$dev10" err
| [ 0:01] ## Line: 296 	 not grep "$dev2" err
| [ 0:01] ## Line: 297 	 grep "$dev3" err
| [ 0:01] ## Line: 298 	 not grep "$dev4" err
| [ 0:01] ## Line: 299 	 not grep "$dev5" err
| [ 0:01] ## Line: 300 	 not grep "$dev6" err
| [ 0:01] ## Line: 301 	 not grep "$dev7" err
| [ 0:01] ## Line: 302 	 not grep "$dev8" err
| [ 0:01] ## Line: 303 	 not grep "$dev9" err
| [ 0:01] ## Line: 304 	 not grep "$dev11" err
| [ 0:01] ## Line: 305 	 not grep "$dev12" err
| [ 0:01] ## Line: 306 	 not grep "$dev13" err
| [ 0:01] ## Line: 307 	 not grep "$dev14" err
| [ 0:01] ## Line: 308 	 
| [ 0:01] ## Line: 309 	 # two tags
| [ 0:01] ## Line: 310 	 pvdisplay -s @V2D3 @V2D45 | tee err
| [ 0:01] ## Line: 311 	 not grep "$dev10" err
| [ 0:01] ## Line: 312 	 not grep "$dev2" err
| [ 0:01] ## Line: 313 	 grep "$dev3" err
| [ 0:01] ## Line: 314 	 grep "$dev4" err
| [ 0:01] ## Line: 315 	 grep "$dev5" err
| [ 0:01] ## Line: 316 	 not grep "$dev6" err
| [ 0:01] ## Line: 317 	 not grep "$dev7" err
| [ 0:01] ## Line: 318 	 not grep "$dev8" err
| [ 0:01] ## Line: 319 	 not grep "$dev9" err
| [ 0:01] ## Line: 320 	 not grep "$dev11" err
| [ 0:01] ## Line: 321 	 not grep "$dev12" err
| [ 0:01] ## Line: 322 	 not grep "$dev13" err
| [ 0:01] ## Line: 323 	 not grep "$dev14" err
| [ 0:01] ## Line: 324 	 
| [ 0:01] ## Line: 325 	 # tag and pv
| [ 0:01] ## Line: 326 	 pvdisplay -s @V2D3 "$dev4" | tee err
| [ 0:01] ## Line: 327 	 not grep "$dev10" err
| [ 0:01] ## Line: 328 	 not grep "$dev2" err
| [ 0:01] ## Line: 329 	 grep "$dev3" err
| [ 0:01] ## Line: 330 	 grep "$dev4" err
| [ 0:01] ## Line: 331 	 not grep "$dev5" err
| [ 0:01] ## Line: 332 	 not grep "$dev6" err
| [ 0:01] ## Line: 333 	 not grep "$dev7" err
| [ 0:01] ## Line: 334 	 not grep "$dev8" err
| [ 0:01] ## Line: 335 	 not grep "$dev9" err
| [ 0:01] ## Line: 336 	 not grep "$dev11" err
| [ 0:01] ## Line: 337 	 not grep "$dev12" err
| [ 0:01] ## Line: 338 	 not grep "$dev13" err
| [ 0:01] ## Line: 339 	 not grep "$dev14" err
| [ 0:01] ## Line: 340 	 
| [ 0:01] ## Line: 341 	 # tag and orphan
| [ 0:01] ## Line: 342 	 pvdisplay -s @V2D3 "$dev11" | tee err
| [ 0:01] ## Line: 343 	 not grep "$dev10" err
| [ 0:01] ## Line: 344 	 not grep "$dev2" err
| [ 0:01] ## Line: 345 	 grep "$dev3" err
| [ 0:01] ## Line: 346 	 not grep "$dev4" err
| [ 0:01] ## Line: 347 	 not grep "$dev5" err
| [ 0:01] ## Line: 348 	 not grep "$dev6" err
| [ 0:01] ## Line: 349 	 not grep "$dev7" err
| [ 0:01] ## Line: 350 	 not grep "$dev8" err
| [ 0:01] ## Line: 351 	 not grep "$dev9" err
| [ 0:01] ## Line: 352 	 grep "$dev11" err
| [ 0:01] ## Line: 353 	 not grep "$dev12" err
| [ 0:01] ## Line: 354 	 not grep "$dev13" err
| [ 0:01] ## Line: 355 	 not grep "$dev14" err
| [ 0:01] ## Line: 356 	 
| [ 0:01] ## Line: 357 	 # tag and dev
| [ 0:01] ## Line: 358 	 not pvdisplay -s @V2D3 "$dev12" | tee err
| [ 0:01] ## Line: 359 	 not grep "$dev10" err
| [ 0:01] ## Line: 360 	 not grep "$dev2" err
| [ 0:01] ## Line: 361 	 grep "$dev3" err
| [ 0:01] ## Line: 362 	 not grep "$dev4" err
| [ 0:01] ## Line: 363 	 not grep "$dev5" err
| [ 0:01] ## Line: 364 	 not grep "$dev6" err
| [ 0:01] ## Line: 365 	 not grep "$dev7" err
| [ 0:01] ## Line: 366 	 not grep "$dev8" err
| [ 0:01] ## Line: 367 	 not grep "$dev9" err
| [ 0:01] ## Line: 368 	 not grep "$dev11" err
| [ 0:01] ## Line: 369 	 not grep "$dev12" err
| [ 0:01] ## Line: 370 	 not grep "$dev13" err
| [ 0:01] ## Line: 371 	 not grep "$dev14" err
| [ 0:01] ## Line: 372 	 
| [ 0:01] ## Line: 373 	 # tag and all (all ignored)
| [ 0:01] ## Line: 374 	 pvdisplay @V2D3 -a -C | tee err
| [ 0:01] ## Line: 375 	 not grep "$dev10" err
| [ 0:01] ## Line: 376 	 not grep "$dev2" err
| [ 0:01] ## Line: 377 	 grep "$dev3" err
| [ 0:01] ## Line: 378 	 not grep "$dev4" err
| [ 0:01] ## Line: 379 	 not grep "$dev5" err
| [ 0:01] ## Line: 380 	 not grep "$dev6" err
| [ 0:01] ## Line: 381 	 not grep "$dev7" err
| [ 0:01] ## Line: 382 	 not grep "$dev8" err
| [ 0:01] ## Line: 383 	 not grep "$dev9" err
| [ 0:01] ## Line: 384 	 not grep "$dev11" err
| [ 0:01] ## Line: 385 	 not grep "$dev12" err
| [ 0:01] ## Line: 386 	 not grep "$dev13" err
| [ 0:01] ## Line: 387 	 not grep "$dev14" err
| [ 0:01] ## Line: 388 	 
| [ 0:01] ## Line: 389 	 # tag and pv redundant
| [ 0:01] ## Line: 390 	 pvdisplay -s @V2D3 "$dev3" | tee err
| [ 0:01] ## Line: 391 	 not grep "$dev10" err
| [ 0:01] ## Line: 392 	 not grep "$dev2" err
| [ 0:01] ## Line: 393 	 grep "$dev3" err
| [ 0:01] ## Line: 394 	 not grep "$dev4" err
| [ 0:01] ## Line: 395 	 not grep "$dev5" err
| [ 0:01] ## Line: 396 	 not grep "$dev6" err
| [ 0:01] ## Line: 397 	 not grep "$dev7" err
| [ 0:01] ## Line: 398 	 not grep "$dev8" err
| [ 0:01] ## Line: 399 	 not grep "$dev9" err
| [ 0:01] ## Line: 400 	 not grep "$dev11" err
| [ 0:01] ## Line: 401 	 not grep "$dev12" err
| [ 0:01] ## Line: 402 	 not grep "$dev13" err
| [ 0:01] ## Line: 403 	 not grep "$dev14" err
| [ 0:01] ## Line: 404 	 
| [ 0:01] ## Line: 405 	 
| [ 0:01] ## Line: 406 	 #
| [ 0:01] ## Line: 407 	 # test pvs
| [ 0:01] ## Line: 408 	 #
| [ 0:01] ## Line: 409 	 
| [ 0:01] ## Line: 410 	 # pv in vg
| [ 0:01] ## Line: 411 	 pvs "$dev10" | tee err
| [ 0:01] ## Line: 412 	 grep "$dev10" err
| [ 0:01] ## Line: 413 	 not grep "$dev2" err
| [ 0:01] ## Line: 414 	 not grep "$dev3" err
| [ 0:01] ## Line: 415 	 not grep "$dev4" err
| [ 0:01] ## Line: 416 	 not grep "$dev5" err
| [ 0:01] ## Line: 417 	 not grep "$dev6" err
| [ 0:01] ## Line: 418 	 not grep "$dev7" err
| [ 0:01] ## Line: 419 	 not grep "$dev8" err
| [ 0:01] ## Line: 420 	 not grep "$dev9" err
| [ 0:01] ## Line: 421 	 not grep "$dev11" err
| [ 0:01] ## Line: 422 	 not grep "$dev12" err
| [ 0:01] ## Line: 423 	 not grep "$dev13" err
| [ 0:01] ## Line: 424 	 not grep "$dev14" err
| [ 0:01] ## Line: 425 	 
| [ 0:01] ## Line: 426 	 # pv not in vg (one orphan)
| [ 0:01] ## Line: 427 	 pvs "$dev11" | tee err
| [ 0:01] ## Line: 428 	 not grep "$dev10" err
| [ 0:01] ## Line: 429 	 not grep "$dev2" err
| [ 0:01] ## Line: 430 	 not grep "$dev3" err
| [ 0:01] ## Line: 431 	 not grep "$dev4" err
| [ 0:01] ## Line: 432 	 not grep "$dev5" err
| [ 0:01] ## Line: 433 	 not grep "$dev6" err
| [ 0:01] ## Line: 434 	 not grep "$dev7" err
| [ 0:01] ## Line: 435 	 not grep "$dev8" err
| [ 0:01] ## Line: 436 	 not grep "$dev9" err
| [ 0:01] ## Line: 437 	 grep "$dev11" err
| [ 0:01] ## Line: 438 	 not grep "$dev12" err
| [ 0:01] ## Line: 439 	 not grep "$dev13" err
| [ 0:01] ## Line: 440 	 not grep "$dev14" err
| [ 0:01] ## Line: 441 	 
| [ 0:01] ## Line: 442 	 # dev is not a pv
| [ 0:01] ## Line: 443 	 not pvs "$dev12" | tee err
| [ 0:01] ## Line: 444 	 not grep "$dev10" err
| [ 0:01] ## Line: 445 	 not grep "$dev2" err
| [ 0:01] ## Line: 446 	 not grep "$dev3" err
| [ 0:01] ## Line: 447 	 not grep "$dev4" err
| [ 0:01] ## Line: 448 	 not grep "$dev5" err
| [ 0:01] ## Line: 449 	 not grep "$dev6" err
| [ 0:01] ## Line: 450 	 not grep "$dev7" err
| [ 0:01] ## Line: 451 	 not grep "$dev8" err
| [ 0:01] ## Line: 452 	 not grep "$dev9" err
| [ 0:01] ## Line: 453 	 not grep "$dev11" err
| [ 0:01] ## Line: 454 	 not grep "$dev12" err
| [ 0:01] ## Line: 455 	 not grep "$dev13" err
| [ 0:01] ## Line: 456 	 not grep "$dev14" err
| [ 0:01] ## Line: 457 	 
| [ 0:01] ## Line: 458 	 # two pvs in different vgs
| [ 0:01] ## Line: 459 	 pvs "$dev10" "$dev2" | tee err
| [ 0:01] ## Line: 460 	 grep "$dev10" err
| [ 0:01] ## Line: 461 	 grep "$dev2" err
| [ 0:01] ## Line: 462 	 not grep "$dev3" err
| [ 0:01] ## Line: 463 	 not grep "$dev4" err
| [ 0:01] ## Line: 464 	 not grep "$dev5" err
| [ 0:01] ## Line: 465 	 not grep "$dev6" err
| [ 0:01] ## Line: 466 	 not grep "$dev7" err
| [ 0:01] ## Line: 467 	 not grep "$dev8" err
| [ 0:01] ## Line: 468 	 not grep "$dev9" err
| [ 0:01] ## Line: 469 	 not grep "$dev11" err
| [ 0:01] ## Line: 470 	 not grep "$dev12" err
| [ 0:01] ## Line: 471 	 not grep "$dev13" err
| [ 0:01] ## Line: 472 	 not grep "$dev14" err
| [ 0:01] ## Line: 473 	 
| [ 0:01] ## Line: 474 	 # one pv and one orphan
| [ 0:01] ## Line: 475 	 pvs "$dev10" "$dev11" | tee err
| [ 0:01] ## Line: 476 	 grep "$dev10" err
| [ 0:01] ## Line: 477 	 not grep "$dev2" err
| [ 0:01] ## Line: 478 	 not grep "$dev3" err
| [ 0:01] ## Line: 479 	 not grep "$dev4" err
| [ 0:01] ## Line: 480 	 not grep "$dev5" err
| [ 0:01] ## Line: 481 	 not grep "$dev6" err
| [ 0:01] ## Line: 482 	 not grep "$dev7" err
| [ 0:01] ## Line: 483 	 not grep "$dev8" err
| [ 0:01] ## Line: 484 	 not grep "$dev9" err
| [ 0:01] ## Line: 485 	 grep "$dev11" err
| [ 0:01] ## Line: 486 	 not grep "$dev12" err
| [ 0:01] ## Line: 487 	 not grep "$dev13" err
| [ 0:01] ## Line: 488 	 not grep "$dev14" err
| [ 0:01] ## Line: 489 	 
| [ 0:01] ## Line: 490 	 # one pv and one dev
| [ 0:01] ## Line: 491 	 not pvs "$dev10" "$dev12" | tee err
| [ 0:01] ## Line: 492 	 grep "$dev10" err
| [ 0:01] ## Line: 493 	 not grep "$dev2" err
| [ 0:01] ## Line: 494 	 not grep "$dev3" err
| [ 0:01] ## Line: 495 	 not grep "$dev4" err
| [ 0:01] ## Line: 496 	 not grep "$dev5" err
| [ 0:01] ## Line: 497 	 not grep "$dev6" err
| [ 0:01] ## Line: 498 	 not grep "$dev7" err
| [ 0:01] ## Line: 499 	 not grep "$dev8" err
| [ 0:01] ## Line: 500 	 not grep "$dev9" err
| [ 0:01] ## Line: 501 	 not grep "$dev11" err
| [ 0:01] ## Line: 502 	 not grep "$dev12" err
| [ 0:01] ## Line: 503 	 not grep "$dev13" err
| [ 0:01] ## Line: 504 	 not grep "$dev14" err
| [ 0:01] ## Line: 505 	 
| [ 0:01] ## Line: 506 	 # one orphan and one dev
| [ 0:01] ## Line: 507 	 not pvs "$dev11" "$dev12" | tee err
| [ 0:01] ## Line: 508 	 not grep "$dev10" err
| [ 0:01] ## Line: 509 	 not grep "$dev2" err
| [ 0:01] ## Line: 510 	 not grep "$dev3" err
| [ 0:01] ## Line: 511 	 not grep "$dev4" err
| [ 0:01] ## Line: 512 	 not grep "$dev5" err
| [ 0:01] ## Line: 513 	 not grep "$dev6" err
| [ 0:01] ## Line: 514 	 not grep "$dev7" err
| [ 0:01] ## Line: 515 	 not grep "$dev8" err
| [ 0:01] ## Line: 516 	 not grep "$dev9" err
| [ 0:01] ## Line: 517 	 grep "$dev11" err
| [ 0:01] ## Line: 518 	 not grep "$dev12" err
| [ 0:01] ## Line: 519 	 not grep "$dev13" err
| [ 0:01] ## Line: 520 	 not grep "$dev14" err
| [ 0:01] ## Line: 521 	 
| [ 0:01] ## Line: 522 	 # all pvs (pvs in vgs and orphan pvs)
| [ 0:01] ## Line: 523 	 pvs | tee err
| [ 0:01] ## Line: 524 	 grep "$dev10" err
| [ 0:01] ## Line: 525 	 grep "$dev2" err
| [ 0:01] ## Line: 526 	 grep "$dev3" err
| [ 0:01] ## Line: 527 	 grep "$dev4" err
| [ 0:01] ## Line: 528 	 grep "$dev5" err
| [ 0:01] ## Line: 529 	 grep "$dev6" err
| [ 0:01] ## Line: 530 	 grep "$dev7" err
| [ 0:01] ## Line: 531 	 grep "$dev8" err
| [ 0:01] ## Line: 532 	 grep "$dev9" err
| [ 0:01] ## Line: 533 	 grep "$dev11" err
| [ 0:01] ## Line: 534 	 not grep "$dev12" err
| [ 0:01] ## Line: 535 	 not grep "$dev13" err
| [ 0:01] ## Line: 536 	 grep "$dev14" err
| [ 0:01] ## Line: 537 	 
| [ 0:01] ## Line: 538 	 # all devs (pvs in vgs, orphan pvs, and devs)
| [ 0:01] ## Line: 539 	 pvs -a | tee err
| [ 0:01] ## Line: 540 	 grep "$dev10" err
| [ 0:01] ## Line: 541 	 grep "$dev2" err
| [ 0:01] ## Line: 542 	 grep "$dev3" err
| [ 0:01] ## Line: 543 	 grep "$dev4" err
| [ 0:01] ## Line: 544 	 grep "$dev5" err
| [ 0:01] ## Line: 545 	 grep "$dev6" err
| [ 0:01] ## Line: 546 	 grep "$dev7" err
| [ 0:01] ## Line: 547 	 grep "$dev8" err
| [ 0:01] ## Line: 548 	 grep "$dev9" err
| [ 0:01] ## Line: 549 	 grep "$dev11" err
| [ 0:01] ## Line: 550 	 grep "$dev12" err
| [ 0:01] ## Line: 551 	 grep "$dev13" err
| [ 0:01] ## Line: 552 	 grep "$dev14" err
| [ 0:01] ## Line: 553 	 
| [ 0:01] ## Line: 554 	 # pv and orphan and dev
| [ 0:01] ## Line: 555 	 not pvs "$dev9" "$dev11" "$dev12" | tee err
| [ 0:01] ## Line: 556 	 not grep "$dev10" err
| [ 0:01] ## Line: 557 	 not grep "$dev2" err
| [ 0:01] ## Line: 558 	 not grep "$dev3" err
| [ 0:01] ## Line: 559 	 not grep "$dev4" err
| [ 0:01] ## Line: 560 	 not grep "$dev5" err
| [ 0:01] ## Line: 561 	 not grep "$dev6" err
| [ 0:01] ## Line: 562 	 not grep "$dev7" err
| [ 0:01] ## Line: 563 	 not grep "$dev8" err
| [ 0:01] ## Line: 564 	 grep "$dev9" err
| [ 0:01] ## Line: 565 	 grep "$dev11" err
| [ 0:01] ## Line: 566 	 not grep "$dev12" err
| [ 0:01] ## Line: 567 	 not grep "$dev13" err
| [ 0:01] ## Line: 568 	 not grep "$dev14" err
| [ 0:01] ## Line: 569 	 
| [ 0:01] ## Line: 570 	 # pv and all (all ignored)
| [ 0:01] ## Line: 571 	 pvs -a "$dev9" | tee err
| [ 0:01] ## Line: 572 	 not grep "$dev10" err
| [ 0:01] ## Line: 573 	 not grep "$dev2" err
| [ 0:01] ## Line: 574 	 not grep "$dev3" err
| [ 0:01] ## Line: 575 	 not grep "$dev4" err
| [ 0:01] ## Line: 576 	 not grep "$dev5" err
| [ 0:01] ## Line: 577 	 not grep "$dev6" err
| [ 0:01] ## Line: 578 	 not grep "$dev7" err
| [ 0:01] ## Line: 579 	 not grep "$dev8" err
| [ 0:01] ## Line: 580 	 grep "$dev9" err
| [ 0:01] ## Line: 581 	 not grep "$dev11" err
| [ 0:01] ## Line: 582 	 not grep "$dev12" err
| [ 0:01] ## Line: 583 	 not grep "$dev13" err
| [ 0:01] ## Line: 584 	 not grep "$dev14" err
| [ 0:01] ## Line: 585 	 
| [ 0:01] ## Line: 586 	 # orphan and all (all ignored)
| [ 0:01] ## Line: 587 	 pvs -a "$dev11" | tee err
| [ 0:01] ## Line: 588 	 not grep "$dev10" err
| [ 0:01] ## Line: 589 	 not grep "$dev2" err
| [ 0:01] ## Line: 590 	 not grep "$dev3" err
| [ 0:01] ## Line: 591 	 not grep "$dev4" err
| [ 0:01] ## Line: 592 	 not grep "$dev5" err
| [ 0:01] ## Line: 593 	 not grep "$dev6" err
| [ 0:01] ## Line: 594 	 not grep "$dev7" err
| [ 0:01] ## Line: 595 	 not grep "$dev8" err
| [ 0:01] ## Line: 596 	 not grep "$dev9" err
| [ 0:01] ## Line: 597 	 grep "$dev11" err
| [ 0:01] ## Line: 598 	 not grep "$dev12" err
| [ 0:01] ## Line: 599 	 not grep "$dev13" err
| [ 0:01] ## Line: 600 	 not grep "$dev14" err
| [ 0:01] ## Line: 601 	 
| [ 0:01] ## Line: 602 	 # one tag
| [ 0:01] ## Line: 603 	 pvs @V2D3 | tee err
| [ 0:01] ## Line: 604 	 not grep "$dev10" err
| [ 0:01] ## Line: 605 	 not grep "$dev2" err
| [ 0:01] ## Line: 606 	 grep "$dev3" err
| [ 0:01] ## Line: 607 	 not grep "$dev4" err
| [ 0:01] ## Line: 608 	 not grep "$dev5" err
| [ 0:01] ## Line: 609 	 not grep "$dev6" err
| [ 0:01] ## Line: 610 	 not grep "$dev7" err
| [ 0:01] ## Line: 611 	 not grep "$dev8" err
| [ 0:01] ## Line: 612 	 not grep "$dev9" err
| [ 0:01] ## Line: 613 	 not grep "$dev11" err
| [ 0:01] ## Line: 614 	 not grep "$dev12" err
| [ 0:01] ## Line: 615 	 not grep "$dev13" err
| [ 0:01] ## Line: 616 	 not grep "$dev14" err
| [ 0:01] ## Line: 617 	 
| [ 0:01] ## Line: 618 	 # two tags
| [ 0:01] ## Line: 619 	 pvs @V2D3 @V2D45 | tee err
| [ 0:01] ## Line: 620 	 not grep "$dev10" err
| [ 0:01] ## Line: 621 	 not grep "$dev2" err
| [ 0:01] ## Line: 622 	 grep "$dev3" err
| [ 0:01] ## Line: 623 	 grep "$dev4" err
| [ 0:01] ## Line: 624 	 grep "$dev5" err
| [ 0:01] ## Line: 625 	 not grep "$dev6" err
| [ 0:01] ## Line: 626 	 not grep "$dev7" err
| [ 0:01] ## Line: 627 	 not grep "$dev8" err
| [ 0:01] ## Line: 628 	 not grep "$dev9" err
| [ 0:01] ## Line: 629 	 not grep "$dev11" err
| [ 0:01] ## Line: 630 	 not grep "$dev12" err
| [ 0:01] ## Line: 631 	 not grep "$dev13" err
| [ 0:01] ## Line: 632 	 not grep "$dev14" err
| [ 0:01] ## Line: 633 	 
| [ 0:01] ## Line: 634 	 # tag and pv
| [ 0:01] ## Line: 635 	 pvs @V2D3 "$dev4" | tee err
| [ 0:01] ## Line: 636 	 not grep "$dev10" err
| [ 0:01] ## Line: 637 	 not grep "$dev2" err
| [ 0:01] ## Line: 638 	 grep "$dev3" err
| [ 0:01] ## Line: 639 	 grep "$dev4" err
| [ 0:01] ## Line: 640 	 not grep "$dev5" err
| [ 0:01] ## Line: 641 	 not grep "$dev6" err
| [ 0:01] ## Line: 642 	 not grep "$dev7" err
| [ 0:01] ## Line: 643 	 not grep "$dev8" err
| [ 0:01] ## Line: 644 	 not grep "$dev9" err
| [ 0:01] ## Line: 645 	 not grep "$dev11" err
| [ 0:01] ## Line: 646 	 not grep "$dev12" err
| [ 0:01] ## Line: 647 	 not grep "$dev13" err
| [ 0:01] ## Line: 648 	 not grep "$dev14" err
| [ 0:01] ## Line: 649 	 
| [ 0:01] ## Line: 650 	 # tag and orphan
| [ 0:01] ## Line: 651 	 pvs @V2D3 "$dev11" | tee err
| [ 0:01] ## Line: 652 	 not grep "$dev10" err
| [ 0:01] ## Line: 653 	 not grep "$dev2" err
| [ 0:01] ## Line: 654 	 grep "$dev3" err
| [ 0:01] ## Line: 655 	 not grep "$dev4" err
| [ 0:01] ## Line: 656 	 not grep "$dev5" err
| [ 0:01] ## Line: 657 	 not grep "$dev6" err
| [ 0:01] ## Line: 658 	 not grep "$dev7" err
| [ 0:01] ## Line: 659 	 not grep "$dev8" err
| [ 0:01] ## Line: 660 	 not grep "$dev9" err
| [ 0:01] ## Line: 661 	 grep "$dev11" err
| [ 0:01] ## Line: 662 	 not grep "$dev12" err
| [ 0:01] ## Line: 663 	 not grep "$dev13" err
| [ 0:01] ## Line: 664 	 not grep "$dev14" err
| [ 0:01] ## Line: 665 	 
| [ 0:01] ## Line: 666 	 # tag and dev
| [ 0:01] ## Line: 667 	 not pvs @V2D3 "$dev12" | tee err
| [ 0:01] ## Line: 668 	 not grep "$dev10" err
| [ 0:01] ## Line: 669 	 not grep "$dev2" err
| [ 0:01] ## Line: 670 	 grep "$dev3" err
| [ 0:01] ## Line: 671 	 not grep "$dev4" err
| [ 0:01] ## Line: 672 	 not grep "$dev5" err
| [ 0:01] ## Line: 673 	 not grep "$dev6" err
| [ 0:01] ## Line: 674 	 not grep "$dev7" err
| [ 0:01] ## Line: 675 	 not grep "$dev8" err
| [ 0:01] ## Line: 676 	 not grep "$dev9" err
| [ 0:01] ## Line: 677 	 not grep "$dev11" err
| [ 0:01] ## Line: 678 	 not grep "$dev12" err
| [ 0:01] ## Line: 679 	 not grep "$dev13" err
| [ 0:01] ## Line: 680 	 not grep "$dev14" err
| [ 0:01] ## Line: 681 	 
| [ 0:01] ## Line: 682 	 # tag and all (all ignored)
| [ 0:01] ## Line: 683 	 pvs @V2D3 -a | tee err
| [ 0:01] ## Line: 684 	 not grep "$dev10" err
| [ 0:01] ## Line: 685 	 not grep "$dev2" err
| [ 0:01] ## Line: 686 	 grep "$dev3" err
| [ 0:01] ## Line: 687 	 not grep "$dev4" err
| [ 0:01] ## Line: 688 	 not grep "$dev5" err
| [ 0:01] ## Line: 689 	 not grep "$dev6" err
| [ 0:01] ## Line: 690 	 not grep "$dev7" err
| [ 0:01] ## Line: 691 	 not grep "$dev8" err
| [ 0:01] ## Line: 692 	 not grep "$dev9" err
| [ 0:01] ## Line: 693 	 not grep "$dev11" err
| [ 0:01] ## Line: 694 	 not grep "$dev12" err
| [ 0:01] ## Line: 695 	 not grep "$dev13" err
| [ 0:01] ## Line: 696 	 not grep "$dev14" err
| [ 0:01] ## Line: 697 	 
| [ 0:01] ## Line: 698 	 # tag and pv redundant
| [ 0:01] ## Line: 699 	 pvs @V2D3 "$dev3" | tee err
| [ 0:01] ## Line: 700 	 not grep "$dev10" err
| [ 0:01] ## Line: 701 	 not grep "$dev2" err
| [ 0:01] ## Line: 702 	 grep "$dev3" err
| [ 0:01] ## Line: 703 	 not grep "$dev4" err
| [ 0:01] ## Line: 704 	 not grep "$dev5" err
| [ 0:01] ## Line: 705 	 not grep "$dev6" err
| [ 0:01] ## Line: 706 	 not grep "$dev7" err
| [ 0:01] ## Line: 707 	 not grep "$dev8" err
| [ 0:01] ## Line: 708 	 not grep "$dev9" err
| [ 0:01] ## Line: 709 	 not grep "$dev11" err
| [ 0:01] ## Line: 710 	 not grep "$dev12" err
| [ 0:01] ## Line: 711 	 not grep "$dev13" err
| [ 0:01] ## Line: 712 	 not grep "$dev14" err
| [ 0:01] ## Line: 713 	 
| [ 0:01] ## Line: 714 	 
| [ 0:01] ## Line: 715 	 #
| [ 0:01] ## Line: 716 	 # tests including pvs without mdas
| [ 0:01] ## Line: 717 	 #
| [ 0:01] ## Line: 718 	 
| [ 0:01] ## Line: 719 	 # remove old config
| [ 0:01] ## Line: 720 	 vgremove $vg1
| [ 0:01] ## Line: 721 	 vgremove $vg2
| [ 0:01] ## Line: 722 	 vgremove $vg3
| [ 0:01] ## Line: 723 	 pvremove "$dev11"
| [ 0:01] ## Line: 724 	 pvremove "$dev14"
| [ 0:01] ## Line: 725 	 
| [ 0:01] ## Line: 726 	 # new config with some pvs that have zero mdas
| [ 0:01] ## Line: 727 	 
| [ 0:01] ## Line: 728 	 # for vg1
| [ 0:01] ## Line: 729 	 pvcreate "$dev10"
| [ 0:01] ## Line: 730 	 
| [ 0:01] ## Line: 731 	 # for vg2
| [ 0:01] ## Line: 732 	 pvcreate "$dev2" --metadatacopies 0
| [ 0:01] ## Line: 733 	 pvcreate "$dev3"
| [ 0:01] ## Line: 734 	 pvcreate "$dev4"
| [ 0:01] ## Line: 735 	 pvcreate "$dev5"
| [ 0:01] ## Line: 736 	 
| [ 0:01] ## Line: 737 	 # for vg3
| [ 0:01] ## Line: 738 	 pvcreate "$dev6" --metadatacopies 0
| [ 0:01] ## Line: 739 	 pvcreate "$dev7" --metadatacopies 0
| [ 0:01] ## Line: 740 	 pvcreate "$dev8" --metadatacopies 0
| [ 0:01] ## Line: 741 	 pvcreate "$dev9"
| [ 0:01] ## Line: 742 	 
| [ 0:01] ## Line: 743 	 # orphan with mda
| [ 0:01] ## Line: 744 	 pvcreate "$dev11"
| [ 0:01] ## Line: 745 	 # orphan without mda
| [ 0:01] ## Line: 746 	 pvcreate "$dev14" --metadatacopies 0
| [ 0:01] ## Line: 747 	 
| [ 0:01] ## Line: 748 	 # non-pv devs
| [ 0:01] ## Line: 749 	 # dev12
| [ 0:01] ## Line: 750 	 # dev13
| [ 0:01] ## Line: 751 	 
| [ 0:01] ## Line: 752 	 vgcreate $SHARED $vg1 "$dev10"
| [ 0:01] ## Line: 753 	 vgcreate $SHARED $vg2 "$dev2" "$dev3" "$dev4" "$dev5"
| [ 0:01] ## Line: 754 	 vgcreate $SHARED $vg3 "$dev6" "$dev7" "$dev8" "$dev9"
| [ 0:01] ## Line: 755 	 
| [ 0:01] ## Line: 756 	 pvchange --addtag V2D3 "$dev3"
| [ 0:01] ## Line: 757 	 pvchange --addtag V2D4 "$dev4"
| [ 0:01] ## Line: 758 	 pvchange --addtag V2D45 "$dev4"
| [ 0:01] ## Line: 759 	 pvchange --addtag V2D5 "$dev5"
| [ 0:01] ## Line: 760 	 pvchange --addtag V2D45 "$dev5"
| [ 0:01] ## Line: 761 	 
| [ 0:01] ## Line: 762 	 pvchange --addtag V3 "$dev6" "$dev7" "$dev8" "$dev9"
| [ 0:01] ## Line: 763 	 pvchange --addtag V3D8 "$dev8"
| [ 0:01] ## Line: 764 	 pvchange --addtag V3D9 "$dev9"
| [ 0:01] ## Line: 765 	 
| [ 0:01] ## Line: 766 	 
| [ 0:01] ## Line: 767 	 #
| [ 0:01] ## Line: 768 	 # pvdisplay including pvs without mdas
| [ 0:01] ## Line: 769 	 #
| [ 0:01] ## Line: 770 	 
| [ 0:01] ## Line: 771 	 # pv with mda
| [ 0:01] ## Line: 772 	 pvdisplay -s "$dev10" | tee err
| [ 0:01] ## Line: 773 	 grep "$dev10" err
| [ 0:01] ## Line: 774 	 not grep "$dev2" err
| [ 0:01] ## Line: 775 	 not grep "$dev3" err
| [ 0:01] ## Line: 776 	 not grep "$dev4" err
| [ 0:01] ## Line: 777 	 not grep "$dev5" err
| [ 0:01] ## Line: 778 	 not grep "$dev6" err
| [ 0:01] ## Line: 779 	 not grep "$dev7" err
| [ 0:01] ## Line: 780 	 not grep "$dev8" err
| [ 0:01] ## Line: 781 	 not grep "$dev9" err
| [ 0:01] ## Line: 782 	 not grep "$dev11" err
| [ 0:01] ## Line: 783 	 not grep "$dev12" err
| [ 0:01] ## Line: 784 	 not grep "$dev13" err
| [ 0:01] ## Line: 785 	 not grep "$dev14" err
| [ 0:01] ## Line: 786 	 
| [ 0:01] ## Line: 787 	 # pv without mda
| [ 0:01] ## Line: 788 	 pvdisplay -s "$dev2" | tee err
| [ 0:01] ## Line: 789 	 not grep "$dev10" err
| [ 0:01] ## Line: 790 	 grep "$dev2" err
| [ 0:01] ## Line: 791 	 not grep "$dev3" err
| [ 0:01] ## Line: 792 	 not grep "$dev4" err
| [ 0:01] ## Line: 793 	 not grep "$dev5" err
| [ 0:01] ## Line: 794 	 not grep "$dev6" err
| [ 0:01] ## Line: 795 	 not grep "$dev7" err
| [ 0:01] ## Line: 796 	 not grep "$dev8" err
| [ 0:01] ## Line: 797 	 not grep "$dev9" err
| [ 0:01] ## Line: 798 	 not grep "$dev11" err
| [ 0:01] ## Line: 799 	 not grep "$dev12" err
| [ 0:01] ## Line: 800 	 not grep "$dev13" err
| [ 0:01] ## Line: 801 	 not grep "$dev14" err
| [ 0:01] ## Line: 802 	 
| [ 0:01] ## Line: 803 	 # orphan with mda
| [ 0:01] ## Line: 804 	 pvdisplay -s "$dev11" | tee err
| [ 0:01] ## Line: 805 	 not grep "$dev10" err
| [ 0:01] ## Line: 806 	 not grep "$dev2" err
| [ 0:01] ## Line: 807 	 not grep "$dev3" err
| [ 0:01] ## Line: 808 	 not grep "$dev4" err
| [ 0:01] ## Line: 809 	 not grep "$dev5" err
| [ 0:01] ## Line: 810 	 not grep "$dev6" err
| [ 0:01] ## Line: 811 	 not grep "$dev7" err
| [ 0:01] ## Line: 812 	 not grep "$dev8" err
| [ 0:01] ## Line: 813 	 not grep "$dev9" err
| [ 0:01] ## Line: 814 	 grep "$dev11" err
| [ 0:01] ## Line: 815 	 not grep "$dev12" err
| [ 0:01] ## Line: 816 	 not grep "$dev13" err
| [ 0:01] ## Line: 817 	 not grep "$dev14" err
| [ 0:01] ## Line: 818 	 
| [ 0:01] ## Line: 819 	 # orphan without mda
| [ 0:01] ## Line: 820 	 pvdisplay -s "$dev14" | tee err
| [ 0:01] ## Line: 821 	 not grep "$dev10" err
| [ 0:01] ## Line: 822 	 not grep "$dev2" err
| [ 0:01] ## Line: 823 	 not grep "$dev3" err
| [ 0:01] ## Line: 824 	 not grep "$dev4" err
| [ 0:01] ## Line: 825 	 not grep "$dev5" err
| [ 0:01] ## Line: 826 	 not grep "$dev6" err
| [ 0:01] ## Line: 827 	 not grep "$dev7" err
| [ 0:01] ## Line: 828 	 not grep "$dev8" err
| [ 0:01] ## Line: 829 	 not grep "$dev9" err
| [ 0:01] ## Line: 830 	 not grep "$dev11" err
| [ 0:01] ## Line: 831 	 not grep "$dev12" err
| [ 0:01] ## Line: 832 	 not grep "$dev13" err
| [ 0:01] ## Line: 833 	 grep "$dev14" err
| [ 0:01] ## Line: 834 	 
| [ 0:01] ## Line: 835 	 # pv with mda, pv without mda, orphan with mda, orphan without mda
| [ 0:01] ## Line: 836 	 pvdisplay -s "$dev10" "$dev2" "$dev11" "$dev14" | tee err
| [ 0:01] ## Line: 837 	 grep "$dev10" err
| [ 0:01] ## Line: 838 	 grep "$dev2" err
| [ 0:01] ## Line: 839 	 not grep "$dev3" err
| [ 0:01] ## Line: 840 	 not grep "$dev4" err
| [ 0:01] ## Line: 841 	 not grep "$dev5" err
| [ 0:01] ## Line: 842 	 not grep "$dev6" err
| [ 0:01] ## Line: 843 	 not grep "$dev7" err
| [ 0:01] ## Line: 844 	 not grep "$dev8" err
| [ 0:01] ## Line: 845 	 not grep "$dev9" err
| [ 0:01] ## Line: 846 	 grep "$dev11" err
| [ 0:01] ## Line: 847 	 not grep "$dev12" err
| [ 0:01] ## Line: 848 	 not grep "$dev13" err
| [ 0:01] ## Line: 849 	 grep "$dev14" err
| [ 0:01] ## Line: 850 	 
| [ 0:01] ## Line: 851 	 # tag refering to pv with mda and pv without mda
| [ 0:01] ## Line: 852 	 pvdisplay -s @V3 | tee err
| [ 0:01] ## Line: 853 	 not grep "$dev10" err
| [ 0:01] ## Line: 854 	 not grep "$dev2" err
| [ 0:01] ## Line: 855 	 not grep "$dev3" err
| [ 0:01] ## Line: 856 	 not grep "$dev4" err
| [ 0:01] ## Line: 857 	 not grep "$dev5" err
| [ 0:01] ## Line: 858 	 grep "$dev6" err
| [ 0:01] ## Line: 859 	 grep "$dev7" err
| [ 0:01] ## Line: 860 	 grep "$dev8" err
| [ 0:01] ## Line: 861 	 grep "$dev9" err
| [ 0:01] ## Line: 862 	 not grep "$dev11" err
| [ 0:01] ## Line: 863 	 not grep "$dev12" err
| [ 0:01] ## Line: 864 	 not grep "$dev13" err
| [ 0:01] ## Line: 865 	 not grep "$dev14" err
| [ 0:01] ## Line: 866 	 
| [ 0:01] ## Line: 867 	 # tag refering to one pv without mda
| [ 0:01] ## Line: 868 	 pvdisplay -s @V3D8 | tee err
| [ 0:01] ## Line: 869 	 not grep "$dev10" err
| [ 0:01] ## Line: 870 	 not grep "$dev2" err
| [ 0:01] ## Line: 871 	 not grep "$dev3" err
| [ 0:01] ## Line: 872 	 not grep "$dev4" err
| [ 0:01] ## Line: 873 	 not grep "$dev5" err
| [ 0:01] ## Line: 874 	 not grep "$dev6" err
| [ 0:01] ## Line: 875 	 not grep "$dev7" err
| [ 0:01] ## Line: 876 	 grep "$dev8" err
| [ 0:01] ## Line: 877 	 not grep "$dev9" err
| [ 0:01] ## Line: 878 	 not grep "$dev11" err
| [ 0:01] ## Line: 879 	 not grep "$dev12" err
| [ 0:01] ## Line: 880 	 not grep "$dev13" err
| [ 0:01] ## Line: 881 	 not grep "$dev14" err
| [ 0:01] ## Line: 882 	 
| [ 0:01] ## Line: 883 	 # all pvs (pvs in vgs and orphan pvs)
| [ 0:01] ## Line: 884 	 pvdisplay -s | tee err
| [ 0:01] ## Line: 885 	 grep "$dev10" err
| [ 0:01] ## Line: 886 	 grep "$dev2" err
| [ 0:01] ## Line: 887 	 grep "$dev3" err
| [ 0:01] ## Line: 888 	 grep "$dev4" err
| [ 0:01] ## Line: 889 	 grep "$dev5" err
| [ 0:01] ## Line: 890 	 grep "$dev6" err
| [ 0:01] ## Line: 891 	 grep "$dev7" err
| [ 0:01] ## Line: 892 	 grep "$dev8" err
| [ 0:01] ## Line: 893 	 grep "$dev9" err
| [ 0:01] ## Line: 894 	 grep "$dev11" err
| [ 0:01] ## Line: 895 	 not grep "$dev12" err
| [ 0:01] ## Line: 896 	 not grep "$dev13" err
| [ 0:01] ## Line: 897 	 grep "$dev14" err
| [ 0:01] ## Line: 898 	 
| [ 0:01] ## Line: 899 	 # all devs (pvs in vgs, orphan pvs, and devs)
| [ 0:01] ## Line: 900 	 pvdisplay -a -C | tee err
| [ 0:01] ## Line: 901 	 grep "$dev10" err
| [ 0:01] ## Line: 902 	 grep "$dev2" err
| [ 0:01] ## Line: 903 	 grep "$dev3" err
| [ 0:01] ## Line: 904 	 grep "$dev4" err
| [ 0:01] ## Line: 905 	 grep "$dev5" err
| [ 0:01] ## Line: 906 	 grep "$dev6" err
| [ 0:01] ## Line: 907 	 grep "$dev7" err
| [ 0:01] ## Line: 908 	 grep "$dev8" err
| [ 0:01] ## Line: 909 	 grep "$dev9" err
| [ 0:01] ## Line: 910 	 grep "$dev11" err
| [ 0:01] ## Line: 911 	 grep "$dev12" err
| [ 0:01] ## Line: 912 	 grep "$dev13" err
| [ 0:01] ## Line: 913 	 grep "$dev14" err
| [ 0:01] ## Line: 914 	 
| [ 0:01] ## Line: 915 	 #
| [ 0:01] ## Line: 916 	 # pvs including pvs without mdas
| [ 0:01] ## Line: 917 	 #
| [ 0:01] ## Line: 918 	 
| [ 0:01] ## Line: 919 	 # pv with mda
| [ 0:01] ## Line: 920 	 pvs "$dev10" | tee err
| [ 0:01] ## Line: 921 	 grep "$dev10" err
| [ 0:01] ## Line: 922 	 not grep "$dev2" err
| [ 0:01] ## Line: 923 	 not grep "$dev3" err
| [ 0:01] ## Line: 924 	 not grep "$dev4" err
| [ 0:01] ## Line: 925 	 not grep "$dev5" err
| [ 0:01] ## Line: 926 	 not grep "$dev6" err
| [ 0:01] ## Line: 927 	 not grep "$dev7" err
| [ 0:01] ## Line: 928 	 not grep "$dev8" err
| [ 0:01] ## Line: 929 	 not grep "$dev9" err
| [ 0:01] ## Line: 930 	 not grep "$dev11" err
| [ 0:01] ## Line: 931 	 not grep "$dev12" err
| [ 0:01] ## Line: 932 	 not grep "$dev13" err
| [ 0:01] ## Line: 933 	 not grep "$dev14" err
| [ 0:01] ## Line: 934 	 
| [ 0:01] ## Line: 935 	 # pv without mda
| [ 0:01] ## Line: 936 	 pvs "$dev2" | tee err
| [ 0:01] ## Line: 937 	 not grep "$dev10" err
| [ 0:01] ## Line: 938 	 grep "$dev2" err
| [ 0:01] ## Line: 939 	 not grep "$dev3" err
| [ 0:01] ## Line: 940 	 not grep "$dev4" err
| [ 0:01] ## Line: 941 	 not grep "$dev5" err
| [ 0:01] ## Line: 942 	 not grep "$dev6" err
| [ 0:01] ## Line: 943 	 not grep "$dev7" err
| [ 0:01] ## Line: 944 	 not grep "$dev8" err
| [ 0:01] ## Line: 945 	 not grep "$dev9" err
| [ 0:01] ## Line: 946 	 not grep "$dev11" err
| [ 0:01] ## Line: 947 	 not grep "$dev12" err
| [ 0:01] ## Line: 948 	 not grep "$dev13" err
| [ 0:01] ## Line: 949 	 not grep "$dev14" err
| [ 0:01] ## Line: 950 	 
| [ 0:01] ## Line: 951 	 # orphan with mda
| [ 0:01] ## Line: 952 	 pvs "$dev11" | tee err
| [ 0:01] ## Line: 953 	 not grep "$dev10" err
| [ 0:01] ## Line: 954 	 not grep "$dev2" err
| [ 0:01] ## Line: 955 	 not grep "$dev3" err
| [ 0:01] ## Line: 956 	 not grep "$dev4" err
| [ 0:01] ## Line: 957 	 not grep "$dev5" err
| [ 0:01] ## Line: 958 	 not grep "$dev6" err
| [ 0:01] ## Line: 959 	 not grep "$dev7" err
| [ 0:01] ## Line: 960 	 not grep "$dev8" err
| [ 0:01] ## Line: 961 	 not grep "$dev9" err
| [ 0:01] ## Line: 962 	 grep "$dev11" err
| [ 0:01] ## Line: 963 	 not grep "$dev12" err
| [ 0:01] ## Line: 964 	 not grep "$dev13" err
| [ 0:01] ## Line: 965 	 not grep "$dev14" err
| [ 0:01] ## Line: 966 	 
| [ 0:01] ## Line: 967 	 # orphan without mda
| [ 0:01] ## Line: 968 	 pvs "$dev14" | tee err
| [ 0:01] ## Line: 969 	 not grep "$dev10" err
| [ 0:01] ## Line: 970 	 not grep "$dev2" err
| [ 0:01] ## Line: 971 	 not grep "$dev3" err
| [ 0:01] ## Line: 972 	 not grep "$dev4" err
| [ 0:01] ## Line: 973 	 not grep "$dev5" err
| [ 0:01] ## Line: 974 	 not grep "$dev6" err
| [ 0:01] ## Line: 975 	 not grep "$dev7" err
| [ 0:01] ## Line: 976 	 not grep "$dev8" err
| [ 0:01] ## Line: 977 	 not grep "$dev9" err
| [ 0:01] ## Line: 978 	 not grep "$dev11" err
| [ 0:01] ## Line: 979 	 not grep "$dev12" err
| [ 0:01] ## Line: 980 	 not grep "$dev13" err
| [ 0:01] ## Line: 981 	 grep "$dev14" err
| [ 0:01] ## Line: 982 	 
| [ 0:01] ## Line: 983 	 # pv with mda, pv without mda, orphan with mda, orphan without mda
| [ 0:01] ## Line: 984 	 pvs "$dev10" "$dev2" "$dev11" "$dev14" | tee err
| [ 0:01] ## Line: 985 	 grep "$dev10" err
| [ 0:01] ## Line: 986 	 grep "$dev2" err
| [ 0:01] ## Line: 987 	 not grep "$dev3" err
| [ 0:01] ## Line: 988 	 not grep "$dev4" err
| [ 0:01] ## Line: 989 	 not grep "$dev5" err
| [ 0:01] ## Line: 990 	 not grep "$dev6" err
| [ 0:01] ## Line: 991 	 not grep "$dev7" err
| [ 0:01] ## Line: 992 	 not grep "$dev8" err
| [ 0:01] ## Line: 993 	 not grep "$dev9" err
| [ 0:01] ## Line: 994 	 grep "$dev11" err
| [ 0:01] ## Line: 995 	 not grep "$dev12" err
| [ 0:01] ## Line: 996 	 not grep "$dev13" err
| [ 0:01] ## Line: 997 	 grep "$dev14" err
| [ 0:01] ## Line: 998 	 
| [ 0:01] ## Line: 999 	 # tag refering to pv with mda and pv without mda
| [ 0:01] ## Line: 1000 	 pvs @V3 | tee err
| [ 0:01] ## Line: 1001 	 not grep "$dev10" err
| [ 0:01] ## Line: 1002 	 not grep "$dev2" err
| [ 0:01] ## Line: 1003 	 not grep "$dev3" err
| [ 0:01] ## Line: 1004 	 not grep "$dev4" err
| [ 0:01] ## Line: 1005 	 not grep "$dev5" err
| [ 0:01] ## Line: 1006 	 grep "$dev6" err
| [ 0:01] ## Line: 1007 	 grep "$dev7" err
| [ 0:01] ## Line: 1008 	 grep "$dev8" err
| [ 0:01] ## Line: 1009 	 grep "$dev9" err
| [ 0:01] ## Line: 1010 	 not grep "$dev11" err
| [ 0:01] ## Line: 1011 	 not grep "$dev12" err
| [ 0:01] ## Line: 1012 	 not grep "$dev13" err
| [ 0:01] ## Line: 1013 	 not grep "$dev14" err
| [ 0:01] ## Line: 1014 	 
| [ 0:01] ## Line: 1015 	 # tag refering to one pv without mda
| [ 0:01] ## Line: 1016 	 pvs @V3D8 | tee err
| [ 0:01] ## Line: 1017 	 not grep "$dev10" err
| [ 0:01] ## Line: 1018 	 not grep "$dev2" err
| [ 0:01] ## Line: 1019 	 not grep "$dev3" err
| [ 0:01] ## Line: 1020 	 not grep "$dev4" err
| [ 0:01] ## Line: 1021 	 not grep "$dev5" err
| [ 0:01] ## Line: 1022 	 not grep "$dev6" err
| [ 0:01] ## Line: 1023 	 not grep "$dev7" err
| [ 0:01] ## Line: 1024 	 grep "$dev8" err
| [ 0:01] ## Line: 1025 	 not grep "$dev9" err
| [ 0:01] ## Line: 1026 	 not grep "$dev11" err
| [ 0:01] ## Line: 1027 	 not grep "$dev12" err
| [ 0:01] ## Line: 1028 	 not grep "$dev13" err
| [ 0:01] ## Line: 1029 	 not grep "$dev14" err
| [ 0:01] ## Line: 1030 	 
| [ 0:01] ## Line: 1031 	 # all pvs (pvs in vgs and orphan pvs)
| [ 0:01] ## Line: 1032 	 pvs | tee err
| [ 0:01] ## Line: 1033 	 grep "$dev10" err
| [ 0:01] ## Line: 1034 	 grep "$dev2" err
| [ 0:01] ## Line: 1035 	 grep "$dev3" err
| [ 0:01] ## Line: 1036 	 grep "$dev4" err
| [ 0:01] ## Line: 1037 	 grep "$dev5" err
| [ 0:01] ## Line: 1038 	 grep "$dev6" err
| [ 0:01] ## Line: 1039 	 grep "$dev7" err
| [ 0:01] ## Line: 1040 	 grep "$dev8" err
| [ 0:01] ## Line: 1041 	 grep "$dev9" err
| [ 0:01] ## Line: 1042 	 grep "$dev11" err
| [ 0:01] ## Line: 1043 	 not grep "$dev12" err
| [ 0:01] ## Line: 1044 	 not grep "$dev13" err
| [ 0:01] ## Line: 1045 	 grep "$dev14" err
| [ 0:01] ## Line: 1046 	 
| [ 0:01] ## Line: 1047 	 # all devs (pvs in vgs, orphan pvs, and devs)
| [ 0:01] ## Line: 1048 	 pvs -a | tee err
| [ 0:01] ## Line: 1049 	 grep "$dev10" err
| [ 0:01] ## Line: 1050 	 grep "$dev2" err
| [ 0:01] ## Line: 1051 	 grep "$dev3" err
| [ 0:01] ## Line: 1052 	 grep "$dev4" err
| [ 0:01] ## Line: 1053 	 grep "$dev5" err
| [ 0:01] ## Line: 1054 	 grep "$dev6" err
| [ 0:01] ## Line: 1055 	 grep "$dev7" err
| [ 0:01] ## Line: 1056 	 grep "$dev8" err
| [ 0:01] ## Line: 1057 	 grep "$dev9" err
| [ 0:01] ## Line: 1058 	 grep "$dev11" err
| [ 0:01] ## Line: 1059 	 grep "$dev12" err
| [ 0:01] ## Line: 1060 	 grep "$dev13" err
| [ 0:01] ## Line: 1061 	 grep "$dev14" err
| [ 0:01] ## Line: 1062 	 
| [ 0:01] ## Line: 1063 	 vgremove $vg1 $vg2 $vg3
| [ 0:01] aux teardown
| [ 0:01] #process-each-pv.sh:1+ aux teardown
| [ 0:01] ## teardown.........ok
###       failed: [ndev-vanilla] shell/process-each-pv.sh

| [ 0:00] Library version:   1.02.146 (2017-12-18)
| [ 0:00] Driver version:    4.35.0
| [ 0:00] Kernel is Linux localhost.localdomain 3.10.0-693.11.1.el7.x86_64 #1 SMP Mon Dec 4 23:52:40 UTC 2017 x86_64 GNU/Linux
| [ 0:00] Selinux mode is not installed.
| [ 0:00]               total        used        free      shared  buff/cache   available
| [ 0:00] Mem:           7822        1080        4144          10        2597        6435
| [ 0:00] Swap:          4095           0        4095
| [ 0:00] Filesystem      Size  Used Avail Use% Mounted on
| [ 0:00] /dev/sdc1        18G  8.4G  8.4G  50% /
| [ 0:00] /dev/sdd1        51G  6.1G   43G  13% /lfskernel
| [ 0:00] devtmpfs        3.9G     0  3.9G   0% /dev
| [ 0:00] tmpfs           3.9G     0  3.9G   0% /run
| [ 0:00] @TESTDIR=/tmp/LVMTEST14005.vurLUw2y2N
| [ 0:00] @PREFIX=LVMTEST14005
| [ 0:00] ## LVMCONF: activation {
| [ 0:00] ## LVMCONF:     checks = 1
| [ 0:00] ## LVMCONF:     monitoring = 0
| [ 0:00] ## LVMCONF:     polling_interval = 1
| [ 0:00] ## LVMCONF:     raid_region_size = 512
| [ 0:00] ## LVMCONF:     retry_deactivation = 1
| [ 0:00] ## LVMCONF:     snapshot_autoextend_percent = 50
| [ 0:00] ## LVMCONF:     snapshot_autoextend_threshold = 50
| [ 0:00] ## LVMCONF:     udev_rules = 1
| [ 0:00] ## LVMCONF:     udev_sync = 1
| [ 0:00] ## LVMCONF:     verify_udev_operations = 1
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: allocation {
| [ 0:00] ## LVMCONF:     wipe_signatures_when_zeroing_new_lvs = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: backup {
| [ 0:00] ## LVMCONF:     archive = 0
| [ 0:00] ## LVMCONF:     backup = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: devices {
| [ 0:00] ## LVMCONF:     cache_dir = "@TESTDIR@/etc"
| [ 0:00] ## LVMCONF:     default_data_alignment = 1
| [ 0:00] ## LVMCONF:     dir = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     filter = "a|.*|"
| [ 0:00] ## LVMCONF:     global_filter = [ "a|@TESTDIR@/dev/mapper/@PREFIX@.*pv[0-9_]*$|", "r|.*|" ]
| [ 0:00] ## LVMCONF:     md_component_detection  = 0
| [ 0:00] ## LVMCONF:     scan = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     sysfs_scan = 1
| [ 0:00] ## LVMCONF:     write_cache_state = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: dmeventd {
| [ 0:00] ## LVMCONF:     executable = "/sources/boot/LVM2.2.02.177/test/lib/dmeventd"
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: global {
| [ 0:00] ## LVMCONF:     abort_on_internal_errors = 1
| [ 0:00] ## LVMCONF:     cache_check_executable = "/usr/sbin/cache_check"
| [ 0:00] ## LVMCONF:     cache_dump_executable = "/usr/sbin/cache_dump"
| [ 0:00] ## LVMCONF:     cache_repair_executable = "/usr/sbin/cache_repair"
| [ 0:00] ## LVMCONF:     detect_internal_vg_cache_corruption = 1
| [ 0:00] ## LVMCONF:     fallback_to_local_locking = 0
| [ 0:00] ## LVMCONF:     fsadm_executable = "/sources/boot/LVM2.2.02.177/test/lib/fsadm"
| [ 0:00] ## LVMCONF:     library_dir = "@TESTDIR@/lib"
| [ 0:00] ## LVMCONF:     locking_dir = "@TESTDIR@/var/lock/lvm"
| [ 0:00] ## LVMCONF:     locking_type=1
| [ 0:00] ## LVMCONF:     notify_dbus = 0
| [ 0:00] ## LVMCONF:     si_unit_consistency = 1
| [ 0:00] ## LVMCONF:     thin_check_executable = "/usr/sbin/thin_check"
| [ 0:00] ## LVMCONF:     thin_dump_executable = "/usr/sbin/thin_dump"
| [ 0:00] ## LVMCONF:     thin_repair_executable = "/usr/sbin/thin_repair"
| [ 0:00] ## LVMCONF:     use_lvmetad = 0
| [ 0:00] ## LVMCONF:     use_lvmlockd = 0
| [ 0:00] ## LVMCONF:     use_lvmpolld = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: log {
| [ 0:00] ## LVMCONF:     activation = 1
| [ 0:00] ## LVMCONF:     file = "@TESTDIR@/debug.log"
| [ 0:00] ## LVMCONF:     indent = 1
| [ 0:00] ## LVMCONF:     level = 9
| [ 0:00] ## LVMCONF:     overwrite = 1
| [ 0:00] ## LVMCONF:     syslog = 0
| [ 0:00] ## LVMCONF:     verbose = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] <======== Processing test: "process-each-pvresize.sh" ========>
| [ 0:00] 
| [ 0:00] aux prepare_devs 14
| [ 0:00] #process-each-pvresize.sh:19+ aux prepare_devs 14
| [ 0:00] ## preparing loop device....ok (/dev/loop0)
| [ 0:00] ## preparing 14 devices...lib/utils: line 212: DM_UDEV_COOKIE: unbound variable
| [ 0:00] set +vx; STACKTRACE; set -vx
| [ 0:00] ##process-each-pvresize.sh:19+ set +vx
| [ 0:00] ## - /lfskernel/sources/boot/LVM2.2.02.177/test/shell/process-each-pvresize.sh:19
| [ 0:00] ## 1 STACKTRACE() called from /lfskernel/sources/boot/LVM2.2.02.177/test/shell/process-each-pvresize.sh:19
| [ 0:00] <======== Info ========>
| [ 0:00] ## DMINFO:   Name             Maj Min Stat Open Targ Event  UUID                                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv8  253  11 L--w    0    1      0 TEST-@PREFIX@pv8                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv13 253   3 L--w    0    1      0 TEST-@PREFIX@pv13                                               
| [ 0:00] ## DMINFO:   @PREFIX@pv7  253  10 L--w    0    1      0 TEST-@PREFIX@pv7                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv12 253  13 L--w    0    1      0 TEST-@PREFIX@pv12                                               
| [ 0:00] ## DMINFO:   @PREFIX@pv6  253   7 L--w    0    1      0 TEST-@PREFIX@pv6                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv11 253  16 L--w    0    1      0 TEST-@PREFIX@pv11                                               
| [ 0:00] ## DMINFO:   @PREFIX@pv5  253   6 L--w    0    1      0 TEST-@PREFIX@pv5                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv10 253   5 L--w    0    1      0 TEST-@PREFIX@pv10                                               
| [ 0:00] ## DMINFO:   @PREFIX@pv4  253  15 L--w    0    1      0 TEST-@PREFIX@pv4                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv3  253   9 L--w    0    1      0 TEST-@PREFIX@pv3                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv2  253   8 L--w    0    1      0 TEST-@PREFIX@pv2                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv1  253  14 L--w    0    1      0 TEST-@PREFIX@pv1                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv9  253  12 L--w    0    1      0 TEST-@PREFIX@pv9                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv14 253   4 L--w    0    1      0 TEST-@PREFIX@pv14                                               
| [ 0:00] <======== Active table ========>
| [ 0:00] ## DMTABLE:  @PREFIX@pv8: 0 69632 linear 7:0 489472
| [ 0:00] ## DMTABLE:  @PREFIX@pv13: 0 69632 linear 7:0 837632
| [ 0:00] ## DMTABLE:  @PREFIX@pv7: 0 69632 linear 7:0 419840
| [ 0:00] ## DMTABLE:  @PREFIX@pv12: 0 69632 linear 7:0 768000
| [ 0:00] ## DMTABLE:  @PREFIX@pv6: 0 69632 linear 7:0 350208
| [ 0:00] ## DMTABLE:  @PREFIX@pv11: 0 69632 linear 7:0 698368
| [ 0:00] ## DMTABLE:  @PREFIX@pv5: 0 69632 linear 7:0 280576
| [ 0:00] ## DMTABLE:  @PREFIX@pv10: 0 69632 linear 7:0 628736
| [ 0:00] ## DMTABLE:  @PREFIX@pv4: 0 69632 linear 7:0 210944
| [ 0:00] ## DMTABLE:  @PREFIX@pv3: 0 69632 linear 7:0 141312
| [ 0:00] ## DMTABLE:  @PREFIX@pv2: 0 69632 linear 7:0 71680
| [ 0:00] ## DMTABLE:  @PREFIX@pv1: 0 69632 linear 7:0 2048
| [ 0:00] ## DMTABLE:  @PREFIX@pv9: 0 69632 linear 7:0 559104
| [ 0:00] ## DMTABLE:  @PREFIX@pv14: 0 69632 linear 7:0 907264
| [ 0:00] <======== Inactive table ========>
| [ 0:00] ## DMITABLE: @PREFIX@pv8: 
| [ 0:00] ## DMITABLE: @PREFIX@pv13: 
| [ 0:00] ## DMITABLE: @PREFIX@pv7: 
| [ 0:00] ## DMITABLE: @PREFIX@pv12: 
| [ 0:00] ## DMITABLE: @PREFIX@pv6: 
| [ 0:00] ## DMITABLE: @PREFIX@pv11: 
| [ 0:00] ## DMITABLE: @PREFIX@pv5: 
| [ 0:00] ## DMITABLE: @PREFIX@pv10: 
| [ 0:00] ## DMITABLE: @PREFIX@pv4: 
| [ 0:00] ## DMITABLE: @PREFIX@pv3: 
| [ 0:00] ## DMITABLE: @PREFIX@pv2: 
| [ 0:00] ## DMITABLE: @PREFIX@pv1: 
| [ 0:00] ## DMITABLE: @PREFIX@pv9: 
| [ 0:00] ## DMITABLE: @PREFIX@pv14: 
| [ 0:00] <======== Status ========>
| [ 0:00] ## DMSTATUS: @PREFIX@pv8: 0 69632 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv13: 0 69632 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv7: 0 69632 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv12: 0 69632 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv6: 0 69632 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv11: 0 69632 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv5: 0 69632 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv10: 0 69632 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv4: 0 69632 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv3: 0 69632 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv2: 0 69632 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv1: 0 69632 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv9: 0 69632 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv14: 0 69632 linear 
| [ 0:00] <======== Tree ========>
| [ 0:00] ## DMTREE:   @PREFIX@pv8 (253:11)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   @PREFIX@pv13 (253:3)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   @PREFIX@pv7 (253:10)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   @PREFIX@pv12 (253:13)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   @PREFIX@pv6 (253:7)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   @PREFIX@pv11 (253:16)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   @PREFIX@pv5 (253:6)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   @PREFIX@pv10 (253:5)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   @PREFIX@pv4 (253:15)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   @PREFIX@pv3 (253:9)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   @PREFIX@pv2 (253:8)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   @PREFIX@pv1 (253:14)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   LFS_vg-lfs (253:2)
| [ 0:00] ## DMTREE:    `- (8:16)
| [ 0:00] ## DMTREE:   centos-swap (253:1)
| [ 0:00] ## DMTREE:    `- (8:2)
| [ 0:00] ## DMTREE:   centos-root (253:0)
| [ 0:00] ## DMTREE:    `- (8:2)
| [ 0:00] ## DMTREE:   @PREFIX@pv9 (253:12)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   @PREFIX@pv14 (253:4)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] <======== Recursive list of @TESTDIR@/dev ========>
| [ 0:00] ## LSLR:	@TESTDIR@/dev:
| [ 0:00] ## LSLR:	total 4
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 0 Feb 21 02:27 loop0
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 1 Feb 21 02:27 loop1
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 2 Feb 21 02:27 loop2
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 3 Feb 21 02:27 loop3
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 4 Feb 21 02:27 loop4
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 5 Feb 21 02:27 loop5
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 6 Feb 21 02:27 loop6
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 7 Feb 21 02:27 loop7
| [ 0:00] ## LSLR:	drwxr-xr-x 2 root root 4096 Feb 21 02:27 mapper
| [ 0:00] ## LSLR:	crw-r--r-- 1 root root 1, 3 Feb 21 02:27 testnull
| [ 0:00] ## LSLR:	
| [ 0:00] ## LSLR:	@TESTDIR@/dev/mapper:
| [ 0:00] ## LSLR:	total 0
| [ 0:00] ## LSLR:	brw------- 1 root root 253,  14 Feb 21 02:27 @PREFIX@pv1
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   5 Feb 21 02:27 @PREFIX@pv10
| [ 0:00] ## LSLR:	brw------- 1 root root 253,  16 Feb 21 02:27 @PREFIX@pv11
| [ 0:00] ## LSLR:	brw------- 1 root root 253,  13 Feb 21 02:27 @PREFIX@pv12
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   3 Feb 21 02:27 @PREFIX@pv13
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   4 Feb 21 02:27 @PREFIX@pv14
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   8 Feb 21 02:27 @PREFIX@pv2
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   9 Feb 21 02:27 @PREFIX@pv3
| [ 0:00] ## LSLR:	brw------- 1 root root 253,  15 Feb 21 02:27 @PREFIX@pv4
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   6 Feb 21 02:27 @PREFIX@pv5
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   7 Feb 21 02:27 @PREFIX@pv6
| [ 0:00] ## LSLR:	brw------- 1 root root 253,  10 Feb 21 02:27 @PREFIX@pv7
| [ 0:00] ## LSLR:	brw------- 1 root root 253,  11 Feb 21 02:27 @PREFIX@pv8
| [ 0:00] ## LSLR:	brw------- 1 root root 253,  12 Feb 21 02:27 @PREFIX@pv9
| [ 0:00] ## LSLR:	crw------- 1 root root  10, 236 Feb 21 02:27 control
| [ 0:00] <======== Udev DB content ========>
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-0
| [ 0:00] ## UDEV:	N: dm-0
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-0
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-0
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=0
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-1
| [ 0:00] ## UDEV:	N: dm-1
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-1
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-1
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=1
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-10
| [ 0:00] ## UDEV:	N: dm-10
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-10
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-10
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=10
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-11
| [ 0:00] ## UDEV:	N: dm-11
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-11
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-11
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=11
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-12
| [ 0:00] ## UDEV:	N: dm-12
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-12
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-12
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=12
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-13
| [ 0:00] ## UDEV:	N: dm-13
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-13
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-13
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=13
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-14
| [ 0:00] ## UDEV:	N: dm-14
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-14
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-14
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=14
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-15
| [ 0:00] ## UDEV:	N: dm-15
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-15
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-15
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=15
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-16
| [ 0:00] ## UDEV:	N: dm-16
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-16
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-16
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=16
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-2
| [ 0:00] ## UDEV:	N: dm-2
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-2
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-2
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=2
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-3
| [ 0:00] ## UDEV:	N: dm-3
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-3
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-3
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=3
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-4
| [ 0:00] ## UDEV:	N: dm-4
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-4
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-4
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=4
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-5
| [ 0:00] ## UDEV:	N: dm-5
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-5
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-5
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=5
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-6
| [ 0:00] ## UDEV:	N: dm-6
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-6
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-6
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=6
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-7
| [ 0:00] ## UDEV:	N: dm-7
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-7
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-7
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=7
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-8
| [ 0:00] ## UDEV:	N: dm-8
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-8
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-8
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=8
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-9
| [ 0:00] ## UDEV:	N: dm-9
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-9
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-9
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=9
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/loop0
| [ 0:00] ## UDEV:	N: loop0
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/loop0
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/loop0
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=7
| [ 0:00] ## UDEV:	E: MINOR=0
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] <======== Script file "process-each-pvresize.sh" ========>
| [ 0:00] ## Line: 1 	 #!/usr/bin/env bash
| [ 0:00] ## Line: 2 	 
| [ 0:00] ## Line: 3 	 # Copyright (C) 2008-2014 Red Hat, Inc. All rights reserved.
| [ 0:00] ## Line: 4 	 #
| [ 0:00] ## Line: 5 	 # This copyrighted material is made available to anyone wishing to use,
| [ 0:00] ## Line: 6 	 # modify, copy, or redistribute it subject to the terms and conditions
| [ 0:00] ## Line: 7 	 # of the GNU General Public License v.2.
| [ 0:00] ## Line: 8 	 #
| [ 0:00] ## Line: 9 	 # You should have received a copy of the GNU General Public License
| [ 0:00] ## Line: 10 	 # along with this program; if not, write to the Free Software Foundation,
| [ 0:00] ## Line: 11 	 # Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA
| [ 0:00] ## Line: 12 	 
| [ 0:00] ## Line: 13 	 test_description='Exercise toollib process_each_pv'
| [ 0:00] ## Line: 14 	 SKIP_WITH_LVMLOCKD=1
| [ 0:00] ## Line: 15 	 SKIP_WITH_LVMPOLLD=1
| [ 0:00] ## Line: 16 	 
| [ 0:00] ## Line: 17 	 . lib/inittest
| [ 0:00] ## Line: 18 	 
| [ 0:00] ## Line: 19 	 aux prepare_devs 14
| [ 0:00] ## Line: 20 	 
| [ 0:00] ## Line: 21 	 #
| [ 0:00] ## Line: 22 	 # process_each_pv is used by a number of pv commands:
| [ 0:00] ## Line: 23 	 # pvdisplay
| [ 0:00] ## Line: 24 	 # pvresize
| [ 0:00] ## Line: 25 	 # pvs
| [ 0:00] ## Line: 26 	 # vgreduce
| [ 0:00] ## Line: 27 	 #
| [ 0:00] ## Line: 28 	 
| [ 0:00] ## Line: 29 	 
| [ 0:00] ## Line: 30 	 #
| [ 0:00] ## Line: 31 	 # set up
| [ 0:00] ## Line: 32 	 #
| [ 0:00] ## Line: 33 	 # use use dev10 instead of dev1 because simple grep for
| [ 0:00] ## Line: 34 	 # dev1 matchines dev10,dev11,etc
| [ 0:00] ## Line: 35 	 #
| [ 0:00] ## Line: 36 	 
| [ 0:00] ## Line: 37 	 vgcreate $vg1 "$dev10"
| [ 0:00] ## Line: 38 	 vgcreate $vg2 "$dev2" "$dev3" "$dev4" "$dev5"
| [ 0:00] ## Line: 39 	 vgcreate $vg3 "$dev6" "$dev7" "$dev8" "$dev9"
| [ 0:00] ## Line: 40 	 
| [ 0:00] ## Line: 41 	 pvchange --addtag V2D3 "$dev3"
| [ 0:00] ## Line: 42 	 pvchange --addtag V2D4 "$dev4"
| [ 0:00] ## Line: 43 	 pvchange --addtag V2D45 "$dev4"
| [ 0:00] ## Line: 44 	 pvchange --addtag V2D5 "$dev5"
| [ 0:00] ## Line: 45 	 pvchange --addtag V2D45 "$dev5"
| [ 0:00] ## Line: 46 	 
| [ 0:00] ## Line: 47 	 pvchange --addtag V3 "$dev6" "$dev7" "$dev8" "$dev9"
| [ 0:00] ## Line: 48 	 pvchange --addtag V3D9 "$dev9"
| [ 0:00] ## Line: 49 	 
| [ 0:00] ## Line: 50 	 # orphan
| [ 0:00] ## Line: 51 	 pvcreate "$dev11"
| [ 0:00] ## Line: 52 	 
| [ 0:00] ## Line: 53 	 # dev (a non-pv device)
| [ 0:00] ## Line: 54 	 pvcreate "$dev12"
| [ 0:00] ## Line: 55 	 pvremove "$dev12"
| [ 0:00] ## Line: 56 	 
| [ 0:00] ## Line: 57 	 # dev13 is intentionally untouched so we can
| [ 0:00] ## Line: 58 	 # test that it is handled appropriately as a non-pv
| [ 0:00] ## Line: 59 	 
| [ 0:00] ## Line: 60 	 # orphan
| [ 0:00] ## Line: 61 	 pvcreate "$dev14"
| [ 0:00] ## Line: 62 	 
| [ 0:00] ## Line: 63 	 #
| [ 0:00] ## Line: 64 	 # test pvresize without orphans and and without non-pv devs
| [ 0:00] ## Line: 65 	 #
| [ 0:00] ## Line: 66 	 
| [ 0:00] ## Line: 67 	 # For pvs in vgs, pvresize setphysicalvolumesize does not give us
| [ 0:00] ## Line: 68 	 # the size requested, but reduces the requested size by some the
| [ 0:00] ## Line: 69 	 # amount for alignment, metadata areas and pv headers.  So, when we resize
| [ 0:00] ## Line: 70 	 # to 30M, the result is 28M, and when we resize to 20M, the result is 16M.
| [ 0:00] ## Line: 71 	 # For orphans, the resulting size is the same as requested.
| [ 0:00] ## Line: 72 	 # It suspect that these reduction amounts might be inconsistent, and
| [ 0:00] ## Line: 73 	 # depend on other changing factors, so it may be that we eventually
| [ 0:00] ## Line: 74 	 # want to give up checking the exact resulting size, but just check
| [ 0:00] ## Line: 75 	 # that the result is less than the original size.
| [ 0:00] ## Line: 76 	 
| [ 0:00] ## Line: 77 	 old_request="30.00m"
| [ 0:00] ## Line: 78 	 old_reduced="28.00m"
| [ 0:00] ## Line: 79 	 new_request="20.00m"
| [ 0:00] ## Line: 80 	 new_reduced="16.00m"
| [ 0:00] ## Line: 81 	 
| [ 0:00] ## Line: 82 	 pvresize --setphysicalvolumesize $old_request -y "$dev10" "$dev2" "$dev3" "$dev4" "$dev5" "$dev6" "$dev7" "$dev8" "$dev9"
| [ 0:00] ## Line: 83 	 check pv_field "$dev10" pv_size $old_reduced
| [ 0:00] ## Line: 84 	 check pv_field "$dev2" pv_size $old_reduced
| [ 0:00] ## Line: 85 	 check pv_field "$dev3" pv_size $old_reduced
| [ 0:00] ## Line: 86 	 check pv_field "$dev4" pv_size $old_reduced
| [ 0:00] ## Line: 87 	 check pv_field "$dev5" pv_size $old_reduced
| [ 0:00] ## Line: 88 	 check pv_field "$dev6" pv_size $old_reduced
| [ 0:00] ## Line: 89 	 check pv_field "$dev7" pv_size $old_reduced
| [ 0:00] ## Line: 90 	 check pv_field "$dev8" pv_size $old_reduced
| [ 0:00] ## Line: 91 	 check pv_field "$dev9" pv_size $old_reduced
| [ 0:00] ## Line: 92 	 
| [ 0:00] ## Line: 93 	 # one pv
| [ 0:00] ## Line: 94 	 pvresize --setphysicalvolumesize $new_request -y "$dev10"
| [ 0:00] ## Line: 95 	 check pv_field "$dev10" pv_size $new_reduced
| [ 0:00] ## Line: 96 	 # unchanged
| [ 0:00] ## Line: 97 	 check pv_field "$dev2" pv_size $old_reduced
| [ 0:00] ## Line: 98 	 check pv_field "$dev3" pv_size $old_reduced
| [ 0:00] ## Line: 99 	 check pv_field "$dev4" pv_size $old_reduced
| [ 0:00] ## Line: 100 	 check pv_field "$dev5" pv_size $old_reduced
| [ 0:00] ## Line: 101 	 check pv_field "$dev6" pv_size $old_reduced
| [ 0:00] ## Line: 102 	 check pv_field "$dev7" pv_size $old_reduced
| [ 0:00] ## Line: 103 	 check pv_field "$dev8" pv_size $old_reduced
| [ 0:00] ## Line: 104 	 check pv_field "$dev9" pv_size $old_reduced
| [ 0:00] ## Line: 105 	 # reset back to old size
| [ 0:00] ## Line: 106 	 pvresize --setphysicalvolumesize $old_request -y "$dev10" "$dev2" "$dev3" "$dev4" "$dev5" "$dev6" "$dev7" "$dev8" "$dev9"
| [ 0:00] ## Line: 107 	 
| [ 0:00] ## Line: 108 	 # two pvs in separate vgs
| [ 0:00] ## Line: 109 	 pvresize --setphysicalvolumesize $new_request -y "$dev2" "$dev6"
| [ 0:00] ## Line: 110 	 check pv_field "$dev2" pv_size $new_reduced
| [ 0:00] ## Line: 111 	 check pv_field "$dev6" pv_size $new_reduced
| [ 0:00] ## Line: 112 	 # unchanged
| [ 0:00] ## Line: 113 	 check pv_field "$dev10" pv_size $old_reduced
| [ 0:00] ## Line: 114 	 check pv_field "$dev3" pv_size $old_reduced
| [ 0:00] ## Line: 115 	 check pv_field "$dev4" pv_size $old_reduced
| [ 0:00] ## Line: 116 	 check pv_field "$dev5" pv_size $old_reduced
| [ 0:00] ## Line: 117 	 check pv_field "$dev7" pv_size $old_reduced
| [ 0:00] ## Line: 118 	 check pv_field "$dev8" pv_size $old_reduced
| [ 0:00] ## Line: 119 	 check pv_field "$dev9" pv_size $old_reduced
| [ 0:00] ## Line: 120 	 # reset back to old size
| [ 0:00] ## Line: 121 	 pvresize --setphysicalvolumesize $old_request -y "$dev10" "$dev2" "$dev3" "$dev4" "$dev5" "$dev6" "$dev7" "$dev8" "$dev9"
| [ 0:00] ## Line: 122 	 
| [ 0:00] ## Line: 123 	 # one tag on one pv
| [ 0:00] ## Line: 124 	 pvresize --setphysicalvolumesize $new_request -y @V2D4
| [ 0:00] ## Line: 125 	 check pv_field "$dev4" pv_size $new_reduced
| [ 0:00] ## Line: 126 	 # unchanged
| [ 0:00] ## Line: 127 	 check pv_field "$dev10" pv_size $old_reduced
| [ 0:00] ## Line: 128 	 check pv_field "$dev2" pv_size $old_reduced
| [ 0:00] ## Line: 129 	 check pv_field "$dev3" pv_size $old_reduced
| [ 0:00] ## Line: 130 	 check pv_field "$dev5" pv_size $old_reduced
| [ 0:00] ## Line: 131 	 check pv_field "$dev6" pv_size $old_reduced
| [ 0:00] ## Line: 132 	 check pv_field "$dev7" pv_size $old_reduced
| [ 0:00] ## Line: 133 	 check pv_field "$dev8" pv_size $old_reduced
| [ 0:00] ## Line: 134 	 check pv_field "$dev9" pv_size $old_reduced
| [ 0:00] ## Line: 135 	 # reset back to old size
| [ 0:00] ## Line: 136 	 pvresize --setphysicalvolumesize $old_request -y "$dev10" "$dev2" "$dev3" "$dev4" "$dev5" "$dev6" "$dev7" "$dev8" "$dev9"
| [ 0:00] ## Line: 137 	 
| [ 0:00] ## Line: 138 	 # one tag on all pvs in one vg
| [ 0:00] ## Line: 139 	 pvresize --setphysicalvolumesize $new_request -y @V3
| [ 0:00] ## Line: 140 	 check pv_field "$dev6" pv_size $new_reduced
| [ 0:00] ## Line: 141 	 check pv_field "$dev7" pv_size $new_reduced
| [ 0:00] ## Line: 142 	 check pv_field "$dev8" pv_size $new_reduced
| [ 0:00] ## Line: 143 	 check pv_field "$dev9" pv_size $new_reduced
| [ 0:00] ## Line: 144 	 # unchanged
| [ 0:00] ## Line: 145 	 check pv_field "$dev10" pv_size $old_reduced
| [ 0:00] ## Line: 146 	 check pv_field "$dev2" pv_size $old_reduced
| [ 0:00] ## Line: 147 	 check pv_field "$dev3" pv_size $old_reduced
| [ 0:00] ## Line: 148 	 check pv_field "$dev4" pv_size $old_reduced
| [ 0:00] ## Line: 149 	 check pv_field "$dev5" pv_size $old_reduced
| [ 0:00] ## Line: 150 	 # reset back to old size
| [ 0:00] ## Line: 151 	 pvresize --setphysicalvolumesize $old_request -y "$dev10" "$dev2" "$dev3" "$dev4" "$dev5" "$dev6" "$dev7" "$dev8" "$dev9"
| [ 0:00] ## Line: 152 	 
| [ 0:00] ## Line: 153 	 # one tag on some pvs in one vg
| [ 0:00] ## Line: 154 	 pvresize --setphysicalvolumesize $new_request -y @V2D45
| [ 0:00] ## Line: 155 	 check pv_field "$dev4" pv_size $new_reduced
| [ 0:00] ## Line: 156 	 check pv_field "$dev5" pv_size $new_reduced
| [ 0:00] ## Line: 157 	 # unchanged
| [ 0:00] ## Line: 158 	 check pv_field "$dev10" pv_size $old_reduced
| [ 0:00] ## Line: 159 	 check pv_field "$dev2" pv_size $old_reduced
| [ 0:00] ## Line: 160 	 check pv_field "$dev3" pv_size $old_reduced
| [ 0:00] ## Line: 161 	 check pv_field "$dev6" pv_size $old_reduced
| [ 0:00] ## Line: 162 	 check pv_field "$dev7" pv_size $old_reduced
| [ 0:00] ## Line: 163 	 check pv_field "$dev8" pv_size $old_reduced
| [ 0:00] ## Line: 164 	 check pv_field "$dev9" pv_size $old_reduced
| [ 0:00] ## Line: 165 	 # reset back to old size
| [ 0:00] ## Line: 166 	 pvresize --setphysicalvolumesize $old_request -y "$dev10" "$dev2" "$dev3" "$dev4" "$dev5" "$dev6" "$dev7" "$dev8" "$dev9"
| [ 0:00] ## Line: 167 	 
| [ 0:00] ## Line: 168 	 # one tag on multiple pvs in separate vgs
| [ 0:00] ## Line: 169 	 pvchange --addtag V12 "$dev10" "$dev2" "$dev3" "$dev4" "$dev5"
| [ 0:00] ## Line: 170 	 pvresize --setphysicalvolumesize $new_request -y @V12
| [ 0:00] ## Line: 171 	 check pv_field "$dev10" pv_size $new_reduced
| [ 0:00] ## Line: 172 	 check pv_field "$dev2" pv_size $new_reduced
| [ 0:00] ## Line: 173 	 check pv_field "$dev3" pv_size $new_reduced
| [ 0:00] ## Line: 174 	 check pv_field "$dev4" pv_size $new_reduced
| [ 0:00] ## Line: 175 	 check pv_field "$dev5" pv_size $new_reduced
| [ 0:00] ## Line: 176 	 # unchanged
| [ 0:00] ## Line: 177 	 check pv_field "$dev6" pv_size $old_reduced
| [ 0:00] ## Line: 178 	 check pv_field "$dev7" pv_size $old_reduced
| [ 0:00] ## Line: 179 	 check pv_field "$dev8" pv_size $old_reduced
| [ 0:00] ## Line: 180 	 check pv_field "$dev9" pv_size $old_reduced
| [ 0:00] ## Line: 181 	 # reset back to old size
| [ 0:00] ## Line: 182 	 pvresize --setphysicalvolumesize $old_request -y "$dev10" "$dev2" "$dev3" "$dev4" "$dev5" "$dev6" "$dev7" "$dev8" "$dev9"
| [ 0:00] ## Line: 183 	 
| [ 0:00] ## Line: 184 	 # one pv and one tag on different pv
| [ 0:00] ## Line: 185 	 pvresize --setphysicalvolumesize $new_request -y "$dev10" @V3D9
| [ 0:00] ## Line: 186 	 check pv_field "$dev10" pv_size $new_reduced
| [ 0:00] ## Line: 187 	 check pv_field "$dev9" pv_size $new_reduced
| [ 0:00] ## Line: 188 	 # unchanged
| [ 0:00] ## Line: 189 	 check pv_field "$dev2" pv_size $old_reduced
| [ 0:00] ## Line: 190 	 check pv_field "$dev3" pv_size $old_reduced
| [ 0:00] ## Line: 191 	 check pv_field "$dev4" pv_size $old_reduced
| [ 0:00] ## Line: 192 	 check pv_field "$dev5" pv_size $old_reduced
| [ 0:00] ## Line: 193 	 check pv_field "$dev6" pv_size $old_reduced
| [ 0:00] ## Line: 194 	 check pv_field "$dev7" pv_size $old_reduced
| [ 0:00] ## Line: 195 	 check pv_field "$dev8" pv_size $old_reduced
| [ 0:00] ## Line: 196 	 # reset back to old size
| [ 0:00] ## Line: 197 	 pvresize --setphysicalvolumesize $old_request -y "$dev10" "$dev2" "$dev3" "$dev4" "$dev5" "$dev6" "$dev7" "$dev8" "$dev9"
| [ 0:00] ## Line: 198 	 
| [ 0:00] ## Line: 199 	 # redundant pv and tag
| [ 0:00] ## Line: 200 	 pvresize --setphysicalvolumesize $new_request -y "$dev9" @V3D9
| [ 0:00] ## Line: 201 	 check pv_field "$dev9" pv_size $new_reduced
| [ 0:00] ## Line: 202 	 # unchanged
| [ 0:00] ## Line: 203 	 check pv_field "$dev10" pv_size $old_reduced
| [ 0:00] ## Line: 204 	 check pv_field "$dev2" pv_size $old_reduced
| [ 0:00] ## Line: 205 	 check pv_field "$dev3" pv_size $old_reduced
| [ 0:00] ## Line: 206 	 check pv_field "$dev4" pv_size $old_reduced
| [ 0:00] ## Line: 207 	 check pv_field "$dev5" pv_size $old_reduced
| [ 0:00] ## Line: 208 	 check pv_field "$dev6" pv_size $old_reduced
| [ 0:00] ## Line: 209 	 check pv_field "$dev7" pv_size $old_reduced
| [ 0:00] ## Line: 210 	 check pv_field "$dev8" pv_size $old_reduced
| [ 0:00] ## Line: 211 	 # reset back to old size
| [ 0:00] ## Line: 212 	 pvresize --setphysicalvolumesize $old_request -y "$dev10" "$dev2" "$dev3" "$dev4" "$dev5" "$dev6" "$dev7" "$dev8" "$dev9"
| [ 0:00] ## Line: 213 	 
| [ 0:00] ## Line: 214 	 # two tags on pvs in separate vgs
| [ 0:00] ## Line: 215 	 pvresize --setphysicalvolumesize $new_request -y @V3D9 @V2D3
| [ 0:00] ## Line: 216 	 check pv_field "$dev9" pv_size $new_reduced
| [ 0:00] ## Line: 217 	 check pv_field "$dev3" pv_size $new_reduced
| [ 0:00] ## Line: 218 	 # unchanged
| [ 0:00] ## Line: 219 	 check pv_field "$dev10" pv_size $old_reduced
| [ 0:00] ## Line: 220 	 check pv_field "$dev2" pv_size $old_reduced
| [ 0:00] ## Line: 221 	 check pv_field "$dev4" pv_size $old_reduced
| [ 0:00] ## Line: 222 	 check pv_field "$dev5" pv_size $old_reduced
| [ 0:00] ## Line: 223 	 check pv_field "$dev6" pv_size $old_reduced
| [ 0:00] ## Line: 224 	 check pv_field "$dev7" pv_size $old_reduced
| [ 0:00] ## Line: 225 	 check pv_field "$dev8" pv_size $old_reduced
| [ 0:00] ## Line: 226 	 # reset back to old size
| [ 0:00] ## Line: 227 	 pvresize --setphysicalvolumesize $old_request -y "$dev10" "$dev2" "$dev3" "$dev4" "$dev5" "$dev6" "$dev7" "$dev8" "$dev9"
| [ 0:00] ## Line: 228 	 
| [ 0:00] ## Line: 229 	 
| [ 0:00] ## Line: 230 	 #
| [ 0:00] ## Line: 231 	 # test pvresize with orphans
| [ 0:00] ## Line: 232 	 #
| [ 0:00] ## Line: 233 	 
| [ 0:00] ## Line: 234 	 old_request="30.00m"
| [ 0:00] ## Line: 235 	 old_reduced="28.00m"
| [ 0:00] ## Line: 236 	 old_orphan="30.00m"
| [ 0:00] ## Line: 237 	 new_request="20.00m"
| [ 0:00] ## Line: 238 	 new_reduced="16.00m"
| [ 0:00] ## Line: 239 	 new_orphan="20.00m"
| [ 0:00] ## Line: 240 	 
| [ 0:00] ## Line: 241 	 pvresize --setphysicalvolumesize $old_request -y "$dev10" "$dev2" "$dev3" "$dev4" "$dev5" "$dev6" "$dev7" "$dev8" "$dev9"
| [ 0:00] ## Line: 242 	 pvresize --setphysicalvolumesize $old_request -y "$dev11" "$dev14"
| [ 0:00] ## Line: 243 	 check pv_field "$dev10" pv_size $old_reduced
| [ 0:00] ## Line: 244 	 check pv_field "$dev2" pv_size $old_reduced
| [ 0:00] ## Line: 245 	 check pv_field "$dev3" pv_size $old_reduced
| [ 0:00] ## Line: 246 	 check pv_field "$dev4" pv_size $old_reduced
| [ 0:00] ## Line: 247 	 check pv_field "$dev5" pv_size $old_reduced
| [ 0:00] ## Line: 248 	 check pv_field "$dev6" pv_size $old_reduced
| [ 0:00] ## Line: 249 	 check pv_field "$dev7" pv_size $old_reduced
| [ 0:00] ## Line: 250 	 check pv_field "$dev8" pv_size $old_reduced
| [ 0:00] ## Line: 251 	 check pv_field "$dev9" pv_size $old_reduced
| [ 0:00] ## Line: 252 	 check pv_field "$dev11" pv_size $old_orphan
| [ 0:00] ## Line: 253 	 check pv_field "$dev14" pv_size $old_orphan
| [ 0:00] ## Line: 254 	 
| [ 0:00] ## Line: 255 	 # one orphan
| [ 0:00] ## Line: 256 	 pvresize --setphysicalvolumesize $new_request -y "$dev11"
| [ 0:00] ## Line: 257 	 check pv_field "$dev11" pv_size $new_orphan
| [ 0:00] ## Line: 258 	 # unchanged
| [ 0:00] ## Line: 259 	 check pv_field "$dev10" pv_size $old_reduced
| [ 0:00] ## Line: 260 	 check pv_field "$dev2" pv_size $old_reduced
| [ 0:00] ## Line: 261 	 check pv_field "$dev3" pv_size $old_reduced
| [ 0:00] ## Line: 262 	 check pv_field "$dev4" pv_size $old_reduced
| [ 0:00] ## Line: 263 	 check pv_field "$dev5" pv_size $old_reduced
| [ 0:00] ## Line: 264 	 check pv_field "$dev6" pv_size $old_reduced
| [ 0:00] ## Line: 265 	 check pv_field "$dev7" pv_size $old_reduced
| [ 0:00] ## Line: 266 	 check pv_field "$dev8" pv_size $old_reduced
| [ 0:00] ## Line: 267 	 check pv_field "$dev9" pv_size $old_reduced
| [ 0:00] ## Line: 268 	 check pv_field "$dev14" pv_size $old_orphan
| [ 0:00] ## Line: 269 	 # reset back to old size
| [ 0:00] ## Line: 270 	 pvresize --setphysicalvolumesize $old_request -y "$dev10" "$dev2" "$dev3" "$dev4" "$dev5" "$dev6" "$dev7" "$dev8" "$dev9"
| [ 0:00] ## Line: 271 	 pvresize --setphysicalvolumesize $old_request -y "$dev11" "$dev14"
| [ 0:00] ## Line: 272 	 
| [ 0:00] ## Line: 273 	 # two orphans
| [ 0:00] ## Line: 274 	 pvresize --setphysicalvolumesize $new_request -y "$dev11" "$dev14"
| [ 0:00] ## Line: 275 	 check pv_field "$dev11" pv_size $new_orphan
| [ 0:00] ## Line: 276 	 check pv_field "$dev14" pv_size $new_orphan
| [ 0:00] ## Line: 277 	 # unchanged
| [ 0:00] ## Line: 278 	 check pv_field "$dev10" pv_size $old_reduced
| [ 0:00] ## Line: 279 	 check pv_field "$dev2" pv_size $old_reduced
| [ 0:00] ## Line: 280 	 check pv_field "$dev3" pv_size $old_reduced
| [ 0:00] ## Line: 281 	 check pv_field "$dev4" pv_size $old_reduced
| [ 0:00] ## Line: 282 	 check pv_field "$dev5" pv_size $old_reduced
| [ 0:00] ## Line: 283 	 check pv_field "$dev6" pv_size $old_reduced
| [ 0:00] ## Line: 284 	 check pv_field "$dev7" pv_size $old_reduced
| [ 0:00] ## Line: 285 	 check pv_field "$dev8" pv_size $old_reduced
| [ 0:00] ## Line: 286 	 check pv_field "$dev9" pv_size $old_reduced
| [ 0:00] ## Line: 287 	 # reset back to old size
| [ 0:00] ## Line: 288 	 pvresize --setphysicalvolumesize $old_request -y "$dev10" "$dev2" "$dev3" "$dev4" "$dev5" "$dev6" "$dev7" "$dev8" "$dev9"
| [ 0:00] ## Line: 289 	 pvresize --setphysicalvolumesize $old_request -y "$dev11" "$dev14"
| [ 0:00] ## Line: 290 	 
| [ 0:00] ## Line: 291 	 # one orphan, one tag
| [ 0:00] ## Line: 292 	 pvresize --setphysicalvolumesize $new_request -y @V3D9 "$dev14"
| [ 0:00] ## Line: 293 	 check pv_field "$dev9" pv_size $new_reduced
| [ 0:00] ## Line: 294 	 check pv_field "$dev14" pv_size $new_orphan
| [ 0:00] ## Line: 295 	 # unchanged
| [ 0:00] ## Line: 296 	 check pv_field "$dev10" pv_size $old_reduced
| [ 0:00] ## Line: 297 	 check pv_field "$dev2" pv_size $old_reduced
| [ 0:00] ## Line: 298 	 check pv_field "$dev3" pv_size $old_reduced
| [ 0:00] ## Line: 299 	 check pv_field "$dev4" pv_size $old_reduced
| [ 0:00] ## Line: 300 	 check pv_field "$dev5" pv_size $old_reduced
| [ 0:00] ## Line: 301 	 check pv_field "$dev6" pv_size $old_reduced
| [ 0:00] ## Line: 302 	 check pv_field "$dev7" pv_size $old_reduced
| [ 0:00] ## Line: 303 	 check pv_field "$dev8" pv_size $old_reduced
| [ 0:00] ## Line: 304 	 check pv_field "$dev11" pv_size $old_orphan
| [ 0:00] ## Line: 305 	 # reset back to old size
| [ 0:00] ## Line: 306 	 pvresize --setphysicalvolumesize $old_request -y "$dev10" "$dev2" "$dev3" "$dev4" "$dev5" "$dev6" "$dev7" "$dev8" "$dev9"
| [ 0:00] ## Line: 307 	 pvresize --setphysicalvolumesize $old_request -y "$dev11" "$dev14"
| [ 0:00] ## Line: 308 	 
| [ 0:00] ## Line: 309 	 # one pv, one orphan, one tag
| [ 0:00] ## Line: 310 	 pvresize --setphysicalvolumesize $new_request -y @V3D9 "$dev14" "$dev10"
| [ 0:00] ## Line: 311 	 check pv_field "$dev9" pv_size $new_reduced
| [ 0:00] ## Line: 312 	 check pv_field "$dev10" pv_size $new_reduced
| [ 0:00] ## Line: 313 	 check pv_field "$dev14" pv_size $new_orphan
| [ 0:00] ## Line: 314 	 # unchanged
| [ 0:00] ## Line: 315 	 check pv_field "$dev2" pv_size $old_reduced
| [ 0:00] ## Line: 316 	 check pv_field "$dev3" pv_size $old_reduced
| [ 0:00] ## Line: 317 	 check pv_field "$dev4" pv_size $old_reduced
| [ 0:00] ## Line: 318 	 check pv_field "$dev5" pv_size $old_reduced
| [ 0:00] ## Line: 319 	 check pv_field "$dev6" pv_size $old_reduced
| [ 0:00] ## Line: 320 	 check pv_field "$dev7" pv_size $old_reduced
| [ 0:00] ## Line: 321 	 check pv_field "$dev8" pv_size $old_reduced
| [ 0:00] ## Line: 322 	 check pv_field "$dev11" pv_size $old_orphan
| [ 0:00] ## Line: 323 	 # reset back to old size
| [ 0:00] ## Line: 324 	 pvresize --setphysicalvolumesize $old_request -y "$dev10" "$dev2" "$dev3" "$dev4" "$dev5" "$dev6" "$dev7" "$dev8" "$dev9"
| [ 0:00] ## Line: 325 	 pvresize --setphysicalvolumesize $old_request -y "$dev11" "$dev14"
| [ 0:00] ## Line: 326 	 
| [ 0:00] ## Line: 327 	 
| [ 0:00] ## Line: 328 	 #
| [ 0:00] ## Line: 329 	 # test pvresize with non-pv devs
| [ 0:00] ## Line: 330 	 #
| [ 0:00] ## Line: 331 	 
| [ 0:00] ## Line: 332 	 # one dev (non-pv)
| [ 0:00] ## Line: 333 	 not pvresize --setphysicalvolumesize $new_request -y "$dev13"
| [ 0:00] ## Line: 334 	 # unchanged
| [ 0:00] ## Line: 335 	 check pv_field "$dev10" pv_size $old_reduced
| [ 0:00] ## Line: 336 	 check pv_field "$dev2" pv_size $old_reduced
| [ 0:00] ## Line: 337 	 check pv_field "$dev3" pv_size $old_reduced
| [ 0:00] ## Line: 338 	 check pv_field "$dev4" pv_size $old_reduced
| [ 0:00] ## Line: 339 	 check pv_field "$dev5" pv_size $old_reduced
| [ 0:00] ## Line: 340 	 check pv_field "$dev6" pv_size $old_reduced
| [ 0:00] ## Line: 341 	 check pv_field "$dev7" pv_size $old_reduced
| [ 0:00] ## Line: 342 	 check pv_field "$dev8" pv_size $old_reduced
| [ 0:00] ## Line: 343 	 check pv_field "$dev9" pv_size $old_reduced
| [ 0:00] ## Line: 344 	 check pv_field "$dev11" pv_size $old_orphan
| [ 0:00] ## Line: 345 	 check pv_field "$dev14" pv_size $old_orphan
| [ 0:00] ## Line: 346 	 
| [ 0:00] ## Line: 347 	 # one orphan and one dev (non-pv)
| [ 0:00] ## Line: 348 	 not pvresize --setphysicalvolumesize $new_request -y "$dev14" "$dev13"
| [ 0:00] ## Line: 349 	 check pv_field "$dev14" pv_size $new_orphan
| [ 0:00] ## Line: 350 	 # unchanged
| [ 0:00] ## Line: 351 	 check pv_field "$dev10" pv_size $old_reduced
| [ 0:00] ## Line: 352 	 check pv_field "$dev2" pv_size $old_reduced
| [ 0:00] ## Line: 353 	 check pv_field "$dev3" pv_size $old_reduced
| [ 0:00] ## Line: 354 	 check pv_field "$dev4" pv_size $old_reduced
| [ 0:00] ## Line: 355 	 check pv_field "$dev5" pv_size $old_reduced
| [ 0:00] ## Line: 356 	 check pv_field "$dev6" pv_size $old_reduced
| [ 0:00] ## Line: 357 	 check pv_field "$dev7" pv_size $old_reduced
| [ 0:00] ## Line: 358 	 check pv_field "$dev8" pv_size $old_reduced
| [ 0:00] ## Line: 359 	 check pv_field "$dev9" pv_size $old_reduced
| [ 0:00] ## Line: 360 	 check pv_field "$dev11" pv_size $old_orphan
| [ 0:00] ## Line: 361 	 # reset back to old size
| [ 0:00] ## Line: 362 	 pvresize --setphysicalvolumesize $old_request -y "$dev10" "$dev2" "$dev3" "$dev4" "$dev5" "$dev6" "$dev7" "$dev8" "$dev9"
| [ 0:00] ## Line: 363 	 pvresize --setphysicalvolumesize $old_request -y "$dev11" "$dev14"
| [ 0:00] ## Line: 364 	 
| [ 0:00] ## Line: 365 	 # one pv and one dev (non-pv)
| [ 0:00] ## Line: 366 	 not pvresize --setphysicalvolumesize $new_request -y "$dev9" "$dev13"
| [ 0:00] ## Line: 367 	 check pv_field "$dev9" pv_size $new_reduced
| [ 0:00] ## Line: 368 	 # unchanged
| [ 0:00] ## Line: 369 	 check pv_field "$dev10" pv_size $old_reduced
| [ 0:00] ## Line: 370 	 check pv_field "$dev2" pv_size $old_reduced
| [ 0:00] ## Line: 371 	 check pv_field "$dev3" pv_size $old_reduced
| [ 0:00] ## Line: 372 	 check pv_field "$dev4" pv_size $old_reduced
| [ 0:00] ## Line: 373 	 check pv_field "$dev5" pv_size $old_reduced
| [ 0:00] ## Line: 374 	 check pv_field "$dev6" pv_size $old_reduced
| [ 0:00] ## Line: 375 	 check pv_field "$dev7" pv_size $old_reduced
| [ 0:00] ## Line: 376 	 check pv_field "$dev8" pv_size $old_reduced
| [ 0:00] ## Line: 377 	 check pv_field "$dev11" pv_size $old_orphan
| [ 0:00] ## Line: 378 	 check pv_field "$dev14" pv_size $old_orphan
| [ 0:00] ## Line: 379 	 # reset back to old size
| [ 0:00] ## Line: 380 	 pvresize --setphysicalvolumesize $old_request -y "$dev10" "$dev2" "$dev3" "$dev4" "$dev5" "$dev6" "$dev7" "$dev8" "$dev9"
| [ 0:00] ## Line: 381 	 pvresize --setphysicalvolumesize $old_request -y "$dev11" "$dev14"
| [ 0:00] ## Line: 382 	 
| [ 0:00] ## Line: 383 	 # one tag and one dev (non-pv)
| [ 0:00] ## Line: 384 	 not pvresize --setphysicalvolumesize $new_request -y @V3D9 "$dev13"
| [ 0:00] ## Line: 385 	 check pv_field "$dev9" pv_size $new_reduced
| [ 0:00] ## Line: 386 	 # unchanged
| [ 0:00] ## Line: 387 	 check pv_field "$dev10" pv_size $old_reduced
| [ 0:00] ## Line: 388 	 check pv_field "$dev2" pv_size $old_reduced
| [ 0:00] ## Line: 389 	 check pv_field "$dev3" pv_size $old_reduced
| [ 0:00] ## Line: 390 	 check pv_field "$dev4" pv_size $old_reduced
| [ 0:00] ## Line: 391 	 check pv_field "$dev5" pv_size $old_reduced
| [ 0:00] ## Line: 392 	 check pv_field "$dev6" pv_size $old_reduced
| [ 0:00] ## Line: 393 	 check pv_field "$dev7" pv_size $old_reduced
| [ 0:00] ## Line: 394 	 check pv_field "$dev8" pv_size $old_reduced
| [ 0:00] ## Line: 395 	 check pv_field "$dev11" pv_size $old_orphan
| [ 0:00] ## Line: 396 	 check pv_field "$dev14" pv_size $old_orphan
| [ 0:00] ## Line: 397 	 # reset back to old size
| [ 0:00] ## Line: 398 	 pvresize --setphysicalvolumesize $old_request -y "$dev10" "$dev2" "$dev3" "$dev4" "$dev5" "$dev6" "$dev7" "$dev8" "$dev9"
| [ 0:00] ## Line: 399 	 pvresize --setphysicalvolumesize $old_request -y "$dev11" "$dev14"
| [ 0:00] ## Line: 400 	 
| [ 0:00] ## Line: 401 	 # one pv, one orphan, one tag, one dev
| [ 0:00] ## Line: 402 	 not pvresize --setphysicalvolumesize $new_request -y @V3D9 "$dev13" "$dev14" "$dev10"
| [ 0:00] ## Line: 403 	 check pv_field "$dev9" pv_size $new_reduced
| [ 0:00] ## Line: 404 	 check pv_field "$dev10" pv_size $new_reduced
| [ 0:00] ## Line: 405 	 check pv_field "$dev14" pv_size $new_orphan
| [ 0:00] ## Line: 406 	 # unchanged
| [ 0:00] ## Line: 407 	 check pv_field "$dev2" pv_size $old_reduced
| [ 0:00] ## Line: 408 	 check pv_field "$dev3" pv_size $old_reduced
| [ 0:00] ## Line: 409 	 check pv_field "$dev4" pv_size $old_reduced
| [ 0:00] ## Line: 410 	 check pv_field "$dev5" pv_size $old_reduced
| [ 0:00] ## Line: 411 	 check pv_field "$dev6" pv_size $old_reduced
| [ 0:00] ## Line: 412 	 check pv_field "$dev7" pv_size $old_reduced
| [ 0:00] ## Line: 413 	 check pv_field "$dev8" pv_size $old_reduced
| [ 0:00] ## Line: 414 	 check pv_field "$dev11" pv_size $old_orphan
| [ 0:00] ## Line: 415 	 # reset back to old size
| [ 0:00] ## Line: 416 	 pvresize --setphysicalvolumesize $old_request -y "$dev10" "$dev2" "$dev3" "$dev4" "$dev5" "$dev6" "$dev7" "$dev8" "$dev9"
| [ 0:00] ## Line: 417 	 pvresize --setphysicalvolumesize $old_request -y "$dev11" "$dev14"
| [ 0:00] ## Line: 418 	 
| [ 0:00] ## Line: 419 	 
| [ 0:00] ## Line: 420 	 #
| [ 0:00] ## Line: 421 	 # pvresize including pvs without mdas
| [ 0:00] ## Line: 422 	 #
| [ 0:00] ## Line: 423 	 
| [ 0:00] ## Line: 424 	 pvresize --setphysicalvolumesize $old_request -y "$dev10" "$dev2" "$dev3" "$dev4" "$dev5" "$dev6" "$dev7" "$dev8" "$dev9"
| [ 0:00] ## Line: 425 	 pvresize --setphysicalvolumesize $old_request -y "$dev11" "$dev14"
| [ 0:00] ## Line: 426 	 check pv_field "$dev10" pv_size $old_reduced
| [ 0:00] ## Line: 427 	 check pv_field "$dev2" pv_size $old_reduced
| [ 0:00] ## Line: 428 	 check pv_field "$dev3" pv_size $old_reduced
| [ 0:00] ## Line: 429 	 check pv_field "$dev4" pv_size $old_reduced
| [ 0:00] ## Line: 430 	 check pv_field "$dev5" pv_size $old_reduced
| [ 0:00] ## Line: 431 	 check pv_field "$dev6" pv_size $old_reduced
| [ 0:00] ## Line: 432 	 check pv_field "$dev7" pv_size $old_reduced
| [ 0:00] ## Line: 433 	 check pv_field "$dev8" pv_size $old_reduced
| [ 0:00] ## Line: 434 	 check pv_field "$dev9" pv_size $old_reduced
| [ 0:00] ## Line: 435 	 check pv_field "$dev11" pv_size $old_orphan
| [ 0:00] ## Line: 436 	 check pv_field "$dev14" pv_size $old_orphan
| [ 0:00] ## Line: 437 	 
| [ 0:00] ## Line: 438 	 # one pv without mda
| [ 0:00] ## Line: 439 	 pvresize --setphysicalvolumesize $new_request -y "$dev2"
| [ 0:00] ## Line: 440 	 check pv_field "$dev2" pv_size $new_reduced
| [ 0:00] ## Line: 441 	 # unchanged
| [ 0:00] ## Line: 442 	 check pv_field "$dev10" pv_size $old_reduced
| [ 0:00] ## Line: 443 	 check pv_field "$dev3" pv_size $old_reduced
| [ 0:00] ## Line: 444 	 check pv_field "$dev4" pv_size $old_reduced
| [ 0:00] ## Line: 445 	 check pv_field "$dev5" pv_size $old_reduced
| [ 0:00] ## Line: 446 	 check pv_field "$dev6" pv_size $old_reduced
| [ 0:00] ## Line: 447 	 check pv_field "$dev7" pv_size $old_reduced
| [ 0:00] ## Line: 448 	 check pv_field "$dev8" pv_size $old_reduced
| [ 0:00] ## Line: 449 	 check pv_field "$dev9" pv_size $old_reduced
| [ 0:00] ## Line: 450 	 check pv_field "$dev11" pv_size $old_orphan
| [ 0:00] ## Line: 451 	 check pv_field "$dev14" pv_size $old_orphan
| [ 0:00] ## Line: 452 	 # reset back to old size
| [ 0:00] ## Line: 453 	 pvresize --setphysicalvolumesize $old_request -y "$dev10" "$dev2" "$dev3" "$dev4" "$dev5" "$dev6" "$dev7" "$dev8" "$dev9"
| [ 0:00] ## Line: 454 	 pvresize --setphysicalvolumesize $old_request -y "$dev11" "$dev14"
| [ 0:00] ## Line: 455 	 
| [ 0:00] ## Line: 456 	 # two pvs without mdas
| [ 0:00] ## Line: 457 	 pvresize --setphysicalvolumesize $new_request -y "$dev6" "$dev7"
| [ 0:00] ## Line: 458 	 check pv_field "$dev6" pv_size $new_reduced
| [ 0:00] ## Line: 459 	 check pv_field "$dev7" pv_size $new_reduced
| [ 0:00] ## Line: 460 	 # unchanged
| [ 0:00] ## Line: 461 	 check pv_field "$dev10" pv_size $old_reduced
| [ 0:00] ## Line: 462 	 check pv_field "$dev2" pv_size $old_reduced
| [ 0:00] ## Line: 463 	 check pv_field "$dev3" pv_size $old_reduced
| [ 0:00] ## Line: 464 	 check pv_field "$dev4" pv_size $old_reduced
| [ 0:00] ## Line: 465 	 check pv_field "$dev5" pv_size $old_reduced
| [ 0:00] ## Line: 466 	 check pv_field "$dev8" pv_size $old_reduced
| [ 0:00] ## Line: 467 	 check pv_field "$dev9" pv_size $old_reduced
| [ 0:00] ## Line: 468 	 check pv_field "$dev11" pv_size $old_orphan
| [ 0:00] ## Line: 469 	 check pv_field "$dev14" pv_size $old_orphan
| [ 0:00] ## Line: 470 	 # reset back to old size
| [ 0:00] ## Line: 471 	 pvresize --setphysicalvolumesize $old_request -y "$dev10" "$dev2" "$dev3" "$dev4" "$dev5" "$dev6" "$dev7" "$dev8" "$dev9"
| [ 0:00] ## Line: 472 	 pvresize --setphysicalvolumesize $old_request -y "$dev11" "$dev14"
| [ 0:00] ## Line: 473 	 
| [ 0:00] ## Line: 474 	 # one pv with mda and one pv without mda
| [ 0:00] ## Line: 475 	 pvresize --setphysicalvolumesize $new_request -y "$dev8" "$dev9"
| [ 0:00] ## Line: 476 	 check pv_field "$dev8" pv_size $new_reduced
| [ 0:00] ## Line: 477 	 check pv_field "$dev9" pv_size $new_reduced
| [ 0:00] ## Line: 478 	 # unchanged
| [ 0:00] ## Line: 479 	 check pv_field "$dev10" pv_size $old_reduced
| [ 0:00] ## Line: 480 	 check pv_field "$dev2" pv_size $old_reduced
| [ 0:00] ## Line: 481 	 check pv_field "$dev3" pv_size $old_reduced
| [ 0:00] ## Line: 482 	 check pv_field "$dev4" pv_size $old_reduced
| [ 0:00] ## Line: 483 	 check pv_field "$dev5" pv_size $old_reduced
| [ 0:00] ## Line: 484 	 check pv_field "$dev6" pv_size $old_reduced
| [ 0:00] ## Line: 485 	 check pv_field "$dev7" pv_size $old_reduced
| [ 0:00] ## Line: 486 	 check pv_field "$dev11" pv_size $old_orphan
| [ 0:00] ## Line: 487 	 check pv_field "$dev14" pv_size $old_orphan
| [ 0:00] ## Line: 488 	 # reset back to old size
| [ 0:00] ## Line: 489 	 pvresize --setphysicalvolumesize $old_request -y "$dev10" "$dev2" "$dev3" "$dev4" "$dev5" "$dev6" "$dev7" "$dev8" "$dev9"
| [ 0:00] ## Line: 490 	 pvresize --setphysicalvolumesize $old_request -y "$dev11" "$dev14"
| [ 0:00] ## Line: 491 	 
| [ 0:00] ## Line: 492 	 # one orphan with mda
| [ 0:00] ## Line: 493 	 pvresize --setphysicalvolumesize $new_request -y "$dev11"
| [ 0:00] ## Line: 494 	 check pv_field "$dev11" pv_size $new_orphan
| [ 0:00] ## Line: 495 	 # unchanged
| [ 0:00] ## Line: 496 	 check pv_field "$dev10" pv_size $old_reduced
| [ 0:00] ## Line: 497 	 check pv_field "$dev2" pv_size $old_reduced
| [ 0:00] ## Line: 498 	 check pv_field "$dev3" pv_size $old_reduced
| [ 0:00] ## Line: 499 	 check pv_field "$dev4" pv_size $old_reduced
| [ 0:00] ## Line: 500 	 check pv_field "$dev5" pv_size $old_reduced
| [ 0:00] ## Line: 501 	 check pv_field "$dev6" pv_size $old_reduced
| [ 0:00] ## Line: 502 	 check pv_field "$dev7" pv_size $old_reduced
| [ 0:00] ## Line: 503 	 check pv_field "$dev8" pv_size $old_reduced
| [ 0:00] ## Line: 504 	 check pv_field "$dev9" pv_size $old_reduced
| [ 0:00] ## Line: 505 	 check pv_field "$dev14" pv_size $old_orphan
| [ 0:00] ## Line: 506 	 # reset back to old size
| [ 0:00] ## Line: 507 	 pvresize --setphysicalvolumesize $old_request -y "$dev10" "$dev2" "$dev3" "$dev4" "$dev5" "$dev6" "$dev7" "$dev8" "$dev9"
| [ 0:00] ## Line: 508 	 pvresize --setphysicalvolumesize $old_request -y "$dev11" "$dev14"
| [ 0:00] ## Line: 509 	 
| [ 0:00] ## Line: 510 	 # one orphan without mda
| [ 0:00] ## Line: 511 	 pvresize --setphysicalvolumesize $new_request -y "$dev14"
| [ 0:00] ## Line: 512 	 check pv_field "$dev14" pv_size $new_orphan
| [ 0:00] ## Line: 513 	 # unchanged
| [ 0:00] ## Line: 514 	 check pv_field "$dev10" pv_size $old_reduced
| [ 0:00] ## Line: 515 	 check pv_field "$dev2" pv_size $old_reduced
| [ 0:00] ## Line: 516 	 check pv_field "$dev3" pv_size $old_reduced
| [ 0:00] ## Line: 517 	 check pv_field "$dev4" pv_size $old_reduced
| [ 0:00] ## Line: 518 	 check pv_field "$dev5" pv_size $old_reduced
| [ 0:00] ## Line: 519 	 check pv_field "$dev6" pv_size $old_reduced
| [ 0:00] ## Line: 520 	 check pv_field "$dev7" pv_size $old_reduced
| [ 0:00] ## Line: 521 	 check pv_field "$dev8" pv_size $old_reduced
| [ 0:00] ## Line: 522 	 check pv_field "$dev9" pv_size $old_reduced
| [ 0:00] ## Line: 523 	 check pv_field "$dev11" pv_size $old_orphan
| [ 0:00] ## Line: 524 	 # reset back to old size
| [ 0:00] ## Line: 525 	 pvresize --setphysicalvolumesize $old_request -y "$dev10" "$dev2" "$dev3" "$dev4" "$dev5" "$dev6" "$dev7" "$dev8" "$dev9"
| [ 0:00] ## Line: 526 	 pvresize --setphysicalvolumesize $old_request -y "$dev11" "$dev14"
| [ 0:00] ## Line: 527 	 
| [ 0:00] ## Line: 528 	 # one orphan with mda and one orphan without mda
| [ 0:00] ## Line: 529 	 pvresize --setphysicalvolumesize $new_request -y "$dev14" "$dev11"
| [ 0:00] ## Line: 530 	 check pv_field "$dev11" pv_size $new_orphan
| [ 0:00] ## Line: 531 	 check pv_field "$dev14" pv_size $new_orphan
| [ 0:00] ## Line: 532 	 # unchanged
| [ 0:00] ## Line: 533 	 check pv_field "$dev10" pv_size $old_reduced
| [ 0:00] ## Line: 534 	 check pv_field "$dev2" pv_size $old_reduced
| [ 0:00] ## Line: 535 	 check pv_field "$dev3" pv_size $old_reduced
| [ 0:00] ## Line: 536 	 check pv_field "$dev4" pv_size $old_reduced
| [ 0:00] ## Line: 537 	 check pv_field "$dev5" pv_size $old_reduced
| [ 0:00] ## Line: 538 	 check pv_field "$dev6" pv_size $old_reduced
| [ 0:00] ## Line: 539 	 check pv_field "$dev7" pv_size $old_reduced
| [ 0:00] ## Line: 540 	 check pv_field "$dev8" pv_size $old_reduced
| [ 0:00] ## Line: 541 	 check pv_field "$dev9" pv_size $old_reduced
| [ 0:00] ## Line: 542 	 # reset back to old size
| [ 0:00] ## Line: 543 	 pvresize --setphysicalvolumesize $old_request -y "$dev10" "$dev2" "$dev3" "$dev4" "$dev5" "$dev6" "$dev7" "$dev8" "$dev9"
| [ 0:00] ## Line: 544 	 pvresize --setphysicalvolumesize $old_request -y "$dev11" "$dev14"
| [ 0:00] ## Line: 545 	 
| [ 0:00] ## Line: 546 	 # one pv with mda and one pv without mda, and
| [ 0:00] ## Line: 547 	 # one orphan with mda and one orphan without mda
| [ 0:00] ## Line: 548 	 pvresize --setphysicalvolumesize $new_request -y "$dev8" "$dev9" "$dev14" "$dev11"
| [ 0:00] ## Line: 549 	 check pv_field "$dev8" pv_size $new_reduced
| [ 0:00] ## Line: 550 	 check pv_field "$dev9" pv_size $new_reduced
| [ 0:00] ## Line: 551 	 check pv_field "$dev11" pv_size $new_orphan
| [ 0:00] ## Line: 552 	 check pv_field "$dev14" pv_size $new_orphan
| [ 0:00] ## Line: 553 	 # unchanged
| [ 0:00] ## Line: 554 	 check pv_field "$dev10" pv_size $old_reduced
| [ 0:00] ## Line: 555 	 check pv_field "$dev2" pv_size $old_reduced
| [ 0:00] ## Line: 556 	 check pv_field "$dev3" pv_size $old_reduced
| [ 0:00] ## Line: 557 	 check pv_field "$dev4" pv_size $old_reduced
| [ 0:00] ## Line: 558 	 check pv_field "$dev5" pv_size $old_reduced
| [ 0:00] ## Line: 559 	 check pv_field "$dev6" pv_size $old_reduced
| [ 0:00] ## Line: 560 	 check pv_field "$dev7" pv_size $old_reduced
| [ 0:00] ## Line: 561 	 # reset back to old size
| [ 0:00] ## Line: 562 	 pvresize --setphysicalvolumesize $old_request -y "$dev10" "$dev2" "$dev3" "$dev4" "$dev5" "$dev6" "$dev7" "$dev8" "$dev9"
| [ 0:00] ## Line: 563 	 pvresize --setphysicalvolumesize $old_request -y "$dev11" "$dev14"
| [ 0:00] aux teardown
| [ 0:00] #process-each-pvresize.sh:1+ aux teardown
| [ 0:00] ## teardown.........ok
###       failed: [ndev-vanilla] shell/process-each-pvresize.sh

| [ 0:00] Library version:   1.02.146 (2017-12-18)
| [ 0:00] Driver version:    4.35.0
| [ 0:00] Kernel is Linux localhost.localdomain 3.10.0-693.11.1.el7.x86_64 #1 SMP Mon Dec 4 23:52:40 UTC 2017 x86_64 GNU/Linux
| [ 0:00] Selinux mode is not installed.
| [ 0:00]               total        used        free      shared  buff/cache   available
| [ 0:00] Mem:           7822        1080        4144          10        2597        6435
| [ 0:00] Swap:          4095           0        4095
| [ 0:00] Filesystem      Size  Used Avail Use% Mounted on
| [ 0:00] /dev/sdc1        18G  8.4G  8.4G  50% /
| [ 0:00] /dev/sdd1        51G  6.1G   43G  13% /lfskernel
| [ 0:00] devtmpfs        3.9G     0  3.9G   0% /dev
| [ 0:00] tmpfs           3.9G     0  3.9G   0% /run
| [ 0:00] @TESTDIR=/tmp/LVMTEST14318.WULbJygCfg
| [ 0:00] @PREFIX=LVMTEST14318
| [ 0:00] ## LVMCONF: activation {
| [ 0:00] ## LVMCONF:     checks = 1
| [ 0:00] ## LVMCONF:     monitoring = 0
| [ 0:00] ## LVMCONF:     polling_interval = 1
| [ 0:00] ## LVMCONF:     raid_region_size = 512
| [ 0:00] ## LVMCONF:     retry_deactivation = 1
| [ 0:00] ## LVMCONF:     snapshot_autoextend_percent = 50
| [ 0:00] ## LVMCONF:     snapshot_autoextend_threshold = 50
| [ 0:00] ## LVMCONF:     udev_rules = 1
| [ 0:00] ## LVMCONF:     udev_sync = 1
| [ 0:00] ## LVMCONF:     verify_udev_operations = 1
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: allocation {
| [ 0:00] ## LVMCONF:     wipe_signatures_when_zeroing_new_lvs = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: backup {
| [ 0:00] ## LVMCONF:     archive = 0
| [ 0:00] ## LVMCONF:     backup = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: devices {
| [ 0:00] ## LVMCONF:     cache_dir = "@TESTDIR@/etc"
| [ 0:00] ## LVMCONF:     default_data_alignment = 1
| [ 0:00] ## LVMCONF:     dir = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     filter = "a|.*|"
| [ 0:00] ## LVMCONF:     global_filter = [ "a|@TESTDIR@/dev/mapper/@PREFIX@.*pv[0-9_]*$|", "r|.*|" ]
| [ 0:00] ## LVMCONF:     md_component_detection  = 0
| [ 0:00] ## LVMCONF:     scan = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     sysfs_scan = 1
| [ 0:00] ## LVMCONF:     write_cache_state = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: dmeventd {
| [ 0:00] ## LVMCONF:     executable = "/sources/boot/LVM2.2.02.177/test/lib/dmeventd"
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: global {
| [ 0:00] ## LVMCONF:     abort_on_internal_errors = 1
| [ 0:00] ## LVMCONF:     cache_check_executable = "/usr/sbin/cache_check"
| [ 0:00] ## LVMCONF:     cache_dump_executable = "/usr/sbin/cache_dump"
| [ 0:00] ## LVMCONF:     cache_repair_executable = "/usr/sbin/cache_repair"
| [ 0:00] ## LVMCONF:     detect_internal_vg_cache_corruption = 1
| [ 0:00] ## LVMCONF:     fallback_to_local_locking = 0
| [ 0:00] ## LVMCONF:     fsadm_executable = "/sources/boot/LVM2.2.02.177/test/lib/fsadm"
| [ 0:00] ## LVMCONF:     library_dir = "@TESTDIR@/lib"
| [ 0:00] ## LVMCONF:     locking_dir = "@TESTDIR@/var/lock/lvm"
| [ 0:00] ## LVMCONF:     locking_type=1
| [ 0:00] ## LVMCONF:     notify_dbus = 0
| [ 0:00] ## LVMCONF:     si_unit_consistency = 1
| [ 0:00] ## LVMCONF:     thin_check_executable = "/usr/sbin/thin_check"
| [ 0:00] ## LVMCONF:     thin_dump_executable = "/usr/sbin/thin_dump"
| [ 0:00] ## LVMCONF:     thin_repair_executable = "/usr/sbin/thin_repair"
| [ 0:00] ## LVMCONF:     use_lvmetad = 0
| [ 0:00] ## LVMCONF:     use_lvmlockd = 0
| [ 0:00] ## LVMCONF:     use_lvmpolld = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: log {
| [ 0:00] ## LVMCONF:     activation = 1
| [ 0:00] ## LVMCONF:     file = "@TESTDIR@/debug.log"
| [ 0:00] ## LVMCONF:     indent = 1
| [ 0:00] ## LVMCONF:     level = 9
| [ 0:00] ## LVMCONF:     overwrite = 1
| [ 0:00] ## LVMCONF:     syslog = 0
| [ 0:00] ## LVMCONF:     verbose = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] <======== Processing test: "process-each-vg.sh" ========>
| [ 0:00] 
| [ 0:00] aux prepare_devs 6
| [ 0:00] #process-each-vg.sh:19+ aux prepare_devs 6
| [ 0:00] ## preparing loop device....ok (/dev/loop0)
| [ 0:00] ## preparing 6 devices...lib/utils: line 212: DM_UDEV_COOKIE: unbound variable
| [ 0:00] set +vx; STACKTRACE; set -vx
| [ 0:00] ##process-each-vg.sh:19+ set +vx
| [ 0:00] ## - /lfskernel/sources/boot/LVM2.2.02.177/test/shell/process-each-vg.sh:19
| [ 0:00] ## 1 STACKTRACE() called from /lfskernel/sources/boot/LVM2.2.02.177/test/shell/process-each-vg.sh:19
| [ 0:00] <======== Info ========>
| [ 0:00] ## DMINFO:   Name             Maj Min Stat Open Targ Event  UUID                                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv6  253   7 L--w    0    1      0 TEST-@PREFIX@pv6                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv5  253   3 L--w    0    1      0 TEST-@PREFIX@pv5                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv4  253   5 L--w    0    1      0 TEST-@PREFIX@pv4                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv3  253   4 L--w    0    1      0 TEST-@PREFIX@pv3                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv2  253   8 L--w    0    1      0 TEST-@PREFIX@pv2                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv1  253   6 L--w    0    1      0 TEST-@PREFIX@pv1                                                
| [ 0:00] <======== Active table ========>
| [ 0:00] ## DMTABLE:  @PREFIX@pv6: 0 69632 linear 7:0 350208
| [ 0:00] ## DMTABLE:  @PREFIX@pv5: 0 69632 linear 7:0 280576
| [ 0:00] ## DMTABLE:  @PREFIX@pv4: 0 69632 linear 7:0 210944
| [ 0:00] ## DMTABLE:  @PREFIX@pv3: 0 69632 linear 7:0 141312
| [ 0:00] ## DMTABLE:  @PREFIX@pv2: 0 69632 linear 7:0 71680
| [ 0:00] ## DMTABLE:  @PREFIX@pv1: 0 69632 linear 7:0 2048
| [ 0:00] <======== Inactive table ========>
| [ 0:00] ## DMITABLE: @PREFIX@pv6: 
| [ 0:00] ## DMITABLE: @PREFIX@pv5: 
| [ 0:00] ## DMITABLE: @PREFIX@pv4: 
| [ 0:00] ## DMITABLE: @PREFIX@pv3: 
| [ 0:00] ## DMITABLE: @PREFIX@pv2: 
| [ 0:00] ## DMITABLE: @PREFIX@pv1: 
| [ 0:00] <======== Status ========>
| [ 0:00] ## DMSTATUS: @PREFIX@pv6: 0 69632 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv5: 0 69632 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv4: 0 69632 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv3: 0 69632 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv2: 0 69632 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv1: 0 69632 linear 
| [ 0:00] <======== Tree ========>
| [ 0:00] ## DMTREE:   @PREFIX@pv6 (253:7)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   @PREFIX@pv5 (253:3)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   @PREFIX@pv4 (253:5)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   @PREFIX@pv3 (253:4)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   @PREFIX@pv2 (253:8)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   @PREFIX@pv1 (253:6)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   LFS_vg-lfs (253:2)
| [ 0:00] ## DMTREE:    `- (8:16)
| [ 0:00] ## DMTREE:   centos-swap (253:1)
| [ 0:00] ## DMTREE:    `- (8:2)
| [ 0:00] ## DMTREE:   centos-root (253:0)
| [ 0:00] ## DMTREE:    `- (8:2)
| [ 0:00] <======== Recursive list of @TESTDIR@/dev ========>
| [ 0:00] ## LSLR:	@TESTDIR@/dev:
| [ 0:00] ## LSLR:	total 4
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 0 Feb 21 02:27 loop0
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 1 Feb 21 02:27 loop1
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 2 Feb 21 02:27 loop2
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 3 Feb 21 02:27 loop3
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 4 Feb 21 02:27 loop4
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 5 Feb 21 02:27 loop5
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 6 Feb 21 02:27 loop6
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 7 Feb 21 02:27 loop7
| [ 0:00] ## LSLR:	drwxr-xr-x 2 root root 4096 Feb 21 02:27 mapper
| [ 0:00] ## LSLR:	crw-r--r-- 1 root root 1, 3 Feb 21 02:27 testnull
| [ 0:00] ## LSLR:	
| [ 0:00] ## LSLR:	@TESTDIR@/dev/mapper:
| [ 0:00] ## LSLR:	total 0
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   6 Feb 21 02:27 @PREFIX@pv1
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   8 Feb 21 02:27 @PREFIX@pv2
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   4 Feb 21 02:27 @PREFIX@pv3
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   5 Feb 21 02:27 @PREFIX@pv4
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   3 Feb 21 02:27 @PREFIX@pv5
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   7 Feb 21 02:27 @PREFIX@pv6
| [ 0:00] ## LSLR:	crw------- 1 root root  10, 236 Feb 21 02:27 control
| [ 0:00] <======== Udev DB content ========>
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-0
| [ 0:00] ## UDEV:	N: dm-0
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-0
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-0
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=0
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-1
| [ 0:00] ## UDEV:	N: dm-1
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-1
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-1
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=1
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-2
| [ 0:00] ## UDEV:	N: dm-2
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-2
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-2
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=2
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-3
| [ 0:00] ## UDEV:	N: dm-3
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-3
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-3
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=3
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-4
| [ 0:00] ## UDEV:	N: dm-4
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-4
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-4
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=4
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-5
| [ 0:00] ## UDEV:	N: dm-5
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-5
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-5
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=5
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-6
| [ 0:00] ## UDEV:	N: dm-6
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-6
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-6
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=6
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-7
| [ 0:00] ## UDEV:	N: dm-7
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-7
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-7
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=7
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-8
| [ 0:00] ## UDEV:	N: dm-8
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-8
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-8
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=8
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/loop0
| [ 0:00] ## UDEV:	N: loop0
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/loop0
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/loop0
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=7
| [ 0:00] ## UDEV:	E: MINOR=0
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] <======== Script file "process-each-vg.sh" ========>
| [ 0:00] ## Line: 1 	 #!/usr/bin/env bash
| [ 0:00] ## Line: 2 	 
| [ 0:00] ## Line: 3 	 # Copyright (C) 2008-2013 Red Hat, Inc. All rights reserved.
| [ 0:00] ## Line: 4 	 #
| [ 0:00] ## Line: 5 	 # This copyrighted material is made available to anyone wishing to use,
| [ 0:00] ## Line: 6 	 # modify, copy, or redistribute it subject to the terms and conditions
| [ 0:00] ## Line: 7 	 # of the GNU General Public License v.2.
| [ 0:00] ## Line: 8 	 #
| [ 0:00] ## Line: 9 	 # You should have received a copy of the GNU General Public License
| [ 0:00] ## Line: 10 	 # along with this program; if not, write to the Free Software Foundation,
| [ 0:00] ## Line: 11 	 # Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA
| [ 0:00] ## Line: 12 	 
| [ 0:00] ## Line: 13 	 test_description='Exercise toollib process_each_vg'
| [ 0:00] ## Line: 14 	 
| [ 0:00] ## Line: 15 	 SKIP_WITH_LVMPOLLD=1
| [ 0:00] ## Line: 16 	 
| [ 0:00] ## Line: 17 	 . lib/inittest
| [ 0:00] ## Line: 18 	 
| [ 0:00] ## Line: 19 	 aux prepare_devs 6
| [ 0:00] ## Line: 20 	 
| [ 0:00] ## Line: 21 	 #
| [ 0:00] ## Line: 22 	 # process_each_vg is used by a number of vg commands;
| [ 0:00] ## Line: 23 	 # use 'vgremove' and 'vgs' to test it.
| [ 0:00] ## Line: 24 	 #
| [ 0:00] ## Line: 25 	 # The logic in process_each_vg is mainly related to
| [ 0:00] ## Line: 26 	 # selecting which vg's to process.
| [ 0:00] ## Line: 27 	 #
| [ 0:00] ## Line: 28 	 
| [ 0:00] ## Line: 29 	 #
| [ 0:00] ## Line: 30 	 # set up four vgs that we will remove
| [ 0:00] ## Line: 31 	 #
| [ 0:00] ## Line: 32 	 vgcreate $SHARED $vg1 "$dev1"
| [ 0:00] ## Line: 33 	 vgcreate $SHARED $vg2 "$dev2"
| [ 0:00] ## Line: 34 	 vgcreate $SHARED $vg3 "$dev3"
| [ 0:00] ## Line: 35 	 vgcreate $SHARED $vg4 "$dev4"
| [ 0:00] ## Line: 36 	 
| [ 0:00] ## Line: 37 	 # these two vgs will not be removed
| [ 0:00] ## Line: 38 	 vgcreate $SHARED $vg5 "$dev5"
| [ 0:00] ## Line: 39 	 vgchange --addtag tagvg5 $vg5
| [ 0:00] ## Line: 40 	 lvcreate -l 4 -n $lv1 $vg5
| [ 0:00] ## Line: 41 	 vgcreate $SHARED $vg6 "$dev6"
| [ 0:00] ## Line: 42 	 lvcreate -l 4 -n $lv2 $vg6
| [ 0:00] ## Line: 43 	 
| [ 0:00] ## Line: 44 	 # should fail without any arg
| [ 0:00] ## Line: 45 	 not vgremove
| [ 0:00] ## Line: 46 	 
| [ 0:00] ## Line: 47 	 # should succeed
| [ 0:00] ## Line: 48 	 vgremove $vg1
| [ 0:00] ## Line: 49 	 vgremove $vg2 $vg3 $vg4
| [ 0:00] ## Line: 50 	 
| [ 0:00] ## Line: 51 	 # these should fail because they are already removed
| [ 0:00] ## Line: 52 	 not vgremove $vg1
| [ 0:00] ## Line: 53 	 not vgremove $vg2
| [ 0:00] ## Line: 54 	 not vgremove $vg3
| [ 0:00] ## Line: 55 	 not vgremove $vg4
| [ 0:00] ## Line: 56 	 
| [ 0:00] ## Line: 57 	 # these should fail because they have lvs in them
| [ 0:00] ## Line: 58 	 not vgremove $vg5
| [ 0:00] ## Line: 59 	 not vgremove $vg6
| [ 0:00] ## Line: 60 	 
| [ 0:00] ## Line: 61 	 # check that the vgs we removed are gone
| [ 0:00] ## Line: 62 	 not vgs $vg1
| [ 0:00] ## Line: 63 	 not vgs $vg2
| [ 0:00] ## Line: 64 	 not vgs $vg3
| [ 0:00] ## Line: 65 	 not vgs $vg4
| [ 0:00] ## Line: 66 	 
| [ 0:00] ## Line: 67 	 
| [ 0:00] ## Line: 68 	 #
| [ 0:00] ## Line: 69 	 # set up four vgs that we will remove
| [ 0:00] ## Line: 70 	 #
| [ 0:00] ## Line: 71 	 vgcreate $SHARED --addtag tagfoo $vg1 "$dev1"
| [ 0:00] ## Line: 72 	 vgcreate $SHARED --addtag tagfoo $vg2 "$dev2"
| [ 0:00] ## Line: 73 	 vgcreate $SHARED --addtag tagfoo2 $vg3 "$dev3"
| [ 0:00] ## Line: 74 	 vgcreate $SHARED --addtag tagbar $vg4 "$dev4"
| [ 0:00] ## Line: 75 	 vgchange --addtag foo $vg4
| [ 0:00] ## Line: 76 	 
| [ 0:00] ## Line: 77 	 # should do nothing and fail
| [ 0:00] ## Line: 78 	 not vgremove garbage
| [ 0:00] ## Line: 79 	 
| [ 0:00] ## Line: 80 	 # should find nothing to remove
| [ 0:00] ## Line: 81 	 vgremove @garbage
| [ 0:00] ## Line: 82 	 
| [ 0:00] ## Line: 83 	 # should find nothing to remove
| [ 0:00] ## Line: 84 	 vgremove @$vg1
| [ 0:00] ## Line: 85 	 
| [ 0:00] ## Line: 86 	 # should succeed
| [ 0:00] ## Line: 87 	 vgremove $vg1
| [ 0:00] ## Line: 88 	 not vgs $vg1
| [ 0:00] ## Line: 89 	 
| [ 0:00] ## Line: 90 	 vgremove $vg2 $vg3 $vg4
| [ 0:00] ## Line: 91 	 not vgs $vg2
| [ 0:00] ## Line: 92 	 not vgs $vg3
| [ 0:00] ## Line: 93 	 not vgs $vg4
| [ 0:00] ## Line: 94 	 
| [ 0:00] ## Line: 95 	 
| [ 0:00] ## Line: 96 	 #
| [ 0:00] ## Line: 97 	 # set up four vgs that we will remove
| [ 0:00] ## Line: 98 	 #
| [ 0:00] ## Line: 99 	 vgcreate $SHARED --addtag tagfoo $vg1 "$dev1"
| [ 0:00] ## Line: 100 	 vgcreate $SHARED --addtag tagfoo $vg2 "$dev2"
| [ 0:00] ## Line: 101 	 vgcreate $SHARED --addtag tagfoo2 $vg3 "$dev3"
| [ 0:00] ## Line: 102 	 vgcreate $SHARED --addtag tagbar $vg4 "$dev4"
| [ 0:00] ## Line: 103 	 vgchange --addtag foo $vg4
| [ 0:00] ## Line: 104 	 
| [ 0:00] ## Line: 105 	 vgremove @tagfoo
| [ 0:00] ## Line: 106 	 not vgs $vg1
| [ 0:00] ## Line: 107 	 not vgs $vg2
| [ 0:00] ## Line: 108 	 
| [ 0:00] ## Line: 109 	 vgremove @tagfoo2 @tagbar
| [ 0:00] ## Line: 110 	 not vgs $vg3
| [ 0:00] ## Line: 111 	 not vgs $vg4
| [ 0:00] ## Line: 112 	 
| [ 0:00] ## Line: 113 	 
| [ 0:00] ## Line: 114 	 #
| [ 0:00] ## Line: 115 	 # set up four vgs that we will remove
| [ 0:00] ## Line: 116 	 #
| [ 0:00] ## Line: 117 	 vgcreate $SHARED --addtag tagfoo $vg1 "$dev1"
| [ 0:00] ## Line: 118 	 vgcreate $SHARED --addtag tagfoo $vg2 "$dev2"
| [ 0:00] ## Line: 119 	 vgcreate $SHARED --addtag tagfoo2 $vg3 "$dev3"
| [ 0:00] ## Line: 120 	 vgcreate $SHARED --addtag tagbar $vg4 "$dev4"
| [ 0:00] ## Line: 121 	 vgchange --addtag foo $vg4
| [ 0:00] ## Line: 122 	 
| [ 0:00] ## Line: 123 	 vgremove $vg1 @tagfoo2
| [ 0:00] ## Line: 124 	 not vgs $vg1
| [ 0:00] ## Line: 125 	 not vgs $vg3
| [ 0:00] ## Line: 126 	 
| [ 0:00] ## Line: 127 	 vgremove @tagbar $vg2
| [ 0:00] ## Line: 128 	 not vgs $vg2
| [ 0:00] ## Line: 129 	 not vgs $vg4
| [ 0:00] ## Line: 130 	 
| [ 0:00] ## Line: 131 	 
| [ 0:00] ## Line: 132 	 #
| [ 0:00] ## Line: 133 	 # set up four vgs that we will remove
| [ 0:00] ## Line: 134 	 #
| [ 0:00] ## Line: 135 	 vgcreate $SHARED --addtag tagfoo $vg1 "$dev1"
| [ 0:00] ## Line: 136 	 vgcreate $SHARED --addtag tagfoo $vg2 "$dev2"
| [ 0:00] ## Line: 137 	 vgcreate $SHARED --addtag tagfoo2 $vg3 "$dev3"
| [ 0:00] ## Line: 138 	 vgcreate $SHARED --addtag tagbar $vg4 "$dev4"
| [ 0:00] ## Line: 139 	 vgchange --addtag foo $vg4
| [ 0:00] ## Line: 140 	 
| [ 0:00] ## Line: 141 	 vgremove @foo @tagfoo2 $vg1 $vg2
| [ 0:00] ## Line: 142 	 not vgs $vg1
| [ 0:00] ## Line: 143 	 not vgs $vg2
| [ 0:00] ## Line: 144 	 not vgs $vg3
| [ 0:00] ## Line: 145 	 not vgs $vg4
| [ 0:00] ## Line: 146 	 
| [ 0:00] ## Line: 147 	 
| [ 0:00] ## Line: 148 	 #
| [ 0:00] ## Line: 149 	 # set up four vgs that we will remove
| [ 0:00] ## Line: 150 	 #
| [ 0:00] ## Line: 151 	 vgcreate $SHARED --addtag tagfoo $vg1 "$dev1"
| [ 0:00] ## Line: 152 	 vgcreate $SHARED --addtag tagfoo $vg2 "$dev2"
| [ 0:00] ## Line: 153 	 vgcreate $SHARED --addtag tagfoo2 $vg3 "$dev3"
| [ 0:00] ## Line: 154 	 vgcreate $SHARED --addtag tagbar $vg4 "$dev4"
| [ 0:00] ## Line: 155 	 vgchange --addtag foo $vg4
| [ 0:00] ## Line: 156 	 
| [ 0:00] ## Line: 157 	 vgremove @tagfoo $vg1 @tagfoo @tagfoo2 $vg3 @tagbar
| [ 0:00] ## Line: 158 	 not vgs $vg1
| [ 0:00] ## Line: 159 	 not vgs $vg2
| [ 0:00] ## Line: 160 	 not vgs $vg3
| [ 0:00] ## Line: 161 	 not vgs $vg4
| [ 0:00] ## Line: 162 	 
| [ 0:00] ## Line: 163 	 
| [ 0:00] ## Line: 164 	 #
| [ 0:00] ## Line: 165 	 # set up four vgs that we will remove
| [ 0:00] ## Line: 166 	 #
| [ 0:00] ## Line: 167 	 vgcreate $SHARED --addtag tagfoo $vg1 "$dev1"
| [ 0:00] ## Line: 168 	 vgcreate $SHARED --addtag tagfoo $vg2 "$dev2"
| [ 0:00] ## Line: 169 	 vgcreate $SHARED --addtag tagfoo2 $vg3 "$dev3"
| [ 0:00] ## Line: 170 	 vgcreate $SHARED --addtag tagbar $vg4 "$dev4"
| [ 0:00] ## Line: 171 	 vgchange --addtag foo $vg4
| [ 0:00] ## Line: 172 	 
| [ 0:00] ## Line: 173 	 not vgremove garbage $vg1
| [ 0:00] ## Line: 174 	 not vgs $vg1
| [ 0:00] ## Line: 175 	 
| [ 0:00] ## Line: 176 	 not vgremove $vg2 garbage
| [ 0:00] ## Line: 177 	 not vgs $vg2
| [ 0:00] ## Line: 178 	 
| [ 0:00] ## Line: 179 	 vgremove $vg3 @garbage
| [ 0:00] ## Line: 180 	 not vgs $vg3
| [ 0:00] ## Line: 181 	 
| [ 0:00] ## Line: 182 	 vgremove @garbage $vg4
| [ 0:00] ## Line: 183 	 not vgs $vg4
| [ 0:00] ## Line: 184 	 
| [ 0:00] ## Line: 185 	 
| [ 0:00] ## Line: 186 	 #
| [ 0:00] ## Line: 187 	 # end vgremove tests
| [ 0:00] ## Line: 188 	 # check that the two vgs we did not intend to remove
| [ 0:00] ## Line: 189 	 # are still there, and then remove them
| [ 0:00] ## Line: 190 	 #
| [ 0:00] ## Line: 191 	 vgs $vg5
| [ 0:00] ## Line: 192 	 vgs $vg6
| [ 0:00] ## Line: 193 	 vgremove -f $vg5
| [ 0:00] ## Line: 194 	 vgremove -f $vg6
| [ 0:00] ## Line: 195 	 not vgs $vg5
| [ 0:00] ## Line: 196 	 not vgs $vg6
| [ 0:00] ## Line: 197 	 
| [ 0:00] ## Line: 198 	 
| [ 0:00] ## Line: 199 	 #
| [ 0:00] ## Line: 200 	 # set up four vgs that we will report
| [ 0:00] ## Line: 201 	 #
| [ 0:00] ## Line: 202 	 vgcreate $SHARED --addtag tagfoo $vg1 "$dev1"
| [ 0:00] ## Line: 203 	 vgcreate $SHARED --addtag tagfoo $vg2 "$dev2"
| [ 0:00] ## Line: 204 	 vgcreate $SHARED --addtag tagfoo2 $vg3 "$dev3"
| [ 0:00] ## Line: 205 	 vgcreate $SHARED --addtag tagbar $vg4 "$dev4"
| [ 0:00] ## Line: 206 	 vgchange --addtag foo $vg4
| [ 0:00] ## Line: 207 	 
| [ 0:00] ## Line: 208 	 vgs >err
| [ 0:00] ## Line: 209 	 grep $vg1 err
| [ 0:00] ## Line: 210 	 grep $vg2 err
| [ 0:00] ## Line: 211 	 grep $vg3 err
| [ 0:00] ## Line: 212 	 grep $vg4 err
| [ 0:00] ## Line: 213 	 
| [ 0:00] ## Line: 214 	 vgs $vg1 $vg2 >err
| [ 0:00] ## Line: 215 	 grep $vg1 err
| [ 0:00] ## Line: 216 	 grep $vg2 err
| [ 0:00] ## Line: 217 	 not grep $vg3 err
| [ 0:00] ## Line: 218 	 not grep $vg4 err
| [ 0:00] ## Line: 219 	 
| [ 0:00] ## Line: 220 	 vgs @tagfoo >err
| [ 0:00] ## Line: 221 	 grep $vg1 err
| [ 0:00] ## Line: 222 	 grep $vg2 err
| [ 0:00] ## Line: 223 	 not grep $vg3 err
| [ 0:00] ## Line: 224 	 not grep $vg4 err
| [ 0:00] ## Line: 225 	 
| [ 0:00] ## Line: 226 	 vgs @tagfoo2 >err
| [ 0:00] ## Line: 227 	 grep $vg3 err
| [ 0:00] ## Line: 228 	 not grep $vg1 err
| [ 0:00] ## Line: 229 	 not grep $vg2 err
| [ 0:00] ## Line: 230 	 not grep $vg4 err
| [ 0:00] ## Line: 231 	 
| [ 0:00] ## Line: 232 	 vgs @tagfoo2 @tagbar >err
| [ 0:00] ## Line: 233 	 grep $vg3 err
| [ 0:00] ## Line: 234 	 grep $vg4 err
| [ 0:00] ## Line: 235 	 not grep $vg1 err
| [ 0:00] ## Line: 236 	 not grep $vg2 err
| [ 0:00] ## Line: 237 	 
| [ 0:00] ## Line: 238 	 vgs $vg1 @tagbar >err
| [ 0:00] ## Line: 239 	 grep $vg1 err
| [ 0:00] ## Line: 240 	 grep $vg4 err
| [ 0:00] ## Line: 241 	 not grep $vg2 err
| [ 0:00] ## Line: 242 	 not grep $vg3 err
| [ 0:00] ## Line: 243 	 
| [ 0:00] ## Line: 244 	 vgs $vg1 @tagfoo >err
| [ 0:00] ## Line: 245 	 grep $vg1 err
| [ 0:00] ## Line: 246 	 grep $vg2 err
| [ 0:00] ## Line: 247 	 not grep $vg3 err
| [ 0:00] ## Line: 248 	 not grep $vg4 err
| [ 0:00] ## Line: 249 	 
| [ 0:00] ## Line: 250 	 not vgs garbage >err
| [ 0:00] ## Line: 251 	 not grep $vg1 err
| [ 0:00] ## Line: 252 	 not grep $vg2 err
| [ 0:00] ## Line: 253 	 not grep $vg3 err
| [ 0:00] ## Line: 254 	 not grep $vg4 err
| [ 0:00] ## Line: 255 	 
| [ 0:00] ## Line: 256 	 not vgs garbage $vg1 >err
| [ 0:00] ## Line: 257 	 grep $vg1 err
| [ 0:00] ## Line: 258 	 not grep $vg2 err
| [ 0:00] ## Line: 259 	 not grep $vg3 err
| [ 0:00] ## Line: 260 	 not grep $vg4 err
| [ 0:00] ## Line: 261 	 
| [ 0:00] ## Line: 262 	 vgs @garbage @foo >err
| [ 0:00] ## Line: 263 	 grep $vg4 err
| [ 0:00] ## Line: 264 	 not grep $vg1 err
| [ 0:00] ## Line: 265 	 not grep $vg2 err
| [ 0:00] ## Line: 266 	 not grep $vg3 err
| [ 0:00] ## Line: 267 	 
| [ 0:00] ## Line: 268 	 vgremove -f $vg1 $vg2 $vg3 $vg4
| [ 0:00] ## Line: 269 	 
| [ 0:00] aux teardown
| [ 0:00] #process-each-vg.sh:1+ aux teardown
| [ 0:00] ## teardown.........ok
###       failed: [ndev-vanilla] shell/process-each-vg.sh

| [ 0:00] Library version:   1.02.146 (2017-12-18)
| [ 0:00] Driver version:    4.35.0
| [ 0:00] Kernel is Linux localhost.localdomain 3.10.0-693.11.1.el7.x86_64 #1 SMP Mon Dec 4 23:52:40 UTC 2017 x86_64 GNU/Linux
| [ 0:00] Selinux mode is not installed.
| [ 0:00]               total        used        free      shared  buff/cache   available
| [ 0:00] Mem:           7822        1080        4144          10        2597        6435
| [ 0:00] Swap:          4095           0        4095
| [ 0:00] Filesystem      Size  Used Avail Use% Mounted on
| [ 0:00] /dev/sdc1        18G  8.4G  8.4G  50% /
| [ 0:00] /dev/sdd1        51G  6.1G   43G  13% /lfskernel
| [ 0:00] devtmpfs        3.9G     0  3.9G   0% /dev
| [ 0:00] tmpfs           3.9G     0  3.9G   0% /run
| [ 0:00] @TESTDIR=/tmp/LVMTEST14534.BwYhcfEji9
| [ 0:00] @PREFIX=LVMTEST14534
| [ 0:00] ## LVMCONF: activation {
| [ 0:00] ## LVMCONF:     checks = 1
| [ 0:00] ## LVMCONF:     monitoring = 0
| [ 0:00] ## LVMCONF:     polling_interval = 1
| [ 0:00] ## LVMCONF:     raid_region_size = 512
| [ 0:00] ## LVMCONF:     retry_deactivation = 1
| [ 0:00] ## LVMCONF:     snapshot_autoextend_percent = 50
| [ 0:00] ## LVMCONF:     snapshot_autoextend_threshold = 50
| [ 0:00] ## LVMCONF:     udev_rules = 1
| [ 0:00] ## LVMCONF:     udev_sync = 1
| [ 0:00] ## LVMCONF:     verify_udev_operations = 1
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: allocation {
| [ 0:00] ## LVMCONF:     wipe_signatures_when_zeroing_new_lvs = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: backup {
| [ 0:00] ## LVMCONF:     archive = 0
| [ 0:00] ## LVMCONF:     backup = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: devices {
| [ 0:00] ## LVMCONF:     cache_dir = "@TESTDIR@/etc"
| [ 0:00] ## LVMCONF:     default_data_alignment = 1
| [ 0:00] ## LVMCONF:     dir = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     filter = "a|.*|"
| [ 0:00] ## LVMCONF:     global_filter = [ "a|@TESTDIR@/dev/mapper/@PREFIX@.*pv[0-9_]*$|", "r|.*|" ]
| [ 0:00] ## LVMCONF:     md_component_detection  = 0
| [ 0:00] ## LVMCONF:     scan = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     sysfs_scan = 1
| [ 0:00] ## LVMCONF:     write_cache_state = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: dmeventd {
| [ 0:00] ## LVMCONF:     executable = "/sources/boot/LVM2.2.02.177/test/lib/dmeventd"
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: global {
| [ 0:00] ## LVMCONF:     abort_on_internal_errors = 1
| [ 0:00] ## LVMCONF:     cache_check_executable = "/usr/sbin/cache_check"
| [ 0:00] ## LVMCONF:     cache_dump_executable = "/usr/sbin/cache_dump"
| [ 0:00] ## LVMCONF:     cache_repair_executable = "/usr/sbin/cache_repair"
| [ 0:00] ## LVMCONF:     detect_internal_vg_cache_corruption = 1
| [ 0:00] ## LVMCONF:     fallback_to_local_locking = 0
| [ 0:00] ## LVMCONF:     fsadm_executable = "/sources/boot/LVM2.2.02.177/test/lib/fsadm"
| [ 0:00] ## LVMCONF:     library_dir = "@TESTDIR@/lib"
| [ 0:00] ## LVMCONF:     locking_dir = "@TESTDIR@/var/lock/lvm"
| [ 0:00] ## LVMCONF:     locking_type=1
| [ 0:00] ## LVMCONF:     notify_dbus = 0
| [ 0:00] ## LVMCONF:     si_unit_consistency = 1
| [ 0:00] ## LVMCONF:     thin_check_executable = "/usr/sbin/thin_check"
| [ 0:00] ## LVMCONF:     thin_dump_executable = "/usr/sbin/thin_dump"
| [ 0:00] ## LVMCONF:     thin_repair_executable = "/usr/sbin/thin_repair"
| [ 0:00] ## LVMCONF:     use_lvmetad = 0
| [ 0:00] ## LVMCONF:     use_lvmlockd = 0
| [ 0:00] ## LVMCONF:     use_lvmpolld = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: log {
| [ 0:00] ## LVMCONF:     activation = 1
| [ 0:00] ## LVMCONF:     file = "@TESTDIR@/debug.log"
| [ 0:00] ## LVMCONF:     indent = 1
| [ 0:00] ## LVMCONF:     level = 9
| [ 0:00] ## LVMCONF:     overwrite = 1
| [ 0:00] ## LVMCONF:     syslog = 0
| [ 0:00] ## LVMCONF:     verbose = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] <======== Processing test: "process-each-vgreduce.sh" ========>
| [ 0:00] 
| [ 0:00] aux prepare_devs 14
| [ 0:00] #process-each-vgreduce.sh:20+ aux prepare_devs 14
| [ 0:00] ## preparing loop device....ok (/dev/loop0)
| [ 0:00] ## preparing 14 devices...lib/utils: line 212: DM_UDEV_COOKIE: unbound variable
| [ 0:00] set +vx; STACKTRACE; set -vx
| [ 0:00] ##process-each-vgreduce.sh:20+ set +vx
| [ 0:00] ## - /lfskernel/sources/boot/LVM2.2.02.177/test/shell/process-each-vgreduce.sh:20
| [ 0:00] ## 1 STACKTRACE() called from /lfskernel/sources/boot/LVM2.2.02.177/test/shell/process-each-vgreduce.sh:20
| [ 0:00] <======== Info ========>
| [ 0:00] ## DMINFO:   Name             Maj Min Stat Open Targ Event  UUID                                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv10 253   4 L--w    0    1      0 TEST-@PREFIX@pv10                                               
| [ 0:00] ## DMINFO:   @PREFIX@pv1  253  16 L--w    0    1      0 TEST-@PREFIX@pv1                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv9  253  13 L--w    0    1      0 TEST-@PREFIX@pv9                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv8  253  12 L--w    0    1      0 TEST-@PREFIX@pv8                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv7  253   9 L--w    0    1      0 TEST-@PREFIX@pv7                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv6  253   8 L--w    0    1      0 TEST-@PREFIX@pv6                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv14 253   3 L--w    0    1      0 TEST-@PREFIX@pv14                                               
| [ 0:00] ## DMINFO:   @PREFIX@pv5  253   6 L--w    0    1      0 TEST-@PREFIX@pv5                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv13 253   7 L--w    0    1      0 TEST-@PREFIX@pv13                                               
| [ 0:00] ## DMINFO:   @PREFIX@pv4  253   5 L--w    0    1      0 TEST-@PREFIX@pv4                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv12 253  14 L--w    0    1      0 TEST-@PREFIX@pv12                                               
| [ 0:00] ## DMINFO:   @PREFIX@pv3  253  11 L--w    0    1      0 TEST-@PREFIX@pv3                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv11 253  15 L--w    0    1      0 TEST-@PREFIX@pv11                                               
| [ 0:00] ## DMINFO:   @PREFIX@pv2  253  10 L--w    0    1      0 TEST-@PREFIX@pv2                                                
| [ 0:00] <======== Active table ========>
| [ 0:00] ## DMTABLE:  @PREFIX@pv10: 0 69632 linear 7:0 628736
| [ 0:00] ## DMTABLE:  @PREFIX@pv1: 0 69632 linear 7:0 2048
| [ 0:00] ## DMTABLE:  @PREFIX@pv9: 0 69632 linear 7:0 559104
| [ 0:00] ## DMTABLE:  @PREFIX@pv8: 0 69632 linear 7:0 489472
| [ 0:00] ## DMTABLE:  @PREFIX@pv7: 0 69632 linear 7:0 419840
| [ 0:00] ## DMTABLE:  @PREFIX@pv6: 0 69632 linear 7:0 350208
| [ 0:00] ## DMTABLE:  @PREFIX@pv14: 0 69632 linear 7:0 907264
| [ 0:00] ## DMTABLE:  @PREFIX@pv5: 0 69632 linear 7:0 280576
| [ 0:00] ## DMTABLE:  @PREFIX@pv13: 0 69632 linear 7:0 837632
| [ 0:00] ## DMTABLE:  @PREFIX@pv4: 0 69632 linear 7:0 210944
| [ 0:00] ## DMTABLE:  @PREFIX@pv12: 0 69632 linear 7:0 768000
| [ 0:00] ## DMTABLE:  @PREFIX@pv3: 0 69632 linear 7:0 141312
| [ 0:00] ## DMTABLE:  @PREFIX@pv11: 0 69632 linear 7:0 698368
| [ 0:00] ## DMTABLE:  @PREFIX@pv2: 0 69632 linear 7:0 71680
| [ 0:00] <======== Inactive table ========>
| [ 0:00] ## DMITABLE: @PREFIX@pv10: 
| [ 0:00] ## DMITABLE: @PREFIX@pv1: 
| [ 0:00] ## DMITABLE: @PREFIX@pv9: 
| [ 0:00] ## DMITABLE: @PREFIX@pv8: 
| [ 0:00] ## DMITABLE: @PREFIX@pv7: 
| [ 0:00] ## DMITABLE: @PREFIX@pv6: 
| [ 0:00] ## DMITABLE: @PREFIX@pv14: 
| [ 0:00] ## DMITABLE: @PREFIX@pv5: 
| [ 0:00] ## DMITABLE: @PREFIX@pv13: 
| [ 0:00] ## DMITABLE: @PREFIX@pv4: 
| [ 0:00] ## DMITABLE: @PREFIX@pv12: 
| [ 0:00] ## DMITABLE: @PREFIX@pv3: 
| [ 0:00] ## DMITABLE: @PREFIX@pv11: 
| [ 0:00] ## DMITABLE: @PREFIX@pv2: 
| [ 0:00] <======== Status ========>
| [ 0:00] ## DMSTATUS: @PREFIX@pv10: 0 69632 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv1: 0 69632 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv9: 0 69632 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv8: 0 69632 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv7: 0 69632 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv6: 0 69632 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv14: 0 69632 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv5: 0 69632 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv13: 0 69632 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv4: 0 69632 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv12: 0 69632 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv3: 0 69632 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv11: 0 69632 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv2: 0 69632 linear 
| [ 0:00] <======== Tree ========>
| [ 0:00] ## DMTREE:   @PREFIX@pv10 (253:4)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   @PREFIX@pv1 (253:16)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   @PREFIX@pv9 (253:13)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   @PREFIX@pv8 (253:12)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   @PREFIX@pv7 (253:9)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   @PREFIX@pv6 (253:8)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   @PREFIX@pv14 (253:3)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   @PREFIX@pv5 (253:6)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   @PREFIX@pv13 (253:7)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   @PREFIX@pv4 (253:5)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   @PREFIX@pv12 (253:14)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   @PREFIX@pv3 (253:11)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   LFS_vg-lfs (253:2)
| [ 0:00] ## DMTREE:    `- (8:16)
| [ 0:00] ## DMTREE:   @PREFIX@pv11 (253:15)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   centos-swap (253:1)
| [ 0:00] ## DMTREE:    `- (8:2)
| [ 0:00] ## DMTREE:   centos-root (253:0)
| [ 0:00] ## DMTREE:    `- (8:2)
| [ 0:00] ## DMTREE:   @PREFIX@pv2 (253:10)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] <======== Recursive list of @TESTDIR@/dev ========>
| [ 0:00] ## LSLR:	@TESTDIR@/dev:
| [ 0:00] ## LSLR:	total 4
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 0 Feb 21 02:27 loop0
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 1 Feb 21 02:27 loop1
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 2 Feb 21 02:27 loop2
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 3 Feb 21 02:27 loop3
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 4 Feb 21 02:27 loop4
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 5 Feb 21 02:27 loop5
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 6 Feb 21 02:27 loop6
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 7 Feb 21 02:27 loop7
| [ 0:00] ## LSLR:	drwxr-xr-x 2 root root 4096 Feb 21 02:27 mapper
| [ 0:00] ## LSLR:	crw-r--r-- 1 root root 1, 3 Feb 21 02:27 testnull
| [ 0:00] ## LSLR:	
| [ 0:00] ## LSLR:	@TESTDIR@/dev/mapper:
| [ 0:00] ## LSLR:	total 0
| [ 0:00] ## LSLR:	brw------- 1 root root 253,  16 Feb 21 02:27 @PREFIX@pv1
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   4 Feb 21 02:27 @PREFIX@pv10
| [ 0:00] ## LSLR:	brw------- 1 root root 253,  15 Feb 21 02:27 @PREFIX@pv11
| [ 0:00] ## LSLR:	brw------- 1 root root 253,  14 Feb 21 02:27 @PREFIX@pv12
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   7 Feb 21 02:27 @PREFIX@pv13
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   3 Feb 21 02:27 @PREFIX@pv14
| [ 0:00] ## LSLR:	brw------- 1 root root 253,  10 Feb 21 02:27 @PREFIX@pv2
| [ 0:00] ## LSLR:	brw------- 1 root root 253,  11 Feb 21 02:27 @PREFIX@pv3
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   5 Feb 21 02:27 @PREFIX@pv4
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   6 Feb 21 02:27 @PREFIX@pv5
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   8 Feb 21 02:27 @PREFIX@pv6
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   9 Feb 21 02:27 @PREFIX@pv7
| [ 0:00] ## LSLR:	brw------- 1 root root 253,  12 Feb 21 02:27 @PREFIX@pv8
| [ 0:00] ## LSLR:	brw------- 1 root root 253,  13 Feb 21 02:27 @PREFIX@pv9
| [ 0:00] ## LSLR:	crw------- 1 root root  10, 236 Feb 21 02:27 control
| [ 0:00] <======== Udev DB content ========>
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-0
| [ 0:00] ## UDEV:	N: dm-0
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-0
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-0
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=0
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-1
| [ 0:00] ## UDEV:	N: dm-1
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-1
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-1
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=1
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-10
| [ 0:00] ## UDEV:	N: dm-10
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-10
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-10
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=10
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-11
| [ 0:00] ## UDEV:	N: dm-11
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-11
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-11
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=11
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-12
| [ 0:00] ## UDEV:	N: dm-12
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-12
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-12
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=12
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-13
| [ 0:00] ## UDEV:	N: dm-13
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-13
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-13
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=13
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-14
| [ 0:00] ## UDEV:	N: dm-14
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-14
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-14
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=14
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-15
| [ 0:00] ## UDEV:	N: dm-15
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-15
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-15
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=15
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-16
| [ 0:00] ## UDEV:	N: dm-16
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-16
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-16
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=16
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-2
| [ 0:00] ## UDEV:	N: dm-2
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-2
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-2
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=2
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-3
| [ 0:00] ## UDEV:	N: dm-3
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-3
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-3
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=3
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-4
| [ 0:00] ## UDEV:	N: dm-4
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-4
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-4
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=4
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-5
| [ 0:00] ## UDEV:	N: dm-5
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-5
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-5
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=5
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-6
| [ 0:00] ## UDEV:	N: dm-6
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-6
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-6
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=6
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-7
| [ 0:00] ## UDEV:	N: dm-7
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-7
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-7
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=7
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-8
| [ 0:00] ## UDEV:	N: dm-8
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-8
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-8
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=8
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-9
| [ 0:00] ## UDEV:	N: dm-9
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-9
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-9
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=9
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/loop0
| [ 0:00] ## UDEV:	N: loop0
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/loop0
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/loop0
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=7
| [ 0:00] ## UDEV:	E: MINOR=0
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] <======== Script file "process-each-vgreduce.sh" ========>
| [ 0:00] ## Line: 1 	 #!/usr/bin/env bash
| [ 0:00] ## Line: 2 	 
| [ 0:00] ## Line: 3 	 # Copyright (C) 2014 Red Hat, Inc. All rights reserved.
| [ 0:00] ## Line: 4 	 #
| [ 0:00] ## Line: 5 	 # This copyrighted material is made available to anyone wishing to use,
| [ 0:00] ## Line: 6 	 # modify, copy, or redistribute it subject to the terms and conditions
| [ 0:00] ## Line: 7 	 # of the GNU General Public License v.2.
| [ 0:00] ## Line: 8 	 #
| [ 0:00] ## Line: 9 	 # You should have received a copy of the GNU General Public License
| [ 0:00] ## Line: 10 	 # along with this program; if not, write to the Free Software Foundation,
| [ 0:00] ## Line: 11 	 # Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA
| [ 0:00] ## Line: 12 	 
| [ 0:00] ## Line: 13 	 test_description='Exercise toollib process_each_pv with vgreduce'
| [ 0:00] ## Line: 14 	 
| [ 0:00] ## Line: 15 	 SKIP_WITH_LVMLOCKD=1
| [ 0:00] ## Line: 16 	 SKIP_WITH_LVMPOLLD=1
| [ 0:00] ## Line: 17 	 
| [ 0:00] ## Line: 18 	 . lib/inittest
| [ 0:00] ## Line: 19 	 
| [ 0:00] ## Line: 20 	 aux prepare_devs 14
| [ 0:00] ## Line: 21 	 
| [ 0:00] ## Line: 22 	 #
| [ 0:00] ## Line: 23 	 # set up
| [ 0:00] ## Line: 24 	 #
| [ 0:00] ## Line: 25 	 # FIXME: some of the setup may not be used by the tests
| [ 0:00] ## Line: 26 	 # since this was split out from process-each-pv, where
| [ 0:00] ## Line: 27 	 # some of the setup was used by other tests that only
| [ 0:00] ## Line: 28 	 # remain in process-each-pv.
| [ 0:00] ## Line: 29 	 #
| [ 0:00] ## Line: 30 	 # use use dev10 instead of dev1 because simple grep for
| [ 0:00] ## Line: 31 	 # dev1 matchines dev10,dev11,etc
| [ 0:00] ## Line: 32 	 #
| [ 0:00] ## Line: 33 	 
| [ 0:00] ## Line: 34 	 vgcreate $vg1 "$dev10"
| [ 0:00] ## Line: 35 	 vgcreate $vg2 "$dev2" "$dev3" "$dev4" "$dev5"
| [ 0:00] ## Line: 36 	 vgcreate $vg3 "$dev6" "$dev7" "$dev8" "$dev9"
| [ 0:00] ## Line: 37 	 
| [ 0:00] ## Line: 38 	 pvchange --addtag V2D3 "$dev3"
| [ 0:00] ## Line: 39 	 pvchange --addtag V2D4 "$dev4"
| [ 0:00] ## Line: 40 	 pvchange --addtag V2D45 "$dev4"
| [ 0:00] ## Line: 41 	 pvchange --addtag V2D5 "$dev5"
| [ 0:00] ## Line: 42 	 pvchange --addtag V2D45 "$dev5"
| [ 0:00] ## Line: 43 	 
| [ 0:00] ## Line: 44 	 pvchange --addtag V3 "$dev6" "$dev7" "$dev8" "$dev9"
| [ 0:00] ## Line: 45 	 pvchange --addtag V3D9 "$dev9"
| [ 0:00] ## Line: 46 	 
| [ 0:00] ## Line: 47 	 # orphan
| [ 0:00] ## Line: 48 	 pvcreate "$dev11"
| [ 0:00] ## Line: 49 	 
| [ 0:00] ## Line: 50 	 # dev (a non-pv device)
| [ 0:00] ## Line: 51 	 pvcreate "$dev12"
| [ 0:00] ## Line: 52 	 pvremove "$dev12"
| [ 0:00] ## Line: 53 	 
| [ 0:00] ## Line: 54 	 # dev13 is intentionally untouched so we can
| [ 0:00] ## Line: 55 	 # test that it is handled appropriately as a non-pv
| [ 0:00] ## Line: 56 	 
| [ 0:00] ## Line: 57 	 # orphan
| [ 0:00] ## Line: 58 	 pvcreate "$dev14"
| [ 0:00] ## Line: 59 	 
| [ 0:00] ## Line: 60 	 
| [ 0:00] ## Line: 61 	 # fail without dev
| [ 0:00] ## Line: 62 	 not vgreduce $vg2
| [ 0:00] ## Line: 63 	 
| [ 0:00] ## Line: 64 	 
| [ 0:00] ## Line: 65 	 # fail with dev and -a
| [ 0:00] ## Line: 66 	 not vgreduce $vg2 "$dev2" -a
| [ 0:00] ## Line: 67 	 check pv_field "$dev2" vg_name $vg2
| [ 0:00] ## Line: 68 	 check pv_field "$dev3" vg_name $vg2
| [ 0:00] ## Line: 69 	 check pv_field "$dev4" vg_name $vg2
| [ 0:00] ## Line: 70 	 check pv_field "$dev5" vg_name $vg2
| [ 0:00] ## Line: 71 	 check pv_field "$dev6" vg_name $vg3
| [ 0:00] ## Line: 72 	 check pv_field "$dev7" vg_name $vg3
| [ 0:00] ## Line: 73 	 check pv_field "$dev8" vg_name $vg3
| [ 0:00] ## Line: 74 	 check pv_field "$dev9" vg_name $vg3
| [ 0:00] ## Line: 75 	 
| [ 0:00] ## Line: 76 	 
| [ 0:00] ## Line: 77 	 # remove one pv
| [ 0:00] ## Line: 78 	 vgreduce $vg2 "$dev2"
| [ 0:00] ## Line: 79 	 not check pv_field "$dev2" vg_name $vg2
| [ 0:00] ## Line: 80 	 check pv_field "$dev3" vg_name $vg2
| [ 0:00] ## Line: 81 	 check pv_field "$dev4" vg_name $vg2
| [ 0:00] ## Line: 82 	 check pv_field "$dev5" vg_name $vg2
| [ 0:00] ## Line: 83 	 check pv_field "$dev6" vg_name $vg3
| [ 0:00] ## Line: 84 	 check pv_field "$dev7" vg_name $vg3
| [ 0:00] ## Line: 85 	 check pv_field "$dev8" vg_name $vg3
| [ 0:00] ## Line: 86 	 check pv_field "$dev9" vg_name $vg3
| [ 0:00] ## Line: 87 	 # reset
| [ 0:00] ## Line: 88 	 vgextend $vg2 "$dev2"
| [ 0:00] ## Line: 89 	 
| [ 0:00] ## Line: 90 	 
| [ 0:00] ## Line: 91 	 # remove two pvs
| [ 0:00] ## Line: 92 	 vgreduce $vg2 "$dev2" "$dev3"
| [ 0:00] ## Line: 93 	 not check pv_field "$dev2" vg_name $vg2
| [ 0:00] ## Line: 94 	 not check pv_field "$dev3" vg_name $vg2
| [ 0:00] ## Line: 95 	 check pv_field "$dev4" vg_name $vg2
| [ 0:00] ## Line: 96 	 check pv_field "$dev5" vg_name $vg2
| [ 0:00] ## Line: 97 	 check pv_field "$dev6" vg_name $vg3
| [ 0:00] ## Line: 98 	 check pv_field "$dev7" vg_name $vg3
| [ 0:00] ## Line: 99 	 check pv_field "$dev8" vg_name $vg3
| [ 0:00] ## Line: 100 	 check pv_field "$dev9" vg_name $vg3
| [ 0:00] ## Line: 101 	 # reset
| [ 0:00] ## Line: 102 	 vgextend $vg2 "$dev2" "$dev3"
| [ 0:00] ## Line: 103 	 pvchange --addtag V2D3 "$dev3"
| [ 0:00] ## Line: 104 	 
| [ 0:00] ## Line: 105 	 
| [ 0:00] ## Line: 106 	 # remove one pv with tag
| [ 0:00] ## Line: 107 	 vgreduce $vg2 @V2D3
| [ 0:00] ## Line: 108 	 check pv_field "$dev2" vg_name $vg2
| [ 0:00] ## Line: 109 	 not check pv_field "$dev3" vg_name $vg2
| [ 0:00] ## Line: 110 	 check pv_field "$dev4" vg_name $vg2
| [ 0:00] ## Line: 111 	 check pv_field "$dev5" vg_name $vg2
| [ 0:00] ## Line: 112 	 check pv_field "$dev6" vg_name $vg3
| [ 0:00] ## Line: 113 	 check pv_field "$dev7" vg_name $vg3
| [ 0:00] ## Line: 114 	 check pv_field "$dev8" vg_name $vg3
| [ 0:00] ## Line: 115 	 check pv_field "$dev9" vg_name $vg3
| [ 0:00] ## Line: 116 	 # reset
| [ 0:00] ## Line: 117 	 vgextend $vg2 "$dev3"
| [ 0:00] ## Line: 118 	 pvchange --addtag V2D3 "$dev3"
| [ 0:00] ## Line: 119 	 
| [ 0:00] ## Line: 120 	 
| [ 0:00] ## Line: 121 	 # remove two pvs, each with different tag
| [ 0:00] ## Line: 122 	 vgreduce $vg2 @V2D3 @V2D4
| [ 0:00] ## Line: 123 	 check pv_field "$dev2" vg_name $vg2
| [ 0:00] ## Line: 124 	 not check pv_field "$dev3" vg_name $vg2
| [ 0:00] ## Line: 125 	 not check pv_field "$dev4" vg_name $vg2
| [ 0:00] ## Line: 126 	 check pv_field "$dev5" vg_name $vg2
| [ 0:00] ## Line: 127 	 check pv_field "$dev6" vg_name $vg3
| [ 0:00] ## Line: 128 	 check pv_field "$dev7" vg_name $vg3
| [ 0:00] ## Line: 129 	 check pv_field "$dev8" vg_name $vg3
| [ 0:00] ## Line: 130 	 check pv_field "$dev9" vg_name $vg3
| [ 0:00] ## Line: 131 	 # reset
| [ 0:00] ## Line: 132 	 vgextend $vg2 "$dev3" "$dev4"
| [ 0:00] ## Line: 133 	 pvchange --addtag V2D3 "$dev3"
| [ 0:00] ## Line: 134 	 pvchange --addtag V2D4 "$dev4"
| [ 0:00] ## Line: 135 	 pvchange --addtag V2D45 "$dev4"
| [ 0:00] ## Line: 136 	 
| [ 0:00] ## Line: 137 	 
| [ 0:00] ## Line: 138 	 # remove two pvs, both with same tag
| [ 0:00] ## Line: 139 	 vgreduce $vg2 @V2D45
| [ 0:00] ## Line: 140 	 check pv_field "$dev2" vg_name $vg2
| [ 0:00] ## Line: 141 	 check pv_field "$dev3" vg_name $vg2
| [ 0:00] ## Line: 142 	 not check pv_field "$dev4" vg_name $vg2
| [ 0:00] ## Line: 143 	 not check pv_field "$dev5" vg_name $vg2
| [ 0:00] ## Line: 144 	 check pv_field "$dev6" vg_name $vg3
| [ 0:00] ## Line: 145 	 check pv_field "$dev7" vg_name $vg3
| [ 0:00] ## Line: 146 	 check pv_field "$dev8" vg_name $vg3
| [ 0:00] ## Line: 147 	 check pv_field "$dev9" vg_name $vg3
| [ 0:00] ## Line: 148 	 # reset
| [ 0:00] ## Line: 149 	 vgextend $vg2 "$dev4" "$dev5"
| [ 0:00] ## Line: 150 	 pvchange --addtag V2D4 "$dev4"
| [ 0:00] ## Line: 151 	 pvchange --addtag V2D45 "$dev4"
| [ 0:00] ## Line: 152 	 pvchange --addtag V2D5 "$dev5"
| [ 0:00] ## Line: 153 	 pvchange --addtag V2D45 "$dev5"
| [ 0:00] ## Line: 154 	 
| [ 0:00] ## Line: 155 	 
| [ 0:00] ## Line: 156 	 # remove two pvs, one by name, one by tag
| [ 0:00] ## Line: 157 	 vgreduce $vg2 "$dev2" @V2D3
| [ 0:00] ## Line: 158 	 not check pv_field "$dev2" vg_name $vg2
| [ 0:00] ## Line: 159 	 not check pv_field "$dev3" vg_name $vg2
| [ 0:00] ## Line: 160 	 check pv_field "$dev4" vg_name $vg2
| [ 0:00] ## Line: 161 	 check pv_field "$dev5" vg_name $vg2
| [ 0:00] ## Line: 162 	 check pv_field "$dev6" vg_name $vg3
| [ 0:00] ## Line: 163 	 check pv_field "$dev7" vg_name $vg3
| [ 0:00] ## Line: 164 	 check pv_field "$dev8" vg_name $vg3
| [ 0:00] ## Line: 165 	 check pv_field "$dev9" vg_name $vg3
| [ 0:00] ## Line: 166 	 # reset
| [ 0:00] ## Line: 167 	 vgextend $vg2 "$dev2" "$dev3"
| [ 0:00] ## Line: 168 	 pvchange --addtag V2D3 "$dev3"
| [ 0:00] ## Line: 169 	 
| [ 0:00] ## Line: 170 	 
| [ 0:00] ## Line: 171 	 # remove one pv by tag, where another vg has a pv with same tag
| [ 0:00] ## Line: 172 	 pvchange --addtag V2D5V3D9 "$dev5"
| [ 0:00] ## Line: 173 	 pvchange --addtag V2D5V3D9 "$dev9"
| [ 0:00] ## Line: 174 	 vgreduce $vg2 @V2D5V3D9
| [ 0:00] ## Line: 175 	 check pv_field "$dev2" vg_name $vg2
| [ 0:00] ## Line: 176 	 check pv_field "$dev3" vg_name $vg2
| [ 0:00] ## Line: 177 	 check pv_field "$dev4" vg_name $vg2
| [ 0:00] ## Line: 178 	 not check pv_field "$dev5" vg_name $vg2
| [ 0:00] ## Line: 179 	 check pv_field "$dev6" vg_name $vg3
| [ 0:00] ## Line: 180 	 check pv_field "$dev7" vg_name $vg3
| [ 0:00] ## Line: 181 	 check pv_field "$dev8" vg_name $vg3
| [ 0:00] ## Line: 182 	 check pv_field "$dev9" vg_name $vg3
| [ 0:00] ## Line: 183 	 # reset
| [ 0:00] ## Line: 184 	 vgextend $vg2 "$dev5"
| [ 0:00] ## Line: 185 	 pvchange --addtag V2D5 "$dev5"
| [ 0:00] ## Line: 186 	 pvchange --addtag V2D45 "$dev5"
| [ 0:00] ## Line: 187 	 
| [ 0:00] ## Line: 188 	 
| [ 0:00] ## Line: 189 	 # fail to remove last pv (don't know which will be last)
| [ 0:00] ## Line: 190 	 not vgreduce -a $vg2
| [ 0:00] ## Line: 191 	 # reset
| [ 0:00] ## Line: 192 	 vgremove $vg2
| [ 0:00] ## Line: 193 	 vgcreate $vg2 "$dev2" "$dev3" "$dev4" "$dev5"
| [ 0:00] ## Line: 194 	 pvchange --addtag V2D3 "$dev3"
| [ 0:00] ## Line: 195 	 pvchange --addtag V2D4 "$dev4"
| [ 0:00] ## Line: 196 	 pvchange --addtag V2D45 "$dev4"
| [ 0:00] ## Line: 197 	 pvchange --addtag V2D5 "$dev5"
| [ 0:00] ## Line: 198 	 pvchange --addtag V2D45 "$dev5"
| [ 0:00] ## Line: 199 	 
| [ 0:00] ## Line: 200 	 
| [ 0:00] ## Line: 201 	 # lvcreate on one pv to make it used
| [ 0:00] ## Line: 202 	 # remove all unused pvs
| [ 0:00] ## Line: 203 	 lvcreate -n $lv1 -l 2 $vg2 "$dev2"
| [ 0:00] ## Line: 204 	 not vgreduce -a $vg2
| [ 0:00] ## Line: 205 	 check pv_field "$dev2" vg_name $vg2
| [ 0:00] ## Line: 206 	 not check pv_field "$dev3" vg_name $vg2
| [ 0:00] ## Line: 207 	 not check pv_field "$dev4" vg_name $vg2
| [ 0:00] ## Line: 208 	 not check pv_field "$dev5" vg_name $vg2
| [ 0:00] ## Line: 209 	 check pv_field "$dev6" vg_name $vg3
| [ 0:00] ## Line: 210 	 check pv_field "$dev7" vg_name $vg3
| [ 0:00] ## Line: 211 	 check pv_field "$dev8" vg_name $vg3
| [ 0:00] ## Line: 212 	 check pv_field "$dev9" vg_name $vg3
| [ 0:00] ## Line: 213 	 # reset
| [ 0:00] ## Line: 214 	 vgextend $vg2 "$dev3" "$dev4" "$dev5"
| [ 0:00] ## Line: 215 	 pvchange --addtag V2D3 "$dev3"
| [ 0:00] ## Line: 216 	 pvchange --addtag V2D4 "$dev4"
| [ 0:00] ## Line: 217 	 pvchange --addtag V2D45 "$dev4"
| [ 0:00] ## Line: 218 	 pvchange --addtag V2D5 "$dev5"
| [ 0:00] ## Line: 219 	 pvchange --addtag V2D45 "$dev5"
| [ 0:00] ## Line: 220 	 lvchange -an $vg2/$lv1
| [ 0:00] ## Line: 221 	 lvremove $vg2/$lv1
| [ 0:00] ## Line: 222 	 
| [ 0:00] ## Line: 223 	 
| [ 0:00] ## Line: 224 	 #
| [ 0:00] ## Line: 225 	 # tests including pvs without mdas
| [ 0:00] ## Line: 226 	 #
| [ 0:00] ## Line: 227 	 
| [ 0:00] ## Line: 228 	 # remove old config
| [ 0:00] ## Line: 229 	 vgremove $vg1
| [ 0:00] ## Line: 230 	 vgremove $vg2
| [ 0:00] ## Line: 231 	 vgremove $vg3
| [ 0:00] ## Line: 232 	 pvremove "$dev11"
| [ 0:00] ## Line: 233 	 pvremove "$dev14"
| [ 0:00] ## Line: 234 	 
| [ 0:00] ## Line: 235 	 # new config with some pvs that have zero mdas
| [ 0:00] ## Line: 236 	 
| [ 0:00] ## Line: 237 	 # for vg1
| [ 0:00] ## Line: 238 	 pvcreate "$dev10"
| [ 0:00] ## Line: 239 	 
| [ 0:00] ## Line: 240 	 # for vg2
| [ 0:00] ## Line: 241 	 pvcreate "$dev2" --metadatacopies 0
| [ 0:00] ## Line: 242 	 pvcreate "$dev3"
| [ 0:00] ## Line: 243 	 pvcreate "$dev4"
| [ 0:00] ## Line: 244 	 pvcreate "$dev5"
| [ 0:00] ## Line: 245 	 
| [ 0:00] ## Line: 246 	 # for vg3
| [ 0:00] ## Line: 247 	 pvcreate "$dev6" --metadatacopies 0
| [ 0:00] ## Line: 248 	 pvcreate "$dev7" --metadatacopies 0
| [ 0:00] ## Line: 249 	 pvcreate "$dev8" --metadatacopies 0
| [ 0:00] ## Line: 250 	 pvcreate "$dev9"
| [ 0:00] ## Line: 251 	 
| [ 0:00] ## Line: 252 	 # orphan with mda
| [ 0:00] ## Line: 253 	 pvcreate "$dev11"
| [ 0:00] ## Line: 254 	 # orphan without mda
| [ 0:00] ## Line: 255 	 pvcreate "$dev14" --metadatacopies 0
| [ 0:00] ## Line: 256 	 
| [ 0:00] ## Line: 257 	 # non-pv devs
| [ 0:00] ## Line: 258 	 # dev12
| [ 0:00] ## Line: 259 	 # dev13
| [ 0:00] ## Line: 260 	 
| [ 0:00] ## Line: 261 	 vgcreate $vg1 "$dev10"
| [ 0:00] ## Line: 262 	 vgcreate $vg2 "$dev2" "$dev3" "$dev4" "$dev5"
| [ 0:00] ## Line: 263 	 vgcreate $vg3 "$dev6" "$dev7" "$dev8" "$dev9"
| [ 0:00] ## Line: 264 	 
| [ 0:00] ## Line: 265 	 pvchange --addtag V2D3 "$dev3"
| [ 0:00] ## Line: 266 	 pvchange --addtag V2D4 "$dev4"
| [ 0:00] ## Line: 267 	 pvchange --addtag V2D45 "$dev4"
| [ 0:00] ## Line: 268 	 pvchange --addtag V2D5 "$dev5"
| [ 0:00] ## Line: 269 	 pvchange --addtag V2D45 "$dev5"
| [ 0:00] ## Line: 270 	 
| [ 0:00] ## Line: 271 	 pvchange --addtag V3 "$dev6" "$dev7" "$dev8" "$dev9"
| [ 0:00] ## Line: 272 	 pvchange --addtag V3D8 "$dev8"
| [ 0:00] ## Line: 273 	 pvchange --addtag V3D9 "$dev9"
| [ 0:00] ## Line: 274 	 
| [ 0:00] ## Line: 275 	 
| [ 0:00] ## Line: 276 	 #
| [ 0:00] ## Line: 277 	 # vgreduce including pvs without mdas
| [ 0:00] ## Line: 278 	 #
| [ 0:00] ## Line: 279 	 
| [ 0:00] ## Line: 280 	 # remove pv without mda
| [ 0:00] ## Line: 281 	 vgreduce $vg2 "$dev2"
| [ 0:00] ## Line: 282 	 not check pv_field "$dev2" vg_name $vg2
| [ 0:00] ## Line: 283 	 check pv_field "$dev3" vg_name $vg2
| [ 0:00] ## Line: 284 	 check pv_field "$dev4" vg_name $vg2
| [ 0:00] ## Line: 285 	 check pv_field "$dev5" vg_name $vg2
| [ 0:00] ## Line: 286 	 check pv_field "$dev6" vg_name $vg3
| [ 0:00] ## Line: 287 	 check pv_field "$dev7" vg_name $vg3
| [ 0:00] ## Line: 288 	 check pv_field "$dev8" vg_name $vg3
| [ 0:00] ## Line: 289 	 check pv_field "$dev9" vg_name $vg3
| [ 0:00] ## Line: 290 	 # reset
| [ 0:00] ## Line: 291 	 vgextend $vg2 "$dev2"
| [ 0:00] ## Line: 292 	 
| [ 0:00] ## Line: 293 	 # remove pv with mda and pv without mda
| [ 0:00] ## Line: 294 	 vgreduce $vg2 "$dev2" "$dev3"
| [ 0:00] ## Line: 295 	 not check pv_field "$dev2" vg_name $vg2
| [ 0:00] ## Line: 296 	 not check pv_field "$dev3" vg_name $vg2
| [ 0:00] ## Line: 297 	 check pv_field "$dev4" vg_name $vg2
| [ 0:00] ## Line: 298 	 check pv_field "$dev5" vg_name $vg2
| [ 0:00] ## Line: 299 	 check pv_field "$dev6" vg_name $vg3
| [ 0:00] ## Line: 300 	 check pv_field "$dev7" vg_name $vg3
| [ 0:00] ## Line: 301 	 check pv_field "$dev8" vg_name $vg3
| [ 0:00] ## Line: 302 	 check pv_field "$dev9" vg_name $vg3
| [ 0:00] ## Line: 303 	 # reset
| [ 0:00] ## Line: 304 	 vgextend $vg2 "$dev2"
| [ 0:00] ## Line: 305 	 vgextend $vg2 "$dev3"
| [ 0:00] ## Line: 306 	 
| [ 0:00] ## Line: 307 	 # fail to remove only pv with mda
| [ 0:00] ## Line: 308 	 not vgreduce $vg3 "$dev9"
| [ 0:00] ## Line: 309 	 check pv_field "$dev6" vg_name $vg3
| [ 0:00] ## Line: 310 	 check pv_field "$dev7" vg_name $vg3
| [ 0:00] ## Line: 311 	 check pv_field "$dev8" vg_name $vg3
| [ 0:00] ## Line: 312 	 check pv_field "$dev9" vg_name $vg3
| [ 0:00] ## Line: 313 	 check pv_field "$dev2" vg_name $vg2
| [ 0:00] ## Line: 314 	 check pv_field "$dev3" vg_name $vg2
| [ 0:00] ## Line: 315 	 check pv_field "$dev4" vg_name $vg2
| [ 0:00] ## Line: 316 	 check pv_field "$dev5" vg_name $vg2
| [ 0:00] ## Line: 317 	 
| [ 0:00] ## Line: 318 	 # remove by tag a pv without mda
| [ 0:00] ## Line: 319 	 vgreduce $vg3 @V3D8
| [ 0:00] ## Line: 320 	 check pv_field "$dev6" vg_name $vg3
| [ 0:00] ## Line: 321 	 check pv_field "$dev7" vg_name $vg3
| [ 0:00] ## Line: 322 	 not check pv_field "$dev8" vg_name $vg3
| [ 0:00] ## Line: 323 	 check pv_field "$dev9" vg_name $vg3
| [ 0:00] ## Line: 324 	 check pv_field "$dev2" vg_name $vg2
| [ 0:00] ## Line: 325 	 check pv_field "$dev3" vg_name $vg2
| [ 0:00] ## Line: 326 	 check pv_field "$dev4" vg_name $vg2
| [ 0:00] ## Line: 327 	 check pv_field "$dev5" vg_name $vg2
| [ 0:00] ## Line: 328 	 # reset
| [ 0:00] ## Line: 329 	 vgextend $vg3 "$dev8"
| [ 0:00] ## Line: 330 	 
| [ 0:00] ## Line: 331 	 vgremove $vg1 $vg2 $vg3
| [ 0:00] aux teardown
| [ 0:00] #process-each-vgreduce.sh:1+ aux teardown
| [ 0:00] ## teardown.........ok
###       failed: [ndev-vanilla] shell/process-each-vgreduce.sh
###      skipped: [ndev-vanilla] shell/profiles-cache.sh
###      skipped: [ndev-vanilla] shell/profiles-thin.sh

| [ 0:00] Library version:   1.02.146 (2017-12-18)
| [ 0:00] Driver version:    4.35.0
| [ 0:00] Kernel is Linux localhost.localdomain 3.10.0-693.11.1.el7.x86_64 #1 SMP Mon Dec 4 23:52:40 UTC 2017 x86_64 GNU/Linux
| [ 0:00] Selinux mode is not installed.
| [ 0:00]               total        used        free      shared  buff/cache   available
| [ 0:00] Mem:           7822        1080        4144          10        2597        6434
| [ 0:00] Swap:          4095           0        4095
| [ 0:00] Filesystem      Size  Used Avail Use% Mounted on
| [ 0:00] /dev/sdc1        18G  8.4G  8.4G  50% /
| [ 0:00] /dev/sdd1        51G  6.1G   43G  13% /lfskernel
| [ 0:00] devtmpfs        3.9G     0  3.9G   0% /dev
| [ 0:00] tmpfs           3.9G     0  3.9G   0% /run
| [ 0:00] @TESTDIR=/tmp/LVMTEST14985.u8cx7Xk0Dm
| [ 0:00] @PREFIX=LVMTEST14985
| [ 0:00] ## LVMCONF: activation {
| [ 0:00] ## LVMCONF:     checks = 1
| [ 0:00] ## LVMCONF:     monitoring = 0
| [ 0:00] ## LVMCONF:     polling_interval = 1
| [ 0:00] ## LVMCONF:     raid_region_size = 512
| [ 0:00] ## LVMCONF:     retry_deactivation = 1
| [ 0:00] ## LVMCONF:     snapshot_autoextend_percent = 50
| [ 0:00] ## LVMCONF:     snapshot_autoextend_threshold = 50
| [ 0:00] ## LVMCONF:     udev_rules = 1
| [ 0:00] ## LVMCONF:     udev_sync = 1
| [ 0:00] ## LVMCONF:     verify_udev_operations = 1
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: allocation {
| [ 0:00] ## LVMCONF:     wipe_signatures_when_zeroing_new_lvs = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: backup {
| [ 0:00] ## LVMCONF:     archive = 0
| [ 0:00] ## LVMCONF:     backup = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: devices {
| [ 0:00] ## LVMCONF:     cache_dir = "@TESTDIR@/etc"
| [ 0:00] ## LVMCONF:     default_data_alignment = 1
| [ 0:00] ## LVMCONF:     dir = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     filter = "a|.*|"
| [ 0:00] ## LVMCONF:     global_filter = [ "a|@TESTDIR@/dev/mapper/@PREFIX@.*pv[0-9_]*$|", "r|.*|" ]
| [ 0:00] ## LVMCONF:     md_component_detection  = 0
| [ 0:00] ## LVMCONF:     scan = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     sysfs_scan = 1
| [ 0:00] ## LVMCONF:     write_cache_state = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: dmeventd {
| [ 0:00] ## LVMCONF:     executable = "/sources/boot/LVM2.2.02.177/test/lib/dmeventd"
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: global {
| [ 0:00] ## LVMCONF:     abort_on_internal_errors = 1
| [ 0:00] ## LVMCONF:     cache_check_executable = "/usr/sbin/cache_check"
| [ 0:00] ## LVMCONF:     cache_dump_executable = "/usr/sbin/cache_dump"
| [ 0:00] ## LVMCONF:     cache_repair_executable = "/usr/sbin/cache_repair"
| [ 0:00] ## LVMCONF:     detect_internal_vg_cache_corruption = 1
| [ 0:00] ## LVMCONF:     fallback_to_local_locking = 0
| [ 0:00] ## LVMCONF:     fsadm_executable = "/sources/boot/LVM2.2.02.177/test/lib/fsadm"
| [ 0:00] ## LVMCONF:     library_dir = "@TESTDIR@/lib"
| [ 0:00] ## LVMCONF:     locking_dir = "@TESTDIR@/var/lock/lvm"
| [ 0:00] ## LVMCONF:     locking_type=1
| [ 0:00] ## LVMCONF:     notify_dbus = 0
| [ 0:00] ## LVMCONF:     si_unit_consistency = 1
| [ 0:00] ## LVMCONF:     thin_check_executable = "/usr/sbin/thin_check"
| [ 0:00] ## LVMCONF:     thin_dump_executable = "/usr/sbin/thin_dump"
| [ 0:00] ## LVMCONF:     thin_repair_executable = "/usr/sbin/thin_repair"
| [ 0:00] ## LVMCONF:     use_lvmetad = 0
| [ 0:00] ## LVMCONF:     use_lvmlockd = 0
| [ 0:00] ## LVMCONF:     use_lvmpolld = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: log {
| [ 0:00] ## LVMCONF:     activation = 1
| [ 0:00] ## LVMCONF:     file = "@TESTDIR@/debug.log"
| [ 0:00] ## LVMCONF:     indent = 1
| [ 0:00] ## LVMCONF:     level = 9
| [ 0:00] ## LVMCONF:     overwrite = 1
| [ 0:00] ## LVMCONF:     syslog = 0
| [ 0:00] ## LVMCONF:     verbose = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] <======== Processing test: "profiles.sh" ========>
| [ 0:00] 
| [ 0:00] MSG_FAILED_TO_APPLY_CMD_PROFILE="Failed to apply command profile"
| [ 0:00] #profiles.sh:21+ MSG_FAILED_TO_APPLY_CMD_PROFILE='Failed to apply command profile'
| [ 0:00] MSG_IGNORING_INVALID_CMD_PROFILE="Ignoring invalid command profile"
| [ 0:00] #profiles.sh:22+ MSG_IGNORING_INVALID_CMD_PROFILE='Ignoring invalid command profile'
| [ 0:00] MSG_FAILED_TO_APPLY_MDA_PROFILE="Failed to apply metadata profile"
| [ 0:00] #profiles.sh:23+ MSG_FAILED_TO_APPLY_MDA_PROFILE='Failed to apply metadata profile'
| [ 0:00] MSG_IGNORING_INVALID_MDA_PROFILE="Ignoring invalid metadata profile"
| [ 0:00] #profiles.sh:24+ MSG_IGNORING_INVALID_MDA_PROFILE='Ignoring invalid metadata profile'
| [ 0:00] MSG_NOT_PROFILABLE="not customizable by a profile"
| [ 0:00] #profiles.sh:25+ MSG_NOT_PROFILABLE='not customizable by a profile'
| [ 0:00] MSG_CMD_PROFILABLE_ONLY="customizable by command profile only, not metadata profile"
| [ 0:00] #profiles.sh:26+ MSG_CMD_PROFILABLE_ONLY='customizable by command profile only, not metadata profile'
| [ 0:00] MSG_MDA_PROFILABLE_ONLY="customizable by metadata profile only, not command profile"
| [ 0:00] #profiles.sh:27+ MSG_MDA_PROFILABLE_ONLY='customizable by metadata profile only, not command profile'
| [ 0:00] 
| [ 0:00] # fail if the profile requested by --profile cmdline option is not present
| [ 0:00] not pvs --profile nonexistent 2>&1 | grep "$MSG_FAILED_TO_APPLY_CMD_PROFILE"
| [ 0:00] #profiles.sh:30+ not pvs --profile nonexistent
| [ 0:00] #profiles.sh:30+ grep 'Failed to apply command profile'
| [ 0:00]   Failed to apply command profile nonexistent.
| [ 0:00] 
| [ 0:00] # config/checks=1: warning message about setting not being profilable +
| [ 0:00] #                  summary error message about invalid profile
| [ 0:00] # config/checks=0: just summary error message about invalid profile
| [ 0:00] aux profileconf invalid 'log/prefix=" "'
| [ 0:00] #profiles.sh:35+ aux profileconf invalid 'log/prefix=" "'
| [ 0:00] ## LVMCONF: log {
| [ 0:00] ## LVMCONF:     prefix=" "
| [ 0:00] ## LVMCONF: }
| [ 0:00] 
| [ 0:00] aux lvmconf 'config/checks = 0'
| [ 0:00] #profiles.sh:37+ aux lvmconf 'config/checks = 0'
| [ 0:00] ## LVMCONF: activation {
| [ 0:00] ## LVMCONF:     checks = 1
| [ 0:00] ## LVMCONF:     monitoring = 0
| [ 0:00] ## LVMCONF:     polling_interval = 1
| [ 0:00] ## LVMCONF:     raid_region_size = 512
| [ 0:00] ## LVMCONF:     retry_deactivation = 1
| [ 0:00] ## LVMCONF:     snapshot_autoextend_percent = 50
| [ 0:00] ## LVMCONF:     snapshot_autoextend_threshold = 50
| [ 0:00] ## LVMCONF:     udev_rules = 1
| [ 0:00] ## LVMCONF:     udev_sync = 1
| [ 0:00] ## LVMCONF:     verify_udev_operations = 1
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: allocation {
| [ 0:00] ## LVMCONF:     wipe_signatures_when_zeroing_new_lvs = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: backup {
| [ 0:00] ## LVMCONF:     archive = 0
| [ 0:00] ## LVMCONF:     backup = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: config {
| [ 0:00] ## LVMCONF:     checks = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: devices {
| [ 0:00] ## LVMCONF:     cache_dir = "@TESTDIR@/etc"
| [ 0:00] ## LVMCONF:     default_data_alignment = 1
| [ 0:00] ## LVMCONF:     dir = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     filter = "a|.*|"
| [ 0:00] ## LVMCONF:     global_filter = [ "a|@TESTDIR@/dev/mapper/@PREFIX@.*pv[0-9_]*$|", "r|.*|" ]
| [ 0:00] ## LVMCONF:     md_component_detection  = 0
| [ 0:00] ## LVMCONF:     scan = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     sysfs_scan = 1
| [ 0:00] ## LVMCONF:     write_cache_state = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: dmeventd {
| [ 0:00] ## LVMCONF:     executable = "/sources/boot/LVM2.2.02.177/test/lib/dmeventd"
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: global {
| [ 0:00] ## LVMCONF:     abort_on_internal_errors = 1
| [ 0:00] ## LVMCONF:     cache_check_executable = "/usr/sbin/cache_check"
| [ 0:00] ## LVMCONF:     cache_dump_executable = "/usr/sbin/cache_dump"
| [ 0:00] ## LVMCONF:     cache_repair_executable = "/usr/sbin/cache_repair"
| [ 0:00] ## LVMCONF:     detect_internal_vg_cache_corruption = 1
| [ 0:00] ## LVMCONF:     fallback_to_local_locking = 0
| [ 0:00] ## LVMCONF:     fsadm_executable = "/sources/boot/LVM2.2.02.177/test/lib/fsadm"
| [ 0:00] ## LVMCONF:     library_dir = "@TESTDIR@/lib"
| [ 0:00] ## LVMCONF:     locking_dir = "@TESTDIR@/var/lock/lvm"
| [ 0:00] ## LVMCONF:     locking_type=1
| [ 0:00] ## LVMCONF:     notify_dbus = 0
| [ 0:00] ## LVMCONF:     si_unit_consistency = 1
| [ 0:00] ## LVMCONF:     thin_check_executable = "/usr/sbin/thin_check"
| [ 0:00] ## LVMCONF:     thin_dump_executable = "/usr/sbin/thin_dump"
| [ 0:00] ## LVMCONF:     thin_repair_executable = "/usr/sbin/thin_repair"
| [ 0:00] ## LVMCONF:     use_lvmetad = 0
| [ 0:00] ## LVMCONF:     use_lvmlockd = 0
| [ 0:00] ## LVMCONF:     use_lvmpolld = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: log {
| [ 0:00] ## LVMCONF:     activation = 1
| [ 0:00] ## LVMCONF:     file = "@TESTDIR@/debug.log"
| [ 0:00] ## LVMCONF:     indent = 1
| [ 0:00] ## LVMCONF:     level = 9
| [ 0:00] ## LVMCONF:     overwrite = 1
| [ 0:00] ## LVMCONF:     syslog = 0
| [ 0:00] ## LVMCONF:     verbose = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] not pvs --profile invalid 2>msg
| [ 0:00] #profiles.sh:38+ not pvs --profile invalid
| [ 0:00] not grep "$MSG_NOT_PROFILABLE" msg
| [ 0:00] #profiles.sh:39+ not grep 'not customizable by a profile' msg
| [ 0:00] grep "$MSG_IGNORING_INVALID_CMD_PROFILE" msg
| [ 0:00] #profiles.sh:40+ grep 'Ignoring invalid command profile' msg
| [ 0:00]   Ignoring invalid command profile invalid.
| [ 0:00] grep "$MSG_FAILED_TO_APPLY_CMD_PROFILE" msg
| [ 0:00] #profiles.sh:41+ grep 'Failed to apply command profile' msg
| [ 0:00]   Failed to apply command profile invalid.
| [ 0:00] 
| [ 0:00] aux lvmconf 'config/checks = 1'
| [ 0:00] #profiles.sh:43+ aux lvmconf 'config/checks = 1'
| [ 0:00] ## LVMCONF: activation {
| [ 0:00] ## LVMCONF:     checks = 1
| [ 0:00] ## LVMCONF:     monitoring = 0
| [ 0:00] ## LVMCONF:     polling_interval = 1
| [ 0:00] ## LVMCONF:     raid_region_size = 512
| [ 0:00] ## LVMCONF:     retry_deactivation = 1
| [ 0:00] ## LVMCONF:     snapshot_autoextend_percent = 50
| [ 0:00] ## LVMCONF:     snapshot_autoextend_threshold = 50
| [ 0:00] ## LVMCONF:     udev_rules = 1
| [ 0:00] ## LVMCONF:     udev_sync = 1
| [ 0:00] ## LVMCONF:     verify_udev_operations = 1
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: allocation {
| [ 0:00] ## LVMCONF:     wipe_signatures_when_zeroing_new_lvs = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: backup {
| [ 0:00] ## LVMCONF:     archive = 0
| [ 0:00] ## LVMCONF:     backup = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: config {
| [ 0:00] ## LVMCONF:     checks = 1
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: devices {
| [ 0:00] ## LVMCONF:     cache_dir = "@TESTDIR@/etc"
| [ 0:00] ## LVMCONF:     default_data_alignment = 1
| [ 0:00] ## LVMCONF:     dir = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     filter = "a|.*|"
| [ 0:00] ## LVMCONF:     global_filter = [ "a|@TESTDIR@/dev/mapper/@PREFIX@.*pv[0-9_]*$|", "r|.*|" ]
| [ 0:00] ## LVMCONF:     md_component_detection  = 0
| [ 0:00] ## LVMCONF:     scan = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     sysfs_scan = 1
| [ 0:00] ## LVMCONF:     write_cache_state = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: dmeventd {
| [ 0:00] ## LVMCONF:     executable = "/sources/boot/LVM2.2.02.177/test/lib/dmeventd"
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: global {
| [ 0:00] ## LVMCONF:     abort_on_internal_errors = 1
| [ 0:00] ## LVMCONF:     cache_check_executable = "/usr/sbin/cache_check"
| [ 0:00] ## LVMCONF:     cache_dump_executable = "/usr/sbin/cache_dump"
| [ 0:00] ## LVMCONF:     cache_repair_executable = "/usr/sbin/cache_repair"
| [ 0:00] ## LVMCONF:     detect_internal_vg_cache_corruption = 1
| [ 0:00] ## LVMCONF:     fallback_to_local_locking = 0
| [ 0:00] ## LVMCONF:     fsadm_executable = "/sources/boot/LVM2.2.02.177/test/lib/fsadm"
| [ 0:00] ## LVMCONF:     library_dir = "@TESTDIR@/lib"
| [ 0:00] ## LVMCONF:     locking_dir = "@TESTDIR@/var/lock/lvm"
| [ 0:00] ## LVMCONF:     locking_type=1
| [ 0:00] ## LVMCONF:     notify_dbus = 0
| [ 0:00] ## LVMCONF:     si_unit_consistency = 1
| [ 0:00] ## LVMCONF:     thin_check_executable = "/usr/sbin/thin_check"
| [ 0:00] ## LVMCONF:     thin_dump_executable = "/usr/sbin/thin_dump"
| [ 0:00] ## LVMCONF:     thin_repair_executable = "/usr/sbin/thin_repair"
| [ 0:00] ## LVMCONF:     use_lvmetad = 0
| [ 0:00] ## LVMCONF:     use_lvmlockd = 0
| [ 0:00] ## LVMCONF:     use_lvmpolld = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: log {
| [ 0:00] ## LVMCONF:     activation = 1
| [ 0:00] ## LVMCONF:     file = "@TESTDIR@/debug.log"
| [ 0:00] ## LVMCONF:     indent = 1
| [ 0:00] ## LVMCONF:     level = 9
| [ 0:00] ## LVMCONF:     overwrite = 1
| [ 0:00] ## LVMCONF:     syslog = 0
| [ 0:00] ## LVMCONF:     verbose = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] not pvs --profile invalid 2>msg
| [ 0:00] #profiles.sh:44+ not pvs --profile invalid
| [ 0:00] grep "$MSG_NOT_PROFILABLE" msg
| [ 0:00] #profiles.sh:45+ grep 'not customizable by a profile' msg
| [ 0:00]   Configuration option "log/prefix" is not customizable by a profile.
| [ 0:00] grep "$MSG_IGNORING_INVALID_CMD_PROFILE" msg
| [ 0:00] #profiles.sh:46+ grep 'Ignoring invalid command profile' msg
| [ 0:00]   Ignoring invalid command profile invalid.
| [ 0:00] grep "$MSG_FAILED_TO_APPLY_CMD_PROFILE" msg
| [ 0:00] #profiles.sh:47+ grep 'Failed to apply command profile' msg
| [ 0:00]   Failed to apply command profile invalid.
| [ 0:00] 
| [ 0:00] aux lvmconf 'allocation/thin_pool_zero = 1'
| [ 0:00] #profiles.sh:49+ aux lvmconf 'allocation/thin_pool_zero = 1'
| [ 0:00] ## LVMCONF: activation {
| [ 0:01] ## LVMCONF:     checks = 1
| [ 0:01] ## LVMCONF:     monitoring = 0
| [ 0:01] ## LVMCONF:     polling_interval = 1
| [ 0:01] ## LVMCONF:     raid_region_size = 512
| [ 0:01] ## LVMCONF:     retry_deactivation = 1
| [ 0:01] ## LVMCONF:     snapshot_autoextend_percent = 50
| [ 0:01] ## LVMCONF:     snapshot_autoextend_threshold = 50
| [ 0:01] ## LVMCONF:     udev_rules = 1
| [ 0:01] ## LVMCONF:     udev_sync = 1
| [ 0:01] ## LVMCONF:     verify_udev_operations = 1
| [ 0:01] ## LVMCONF: }
| [ 0:01] ## LVMCONF: allocation {
| [ 0:01] ## LVMCONF:     thin_pool_zero = 1
| [ 0:01] ## LVMCONF:     wipe_signatures_when_zeroing_new_lvs = 0
| [ 0:01] ## LVMCONF: }
| [ 0:01] ## LVMCONF: backup {
| [ 0:01] ## LVMCONF:     archive = 0
| [ 0:01] ## LVMCONF:     backup = 0
| [ 0:01] ## LVMCONF: }
| [ 0:01] ## LVMCONF: config {
| [ 0:01] ## LVMCONF:     checks = 1
| [ 0:01] ## LVMCONF: }
| [ 0:01] ## LVMCONF: devices {
| [ 0:01] ## LVMCONF:     cache_dir = "@TESTDIR@/etc"
| [ 0:01] ## LVMCONF:     default_data_alignment = 1
| [ 0:01] ## LVMCONF:     dir = "@TESTDIR@/dev"
| [ 0:01] ## LVMCONF:     filter = "a|.*|"
| [ 0:01] ## LVMCONF:     global_filter = [ "a|@TESTDIR@/dev/mapper/@PREFIX@.*pv[0-9_]*$|", "r|.*|" ]
| [ 0:01] ## LVMCONF:     md_component_detection  = 0
| [ 0:01] ## LVMCONF:     scan = "@TESTDIR@/dev"
| [ 0:01] ## LVMCONF:     sysfs_scan = 1
| [ 0:01] ## LVMCONF:     write_cache_state = 0
| [ 0:01] ## LVMCONF: }
| [ 0:01] ## LVMCONF: dmeventd {
| [ 0:01] ## LVMCONF:     executable = "/sources/boot/LVM2.2.02.177/test/lib/dmeventd"
| [ 0:01] ## LVMCONF: }
| [ 0:01] ## LVMCONF: global {
| [ 0:01] ## LVMCONF:     abort_on_internal_errors = 1
| [ 0:01] ## LVMCONF:     cache_check_executable = "/usr/sbin/cache_check"
| [ 0:01] ## LVMCONF:     cache_dump_executable = "/usr/sbin/cache_dump"
| [ 0:01] ## LVMCONF:     cache_repair_executable = "/usr/sbin/cache_repair"
| [ 0:01] ## LVMCONF:     detect_internal_vg_cache_corruption = 1
| [ 0:01] ## LVMCONF:     fallback_to_local_locking = 0
| [ 0:01] ## LVMCONF:     fsadm_executable = "/sources/boot/LVM2.2.02.177/test/lib/fsadm"
| [ 0:01] ## LVMCONF:     library_dir = "@TESTDIR@/lib"
| [ 0:01] ## LVMCONF:     locking_dir = "@TESTDIR@/var/lock/lvm"
| [ 0:01] ## LVMCONF:     locking_type=1
| [ 0:01] ## LVMCONF:     notify_dbus = 0
| [ 0:01] ## LVMCONF:     si_unit_consistency = 1
| [ 0:01] ## LVMCONF:     thin_check_executable = "/usr/sbin/thin_check"
| [ 0:01] ## LVMCONF:     thin_dump_executable = "/usr/sbin/thin_dump"
| [ 0:01] ## LVMCONF:     thin_repair_executable = "/usr/sbin/thin_repair"
| [ 0:01] ## LVMCONF:     use_lvmetad = 0
| [ 0:01] ## LVMCONF:     use_lvmlockd = 0
| [ 0:01] ## LVMCONF:     use_lvmpolld = 0
| [ 0:01] ## LVMCONF: }
| [ 0:01] ## LVMCONF: log {
| [ 0:01] ## LVMCONF:     activation = 1
| [ 0:01] ## LVMCONF:     file = "@TESTDIR@/debug.log"
| [ 0:01] ## LVMCONF:     indent = 1
| [ 0:01] ## LVMCONF:     level = 9
| [ 0:01] ## LVMCONF:     overwrite = 1
| [ 0:01] ## LVMCONF:     syslog = 0
| [ 0:01] ## LVMCONF:     verbose = 0
| [ 0:01] ## LVMCONF: }
| [ 0:01] 
| [ 0:01] # all profilable items listed here - should pass
| [ 0:01] aux profileconf valid_cmd_profile 'global/units = "h"' \
| [ 0:01] 				  'global/si_unit_consistency = 1' \
| [ 0:01] 				  'global/suffix = 1' \
| [ 0:01] 				  'global/lvdisplay_shows_full_device_path = 0' \
| [ 0:01]                                   'report/aligned = 1' \
| [ 0:01]                                   'report/buffered = 1' \
| [ 0:01]                                   'report/headings = 1' \
| [ 0:01]                                   'report/separator = " "' \
| [ 0:01]                                   'report/prefixes = 0' \
| [ 0:01]                                   'report/quoted = 1' \
| [ 0:01]                                   'report/columns_as_rows = 0' \
| [ 0:01]                                   'report/devtypes_sort = "devtype_name"' \
| [ 0:01]                                   'report/devtypes_cols = "devtype_name,devtype_max_partitions,devtype_description"' \
| [ 0:01]                                   'report/devtypes_cols_verbose = "devtype_name,devtype_max_partitions,devtype_description"' \
| [ 0:01]                                   'report/lvs_sort = "vg_name,lv_name"' \
| [ 0:01]                                   'report/lvs_cols = "lv_name,vg_name,lv_attr,lv_size,pool_lv,origin,data_percent,move_pv,mirror_log,copy_percent,convert_lv"' \
| [ 0:01]                                   'report/lvs_cols_verbose = "lv_name,vg_name,seg_count,lv_attr,lv_size,lv_major,lv_minor,lv_kernel_major,lv_kernel_minor,pool_lv,origin,data_percent,metadata_percent,move_pv,copy_percent,mirror_log,convert_lv,lv_uuid,lv_profile"' \
| [ 0:01]                                   'report/vgs_sort = "vg_name"' \
| [ 0:01]                                   'report/vgs_cols = "vg_name,pv_count,lv_count,snap_count,vg_attr,vg_size,vg_free"' \
| [ 0:01]                                   'report/vgs_cols_verbose = "vg_name,vg_attr,vg_extent_size,pv_count,lv_count,snap_count,vg_size,vg_free,vg_uuid,vg_profile"' \
| [ 0:01]                                   'report/pvs_sort = "pv_name"' \
| [ 0:01]                                   'report/pvs_cols = "pv_name,vg_name,pv_fmt,pv_attr,pv_size,pv_free"' \
| [ 0:01]                                   'report/pvs_cols_verbose = "pv_name,vg_name,pv_fmt,pv_attr,pv_size,pv_free,dev_size,pv_uuid"' \
| [ 0:01]                                   'report/segs_sort = "vg_name,lv_name,seg_start"' \
| [ 0:01]                                   'report/segs_cols = "lv_name,vg_name,lv_attr,stripes,segtype,seg_size"' \
| [ 0:01]                                   'report/segs_cols_verbose = "lv_name,vg_name,lv_attr,seg_start,seg_size,stripes,segtype,stripesize,chunksize"' \
| [ 0:01]                                   'report/pvsegs_sort = "pv_name,pvseg_start"' \
| [ 0:01]                                   'report/pvsegs_cols = "pv_name,vg_name,pv_fmt,pv_attr,pv_size,pv_free,pvseg_start,pvseg_size"' \
| [ 0:01]                                   'report/pvsegs_cols_verbose = "pv_name,vg_name,pv_fmt,pv_attr,pv_size,pv_free,pvseg_start,pvseg_size,lv_name,seg_start_pe,segtype,seg_pe_ranges"'
| [ 0:01] #profiles.sh:52+ aux profileconf valid_cmd_profile 'global/units = "h"' 'global/si_unit_consistency = 1' 'global/suffix = 1' 'global/lvdisplay_shows_full_device_path = 0' 'report/aligned = 1' 'report/buffered = 1' 'report/headings = 1' 'report/separator = " "' 'report/prefixes = 0' 'report/quoted = 1' 'report/columns_as_rows = 0' 'report/devtypes_sort = "devtype_name"' 'report/devtypes_cols = "devtype_name,devtype_max_partitions,devtype_description"' 'report/devtypes_cols_verbose = "devtype_name,devtype_max_partitions,devtype_description"' 'report/lvs_sort = "vg_name,lv_name"' 'report/lvs_cols = "lv_name,vg_name,lv_attr,lv_size,pool_lv,origin,data_percent,move_pv,mirror_log,copy_percent,convert_lv"' 'report/lvs_cols_verbose = "lv_name,vg_name,seg_count,lv_attr,lv_size,lv_major,lv_minor,lv_kernel_major,lv_kernel_minor,pool_lv,origin,data_percent,metadata_percent,move_pv,copy_percent,mirror_log,convert_lv,lv_uuid,lv_profile"' 'report/vgs_sort = "vg_name"' 'report/vgs_cols = "vg_name,pv_count,lv_count,snap_count,vg_attr,vg_size,vg_free"' 'report/vgs_cols_verbose = "vg_name,vg_attr,vg_extent_size,pv_count,lv_count,snap_count,vg_size,vg_free,vg_uuid,vg_profile"' 'report/pvs_sort = "pv_name"' 'report/pvs_cols = "pv_name,vg_name,pv_fmt,pv_attr,pv_size,pv_free"' 'report/pvs_cols_verbose = "pv_name,vg_name,pv_fmt,pv_attr,pv_size,pv_free,dev_size,pv_uuid"' 'report/segs_sort = "vg_name,lv_name,seg_start"' 'report/segs_cols = "lv_name,vg_name,lv_attr,stripes,segtype,seg_size"' 'report/segs_cols_verbose = "lv_name,vg_name,lv_attr,seg_start,seg_size,stripes,segtype,stripesize,chunksize"' 'report/pvsegs_sort = "pv_name,pvseg_start"' 'report/pvsegs_cols = "pv_name,vg_name,pv_fmt,pv_attr,pv_size,pv_free,pvseg_start,pvseg_size"' 'report/pvsegs_cols_verbose = "pv_name,vg_name,pv_fmt,pv_attr,pv_size,pv_free,pvseg_start,pvseg_size,lv_name,seg_start_pe,segtype,seg_pe_ranges"'
| [ 0:01] ## LVMCONF: global {
| [ 0:01] ## LVMCONF:     lvdisplay_shows_full_device_path = 0
| [ 0:01] ## LVMCONF:     si_unit_consistency = 1
| [ 0:01] ## LVMCONF:     suffix = 1
| [ 0:01] ## LVMCONF:     units = "h"
| [ 0:01] ## LVMCONF: }
| [ 0:01] ## LVMCONF: report {
| [ 0:01] ## LVMCONF:     aligned = 1
| [ 0:01] ## LVMCONF:     buffered = 1
| [ 0:01] ## LVMCONF:     columns_as_rows = 0
| [ 0:01] ## LVMCONF:     devtypes_cols = "devtype_name,devtype_max_partitions,devtype_description"
| [ 0:01] ## LVMCONF:     devtypes_cols_verbose = "devtype_name,devtype_max_partitions,devtype_description"
| [ 0:01] ## LVMCONF:     devtypes_sort = "devtype_name"
| [ 0:01] ## LVMCONF:     headings = 1
| [ 0:01] ## LVMCONF:     lvs_cols = "lv_name,vg_name,lv_attr,lv_size,pool_lv,origin,data_percent,move_pv,mirror_log,copy_percent,convert_lv"
| [ 0:01] ## LVMCONF:     lvs_cols_verbose = "lv_name,vg_name,seg_count,lv_attr,lv_size,lv_major,lv_minor,lv_kernel_major,lv_kernel_minor,pool_lv,origin,data_percent,metadata_percent,move_pv,copy_percent,mirror_log,convert_lv,lv_uuid,lv_profile"
| [ 0:01] ## LVMCONF:     lvs_sort = "vg_name,lv_name"
| [ 0:01] ## LVMCONF:     prefixes = 0
| [ 0:01] ## LVMCONF:     pvs_cols = "pv_name,vg_name,pv_fmt,pv_attr,pv_size,pv_free"
| [ 0:01] ## LVMCONF:     pvs_cols_verbose = "pv_name,vg_name,pv_fmt,pv_attr,pv_size,pv_free,dev_size,pv_uuid"
| [ 0:01] ## LVMCONF:     pvs_sort = "pv_name"
| [ 0:01] ## LVMCONF:     pvsegs_cols = "pv_name,vg_name,pv_fmt,pv_attr,pv_size,pv_free,pvseg_start,pvseg_size"
| [ 0:01] ## LVMCONF:     pvsegs_cols_verbose = "pv_name,vg_name,pv_fmt,pv_attr,pv_size,pv_free,pvseg_start,pvseg_size,lv_name,seg_start_pe,segtype,seg_pe_ranges"
| [ 0:01] ## LVMCONF:     pvsegs_sort = "pv_name,pvseg_start"
| [ 0:01] ## LVMCONF:     quoted = 1
| [ 0:01] ## LVMCONF:     segs_cols = "lv_name,vg_name,lv_attr,stripes,segtype,seg_size"
| [ 0:01] ## LVMCONF:     segs_cols_verbose = "lv_name,vg_name,lv_attr,seg_start,seg_size,stripes,segtype,stripesize,chunksize"
| [ 0:01] ## LVMCONF:     segs_sort = "vg_name,lv_name,seg_start"
| [ 0:01] ## LVMCONF:     separator = " "
| [ 0:01] ## LVMCONF:     vgs_cols = "vg_name,pv_count,lv_count,snap_count,vg_attr,vg_size,vg_free"
| [ 0:01] ## LVMCONF:     vgs_cols_verbose = "vg_name,vg_attr,vg_extent_size,pv_count,lv_count,snap_count,vg_size,vg_free,vg_uuid,vg_profile"
| [ 0:01] ## LVMCONF:     vgs_sort = "vg_name"
| [ 0:01] ## LVMCONF: }
| [ 0:01] 
| [ 0:01] aux profileconf valid_mda_profile 'allocation/thin_pool_zero = 0' \
| [ 0:01] 				  'allocation/thin_pool_discards = "passdown"' \
| [ 0:01] 				  'allocation/thin_pool_chunk_size = 64' \
| [ 0:01] 				  'activation/thin_pool_autoextend_threshold = 100' \
| [ 0:01] 				  'activation/thin_pool_autoextend_percent = 20'
| [ 0:01] #profiles.sh:82+ aux profileconf valid_mda_profile 'allocation/thin_pool_zero = 0' 'allocation/thin_pool_discards = "passdown"' 'allocation/thin_pool_chunk_size = 64' 'activation/thin_pool_autoextend_threshold = 100' 'activation/thin_pool_autoextend_percent = 20'
| [ 0:01] ## LVMCONF: activation {
| [ 0:01] ## LVMCONF:     thin_pool_autoextend_percent = 20
| [ 0:01] ## LVMCONF:     thin_pool_autoextend_threshold = 100
| [ 0:01] ## LVMCONF: }
| [ 0:01] ## LVMCONF: allocation {
| [ 0:01] ## LVMCONF:     thin_pool_chunk_size = 64
| [ 0:01] ## LVMCONF:     thin_pool_discards = "passdown"
| [ 0:01] ## LVMCONF:     thin_pool_zero = 0
| [ 0:01] ## LVMCONF: }
| [ 0:01] 
| [ 0:01] aux profileconf extra_mda_profile 'allocation/thin_pool_chunk_size = 128'
| [ 0:01] #profiles.sh:88+ aux profileconf extra_mda_profile 'allocation/thin_pool_chunk_size = 128'
| [ 0:01] ## LVMCONF: allocation {
| [ 0:01] ## LVMCONF:     thin_pool_chunk_size = 128
| [ 0:01] ## LVMCONF: }
| [ 0:01] 
| [ 0:01] pvs --profile valid_cmd_profile 2>msg
| [ 0:01] #profiles.sh:90+ pvs --profile valid_cmd_profile
| [ 0:01] not grep "$MSG_NOT_PROFILABLE" msg
| [ 0:01] #profiles.sh:91+ not grep 'not customizable by a profile' msg
| [ 0:01] not grep "$MSG_IGNORING_INVALID_CMD_PROFILE" msg
| [ 0:01] #profiles.sh:92+ not grep 'Ignoring invalid command profile' msg
| [ 0:01] not grep "$MSG_IGNORING_INVALID_MDA_PROFILE" msg
| [ 0:01] #profiles.sh:93+ not grep 'Ignoring invalid metadata profile' msg
| [ 0:01] 
| [ 0:01] not pvs --profile valid_mda_profile 2>msg
| [ 0:01] #profiles.sh:95+ not pvs --profile valid_mda_profile
| [ 0:01] grep "$MSG_MDA_PROFILABLE_ONLY" msg
| [ 0:01] #profiles.sh:96+ grep 'customizable by metadata profile only, not command profile' msg
| [ 0:01]   Configuration option "activation/thin_pool_autoextend_percent" is customizable by metadata profile only, not command profile.
| [ 0:01]   Configuration option "activation/thin_pool_autoextend_threshold" is customizable by metadata profile only, not command profile.
| [ 0:01]   Configuration option "allocation/thin_pool_chunk_size" is customizable by metadata profile only, not command profile.
| [ 0:01]   Configuration option "allocation/thin_pool_discards" is customizable by metadata profile only, not command profile.
| [ 0:01]   Configuration option "allocation/thin_pool_zero" is customizable by metadata profile only, not command profile.
| [ 0:01] grep "$MSG_IGNORING_INVALID_CMD_PROFILE" msg
| [ 0:01] #profiles.sh:97+ grep 'Ignoring invalid command profile' msg
| [ 0:01]   Ignoring invalid command profile valid_mda_profile.
| [ 0:01] not grep "$MSG_IGNORING_INVALID_MDA_PROFILE" msg
| [ 0:01] #profiles.sh:98+ not grep 'Ignoring invalid metadata profile' msg
| [ 0:01] 
| [ 0:01] # attaching/detaching profiles to VG/LV
| [ 0:01] aux prepare_pvs 1 8
| [ 0:01] #profiles.sh:101+ aux prepare_pvs 1 8
| [ 0:01] ## preparing loop device....ok (/dev/loop0)
| [ 0:01] ## preparing 1 devices...lib/utils: line 212: DM_UDEV_COOKIE: unbound variable
| [ 0:01] set +vx; STACKTRACE; set -vx
| [ 0:01] ##profiles.sh:101+ set +vx
| [ 0:01] ## - /lfskernel/sources/boot/LVM2.2.02.177/test/shell/profiles.sh:101
| [ 0:01] ## 1 STACKTRACE() called from /lfskernel/sources/boot/LVM2.2.02.177/test/shell/profiles.sh:101
| [ 0:01] <======== Info ========>
| [ 0:01] ## DMINFO:   Name             Maj Min Stat Open Targ Event  UUID                                                                
| [ 0:01] ## DMINFO:   @PREFIX@pv1  253   3 L--w    0    1      0 TEST-@PREFIX@pv1                                                
| [ 0:01] <======== Active table ========>
| [ 0:01] ## DMTABLE:  @PREFIX@pv1: 0 16384 linear 7:0 2048
| [ 0:01] <======== Inactive table ========>
| [ 0:01] ## DMITABLE: @PREFIX@pv1: 
| [ 0:01] <======== Status ========>
| [ 0:01] ## DMSTATUS: @PREFIX@pv1: 0 16384 linear 
| [ 0:01] <======== Tree ========>
| [ 0:01] ## DMTREE:   @PREFIX@pv1 (253:3)
| [ 0:01] ## DMTREE:    `- (7:0)
| [ 0:01] ## DMTREE:   LFS_vg-lfs (253:2)
| [ 0:01] ## DMTREE:    `- (8:16)
| [ 0:01] ## DMTREE:   centos-swap (253:1)
| [ 0:01] ## DMTREE:    `- (8:2)
| [ 0:01] ## DMTREE:   centos-root (253:0)
| [ 0:01] ## DMTREE:    `- (8:2)
| [ 0:01] <======== Recursive list of @TESTDIR@/dev ========>
| [ 0:01] ## LSLR:	@TESTDIR@/dev:
| [ 0:01] ## LSLR:	total 4
| [ 0:01] ## LSLR:	brw-r--r-- 1 root root 7, 0 Feb 21 02:27 loop0
| [ 0:01] ## LSLR:	brw-r--r-- 1 root root 7, 1 Feb 21 02:27 loop1
| [ 0:01] ## LSLR:	brw-r--r-- 1 root root 7, 2 Feb 21 02:27 loop2
| [ 0:01] ## LSLR:	brw-r--r-- 1 root root 7, 3 Feb 21 02:27 loop3
| [ 0:01] ## LSLR:	brw-r--r-- 1 root root 7, 4 Feb 21 02:27 loop4
| [ 0:01] ## LSLR:	brw-r--r-- 1 root root 7, 5 Feb 21 02:27 loop5
| [ 0:01] ## LSLR:	brw-r--r-- 1 root root 7, 6 Feb 21 02:27 loop6
| [ 0:01] ## LSLR:	brw-r--r-- 1 root root 7, 7 Feb 21 02:27 loop7
| [ 0:01] ## LSLR:	drwxr-xr-x 2 root root 4096 Feb 21 02:27 mapper
| [ 0:01] ## LSLR:	crw-r--r-- 1 root root 1, 3 Feb 21 02:27 testnull
| [ 0:01] ## LSLR:	
| [ 0:01] ## LSLR:	@TESTDIR@/dev/mapper:
| [ 0:01] ## LSLR:	total 0
| [ 0:01] ## LSLR:	brw------- 1 root root 253,   3 Feb 21 02:27 @PREFIX@pv1
| [ 0:01] ## LSLR:	crw------- 1 root root  10, 236 Feb 21 02:27 control
| [ 0:01] <======== Udev DB content ========>
| [ 0:01] ## UDEV:	P: /devices/virtual/block/dm-0
| [ 0:01] ## UDEV:	N: dm-0
| [ 0:01] ## UDEV:	E: DEVNAME=/dev/dm-0
| [ 0:01] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-0
| [ 0:01] ## UDEV:	E: DEVTYPE=disk
| [ 0:01] ## UDEV:	E: MAJOR=253
| [ 0:01] ## UDEV:	E: MINOR=0
| [ 0:01] ## UDEV:	E: SUBSYSTEM=block
| [ 0:01] ## UDEV:	
| [ 0:01] ## UDEV:	P: /devices/virtual/block/dm-1
| [ 0:01] ## UDEV:	N: dm-1
| [ 0:01] ## UDEV:	E: DEVNAME=/dev/dm-1
| [ 0:01] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-1
| [ 0:01] ## UDEV:	E: DEVTYPE=disk
| [ 0:01] ## UDEV:	E: MAJOR=253
| [ 0:01] ## UDEV:	E: MINOR=1
| [ 0:01] ## UDEV:	E: SUBSYSTEM=block
| [ 0:01] ## UDEV:	
| [ 0:01] ## UDEV:	P: /devices/virtual/block/dm-2
| [ 0:01] ## UDEV:	N: dm-2
| [ 0:01] ## UDEV:	E: DEVNAME=/dev/dm-2
| [ 0:01] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-2
| [ 0:01] ## UDEV:	E: DEVTYPE=disk
| [ 0:01] ## UDEV:	E: MAJOR=253
| [ 0:01] ## UDEV:	E: MINOR=2
| [ 0:01] ## UDEV:	E: SUBSYSTEM=block
| [ 0:01] ## UDEV:	
| [ 0:01] ## UDEV:	P: /devices/virtual/block/dm-3
| [ 0:01] ## UDEV:	N: dm-3
| [ 0:01] ## UDEV:	E: DEVNAME=/dev/dm-3
| [ 0:01] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-3
| [ 0:01] ## UDEV:	E: DEVTYPE=disk
| [ 0:01] ## UDEV:	E: MAJOR=253
| [ 0:01] ## UDEV:	E: MINOR=3
| [ 0:01] ## UDEV:	E: SUBSYSTEM=block
| [ 0:01] ## UDEV:	
| [ 0:01] ## UDEV:	P: /devices/virtual/block/loop0
| [ 0:01] ## UDEV:	N: loop0
| [ 0:01] ## UDEV:	E: DEVNAME=/dev/loop0
| [ 0:01] ## UDEV:	E: DEVPATH=/devices/virtual/block/loop0
| [ 0:01] ## UDEV:	E: DEVTYPE=disk
| [ 0:01] ## UDEV:	E: MAJOR=7
| [ 0:01] ## UDEV:	E: MINOR=0
| [ 0:01] ## UDEV:	E: SUBSYSTEM=block
| [ 0:01] ## UDEV:	
| [ 0:01] <======== Script file "profiles.sh" ========>
| [ 0:01] ## Line: 1 	 #!/usr/bin/env bash
| [ 0:01] ## Line: 2 	 
| [ 0:01] ## Line: 3 	 # Copyright (C) 2013 Red Hat, Inc. All rights reserved.
| [ 0:01] ## Line: 4 	 #
| [ 0:01] ## Line: 5 	 # This copyrighted material is made available to anyone wishing to use,
| [ 0:01] ## Line: 6 	 # modify, copy, or redistribute it subject to the terms and conditions
| [ 0:01] ## Line: 7 	 # of the GNU General Public License v.2.
| [ 0:01] ## Line: 8 	 #
| [ 0:01] ## Line: 9 	 # You should have received a copy of the GNU General Public License
| [ 0:01] ## Line: 10 	 # along with this program; if not, write to the Free Software Foundation,
| [ 0:01] ## Line: 11 	 # Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA
| [ 0:01] ## Line: 12 	 #
| [ 0:01] ## Line: 13 	 # test basic profile functionality
| [ 0:01] ## Line: 14 	 #
| [ 0:01] ## Line: 15 	 
| [ 0:01] ## Line: 16 	 SKIP_WITH_LVMLOCKD=1
| [ 0:01] ## Line: 17 	 SKIP_WITH_LVMPOLLD=1
| [ 0:01] ## Line: 18 	 
| [ 0:01] ## Line: 19 	 . lib/inittest
| [ 0:01] ## Line: 20 	 
| [ 0:01] ## Line: 21 	 MSG_FAILED_TO_APPLY_CMD_PROFILE="Failed to apply command profile"
| [ 0:01] ## Line: 22 	 MSG_IGNORING_INVALID_CMD_PROFILE="Ignoring invalid command profile"
| [ 0:01] ## Line: 23 	 MSG_FAILED_TO_APPLY_MDA_PROFILE="Failed to apply metadata profile"
| [ 0:01] ## Line: 24 	 MSG_IGNORING_INVALID_MDA_PROFILE="Ignoring invalid metadata profile"
| [ 0:01] ## Line: 25 	 MSG_NOT_PROFILABLE="not customizable by a profile"
| [ 0:01] ## Line: 26 	 MSG_CMD_PROFILABLE_ONLY="customizable by command profile only, not metadata profile"
| [ 0:01] ## Line: 27 	 MSG_MDA_PROFILABLE_ONLY="customizable by metadata profile only, not command profile"
| [ 0:01] ## Line: 28 	 
| [ 0:01] ## Line: 29 	 # fail if the profile requested by --profile cmdline option is not present
| [ 0:01] ## Line: 30 	 not pvs --profile nonexistent 2>&1 | grep "$MSG_FAILED_TO_APPLY_CMD_PROFILE"
| [ 0:01] ## Line: 31 	 
| [ 0:01] ## Line: 32 	 # config/checks=1: warning message about setting not being profilable +
| [ 0:01] ## Line: 33 	 #                  summary error message about invalid profile
| [ 0:01] ## Line: 34 	 # config/checks=0: just summary error message about invalid profile
| [ 0:01] ## Line: 35 	 aux profileconf invalid 'log/prefix=" "'
| [ 0:01] ## Line: 36 	 
| [ 0:01] ## Line: 37 	 aux lvmconf 'config/checks = 0'
| [ 0:01] ## Line: 38 	 not pvs --profile invalid 2>msg
| [ 0:01] ## Line: 39 	 not grep "$MSG_NOT_PROFILABLE" msg
| [ 0:01] ## Line: 40 	 grep "$MSG_IGNORING_INVALID_CMD_PROFILE" msg
| [ 0:01] ## Line: 41 	 grep "$MSG_FAILED_TO_APPLY_CMD_PROFILE" msg
| [ 0:01] ## Line: 42 	 
| [ 0:01] ## Line: 43 	 aux lvmconf 'config/checks = 1'
| [ 0:01] ## Line: 44 	 not pvs --profile invalid 2>msg
| [ 0:01] ## Line: 45 	 grep "$MSG_NOT_PROFILABLE" msg
| [ 0:01] ## Line: 46 	 grep "$MSG_IGNORING_INVALID_CMD_PROFILE" msg
| [ 0:01] ## Line: 47 	 grep "$MSG_FAILED_TO_APPLY_CMD_PROFILE" msg
| [ 0:01] ## Line: 48 	 
| [ 0:01] ## Line: 49 	 aux lvmconf 'allocation/thin_pool_zero = 1'
| [ 0:01] ## Line: 50 	 
| [ 0:01] ## Line: 51 	 # all profilable items listed here - should pass
| [ 0:01] ## Line: 52 	 aux profileconf valid_cmd_profile 'global/units = "h"' \
| [ 0:01] ## Line: 53 	 				  'global/si_unit_consistency = 1' \
| [ 0:01] ## Line: 54 	 				  'global/suffix = 1' \
| [ 0:01] ## Line: 55 	 				  'global/lvdisplay_shows_full_device_path = 0' \
| [ 0:01] ## Line: 56 	                                   'report/aligned = 1' \
| [ 0:01] ## Line: 57 	                                   'report/buffered = 1' \
| [ 0:01] ## Line: 58 	                                   'report/headings = 1' \
| [ 0:01] ## Line: 59 	                                   'report/separator = " "' \
| [ 0:01] ## Line: 60 	                                   'report/prefixes = 0' \
| [ 0:01] ## Line: 61 	                                   'report/quoted = 1' \
| [ 0:01] ## Line: 62 	                                   'report/columns_as_rows = 0' \
| [ 0:01] ## Line: 63 	                                   'report/devtypes_sort = "devtype_name"' \
| [ 0:01] ## Line: 64 	                                   'report/devtypes_cols = "devtype_name,devtype_max_partitions,devtype_description"' \
| [ 0:01] ## Line: 65 	                                   'report/devtypes_cols_verbose = "devtype_name,devtype_max_partitions,devtype_description"' \
| [ 0:01] ## Line: 66 	                                   'report/lvs_sort = "vg_name,lv_name"' \
| [ 0:01] ## Line: 67 	                                   'report/lvs_cols = "lv_name,vg_name,lv_attr,lv_size,pool_lv,origin,data_percent,move_pv,mirror_log,copy_percent,convert_lv"' \
| [ 0:01] ## Line: 68 	                                   'report/lvs_cols_verbose = "lv_name,vg_name,seg_count,lv_attr,lv_size,lv_major,lv_minor,lv_kernel_major,lv_kernel_minor,pool_lv,origin,data_percent,metadata_percent,move_pv,copy_percent,mirror_log,convert_lv,lv_uuid,lv_profile"' \
| [ 0:01] ## Line: 69 	                                   'report/vgs_sort = "vg_name"' \
| [ 0:01] ## Line: 70 	                                   'report/vgs_cols = "vg_name,pv_count,lv_count,snap_count,vg_attr,vg_size,vg_free"' \
| [ 0:01] ## Line: 71 	                                   'report/vgs_cols_verbose = "vg_name,vg_attr,vg_extent_size,pv_count,lv_count,snap_count,vg_size,vg_free,vg_uuid,vg_profile"' \
| [ 0:01] ## Line: 72 	                                   'report/pvs_sort = "pv_name"' \
| [ 0:01] ## Line: 73 	                                   'report/pvs_cols = "pv_name,vg_name,pv_fmt,pv_attr,pv_size,pv_free"' \
| [ 0:01] ## Line: 74 	                                   'report/pvs_cols_verbose = "pv_name,vg_name,pv_fmt,pv_attr,pv_size,pv_free,dev_size,pv_uuid"' \
| [ 0:01] ## Line: 75 	                                   'report/segs_sort = "vg_name,lv_name,seg_start"' \
| [ 0:01] ## Line: 76 	                                   'report/segs_cols = "lv_name,vg_name,lv_attr,stripes,segtype,seg_size"' \
| [ 0:01] ## Line: 77 	                                   'report/segs_cols_verbose = "lv_name,vg_name,lv_attr,seg_start,seg_size,stripes,segtype,stripesize,chunksize"' \
| [ 0:01] ## Line: 78 	                                   'report/pvsegs_sort = "pv_name,pvseg_start"' \
| [ 0:01] ## Line: 79 	                                   'report/pvsegs_cols = "pv_name,vg_name,pv_fmt,pv_attr,pv_size,pv_free,pvseg_start,pvseg_size"' \
| [ 0:01] ## Line: 80 	                                   'report/pvsegs_cols_verbose = "pv_name,vg_name,pv_fmt,pv_attr,pv_size,pv_free,pvseg_start,pvseg_size,lv_name,seg_start_pe,segtype,seg_pe_ranges"'
| [ 0:01] ## Line: 81 	 
| [ 0:01] ## Line: 82 	 aux profileconf valid_mda_profile 'allocation/thin_pool_zero = 0' \
| [ 0:01] ## Line: 83 	 				  'allocation/thin_pool_discards = "passdown"' \
| [ 0:01] ## Line: 84 	 				  'allocation/thin_pool_chunk_size = 64' \
| [ 0:01] ## Line: 85 	 				  'activation/thin_pool_autoextend_threshold = 100' \
| [ 0:01] ## Line: 86 	 				  'activation/thin_pool_autoextend_percent = 20'
| [ 0:01] ## Line: 87 	 
| [ 0:01] ## Line: 88 	 aux profileconf extra_mda_profile 'allocation/thin_pool_chunk_size = 128'
| [ 0:01] ## Line: 89 	 
| [ 0:01] ## Line: 90 	 pvs --profile valid_cmd_profile 2>msg
| [ 0:01] ## Line: 91 	 not grep "$MSG_NOT_PROFILABLE" msg
| [ 0:01] ## Line: 92 	 not grep "$MSG_IGNORING_INVALID_CMD_PROFILE" msg
| [ 0:01] ## Line: 93 	 not grep "$MSG_IGNORING_INVALID_MDA_PROFILE" msg
| [ 0:01] ## Line: 94 	 
| [ 0:01] ## Line: 95 	 not pvs --profile valid_mda_profile 2>msg
| [ 0:01] ## Line: 96 	 grep "$MSG_MDA_PROFILABLE_ONLY" msg
| [ 0:01] ## Line: 97 	 grep "$MSG_IGNORING_INVALID_CMD_PROFILE" msg
| [ 0:01] ## Line: 98 	 not grep "$MSG_IGNORING_INVALID_MDA_PROFILE" msg
| [ 0:01] ## Line: 99 	 
| [ 0:01] ## Line: 100 	 # attaching/detaching profiles to VG/LV
| [ 0:01] ## Line: 101 	 aux prepare_pvs 1 8
| [ 0:01] ## Line: 102 	 pvcreate "$dev1"
| [ 0:01] ## Line: 103 	 vgcreate $vg1 "$dev1"
| [ 0:01] ## Line: 104 	 check vg_field $vg1 vg_profile ""
| [ 0:01] ## Line: 105 	 lvcreate -l 1 -n $lv1 $vg1
| [ 0:01] ## Line: 106 	 check lv_field $vg1/$lv1 lv_profile ""
| [ 0:01] ## Line: 107 	 vgchange --profile valid_mda_profile $vg1
| [ 0:01] ## Line: 108 	 check vg_field $vg1 vg_profile valid_mda_profile
| [ 0:01] ## Line: 109 	 check lv_field $vg1/$lv1 lv_profile ""
| [ 0:01] ## Line: 110 	 lvchange --profile extra_mda_profile $vg1/$lv1
| [ 0:01] ## Line: 111 	 check vg_field $vg1 vg_profile valid_mda_profile
| [ 0:01] ## Line: 112 	 check lv_field $vg1/$lv1 lv_profile extra_mda_profile
| [ 0:01] ## Line: 113 	 vgchange --detachprofile $vg1
| [ 0:01] ## Line: 114 	 check vg_field $vg1 vg_profile ""
| [ 0:01] ## Line: 115 	 check lv_field $vg1/$lv1 lv_profile extra_mda_profile
| [ 0:01] ## Line: 116 	 lvchange --detachprofile $vg1/$lv1
| [ 0:01] ## Line: 117 	 check vg_field $vg1 vg_profile ""
| [ 0:01] ## Line: 118 	 check lv_field $vg1/$lv1 lv_profile ""
| [ 0:01] ## Line: 119 	 
| [ 0:01] ## Line: 120 	 # dumpconfig and merged lvm.conf + profile
| [ 0:01] ## Line: 121 	 aux lvmconf 'global/units="m"'
| [ 0:01] ## Line: 122 	 aux profileconf extra_cmd_profile 'global/units="h"'
| [ 0:01] ## Line: 123 	 lvm dumpconfig &>out
| [ 0:01] ## Line: 124 	 grep 'units="m"' out
| [ 0:01] ## Line: 125 	 lvm dumpconfig --profile extra_cmd_profile --mergedconfig >out
| [ 0:01] ## Line: 126 	 grep 'units="h"' out
| [ 0:01] ## Line: 127 	 
| [ 0:01] ## Line: 128 	 # dumpconfig --profilable output must be usable as a profile
| [ 0:01] ## Line: 129 	 lvm dumpconfig --type profilable-command --file etc/profile/generated.profile
| [ 0:01] ## Line: 130 	 pvs --profile generated &> msg
| [ 0:01] ## Line: 131 	 not grep "$MSG_NOT_PROFILABLE" msg
| [ 0:01] ## Line: 132 	 not grep "$MSG_IGNORING_INVALID_CMD_PROFILE" msg
| [ 0:01] ## Line: 133 	 
| [ 0:01] ## Line: 134 	 vgremove -ff $vg1
| [ 0:01] aux teardown
| [ 0:01] #profiles.sh:1+ aux teardown
| [ 0:01] ## teardown.........ok
###       failed: [ndev-vanilla] shell/profiles.sh

| [ 0:00] Library version:   1.02.146 (2017-12-18)
| [ 0:00] Driver version:    4.35.0
| [ 0:00] Kernel is Linux localhost.localdomain 3.10.0-693.11.1.el7.x86_64 #1 SMP Mon Dec 4 23:52:40 UTC 2017 x86_64 GNU/Linux
| [ 0:00] Selinux mode is not installed.
| [ 0:00]               total        used        free      shared  buff/cache   available
| [ 0:00] Mem:           7822        1080        4144          10        2597        6435
| [ 0:00] Swap:          4095           0        4095
| [ 0:00] Filesystem      Size  Used Avail Use% Mounted on
| [ 0:00] /dev/sdc1        18G  8.4G  8.4G  50% /
| [ 0:00] /dev/sdd1        51G  6.1G   43G  13% /lfskernel
| [ 0:00] devtmpfs        3.9G     0  3.9G   0% /dev
| [ 0:00] tmpfs           3.9G     0  3.9G   0% /run
| [ 0:00] @TESTDIR=/tmp/LVMTEST15228.2rJb1GtY5k
| [ 0:00] @PREFIX=LVMTEST15228
| [ 0:00] ## LVMCONF: activation {
| [ 0:00] ## LVMCONF:     checks = 1
| [ 0:00] ## LVMCONF:     monitoring = 0
| [ 0:00] ## LVMCONF:     polling_interval = 1
| [ 0:00] ## LVMCONF:     raid_region_size = 512
| [ 0:00] ## LVMCONF:     retry_deactivation = 1
| [ 0:00] ## LVMCONF:     snapshot_autoextend_percent = 50
| [ 0:00] ## LVMCONF:     snapshot_autoextend_threshold = 50
| [ 0:00] ## LVMCONF:     udev_rules = 1
| [ 0:00] ## LVMCONF:     udev_sync = 1
| [ 0:00] ## LVMCONF:     verify_udev_operations = 1
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: allocation {
| [ 0:00] ## LVMCONF:     wipe_signatures_when_zeroing_new_lvs = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: backup {
| [ 0:00] ## LVMCONF:     archive = 0
| [ 0:00] ## LVMCONF:     backup = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: devices {
| [ 0:00] ## LVMCONF:     cache_dir = "@TESTDIR@/etc"
| [ 0:00] ## LVMCONF:     default_data_alignment = 1
| [ 0:00] ## LVMCONF:     dir = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     filter = "a|.*|"
| [ 0:00] ## LVMCONF:     global_filter = [ "a|@TESTDIR@/dev/mapper/@PREFIX@.*pv[0-9_]*$|", "r|.*|" ]
| [ 0:00] ## LVMCONF:     md_component_detection  = 0
| [ 0:00] ## LVMCONF:     scan = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     sysfs_scan = 1
| [ 0:00] ## LVMCONF:     write_cache_state = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: dmeventd {
| [ 0:00] ## LVMCONF:     executable = "/sources/boot/LVM2.2.02.177/test/lib/dmeventd"
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: global {
| [ 0:00] ## LVMCONF:     abort_on_internal_errors = 1
| [ 0:00] ## LVMCONF:     cache_check_executable = "/usr/sbin/cache_check"
| [ 0:00] ## LVMCONF:     cache_dump_executable = "/usr/sbin/cache_dump"
| [ 0:00] ## LVMCONF:     cache_repair_executable = "/usr/sbin/cache_repair"
| [ 0:00] ## LVMCONF:     detect_internal_vg_cache_corruption = 1
| [ 0:00] ## LVMCONF:     fallback_to_local_locking = 0
| [ 0:00] ## LVMCONF:     fsadm_executable = "/sources/boot/LVM2.2.02.177/test/lib/fsadm"
| [ 0:00] ## LVMCONF:     library_dir = "@TESTDIR@/lib"
| [ 0:00] ## LVMCONF:     locking_dir = "@TESTDIR@/var/lock/lvm"
| [ 0:00] ## LVMCONF:     locking_type=1
| [ 0:00] ## LVMCONF:     notify_dbus = 0
| [ 0:00] ## LVMCONF:     si_unit_consistency = 1
| [ 0:00] ## LVMCONF:     thin_check_executable = "/usr/sbin/thin_check"
| [ 0:00] ## LVMCONF:     thin_dump_executable = "/usr/sbin/thin_dump"
| [ 0:00] ## LVMCONF:     thin_repair_executable = "/usr/sbin/thin_repair"
| [ 0:00] ## LVMCONF:     use_lvmetad = 0
| [ 0:00] ## LVMCONF:     use_lvmlockd = 0
| [ 0:00] ## LVMCONF:     use_lvmpolld = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: log {
| [ 0:00] ## LVMCONF:     activation = 1
| [ 0:00] ## LVMCONF:     file = "@TESTDIR@/debug.log"
| [ 0:00] ## LVMCONF:     indent = 1
| [ 0:00] ## LVMCONF:     level = 9
| [ 0:00] ## LVMCONF:     overwrite = 1
| [ 0:00] ## LVMCONF:     syslog = 0
| [ 0:00] ## LVMCONF:     verbose = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] <======== Processing test: "pv-check-dev-size.sh" ========>
| [ 0:00] 
| [ 0:00] aux prepare_pvs 1 8
| [ 0:00] #pv-check-dev-size.sh:18+ aux prepare_pvs 1 8
| [ 0:00] ## preparing loop device....ok (/dev/loop0)
| [ 0:00] ## preparing 1 devices...lib/utils: line 212: DM_UDEV_COOKIE: unbound variable
| [ 0:00] set +vx; STACKTRACE; set -vx
| [ 0:00] ##pv-check-dev-size.sh:18+ set +vx
| [ 0:00] ## - /lfskernel/sources/boot/LVM2.2.02.177/test/shell/pv-check-dev-size.sh:18
| [ 0:00] ## 1 STACKTRACE() called from /lfskernel/sources/boot/LVM2.2.02.177/test/shell/pv-check-dev-size.sh:18
| [ 0:00] <======== Info ========>
| [ 0:00] ## DMINFO:   Name             Maj Min Stat Open Targ Event  UUID                                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv1  253   3 L--w    0    1      0 TEST-@PREFIX@pv1                                                
| [ 0:00] <======== Active table ========>
| [ 0:00] ## DMTABLE:  @PREFIX@pv1: 0 16384 linear 7:0 2048
| [ 0:00] <======== Inactive table ========>
| [ 0:00] ## DMITABLE: @PREFIX@pv1: 
| [ 0:00] <======== Status ========>
| [ 0:00] ## DMSTATUS: @PREFIX@pv1: 0 16384 linear 
| [ 0:00] <======== Tree ========>
| [ 0:00] ## DMTREE:   @PREFIX@pv1 (253:3)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   LFS_vg-lfs (253:2)
| [ 0:00] ## DMTREE:    `- (8:16)
| [ 0:00] ## DMTREE:   centos-swap (253:1)
| [ 0:00] ## DMTREE:    `- (8:2)
| [ 0:00] ## DMTREE:   centos-root (253:0)
| [ 0:00] ## DMTREE:    `- (8:2)
| [ 0:00] <======== Recursive list of @TESTDIR@/dev ========>
| [ 0:00] ## LSLR:	@TESTDIR@/dev:
| [ 0:00] ## LSLR:	total 4
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 0 Feb 21 02:27 loop0
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 1 Feb 21 02:27 loop1
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 2 Feb 21 02:27 loop2
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 3 Feb 21 02:27 loop3
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 4 Feb 21 02:27 loop4
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 5 Feb 21 02:27 loop5
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 6 Feb 21 02:27 loop6
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 7 Feb 21 02:27 loop7
| [ 0:00] ## LSLR:	drwxr-xr-x 2 root root 4096 Feb 21 02:27 mapper
| [ 0:00] ## LSLR:	crw-r--r-- 1 root root 1, 3 Feb 21 02:27 testnull
| [ 0:00] ## LSLR:	
| [ 0:00] ## LSLR:	@TESTDIR@/dev/mapper:
| [ 0:00] ## LSLR:	total 0
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   3 Feb 21 02:27 @PREFIX@pv1
| [ 0:00] ## LSLR:	crw------- 1 root root  10, 236 Feb 21 02:27 control
| [ 0:00] <======== Udev DB content ========>
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-0
| [ 0:00] ## UDEV:	N: dm-0
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-0
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-0
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=0
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-1
| [ 0:00] ## UDEV:	N: dm-1
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-1
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-1
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=1
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-2
| [ 0:00] ## UDEV:	N: dm-2
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-2
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-2
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=2
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-3
| [ 0:00] ## UDEV:	N: dm-3
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-3
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-3
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=3
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/loop0
| [ 0:00] ## UDEV:	N: loop0
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/loop0
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/loop0
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=7
| [ 0:00] ## UDEV:	E: MINOR=0
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] <======== Script file "pv-check-dev-size.sh" ========>
| [ 0:00] ## Line: 1 	 #!/usr/bin/env bash
| [ 0:00] ## Line: 2 	 
| [ 0:00] ## Line: 3 	 # Copyright (C) 2016 Red Hat, Inc. All rights reserved.
| [ 0:00] ## Line: 4 	 #
| [ 0:00] ## Line: 5 	 # This copyrighted material is made available to anyone wishing to use,
| [ 0:00] ## Line: 6 	 # modify, copy, or redistribute it subject to the terms and conditions
| [ 0:00] ## Line: 7 	 # of the GNU General Public License v.2.
| [ 0:00] ## Line: 8 	 #
| [ 0:00] ## Line: 9 	 # You should have received a copy of the GNU General Public License
| [ 0:00] ## Line: 10 	 # along with this program; if not, write to the Free Software Foundation,
| [ 0:00] ## Line: 11 	 # Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA
| [ 0:00] ## Line: 12 	 
| [ 0:00] ## Line: 13 	 SKIP_WITH_LVMLOCKD=1
| [ 0:00] ## Line: 14 	 SKIP_WITH_LVMPOLLD=1
| [ 0:00] ## Line: 15 	 
| [ 0:00] ## Line: 16 	 . lib/inittest
| [ 0:00] ## Line: 17 	 
| [ 0:00] ## Line: 18 	 aux prepare_pvs 1 8
| [ 0:00] ## Line: 19 	 
| [ 0:00] ## Line: 20 	 aux lvmconf 'metadata/check_pv_device_sizes = 1'
| [ 0:00] ## Line: 21 	 
| [ 0:00] ## Line: 22 	 CHECK_MSG="smaller than corresponding PV size"
| [ 0:00] ## Line: 23 	 
| [ 0:00] ## Line: 24 	 vgcreate "$vg" "$dev1" 2>err
| [ 0:00] ## Line: 25 	 not grep "$CHECK_MSG" err
| [ 0:00] ## Line: 26 	 pvs 2>err
| [ 0:00] ## Line: 27 	 not grep "$CHECK_MSG" err
| [ 0:00] ## Line: 28 	 vgremove -ff $vg
| [ 0:00] ## Line: 29 	 
| [ 0:00] ## Line: 30 	 # set PV size to 2x dev size
| [ 0:00] ## Line: 31 	 pvcreate --yes --setphysicalvolumesize 16m "$dev1"
| [ 0:00] ## Line: 32 	 vgcreate "$vg" "$dev1" 2>err
| [ 0:00] ## Line: 33 	 grep "$CHECK_MSG" err
| [ 0:00] ## Line: 34 	 pvs 2>err
| [ 0:00] ## Line: 35 	 grep "$CHECK_MSG" err
| [ 0:00] ## Line: 36 	 vgremove -ff $vg
| [ 0:00] ## Line: 37 	 
| [ 0:00] ## Line: 38 	 # should be quiet if requested
| [ 0:00] ## Line: 39 	 aux lvmconf 'metadata/check_pv_device_sizes = 0'
| [ 0:00] ## Line: 40 	 pvcreate --yes --setphysicalvolumesize 16m "$dev1"
| [ 0:00] ## Line: 41 	 vgcreate "$vg" "$dev1" 2>err
| [ 0:00] ## Line: 42 	 not grep "$CHECK_MSG" err
| [ 0:00] ## Line: 43 	 pvs 2>err
| [ 0:00] ## Line: 44 	 not grep "$CHECK_MSG" err
| [ 0:00] ## Line: 45 	 
| [ 0:00] ## Line: 46 	 vgremove -ff $vg
| [ 0:00] aux teardown
| [ 0:00] #pv-check-dev-size.sh:1+ aux teardown
| [ 0:00] ## teardown.........ok
###       failed: [ndev-vanilla] shell/pv-check-dev-size.sh

| [ 0:00] Library version:   1.02.146 (2017-12-18)
| [ 0:00] Driver version:    4.35.0
| [ 0:00] Kernel is Linux localhost.localdomain 3.10.0-693.11.1.el7.x86_64 #1 SMP Mon Dec 4 23:52:40 UTC 2017 x86_64 GNU/Linux
| [ 0:00] Selinux mode is not installed.
| [ 0:00]               total        used        free      shared  buff/cache   available
| [ 0:00] Mem:           7822        1080        4144          10        2597        6435
| [ 0:00] Swap:          4095           0        4095
| [ 0:00] Filesystem      Size  Used Avail Use% Mounted on
| [ 0:00] /dev/sdc1        18G  8.4G  8.4G  50% /
| [ 0:00] /dev/sdd1        51G  6.1G   43G  13% /lfskernel
| [ 0:00] devtmpfs        3.9G     0  3.9G   0% /dev
| [ 0:00] tmpfs           3.9G     0  3.9G   0% /run
| [ 0:00] @TESTDIR=/tmp/LVMTEST15384.bynr9B5XHG
| [ 0:00] @PREFIX=LVMTEST15384
| [ 0:00] ## LVMCONF: activation {
| [ 0:00] ## LVMCONF:     checks = 1
| [ 0:00] ## LVMCONF:     monitoring = 0
| [ 0:00] ## LVMCONF:     polling_interval = 1
| [ 0:00] ## LVMCONF:     raid_region_size = 512
| [ 0:00] ## LVMCONF:     retry_deactivation = 1
| [ 0:00] ## LVMCONF:     snapshot_autoextend_percent = 50
| [ 0:00] ## LVMCONF:     snapshot_autoextend_threshold = 50
| [ 0:00] ## LVMCONF:     udev_rules = 1
| [ 0:00] ## LVMCONF:     udev_sync = 1
| [ 0:00] ## LVMCONF:     verify_udev_operations = 1
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: allocation {
| [ 0:00] ## LVMCONF:     wipe_signatures_when_zeroing_new_lvs = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: backup {
| [ 0:00] ## LVMCONF:     archive = 0
| [ 0:00] ## LVMCONF:     backup = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: devices {
| [ 0:00] ## LVMCONF:     cache_dir = "@TESTDIR@/etc"
| [ 0:00] ## LVMCONF:     default_data_alignment = 1
| [ 0:00] ## LVMCONF:     dir = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     filter = "a|.*|"
| [ 0:00] ## LVMCONF:     global_filter = [ "a|@TESTDIR@/dev/mapper/@PREFIX@.*pv[0-9_]*$|", "r|.*|" ]
| [ 0:00] ## LVMCONF:     md_component_detection  = 0
| [ 0:00] ## LVMCONF:     scan = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     sysfs_scan = 1
| [ 0:00] ## LVMCONF:     write_cache_state = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: dmeventd {
| [ 0:00] ## LVMCONF:     executable = "/sources/boot/LVM2.2.02.177/test/lib/dmeventd"
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: global {
| [ 0:00] ## LVMCONF:     abort_on_internal_errors = 1
| [ 0:00] ## LVMCONF:     cache_check_executable = "/usr/sbin/cache_check"
| [ 0:00] ## LVMCONF:     cache_dump_executable = "/usr/sbin/cache_dump"
| [ 0:00] ## LVMCONF:     cache_repair_executable = "/usr/sbin/cache_repair"
| [ 0:00] ## LVMCONF:     detect_internal_vg_cache_corruption = 1
| [ 0:00] ## LVMCONF:     fallback_to_local_locking = 0
| [ 0:00] ## LVMCONF:     fsadm_executable = "/sources/boot/LVM2.2.02.177/test/lib/fsadm"
| [ 0:00] ## LVMCONF:     library_dir = "@TESTDIR@/lib"
| [ 0:00] ## LVMCONF:     locking_dir = "@TESTDIR@/var/lock/lvm"
| [ 0:00] ## LVMCONF:     locking_type=1
| [ 0:00] ## LVMCONF:     notify_dbus = 0
| [ 0:00] ## LVMCONF:     si_unit_consistency = 1
| [ 0:00] ## LVMCONF:     thin_check_executable = "/usr/sbin/thin_check"
| [ 0:00] ## LVMCONF:     thin_dump_executable = "/usr/sbin/thin_dump"
| [ 0:00] ## LVMCONF:     thin_repair_executable = "/usr/sbin/thin_repair"
| [ 0:00] ## LVMCONF:     use_lvmetad = 0
| [ 0:00] ## LVMCONF:     use_lvmlockd = 0
| [ 0:00] ## LVMCONF:     use_lvmpolld = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: log {
| [ 0:00] ## LVMCONF:     activation = 1
| [ 0:00] ## LVMCONF:     file = "@TESTDIR@/debug.log"
| [ 0:00] ## LVMCONF:     indent = 1
| [ 0:00] ## LVMCONF:     level = 9
| [ 0:00] ## LVMCONF:     overwrite = 1
| [ 0:00] ## LVMCONF:     syslog = 0
| [ 0:00] ## LVMCONF:     verbose = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] <======== Processing test: "pv-duplicate-uuid.sh" ========>
| [ 0:00] 
| [ 0:00] aux prepare_devs 3
| [ 0:00] #pv-duplicate-uuid.sh:19+ aux prepare_devs 3
| [ 0:00] ## preparing loop device....ok (/dev/loop0)
| [ 0:00] ## preparing 3 devices...lib/utils: line 212: DM_UDEV_COOKIE: unbound variable
| [ 0:00] set +vx; STACKTRACE; set -vx
| [ 0:00] ##pv-duplicate-uuid.sh:19+ set +vx
| [ 0:00] ## - /lfskernel/sources/boot/LVM2.2.02.177/test/shell/pv-duplicate-uuid.sh:19
| [ 0:00] ## 1 STACKTRACE() called from /lfskernel/sources/boot/LVM2.2.02.177/test/shell/pv-duplicate-uuid.sh:19
| [ 0:00] <======== Info ========>
| [ 0:00] ## DMINFO:   Name             Maj Min Stat Open Targ Event  UUID                                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv3  253   3 L--w    0    1      0 TEST-@PREFIX@pv3                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv2  253   5 L--w    0    1      0 TEST-@PREFIX@pv2                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv1  253   4 L--w    0    1      0 TEST-@PREFIX@pv1                                                
| [ 0:00] <======== Active table ========>
| [ 0:00] ## DMTABLE:  @PREFIX@pv3: 0 69632 linear 7:0 141312
| [ 0:00] ## DMTABLE:  @PREFIX@pv2: 0 69632 linear 7:0 71680
| [ 0:00] ## DMTABLE:  @PREFIX@pv1: 0 69632 linear 7:0 2048
| [ 0:00] <======== Inactive table ========>
| [ 0:00] ## DMITABLE: @PREFIX@pv3: 
| [ 0:00] ## DMITABLE: @PREFIX@pv2: 
| [ 0:00] ## DMITABLE: @PREFIX@pv1: 
| [ 0:00] <======== Status ========>
| [ 0:00] ## DMSTATUS: @PREFIX@pv3: 0 69632 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv2: 0 69632 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv1: 0 69632 linear 
| [ 0:00] <======== Tree ========>
| [ 0:00] ## DMTREE:   @PREFIX@pv3 (253:3)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   @PREFIX@pv2 (253:5)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   LFS_vg-lfs (253:2)
| [ 0:00] ## DMTREE:    `- (8:16)
| [ 0:00] ## DMTREE:   @PREFIX@pv1 (253:4)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   centos-swap (253:1)
| [ 0:00] ## DMTREE:    `- (8:2)
| [ 0:00] ## DMTREE:   centos-root (253:0)
| [ 0:00] ## DMTREE:    `- (8:2)
| [ 0:00] <======== Recursive list of @TESTDIR@/dev ========>
| [ 0:00] ## LSLR:	@TESTDIR@/dev:
| [ 0:00] ## LSLR:	total 4
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 0 Feb 21 02:27 loop0
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 1 Feb 21 02:27 loop1
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 2 Feb 21 02:27 loop2
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 3 Feb 21 02:27 loop3
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 4 Feb 21 02:27 loop4
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 5 Feb 21 02:27 loop5
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 6 Feb 21 02:27 loop6
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 7 Feb 21 02:27 loop7
| [ 0:00] ## LSLR:	drwxr-xr-x 2 root root 4096 Feb 21 02:27 mapper
| [ 0:00] ## LSLR:	crw-r--r-- 1 root root 1, 3 Feb 21 02:27 testnull
| [ 0:00] ## LSLR:	
| [ 0:00] ## LSLR:	@TESTDIR@/dev/mapper:
| [ 0:00] ## LSLR:	total 0
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   4 Feb 21 02:27 @PREFIX@pv1
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   5 Feb 21 02:27 @PREFIX@pv2
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   3 Feb 21 02:27 @PREFIX@pv3
| [ 0:00] ## LSLR:	crw------- 1 root root  10, 236 Feb 21 02:27 control
| [ 0:00] <======== Udev DB content ========>
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-0
| [ 0:00] ## UDEV:	N: dm-0
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-0
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-0
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=0
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-1
| [ 0:00] ## UDEV:	N: dm-1
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-1
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-1
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=1
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-2
| [ 0:00] ## UDEV:	N: dm-2
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-2
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-2
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=2
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-3
| [ 0:00] ## UDEV:	N: dm-3
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-3
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-3
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=3
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-4
| [ 0:00] ## UDEV:	N: dm-4
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-4
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-4
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=4
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-5
| [ 0:00] ## UDEV:	N: dm-5
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-5
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-5
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=5
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/loop0
| [ 0:00] ## UDEV:	N: loop0
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/loop0
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/loop0
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=7
| [ 0:00] ## UDEV:	E: MINOR=0
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] <======== Script file "pv-duplicate-uuid.sh" ========>
| [ 0:00] ## Line: 1 	 #!/usr/bin/env bash
| [ 0:00] ## Line: 2 	 
| [ 0:00] ## Line: 3 	 # Copyright (C) 2014 Red Hat, Inc. All rights reserved.
| [ 0:00] ## Line: 4 	 #
| [ 0:00] ## Line: 5 	 # This copyrighted material is made available to anyone wishing to use,
| [ 0:00] ## Line: 6 	 # modify, copy, or redistribute it subject to the terms and conditions
| [ 0:00] ## Line: 7 	 # of the GNU General Public License v.2.
| [ 0:00] ## Line: 8 	 #
| [ 0:00] ## Line: 9 	 # You should have received a copy of the GNU General Public License
| [ 0:00] ## Line: 10 	 # along with this program; if not, write to the Free Software Foundation,
| [ 0:00] ## Line: 11 	 # Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA
| [ 0:00] ## Line: 12 	 
| [ 0:00] ## Line: 13 	 # Test 'Found duplicate' is shown
| [ 0:00] ## Line: 14 	 SKIP_WITH_LVMLOCKD=1
| [ 0:00] ## Line: 15 	 SKIP_WITH_LVMPOLLD=1
| [ 0:00] ## Line: 16 	 
| [ 0:00] ## Line: 17 	 . lib/inittest
| [ 0:00] ## Line: 18 	 
| [ 0:00] ## Line: 19 	 aux prepare_devs 3
| [ 0:00] ## Line: 20 	 
| [ 0:00] ## Line: 21 	 pvcreate "$dev1"
| [ 0:00] ## Line: 22 	 UUID1=$(get pv_field "$dev1" uuid)
| [ 0:00] ## Line: 23 	 pvcreate --config "devices{filter=[\"a|$dev2|\",\"r|.*|\"]} global/use_lvmetad=0" -u "$UUID1" --norestorefile "$dev2"
| [ 0:00] ## Line: 24 	 pvcreate --config "devices{filter=[\"a|$dev3|\",\"r|.*|\"]} global/use_lvmetad=0" -u "$UUID1" --norestorefile "$dev3"
| [ 0:00] ## Line: 25 	 
| [ 0:00] ## Line: 26 	 pvscan --cache 2>&1 | tee out
| [ 0:00] ## Line: 27 	 
| [ 0:00] ## Line: 28 	 if test -e LOCAL_LVMETAD; then
| [ 0:00] ## Line: 29 	 	grep "was already found" out
| [ 0:00] ## Line: 30 	 	grep "WARNING: Disabling lvmetad cache which does not support duplicate PVs." out
| [ 0:00] ## Line: 31 	 fi
| [ 0:00] ## Line: 32 	 
| [ 0:00] ## Line: 33 	 pvs -o+uuid 2>&1 | tee out
| [ 0:00] ## Line: 34 	 
| [ 0:00] ## Line: 35 	 grep    WARNING out > warn || true
| [ 0:00] ## Line: 36 	 grep -v WARNING out > main || true
| [ 0:00] ## Line: 37 	 
| [ 0:00] ## Line: 38 	 test "$(grep -c $UUID1 main)" -eq 1
| [ 0:00] ## Line: 39 	 
| [ 0:00] ## Line: 40 	 COUNT=$(grep --count "was already found" warn)
| [ 0:00] ## Line: 41 	 [ "$COUNT" -eq 2 ]
| [ 0:00] ## Line: 42 	 
| [ 0:00] ## Line: 43 	 pvs -o+uuid --config "devices{filter=[\"a|$dev2|\",\"r|.*|\"]}" 2>&1 | tee out
| [ 0:00] ## Line: 44 	 
| [ 0:00] ## Line: 45 	 rm warn main || true
| [ 0:00] ## Line: 46 	 grep    WARNING out > warn || true
| [ 0:00] ## Line: 47 	 grep -v WARNING out > main || true
| [ 0:00] ## Line: 48 	 
| [ 0:00] ## Line: 49 	 not grep "$dev1" main
| [ 0:00] ## Line: 50 	 grep "$dev2" main
| [ 0:00] ## Line: 51 	 not grep "$dev3" main
| [ 0:00] ## Line: 52 	 
| [ 0:00] ## Line: 53 	 not grep "was already found" warn
| [ 0:00] ## Line: 54 	 
| [ 0:00] aux teardown
| [ 0:00] #pv-duplicate-uuid.sh:1+ aux teardown
| [ 0:00] ## teardown.........ok
###       failed: [ndev-vanilla] shell/pv-duplicate-uuid.sh

| [ 0:00] Library version:   1.02.146 (2017-12-18)
| [ 0:00] Driver version:    4.35.0
| [ 0:00] Kernel is Linux localhost.localdomain 3.10.0-693.11.1.el7.x86_64 #1 SMP Mon Dec 4 23:52:40 UTC 2017 x86_64 GNU/Linux
| [ 0:00] Selinux mode is not installed.
| [ 0:00]               total        used        free      shared  buff/cache   available
| [ 0:00] Mem:           7822        1080        4144          10        2597        6435
| [ 0:00] Swap:          4095           0        4095
| [ 0:00] Filesystem      Size  Used Avail Use% Mounted on
| [ 0:00] /dev/sdc1        18G  8.4G  8.4G  50% /
| [ 0:00] /dev/sdd1        51G  6.1G   43G  13% /lfskernel
| [ 0:00] devtmpfs        3.9G     0  3.9G   0% /dev
| [ 0:00] tmpfs           3.9G     0  3.9G   0% /run
| [ 0:00] @TESTDIR=/tmp/LVMTEST15564.8jREYFwLQP
| [ 0:00] @PREFIX=LVMTEST15564
| [ 0:00] ## LVMCONF: activation {
| [ 0:00] ## LVMCONF:     checks = 1
| [ 0:00] ## LVMCONF:     monitoring = 0
| [ 0:00] ## LVMCONF:     polling_interval = 1
| [ 0:00] ## LVMCONF:     raid_region_size = 512
| [ 0:00] ## LVMCONF:     retry_deactivation = 1
| [ 0:00] ## LVMCONF:     snapshot_autoextend_percent = 50
| [ 0:00] ## LVMCONF:     snapshot_autoextend_threshold = 50
| [ 0:00] ## LVMCONF:     udev_rules = 1
| [ 0:00] ## LVMCONF:     udev_sync = 1
| [ 0:00] ## LVMCONF:     verify_udev_operations = 1
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: allocation {
| [ 0:00] ## LVMCONF:     wipe_signatures_when_zeroing_new_lvs = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: backup {
| [ 0:00] ## LVMCONF:     archive = 0
| [ 0:00] ## LVMCONF:     backup = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: devices {
| [ 0:00] ## LVMCONF:     cache_dir = "@TESTDIR@/etc"
| [ 0:00] ## LVMCONF:     default_data_alignment = 1
| [ 0:00] ## LVMCONF:     dir = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     filter = "a|.*|"
| [ 0:00] ## LVMCONF:     global_filter = [ "a|@TESTDIR@/dev/mapper/@PREFIX@.*pv[0-9_]*$|", "r|.*|" ]
| [ 0:00] ## LVMCONF:     md_component_detection  = 0
| [ 0:00] ## LVMCONF:     scan = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     sysfs_scan = 1
| [ 0:00] ## LVMCONF:     write_cache_state = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: dmeventd {
| [ 0:00] ## LVMCONF:     executable = "/sources/boot/LVM2.2.02.177/test/lib/dmeventd"
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: global {
| [ 0:00] ## LVMCONF:     abort_on_internal_errors = 1
| [ 0:00] ## LVMCONF:     cache_check_executable = "/usr/sbin/cache_check"
| [ 0:00] ## LVMCONF:     cache_dump_executable = "/usr/sbin/cache_dump"
| [ 0:00] ## LVMCONF:     cache_repair_executable = "/usr/sbin/cache_repair"
| [ 0:00] ## LVMCONF:     detect_internal_vg_cache_corruption = 1
| [ 0:00] ## LVMCONF:     fallback_to_local_locking = 0
| [ 0:00] ## LVMCONF:     fsadm_executable = "/sources/boot/LVM2.2.02.177/test/lib/fsadm"
| [ 0:00] ## LVMCONF:     library_dir = "@TESTDIR@/lib"
| [ 0:00] ## LVMCONF:     locking_dir = "@TESTDIR@/var/lock/lvm"
| [ 0:00] ## LVMCONF:     locking_type=1
| [ 0:00] ## LVMCONF:     notify_dbus = 0
| [ 0:00] ## LVMCONF:     si_unit_consistency = 1
| [ 0:00] ## LVMCONF:     thin_check_executable = "/usr/sbin/thin_check"
| [ 0:00] ## LVMCONF:     thin_dump_executable = "/usr/sbin/thin_dump"
| [ 0:00] ## LVMCONF:     thin_repair_executable = "/usr/sbin/thin_repair"
| [ 0:00] ## LVMCONF:     use_lvmetad = 0
| [ 0:00] ## LVMCONF:     use_lvmlockd = 0
| [ 0:00] ## LVMCONF:     use_lvmpolld = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: log {
| [ 0:00] ## LVMCONF:     activation = 1
| [ 0:00] ## LVMCONF:     file = "@TESTDIR@/debug.log"
| [ 0:00] ## LVMCONF:     indent = 1
| [ 0:00] ## LVMCONF:     level = 9
| [ 0:00] ## LVMCONF:     overwrite = 1
| [ 0:00] ## LVMCONF:     syslog = 0
| [ 0:00] ## LVMCONF:     verbose = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] <======== Processing test: "pv-duplicate.sh" ========>
| [ 0:00] 
| [ 0:00] aux prepare_devs 3
| [ 0:00] #pv-duplicate.sh:20+ aux prepare_devs 3
| [ 0:00] ## preparing loop device....ok (/dev/loop0)
| [ 0:00] ## preparing 3 devices...lib/utils: line 212: DM_UDEV_COOKIE: unbound variable
| [ 0:00] set +vx; STACKTRACE; set -vx
| [ 0:00] ##pv-duplicate.sh:20+ set +vx
| [ 0:00] ## - /lfskernel/sources/boot/LVM2.2.02.177/test/shell/pv-duplicate.sh:20
| [ 0:00] ## 1 STACKTRACE() called from /lfskernel/sources/boot/LVM2.2.02.177/test/shell/pv-duplicate.sh:20
| [ 0:00] <======== Info ========>
| [ 0:00] ## DMINFO:   Name             Maj Min Stat Open Targ Event  UUID                                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv3  253   3 L--w    0    1      0 TEST-@PREFIX@pv3                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv2  253   5 L--w    0    1      0 TEST-@PREFIX@pv2                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv1  253   4 L--w    0    1      0 TEST-@PREFIX@pv1                                                
| [ 0:00] <======== Active table ========>
| [ 0:00] ## DMTABLE:  @PREFIX@pv3: 0 69632 linear 7:0 141312
| [ 0:00] ## DMTABLE:  @PREFIX@pv2: 0 69632 linear 7:0 71680
| [ 0:00] ## DMTABLE:  @PREFIX@pv1: 0 69632 linear 7:0 2048
| [ 0:00] <======== Inactive table ========>
| [ 0:00] ## DMITABLE: @PREFIX@pv3: 
| [ 0:00] ## DMITABLE: @PREFIX@pv2: 
| [ 0:00] ## DMITABLE: @PREFIX@pv1: 
| [ 0:00] <======== Status ========>
| [ 0:00] ## DMSTATUS: @PREFIX@pv3: 0 69632 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv2: 0 69632 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv1: 0 69632 linear 
| [ 0:00] <======== Tree ========>
| [ 0:00] ## DMTREE:   @PREFIX@pv3 (253:3)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   @PREFIX@pv2 (253:5)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   @PREFIX@pv1 (253:4)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   LFS_vg-lfs (253:2)
| [ 0:00] ## DMTREE:    `- (8:16)
| [ 0:00] ## DMTREE:   centos-swap (253:1)
| [ 0:00] ## DMTREE:    `- (8:2)
| [ 0:00] ## DMTREE:   centos-root (253:0)
| [ 0:00] ## DMTREE:    `- (8:2)
| [ 0:00] <======== Recursive list of @TESTDIR@/dev ========>
| [ 0:00] ## LSLR:	@TESTDIR@/dev:
| [ 0:00] ## LSLR:	total 4
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 0 Feb 21 02:27 loop0
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 1 Feb 21 02:27 loop1
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 2 Feb 21 02:27 loop2
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 3 Feb 21 02:27 loop3
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 4 Feb 21 02:27 loop4
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 5 Feb 21 02:27 loop5
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 6 Feb 21 02:27 loop6
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 7 Feb 21 02:27 loop7
| [ 0:00] ## LSLR:	drwxr-xr-x 2 root root 4096 Feb 21 02:27 mapper
| [ 0:00] ## LSLR:	crw-r--r-- 1 root root 1, 3 Feb 21 02:27 testnull
| [ 0:00] ## LSLR:	
| [ 0:00] ## LSLR:	@TESTDIR@/dev/mapper:
| [ 0:00] ## LSLR:	total 0
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   4 Feb 21 02:27 @PREFIX@pv1
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   5 Feb 21 02:27 @PREFIX@pv2
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   3 Feb 21 02:27 @PREFIX@pv3
| [ 0:00] ## LSLR:	crw------- 1 root root  10, 236 Feb 21 02:27 control
| [ 0:00] <======== Udev DB content ========>
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-0
| [ 0:00] ## UDEV:	N: dm-0
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-0
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-0
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=0
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-1
| [ 0:00] ## UDEV:	N: dm-1
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-1
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-1
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=1
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-2
| [ 0:00] ## UDEV:	N: dm-2
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-2
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-2
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=2
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-3
| [ 0:00] ## UDEV:	N: dm-3
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-3
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-3
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=3
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-4
| [ 0:00] ## UDEV:	N: dm-4
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-4
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-4
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=4
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-5
| [ 0:00] ## UDEV:	N: dm-5
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-5
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-5
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=5
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/loop0
| [ 0:00] ## UDEV:	N: loop0
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/loop0
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/loop0
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=7
| [ 0:00] ## UDEV:	E: MINOR=0
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] <======== Script file "pv-duplicate.sh" ========>
| [ 0:00] ## Line: 1 	 #!/usr/bin/env bash
| [ 0:00] ## Line: 2 	 
| [ 0:00] ## Line: 3 	 # Copyright (C) 2011-2015 Red Hat, Inc. All rights reserved.
| [ 0:00] ## Line: 4 	 #
| [ 0:00] ## Line: 5 	 # This copyrighted material is made available to anyone wishing to use,
| [ 0:00] ## Line: 6 	 # modify, copy, or redistribute it subject to the terms and conditions
| [ 0:00] ## Line: 7 	 # of the GNU General Public License v.2.
| [ 0:00] ## Line: 8 	 #
| [ 0:00] ## Line: 9 	 # You should have received a copy of the GNU General Public License
| [ 0:00] ## Line: 10 	 # along with this program; if not, write to the Free Software Foundation,
| [ 0:00] ## Line: 11 	 # Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA
| [ 0:00] ## Line: 12 	 
| [ 0:00] ## Line: 13 	 # 'Exercise duplicate metadata diagnostics'
| [ 0:00] ## Line: 14 	 
| [ 0:00] ## Line: 15 	 SKIP_WITH_LVMLOCKD=1
| [ 0:00] ## Line: 16 	 SKIP_WITH_LVMPOLLD=1
| [ 0:00] ## Line: 17 	 
| [ 0:00] ## Line: 18 	 . lib/inittest
| [ 0:00] ## Line: 19 	 
| [ 0:00] ## Line: 20 	 aux prepare_devs 3
| [ 0:00] ## Line: 21 	 
| [ 0:00] ## Line: 22 	 pvcreate "$dev1"
| [ 0:00] ## Line: 23 	 
| [ 0:00] ## Line: 24 	 dd if="$dev1" of=backup_dev1 bs=256K count=1
| [ 0:00] ## Line: 25 	 
| [ 0:00] ## Line: 26 	 vgcreate --metadatasize 128k $vg1 "$dev1"
| [ 0:00] ## Line: 27 	 
| [ 0:00] ## Line: 28 	 # copy mda
| [ 0:00] ## Line: 29 	 dd if="$dev1" of="$dev2" bs=256K count=1
| [ 0:00] ## Line: 30 	 dd if="$dev1" of="$dev3" bs=256K count=1
| [ 0:00] ## Line: 31 	 
| [ 0:00] ## Line: 32 	 pvs "$dev3" -o pv_uuid
| [ 0:00] ## Line: 33 	 
| [ 0:00] ## Line: 34 	 vgs $vg1
| [ 0:00] ## Line: 35 	 
| [ 0:00] ## Line: 36 	 dd if=backup_dev1 of="$dev3" bs=256K count=1
| [ 0:00] ## Line: 37 	 pvs
| [ 0:00] ## Line: 38 	 #-vvvv
| [ 0:00] ## Line: 39 	 # TODO: Surely needs more inspecition about correct
| [ 0:00] ## Line: 40 	 #       behavior for such case
| [ 0:00] ## Line: 41 	 # vgs $vg1
| [ 0:00] aux teardown
| [ 0:00] #pv-duplicate.sh:1+ aux teardown
| [ 0:00] ## teardown.........ok
###       failed: [ndev-vanilla] shell/pv-duplicate.sh

| [ 0:00] Library version:   1.02.146 (2017-12-18)
| [ 0:00] Driver version:    4.35.0
| [ 0:00] Kernel is Linux localhost.localdomain 3.10.0-693.11.1.el7.x86_64 #1 SMP Mon Dec 4 23:52:40 UTC 2017 x86_64 GNU/Linux
| [ 0:00] Selinux mode is not installed.
| [ 0:00]               total        used        free      shared  buff/cache   available
| [ 0:00] Mem:           7822        1080        4144          10        2597        6435
| [ 0:00] Swap:          4095           0        4095
| [ 0:00] Filesystem      Size  Used Avail Use% Mounted on
| [ 0:00] /dev/sdc1        18G  8.4G  8.4G  50% /
| [ 0:00] /dev/sdd1        51G  6.1G   43G  13% /lfskernel
| [ 0:00] devtmpfs        3.9G     0  3.9G   0% /dev
| [ 0:00] tmpfs           3.9G     0  3.9G   0% /run
| [ 0:00] @TESTDIR=/tmp/LVMTEST15745.zLY0zZHKq3
| [ 0:00] @PREFIX=LVMTEST15745
| [ 0:00] ## LVMCONF: activation {
| [ 0:00] ## LVMCONF:     checks = 1
| [ 0:00] ## LVMCONF:     monitoring = 0
| [ 0:00] ## LVMCONF:     polling_interval = 1
| [ 0:00] ## LVMCONF:     raid_region_size = 512
| [ 0:00] ## LVMCONF:     retry_deactivation = 1
| [ 0:00] ## LVMCONF:     snapshot_autoextend_percent = 50
| [ 0:00] ## LVMCONF:     snapshot_autoextend_threshold = 50
| [ 0:00] ## LVMCONF:     udev_rules = 1
| [ 0:00] ## LVMCONF:     udev_sync = 1
| [ 0:00] ## LVMCONF:     verify_udev_operations = 1
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: allocation {
| [ 0:00] ## LVMCONF:     wipe_signatures_when_zeroing_new_lvs = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: backup {
| [ 0:00] ## LVMCONF:     archive = 0
| [ 0:00] ## LVMCONF:     backup = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: devices {
| [ 0:00] ## LVMCONF:     cache_dir = "@TESTDIR@/etc"
| [ 0:00] ## LVMCONF:     default_data_alignment = 1
| [ 0:00] ## LVMCONF:     dir = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     filter = "a|.*|"
| [ 0:00] ## LVMCONF:     global_filter = [ "a|@TESTDIR@/dev/mapper/@PREFIX@.*pv[0-9_]*$|", "r|.*|" ]
| [ 0:00] ## LVMCONF:     md_component_detection  = 0
| [ 0:00] ## LVMCONF:     scan = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     sysfs_scan = 1
| [ 0:00] ## LVMCONF:     write_cache_state = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: dmeventd {
| [ 0:00] ## LVMCONF:     executable = "/sources/boot/LVM2.2.02.177/test/lib/dmeventd"
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: global {
| [ 0:00] ## LVMCONF:     abort_on_internal_errors = 1
| [ 0:00] ## LVMCONF:     cache_check_executable = "/usr/sbin/cache_check"
| [ 0:00] ## LVMCONF:     cache_dump_executable = "/usr/sbin/cache_dump"
| [ 0:00] ## LVMCONF:     cache_repair_executable = "/usr/sbin/cache_repair"
| [ 0:00] ## LVMCONF:     detect_internal_vg_cache_corruption = 1
| [ 0:00] ## LVMCONF:     fallback_to_local_locking = 0
| [ 0:00] ## LVMCONF:     fsadm_executable = "/sources/boot/LVM2.2.02.177/test/lib/fsadm"
| [ 0:00] ## LVMCONF:     library_dir = "@TESTDIR@/lib"
| [ 0:00] ## LVMCONF:     locking_dir = "@TESTDIR@/var/lock/lvm"
| [ 0:00] ## LVMCONF:     locking_type=1
| [ 0:00] ## LVMCONF:     notify_dbus = 0
| [ 0:00] ## LVMCONF:     si_unit_consistency = 1
| [ 0:00] ## LVMCONF:     thin_check_executable = "/usr/sbin/thin_check"
| [ 0:00] ## LVMCONF:     thin_dump_executable = "/usr/sbin/thin_dump"
| [ 0:00] ## LVMCONF:     thin_repair_executable = "/usr/sbin/thin_repair"
| [ 0:00] ## LVMCONF:     use_lvmetad = 0
| [ 0:00] ## LVMCONF:     use_lvmlockd = 0
| [ 0:00] ## LVMCONF:     use_lvmpolld = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: log {
| [ 0:00] ## LVMCONF:     activation = 1
| [ 0:00] ## LVMCONF:     file = "@TESTDIR@/debug.log"
| [ 0:00] ## LVMCONF:     indent = 1
| [ 0:00] ## LVMCONF:     level = 9
| [ 0:00] ## LVMCONF:     overwrite = 1
| [ 0:00] ## LVMCONF:     syslog = 0
| [ 0:00] ## LVMCONF:     verbose = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] <======== Processing test: "pv-ext-flags.sh" ========>
| [ 0:00] 
| [ 0:00] aux prepare_devs 2
| [ 0:00] #pv-ext-flags.sh:18+ aux prepare_devs 2
| [ 0:00] ## preparing loop device....ok (/dev/loop0)
| [ 0:00] ## preparing 2 devices...lib/utils: line 212: DM_UDEV_COOKIE: unbound variable
| [ 0:00] set +vx; STACKTRACE; set -vx
| [ 0:00] ##pv-ext-flags.sh:18+ set +vx
| [ 0:00] ## - /lfskernel/sources/boot/LVM2.2.02.177/test/shell/pv-ext-flags.sh:18
| [ 0:00] ## 1 STACKTRACE() called from /lfskernel/sources/boot/LVM2.2.02.177/test/shell/pv-ext-flags.sh:18
| [ 0:00] <======== Info ========>
| [ 0:00] ## DMINFO:   Name             Maj Min Stat Open Targ Event  UUID                                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv2  253   3 L--w    0    1      0 TEST-@PREFIX@pv2                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv1  253   4 L--w    0    1      0 TEST-@PREFIX@pv1                                                
| [ 0:00] <======== Active table ========>
| [ 0:00] ## DMTABLE:  @PREFIX@pv2: 0 69632 linear 7:0 71680
| [ 0:00] ## DMTABLE:  @PREFIX@pv1: 0 69632 linear 7:0 2048
| [ 0:00] <======== Inactive table ========>
| [ 0:00] ## DMITABLE: @PREFIX@pv2: 
| [ 0:00] ## DMITABLE: @PREFIX@pv1: 
| [ 0:00] <======== Status ========>
| [ 0:00] ## DMSTATUS: @PREFIX@pv2: 0 69632 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv1: 0 69632 linear 
| [ 0:00] <======== Tree ========>
| [ 0:00] ## DMTREE:   @PREFIX@pv2 (253:3)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   @PREFIX@pv1 (253:4)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   LFS_vg-lfs (253:2)
| [ 0:00] ## DMTREE:    `- (8:16)
| [ 0:00] ## DMTREE:   centos-swap (253:1)
| [ 0:00] ## DMTREE:    `- (8:2)
| [ 0:00] ## DMTREE:   centos-root (253:0)
| [ 0:00] ## DMTREE:    `- (8:2)
| [ 0:00] <======== Recursive list of @TESTDIR@/dev ========>
| [ 0:00] ## LSLR:	@TESTDIR@/dev:
| [ 0:00] ## LSLR:	total 4
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 0 Feb 21 02:27 loop0
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 1 Feb 21 02:27 loop1
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 2 Feb 21 02:27 loop2
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 3 Feb 21 02:27 loop3
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 4 Feb 21 02:27 loop4
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 5 Feb 21 02:27 loop5
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 6 Feb 21 02:27 loop6
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 7 Feb 21 02:27 loop7
| [ 0:00] ## LSLR:	drwxr-xr-x 2 root root 4096 Feb 21 02:27 mapper
| [ 0:00] ## LSLR:	crw-r--r-- 1 root root 1, 3 Feb 21 02:27 testnull
| [ 0:00] ## LSLR:	
| [ 0:00] ## LSLR:	@TESTDIR@/dev/mapper:
| [ 0:00] ## LSLR:	total 0
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   4 Feb 21 02:27 @PREFIX@pv1
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   3 Feb 21 02:27 @PREFIX@pv2
| [ 0:00] ## LSLR:	crw------- 1 root root  10, 236 Feb 21 02:27 control
| [ 0:00] <======== Udev DB content ========>
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-0
| [ 0:00] ## UDEV:	N: dm-0
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-0
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-0
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=0
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-1
| [ 0:00] ## UDEV:	N: dm-1
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-1
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-1
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=1
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-2
| [ 0:00] ## UDEV:	N: dm-2
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-2
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-2
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=2
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-3
| [ 0:00] ## UDEV:	N: dm-3
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-3
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-3
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=3
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-4
| [ 0:00] ## UDEV:	N: dm-4
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-4
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-4
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=4
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/loop0
| [ 0:00] ## UDEV:	N: loop0
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/loop0
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/loop0
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=7
| [ 0:00] ## UDEV:	E: MINOR=0
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] <======== Script file "pv-ext-flags.sh" ========>
| [ 0:00] ## Line: 1 	 #!/usr/bin/env bash
| [ 0:00] ## Line: 2 	 
| [ 0:00] ## Line: 3 	 # Copyright (C) 2016 Red Hat, Inc. All rights reserved.
| [ 0:00] ## Line: 4 	 #
| [ 0:00] ## Line: 5 	 # This copyrighted material is made available to anyone wishing to use,
| [ 0:00] ## Line: 6 	 # modify, copy, or redistribute it subject to the terms and conditions
| [ 0:00] ## Line: 7 	 # of the GNU General Public License v.2.
| [ 0:00] ## Line: 8 	 #
| [ 0:00] ## Line: 9 	 # You should have received a copy of the GNU General Public License
| [ 0:00] ## Line: 10 	 # along with this program; if not, write to the Free Software Foundation,
| [ 0:00] ## Line: 11 	 # Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA
| [ 0:00] ## Line: 12 	 
| [ 0:00] ## Line: 13 	 SKIP_WITH_LVMLOCKD=1
| [ 0:00] ## Line: 14 	 SKIP_WITH_LVMPOLLD=1
| [ 0:00] ## Line: 15 	 
| [ 0:00] ## Line: 16 	 . lib/inittest
| [ 0:00] ## Line: 17 	 
| [ 0:00] ## Line: 18 	 aux prepare_devs 2
| [ 0:00] ## Line: 19 	 
| [ 0:00] ## Line: 20 	 # PV_EXT_USED flag
| [ 0:00] ## Line: 21 	 MARKED_AS_USED_MSG="is used by a VG but its metadata is missing"
| [ 0:00] ## Line: 22 	 
| [ 0:00] ## Line: 23 	 ######################################
| [ 0:00] ## Line: 24 	 ### CHECK PV WITH 0 METADATA AREAS ###
| [ 0:00] ## Line: 25 	 ######################################
| [ 0:00] ## Line: 26 	 
| [ 0:00] ## Line: 27 	 pvcreate -ff -y --metadatacopies 0 "$dev1"
| [ 0:00] ## Line: 28 	 pvcreate -ff -y --metadatacopies 1 "$dev2"
| [ 0:00] ## Line: 29 	 
| [ 0:00] ## Line: 30 	 # $dev1 and $dev2 not in any VG - pv_in_use field should be blank
| [ 0:00] ## Line: 31 	 check pv_field "$dev1" pv_in_use ""
| [ 0:00] ## Line: 32 	 check pv_field "$dev2" pv_in_use ""
| [ 0:00] ## Line: 33 	 
| [ 0:00] ## Line: 34 	 # $dev1 and $dev now in a VG - pv_in_use should display "used"
| [ 0:00] ## Line: 35 	 vgcreate $vg1 "$dev1" "$dev2"
| [ 0:00] ## Line: 36 	 check pv_field "$dev1" pv_in_use "used"
| [ 0:00] ## Line: 37 	 check pv_field "$dev2" pv_in_use "used"
| [ 0:00] ## Line: 38 	 
| [ 0:00] ## Line: 39 	 # disable $dev2 and dev1 with 0 MDAs remains, but still
| [ 0:00] ## Line: 40 	 # marked as used, so pvcreate/vgcreate/pvremove should fail
| [ 0:00] ## Line: 41 	 aux disable_dev "$dev2"
| [ 0:00] ## Line: 42 	 pvscan --cache
| [ 0:00] ## Line: 43 	 
| [ 0:00] ## Line: 44 	 check pv_field "$dev1" pv_in_use "used"
| [ 0:00] ## Line: 45 	 not pvcreate "$dev1" 2>err
| [ 0:00] ## Line: 46 	 cat err
| [ 0:00] ## Line: 47 	 grep "$MARKED_AS_USED_MSG" err
| [ 0:00] ## Line: 48 	 not pvchange -u "$dev1" 2>err
| [ 0:00] ## Line: 49 	 grep "$MARKED_AS_USED_MSG" err
| [ 0:00] ## Line: 50 	 not vgcreate $vg2 "$dev1" 2>err
| [ 0:00] ## Line: 51 	 grep "$MARKED_AS_USED_MSG" err
| [ 0:00] ## Line: 52 	 not pvremove "$dev1" 2>err
| [ 0:00] ## Line: 53 	 grep "$MARKED_AS_USED_MSG" err
| [ 0:00] ## Line: 54 	 
| [ 0:00] ## Line: 55 	 # save PV signature from dev1 for reuse later on in this
| [ 0:00] ## Line: 56 	 # test so we don't need to initialize all the VG stuff again
| [ 0:00] ## Line: 57 	 dd if="$dev1" of=dev1_backup bs=1M
| [ 0:00] ## Line: 58 	 
| [ 0:00] ## Line: 59 	 # pvcreate and pvremove can be forced even if the PV is marked as used
| [ 0:00] ## Line: 60 	 pvremove -ff -y "$dev1"
| [ 0:00] ## Line: 61 	 dd if=dev1_backup of="$dev1" bs=1M
| [ 0:00] ## Line: 62 	 pvcreate -ff -y "$dev1"
| [ 0:00] ## Line: 63 	 dd if=dev1_backup of="$dev1" bs=1M
| [ 0:00] ## Line: 64 	 
| [ 0:00] ## Line: 65 	 # prepare a VG with $dev1 and $dev both having 1 MDA
| [ 0:00] ## Line: 66 	 aux enable_dev "$dev2"
| [ 0:00] ## Line: 67 	 vgremove -ff $vg1
| [ 0:00] ## Line: 68 	 pvcreate --metadatacopies 1 "$dev1"
| [ 0:00] ## Line: 69 	 vgcreate $vg1 "$dev1" "$dev2"
| [ 0:00] ## Line: 70 	 
| [ 0:00] ## Line: 71 	 # disable $dev1, then repair the VG - $dev1 is removed from VG
| [ 0:00] ## Line: 72 	 aux disable_dev "$dev1"
| [ 0:00] ## Line: 73 	 vgreduce --removemissing $vg1
| [ 0:00] ## Line: 74 	 # now, enable $dev1, automatic repair will happen on pvs call
| [ 0:00] ## Line: 75 	 # (or any other lvm command that does vg_read with repair inside)
| [ 0:00] ## Line: 76 	 aux enable_dev "$dev1"
| [ 0:00] ## Line: 77 	 
| [ 0:00] ## Line: 78 	 # FIXME: once persistent cache does not cause races with timestamps
| [ 0:00] ## Line: 79 	 #        causing LVM tools to not see the VG inconsistency and once
| [ 0:00] ## Line: 80 	 #        VG repair is always done, delete this line which removes
| [ 0:00] ## Line: 81 	 #        persistent .cache as a workaround
| [ 0:00] ## Line: 82 	 rm -f "$TESTDIR/etc/.cache"
| [ 0:00] ## Line: 83 	 
| [ 0:00] ## Line: 84 	 vgck $vg1
| [ 0:00] ## Line: 85 	 # check $dev1 does not contain the PV_EXT_FLAG anymore - it
| [ 0:00] ## Line: 86 	 # should be removed as part of the repaid during vg_read since
| [ 0:00] ## Line: 87 	 # $dev1 is not part of $vg1 anymore
| [ 0:00] ## Line: 88 	 check pv_field "$dev1" pv_in_use ""
| [ 0:00] ## Line: 89 	 
| [ 0:00] ## Line: 90 	 #############################################
| [ 0:00] ## Line: 91 	 ### CHECK PV WITH DISABLED METADATA AREAS ###
| [ 0:00] ## Line: 92 	 #############################################
| [ 0:00] ## Line: 93 	 
| [ 0:00] ## Line: 94 	 pvcreate -ff -y --metadatacopies 1 "$dev1"
| [ 0:00] ## Line: 95 	 pvcreate -ff -y --metadatacopies 1 "$dev2"
| [ 0:00] ## Line: 96 	 
| [ 0:00] ## Line: 97 	 # $dev1 and $dev2 not in any VG - pv_in_use field should be blank
| [ 0:00] ## Line: 98 	 check pv_field "$dev1" pv_in_use ""
| [ 0:00] ## Line: 99 	 check pv_field "$dev2" pv_in_use ""
| [ 0:00] ## Line: 100 	 
| [ 0:00] ## Line: 101 	 # $dev1 and $dev now in a VG - pv_in_use should display "used"
| [ 0:00] ## Line: 102 	 vgcreate $vg1 "$dev1" "$dev2"
| [ 0:00] ## Line: 103 	 check pv_field "$dev1" pv_in_use "used"
| [ 0:00] ## Line: 104 	 check pv_field "$dev2" pv_in_use "used"
| [ 0:00] ## Line: 105 	 
| [ 0:00] ## Line: 106 	 pvchange --metadataignore y "$dev1"
| [ 0:00] ## Line: 107 	 aux disable_dev "$dev2"
| [ 0:00] ## Line: 108 	 pvscan --cache
| [ 0:00] ## Line: 109 	 
| [ 0:00] ## Line: 110 	 check pv_field "$dev1" pv_in_use "used"
| [ 0:00] ## Line: 111 	 not pvcreate "$dev1" 2>err
| [ 0:00] ## Line: 112 	 grep "$MARKED_AS_USED_MSG" err
| [ 0:00] ## Line: 113 	 not pvchange -u "$dev1" 2>err
| [ 0:00] ## Line: 114 	 grep "$MARKED_AS_USED_MSG" err
| [ 0:00] ## Line: 115 	 not vgcreate $vg2 "$dev1" 2>err
| [ 0:00] ## Line: 116 	 grep "$MARKED_AS_USED_MSG" err
| [ 0:00] ## Line: 117 	 not pvremove "$dev1" 2>err
| [ 0:00] ## Line: 118 	 grep "$MARKED_AS_USED_MSG" err
| [ 0:00] ## Line: 119 	 
| [ 0:00] ## Line: 120 	 # save PV signature from dev1 for reuse later on in this
| [ 0:00] ## Line: 121 	 # test so we don't need to initialize all the VG stuff again
| [ 0:00] ## Line: 122 	 dd if="$dev1" of=dev1_backup bs=1M
| [ 0:00] ## Line: 123 	 
| [ 0:00] ## Line: 124 	 # pvcreate and pvremove can be forced even if the PV is marked as used
| [ 0:00] ## Line: 125 	 pvremove -ff -y "$dev1"
| [ 0:00] ## Line: 126 	 dd if=dev1_backup of="$dev1" bs=1M
| [ 0:00] ## Line: 127 	 pvcreate -ff -y "$dev1"
| [ 0:00] ## Line: 128 	 dd if=dev1_backup of="$dev1" bs=1M
| [ 0:00] ## Line: 129 	 
| [ 0:00] ## Line: 130 	 # prepare a VG with $dev1 and $dev both having 1 MDA
| [ 0:00] ## Line: 131 	 aux enable_dev "$dev2"
| [ 0:00] ## Line: 132 	 vgremove -ff $vg1
| [ 0:00] ## Line: 133 	 pvcreate --metadatacopies 1 "$dev1"
| [ 0:00] ## Line: 134 	 vgcreate $vg1 "$dev1" "$dev2"
| [ 0:00] ## Line: 135 	 
| [ 0:00] ## Line: 136 	 # disable $dev1, then repair the VG - $dev1 is removed from VG
| [ 0:00] ## Line: 137 	 aux disable_dev "$dev1"
| [ 0:00] ## Line: 138 	 vgreduce --removemissing $vg1
| [ 0:00] ## Line: 139 	 # now, enable $dev1, automatic repair will happen on pvs call
| [ 0:00] ## Line: 140 	 # (or any other lvm command that does vg_read with repair inside)
| [ 0:00] ## Line: 141 	 aux enable_dev "$dev1"
| [ 0:00] ## Line: 142 	 
| [ 0:00] ## Line: 143 	 # FIXME: once persistent cache does not cause races with timestamps
| [ 0:00] ## Line: 144 	 #        causing LVM tools to not see the VG inconsistency and once
| [ 0:00] ## Line: 145 	 #        VG repair is always done, delete this line which removes
| [ 0:00] ## Line: 146 	 #        persistent .cache as a workaround
| [ 0:00] ## Line: 147 	 rm -f "$TESTDIR/etc/.cache"
| [ 0:00] ## Line: 148 	 
| [ 0:00] ## Line: 149 	 vgck $vg1
| [ 0:00] ## Line: 150 	 # check $dev1 does not contain the PV_EXT_FLAG anymore - it
| [ 0:00] ## Line: 151 	 # should be removed as part of the repaid during vg_read since
| [ 0:00] ## Line: 152 	 # $dev1 is not part of $vg1 anymore
| [ 0:00] ## Line: 153 	 check pv_field "$dev1" pv_in_use ""
| [ 0:00] ## Line: 154 	 
| [ 0:00] ## Line: 155 	 ###########################
| [ 0:00] ## Line: 156 	 # OTHER PV-RELATED CHECKS #
| [ 0:00] ## Line: 157 	 ###########################
| [ 0:00] ## Line: 158 	 
| [ 0:00] ## Line: 159 	 # vgcfgrestore should also set PV_EXT_FLAG on PVs where VG is restored
| [ 0:00] ## Line: 160 	 vgcfgbackup -f vg_backup $vg1
| [ 0:00] ## Line: 161 	 check pv_field "$dev2" pv_in_use "used"
| [ 0:00] ## Line: 162 	 vgremove -ff $vg1
| [ 0:00] ## Line: 163 	 check pv_field "$dev2" pv_in_use ""
| [ 0:00] ## Line: 164 	 vgcfgrestore -f vg_backup $vg1
| [ 0:00] ## Line: 165 	 check pv_field "$dev2" pv_in_use "used"
| [ 0:00] aux teardown
| [ 0:00] #pv-ext-flags.sh:1+ aux teardown
| [ 0:00] ## teardown.........ok
###       failed: [ndev-vanilla] shell/pv-ext-flags.sh

| [ 0:00] Library version:   1.02.146 (2017-12-18)
| [ 0:00] Driver version:    4.35.0
| [ 0:00] Kernel is Linux localhost.localdomain 3.10.0-693.11.1.el7.x86_64 #1 SMP Mon Dec 4 23:52:40 UTC 2017 x86_64 GNU/Linux
| [ 0:00] Selinux mode is not installed.
| [ 0:00]               total        used        free      shared  buff/cache   available
| [ 0:00] Mem:           7822        1080        4144          10        2597        6435
| [ 0:00] Swap:          4095           0        4095
| [ 0:00] Filesystem      Size  Used Avail Use% Mounted on
| [ 0:00] /dev/sdc1        18G  8.4G  8.4G  50% /
| [ 0:00] /dev/sdd1        51G  6.1G   43G  13% /lfskernel
| [ 0:00] devtmpfs        3.9G     0  3.9G   0% /dev
| [ 0:00] tmpfs           3.9G     0  3.9G   0% /run
| [ 0:00] @TESTDIR=/tmp/LVMTEST15913.BR3whnibn6
| [ 0:00] @PREFIX=LVMTEST15913
| [ 0:00] ## LVMCONF: activation {
| [ 0:00] ## LVMCONF:     checks = 1
| [ 0:00] ## LVMCONF:     monitoring = 0
| [ 0:00] ## LVMCONF:     polling_interval = 1
| [ 0:00] ## LVMCONF:     raid_region_size = 512
| [ 0:00] ## LVMCONF:     retry_deactivation = 1
| [ 0:00] ## LVMCONF:     snapshot_autoextend_percent = 50
| [ 0:00] ## LVMCONF:     snapshot_autoextend_threshold = 50
| [ 0:00] ## LVMCONF:     udev_rules = 1
| [ 0:00] ## LVMCONF:     udev_sync = 1
| [ 0:00] ## LVMCONF:     verify_udev_operations = 1
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: allocation {
| [ 0:00] ## LVMCONF:     wipe_signatures_when_zeroing_new_lvs = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: backup {
| [ 0:00] ## LVMCONF:     archive = 0
| [ 0:00] ## LVMCONF:     backup = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: devices {
| [ 0:00] ## LVMCONF:     cache_dir = "@TESTDIR@/etc"
| [ 0:00] ## LVMCONF:     default_data_alignment = 1
| [ 0:00] ## LVMCONF:     dir = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     filter = "a|.*|"
| [ 0:00] ## LVMCONF:     global_filter = [ "a|@TESTDIR@/dev/mapper/@PREFIX@.*pv[0-9_]*$|", "r|.*|" ]
| [ 0:00] ## LVMCONF:     md_component_detection  = 0
| [ 0:00] ## LVMCONF:     scan = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     sysfs_scan = 1
| [ 0:00] ## LVMCONF:     write_cache_state = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: dmeventd {
| [ 0:00] ## LVMCONF:     executable = "/sources/boot/LVM2.2.02.177/test/lib/dmeventd"
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: global {
| [ 0:00] ## LVMCONF:     abort_on_internal_errors = 1
| [ 0:00] ## LVMCONF:     cache_check_executable = "/usr/sbin/cache_check"
| [ 0:00] ## LVMCONF:     cache_dump_executable = "/usr/sbin/cache_dump"
| [ 0:00] ## LVMCONF:     cache_repair_executable = "/usr/sbin/cache_repair"
| [ 0:00] ## LVMCONF:     detect_internal_vg_cache_corruption = 1
| [ 0:00] ## LVMCONF:     fallback_to_local_locking = 0
| [ 0:00] ## LVMCONF:     fsadm_executable = "/sources/boot/LVM2.2.02.177/test/lib/fsadm"
| [ 0:00] ## LVMCONF:     library_dir = "@TESTDIR@/lib"
| [ 0:00] ## LVMCONF:     locking_dir = "@TESTDIR@/var/lock/lvm"
| [ 0:00] ## LVMCONF:     locking_type=1
| [ 0:00] ## LVMCONF:     notify_dbus = 0
| [ 0:00] ## LVMCONF:     si_unit_consistency = 1
| [ 0:00] ## LVMCONF:     thin_check_executable = "/usr/sbin/thin_check"
| [ 0:00] ## LVMCONF:     thin_dump_executable = "/usr/sbin/thin_dump"
| [ 0:00] ## LVMCONF:     thin_repair_executable = "/usr/sbin/thin_repair"
| [ 0:00] ## LVMCONF:     use_lvmetad = 0
| [ 0:00] ## LVMCONF:     use_lvmlockd = 0
| [ 0:00] ## LVMCONF:     use_lvmpolld = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: log {
| [ 0:00] ## LVMCONF:     activation = 1
| [ 0:00] ## LVMCONF:     file = "@TESTDIR@/debug.log"
| [ 0:00] ## LVMCONF:     indent = 1
| [ 0:00] ## LVMCONF:     level = 9
| [ 0:00] ## LVMCONF:     overwrite = 1
| [ 0:00] ## LVMCONF:     syslog = 0
| [ 0:00] ## LVMCONF:     verbose = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] <======== Processing test: "pv-ext-update.sh" ========>
| [ 0:00] 
| [ 0:00] env printf "" || skip # skip if printf is not available
| [ 0:00] #pv-ext-update.sh:18+ env printf ''
| [ 0:00] 
| [ 0:00] # create the PV with PV ext vsn 1 and a vg
| [ 0:00] create_pv_with_ext_vsn1_and_vg()
| [ 0:00] {
| [ 0:00]   VG_NAME="LVMTEST12345pvextupdatevg"
| [ 0:00]   LV_NAME="lvol0"
| [ 0:00] 
| [ 0:00]   # FIXME
| [ 0:00]   # echo -e is bashism, dash builtin sh doesn't do \xNN in printf either
| [ 0:00]   # printf comes from coreutils, and is probably not posix either
| [ 0:00] 
| [ 0:00]   # PV header with PV extension version 1
| [ 0:00]   env printf \
| [ 0:00] "\x4c\x41\x42\x45\x4c\x4f\x4e\x45\x01\x00\x00\x00\x00\x00\x00\x00"\
| [ 0:00] "\x78\x1c\x12\x43\x20\x00\x00\x00\x4c\x56\x4d\x32\x20\x30\x30\x31"\
| [ 0:00] "\x64\x35\x56\x33\x38\x5a\x57\x49\x63\x7a\x64\x63\x34\x38\x37\x67"\
| [ 0:00] "\x4d\x79\x46\x4b\x6c\x6d\x68\x39\x4e\x73\x34\x6f\x78\x61\x6b\x51"\
| [ 0:00] "\x00\x00\x80\x00\x00\x00\x00\x00\x00\x00\x10\x00\x00\x00\x00\x00"\
| [ 0:00] "\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00"\
| [ 0:00] "\x00\x00\x00\x00\x00\x00\x00\x00\x00\x10\x00\x00\x00\x00\x00\x00"\
| [ 0:00] "\x00\xf0\x0f\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00"\
| [ 0:00] "\x00\x00\x00\x00\x00\x00\x00\x00\x01\x00\x00\x00\x00\x00\x00\x00"\
| [ 0:00] "\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00" | dd of="$1" bs=512 seek=1 conv=notrunc
| [ 0:00] 
| [ 0:00]   # MDA header
| [ 0:00]   env printf \
| [ 0:00] "\xd8\x36\x2c\xf6\x20\x4c\x56\x4d\x32\x20\x78\x5b\x35\x41\x25\x72"\
| [ 0:00] "\x30\x4e\x2a\x3e\x01\x00\x00\x00\x00\x10\x00\x00\x00\x00\x00\x00"\
| [ 0:00] "\x00\xf0\x0f\x00\x00\x00\x00\x00\x00\x06\x00\x00\x00\x00\x00\x00"\
| [ 0:00] "\x06\x04\x00\x00\x00\x00\x00\x00\x07\x3d\x06\x28\x00\x00\x00\x00"\
| [ 0:00] "\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00" | dd of="$1" bs=4096 seek=1 conv=notrunc
| [ 0:00] 
| [ 0:00]   # VG metadata
| [ 0:00]   env printf \
| [ 0:00] "\x4c\x56\x4d\x54\x45\x53\x54\x31\x32\x33\x34\x35\x70\x76\x65\x78"\
| [ 0:00] "\x74\x75\x70\x64\x61\x74\x65\x76\x67\x20\x7b\x0a\x69\x64\x20\x3d"\
| [ 0:00] "\x20\x22\x42\x72\x47\x6f\x34\x33\x2d\x36\x35\x62\x48\x2d\x41\x55"\
| [ 0:00] "\x6d\x43\x2d\x77\x56\x74\x71\x2d\x51\x53\x63\x66\x2d\x6b\x5a\x51"\
| [ 0:00] "\x45\x2d\x58\x51\x6e\x79\x31\x44\x22\x0a\x73\x65\x71\x6e\x6f\x20"\
| [ 0:00] "\x3d\x20\x31\x0a\x66\x6f\x72\x6d\x61\x74\x20\x3d\x20\x22\x6c\x76"\
| [ 0:00] "\x6d\x32\x22\x0a\x73\x74\x61\x74\x75\x73\x20\x3d\x20\x5b\x22\x52"\
| [ 0:00] "\x45\x53\x49\x5a\x45\x41\x42\x4c\x45\x22\x2c\x20\x22\x52\x45\x41"\
| [ 0:00] "\x44\x22\x2c\x20\x22\x57\x52\x49\x54\x45\x22\x5d\x0a\x66\x6c\x61"\
| [ 0:00] "\x67\x73\x20\x3d\x20\x5b\x5d\x0a\x65\x78\x74\x65\x6e\x74\x5f\x73"\
| [ 0:00] "\x69\x7a\x65\x20\x3d\x20\x38\x31\x39\x32\x0a\x6d\x61\x78\x5f\x6c"\
| [ 0:00] "\x76\x20\x3d\x20\x30\x0a\x6d\x61\x78\x5f\x70\x76\x20\x3d\x20\x30"\
| [ 0:00] "\x0a\x6d\x65\x74\x61\x64\x61\x74\x61\x5f\x63\x6f\x70\x69\x65\x73"\
| [ 0:00] "\x20\x3d\x20\x30\x0a\x0a\x70\x68\x79\x73\x69\x63\x61\x6c\x5f\x76"\
| [ 0:00] "\x6f\x6c\x75\x6d\x65\x73\x20\x7b\x0a\x0a\x70\x76\x30\x20\x7b\x0a"\
| [ 0:00] "\x69\x64\x20\x3d\x20\x22\x64\x35\x56\x33\x38\x5a\x2d\x57\x49\x63"\
| [ 0:00] "\x7a\x2d\x64\x63\x34\x38\x2d\x37\x67\x4d\x79\x2d\x46\x4b\x6c\x6d"\
| [ 0:00] "\x2d\x68\x39\x4e\x73\x2d\x34\x6f\x78\x61\x6b\x51\x22\x0a\x64\x65"\
| [ 0:00] "\x76\x69\x63\x65\x20\x3d\x20\x22\x2f\x64\x65\x76\x2f\x6c\x6f\x6f"\
| [ 0:00] "\x70\x30\x22\x0a\x0a\x73\x74\x61\x74\x75\x73\x20\x3d\x20\x5b\x22"\
| [ 0:00] "\x41\x4c\x4c\x4f\x43\x41\x54\x41\x42\x4c\x45\x22\x5d\x0a\x66\x6c"\
| [ 0:00] "\x61\x67\x73\x20\x3d\x20\x5b\x5d\x0a\x64\x65\x76\x5f\x73\x69\x7a"\
| [ 0:00] "\x65\x20\x3d\x20\x31\x36\x33\x38\x34\x0a\x70\x65\x5f\x73\x74\x61"\
| [ 0:00] "\x72\x74\x20\x3d\x20\x32\x30\x34\x38\x0a\x70\x65\x5f\x63\x6f\x75"\
| [ 0:00] "\x6e\x74\x20\x3d\x20\x31\x0a\x7d\x0a\x7d\x0a\x0a\x7d\x0a\x23\x20"\
| [ 0:00] "\x47\x65\x6e\x65\x72\x61\x74\x65\x64\x20\x62\x79\x20\x4c\x56\x4d"\
| [ 0:00] "\x32\x20\x76\x65\x72\x73\x69\x6f\x6e\x20\x32\x2e\x30\x32\x2e\x31"\
| [ 0:00] "\x34\x32\x28\x32\x29\x2d\x67\x69\x74\x20\x28\x32\x30\x31\x36\x2d"\
| [ 0:00] "\x30\x32\x2d\x31\x35\x29\x3a\x20\x57\x65\x64\x20\x4a\x75\x6c\x20"\
| [ 0:00] "\x32\x37\x20\x31\x31\x3a\x32\x35\x3a\x30\x37\x20\x32\x30\x31\x36"\
| [ 0:00] "\x0a\x0a\x63\x6f\x6e\x74\x65\x6e\x74\x73\x20\x3d\x20\x22\x54\x65"\
| [ 0:00] "\x78\x74\x20\x46\x6f\x72\x6d\x61\x74\x20\x56\x6f\x6c\x75\x6d\x65"\
| [ 0:00] "\x20\x47\x72\x6f\x75\x70\x22\x0a\x76\x65\x72\x73\x69\x6f\x6e\x20"\
| [ 0:00] "\x3d\x20\x31\x0a\x0a\x64\x65\x73\x63\x72\x69\x70\x74\x69\x6f\x6e"\
| [ 0:00] "\x20\x3d\x20\x22\x22\x0a\x0a\x63\x72\x65\x61\x74\x69\x6f\x6e\x5f"\
| [ 0:00] "\x68\x6f\x73\x74\x20\x3d\x20\x22\x66\x65\x64\x6f\x72\x61\x2e\x76"\
| [ 0:00] "\x69\x72\x74\x22\x09\x23\x20\x4c\x69\x6e\x75\x78\x20\x66\x65\x64"\
| [ 0:00] "\x6f\x72\x61\x2e\x76\x69\x72\x74\x20\x34\x2e\x36\x2e\x34\x2d\x33"\
| [ 0:00] "\x30\x31\x2e\x66\x63\x32\x34\x2e\x78\x38\x36\x5f\x36\x34\x20\x23"\
| [ 0:00] "\x31\x20\x53\x4d\x50\x20\x54\x75\x65\x20\x4a\x75\x6c\x20\x31\x32"\
| [ 0:00] "\x20\x31\x31\x3a\x35\x30\x3a\x30\x30\x20\x55\x54\x43\x20\x32\x30"\
| [ 0:00] "\x31\x36\x20\x78\x38\x36\x5f\x36\x34\x0a\x63\x72\x65\x61\x74\x69"\
| [ 0:00] "\x6f\x6e\x5f\x74\x69\x6d\x65\x20\x3d\x20\x31\x34\x36\x39\x36\x31"\
| [ 0:00] "\x31\x35\x30\x37\x09\x23\x20\x57\x65\x64\x20\x4a\x75\x6c\x20\x32"\
| [ 0:00] "\x37\x20\x31\x31\x3a\x32\x35\x3a\x30\x37\x20\x32\x30\x31\x36\x0a"\
| [ 0:00] "\x0a\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00"\
| [ 0:00] "\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00" | dd of="$1" bs=4608 seek=1 conv=notrunc
| [ 0:00] 
| [ 0:00]   env printf \
| [ 0:00] "\x4c\x56\x4d\x54\x45\x53\x54\x31\x32\x33\x34\x35\x70\x76\x65\x78"\
| [ 0:00] "\x74\x75\x70\x64\x61\x74\x65\x76\x67\x20\x7b\x0a\x69\x64\x20\x3d"\
| [ 0:00] "\x20\x22\x42\x72\x47\x6f\x34\x33\x2d\x36\x35\x62\x48\x2d\x41\x55"\
| [ 0:00] "\x6d\x43\x2d\x77\x56\x74\x71\x2d\x51\x53\x63\x66\x2d\x6b\x5a\x51"\
| [ 0:00] "\x45\x2d\x58\x51\x6e\x79\x31\x44\x22\x0a\x73\x65\x71\x6e\x6f\x20"\
| [ 0:00] "\x3d\x20\x32\x0a\x66\x6f\x72\x6d\x61\x74\x20\x3d\x20\x22\x6c\x76"\
| [ 0:00] "\x6d\x32\x22\x0a\x73\x74\x61\x74\x75\x73\x20\x3d\x20\x5b\x22\x52"\
| [ 0:00] "\x45\x53\x49\x5a\x45\x41\x42\x4c\x45\x22\x2c\x20\x22\x52\x45\x41"\
| [ 0:00] "\x44\x22\x2c\x20\x22\x57\x52\x49\x54\x45\x22\x5d\x0a\x66\x6c\x61"\
| [ 0:00] "\x67\x73\x20\x3d\x20\x5b\x5d\x0a\x65\x78\x74\x65\x6e\x74\x5f\x73"\
| [ 0:00] "\x69\x7a\x65\x20\x3d\x20\x38\x31\x39\x32\x0a\x6d\x61\x78\x5f\x6c"\
| [ 0:00] "\x76\x20\x3d\x20\x30\x0a\x6d\x61\x78\x5f\x70\x76\x20\x3d\x20\x30"\
| [ 0:00] "\x0a\x6d\x65\x74\x61\x64\x61\x74\x61\x5f\x63\x6f\x70\x69\x65\x73"\
| [ 0:00] "\x20\x3d\x20\x30\x0a\x0a\x70\x68\x79\x73\x69\x63\x61\x6c\x5f\x76"\
| [ 0:00] "\x6f\x6c\x75\x6d\x65\x73\x20\x7b\x0a\x0a\x70\x76\x30\x20\x7b\x0a"\
| [ 0:00] "\x69\x64\x20\x3d\x20\x22\x64\x35\x56\x33\x38\x5a\x2d\x57\x49\x63"\
| [ 0:00] "\x7a\x2d\x64\x63\x34\x38\x2d\x37\x67\x4d\x79\x2d\x46\x4b\x6c\x6d"\
| [ 0:00] "\x2d\x68\x39\x4e\x73\x2d\x34\x6f\x78\x61\x6b\x51\x22\x0a\x64\x65"\
| [ 0:00] "\x76\x69\x63\x65\x20\x3d\x20\x22\x2f\x64\x65\x76\x2f\x6c\x6f\x6f"\
| [ 0:00] "\x70\x30\x22\x0a\x0a\x73\x74\x61\x74\x75\x73\x20\x3d\x20\x5b\x22"\
| [ 0:00] "\x41\x4c\x4c\x4f\x43\x41\x54\x41\x42\x4c\x45\x22\x5d\x0a\x66\x6c"\
| [ 0:00] "\x61\x67\x73\x20\x3d\x20\x5b\x5d\x0a\x64\x65\x76\x5f\x73\x69\x7a"\
| [ 0:00] "\x65\x20\x3d\x20\x31\x36\x33\x38\x34\x0a\x70\x65\x5f\x73\x74\x61"\
| [ 0:00] "\x72\x74\x20\x3d\x20\x32\x30\x34\x38\x0a\x70\x65\x5f\x63\x6f\x75"\
| [ 0:00] "\x6e\x74\x20\x3d\x20\x31\x0a\x7d\x0a\x7d\x0a\x0a\x6c\x6f\x67\x69"\
| [ 0:00] "\x63\x61\x6c\x5f\x76\x6f\x6c\x75\x6d\x65\x73\x20\x7b\x0a\x0a\x6c"\
| [ 0:00] "\x76\x6f\x6c\x30\x20\x7b\x0a\x69\x64\x20\x3d\x20\x22\x46\x73\x36"\
| [ 0:00] "\x6c\x6a\x6b\x2d\x4a\x65\x5a\x35\x2d\x55\x4e\x75\x37\x2d\x32\x41"\
| [ 0:00] "\x33\x50\x2d\x76\x30\x41\x43\x2d\x64\x63\x64\x36\x2d\x32\x33\x38"\
| [ 0:00] "\x39\x4d\x76\x22\x0a\x73\x74\x61\x74\x75\x73\x20\x3d\x20\x5b\x22"\
| [ 0:00] "\x52\x45\x41\x44\x22\x2c\x20\x22\x57\x52\x49\x54\x45\x22\x2c\x20"\
| [ 0:00] "\x22\x56\x49\x53\x49\x42\x4c\x45\x22\x5d\x0a\x66\x6c\x61\x67\x73"\
| [ 0:00] "\x20\x3d\x20\x5b\x5d\x0a\x63\x72\x65\x61\x74\x69\x6f\x6e\x5f\x68"\
| [ 0:00] "\x6f\x73\x74\x20\x3d\x20\x22\x66\x65\x64\x6f\x72\x61\x2e\x76\x69"\
| [ 0:00] "\x72\x74\x22\x0a\x63\x72\x65\x61\x74\x69\x6f\x6e\x5f\x74\x69\x6d"\
| [ 0:00] "\x65\x20\x3d\x20\x31\x34\x36\x39\x36\x31\x31\x35\x31\x30\x0a\x73"\
| [ 0:00] "\x65\x67\x6d\x65\x6e\x74\x5f\x63\x6f\x75\x6e\x74\x20\x3d\x20\x31"\
| [ 0:00] "\x0a\x0a\x73\x65\x67\x6d\x65\x6e\x74\x31\x20\x7b\x0a\x73\x74\x61"\
| [ 0:00] "\x72\x74\x5f\x65\x78\x74\x65\x6e\x74\x20\x3d\x20\x30\x0a\x65\x78"\
| [ 0:00] "\x74\x65\x6e\x74\x5f\x63\x6f\x75\x6e\x74\x20\x3d\x20\x31\x0a\x0a"\
| [ 0:00] "\x74\x79\x70\x65\x20\x3d\x20\x22\x73\x74\x72\x69\x70\x65\x64\x22"\
| [ 0:00] "\x0a\x73\x74\x72\x69\x70\x65\x5f\x63\x6f\x75\x6e\x74\x20\x3d\x20"\
| [ 0:00] "\x31\x0a\x0a\x73\x74\x72\x69\x70\x65\x73\x20\x3d\x20\x5b\x0a\x22"\
| [ 0:00] "\x70\x76\x30\x22\x2c\x20\x30\x0a\x5d\x0a\x7d\x0a\x7d\x0a\x7d\x0a"\
| [ 0:00] "\x7d\x0a\x23\x20\x47\x65\x6e\x65\x72\x61\x74\x65\x64\x20\x62\x79"\
| [ 0:00] "\x20\x4c\x56\x4d\x32\x20\x76\x65\x72\x73\x69\x6f\x6e\x20\x32\x2e"\
| [ 0:00] "\x30\x32\x2e\x31\x34\x32\x28\x32\x29\x2d\x67\x69\x74\x20\x28\x32"\
| [ 0:00] "\x30\x31\x36\x2d\x30\x32\x2d\x31\x35\x29\x3a\x20\x57\x65\x64\x20"\
| [ 0:00] "\x4a\x75\x6c\x20\x32\x37\x20\x31\x31\x3a\x32\x35\x3a\x31\x30\x20"\
| [ 0:00] "\x32\x30\x31\x36\x0a\x0a\x63\x6f\x6e\x74\x65\x6e\x74\x73\x20\x3d"\
| [ 0:00] "\x20\x22\x54\x65\x78\x74\x20\x46\x6f\x72\x6d\x61\x74\x20\x56\x6f"\
| [ 0:00] "\x6c\x75\x6d\x65\x20\x47\x72\x6f\x75\x70\x22\x0a\x76\x65\x72\x73"\
| [ 0:00] "\x69\x6f\x6e\x20\x3d\x20\x31\x0a\x0a\x64\x65\x73\x63\x72\x69\x70"\
| [ 0:00] "\x74\x69\x6f\x6e\x20\x3d\x20\x22\x22\x0a\x0a\x63\x72\x65\x61\x74"\
| [ 0:00] "\x69\x6f\x6e\x5f\x68\x6f\x73\x74\x20\x3d\x20\x22\x66\x65\x64\x6f"\
| [ 0:00] "\x72\x61\x2e\x76\x69\x72\x74\x22\x09\x23\x20\x4c\x69\x6e\x75\x78"\
| [ 0:00] "\x20\x66\x65\x64\x6f\x72\x61\x2e\x76\x69\x72\x74\x20\x34\x2e\x36"\
| [ 0:00] "\x2e\x34\x2d\x33\x30\x31\x2e\x66\x63\x32\x34\x2e\x78\x38\x36\x5f"\
| [ 0:00] "\x36\x34\x20\x23\x31\x20\x53\x4d\x50\x20\x54\x75\x65\x20\x4a\x75"\
| [ 0:00] "\x6c\x20\x31\x32\x20\x31\x31\x3a\x35\x30\x3a\x30\x30\x20\x55\x54"\
| [ 0:00] "\x43\x20\x32\x30\x31\x36\x20\x78\x38\x36\x5f\x36\x34\x0a\x63\x72"\
| [ 0:00] "\x65\x61\x74\x69\x6f\x6e\x5f\x74\x69\x6d\x65\x20\x3d\x20\x31\x34"\
| [ 0:00] "\x36\x39\x36\x31\x31\x35\x31\x30\x09\x23\x20\x57\x65\x64\x20\x4a"\
| [ 0:00] "\x75\x6c\x20\x32\x37\x20\x31\x31\x3a\x32\x35\x3a\x31\x30\x20\x32"\
| [ 0:00] "\x30\x31\x36\x0a\x0a\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00"\
| [ 0:00] "\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00" | dd of="$1" bs=5632 seek=1 conv=notrunc
| [ 0:00] 
| [ 0:00]   aux notify_lvmetad "$1"
| [ 0:00] }
| [ 0:00] 
| [ 0:00] aux prepare_devs 1 8
| [ 0:00] #pv-ext-update.sh:172+ aux prepare_devs 1 8
| [ 0:00] ## preparing loop device....ok (/dev/loop0)
| [ 0:00] ## preparing 1 devices...lib/utils: line 212: DM_UDEV_COOKIE: unbound variable
| [ 0:00] set +vx; STACKTRACE; set -vx
| [ 0:00] ##pv-ext-update.sh:172+ set +vx
| [ 0:00] ## - /lfskernel/sources/boot/LVM2.2.02.177/test/shell/pv-ext-update.sh:172
| [ 0:00] ## 1 STACKTRACE() called from /lfskernel/sources/boot/LVM2.2.02.177/test/shell/pv-ext-update.sh:172
| [ 0:00] <======== Info ========>
| [ 0:00] ## DMINFO:   Name             Maj Min Stat Open Targ Event  UUID                                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv1  253   3 L--w    0    1      0 TEST-@PREFIX@pv1                                                
| [ 0:00] <======== Active table ========>
| [ 0:00] ## DMTABLE:  @PREFIX@pv1: 0 16384 linear 7:0 2048
| [ 0:00] <======== Inactive table ========>
| [ 0:00] ## DMITABLE: @PREFIX@pv1: 
| [ 0:00] <======== Status ========>
| [ 0:00] ## DMSTATUS: @PREFIX@pv1: 0 16384 linear 
| [ 0:00] <======== Tree ========>
| [ 0:00] ## DMTREE:   @PREFIX@pv1 (253:3)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   LFS_vg-lfs (253:2)
| [ 0:00] ## DMTREE:    `- (8:16)
| [ 0:00] ## DMTREE:   centos-swap (253:1)
| [ 0:00] ## DMTREE:    `- (8:2)
| [ 0:00] ## DMTREE:   centos-root (253:0)
| [ 0:00] ## DMTREE:    `- (8:2)
| [ 0:00] <======== Recursive list of @TESTDIR@/dev ========>
| [ 0:00] ## LSLR:	@TESTDIR@/dev:
| [ 0:00] ## LSLR:	total 4
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 0 Feb 21 02:27 loop0
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 1 Feb 21 02:27 loop1
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 2 Feb 21 02:27 loop2
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 3 Feb 21 02:27 loop3
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 4 Feb 21 02:27 loop4
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 5 Feb 21 02:27 loop5
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 6 Feb 21 02:27 loop6
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 7 Feb 21 02:27 loop7
| [ 0:00] ## LSLR:	drwxr-xr-x 2 root root 4096 Feb 21 02:27 mapper
| [ 0:00] ## LSLR:	crw-r--r-- 1 root root 1, 3 Feb 21 02:27 testnull
| [ 0:00] ## LSLR:	
| [ 0:00] ## LSLR:	@TESTDIR@/dev/mapper:
| [ 0:00] ## LSLR:	total 0
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   3 Feb 21 02:27 @PREFIX@pv1
| [ 0:00] ## LSLR:	crw------- 1 root root  10, 236 Feb 21 02:27 control
| [ 0:00] <======== Udev DB content ========>
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-0
| [ 0:00] ## UDEV:	N: dm-0
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-0
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-0
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=0
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-1
| [ 0:00] ## UDEV:	N: dm-1
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-1
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-1
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=1
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-2
| [ 0:00] ## UDEV:	N: dm-2
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-2
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-2
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=2
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-3
| [ 0:00] ## UDEV:	N: dm-3
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-3
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-3
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=3
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/loop0
| [ 0:00] ## UDEV:	N: loop0
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/loop0
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/loop0
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=7
| [ 0:00] ## UDEV:	E: MINOR=0
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] <======== Script file "pv-ext-update.sh" ========>
| [ 0:00] ## Line: 1 	 #!/usr/bin/env bash
| [ 0:00] ## Line: 2 	 
| [ 0:00] ## Line: 3 	 # Copyright (C) 2016 Red Hat, Inc. All rights reserved.
| [ 0:00] ## Line: 4 	 #
| [ 0:00] ## Line: 5 	 # This copyrighted material is made available to anyone wishing to use,
| [ 0:00] ## Line: 6 	 # modify, copy, or redistribute it subject to the terms and conditions
| [ 0:00] ## Line: 7 	 # of the GNU General Public License v.2.
| [ 0:00] ## Line: 8 	 #
| [ 0:00] ## Line: 9 	 # You should have received a copy of the GNU General Public License
| [ 0:00] ## Line: 10 	 # along with this program; if not, write to the Free Software Foundation,
| [ 0:00] ## Line: 11 	 # Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA
| [ 0:00] ## Line: 12 	 
| [ 0:00] ## Line: 13 	 # lvmetad does not handle pool labels so skip test.
| [ 0:00] ## Line: 14 	 SKIP_WITH_LVMPOLLD=1
| [ 0:00] ## Line: 15 	 
| [ 0:00] ## Line: 16 	 . lib/inittest
| [ 0:00] ## Line: 17 	 
| [ 0:00] ## Line: 18 	 env printf "" || skip # skip if printf is not available
| [ 0:00] ## Line: 19 	 
| [ 0:00] ## Line: 20 	 # create the PV with PV ext vsn 1 and a vg
| [ 0:00] ## Line: 21 	 create_pv_with_ext_vsn1_and_vg()
| [ 0:00] ## Line: 22 	 {
| [ 0:00] ## Line: 23 	   VG_NAME="LVMTEST12345pvextupdatevg"
| [ 0:00] ## Line: 24 	   LV_NAME="lvol0"
| [ 0:00] ## Line: 25 	 
| [ 0:00] ## Line: 26 	   # FIXME
| [ 0:00] ## Line: 27 	   # echo -e is bashism, dash builtin sh doesn't do \xNN in printf either
| [ 0:00] ## Line: 28 	   # printf comes from coreutils, and is probably not posix either
| [ 0:00] ## Line: 29 	 
| [ 0:00] ## Line: 30 	   # PV header with PV extension version 1
| [ 0:00] ## Line: 31 	   env printf \
| [ 0:00] ## Line: 32 	 "\x4c\x41\x42\x45\x4c\x4f\x4e\x45\x01\x00\x00\x00\x00\x00\x00\x00"\
| [ 0:00] ## Line: 33 	 "\x78\x1c\x12\x43\x20\x00\x00\x00\x4c\x56\x4d\x32\x20\x30\x30\x31"\
| [ 0:00] ## Line: 34 	 "\x64\x35\x56\x33\x38\x5a\x57\x49\x63\x7a\x64\x63\x34\x38\x37\x67"\
| [ 0:00] ## Line: 35 	 "\x4d\x79\x46\x4b\x6c\x6d\x68\x39\x4e\x73\x34\x6f\x78\x61\x6b\x51"\
| [ 0:00] ## Line: 36 	 "\x00\x00\x80\x00\x00\x00\x00\x00\x00\x00\x10\x00\x00\x00\x00\x00"\
| [ 0:00] ## Line: 37 	 "\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00"\
| [ 0:00] ## Line: 38 	 "\x00\x00\x00\x00\x00\x00\x00\x00\x00\x10\x00\x00\x00\x00\x00\x00"\
| [ 0:00] ## Line: 39 	 "\x00\xf0\x0f\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00"\
| [ 0:00] ## Line: 40 	 "\x00\x00\x00\x00\x00\x00\x00\x00\x01\x00\x00\x00\x00\x00\x00\x00"\
| [ 0:00] ## Line: 41 	 "\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00" | dd of="$1" bs=512 seek=1 conv=notrunc
| [ 0:00] ## Line: 42 	 
| [ 0:00] ## Line: 43 	   # MDA header
| [ 0:00] ## Line: 44 	   env printf \
| [ 0:00] ## Line: 45 	 "\xd8\x36\x2c\xf6\x20\x4c\x56\x4d\x32\x20\x78\x5b\x35\x41\x25\x72"\
| [ 0:00] ## Line: 46 	 "\x30\x4e\x2a\x3e\x01\x00\x00\x00\x00\x10\x00\x00\x00\x00\x00\x00"\
| [ 0:00] ## Line: 47 	 "\x00\xf0\x0f\x00\x00\x00\x00\x00\x00\x06\x00\x00\x00\x00\x00\x00"\
| [ 0:00] ## Line: 48 	 "\x06\x04\x00\x00\x00\x00\x00\x00\x07\x3d\x06\x28\x00\x00\x00\x00"\
| [ 0:00] ## Line: 49 	 "\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00" | dd of="$1" bs=4096 seek=1 conv=notrunc
| [ 0:00] ## Line: 50 	 
| [ 0:00] ## Line: 51 	   # VG metadata
| [ 0:00] ## Line: 52 	   env printf \
| [ 0:00] ## Line: 53 	 "\x4c\x56\x4d\x54\x45\x53\x54\x31\x32\x33\x34\x35\x70\x76\x65\x78"\
| [ 0:00] ## Line: 54 	 "\x74\x75\x70\x64\x61\x74\x65\x76\x67\x20\x7b\x0a\x69\x64\x20\x3d"\
| [ 0:00] ## Line: 55 	 "\x20\x22\x42\x72\x47\x6f\x34\x33\x2d\x36\x35\x62\x48\x2d\x41\x55"\
| [ 0:00] ## Line: 56 	 "\x6d\x43\x2d\x77\x56\x74\x71\x2d\x51\x53\x63\x66\x2d\x6b\x5a\x51"\
| [ 0:00] ## Line: 57 	 "\x45\x2d\x58\x51\x6e\x79\x31\x44\x22\x0a\x73\x65\x71\x6e\x6f\x20"\
| [ 0:00] ## Line: 58 	 "\x3d\x20\x31\x0a\x66\x6f\x72\x6d\x61\x74\x20\x3d\x20\x22\x6c\x76"\
| [ 0:00] ## Line: 59 	 "\x6d\x32\x22\x0a\x73\x74\x61\x74\x75\x73\x20\x3d\x20\x5b\x22\x52"\
| [ 0:00] ## Line: 60 	 "\x45\x53\x49\x5a\x45\x41\x42\x4c\x45\x22\x2c\x20\x22\x52\x45\x41"\
| [ 0:00] ## Line: 61 	 "\x44\x22\x2c\x20\x22\x57\x52\x49\x54\x45\x22\x5d\x0a\x66\x6c\x61"\
| [ 0:00] ## Line: 62 	 "\x67\x73\x20\x3d\x20\x5b\x5d\x0a\x65\x78\x74\x65\x6e\x74\x5f\x73"\
| [ 0:00] ## Line: 63 	 "\x69\x7a\x65\x20\x3d\x20\x38\x31\x39\x32\x0a\x6d\x61\x78\x5f\x6c"\
| [ 0:00] ## Line: 64 	 "\x76\x20\x3d\x20\x30\x0a\x6d\x61\x78\x5f\x70\x76\x20\x3d\x20\x30"\
| [ 0:00] ## Line: 65 	 "\x0a\x6d\x65\x74\x61\x64\x61\x74\x61\x5f\x63\x6f\x70\x69\x65\x73"\
| [ 0:00] ## Line: 66 	 "\x20\x3d\x20\x30\x0a\x0a\x70\x68\x79\x73\x69\x63\x61\x6c\x5f\x76"\
| [ 0:00] ## Line: 67 	 "\x6f\x6c\x75\x6d\x65\x73\x20\x7b\x0a\x0a\x70\x76\x30\x20\x7b\x0a"\
| [ 0:00] ## Line: 68 	 "\x69\x64\x20\x3d\x20\x22\x64\x35\x56\x33\x38\x5a\x2d\x57\x49\x63"\
| [ 0:00] ## Line: 69 	 "\x7a\x2d\x64\x63\x34\x38\x2d\x37\x67\x4d\x79\x2d\x46\x4b\x6c\x6d"\
| [ 0:00] ## Line: 70 	 "\x2d\x68\x39\x4e\x73\x2d\x34\x6f\x78\x61\x6b\x51\x22\x0a\x64\x65"\
| [ 0:00] ## Line: 71 	 "\x76\x69\x63\x65\x20\x3d\x20\x22\x2f\x64\x65\x76\x2f\x6c\x6f\x6f"\
| [ 0:00] ## Line: 72 	 "\x70\x30\x22\x0a\x0a\x73\x74\x61\x74\x75\x73\x20\x3d\x20\x5b\x22"\
| [ 0:00] ## Line: 73 	 "\x41\x4c\x4c\x4f\x43\x41\x54\x41\x42\x4c\x45\x22\x5d\x0a\x66\x6c"\
| [ 0:00] ## Line: 74 	 "\x61\x67\x73\x20\x3d\x20\x5b\x5d\x0a\x64\x65\x76\x5f\x73\x69\x7a"\
| [ 0:00] ## Line: 75 	 "\x65\x20\x3d\x20\x31\x36\x33\x38\x34\x0a\x70\x65\x5f\x73\x74\x61"\
| [ 0:00] ## Line: 76 	 "\x72\x74\x20\x3d\x20\x32\x30\x34\x38\x0a\x70\x65\x5f\x63\x6f\x75"\
| [ 0:00] ## Line: 77 	 "\x6e\x74\x20\x3d\x20\x31\x0a\x7d\x0a\x7d\x0a\x0a\x7d\x0a\x23\x20"\
| [ 0:00] ## Line: 78 	 "\x47\x65\x6e\x65\x72\x61\x74\x65\x64\x20\x62\x79\x20\x4c\x56\x4d"\
| [ 0:00] ## Line: 79 	 "\x32\x20\x76\x65\x72\x73\x69\x6f\x6e\x20\x32\x2e\x30\x32\x2e\x31"\
| [ 0:00] ## Line: 80 	 "\x34\x32\x28\x32\x29\x2d\x67\x69\x74\x20\x28\x32\x30\x31\x36\x2d"\
| [ 0:00] ## Line: 81 	 "\x30\x32\x2d\x31\x35\x29\x3a\x20\x57\x65\x64\x20\x4a\x75\x6c\x20"\
| [ 0:00] ## Line: 82 	 "\x32\x37\x20\x31\x31\x3a\x32\x35\x3a\x30\x37\x20\x32\x30\x31\x36"\
| [ 0:00] ## Line: 83 	 "\x0a\x0a\x63\x6f\x6e\x74\x65\x6e\x74\x73\x20\x3d\x20\x22\x54\x65"\
| [ 0:00] ## Line: 84 	 "\x78\x74\x20\x46\x6f\x72\x6d\x61\x74\x20\x56\x6f\x6c\x75\x6d\x65"\
| [ 0:00] ## Line: 85 	 "\x20\x47\x72\x6f\x75\x70\x22\x0a\x76\x65\x72\x73\x69\x6f\x6e\x20"\
| [ 0:00] ## Line: 86 	 "\x3d\x20\x31\x0a\x0a\x64\x65\x73\x63\x72\x69\x70\x74\x69\x6f\x6e"\
| [ 0:00] ## Line: 87 	 "\x20\x3d\x20\x22\x22\x0a\x0a\x63\x72\x65\x61\x74\x69\x6f\x6e\x5f"\
| [ 0:00] ## Line: 88 	 "\x68\x6f\x73\x74\x20\x3d\x20\x22\x66\x65\x64\x6f\x72\x61\x2e\x76"\
| [ 0:00] ## Line: 89 	 "\x69\x72\x74\x22\x09\x23\x20\x4c\x69\x6e\x75\x78\x20\x66\x65\x64"\
| [ 0:00] ## Line: 90 	 "\x6f\x72\x61\x2e\x76\x69\x72\x74\x20\x34\x2e\x36\x2e\x34\x2d\x33"\
| [ 0:00] ## Line: 91 	 "\x30\x31\x2e\x66\x63\x32\x34\x2e\x78\x38\x36\x5f\x36\x34\x20\x23"\
| [ 0:00] ## Line: 92 	 "\x31\x20\x53\x4d\x50\x20\x54\x75\x65\x20\x4a\x75\x6c\x20\x31\x32"\
| [ 0:00] ## Line: 93 	 "\x20\x31\x31\x3a\x35\x30\x3a\x30\x30\x20\x55\x54\x43\x20\x32\x30"\
| [ 0:00] ## Line: 94 	 "\x31\x36\x20\x78\x38\x36\x5f\x36\x34\x0a\x63\x72\x65\x61\x74\x69"\
| [ 0:00] ## Line: 95 	 "\x6f\x6e\x5f\x74\x69\x6d\x65\x20\x3d\x20\x31\x34\x36\x39\x36\x31"\
| [ 0:00] ## Line: 96 	 "\x31\x35\x30\x37\x09\x23\x20\x57\x65\x64\x20\x4a\x75\x6c\x20\x32"\
| [ 0:00] ## Line: 97 	 "\x37\x20\x31\x31\x3a\x32\x35\x3a\x30\x37\x20\x32\x30\x31\x36\x0a"\
| [ 0:00] ## Line: 98 	 "\x0a\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00"\
| [ 0:00] ## Line: 99 	 "\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00" | dd of="$1" bs=4608 seek=1 conv=notrunc
| [ 0:00] ## Line: 100 	 
| [ 0:00] ## Line: 101 	   env printf \
| [ 0:00] ## Line: 102 	 "\x4c\x56\x4d\x54\x45\x53\x54\x31\x32\x33\x34\x35\x70\x76\x65\x78"\
| [ 0:00] ## Line: 103 	 "\x74\x75\x70\x64\x61\x74\x65\x76\x67\x20\x7b\x0a\x69\x64\x20\x3d"\
| [ 0:00] ## Line: 104 	 "\x20\x22\x42\x72\x47\x6f\x34\x33\x2d\x36\x35\x62\x48\x2d\x41\x55"\
| [ 0:00] ## Line: 105 	 "\x6d\x43\x2d\x77\x56\x74\x71\x2d\x51\x53\x63\x66\x2d\x6b\x5a\x51"\
| [ 0:00] ## Line: 106 	 "\x45\x2d\x58\x51\x6e\x79\x31\x44\x22\x0a\x73\x65\x71\x6e\x6f\x20"\
| [ 0:00] ## Line: 107 	 "\x3d\x20\x32\x0a\x66\x6f\x72\x6d\x61\x74\x20\x3d\x20\x22\x6c\x76"\
| [ 0:00] ## Line: 108 	 "\x6d\x32\x22\x0a\x73\x74\x61\x74\x75\x73\x20\x3d\x20\x5b\x22\x52"\
| [ 0:00] ## Line: 109 	 "\x45\x53\x49\x5a\x45\x41\x42\x4c\x45\x22\x2c\x20\x22\x52\x45\x41"\
| [ 0:00] ## Line: 110 	 "\x44\x22\x2c\x20\x22\x57\x52\x49\x54\x45\x22\x5d\x0a\x66\x6c\x61"\
| [ 0:00] ## Line: 111 	 "\x67\x73\x20\x3d\x20\x5b\x5d\x0a\x65\x78\x74\x65\x6e\x74\x5f\x73"\
| [ 0:00] ## Line: 112 	 "\x69\x7a\x65\x20\x3d\x20\x38\x31\x39\x32\x0a\x6d\x61\x78\x5f\x6c"\
| [ 0:00] ## Line: 113 	 "\x76\x20\x3d\x20\x30\x0a\x6d\x61\x78\x5f\x70\x76\x20\x3d\x20\x30"\
| [ 0:00] ## Line: 114 	 "\x0a\x6d\x65\x74\x61\x64\x61\x74\x61\x5f\x63\x6f\x70\x69\x65\x73"\
| [ 0:00] ## Line: 115 	 "\x20\x3d\x20\x30\x0a\x0a\x70\x68\x79\x73\x69\x63\x61\x6c\x5f\x76"\
| [ 0:00] ## Line: 116 	 "\x6f\x6c\x75\x6d\x65\x73\x20\x7b\x0a\x0a\x70\x76\x30\x20\x7b\x0a"\
| [ 0:00] ## Line: 117 	 "\x69\x64\x20\x3d\x20\x22\x64\x35\x56\x33\x38\x5a\x2d\x57\x49\x63"\
| [ 0:00] ## Line: 118 	 "\x7a\x2d\x64\x63\x34\x38\x2d\x37\x67\x4d\x79\x2d\x46\x4b\x6c\x6d"\
| [ 0:00] ## Line: 119 	 "\x2d\x68\x39\x4e\x73\x2d\x34\x6f\x78\x61\x6b\x51\x22\x0a\x64\x65"\
| [ 0:00] ## Line: 120 	 "\x76\x69\x63\x65\x20\x3d\x20\x22\x2f\x64\x65\x76\x2f\x6c\x6f\x6f"\
| [ 0:00] ## Line: 121 	 "\x70\x30\x22\x0a\x0a\x73\x74\x61\x74\x75\x73\x20\x3d\x20\x5b\x22"\
| [ 0:00] ## Line: 122 	 "\x41\x4c\x4c\x4f\x43\x41\x54\x41\x42\x4c\x45\x22\x5d\x0a\x66\x6c"\
| [ 0:00] ## Line: 123 	 "\x61\x67\x73\x20\x3d\x20\x5b\x5d\x0a\x64\x65\x76\x5f\x73\x69\x7a"\
| [ 0:00] ## Line: 124 	 "\x65\x20\x3d\x20\x31\x36\x33\x38\x34\x0a\x70\x65\x5f\x73\x74\x61"\
| [ 0:00] ## Line: 125 	 "\x72\x74\x20\x3d\x20\x32\x30\x34\x38\x0a\x70\x65\x5f\x63\x6f\x75"\
| [ 0:00] ## Line: 126 	 "\x6e\x74\x20\x3d\x20\x31\x0a\x7d\x0a\x7d\x0a\x0a\x6c\x6f\x67\x69"\
| [ 0:00] ## Line: 127 	 "\x63\x61\x6c\x5f\x76\x6f\x6c\x75\x6d\x65\x73\x20\x7b\x0a\x0a\x6c"\
| [ 0:00] ## Line: 128 	 "\x76\x6f\x6c\x30\x20\x7b\x0a\x69\x64\x20\x3d\x20\x22\x46\x73\x36"\
| [ 0:00] ## Line: 129 	 "\x6c\x6a\x6b\x2d\x4a\x65\x5a\x35\x2d\x55\x4e\x75\x37\x2d\x32\x41"\
| [ 0:00] ## Line: 130 	 "\x33\x50\x2d\x76\x30\x41\x43\x2d\x64\x63\x64\x36\x2d\x32\x33\x38"\
| [ 0:00] ## Line: 131 	 "\x39\x4d\x76\x22\x0a\x73\x74\x61\x74\x75\x73\x20\x3d\x20\x5b\x22"\
| [ 0:00] ## Line: 132 	 "\x52\x45\x41\x44\x22\x2c\x20\x22\x57\x52\x49\x54\x45\x22\x2c\x20"\
| [ 0:00] ## Line: 133 	 "\x22\x56\x49\x53\x49\x42\x4c\x45\x22\x5d\x0a\x66\x6c\x61\x67\x73"\
| [ 0:00] ## Line: 134 	 "\x20\x3d\x20\x5b\x5d\x0a\x63\x72\x65\x61\x74\x69\x6f\x6e\x5f\x68"\
| [ 0:00] ## Line: 135 	 "\x6f\x73\x74\x20\x3d\x20\x22\x66\x65\x64\x6f\x72\x61\x2e\x76\x69"\
| [ 0:00] ## Line: 136 	 "\x72\x74\x22\x0a\x63\x72\x65\x61\x74\x69\x6f\x6e\x5f\x74\x69\x6d"\
| [ 0:00] ## Line: 137 	 "\x65\x20\x3d\x20\x31\x34\x36\x39\x36\x31\x31\x35\x31\x30\x0a\x73"\
| [ 0:00] ## Line: 138 	 "\x65\x67\x6d\x65\x6e\x74\x5f\x63\x6f\x75\x6e\x74\x20\x3d\x20\x31"\
| [ 0:00] ## Line: 139 	 "\x0a\x0a\x73\x65\x67\x6d\x65\x6e\x74\x31\x20\x7b\x0a\x73\x74\x61"\
| [ 0:00] ## Line: 140 	 "\x72\x74\x5f\x65\x78\x74\x65\x6e\x74\x20\x3d\x20\x30\x0a\x65\x78"\
| [ 0:00] ## Line: 141 	 "\x74\x65\x6e\x74\x5f\x63\x6f\x75\x6e\x74\x20\x3d\x20\x31\x0a\x0a"\
| [ 0:00] ## Line: 142 	 "\x74\x79\x70\x65\x20\x3d\x20\x22\x73\x74\x72\x69\x70\x65\x64\x22"\
| [ 0:00] ## Line: 143 	 "\x0a\x73\x74\x72\x69\x70\x65\x5f\x63\x6f\x75\x6e\x74\x20\x3d\x20"\
| [ 0:00] ## Line: 144 	 "\x31\x0a\x0a\x73\x74\x72\x69\x70\x65\x73\x20\x3d\x20\x5b\x0a\x22"\
| [ 0:00] ## Line: 145 	 "\x70\x76\x30\x22\x2c\x20\x30\x0a\x5d\x0a\x7d\x0a\x7d\x0a\x7d\x0a"\
| [ 0:00] ## Line: 146 	 "\x7d\x0a\x23\x20\x47\x65\x6e\x65\x72\x61\x74\x65\x64\x20\x62\x79"\
| [ 0:00] ## Line: 147 	 "\x20\x4c\x56\x4d\x32\x20\x76\x65\x72\x73\x69\x6f\x6e\x20\x32\x2e"\
| [ 0:00] ## Line: 148 	 "\x30\x32\x2e\x31\x34\x32\x28\x32\x29\x2d\x67\x69\x74\x20\x28\x32"\
| [ 0:00] ## Line: 149 	 "\x30\x31\x36\x2d\x30\x32\x2d\x31\x35\x29\x3a\x20\x57\x65\x64\x20"\
| [ 0:00] ## Line: 150 	 "\x4a\x75\x6c\x20\x32\x37\x20\x31\x31\x3a\x32\x35\x3a\x31\x30\x20"\
| [ 0:00] ## Line: 151 	 "\x32\x30\x31\x36\x0a\x0a\x63\x6f\x6e\x74\x65\x6e\x74\x73\x20\x3d"\
| [ 0:00] ## Line: 152 	 "\x20\x22\x54\x65\x78\x74\x20\x46\x6f\x72\x6d\x61\x74\x20\x56\x6f"\
| [ 0:00] ## Line: 153 	 "\x6c\x75\x6d\x65\x20\x47\x72\x6f\x75\x70\x22\x0a\x76\x65\x72\x73"\
| [ 0:00] ## Line: 154 	 "\x69\x6f\x6e\x20\x3d\x20\x31\x0a\x0a\x64\x65\x73\x63\x72\x69\x70"\
| [ 0:00] ## Line: 155 	 "\x74\x69\x6f\x6e\x20\x3d\x20\x22\x22\x0a\x0a\x63\x72\x65\x61\x74"\
| [ 0:00] ## Line: 156 	 "\x69\x6f\x6e\x5f\x68\x6f\x73\x74\x20\x3d\x20\x22\x66\x65\x64\x6f"\
| [ 0:00] ## Line: 157 	 "\x72\x61\x2e\x76\x69\x72\x74\x22\x09\x23\x20\x4c\x69\x6e\x75\x78"\
| [ 0:00] ## Line: 158 	 "\x20\x66\x65\x64\x6f\x72\x61\x2e\x76\x69\x72\x74\x20\x34\x2e\x36"\
| [ 0:00] ## Line: 159 	 "\x2e\x34\x2d\x33\x30\x31\x2e\x66\x63\x32\x34\x2e\x78\x38\x36\x5f"\
| [ 0:00] ## Line: 160 	 "\x36\x34\x20\x23\x31\x20\x53\x4d\x50\x20\x54\x75\x65\x20\x4a\x75"\
| [ 0:00] ## Line: 161 	 "\x6c\x20\x31\x32\x20\x31\x31\x3a\x35\x30\x3a\x30\x30\x20\x55\x54"\
| [ 0:00] ## Line: 162 	 "\x43\x20\x32\x30\x31\x36\x20\x78\x38\x36\x5f\x36\x34\x0a\x63\x72"\
| [ 0:00] ## Line: 163 	 "\x65\x61\x74\x69\x6f\x6e\x5f\x74\x69\x6d\x65\x20\x3d\x20\x31\x34"\
| [ 0:00] ## Line: 164 	 "\x36\x39\x36\x31\x31\x35\x31\x30\x09\x23\x20\x57\x65\x64\x20\x4a"\
| [ 0:00] ## Line: 165 	 "\x75\x6c\x20\x32\x37\x20\x31\x31\x3a\x32\x35\x3a\x31\x30\x20\x32"\
| [ 0:00] ## Line: 166 	 "\x30\x31\x36\x0a\x0a\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00"\
| [ 0:00] ## Line: 167 	 "\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00" | dd of="$1" bs=5632 seek=1 conv=notrunc
| [ 0:00] ## Line: 168 	 
| [ 0:00] ## Line: 169 	   aux notify_lvmetad "$1"
| [ 0:00] ## Line: 170 	 }
| [ 0:00] ## Line: 171 	 
| [ 0:00] ## Line: 172 	 aux prepare_devs 1 8
| [ 0:00] ## Line: 173 	 
| [ 0:00] ## Line: 174 	 create_pv_with_ext_vsn1_and_vg "$dev1"
| [ 0:00] ## Line: 175 	 
| [ 0:00] ## Line: 176 	 # pvs doesn't update PV header because it holds only VG read lock
| [ 0:00] ## Line: 177 	 check pv_field "$dev1" pv_ext_vsn 1
| [ 0:00] ## Line: 178 	 check pv_field "$dev1" pv_in_use "used"
| [ 0:00] ## Line: 179 	 check pv_field "$dev1" vg_name "$VG_NAME"
| [ 0:00] ## Line: 180 	 lvs "$VG_NAME"/"$LV_NAME"
| [ 0:00] ## Line: 181 	 
| [ 0:00] ## Line: 182 	 # an LVM command taking VG write lock will also cause PV header update to recent version
| [ 0:00] ## Line: 183 	 vgchange --addtag test $VG_NAME
| [ 0:00] ## Line: 184 	 check pv_field "$dev1" pv_ext_vsn 2
| [ 0:00] ## Line: 185 	 check pv_field "$dev1" pv_in_use "used"
| [ 0:00] ## Line: 186 	 check pv_field "$dev1" vg_name "$VG_NAME"
| [ 0:00] ## Line: 187 	 lvs "$VG_NAME"/"$LV_NAME"
| [ 0:00] aux teardown
| [ 0:00] #pv-ext-update.sh:1+ aux teardown
| [ 0:00] ## teardown.........ok
###       failed: [ndev-vanilla] shell/pv-ext-update.sh

| [ 0:00] Library version:   1.02.146 (2017-12-18)
| [ 0:00] Driver version:    4.35.0
| [ 0:00] Kernel is Linux localhost.localdomain 3.10.0-693.11.1.el7.x86_64 #1 SMP Mon Dec 4 23:52:40 UTC 2017 x86_64 GNU/Linux
| [ 0:00] Selinux mode is not installed.
| [ 0:00]               total        used        free      shared  buff/cache   available
| [ 0:00] Mem:           7822        1080        4144          10        2597        6435
| [ 0:00] Swap:          4095           0        4095
| [ 0:00] Filesystem      Size  Used Avail Use% Mounted on
| [ 0:00] /dev/sdc1        18G  8.4G  8.4G  50% /
| [ 0:00] /dev/sdd1        51G  6.1G   43G  13% /lfskernel
| [ 0:00] devtmpfs        3.9G     0  3.9G   0% /dev
| [ 0:00] tmpfs           3.9G     0  3.9G   0% /run
| [ 0:00] @TESTDIR=/tmp/LVMTEST16070.l8X9QO7X13
| [ 0:00] @PREFIX=LVMTEST16070
| [ 0:00] ## LVMCONF: activation {
| [ 0:00] ## LVMCONF:     checks = 1
| [ 0:00] ## LVMCONF:     monitoring = 0
| [ 0:00] ## LVMCONF:     polling_interval = 1
| [ 0:00] ## LVMCONF:     raid_region_size = 512
| [ 0:00] ## LVMCONF:     retry_deactivation = 1
| [ 0:00] ## LVMCONF:     snapshot_autoextend_percent = 50
| [ 0:00] ## LVMCONF:     snapshot_autoextend_threshold = 50
| [ 0:00] ## LVMCONF:     udev_rules = 1
| [ 0:00] ## LVMCONF:     udev_sync = 1
| [ 0:00] ## LVMCONF:     verify_udev_operations = 1
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: allocation {
| [ 0:00] ## LVMCONF:     wipe_signatures_when_zeroing_new_lvs = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: backup {
| [ 0:00] ## LVMCONF:     archive = 0
| [ 0:00] ## LVMCONF:     backup = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: devices {
| [ 0:00] ## LVMCONF:     cache_dir = "@TESTDIR@/etc"
| [ 0:00] ## LVMCONF:     default_data_alignment = 1
| [ 0:00] ## LVMCONF:     dir = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     filter = "a|.*|"
| [ 0:00] ## LVMCONF:     global_filter = [ "a|@TESTDIR@/dev/mapper/@PREFIX@.*pv[0-9_]*$|", "r|.*|" ]
| [ 0:00] ## LVMCONF:     md_component_detection  = 0
| [ 0:00] ## LVMCONF:     scan = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     sysfs_scan = 1
| [ 0:00] ## LVMCONF:     write_cache_state = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: dmeventd {
| [ 0:00] ## LVMCONF:     executable = "/sources/boot/LVM2.2.02.177/test/lib/dmeventd"
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: global {
| [ 0:00] ## LVMCONF:     abort_on_internal_errors = 1
| [ 0:00] ## LVMCONF:     cache_check_executable = "/usr/sbin/cache_check"
| [ 0:00] ## LVMCONF:     cache_dump_executable = "/usr/sbin/cache_dump"
| [ 0:00] ## LVMCONF:     cache_repair_executable = "/usr/sbin/cache_repair"
| [ 0:00] ## LVMCONF:     detect_internal_vg_cache_corruption = 1
| [ 0:00] ## LVMCONF:     fallback_to_local_locking = 0
| [ 0:00] ## LVMCONF:     fsadm_executable = "/sources/boot/LVM2.2.02.177/test/lib/fsadm"
| [ 0:00] ## LVMCONF:     library_dir = "@TESTDIR@/lib"
| [ 0:00] ## LVMCONF:     locking_dir = "@TESTDIR@/var/lock/lvm"
| [ 0:00] ## LVMCONF:     locking_type=1
| [ 0:00] ## LVMCONF:     notify_dbus = 0
| [ 0:00] ## LVMCONF:     si_unit_consistency = 1
| [ 0:00] ## LVMCONF:     thin_check_executable = "/usr/sbin/thin_check"
| [ 0:00] ## LVMCONF:     thin_dump_executable = "/usr/sbin/thin_dump"
| [ 0:00] ## LVMCONF:     thin_repair_executable = "/usr/sbin/thin_repair"
| [ 0:00] ## LVMCONF:     use_lvmetad = 0
| [ 0:00] ## LVMCONF:     use_lvmlockd = 0
| [ 0:00] ## LVMCONF:     use_lvmpolld = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: log {
| [ 0:00] ## LVMCONF:     activation = 1
| [ 0:00] ## LVMCONF:     file = "@TESTDIR@/debug.log"
| [ 0:00] ## LVMCONF:     indent = 1
| [ 0:00] ## LVMCONF:     level = 9
| [ 0:00] ## LVMCONF:     overwrite = 1
| [ 0:00] ## LVMCONF:     syslog = 0
| [ 0:00] ## LVMCONF:     verbose = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] <======== Processing test: "pv-min-size.sh" ========>
| [ 0:00] 
| [ 0:00] # use small default size  - 512KB
| [ 0:00] aux lvmconf 'devices/pv_min_size = 512'
| [ 0:00] #pv-min-size.sh:19+ aux lvmconf 'devices/pv_min_size = 512'
| [ 0:00] ## LVMCONF: activation {
| [ 0:00] ## LVMCONF:     checks = 1
| [ 0:00] ## LVMCONF:     monitoring = 0
| [ 0:00] ## LVMCONF:     polling_interval = 1
| [ 0:00] ## LVMCONF:     raid_region_size = 512
| [ 0:00] ## LVMCONF:     retry_deactivation = 1
| [ 0:00] ## LVMCONF:     snapshot_autoextend_percent = 50
| [ 0:00] ## LVMCONF:     snapshot_autoextend_threshold = 50
| [ 0:00] ## LVMCONF:     udev_rules = 1
| [ 0:00] ## LVMCONF:     udev_sync = 1
| [ 0:00] ## LVMCONF:     verify_udev_operations = 1
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: allocation {
| [ 0:00] ## LVMCONF:     wipe_signatures_when_zeroing_new_lvs = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: backup {
| [ 0:00] ## LVMCONF:     archive = 0
| [ 0:00] ## LVMCONF:     backup = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: devices {
| [ 0:00] ## LVMCONF:     cache_dir = "@TESTDIR@/etc"
| [ 0:00] ## LVMCONF:     default_data_alignment = 1
| [ 0:00] ## LVMCONF:     dir = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     filter = "a|.*|"
| [ 0:00] ## LVMCONF:     global_filter = [ "a|@TESTDIR@/dev/mapper/@PREFIX@.*pv[0-9_]*$|", "r|.*|" ]
| [ 0:00] ## LVMCONF:     md_component_detection  = 0
| [ 0:00] ## LVMCONF:     pv_min_size = 512
| [ 0:00] ## LVMCONF:     scan = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     sysfs_scan = 1
| [ 0:00] ## LVMCONF:     write_cache_state = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: dmeventd {
| [ 0:00] ## LVMCONF:     executable = "/sources/boot/LVM2.2.02.177/test/lib/dmeventd"
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: global {
| [ 0:00] ## LVMCONF:     abort_on_internal_errors = 1
| [ 0:00] ## LVMCONF:     cache_check_executable = "/usr/sbin/cache_check"
| [ 0:00] ## LVMCONF:     cache_dump_executable = "/usr/sbin/cache_dump"
| [ 0:00] ## LVMCONF:     cache_repair_executable = "/usr/sbin/cache_repair"
| [ 0:00] ## LVMCONF:     detect_internal_vg_cache_corruption = 1
| [ 0:00] ## LVMCONF:     fallback_to_local_locking = 0
| [ 0:00] ## LVMCONF:     fsadm_executable = "/sources/boot/LVM2.2.02.177/test/lib/fsadm"
| [ 0:00] ## LVMCONF:     library_dir = "@TESTDIR@/lib"
| [ 0:00] ## LVMCONF:     locking_dir = "@TESTDIR@/var/lock/lvm"
| [ 0:00] ## LVMCONF:     locking_type=1
| [ 0:00] ## LVMCONF:     notify_dbus = 0
| [ 0:00] ## LVMCONF:     si_unit_consistency = 1
| [ 0:00] ## LVMCONF:     thin_check_executable = "/usr/sbin/thin_check"
| [ 0:00] ## LVMCONF:     thin_dump_executable = "/usr/sbin/thin_dump"
| [ 0:00] ## LVMCONF:     thin_repair_executable = "/usr/sbin/thin_repair"
| [ 0:00] ## LVMCONF:     use_lvmetad = 0
| [ 0:00] ## LVMCONF:     use_lvmlockd = 0
| [ 0:00] ## LVMCONF:     use_lvmpolld = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: log {
| [ 0:00] ## LVMCONF:     activation = 1
| [ 0:00] ## LVMCONF:     file = "@TESTDIR@/debug.log"
| [ 0:00] ## LVMCONF:     indent = 1
| [ 0:00] ## LVMCONF:     level = 9
| [ 0:00] ## LVMCONF:     overwrite = 1
| [ 0:00] ## LVMCONF:     syslog = 0
| [ 0:00] ## LVMCONF:     verbose = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] 
| [ 0:00] aux prepare_pvs 1 8
| [ 0:00] #pv-min-size.sh:21+ aux prepare_pvs 1 8
| [ 0:00] ## preparing loop device....ok (/dev/loop0)
| [ 0:00] ## preparing 1 devices...lib/utils: line 212: DM_UDEV_COOKIE: unbound variable
| [ 0:00] set +vx; STACKTRACE; set -vx
| [ 0:00] ##pv-min-size.sh:21+ set +vx
| [ 0:00] ## - /lfskernel/sources/boot/LVM2.2.02.177/test/shell/pv-min-size.sh:21
| [ 0:00] ## 1 STACKTRACE() called from /lfskernel/sources/boot/LVM2.2.02.177/test/shell/pv-min-size.sh:21
| [ 0:00] <======== Info ========>
| [ 0:00] ## DMINFO:   Name             Maj Min Stat Open Targ Event  UUID                                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv1  253   3 L--w    0    1      0 TEST-@PREFIX@pv1                                                
| [ 0:00] <======== Active table ========>
| [ 0:00] ## DMTABLE:  @PREFIX@pv1: 0 16384 linear 7:0 2048
| [ 0:00] <======== Inactive table ========>
| [ 0:00] ## DMITABLE: @PREFIX@pv1: 
| [ 0:00] <======== Status ========>
| [ 0:00] ## DMSTATUS: @PREFIX@pv1: 0 16384 linear 
| [ 0:00] <======== Tree ========>
| [ 0:00] ## DMTREE:   @PREFIX@pv1 (253:3)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   LFS_vg-lfs (253:2)
| [ 0:00] ## DMTREE:    `- (8:16)
| [ 0:00] ## DMTREE:   centos-swap (253:1)
| [ 0:00] ## DMTREE:    `- (8:2)
| [ 0:00] ## DMTREE:   centos-root (253:0)
| [ 0:00] ## DMTREE:    `- (8:2)
| [ 0:00] <======== Recursive list of @TESTDIR@/dev ========>
| [ 0:00] ## LSLR:	@TESTDIR@/dev:
| [ 0:00] ## LSLR:	total 4
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 0 Feb 21 02:27 loop0
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 1 Feb 21 02:27 loop1
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 2 Feb 21 02:27 loop2
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 3 Feb 21 02:27 loop3
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 4 Feb 21 02:27 loop4
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 5 Feb 21 02:27 loop5
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 6 Feb 21 02:27 loop6
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 7 Feb 21 02:27 loop7
| [ 0:00] ## LSLR:	drwxr-xr-x 2 root root 4096 Feb 21 02:27 mapper
| [ 0:00] ## LSLR:	crw-r--r-- 1 root root 1, 3 Feb 21 02:27 testnull
| [ 0:00] ## LSLR:	
| [ 0:00] ## LSLR:	@TESTDIR@/dev/mapper:
| [ 0:00] ## LSLR:	total 0
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   3 Feb 21 02:27 @PREFIX@pv1
| [ 0:00] ## LSLR:	crw------- 1 root root  10, 236 Feb 21 02:27 control
| [ 0:00] <======== Udev DB content ========>
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-0
| [ 0:00] ## UDEV:	N: dm-0
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-0
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-0
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=0
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-1
| [ 0:00] ## UDEV:	N: dm-1
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-1
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-1
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=1
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-2
| [ 0:00] ## UDEV:	N: dm-2
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-2
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-2
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=2
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-3
| [ 0:00] ## UDEV:	N: dm-3
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-3
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-3
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=3
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/loop0
| [ 0:00] ## UDEV:	N: loop0
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/loop0
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/loop0
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=7
| [ 0:00] ## UDEV:	E: MINOR=0
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] <======== Script file "pv-min-size.sh" ========>
| [ 0:00] ## Line: 1 	 #!/usr/bin/env bash
| [ 0:00] ## Line: 2 	 
| [ 0:00] ## Line: 3 	 # Copyright (C) 2011 Red Hat, Inc. All rights reserved.
| [ 0:00] ## Line: 4 	 #
| [ 0:00] ## Line: 5 	 # This copyrighted material is made available to anyone wishing to use,
| [ 0:00] ## Line: 6 	 # modify, copy, or redistribute it subject to the terms and conditions
| [ 0:00] ## Line: 7 	 # of the GNU General Public License v.2.
| [ 0:00] ## Line: 8 	 #
| [ 0:00] ## Line: 9 	 # You should have received a copy of the GNU General Public License
| [ 0:00] ## Line: 10 	 # along with this program; if not, write to the Free Software Foundation,
| [ 0:00] ## Line: 11 	 # Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA
| [ 0:00] ## Line: 12 	 
| [ 0:00] ## Line: 13 	 SKIP_WITH_LVMLOCKD=1
| [ 0:00] ## Line: 14 	 SKIP_WITH_LVMPOLLD=1
| [ 0:00] ## Line: 15 	 
| [ 0:00] ## Line: 16 	 . lib/inittest
| [ 0:00] ## Line: 17 	 
| [ 0:00] ## Line: 18 	 # use small default size  - 512KB
| [ 0:00] ## Line: 19 	 aux lvmconf 'devices/pv_min_size = 512'
| [ 0:00] ## Line: 20 	 
| [ 0:00] ## Line: 21 	 aux prepare_pvs 1 8
| [ 0:00] ## Line: 22 	 
| [ 0:00] ## Line: 23 	 check pv_field "$dev1" pv_name "$dev1"
| [ 0:00] ## Line: 24 	 
| [ 0:00] ## Line: 25 	 # increase min size beyond created PV size 10MB
| [ 0:00] ## Line: 26 	 aux lvmconf 'devices/pv_min_size = 10240'
| [ 0:00] ## Line: 27 	 
| [ 0:00] ## Line: 28 	 # and test device is not visible
| [ 0:00] ## Line: 29 	 not check pv_field "$dev1" pv_name "$dev1"
| [ 0:00] ## Line: 30 	 
| [ 0:00] ## Line: 31 	 # set too low value errornous value
| [ 0:00] ## Line: 32 	 aux lvmconf 'devices/pv_min_size = -100'
| [ 0:00] ## Line: 33 	 
| [ 0:00] ## Line: 34 	 # check the incorrect value is printed
| [ 0:00] ## Line: 35 	 pvs "$dev1" 2>&1 | grep -- -100
| [ 0:00] aux teardown
| [ 0:00] #pv-min-size.sh:1+ aux teardown
| [ 0:00] ## teardown.........ok
###       failed: [ndev-vanilla] shell/pv-min-size.sh

| [ 0:00] Library version:   1.02.146 (2017-12-18)
| [ 0:00] Driver version:    4.35.0
| [ 0:00] Kernel is Linux localhost.localdomain 3.10.0-693.11.1.el7.x86_64 #1 SMP Mon Dec 4 23:52:40 UTC 2017 x86_64 GNU/Linux
| [ 0:00] Selinux mode is not installed.
| [ 0:00]               total        used        free      shared  buff/cache   available
| [ 0:00] Mem:           7822        1080        4144          10        2598        6435
| [ 0:00] Swap:          4095           0        4095
| [ 0:00] Filesystem      Size  Used Avail Use% Mounted on
| [ 0:00] /dev/sdc1        18G  8.4G  8.4G  50% /
| [ 0:00] /dev/sdd1        51G  6.1G   43G  13% /lfskernel
| [ 0:00] devtmpfs        3.9G     0  3.9G   0% /dev
| [ 0:00] tmpfs           3.9G     0  3.9G   0% /run
| [ 0:00] @TESTDIR=/tmp/LVMTEST16236.Lg47m1nd18
| [ 0:00] @PREFIX=LVMTEST16236
| [ 0:00] ## LVMCONF: activation {
| [ 0:00] ## LVMCONF:     checks = 1
| [ 0:00] ## LVMCONF:     monitoring = 0
| [ 0:00] ## LVMCONF:     polling_interval = 1
| [ 0:00] ## LVMCONF:     raid_region_size = 512
| [ 0:00] ## LVMCONF:     retry_deactivation = 1
| [ 0:00] ## LVMCONF:     snapshot_autoextend_percent = 50
| [ 0:00] ## LVMCONF:     snapshot_autoextend_threshold = 50
| [ 0:00] ## LVMCONF:     udev_rules = 1
| [ 0:00] ## LVMCONF:     udev_sync = 1
| [ 0:00] ## LVMCONF:     verify_udev_operations = 1
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: allocation {
| [ 0:00] ## LVMCONF:     wipe_signatures_when_zeroing_new_lvs = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: backup {
| [ 0:00] ## LVMCONF:     archive = 0
| [ 0:00] ## LVMCONF:     backup = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: devices {
| [ 0:00] ## LVMCONF:     cache_dir = "@TESTDIR@/etc"
| [ 0:00] ## LVMCONF:     default_data_alignment = 1
| [ 0:00] ## LVMCONF:     dir = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     filter = "a|.*|"
| [ 0:00] ## LVMCONF:     global_filter = [ "a|@TESTDIR@/dev/mapper/@PREFIX@.*pv[0-9_]*$|", "r|.*|" ]
| [ 0:00] ## LVMCONF:     md_component_detection  = 0
| [ 0:00] ## LVMCONF:     scan = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     sysfs_scan = 1
| [ 0:00] ## LVMCONF:     write_cache_state = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: dmeventd {
| [ 0:00] ## LVMCONF:     executable = "/sources/boot/LVM2.2.02.177/test/lib/dmeventd"
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: global {
| [ 0:00] ## LVMCONF:     abort_on_internal_errors = 1
| [ 0:00] ## LVMCONF:     cache_check_executable = "/usr/sbin/cache_check"
| [ 0:00] ## LVMCONF:     cache_dump_executable = "/usr/sbin/cache_dump"
| [ 0:00] ## LVMCONF:     cache_repair_executable = "/usr/sbin/cache_repair"
| [ 0:00] ## LVMCONF:     detect_internal_vg_cache_corruption = 1
| [ 0:00] ## LVMCONF:     fallback_to_local_locking = 0
| [ 0:00] ## LVMCONF:     fsadm_executable = "/sources/boot/LVM2.2.02.177/test/lib/fsadm"
| [ 0:00] ## LVMCONF:     library_dir = "@TESTDIR@/lib"
| [ 0:00] ## LVMCONF:     locking_dir = "@TESTDIR@/var/lock/lvm"
| [ 0:00] ## LVMCONF:     locking_type=1
| [ 0:00] ## LVMCONF:     notify_dbus = 0
| [ 0:00] ## LVMCONF:     si_unit_consistency = 1
| [ 0:00] ## LVMCONF:     thin_check_executable = "/usr/sbin/thin_check"
| [ 0:00] ## LVMCONF:     thin_dump_executable = "/usr/sbin/thin_dump"
| [ 0:00] ## LVMCONF:     thin_repair_executable = "/usr/sbin/thin_repair"
| [ 0:00] ## LVMCONF:     use_lvmetad = 0
| [ 0:00] ## LVMCONF:     use_lvmlockd = 0
| [ 0:00] ## LVMCONF:     use_lvmpolld = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: log {
| [ 0:00] ## LVMCONF:     activation = 1
| [ 0:00] ## LVMCONF:     file = "@TESTDIR@/debug.log"
| [ 0:00] ## LVMCONF:     indent = 1
| [ 0:00] ## LVMCONF:     level = 9
| [ 0:00] ## LVMCONF:     overwrite = 1
| [ 0:00] ## LVMCONF:     syslog = 0
| [ 0:00] ## LVMCONF:     verbose = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] <======== Processing test: "pv-range-overflow.sh" ========>
| [ 0:00] 
| [ 0:00] aux prepare_vg 2
| [ 0:00] #pv-range-overflow.sh:19+ aux prepare_vg 2
| [ 0:00] ## preparing loop device....ok (/dev/loop0)
| [ 0:00] ## preparing 2 devices...lib/utils: line 212: DM_UDEV_COOKIE: unbound variable
| [ 0:00] set +vx; STACKTRACE; set -vx
| [ 0:00] ##pv-range-overflow.sh:19+ set +vx
| [ 0:00] ## - /lfskernel/sources/boot/LVM2.2.02.177/test/shell/pv-range-overflow.sh:19
| [ 0:00] ## 1 STACKTRACE() called from /lfskernel/sources/boot/LVM2.2.02.177/test/shell/pv-range-overflow.sh:19
| [ 0:00] <======== Info ========>
| [ 0:00] ## DMINFO:   Name             Maj Min Stat Open Targ Event  UUID                                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv2  253   3 L--w    0    1      0 TEST-@PREFIX@pv2                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv1  253   4 L--w    0    1      0 TEST-@PREFIX@pv1                                                
| [ 0:00] <======== Active table ========>
| [ 0:00] ## DMTABLE:  @PREFIX@pv2: 0 69632 linear 7:0 71680
| [ 0:00] ## DMTABLE:  @PREFIX@pv1: 0 69632 linear 7:0 2048
| [ 0:00] <======== Inactive table ========>
| [ 0:00] ## DMITABLE: @PREFIX@pv2: 
| [ 0:00] ## DMITABLE: @PREFIX@pv1: 
| [ 0:00] <======== Status ========>
| [ 0:00] ## DMSTATUS: @PREFIX@pv2: 0 69632 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv1: 0 69632 linear 
| [ 0:00] <======== Tree ========>
| [ 0:00] ## DMTREE:   @PREFIX@pv2 (253:3)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   @PREFIX@pv1 (253:4)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   LFS_vg-lfs (253:2)
| [ 0:00] ## DMTREE:    `- (8:16)
| [ 0:00] ## DMTREE:   centos-swap (253:1)
| [ 0:00] ## DMTREE:    `- (8:2)
| [ 0:00] ## DMTREE:   centos-root (253:0)
| [ 0:00] ## DMTREE:    `- (8:2)
| [ 0:00] <======== Recursive list of @TESTDIR@/dev ========>
| [ 0:00] ## LSLR:	@TESTDIR@/dev:
| [ 0:00] ## LSLR:	total 4
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 0 Feb 21 02:27 loop0
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 1 Feb 21 02:27 loop1
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 2 Feb 21 02:27 loop2
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 3 Feb 21 02:27 loop3
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 4 Feb 21 02:27 loop4
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 5 Feb 21 02:27 loop5
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 6 Feb 21 02:27 loop6
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 7 Feb 21 02:27 loop7
| [ 0:00] ## LSLR:	drwxr-xr-x 2 root root 4096 Feb 21 02:27 mapper
| [ 0:00] ## LSLR:	crw-r--r-- 1 root root 1, 3 Feb 21 02:27 testnull
| [ 0:00] ## LSLR:	
| [ 0:00] ## LSLR:	@TESTDIR@/dev/mapper:
| [ 0:00] ## LSLR:	total 0
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   4 Feb 21 02:27 @PREFIX@pv1
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   3 Feb 21 02:27 @PREFIX@pv2
| [ 0:00] ## LSLR:	crw------- 1 root root  10, 236 Feb 21 02:27 control
| [ 0:00] <======== Udev DB content ========>
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-0
| [ 0:00] ## UDEV:	N: dm-0
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-0
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-0
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=0
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-1
| [ 0:00] ## UDEV:	N: dm-1
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-1
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-1
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=1
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-2
| [ 0:00] ## UDEV:	N: dm-2
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-2
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-2
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=2
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-3
| [ 0:00] ## UDEV:	N: dm-3
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-3
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-3
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=3
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-4
| [ 0:00] ## UDEV:	N: dm-4
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-4
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-4
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=4
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/loop0
| [ 0:00] ## UDEV:	N: loop0
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/loop0
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/loop0
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=7
| [ 0:00] ## UDEV:	E: MINOR=0
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] <======== Script file "pv-range-overflow.sh" ========>
| [ 0:00] ## Line: 1 	 #!/usr/bin/env bash
| [ 0:00] ## Line: 2 	 
| [ 0:00] ## Line: 3 	 # Copyright (C) 2008-2011 Red Hat, Inc. All rights reserved.
| [ 0:00] ## Line: 4 	 #
| [ 0:00] ## Line: 5 	 # This copyrighted material is made available to anyone wishing to use,
| [ 0:00] ## Line: 6 	 # modify, copy, or redistribute it subject to the terms and conditions
| [ 0:00] ## Line: 7 	 # of the GNU General Public License v.2.
| [ 0:00] ## Line: 8 	 #
| [ 0:00] ## Line: 9 	 # You should have received a copy of the GNU General Public License
| [ 0:00] ## Line: 10 	 # along with this program; if not, write to the Free Software Foundation,
| [ 0:00] ## Line: 11 	 # Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA
| [ 0:00] ## Line: 12 	 
| [ 0:00] ## Line: 13 	 # 'Ensure that pvmove diagnoses PE-range values 2^32 and larger.'
| [ 0:00] ## Line: 14 	 
| [ 0:00] ## Line: 15 	 SKIP_WITH_LVMLOCKD=1
| [ 0:00] ## Line: 16 	 
| [ 0:00] ## Line: 17 	 . lib/inittest
| [ 0:00] ## Line: 18 	 
| [ 0:00] ## Line: 19 	 aux prepare_vg 2
| [ 0:00] ## Line: 20 	 
| [ 0:00] ## Line: 21 	 lvcreate -L4 -n $lv $vg
| [ 0:00] ## Line: 22 	 
| [ 0:00] ## Line: 23 	 # Test for the bogus diagnostic reported in BZ 284771
| [ 0:00] ## Line: 24 	 # http://bugzilla.redhat.com/284771.
| [ 0:00] ## Line: 25 	 # 'run pvmove with an unrecognized LV name to show bad diagnostic'
| [ 0:00] ## Line: 26 	 not pvmove -v -nbogus "$dev1" "$dev2" 2> err
| [ 0:00] ## Line: 27 	 grep "Logical volume bogus not found." err
| [ 0:00] ## Line: 28 	 
| [ 0:00] ## Line: 29 	 # With lvm-2.02.28 and earlier, on a system with 64-bit "long int",
| [ 0:00] ## Line: 30 	 # the PE range parsing code would accept values up to 2^64-1, but would
| [ 0:00] ## Line: 31 	 # silently truncate them to int32_t.  I.e., $dev1:$(echo 2^32|bc) would be
| [ 0:00] ## Line: 32 	 # treated just like $dev1:0.
| [ 0:00] ## Line: 33 	 # 'run the offending pvmove command'
| [ 0:00] ## Line: 34 	 not pvmove -v -n$lv "$dev1":4294967296 "$dev2"
| [ 0:00] ## Line: 35 	 
| [ 0:00] ## Line: 36 	 vgremove -ff $vg
| [ 0:00] aux teardown
| [ 0:00] #pv-range-overflow.sh:1+ aux teardown
| [ 0:00] ## teardown.........ok
###       failed: [ndev-vanilla] shell/pv-range-overflow.sh

| [ 0:00] Library version:   1.02.146 (2017-12-18)
| [ 0:00] Driver version:    4.35.0
| [ 0:00] Kernel is Linux localhost.localdomain 3.10.0-693.11.1.el7.x86_64 #1 SMP Mon Dec 4 23:52:40 UTC 2017 x86_64 GNU/Linux
| [ 0:00] Selinux mode is not installed.
| [ 0:00]               total        used        free      shared  buff/cache   available
| [ 0:00] Mem:           7822        1080        4144          10        2598        6435
| [ 0:00] Swap:          4095           0        4095
| [ 0:00] Filesystem      Size  Used Avail Use% Mounted on
| [ 0:00] /dev/sdc1        18G  8.4G  8.4G  50% /
| [ 0:00] /dev/sdd1        51G  6.1G   43G  13% /lfskernel
| [ 0:00] devtmpfs        3.9G     0  3.9G   0% /dev
| [ 0:00] tmpfs           3.9G     0  3.9G   0% /run
| [ 0:00] @TESTDIR=/tmp/LVMTEST16414.srECZlysK6
| [ 0:00] @PREFIX=LVMTEST16414
| [ 0:00] ## LVMCONF: activation {
| [ 0:01] ## LVMCONF:     checks = 1
| [ 0:01] ## LVMCONF:     monitoring = 0
| [ 0:01] ## LVMCONF:     polling_interval = 1
| [ 0:01] ## LVMCONF:     raid_region_size = 512
| [ 0:01] ## LVMCONF:     retry_deactivation = 1
| [ 0:01] ## LVMCONF:     snapshot_autoextend_percent = 50
| [ 0:01] ## LVMCONF:     snapshot_autoextend_threshold = 50
| [ 0:01] ## LVMCONF:     udev_rules = 1
| [ 0:01] ## LVMCONF:     udev_sync = 1
| [ 0:01] ## LVMCONF:     verify_udev_operations = 1
| [ 0:01] ## LVMCONF: }
| [ 0:01] ## LVMCONF: allocation {
| [ 0:01] ## LVMCONF:     wipe_signatures_when_zeroing_new_lvs = 0
| [ 0:01] ## LVMCONF: }
| [ 0:01] ## LVMCONF: backup {
| [ 0:01] ## LVMCONF:     archive = 0
| [ 0:01] ## LVMCONF:     backup = 0
| [ 0:01] ## LVMCONF: }
| [ 0:01] ## LVMCONF: devices {
| [ 0:01] ## LVMCONF:     cache_dir = "@TESTDIR@/etc"
| [ 0:01] ## LVMCONF:     default_data_alignment = 1
| [ 0:01] ## LVMCONF:     dir = "@TESTDIR@/dev"
| [ 0:01] ## LVMCONF:     filter = "a|.*|"
| [ 0:01] ## LVMCONF:     global_filter = [ "a|@TESTDIR@/dev/mapper/@PREFIX@.*pv[0-9_]*$|", "r|.*|" ]
| [ 0:01] ## LVMCONF:     md_component_detection  = 0
| [ 0:01] ## LVMCONF:     scan = "@TESTDIR@/dev"
| [ 0:01] ## LVMCONF:     sysfs_scan = 1
| [ 0:01] ## LVMCONF:     write_cache_state = 0
| [ 0:01] ## LVMCONF: }
| [ 0:01] ## LVMCONF: dmeventd {
| [ 0:01] ## LVMCONF:     executable = "/sources/boot/LVM2.2.02.177/test/lib/dmeventd"
| [ 0:01] ## LVMCONF: }
| [ 0:01] ## LVMCONF: global {
| [ 0:01] ## LVMCONF:     abort_on_internal_errors = 1
| [ 0:01] ## LVMCONF:     cache_check_executable = "/usr/sbin/cache_check"
| [ 0:01] ## LVMCONF:     cache_dump_executable = "/usr/sbin/cache_dump"
| [ 0:01] ## LVMCONF:     cache_repair_executable = "/usr/sbin/cache_repair"
| [ 0:01] ## LVMCONF:     detect_internal_vg_cache_corruption = 1
| [ 0:01] ## LVMCONF:     fallback_to_local_locking = 0
| [ 0:01] ## LVMCONF:     fsadm_executable = "/sources/boot/LVM2.2.02.177/test/lib/fsadm"
| [ 0:01] ## LVMCONF:     library_dir = "@TESTDIR@/lib"
| [ 0:01] ## LVMCONF:     locking_dir = "@TESTDIR@/var/lock/lvm"
| [ 0:01] ## LVMCONF:     locking_type=1
| [ 0:01] ## LVMCONF:     notify_dbus = 0
| [ 0:01] ## LVMCONF:     si_unit_consistency = 1
| [ 0:01] ## LVMCONF:     thin_check_executable = "/usr/sbin/thin_check"
| [ 0:01] ## LVMCONF:     thin_dump_executable = "/usr/sbin/thin_dump"
| [ 0:01] ## LVMCONF:     thin_repair_executable = "/usr/sbin/thin_repair"
| [ 0:01] ## LVMCONF:     use_lvmetad = 0
| [ 0:01] ## LVMCONF:     use_lvmlockd = 0
| [ 0:01] ## LVMCONF:     use_lvmpolld = 0
| [ 0:01] ## LVMCONF: }
| [ 0:01] ## LVMCONF: log {
| [ 0:01] ## LVMCONF:     activation = 1
| [ 0:01] ## LVMCONF:     file = "@TESTDIR@/debug.log"
| [ 0:01] ## LVMCONF:     indent = 1
| [ 0:01] ## LVMCONF:     level = 9
| [ 0:01] ## LVMCONF:     overwrite = 1
| [ 0:01] ## LVMCONF:     syslog = 0
| [ 0:01] ## LVMCONF:     verbose = 0
| [ 0:01] ## LVMCONF: }
| [ 0:01] <======== Processing test: "pvchange-usage.sh" ========>
| [ 0:01] 
| [ 0:01] check_changed_uuid_() {
| [ 0:01] 	test "$1" != "$(get pv_field "$2" uuid)" || die "UUID has not changed!"
| [ 0:01] }
| [ 0:01] 
| [ 0:01] aux prepare_pvs 4
| [ 0:01] #pvchange-usage.sh:24+ aux prepare_pvs 4
| [ 0:01] ## preparing loop device....ok (/dev/loop0)
| [ 0:01] ## preparing 4 devices...lib/utils: line 212: DM_UDEV_COOKIE: unbound variable
| [ 0:01] set +vx; STACKTRACE; set -vx
| [ 0:01] ##pvchange-usage.sh:24+ set +vx
| [ 0:01] ## - /lfskernel/sources/boot/LVM2.2.02.177/test/shell/pvchange-usage.sh:24
| [ 0:01] ## 1 STACKTRACE() called from /lfskernel/sources/boot/LVM2.2.02.177/test/shell/pvchange-usage.sh:24
| [ 0:01] <======== Info ========>
| [ 0:01] ## DMINFO:   Name             Maj Min Stat Open Targ Event  UUID                                                                
| [ 0:01] ## DMINFO:   @PREFIX@pv3  253   4 L--w    0    1      0 TEST-@PREFIX@pv3                                                
| [ 0:01] ## DMINFO:   @PREFIX@pv2  253   3 L--w    0    1      0 TEST-@PREFIX@pv2                                                
| [ 0:01] ## DMINFO:   @PREFIX@pv1  253   6 L--w    0    1      0 TEST-@PREFIX@pv1                                                
| [ 0:01] ## DMINFO:   @PREFIX@pv4  253   5 L--w    0    1      0 TEST-@PREFIX@pv4                                                
| [ 0:01] <======== Active table ========>
| [ 0:01] ## DMTABLE:  @PREFIX@pv3: 0 69632 linear 7:0 141312
| [ 0:01] ## DMTABLE:  @PREFIX@pv2: 0 69632 linear 7:0 71680
| [ 0:01] ## DMTABLE:  @PREFIX@pv1: 0 69632 linear 7:0 2048
| [ 0:01] ## DMTABLE:  @PREFIX@pv4: 0 69632 linear 7:0 210944
| [ 0:01] <======== Inactive table ========>
| [ 0:01] ## DMITABLE: @PREFIX@pv3: 
| [ 0:01] ## DMITABLE: @PREFIX@pv2: 
| [ 0:01] ## DMITABLE: @PREFIX@pv1: 
| [ 0:01] ## DMITABLE: @PREFIX@pv4: 
| [ 0:01] <======== Status ========>
| [ 0:01] ## DMSTATUS: @PREFIX@pv3: 0 69632 linear 
| [ 0:01] ## DMSTATUS: @PREFIX@pv2: 0 69632 linear 
| [ 0:01] ## DMSTATUS: @PREFIX@pv1: 0 69632 linear 
| [ 0:01] ## DMSTATUS: @PREFIX@pv4: 0 69632 linear 
| [ 0:01] <======== Tree ========>
| [ 0:01] ## DMTREE:   @PREFIX@pv3 (253:4)
| [ 0:01] ## DMTREE:    `- (7:0)
| [ 0:01] ## DMTREE:   @PREFIX@pv2 (253:3)
| [ 0:01] ## DMTREE:    `- (7:0)
| [ 0:01] ## DMTREE:   @PREFIX@pv1 (253:6)
| [ 0:01] ## DMTREE:    `- (7:0)
| [ 0:01] ## DMTREE:   LFS_vg-lfs (253:2)
| [ 0:01] ## DMTREE:    `- (8:16)
| [ 0:01] ## DMTREE:   @PREFIX@pv4 (253:5)
| [ 0:01] ## DMTREE:    `- (7:0)
| [ 0:01] ## DMTREE:   centos-swap (253:1)
| [ 0:01] ## DMTREE:    `- (8:2)
| [ 0:01] ## DMTREE:   centos-root (253:0)
| [ 0:01] ## DMTREE:    `- (8:2)
| [ 0:01] <======== Recursive list of @TESTDIR@/dev ========>
| [ 0:01] ## LSLR:	@TESTDIR@/dev:
| [ 0:01] ## LSLR:	total 4
| [ 0:01] ## LSLR:	brw-r--r-- 1 root root 7, 0 Feb 21 02:27 loop0
| [ 0:01] ## LSLR:	brw-r--r-- 1 root root 7, 1 Feb 21 02:27 loop1
| [ 0:01] ## LSLR:	brw-r--r-- 1 root root 7, 2 Feb 21 02:27 loop2
| [ 0:01] ## LSLR:	brw-r--r-- 1 root root 7, 3 Feb 21 02:27 loop3
| [ 0:01] ## LSLR:	brw-r--r-- 1 root root 7, 4 Feb 21 02:27 loop4
| [ 0:01] ## LSLR:	brw-r--r-- 1 root root 7, 5 Feb 21 02:27 loop5
| [ 0:01] ## LSLR:	brw-r--r-- 1 root root 7, 6 Feb 21 02:27 loop6
| [ 0:01] ## LSLR:	brw-r--r-- 1 root root 7, 7 Feb 21 02:27 loop7
| [ 0:01] ## LSLR:	drwxr-xr-x 2 root root 4096 Feb 21 02:27 mapper
| [ 0:01] ## LSLR:	crw-r--r-- 1 root root 1, 3 Feb 21 02:27 testnull
| [ 0:01] ## LSLR:	
| [ 0:01] ## LSLR:	@TESTDIR@/dev/mapper:
| [ 0:01] ## LSLR:	total 0
| [ 0:01] ## LSLR:	brw------- 1 root root 253,   6 Feb 21 02:27 @PREFIX@pv1
| [ 0:01] ## LSLR:	brw------- 1 root root 253,   3 Feb 21 02:27 @PREFIX@pv2
| [ 0:01] ## LSLR:	brw------- 1 root root 253,   4 Feb 21 02:27 @PREFIX@pv3
| [ 0:01] ## LSLR:	brw------- 1 root root 253,   5 Feb 21 02:27 @PREFIX@pv4
| [ 0:01] ## LSLR:	crw------- 1 root root  10, 236 Feb 21 02:27 control
| [ 0:01] <======== Udev DB content ========>
| [ 0:01] ## UDEV:	P: /devices/virtual/block/dm-0
| [ 0:01] ## UDEV:	N: dm-0
| [ 0:01] ## UDEV:	E: DEVNAME=/dev/dm-0
| [ 0:01] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-0
| [ 0:01] ## UDEV:	E: DEVTYPE=disk
| [ 0:01] ## UDEV:	E: MAJOR=253
| [ 0:01] ## UDEV:	E: MINOR=0
| [ 0:01] ## UDEV:	E: SUBSYSTEM=block
| [ 0:01] ## UDEV:	
| [ 0:01] ## UDEV:	P: /devices/virtual/block/dm-1
| [ 0:01] ## UDEV:	N: dm-1
| [ 0:01] ## UDEV:	E: DEVNAME=/dev/dm-1
| [ 0:01] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-1
| [ 0:01] ## UDEV:	E: DEVTYPE=disk
| [ 0:01] ## UDEV:	E: MAJOR=253
| [ 0:01] ## UDEV:	E: MINOR=1
| [ 0:01] ## UDEV:	E: SUBSYSTEM=block
| [ 0:01] ## UDEV:	
| [ 0:01] ## UDEV:	P: /devices/virtual/block/dm-2
| [ 0:01] ## UDEV:	N: dm-2
| [ 0:01] ## UDEV:	E: DEVNAME=/dev/dm-2
| [ 0:01] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-2
| [ 0:01] ## UDEV:	E: DEVTYPE=disk
| [ 0:01] ## UDEV:	E: MAJOR=253
| [ 0:01] ## UDEV:	E: MINOR=2
| [ 0:01] ## UDEV:	E: SUBSYSTEM=block
| [ 0:01] ## UDEV:	
| [ 0:01] ## UDEV:	P: /devices/virtual/block/dm-3
| [ 0:01] ## UDEV:	N: dm-3
| [ 0:01] ## UDEV:	E: DEVNAME=/dev/dm-3
| [ 0:01] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-3
| [ 0:01] ## UDEV:	E: DEVTYPE=disk
| [ 0:01] ## UDEV:	E: MAJOR=253
| [ 0:01] ## UDEV:	E: MINOR=3
| [ 0:01] ## UDEV:	E: SUBSYSTEM=block
| [ 0:01] ## UDEV:	
| [ 0:01] ## UDEV:	P: /devices/virtual/block/dm-4
| [ 0:01] ## UDEV:	N: dm-4
| [ 0:01] ## UDEV:	E: DEVNAME=/dev/dm-4
| [ 0:01] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-4
| [ 0:01] ## UDEV:	E: DEVTYPE=disk
| [ 0:01] ## UDEV:	E: MAJOR=253
| [ 0:01] ## UDEV:	E: MINOR=4
| [ 0:01] ## UDEV:	E: SUBSYSTEM=block
| [ 0:01] ## UDEV:	
| [ 0:01] ## UDEV:	P: /devices/virtual/block/dm-5
| [ 0:01] ## UDEV:	N: dm-5
| [ 0:01] ## UDEV:	E: DEVNAME=/dev/dm-5
| [ 0:01] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-5
| [ 0:01] ## UDEV:	E: DEVTYPE=disk
| [ 0:01] ## UDEV:	E: MAJOR=253
| [ 0:01] ## UDEV:	E: MINOR=5
| [ 0:01] ## UDEV:	E: SUBSYSTEM=block
| [ 0:01] ## UDEV:	
| [ 0:01] ## UDEV:	P: /devices/virtual/block/dm-6
| [ 0:01] ## UDEV:	N: dm-6
| [ 0:01] ## UDEV:	E: DEVNAME=/dev/dm-6
| [ 0:01] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-6
| [ 0:01] ## UDEV:	E: DEVTYPE=disk
| [ 0:01] ## UDEV:	E: MAJOR=253
| [ 0:01] ## UDEV:	E: MINOR=6
| [ 0:01] ## UDEV:	E: SUBSYSTEM=block
| [ 0:01] ## UDEV:	
| [ 0:01] ## UDEV:	P: /devices/virtual/block/loop0
| [ 0:01] ## UDEV:	N: loop0
| [ 0:01] ## UDEV:	E: DEVNAME=/dev/loop0
| [ 0:01] ## UDEV:	E: DEVPATH=/devices/virtual/block/loop0
| [ 0:01] ## UDEV:	E: DEVTYPE=disk
| [ 0:01] ## UDEV:	E: MAJOR=7
| [ 0:01] ## UDEV:	E: MINOR=0
| [ 0:01] ## UDEV:	E: SUBSYSTEM=block
| [ 0:01] ## UDEV:	
| [ 0:01] <======== Script file "pvchange-usage.sh" ========>
| [ 0:01] ## Line: 1 	 #!/usr/bin/env bash
| [ 0:01] ## Line: 2 	 
| [ 0:01] ## Line: 3 	 # Copyright (C) 2008 Red Hat, Inc. All rights reserved.
| [ 0:01] ## Line: 4 	 #
| [ 0:01] ## Line: 5 	 # This copyrighted material is made available to anyone wishing to use,
| [ 0:01] ## Line: 6 	 # modify, copy, or redistribute it subject to the terms and conditions
| [ 0:01] ## Line: 7 	 # of the GNU General Public License v.2.
| [ 0:01] ## Line: 8 	 #
| [ 0:01] ## Line: 9 	 # You should have received a copy of the GNU General Public License
| [ 0:01] ## Line: 10 	 # along with this program; if not, write to the Free Software Foundation,
| [ 0:01] ## Line: 11 	 # Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA
| [ 0:01] ## Line: 12 	 
| [ 0:01] ## Line: 13 	 # 'Test pvchange option values'
| [ 0:01] ## Line: 14 	 
| [ 0:01] ## Line: 15 	 SKIP_WITH_LVMLOCKD=1
| [ 0:01] ## Line: 16 	 SKIP_WITH_LVMPOLLD=1
| [ 0:01] ## Line: 17 	 
| [ 0:01] ## Line: 18 	 . lib/inittest
| [ 0:01] ## Line: 19 	 
| [ 0:01] ## Line: 20 	 check_changed_uuid_() {
| [ 0:01] ## Line: 21 	 	test "$1" != "$(get pv_field "$2" uuid)" || die "UUID has not changed!"
| [ 0:01] ## Line: 22 	 }
| [ 0:01] ## Line: 23 	 
| [ 0:01] ## Line: 24 	 aux prepare_pvs 4
| [ 0:01] ## Line: 25 	 
| [ 0:01] ## Line: 26 	 # check 'allocatable' pv attribute
| [ 0:01] ## Line: 27 	 pvcreate "$dev1"
| [ 0:01] ## Line: 28 	 check pv_field "$dev1" pv_attr ---
| [ 0:01] ## Line: 29 	 vgcreate $vg1 "$dev1"
| [ 0:01] ## Line: 30 	 check pv_field "$dev1" pv_attr a--
| [ 0:01] ## Line: 31 	 pvchange --allocatable n "$dev1"
| [ 0:01] ## Line: 32 	 check pv_field "$dev1" pv_attr u--
| [ 0:01] ## Line: 33 	 vgremove -ff $vg1
| [ 0:01] ## Line: 34 	 not pvchange --allocatable y "$dev1"
| [ 0:01] ## Line: 35 	 pvremove -ff "$dev1"
| [ 0:01] ## Line: 36 	 
| [ 0:01] ## Line: 37 	 for mda in 0 1 2
| [ 0:01] ## Line: 38 	 do
| [ 0:01] ## Line: 39 	 # "setup pv with metadatacopies = $mda"
| [ 0:01] ## Line: 40 	 	pvcreate --metadatacopies $mda "$dev1"
| [ 0:01] ## Line: 41 	 # cannot change allocatability for orphan PVs
| [ 0:01] ## Line: 42 	 	fail pvchange "$dev1" -x y
| [ 0:01] ## Line: 43 	 	fail pvchange "$dev1" -x n
| [ 0:01] ## Line: 44 	 	vgcreate $vg1 "$dev4" "$dev1"
| [ 0:01] ## Line: 45 	 
| [ 0:01] ## Line: 46 	 # "pvchange adds/dels tag to pvs with metadatacopies = $mda "
| [ 0:01] ## Line: 47 	 	pvchange "$dev1" --addtag test$mda
| [ 0:01] ## Line: 48 	 	check pv_field "$dev1" pv_tags test$mda
| [ 0:01] ## Line: 49 	 	pvchange "$dev1" --deltag test$mda
| [ 0:01] ## Line: 50 	 	check pv_field "$dev1" pv_tags ""
| [ 0:01] ## Line: 51 	 
| [ 0:01] ## Line: 52 	 # "vgchange disable/enable allocation for pvs with metadatacopies = $mda (bz452982)"
| [ 0:01] ## Line: 53 	 	pvchange "$dev1" -x n
| [ 0:01] ## Line: 54 	 	pvchange "$dev1" -x n   # already disabled
| [ 0:01] ## Line: 55 	 	check pv_field "$dev1" pv_attr  u--
| [ 0:01] ## Line: 56 	 	pvchange "$dev1" -x y
| [ 0:01] ## Line: 57 	 	pvchange "$dev1" -x y   # already enabled
| [ 0:01] ## Line: 58 	 	check pv_field "$dev1" pv_attr  a--
| [ 0:01] ## Line: 59 	 
| [ 0:01] ## Line: 60 	 # check we are able to change number of managed metadata areas
| [ 0:01] ## Line: 61 	 	if test $mda -gt 0 ; then
| [ 0:01] ## Line: 62 	 		pvchange --force --metadataignore y "$dev1"
| [ 0:01] ## Line: 63 	 	else
| [ 0:01] ## Line: 64 	 		# already ignored
| [ 0:01] ## Line: 65 	 		fail pvchange --metadataignore y "$dev1"
| [ 0:01] ## Line: 66 	 	fi
| [ 0:01] ## Line: 67 	 # 'remove pv'
| [ 0:01] ## Line: 68 	 	vgremove $vg1
| [ 0:01] ## Line: 69 	 	pvremove "$dev1"
| [ 0:01] ## Line: 70 	 done
| [ 0:01] ## Line: 71 	 
| [ 0:01] ## Line: 72 	 # "pvchange uuid"
| [ 0:01] ## Line: 73 	 pvcreate --metadatacopies 0 "$dev1"
| [ 0:01] ## Line: 74 	 pvcreate --metadatacopies 2 "$dev2"
| [ 0:01] ## Line: 75 	 vgcreate $vg1 "$dev1" "$dev2"
| [ 0:01] ## Line: 76 	 
| [ 0:01] ## Line: 77 	 # Checking for different UUID after pvchange
| [ 0:01] ## Line: 78 	 UUID1=$(get pv_field "$dev1" uuid)
| [ 0:01] ## Line: 79 	 pvchange -u "$dev1"
| [ 0:01] ## Line: 80 	 check_changed_uuid_ "$UUID1" "$dev1"
| [ 0:01] ## Line: 81 	 
| [ 0:01] ## Line: 82 	 UUID2=$(get pv_field "$dev2" uuid)
| [ 0:01] ## Line: 83 	 pvchange -u "$dev2"
| [ 0:01] ## Line: 84 	 check_changed_uuid_ "$UUID2" "$dev2"
| [ 0:01] ## Line: 85 	 
| [ 0:01] ## Line: 86 	 UUID1=$(get pv_field "$dev1" uuid)
| [ 0:01] ## Line: 87 	 UUID2=$(get pv_field "$dev2" uuid)
| [ 0:01] ## Line: 88 	 pvchange -u --all
| [ 0:01] ## Line: 89 	 check_changed_uuid_ "$UUID1" "$dev1"
| [ 0:01] ## Line: 90 	 check_changed_uuid_ "$UUID2" "$dev2"
| [ 0:01] ## Line: 91 	 check pvlv_counts $vg1 2 0 0
| [ 0:01] ## Line: 92 	 
| [ 0:01] ## Line: 93 	 # some args are needed
| [ 0:01] ## Line: 94 	 invalid pvchange
| [ 0:01] ## Line: 95 	 # some PV needed
| [ 0:01] ## Line: 96 	 invalid pvchange --addtag tag
| [ 0:01] ## Line: 97 	 invalid pvchange --deltag tag
| [ 0:01] ## Line: 98 	 # some --all & PV can go together
| [ 0:01] ## Line: 99 	 invalid pvchange -a "$dev1" --addtag tag
| [ 0:01] ## Line: 100 	 # '-a' needs more params
| [ 0:01] ## Line: 101 	 invalid pvchange -a
| [ 0:01] ## Line: 102 	 # '-a' is searching for devs, so specifying device is invalid
| [ 0:01] ## Line: 103 	 invalid pvchange -a "$dev1"
| [ 0:01] ## Line: 104 	 fail pvchange -u "$dev1-notfound"
| [ 0:01] ## Line: 105 	 
| [ 0:01] ## Line: 106 	 # pvchange rejects uuid change under an active lv
| [ 0:01] ## Line: 107 	 lvcreate -l 16 -i 2 -n $lv --alloc anywhere $vg1
| [ 0:01] ## Line: 108 	 check pvlv_counts $vg1 2 1 0
| [ 0:01] ## Line: 109 	 not pvchange -u "$dev1"
| [ 0:01] ## Line: 110 	 
| [ 0:01] ## Line: 111 	 vgremove -f $vg1
| [ 0:01] ## Line: 112 	 
| [ 0:01] ## Line: 113 	 # cannot change PV tag to PV that is not in VG"
| [ 0:01] ## Line: 114 	 fail pvchange "$dev1" --addtag test
| [ 0:01] ## Line: 115 	 fail pvchange "$dev1" --deltag test
| [ 0:01] ## Line: 116 	 
| [ 0:01] ## Line: 117 	 if test -n "$LVM_TEST_LVM1" ; then
| [ 0:01] ## Line: 118 	 # cannot add PV tag to lvm1 format
| [ 0:01] ## Line: 119 	 pvcreate -M1 "$dev1"
| [ 0:01] ## Line: 120 	 vgcreate -M1 $vg1 "$dev1"
| [ 0:01] ## Line: 121 	 fail pvchange "$dev1" --addtag test
| [ 0:01] ## Line: 122 	 fi
| [ 0:01] ## Line: 123 	 
| [ 0:01] aux teardown
| [ 0:01] #pvchange-usage.sh:1+ aux teardown
| [ 0:01] ## teardown.........ok
###       failed: [ndev-vanilla] shell/pvchange-usage.sh

| [ 0:00] Library version:   1.02.146 (2017-12-18)
| [ 0:00] Driver version:    4.35.0
| [ 0:00] Kernel is Linux localhost.localdomain 3.10.0-693.11.1.el7.x86_64 #1 SMP Mon Dec 4 23:52:40 UTC 2017 x86_64 GNU/Linux
| [ 0:00] Selinux mode is not installed.
| [ 0:00]               total        used        free      shared  buff/cache   available
| [ 0:00] Mem:           7822        1080        4144          10        2598        6435
| [ 0:00] Swap:          4095           0        4095
| [ 0:00] Filesystem      Size  Used Avail Use% Mounted on
| [ 0:00] /dev/sdc1        18G  8.4G  8.4G  50% /
| [ 0:00] /dev/sdd1        51G  6.1G   43G  13% /lfskernel
| [ 0:00] devtmpfs        3.9G     0  3.9G   0% /dev
| [ 0:00] tmpfs           3.9G     0  3.9G   0% /run
| [ 0:00] @TESTDIR=/tmp/LVMTEST16606.tPWAt2qAlT
| [ 0:00] @PREFIX=LVMTEST16606
| [ 0:00] ## LVMCONF: activation {
| [ 0:00] ## LVMCONF:     checks = 1
| [ 0:00] ## LVMCONF:     monitoring = 0
| [ 0:00] ## LVMCONF:     polling_interval = 1
| [ 0:00] ## LVMCONF:     raid_region_size = 512
| [ 0:00] ## LVMCONF:     retry_deactivation = 1
| [ 0:00] ## LVMCONF:     snapshot_autoextend_percent = 50
| [ 0:00] ## LVMCONF:     snapshot_autoextend_threshold = 50
| [ 0:00] ## LVMCONF:     udev_rules = 1
| [ 0:00] ## LVMCONF:     udev_sync = 1
| [ 0:00] ## LVMCONF:     verify_udev_operations = 1
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: allocation {
| [ 0:00] ## LVMCONF:     wipe_signatures_when_zeroing_new_lvs = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: backup {
| [ 0:00] ## LVMCONF:     archive = 0
| [ 0:00] ## LVMCONF:     backup = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: devices {
| [ 0:00] ## LVMCONF:     cache_dir = "@TESTDIR@/etc"
| [ 0:00] ## LVMCONF:     default_data_alignment = 1
| [ 0:00] ## LVMCONF:     dir = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     filter = "a|.*|"
| [ 0:00] ## LVMCONF:     global_filter = [ "a|@TESTDIR@/dev/mapper/@PREFIX@.*pv[0-9_]*$|", "r|.*|" ]
| [ 0:00] ## LVMCONF:     md_component_detection  = 0
| [ 0:00] ## LVMCONF:     scan = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     sysfs_scan = 1
| [ 0:00] ## LVMCONF:     write_cache_state = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: dmeventd {
| [ 0:00] ## LVMCONF:     executable = "/sources/boot/LVM2.2.02.177/test/lib/dmeventd"
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: global {
| [ 0:00] ## LVMCONF:     abort_on_internal_errors = 1
| [ 0:00] ## LVMCONF:     cache_check_executable = "/usr/sbin/cache_check"
| [ 0:00] ## LVMCONF:     cache_dump_executable = "/usr/sbin/cache_dump"
| [ 0:00] ## LVMCONF:     cache_repair_executable = "/usr/sbin/cache_repair"
| [ 0:00] ## LVMCONF:     detect_internal_vg_cache_corruption = 1
| [ 0:00] ## LVMCONF:     fallback_to_local_locking = 0
| [ 0:00] ## LVMCONF:     fsadm_executable = "/sources/boot/LVM2.2.02.177/test/lib/fsadm"
| [ 0:00] ## LVMCONF:     library_dir = "@TESTDIR@/lib"
| [ 0:00] ## LVMCONF:     locking_dir = "@TESTDIR@/var/lock/lvm"
| [ 0:00] ## LVMCONF:     locking_type=1
| [ 0:00] ## LVMCONF:     notify_dbus = 0
| [ 0:00] ## LVMCONF:     si_unit_consistency = 1
| [ 0:00] ## LVMCONF:     thin_check_executable = "/usr/sbin/thin_check"
| [ 0:00] ## LVMCONF:     thin_dump_executable = "/usr/sbin/thin_dump"
| [ 0:00] ## LVMCONF:     thin_repair_executable = "/usr/sbin/thin_repair"
| [ 0:00] ## LVMCONF:     use_lvmetad = 0
| [ 0:00] ## LVMCONF:     use_lvmlockd = 0
| [ 0:00] ## LVMCONF:     use_lvmpolld = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: log {
| [ 0:00] ## LVMCONF:     activation = 1
| [ 0:00] ## LVMCONF:     file = "@TESTDIR@/debug.log"
| [ 0:00] ## LVMCONF:     indent = 1
| [ 0:00] ## LVMCONF:     level = 9
| [ 0:00] ## LVMCONF:     overwrite = 1
| [ 0:00] ## LVMCONF:     syslog = 0
| [ 0:00] ## LVMCONF:     verbose = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] <======== Processing test: "pvcreate-bootloaderarea.sh" ========>
| [ 0:00] 
| [ 0:00] aux prepare_devs 1
| [ 0:00] #pvcreate-bootloaderarea.sh:19+ aux prepare_devs 1
| [ 0:00] ## preparing loop device....ok (/dev/loop0)
| [ 0:00] ## preparing 1 devices...lib/utils: line 212: DM_UDEV_COOKIE: unbound variable
| [ 0:00] set +vx; STACKTRACE; set -vx
| [ 0:00] ##pvcreate-bootloaderarea.sh:19+ set +vx
| [ 0:00] ## - /lfskernel/sources/boot/LVM2.2.02.177/test/shell/pvcreate-bootloaderarea.sh:19
| [ 0:00] ## 1 STACKTRACE() called from /lfskernel/sources/boot/LVM2.2.02.177/test/shell/pvcreate-bootloaderarea.sh:19
| [ 0:00] <======== Info ========>
| [ 0:00] ## DMINFO:   Name             Maj Min Stat Open Targ Event  UUID                                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv1  253   3 L--w    0    1      0 TEST-@PREFIX@pv1                                                
| [ 0:00] <======== Active table ========>
| [ 0:00] ## DMTABLE:  @PREFIX@pv1: 0 69632 linear 7:0 2048
| [ 0:00] <======== Inactive table ========>
| [ 0:00] ## DMITABLE: @PREFIX@pv1: 
| [ 0:00] <======== Status ========>
| [ 0:00] ## DMSTATUS: @PREFIX@pv1: 0 69632 linear 
| [ 0:00] <======== Tree ========>
| [ 0:00] ## DMTREE:   @PREFIX@pv1 (253:3)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   LFS_vg-lfs (253:2)
| [ 0:00] ## DMTREE:    `- (8:16)
| [ 0:00] ## DMTREE:   centos-swap (253:1)
| [ 0:00] ## DMTREE:    `- (8:2)
| [ 0:00] ## DMTREE:   centos-root (253:0)
| [ 0:00] ## DMTREE:    `- (8:2)
| [ 0:00] <======== Recursive list of @TESTDIR@/dev ========>
| [ 0:00] ## LSLR:	@TESTDIR@/dev:
| [ 0:00] ## LSLR:	total 4
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 0 Feb 21 02:27 loop0
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 1 Feb 21 02:27 loop1
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 2 Feb 21 02:27 loop2
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 3 Feb 21 02:27 loop3
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 4 Feb 21 02:27 loop4
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 5 Feb 21 02:27 loop5
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 6 Feb 21 02:27 loop6
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 7 Feb 21 02:27 loop7
| [ 0:00] ## LSLR:	drwxr-xr-x 2 root root 4096 Feb 21 02:27 mapper
| [ 0:00] ## LSLR:	crw-r--r-- 1 root root 1, 3 Feb 21 02:27 testnull
| [ 0:00] ## LSLR:	
| [ 0:00] ## LSLR:	@TESTDIR@/dev/mapper:
| [ 0:00] ## LSLR:	total 0
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   3 Feb 21 02:27 @PREFIX@pv1
| [ 0:00] ## LSLR:	crw------- 1 root root  10, 236 Feb 21 02:27 control
| [ 0:00] <======== Udev DB content ========>
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-0
| [ 0:00] ## UDEV:	N: dm-0
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-0
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-0
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=0
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-1
| [ 0:00] ## UDEV:	N: dm-1
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-1
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-1
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=1
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-2
| [ 0:00] ## UDEV:	N: dm-2
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-2
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-2
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=2
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-3
| [ 0:00] ## UDEV:	N: dm-3
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-3
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-3
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=3
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/loop0
| [ 0:00] ## UDEV:	N: loop0
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/loop0
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/loop0
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=7
| [ 0:00] ## UDEV:	E: MINOR=0
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] <======== Script file "pvcreate-bootloaderarea.sh" ========>
| [ 0:00] ## Line: 1 	 #!/usr/bin/env bash
| [ 0:00] ## Line: 2 	 
| [ 0:00] ## Line: 3 	 # Copyright (C) 2014 Red Hat, Inc. All rights reserved.
| [ 0:00] ## Line: 4 	 #
| [ 0:00] ## Line: 5 	 # This copyrighted material is made available to anyone wishing to use,
| [ 0:00] ## Line: 6 	 # modify, copy, or redistribute it subject to the terms and conditions
| [ 0:00] ## Line: 7 	 # of the GNU General Public License v.2.
| [ 0:00] ## Line: 8 	 #
| [ 0:00] ## Line: 9 	 # You should have received a copy of the GNU General Public License
| [ 0:00] ## Line: 10 	 # along with this program; if not, write to the Free Software Foundation,
| [ 0:00] ## Line: 11 	 # Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA
| [ 0:00] ## Line: 12 	 
| [ 0:00] ## Line: 13 	 test_description='Test pvcreate bootloader area support'
| [ 0:00] ## Line: 14 	 SKIP_WITH_LVMLOCKD=1
| [ 0:00] ## Line: 15 	 SKIP_WITH_LVMPOLLD=1
| [ 0:00] ## Line: 16 	 
| [ 0:00] ## Line: 17 	 . lib/inittest
| [ 0:00] ## Line: 18 	 
| [ 0:00] ## Line: 19 	 aux prepare_devs 1
| [ 0:00] ## Line: 20 	 aux lvmconf 'global/suffix=0' 'global/units="b"'
| [ 0:00] ## Line: 21 	 
| [ 0:00] ## Line: 22 	 #COMM 'pvcreate sets/aligns bootloader area correctly'
| [ 0:00] ## Line: 23 	 pvcreate --dataalignment 262144b --bootloaderareasize 614400b "$dev1"
| [ 0:00] ## Line: 24 	 # ba_start must be aligned based on dataalignment
| [ 0:00] ## Line: 25 	 # pe_start starts at next dataalignment multiple
| [ 0:00] ## Line: 26 	 # ba_size is the whole space in between ba_start and pe_start
| [ 0:00] ## Line: 27 	 check pv_field "$dev1" ba_start "262144"
| [ 0:00] ## Line: 28 	 check pv_field "$dev1" ba_size "786432"
| [ 0:00] ## Line: 29 	 check pv_field "$dev1" pe_start "1048576"
| [ 0:00] ## Line: 30 	 
| [ 0:00] ## Line: 31 	 #COMM 'pvcreate with booloader area size - test corner cases'
| [ 0:00] ## Line: 32 	 dev_size=$(pvs -o pv_size --noheadings "$dev1")
| [ 0:00] ## Line: 33 	 pv_size=$(( dev_size - 1048576 )) # device size - 1m pe_start = area for data
| [ 0:00] ## Line: 34 	 
| [ 0:00] ## Line: 35 	 # try to use the whole data area for bootloader area, remaining data area is zero then (pe_start = pv_size)
| [ 0:00] ## Line: 36 	 pvcreate --bootloaderareasize ${pv_size}b --dataalignment 1048576b "$dev1"
| [ 0:00] ## Line: 37 	 check pv_field "$dev1" pe_start $dev_size
| [ 0:00] ## Line: 38 	 check pv_field "$dev1" ba_start 1048576
| [ 0:00] ## Line: 39 	 check pv_field "$dev1" ba_size $pv_size
| [ 0:00] ## Line: 40 	 
| [ 0:00] ## Line: 41 	 # try to use the whole data area for bootloader area only and add one more byte - this must error out
| [ 0:00] ## Line: 42 	 not pvcreate --bootloaderareasize $(( pv_size + 1 )) --dataalignment 1048576b "$dev1" 2>err
| [ 0:00] ## Line: 43 	 grep "Bootloader area with data-aligned start must not exceed device size" err
| [ 0:00] ## Line: 44 	 
| [ 0:00] ## Line: 45 	 # restoring the PV should also restore the bootloader area correctly
| [ 0:00] ## Line: 46 	 pvremove -ff "$dev1"
| [ 0:00] ## Line: 47 	 pvcreate --dataalignment 256k --bootloaderareasize 600k "$dev1"
| [ 0:00] ## Line: 48 	 vgcreate $vg "$dev1"
| [ 0:00] ## Line: 49 	 vgcfgbackup -f "$TESTDIR/vg_with_ba_backup" "$vg"
| [ 0:00] ## Line: 50 	 pv_uuid=$(get pv_field "$dev1" pv_uuid)
| [ 0:00] ## Line: 51 	 vgremove -ff $vg
| [ 0:00] ## Line: 52 	 pvremove -ff "$dev1"
| [ 0:00] ## Line: 53 	 pvcreate --dataalignment 256k --restorefile "$TESTDIR/vg_with_ba_backup" --uuid "$pv_uuid" "$dev1"
| [ 0:00] ## Line: 54 	 check pv_field "$dev1" ba_start "262144"
| [ 0:00] ## Line: 55 	 check pv_field "$dev1" ba_size "786432"
| [ 0:00] ## Line: 56 	 check pv_field "$dev1" pe_start "1048576"
| [ 0:00] ## Line: 57 	 
| [ 0:00] ## Line: 58 	 pvremove -ff "$dev1"
| [ 0:00] aux teardown
| [ 0:00] #pvcreate-bootloaderarea.sh:1+ aux teardown
| [ 0:00] ## teardown.........ok
###       failed: [ndev-vanilla] shell/pvcreate-bootloaderarea.sh

| [ 0:00] Library version:   1.02.146 (2017-12-18)
| [ 0:00] Driver version:    4.35.0
| [ 0:00] Kernel is Linux localhost.localdomain 3.10.0-693.11.1.el7.x86_64 #1 SMP Mon Dec 4 23:52:40 UTC 2017 x86_64 GNU/Linux
| [ 0:00] Selinux mode is not installed.
| [ 0:00]               total        used        free      shared  buff/cache   available
| [ 0:00] Mem:           7822        1080        4144          10        2598        6435
| [ 0:00] Swap:          4095           0        4095
| [ 0:00] Filesystem      Size  Used Avail Use% Mounted on
| [ 0:00] /dev/sdc1        18G  8.4G  8.4G  50% /
| [ 0:00] /dev/sdd1        51G  6.1G   43G  13% /lfskernel
| [ 0:00] devtmpfs        3.9G     0  3.9G   0% /dev
| [ 0:00] tmpfs           3.9G     0  3.9G   0% /run
| [ 0:00] @TESTDIR=/tmp/LVMTEST16763.XYmzLSqNxZ
| [ 0:00] @PREFIX=LVMTEST16763
| [ 0:00] ## LVMCONF: activation {
| [ 0:00] ## LVMCONF:     checks = 1
| [ 0:00] ## LVMCONF:     monitoring = 0
| [ 0:00] ## LVMCONF:     polling_interval = 1
| [ 0:00] ## LVMCONF:     raid_region_size = 512
| [ 0:00] ## LVMCONF:     retry_deactivation = 1
| [ 0:00] ## LVMCONF:     snapshot_autoextend_percent = 50
| [ 0:00] ## LVMCONF:     snapshot_autoextend_threshold = 50
| [ 0:00] ## LVMCONF:     udev_rules = 1
| [ 0:00] ## LVMCONF:     udev_sync = 1
| [ 0:00] ## LVMCONF:     verify_udev_operations = 1
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: allocation {
| [ 0:00] ## LVMCONF:     wipe_signatures_when_zeroing_new_lvs = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: backup {
| [ 0:00] ## LVMCONF:     archive = 0
| [ 0:00] ## LVMCONF:     backup = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: devices {
| [ 0:00] ## LVMCONF:     cache_dir = "@TESTDIR@/etc"
| [ 0:00] ## LVMCONF:     default_data_alignment = 1
| [ 0:00] ## LVMCONF:     dir = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     filter = "a|.*|"
| [ 0:00] ## LVMCONF:     global_filter = [ "a|@TESTDIR@/dev/mapper/@PREFIX@.*pv[0-9_]*$|", "r|.*|" ]
| [ 0:00] ## LVMCONF:     md_component_detection  = 0
| [ 0:00] ## LVMCONF:     scan = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     sysfs_scan = 1
| [ 0:00] ## LVMCONF:     write_cache_state = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: dmeventd {
| [ 0:00] ## LVMCONF:     executable = "/sources/boot/LVM2.2.02.177/test/lib/dmeventd"
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: global {
| [ 0:00] ## LVMCONF:     abort_on_internal_errors = 1
| [ 0:00] ## LVMCONF:     cache_check_executable = "/usr/sbin/cache_check"
| [ 0:00] ## LVMCONF:     cache_dump_executable = "/usr/sbin/cache_dump"
| [ 0:00] ## LVMCONF:     cache_repair_executable = "/usr/sbin/cache_repair"
| [ 0:00] ## LVMCONF:     detect_internal_vg_cache_corruption = 1
| [ 0:00] ## LVMCONF:     fallback_to_local_locking = 0
| [ 0:00] ## LVMCONF:     fsadm_executable = "/sources/boot/LVM2.2.02.177/test/lib/fsadm"
| [ 0:00] ## LVMCONF:     library_dir = "@TESTDIR@/lib"
| [ 0:00] ## LVMCONF:     locking_dir = "@TESTDIR@/var/lock/lvm"
| [ 0:00] ## LVMCONF:     locking_type=1
| [ 0:00] ## LVMCONF:     notify_dbus = 0
| [ 0:00] ## LVMCONF:     si_unit_consistency = 1
| [ 0:00] ## LVMCONF:     thin_check_executable = "/usr/sbin/thin_check"
| [ 0:00] ## LVMCONF:     thin_dump_executable = "/usr/sbin/thin_dump"
| [ 0:00] ## LVMCONF:     thin_repair_executable = "/usr/sbin/thin_repair"
| [ 0:00] ## LVMCONF:     use_lvmetad = 0
| [ 0:00] ## LVMCONF:     use_lvmlockd = 0
| [ 0:00] ## LVMCONF:     use_lvmpolld = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: log {
| [ 0:00] ## LVMCONF:     activation = 1
| [ 0:00] ## LVMCONF:     file = "@TESTDIR@/debug.log"
| [ 0:00] ## LVMCONF:     indent = 1
| [ 0:00] ## LVMCONF:     level = 9
| [ 0:00] ## LVMCONF:     overwrite = 1
| [ 0:00] ## LVMCONF:     syslog = 0
| [ 0:00] ## LVMCONF:     verbose = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] <======== Processing test: "pvcreate-ff.sh" ========>
| [ 0:00] 
| [ 0:00] aux prepare_devs 2
| [ 0:00] #pvcreate-ff.sh:18+ aux prepare_devs 2
| [ 0:00] ## preparing loop device....ok (/dev/loop0)
| [ 0:00] ## preparing 2 devices...lib/utils: line 212: DM_UDEV_COOKIE: unbound variable
| [ 0:00] set +vx; STACKTRACE; set -vx
| [ 0:00] ##pvcreate-ff.sh:18+ set +vx
| [ 0:00] ## - /lfskernel/sources/boot/LVM2.2.02.177/test/shell/pvcreate-ff.sh:18
| [ 0:00] ## 1 STACKTRACE() called from /lfskernel/sources/boot/LVM2.2.02.177/test/shell/pvcreate-ff.sh:18
| [ 0:00] <======== Info ========>
| [ 0:00] ## DMINFO:   Name             Maj Min Stat Open Targ Event  UUID                                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv2  253   4 L--w    0    1      0 TEST-@PREFIX@pv2                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv1  253   3 L--w    0    1      0 TEST-@PREFIX@pv1                                                
| [ 0:00] <======== Active table ========>
| [ 0:00] ## DMTABLE:  @PREFIX@pv2: 0 69632 linear 7:0 71680
| [ 0:00] ## DMTABLE:  @PREFIX@pv1: 0 69632 linear 7:0 2048
| [ 0:00] <======== Inactive table ========>
| [ 0:00] ## DMITABLE: @PREFIX@pv2: 
| [ 0:00] ## DMITABLE: @PREFIX@pv1: 
| [ 0:00] <======== Status ========>
| [ 0:00] ## DMSTATUS: @PREFIX@pv2: 0 69632 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv1: 0 69632 linear 
| [ 0:00] <======== Tree ========>
| [ 0:00] ## DMTREE:   @PREFIX@pv2 (253:4)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   @PREFIX@pv1 (253:3)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   LFS_vg-lfs (253:2)
| [ 0:00] ## DMTREE:    `- (8:16)
| [ 0:00] ## DMTREE:   centos-swap (253:1)
| [ 0:00] ## DMTREE:    `- (8:2)
| [ 0:00] ## DMTREE:   centos-root (253:0)
| [ 0:00] ## DMTREE:    `- (8:2)
| [ 0:00] <======== Recursive list of @TESTDIR@/dev ========>
| [ 0:00] ## LSLR:	@TESTDIR@/dev:
| [ 0:00] ## LSLR:	total 4
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 0 Feb 21 02:27 loop0
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 1 Feb 21 02:27 loop1
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 2 Feb 21 02:27 loop2
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 3 Feb 21 02:27 loop3
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 4 Feb 21 02:27 loop4
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 5 Feb 21 02:27 loop5
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 6 Feb 21 02:27 loop6
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 7 Feb 21 02:27 loop7
| [ 0:00] ## LSLR:	drwxr-xr-x 2 root root 4096 Feb 21 02:27 mapper
| [ 0:00] ## LSLR:	crw-r--r-- 1 root root 1, 3 Feb 21 02:27 testnull
| [ 0:00] ## LSLR:	
| [ 0:00] ## LSLR:	@TESTDIR@/dev/mapper:
| [ 0:00] ## LSLR:	total 0
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   3 Feb 21 02:27 @PREFIX@pv1
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   4 Feb 21 02:27 @PREFIX@pv2
| [ 0:00] ## LSLR:	crw------- 1 root root  10, 236 Feb 21 02:27 control
| [ 0:00] <======== Udev DB content ========>
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-0
| [ 0:00] ## UDEV:	N: dm-0
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-0
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-0
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=0
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-1
| [ 0:00] ## UDEV:	N: dm-1
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-1
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-1
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=1
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-2
| [ 0:00] ## UDEV:	N: dm-2
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-2
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-2
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=2
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-3
| [ 0:00] ## UDEV:	N: dm-3
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-3
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-3
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=3
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-4
| [ 0:00] ## UDEV:	N: dm-4
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-4
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-4
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=4
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/loop0
| [ 0:00] ## UDEV:	N: loop0
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/loop0
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/loop0
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=7
| [ 0:00] ## UDEV:	E: MINOR=0
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] <======== Script file "pvcreate-ff.sh" ========>
| [ 0:00] ## Line: 1 	 #!/usr/bin/env bash
| [ 0:00] ## Line: 2 	 
| [ 0:00] ## Line: 3 	 # Copyright (C) 2014 Red Hat, Inc. All rights reserved.
| [ 0:00] ## Line: 4 	 #
| [ 0:00] ## Line: 5 	 # This copyrighted material is made available to anyone wishing to use,
| [ 0:00] ## Line: 6 	 # modify, copy, or redistribute it subject to the terms and conditions
| [ 0:00] ## Line: 7 	 # of the GNU General Public License v.2.
| [ 0:00] ## Line: 8 	 #
| [ 0:00] ## Line: 9 	 # You should have received a copy of the GNU General Public License
| [ 0:00] ## Line: 10 	 # along with this program; if not, write to the Free Software Foundation,
| [ 0:00] ## Line: 11 	 # Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA
| [ 0:00] ## Line: 12 	 
| [ 0:00] ## Line: 13 	 SKIP_WITH_LVMLOCKD=1
| [ 0:00] ## Line: 14 	 SKIP_WITH_LVMPOLLD=1
| [ 0:00] ## Line: 15 	 
| [ 0:00] ## Line: 16 	 . lib/inittest
| [ 0:00] ## Line: 17 	 
| [ 0:00] ## Line: 18 	 aux prepare_devs 2
| [ 0:00] ## Line: 19 	 pvcreate "$dev1"
| [ 0:00] ## Line: 20 	 vgcreate foo "$dev1"
| [ 0:00] ## Line: 21 	 pvcreate -ff -y "$dev1"
| [ 0:00] ## Line: 22 	 vgs
| [ 0:00] ## Line: 23 	 vgcreate foo "$dev1"
| [ 0:00] aux teardown
| [ 0:00] #pvcreate-ff.sh:1+ aux teardown
| [ 0:00] ## teardown.........ok
###       failed: [ndev-vanilla] shell/pvcreate-ff.sh

| [ 0:00] Library version:   1.02.146 (2017-12-18)
| [ 0:00] Driver version:    4.35.0
| [ 0:00] Kernel is Linux localhost.localdomain 3.10.0-693.11.1.el7.x86_64 #1 SMP Mon Dec 4 23:52:40 UTC 2017 x86_64 GNU/Linux
| [ 0:00] Selinux mode is not installed.
| [ 0:00]               total        used        free      shared  buff/cache   available
| [ 0:00] Mem:           7822        1080        4144          10        2598        6435
| [ 0:00] Swap:          4095           0        4095
| [ 0:00] Filesystem      Size  Used Avail Use% Mounted on
| [ 0:00] /dev/sdc1        18G  8.4G  8.4G  50% /
| [ 0:00] /dev/sdd1        51G  6.1G   43G  13% /lfskernel
| [ 0:00] devtmpfs        3.9G     0  3.9G   0% /dev
| [ 0:00] tmpfs           3.9G     0  3.9G   0% /run
| [ 0:00] @TESTDIR=/tmp/LVMTEST16931.EkXrFKhyaY
| [ 0:00] @PREFIX=LVMTEST16931
| [ 0:00] ## LVMCONF: activation {
| [ 0:00] ## LVMCONF:     checks = 1
| [ 0:00] ## LVMCONF:     monitoring = 0
| [ 0:00] ## LVMCONF:     polling_interval = 1
| [ 0:00] ## LVMCONF:     raid_region_size = 512
| [ 0:00] ## LVMCONF:     retry_deactivation = 1
| [ 0:00] ## LVMCONF:     snapshot_autoextend_percent = 50
| [ 0:00] ## LVMCONF:     snapshot_autoextend_threshold = 50
| [ 0:00] ## LVMCONF:     udev_rules = 1
| [ 0:00] ## LVMCONF:     udev_sync = 1
| [ 0:00] ## LVMCONF:     verify_udev_operations = 1
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: allocation {
| [ 0:00] ## LVMCONF:     wipe_signatures_when_zeroing_new_lvs = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: backup {
| [ 0:00] ## LVMCONF:     archive = 0
| [ 0:00] ## LVMCONF:     backup = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: devices {
| [ 0:00] ## LVMCONF:     cache_dir = "@TESTDIR@/etc"
| [ 0:00] ## LVMCONF:     default_data_alignment = 1
| [ 0:00] ## LVMCONF:     dir = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     filter = "a|.*|"
| [ 0:00] ## LVMCONF:     global_filter = [ "a|@TESTDIR@/dev/mapper/@PREFIX@.*pv[0-9_]*$|", "r|.*|" ]
| [ 0:00] ## LVMCONF:     md_component_detection  = 0
| [ 0:00] ## LVMCONF:     scan = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     sysfs_scan = 1
| [ 0:00] ## LVMCONF:     write_cache_state = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: dmeventd {
| [ 0:00] ## LVMCONF:     executable = "/sources/boot/LVM2.2.02.177/test/lib/dmeventd"
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: global {
| [ 0:00] ## LVMCONF:     abort_on_internal_errors = 1
| [ 0:00] ## LVMCONF:     cache_check_executable = "/usr/sbin/cache_check"
| [ 0:00] ## LVMCONF:     cache_dump_executable = "/usr/sbin/cache_dump"
| [ 0:00] ## LVMCONF:     cache_repair_executable = "/usr/sbin/cache_repair"
| [ 0:00] ## LVMCONF:     detect_internal_vg_cache_corruption = 1
| [ 0:00] ## LVMCONF:     fallback_to_local_locking = 0
| [ 0:00] ## LVMCONF:     fsadm_executable = "/sources/boot/LVM2.2.02.177/test/lib/fsadm"
| [ 0:00] ## LVMCONF:     library_dir = "@TESTDIR@/lib"
| [ 0:00] ## LVMCONF:     locking_dir = "@TESTDIR@/var/lock/lvm"
| [ 0:00] ## LVMCONF:     locking_type=1
| [ 0:00] ## LVMCONF:     notify_dbus = 0
| [ 0:00] ## LVMCONF:     si_unit_consistency = 1
| [ 0:00] ## LVMCONF:     thin_check_executable = "/usr/sbin/thin_check"
| [ 0:00] ## LVMCONF:     thin_dump_executable = "/usr/sbin/thin_dump"
| [ 0:00] ## LVMCONF:     thin_repair_executable = "/usr/sbin/thin_repair"
| [ 0:00] ## LVMCONF:     use_lvmetad = 0
| [ 0:00] ## LVMCONF:     use_lvmlockd = 0
| [ 0:00] ## LVMCONF:     use_lvmpolld = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: log {
| [ 0:00] ## LVMCONF:     activation = 1
| [ 0:00] ## LVMCONF:     file = "@TESTDIR@/debug.log"
| [ 0:00] ## LVMCONF:     indent = 1
| [ 0:00] ## LVMCONF:     level = 9
| [ 0:00] ## LVMCONF:     overwrite = 1
| [ 0:00] ## LVMCONF:     syslog = 0
| [ 0:00] ## LVMCONF:     verbose = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] <======== Processing test: "pvcreate-metadata0.sh" ========>
| [ 0:00] 
| [ 0:00] aux prepare_devs 2 128
| [ 0:00] #pvcreate-metadata0.sh:24+ aux prepare_devs 2 128
| [ 0:00] ## preparing loop device....ok (/dev/loop0)
| [ 0:00] ## preparing 2 devices...lib/utils: line 212: DM_UDEV_COOKIE: unbound variable
| [ 0:00] set +vx; STACKTRACE; set -vx
| [ 0:00] ##pvcreate-metadata0.sh:24+ set +vx
| [ 0:00] ## - /lfskernel/sources/boot/LVM2.2.02.177/test/shell/pvcreate-metadata0.sh:24
| [ 0:00] ## 1 STACKTRACE() called from /lfskernel/sources/boot/LVM2.2.02.177/test/shell/pvcreate-metadata0.sh:24
| [ 0:00] <======== Info ========>
| [ 0:00] ## DMINFO:   Name             Maj Min Stat Open Targ Event  UUID                                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv2  253   3 L--w    0    1      0 TEST-@PREFIX@pv2                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv1  253   4 L--w    0    1      0 TEST-@PREFIX@pv1                                                
| [ 0:00] <======== Active table ========>
| [ 0:00] ## DMTABLE:  @PREFIX@pv2: 0 262144 linear 7:0 264192
| [ 0:00] ## DMTABLE:  @PREFIX@pv1: 0 262144 linear 7:0 2048
| [ 0:00] <======== Inactive table ========>
| [ 0:00] ## DMITABLE: @PREFIX@pv2: 
| [ 0:00] ## DMITABLE: @PREFIX@pv1: 
| [ 0:00] <======== Status ========>
| [ 0:00] ## DMSTATUS: @PREFIX@pv2: 0 262144 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv1: 0 262144 linear 
| [ 0:00] <======== Tree ========>
| [ 0:00] ## DMTREE:   @PREFIX@pv2 (253:3)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   LFS_vg-lfs (253:2)
| [ 0:00] ## DMTREE:    `- (8:16)
| [ 0:00] ## DMTREE:   @PREFIX@pv1 (253:4)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   centos-swap (253:1)
| [ 0:00] ## DMTREE:    `- (8:2)
| [ 0:00] ## DMTREE:   centos-root (253:0)
| [ 0:00] ## DMTREE:    `- (8:2)
| [ 0:00] <======== Recursive list of @TESTDIR@/dev ========>
| [ 0:00] ## LSLR:	@TESTDIR@/dev:
| [ 0:00] ## LSLR:	total 4
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 0 Feb 21 02:27 loop0
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 1 Feb 21 02:27 loop1
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 2 Feb 21 02:27 loop2
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 3 Feb 21 02:27 loop3
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 4 Feb 21 02:27 loop4
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 5 Feb 21 02:27 loop5
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 6 Feb 21 02:27 loop6
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 7 Feb 21 02:27 loop7
| [ 0:00] ## LSLR:	drwxr-xr-x 2 root root 4096 Feb 21 02:27 mapper
| [ 0:00] ## LSLR:	crw-r--r-- 1 root root 1, 3 Feb 21 02:27 testnull
| [ 0:00] ## LSLR:	
| [ 0:00] ## LSLR:	@TESTDIR@/dev/mapper:
| [ 0:00] ## LSLR:	total 0
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   4 Feb 21 02:27 @PREFIX@pv1
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   3 Feb 21 02:27 @PREFIX@pv2
| [ 0:00] ## LSLR:	crw------- 1 root root  10, 236 Feb 21 02:27 control
| [ 0:00] <======== Udev DB content ========>
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-0
| [ 0:00] ## UDEV:	N: dm-0
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-0
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-0
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=0
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-1
| [ 0:00] ## UDEV:	N: dm-1
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-1
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-1
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=1
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-2
| [ 0:00] ## UDEV:	N: dm-2
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-2
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-2
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=2
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-3
| [ 0:00] ## UDEV:	N: dm-3
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-3
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-3
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=3
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-4
| [ 0:00] ## UDEV:	N: dm-4
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-4
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-4
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=4
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/loop0
| [ 0:00] ## UDEV:	N: loop0
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/loop0
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/loop0
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=7
| [ 0:00] ## UDEV:	E: MINOR=0
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] <======== Script file "pvcreate-metadata0.sh" ========>
| [ 0:00] ## Line: 1 	 #!/usr/bin/env bash
| [ 0:00] ## Line: 2 	 
| [ 0:00] ## Line: 3 	 # Copyright (C) 2008 Red Hat, Inc. All rights reserved.
| [ 0:00] ## Line: 4 	 #
| [ 0:00] ## Line: 5 	 # This copyrighted material is made available to anyone wishing to use,
| [ 0:00] ## Line: 6 	 # modify, copy, or redistribute it subject to the terms and conditions
| [ 0:00] ## Line: 7 	 # of the GNU General Public License v.2.
| [ 0:00] ## Line: 8 	 #
| [ 0:00] ## Line: 9 	 # You should have received a copy of the GNU General Public License
| [ 0:00] ## Line: 10 	 # along with this program; if not, write to the Free Software Foundation,
| [ 0:00] ## Line: 11 	 # Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA
| [ 0:00] ## Line: 12 	 
| [ 0:00] ## Line: 13 	 #
| [ 0:00] ## Line: 14 	 # Testcase for bugzilla #450651
| [ 0:00] ## Line: 15 	 # also checks that vgremove properly removes all lv devices in the right order
| [ 0:00] ## Line: 16 	 #
| [ 0:00] ## Line: 17 	 # 'Test pvcreate without metadata on all pvs'
| [ 0:00] ## Line: 18 	 
| [ 0:00] ## Line: 19 	 SKIP_WITH_LVMLOCKD=1
| [ 0:00] ## Line: 20 	 SKIP_WITH_LVMPOLLD=1
| [ 0:00] ## Line: 21 	 
| [ 0:00] ## Line: 22 	 . lib/inittest
| [ 0:00] ## Line: 23 	 
| [ 0:00] ## Line: 24 	 aux prepare_devs 2 128
| [ 0:00] ## Line: 25 	 
| [ 0:00] ## Line: 26 	 #lv_snap=$lv2
| [ 0:00] ## Line: 27 	 pvcreate "$dev1"
| [ 0:00] ## Line: 28 	 pvcreate --metadatacopies 0 "$dev2"
| [ 0:00] ## Line: 29 	 
| [ 0:00] ## Line: 30 	 # "check lv snapshot"
| [ 0:00] ## Line: 31 	 vgcreate $vg "$dev1" "$dev2"
| [ 0:00] ## Line: 32 	 lvcreate -aey -n $lv -l 60%FREE $vg
| [ 0:00] ## Line: 33 	 lvcreate -s -n $lv2 -l 10%FREE $vg/$lv
| [ 0:00] ## Line: 34 	 vgremove -f $vg
| [ 0:00] aux teardown
| [ 0:00] #pvcreate-metadata0.sh:1+ aux teardown
| [ 0:00] ## teardown.........ok
###       failed: [ndev-vanilla] shell/pvcreate-metadata0.sh
###      skipped: [ndev-vanilla] shell/pvcreate-operation-md.sh

| [ 0:00] Library version:   1.02.146 (2017-12-18)
| [ 0:00] Driver version:    4.35.0
| [ 0:00] Kernel is Linux localhost.localdomain 3.10.0-693.11.1.el7.x86_64 #1 SMP Mon Dec 4 23:52:40 UTC 2017 x86_64 GNU/Linux
| [ 0:00] Selinux mode is not installed.
| [ 0:00]               total        used        free      shared  buff/cache   available
| [ 0:00] Mem:           7822        1080        4144          10        2598        6435
| [ 0:00] Swap:          4095           0        4095
| [ 0:00] Filesystem      Size  Used Avail Use% Mounted on
| [ 0:00] /dev/sdc1        18G  8.4G  8.4G  50% /
| [ 0:00] /dev/sdd1        51G  6.1G   43G  13% /lfskernel
| [ 0:00] devtmpfs        3.9G     0  3.9G   0% /dev
| [ 0:00] tmpfs           3.9G     0  3.9G   0% /run
| [ 0:00] @TESTDIR=/tmp/LVMTEST17165.fAIWlYLXZW
| [ 0:00] @PREFIX=LVMTEST17165
| [ 0:00] ## LVMCONF: activation {
| [ 0:00] ## LVMCONF:     checks = 1
| [ 0:00] ## LVMCONF:     monitoring = 0
| [ 0:00] ## LVMCONF:     polling_interval = 1
| [ 0:00] ## LVMCONF:     raid_region_size = 512
| [ 0:00] ## LVMCONF:     retry_deactivation = 1
| [ 0:00] ## LVMCONF:     snapshot_autoextend_percent = 50
| [ 0:00] ## LVMCONF:     snapshot_autoextend_threshold = 50
| [ 0:00] ## LVMCONF:     udev_rules = 1
| [ 0:00] ## LVMCONF:     udev_sync = 1
| [ 0:00] ## LVMCONF:     verify_udev_operations = 1
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: allocation {
| [ 0:00] ## LVMCONF:     wipe_signatures_when_zeroing_new_lvs = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: backup {
| [ 0:00] ## LVMCONF:     archive = 0
| [ 0:00] ## LVMCONF:     backup = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: devices {
| [ 0:00] ## LVMCONF:     cache_dir = "@TESTDIR@/etc"
| [ 0:00] ## LVMCONF:     default_data_alignment = 1
| [ 0:00] ## LVMCONF:     dir = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     filter = "a|.*|"
| [ 0:00] ## LVMCONF:     global_filter = [ "a|@TESTDIR@/dev/mapper/@PREFIX@.*pv[0-9_]*$|", "r|.*|" ]
| [ 0:00] ## LVMCONF:     md_component_detection  = 0
| [ 0:00] ## LVMCONF:     scan = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     sysfs_scan = 1
| [ 0:00] ## LVMCONF:     write_cache_state = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: dmeventd {
| [ 0:00] ## LVMCONF:     executable = "/sources/boot/LVM2.2.02.177/test/lib/dmeventd"
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: global {
| [ 0:00] ## LVMCONF:     abort_on_internal_errors = 1
| [ 0:00] ## LVMCONF:     cache_check_executable = "/usr/sbin/cache_check"
| [ 0:00] ## LVMCONF:     cache_dump_executable = "/usr/sbin/cache_dump"
| [ 0:00] ## LVMCONF:     cache_repair_executable = "/usr/sbin/cache_repair"
| [ 0:00] ## LVMCONF:     detect_internal_vg_cache_corruption = 1
| [ 0:00] ## LVMCONF:     fallback_to_local_locking = 0
| [ 0:00] ## LVMCONF:     fsadm_executable = "/sources/boot/LVM2.2.02.177/test/lib/fsadm"
| [ 0:00] ## LVMCONF:     library_dir = "@TESTDIR@/lib"
| [ 0:00] ## LVMCONF:     locking_dir = "@TESTDIR@/var/lock/lvm"
| [ 0:00] ## LVMCONF:     locking_type=1
| [ 0:00] ## LVMCONF:     notify_dbus = 0
| [ 0:00] ## LVMCONF:     si_unit_consistency = 1
| [ 0:00] ## LVMCONF:     thin_check_executable = "/usr/sbin/thin_check"
| [ 0:00] ## LVMCONF:     thin_dump_executable = "/usr/sbin/thin_dump"
| [ 0:00] ## LVMCONF:     thin_repair_executable = "/usr/sbin/thin_repair"
| [ 0:00] ## LVMCONF:     use_lvmetad = 0
| [ 0:00] ## LVMCONF:     use_lvmlockd = 0
| [ 0:00] ## LVMCONF:     use_lvmpolld = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: log {
| [ 0:00] ## LVMCONF:     activation = 1
| [ 0:00] ## LVMCONF:     file = "@TESTDIR@/debug.log"
| [ 0:00] ## LVMCONF:     indent = 1
| [ 0:00] ## LVMCONF:     level = 9
| [ 0:00] ## LVMCONF:     overwrite = 1
| [ 0:00] ## LVMCONF:     syslog = 0
| [ 0:00] ## LVMCONF:     verbose = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] <======== Processing test: "pvcreate-operation.sh" ========>
| [ 0:00] 
| [ 0:00] aux lvmconf 'devices/md_component_detection = 1'
| [ 0:00] #pvcreate-operation.sh:18+ aux lvmconf 'devices/md_component_detection = 1'
| [ 0:00] ## LVMCONF: activation {
| [ 0:00] ## LVMCONF:     checks = 1
| [ 0:00] ## LVMCONF:     monitoring = 0
| [ 0:00] ## LVMCONF:     polling_interval = 1
| [ 0:00] ## LVMCONF:     raid_region_size = 512
| [ 0:00] ## LVMCONF:     retry_deactivation = 1
| [ 0:00] ## LVMCONF:     snapshot_autoextend_percent = 50
| [ 0:00] ## LVMCONF:     snapshot_autoextend_threshold = 50
| [ 0:00] ## LVMCONF:     udev_rules = 1
| [ 0:00] ## LVMCONF:     udev_sync = 1
| [ 0:00] ## LVMCONF:     verify_udev_operations = 1
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: allocation {
| [ 0:00] ## LVMCONF:     wipe_signatures_when_zeroing_new_lvs = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: backup {
| [ 0:00] ## LVMCONF:     archive = 0
| [ 0:00] ## LVMCONF:     backup = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: devices {
| [ 0:00] ## LVMCONF:     cache_dir = "@TESTDIR@/etc"
| [ 0:00] ## LVMCONF:     default_data_alignment = 1
| [ 0:00] ## LVMCONF:     dir = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     filter = "a|.*|"
| [ 0:00] ## LVMCONF:     global_filter = [ "a|@TESTDIR@/dev/mapper/@PREFIX@.*pv[0-9_]*$|", "r|.*|" ]
| [ 0:00] ## LVMCONF:     md_component_detection = 1
| [ 0:00] ## LVMCONF:     scan = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     sysfs_scan = 1
| [ 0:00] ## LVMCONF:     write_cache_state = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: dmeventd {
| [ 0:00] ## LVMCONF:     executable = "/sources/boot/LVM2.2.02.177/test/lib/dmeventd"
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: global {
| [ 0:00] ## LVMCONF:     abort_on_internal_errors = 1
| [ 0:00] ## LVMCONF:     cache_check_executable = "/usr/sbin/cache_check"
| [ 0:00] ## LVMCONF:     cache_dump_executable = "/usr/sbin/cache_dump"
| [ 0:00] ## LVMCONF:     cache_repair_executable = "/usr/sbin/cache_repair"
| [ 0:00] ## LVMCONF:     detect_internal_vg_cache_corruption = 1
| [ 0:00] ## LVMCONF:     fallback_to_local_locking = 0
| [ 0:00] ## LVMCONF:     fsadm_executable = "/sources/boot/LVM2.2.02.177/test/lib/fsadm"
| [ 0:00] ## LVMCONF:     library_dir = "@TESTDIR@/lib"
| [ 0:00] ## LVMCONF:     locking_dir = "@TESTDIR@/var/lock/lvm"
| [ 0:00] ## LVMCONF:     locking_type=1
| [ 0:00] ## LVMCONF:     notify_dbus = 0
| [ 0:00] ## LVMCONF:     si_unit_consistency = 1
| [ 0:00] ## LVMCONF:     thin_check_executable = "/usr/sbin/thin_check"
| [ 0:00] ## LVMCONF:     thin_dump_executable = "/usr/sbin/thin_dump"
| [ 0:00] ## LVMCONF:     thin_repair_executable = "/usr/sbin/thin_repair"
| [ 0:00] ## LVMCONF:     use_lvmetad = 0
| [ 0:00] ## LVMCONF:     use_lvmlockd = 0
| [ 0:00] ## LVMCONF:     use_lvmpolld = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: log {
| [ 0:00] ## LVMCONF:     activation = 1
| [ 0:00] ## LVMCONF:     file = "@TESTDIR@/debug.log"
| [ 0:00] ## LVMCONF:     indent = 1
| [ 0:00] ## LVMCONF:     level = 9
| [ 0:00] ## LVMCONF:     overwrite = 1
| [ 0:00] ## LVMCONF:     syslog = 0
| [ 0:00] ## LVMCONF:     verbose = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] 
| [ 0:00] aux prepare_devs 4
| [ 0:00] #pvcreate-operation.sh:20+ aux prepare_devs 4
| [ 0:00] ## preparing loop device....ok (/dev/loop0)
| [ 0:00] ## preparing 4 devices...lib/utils: line 212: DM_UDEV_COOKIE: unbound variable
| [ 0:00] set +vx; STACKTRACE; set -vx
| [ 0:00] ##pvcreate-operation.sh:20+ set +vx
| [ 0:00] ## - /lfskernel/sources/boot/LVM2.2.02.177/test/shell/pvcreate-operation.sh:20
| [ 0:00] ## 1 STACKTRACE() called from /lfskernel/sources/boot/LVM2.2.02.177/test/shell/pvcreate-operation.sh:20
| [ 0:00] <======== Info ========>
| [ 0:00] ## DMINFO:   Name             Maj Min Stat Open Targ Event  UUID                                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv4  253   4 L--w    0    1      0 TEST-@PREFIX@pv4                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv3  253   3 L--w    0    1      0 TEST-@PREFIX@pv3                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv2  253   6 L--w    0    1      0 TEST-@PREFIX@pv2                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv1  253   5 L--w    0    1      0 TEST-@PREFIX@pv1                                                
| [ 0:00] <======== Active table ========>
| [ 0:00] ## DMTABLE:  @PREFIX@pv4: 0 69632 linear 7:0 210944
| [ 0:00] ## DMTABLE:  @PREFIX@pv3: 0 69632 linear 7:0 141312
| [ 0:00] ## DMTABLE:  @PREFIX@pv2: 0 69632 linear 7:0 71680
| [ 0:00] ## DMTABLE:  @PREFIX@pv1: 0 69632 linear 7:0 2048
| [ 0:00] <======== Inactive table ========>
| [ 0:00] ## DMITABLE: @PREFIX@pv4: 
| [ 0:00] ## DMITABLE: @PREFIX@pv3: 
| [ 0:00] ## DMITABLE: @PREFIX@pv2: 
| [ 0:00] ## DMITABLE: @PREFIX@pv1: 
| [ 0:00] <======== Status ========>
| [ 0:00] ## DMSTATUS: @PREFIX@pv4: 0 69632 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv3: 0 69632 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv2: 0 69632 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv1: 0 69632 linear 
| [ 0:00] <======== Tree ========>
| [ 0:00] ## DMTREE:   @PREFIX@pv4 (253:4)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   @PREFIX@pv3 (253:3)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   @PREFIX@pv2 (253:6)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   @PREFIX@pv1 (253:5)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   LFS_vg-lfs (253:2)
| [ 0:00] ## DMTREE:    `- (8:16)
| [ 0:00] ## DMTREE:   centos-swap (253:1)
| [ 0:00] ## DMTREE:    `- (8:2)
| [ 0:00] ## DMTREE:   centos-root (253:0)
| [ 0:00] ## DMTREE:    `- (8:2)
| [ 0:00] <======== Recursive list of @TESTDIR@/dev ========>
| [ 0:00] ## LSLR:	@TESTDIR@/dev:
| [ 0:00] ## LSLR:	total 4
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 0 Feb 21 02:27 loop0
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 1 Feb 21 02:27 loop1
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 2 Feb 21 02:27 loop2
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 3 Feb 21 02:27 loop3
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 4 Feb 21 02:27 loop4
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 5 Feb 21 02:27 loop5
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 6 Feb 21 02:27 loop6
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 7 Feb 21 02:27 loop7
| [ 0:00] ## LSLR:	drwxr-xr-x 2 root root 4096 Feb 21 02:27 mapper
| [ 0:00] ## LSLR:	crw-r--r-- 1 root root 1, 3 Feb 21 02:27 testnull
| [ 0:00] ## LSLR:	
| [ 0:00] ## LSLR:	@TESTDIR@/dev/mapper:
| [ 0:00] ## LSLR:	total 0
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   5 Feb 21 02:27 @PREFIX@pv1
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   6 Feb 21 02:27 @PREFIX@pv2
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   3 Feb 21 02:27 @PREFIX@pv3
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   4 Feb 21 02:27 @PREFIX@pv4
| [ 0:00] ## LSLR:	crw------- 1 root root  10, 236 Feb 21 02:27 control
| [ 0:00] <======== Udev DB content ========>
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-0
| [ 0:00] ## UDEV:	N: dm-0
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-0
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-0
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=0
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-1
| [ 0:00] ## UDEV:	N: dm-1
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-1
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-1
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=1
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-2
| [ 0:00] ## UDEV:	N: dm-2
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-2
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-2
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=2
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-3
| [ 0:00] ## UDEV:	N: dm-3
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-3
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-3
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=3
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-4
| [ 0:00] ## UDEV:	N: dm-4
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-4
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-4
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=4
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-5
| [ 0:00] ## UDEV:	N: dm-5
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-5
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-5
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=5
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-6
| [ 0:00] ## UDEV:	N: dm-6
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-6
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-6
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=6
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/loop0
| [ 0:00] ## UDEV:	N: loop0
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/loop0
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/loop0
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=7
| [ 0:00] ## UDEV:	E: MINOR=0
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] <======== Script file "pvcreate-operation.sh" ========>
| [ 0:00] ## Line: 1 	 #!/usr/bin/env bash
| [ 0:00] ## Line: 2 	 
| [ 0:00] ## Line: 3 	 # Copyright (C) 2008-2012 Red Hat, Inc. All rights reserved.
| [ 0:00] ## Line: 4 	 #
| [ 0:00] ## Line: 5 	 # This copyrighted material is made available to anyone wishing to use,
| [ 0:00] ## Line: 6 	 # modify, copy, or redistribute it subject to the terms and conditions
| [ 0:00] ## Line: 7 	 # of the GNU General Public License v.2.
| [ 0:00] ## Line: 8 	 #
| [ 0:00] ## Line: 9 	 # You should have received a copy of the GNU General Public License
| [ 0:00] ## Line: 10 	 # along with this program; if not, write to the Free Software Foundation,
| [ 0:00] ## Line: 11 	 # Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA
| [ 0:00] ## Line: 12 	 
| [ 0:00] ## Line: 13 	 SKIP_WITH_LVMLOCKD=1
| [ 0:00] ## Line: 14 	 SKIP_WITH_LVMPOLLD=1
| [ 0:00] ## Line: 15 	 
| [ 0:00] ## Line: 16 	 . lib/inittest
| [ 0:00] ## Line: 17 	 
| [ 0:00] ## Line: 18 	 aux lvmconf 'devices/md_component_detection = 1'
| [ 0:00] ## Line: 19 	 
| [ 0:00] ## Line: 20 	 aux prepare_devs 4
| [ 0:00] ## Line: 21 	 
| [ 0:00] ## Line: 22 	 if test -n "$LVM_TEST_LVM1" ; then
| [ 0:00] ## Line: 23 	 mdatypes='1 2'
| [ 0:00] ## Line: 24 	 else
| [ 0:00] ## Line: 25 	 mdatypes='2'
| [ 0:00] ## Line: 26 	 fi
| [ 0:00] ## Line: 27 	 
| [ 0:00] ## Line: 28 	 for mdatype in $mdatypes
| [ 0:00] ## Line: 29 	 do
| [ 0:00] ## Line: 30 	 # pvcreate (lvm$mdatype) refuses to overwrite an mounted filesystem (bz168330)
| [ 0:00] ## Line: 31 	 	test ! -d mnt && mkdir mnt
| [ 0:00] ## Line: 32 	 	if mke2fs "$dev1"; then
| [ 0:00] ## Line: 33 	 		mount "$dev1" mnt
| [ 0:00] ## Line: 34 	 		not pvcreate -M$mdatype "$dev1" 2>err
| [ 0:00] ## Line: 35 	 		grep "Can't open $dev1 exclusively.  Mounted filesystem?" err
| [ 0:00] ## Line: 36 	 		umount "$dev1"
| [ 0:00] ## Line: 37 	 		# wipe the filesystem signature for next
| [ 0:00] ## Line: 38 	 		# pvcreate to not issue any prompts
| [ 0:00] ## Line: 39 	 		dd if=/dev/zero of="$dev1" bs=1K count=2
| [ 0:00] ## Line: 40 	 	fi
| [ 0:00] ## Line: 41 	 
| [ 0:00] ## Line: 42 	 # pvcreate (lvm$mdatype) succeeds when run repeatedly (pv not in a vg) (bz178216)
| [ 0:00] ## Line: 43 	     pvcreate -M$mdatype "$dev1"
| [ 0:00] ## Line: 44 	     pvcreate -M$mdatype "$dev1"
| [ 0:00] ## Line: 45 	     pvremove -f "$dev1"
| [ 0:00] ## Line: 46 	 
| [ 0:00] ## Line: 47 	 # pvcreate (lvm$mdatype) fails when PV belongs to VG
| [ 0:00] ## Line: 48 	 #   pvcreate -M$mdatype "$dev1"
| [ 0:00] ## Line: 49 	     vgcreate -M$mdatype $vg1 "$dev1"
| [ 0:00] ## Line: 50 	     not pvcreate -M$mdatype "$dev1"
| [ 0:00] ## Line: 51 	 
| [ 0:00] ## Line: 52 	     vgremove -f $vg1
| [ 0:00] ## Line: 53 	     pvremove -f "$dev1"
| [ 0:00] ## Line: 54 	 
| [ 0:00] ## Line: 55 	 # pvcreate (lvm$mdatype) fails when PV1 does and PV2 does not belong to VG
| [ 0:00] ## Line: 56 	     pvcreate -M$mdatype "$dev1"
| [ 0:00] ## Line: 57 	     pvcreate -M$mdatype "$dev2"
| [ 0:00] ## Line: 58 	     vgcreate -M$mdatype $vg1 "$dev1"
| [ 0:00] ## Line: 59 	 
| [ 0:00] ## Line: 60 	 # pvcreate a second time on $dev2 and $dev1
| [ 0:00] ## Line: 61 	     not pvcreate -M$mdatype "$dev2" "$dev1"
| [ 0:00] ## Line: 62 	 
| [ 0:00] ## Line: 63 	     vgremove -f $vg1
| [ 0:00] ## Line: 64 	     pvremove -f "$dev2" "$dev1"
| [ 0:00] ## Line: 65 	 
| [ 0:00] ## Line: 66 	 # NOTE: Force pvcreate after test completion to ensure clean device
| [ 0:00] ## Line: 67 	 #test_expect_success
| [ 0:00] ## Line: 68 	 #  "pvcreate (lvm$mdatype) fails on md component device"
| [ 0:00] ## Line: 69 	 #  'mdadm -C -l raid0 -n 2 /dev/md0 "$dev1" "$dev2" &&
| [ 0:00] ## Line: 70 	 #   pvcreate -M$mdatype "$dev1";
| [ 0:00] ## Line: 71 	 #   status=$?; echo status=$status; test $status != 0 &&
| [ 0:00] ## Line: 72 	 #   mdadm --stop /dev/md0 &&
| [ 0:00] ## Line: 73 	 #   pvcreate -ff -y -M$mdatype "$dev1" "$dev2" &&
| [ 0:00] ## Line: 74 	 #   pvremove -f "$dev1" "$dev2"'
| [ 0:00] ## Line: 75 	 done
| [ 0:00] ## Line: 76 	 
| [ 0:00] ## Line: 77 	 # pvcreate (lvm2) fails without -ff when PV with metadatacopies=0 belongs to VG
| [ 0:00] ## Line: 78 	 pvcreate --metadatacopies 0 "$dev1"
| [ 0:00] ## Line: 79 	 pvcreate --metadatacopies 1 "$dev2"
| [ 0:00] ## Line: 80 	 vgcreate $vg1 "$dev1" "$dev2"
| [ 0:00] ## Line: 81 	 not pvcreate "$dev1"
| [ 0:00] ## Line: 82 	 vgremove -f $vg1
| [ 0:00] ## Line: 83 	 pvremove -f "$dev2" "$dev1"
| [ 0:00] ## Line: 84 	 
| [ 0:00] ## Line: 85 	 # pvcreate (lvm2) succeeds with -ff when PV with metadatacopies=0 belongs to VG
| [ 0:00] ## Line: 86 	 pvcreate --metadatacopies 0 "$dev1"
| [ 0:00] ## Line: 87 	 pvcreate --metadatacopies 1 "$dev2"
| [ 0:00] ## Line: 88 	 vgcreate $vg1 "$dev1" "$dev2"
| [ 0:00] ## Line: 89 	 pvcreate -ff -y "$dev1"
| [ 0:00] ## Line: 90 	 vgreduce --removemissing $vg1
| [ 0:00] ## Line: 91 	 vgremove -ff $vg1
| [ 0:00] ## Line: 92 	 pvremove -f "$dev2" "$dev1"
| [ 0:00] ## Line: 93 	 
| [ 0:00] ## Line: 94 	 for i in 0 1 2 3
| [ 0:00] ## Line: 95 	 do
| [ 0:00] ## Line: 96 	 # pvcreate (lvm2) succeeds writing LVM label at sector $i
| [ 0:00] ## Line: 97 	     pvcreate --labelsector $i "$dev1"
| [ 0:00] ## Line: 98 	     dd if="$dev1" bs=512 skip=$i count=1 2>/dev/null | strings | grep LABELONE >/dev/null
| [ 0:00] ## Line: 99 	     pvremove -f "$dev1"
| [ 0:00] ## Line: 100 	 done
| [ 0:00] ## Line: 101 	 
| [ 0:00] ## Line: 102 	 # pvcreate (lvm2) fails writing LVM label at sector 4
| [ 0:00] ## Line: 103 	 not pvcreate --labelsector 4 "$dev1"
| [ 0:00] ## Line: 104 	 
| [ 0:00] ## Line: 105 	 backupfile="$PREFIX.mybackupfile"
| [ 0:00] ## Line: 106 	 uuid1=freddy-fred-fred-fred-fred-fred-freddy
| [ 0:00] ## Line: 107 	 uuid2=freddy-fred-fred-fred-fred-fred-fredie
| [ 0:00] ## Line: 108 	 bogusuuid=fred
| [ 0:00] ## Line: 109 	 
| [ 0:00] ## Line: 110 	 # pvcreate rejects uuid option with less than 32 characters
| [ 0:00] ## Line: 111 	 not pvcreate --norestorefile --uuid $bogusuuid "$dev1"
| [ 0:00] ## Line: 112 	 
| [ 0:00] ## Line: 113 	 # pvcreate rejects uuid option without restorefile
| [ 0:00] ## Line: 114 	 not pvcreate --uuid $uuid1 "$dev1"
| [ 0:00] ## Line: 115 	 
| [ 0:00] ## Line: 116 	 # pvcreate rejects uuid already in use
| [ 0:00] ## Line: 117 	 pvcreate --norestorefile --uuid $uuid1 "$dev1"
| [ 0:00] ## Line: 118 	 not pvcreate --norestorefile --uuid $uuid1 "$dev2"
| [ 0:00] ## Line: 119 	 
| [ 0:00] ## Line: 120 	 # pvcreate rejects non-existent file given with restorefile
| [ 0:00] ## Line: 121 	 not pvcreate --uuid $uuid1 --restorefile "$backupfile" "$dev1"
| [ 0:00] ## Line: 122 	 
| [ 0:00] ## Line: 123 	 # pvcreate rejects restorefile with uuid not found in file
| [ 0:00] ## Line: 124 	 pvcreate --norestorefile --uuid $uuid1 "$dev1"
| [ 0:00] ## Line: 125 	 vgcfgbackup -f "$backupfile"
| [ 0:00] ## Line: 126 	 not pvcreate --uuid $uuid2 --restorefile "$backupfile" "$dev2"
| [ 0:00] ## Line: 127 	 
| [ 0:00] ## Line: 128 	 # vgcfgrestore of a VG containing a PV with zero PEs (bz #820116)
| [ 0:00] ## Line: 129 	 # (use case: one PV in a VG used solely to keep metadata)
| [ 0:00] ## Line: 130 	 size_mb=$(($(blockdev --getsz "$dev1") / 2048))
| [ 0:00] ## Line: 131 	 pvcreate --metadatasize $size_mb "$dev1"
| [ 0:00] ## Line: 132 	 vgcreate $vg1 "$dev1"
| [ 0:00] ## Line: 133 	 vgcfgbackup -f "$backupfile"
| [ 0:00] ## Line: 134 	 vgcfgrestore -f "$backupfile" "$vg1"
| [ 0:00] ## Line: 135 	 vgremove -f $vg1
| [ 0:00] ## Line: 136 	 pvremove -f "$dev1"
| [ 0:00] ## Line: 137 	 
| [ 0:00] ## Line: 138 	 # pvcreate --restorefile should handle --dataalignment and --dataalignmentoffset
| [ 0:00] ## Line: 139 	 # and check it's compatible with pe_start value being restored
| [ 0:00] ## Line: 140 	 # X * dataalignment + dataalignmentoffset == pe_start
| [ 0:00] ## Line: 141 	 pvcreate --norestorefile --uuid "$uuid1" --dataalignment 600k --dataalignmentoffset 32k "$dev1"
| [ 0:00] ## Line: 142 	 vgcreate $vg1 "$dev1"
| [ 0:00] ## Line: 143 	 vgcfgbackup -f "$backupfile" "$vg1"
| [ 0:00] ## Line: 144 	 vgremove -ff $vg1
| [ 0:00] ## Line: 145 	 pvremove -ff "$dev1"
| [ 0:00] ## Line: 146 	 # the dataalignment and dataalignmentoffset is ignored here since they're incompatible with pe_start
| [ 0:00] ## Line: 147 	 pvcreate --restorefile "$backupfile" --uuid "$uuid1" --dataalignment 500k --dataalignmentoffset 10k "$dev1" 2> err
| [ 0:00] ## Line: 148 	 grep "incompatible with restored pe_start value" err
| [ 0:00] ## Line: 149 	 # 300k is multiple of 600k so this should pass
| [ 0:00] ## Line: 150 	 pvcreate --restorefile "$backupfile" --uui "$uuid1" --dataalignment 300k --dataalignmentoffset 32k "$dev1" 2> err
| [ 0:00] ## Line: 151 	 not grep "incompatible with restored pe_start value" err
| [ 0:00] ## Line: 152 	 
| [ 0:00] ## Line: 153 	 # pvcreate rejects non-existent uuid given with restorefile
| [ 0:00] ## Line: 154 	 not pvcreate --uuid "$uuid2" --restorefile "$backupfile" "$dev1" 2> err
| [ 0:00] ## Line: 155 	 grep "Can't find uuid $uuid2 in backup file $backupfile" err
| [ 0:00] ## Line: 156 	 
| [ 0:00] ## Line: 157 	 # pvcreate rejects restorefile without uuid
| [ 0:00] ## Line: 158 	 not pvcreate --restorefile "$backupfile" "$dev1" 2>err
| [ 0:00] ## Line: 159 	 grep -- "--uuid is required with --restorefile" err
| [ 0:00] ## Line: 160 	 
| [ 0:00] ## Line: 161 	 # pvcreate rejects uuid restore with multiple volumes specified
| [ 0:00] ## Line: 162 	 not pvcreate --uuid "$uuid1" --restorefile "$backupfile" "$dev1" "$dev2" 2>err
| [ 0:00] ## Line: 163 	 grep "Can only set uuid on one volume at once" err
| [ 0:00] ## Line: 164 	 
| [ 0:00] ## Line: 165 	 # --bootloaderareasize not allowed with pvcreate --restorefile
| [ 0:00] ## Line: 166 	 not pvcreate --uuid "$uuid1" --restorefile "$backupfile" --bootloaderareasize 1m "$dev1" "$dev2" 2>err
| [ 0:00] ## Line: 167 	 grep -- "Command does not accept option combination: --bootloaderareasize  with --restorefile" err
| [ 0:00] ## Line: 168 	 
| [ 0:00] ## Line: 169 	 rm -f "$backupfile"
| [ 0:00] ## Line: 170 	 
| [ 0:00] ## Line: 171 	 pvcreate --norestorefile --uuid $uuid1 "$dev1"
| [ 0:00] ## Line: 172 	 vgcreate --physicalextentsize 1m $vg1 "$dev1"
| [ 0:00] ## Line: 173 	 vgcfgbackup -f "$backupfile" "$vg1"
| [ 0:00] ## Line: 174 	 vgremove -ff "$vg1"
| [ 0:00] ## Line: 175 	 pvremove -ff "$dev1"
| [ 0:00] ## Line: 176 	 
| [ 0:00] ## Line: 177 	 # when 2nd mda requested on pvcreate --restorefile and not enough space for it, pvcreate fails
| [ 0:00] ## Line: 178 	 not pvcreate --restorefile "$backupfile" --uuid $uuid1 --metadatacopies 2 "$dev1" 2>err
| [ 0:00] ## Line: 179 	 grep "Not enough space available for metadata area with index 1 on PV $dev1" err
| [ 0:00] ## Line: 180 	 
| [ 0:00] ## Line: 181 	 rm -f "$backupfile"
| [ 0:00] ## Line: 182 	 
| [ 0:00] ## Line: 183 	 # pvcreate wipes swap signature when forced
| [ 0:00] ## Line: 184 	 dd if=/dev/zero of="$dev1" bs=1024 count=64
| [ 0:00] ## Line: 185 	 mkswap "$dev1"
| [ 0:00] ## Line: 186 	 blkid -c /dev/null "$dev1" | grep "swap"
| [ 0:00] ## Line: 187 	 pvcreate -f "$dev1"
| [ 0:00] ## Line: 188 	 # blkid cannot make up its mind whether not finding anything it knows is a failure or not
| [ 0:00] ## Line: 189 	 (blkid -c /dev/null "$dev1" || true) | not grep "swap"
| [ 0:00] aux teardown
| [ 0:00] #pvcreate-operation.sh:1+ aux teardown
| [ 0:00] ## teardown.........ok
###       failed: [ndev-vanilla] shell/pvcreate-operation.sh

| [ 0:00] Library version:   1.02.146 (2017-12-18)
| [ 0:00] Driver version:    4.35.0
| [ 0:00] Kernel is Linux localhost.localdomain 3.10.0-693.11.1.el7.x86_64 #1 SMP Mon Dec 4 23:52:40 UTC 2017 x86_64 GNU/Linux
| [ 0:00] Selinux mode is not installed.
| [ 0:00]               total        used        free      shared  buff/cache   available
| [ 0:00] Mem:           7822        1080        4144          10        2598        6435
| [ 0:00] Swap:          4095           0        4095
| [ 0:00] Filesystem      Size  Used Avail Use% Mounted on
| [ 0:00] /dev/sdc1        18G  8.4G  8.4G  50% /
| [ 0:00] /dev/sdd1        51G  6.1G   43G  13% /lfskernel
| [ 0:00] devtmpfs        3.9G     0  3.9G   0% /dev
| [ 0:00] tmpfs           3.9G     0  3.9G   0% /run
| [ 0:00] @TESTDIR=/tmp/LVMTEST17367.Yrc60KStKE
| [ 0:00] @PREFIX=LVMTEST17367
| [ 0:00] ## LVMCONF: activation {
| [ 0:00] ## LVMCONF:     checks = 1
| [ 0:00] ## LVMCONF:     monitoring = 0
| [ 0:00] ## LVMCONF:     polling_interval = 1
| [ 0:00] ## LVMCONF:     raid_region_size = 512
| [ 0:00] ## LVMCONF:     retry_deactivation = 1
| [ 0:00] ## LVMCONF:     snapshot_autoextend_percent = 50
| [ 0:00] ## LVMCONF:     snapshot_autoextend_threshold = 50
| [ 0:00] ## LVMCONF:     udev_rules = 1
| [ 0:00] ## LVMCONF:     udev_sync = 1
| [ 0:00] ## LVMCONF:     verify_udev_operations = 1
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: allocation {
| [ 0:00] ## LVMCONF:     wipe_signatures_when_zeroing_new_lvs = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: backup {
| [ 0:00] ## LVMCONF:     archive = 0
| [ 0:00] ## LVMCONF:     backup = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: devices {
| [ 0:00] ## LVMCONF:     cache_dir = "@TESTDIR@/etc"
| [ 0:00] ## LVMCONF:     default_data_alignment = 1
| [ 0:00] ## LVMCONF:     dir = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     filter = "a|.*|"
| [ 0:00] ## LVMCONF:     global_filter = [ "a|@TESTDIR@/dev/mapper/@PREFIX@.*pv[0-9_]*$|", "r|.*|" ]
| [ 0:00] ## LVMCONF:     md_component_detection  = 0
| [ 0:00] ## LVMCONF:     scan = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     sysfs_scan = 1
| [ 0:00] ## LVMCONF:     write_cache_state = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: dmeventd {
| [ 0:00] ## LVMCONF:     executable = "/sources/boot/LVM2.2.02.177/test/lib/dmeventd"
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: global {
| [ 0:00] ## LVMCONF:     abort_on_internal_errors = 1
| [ 0:00] ## LVMCONF:     cache_check_executable = "/usr/sbin/cache_check"
| [ 0:00] ## LVMCONF:     cache_dump_executable = "/usr/sbin/cache_dump"
| [ 0:00] ## LVMCONF:     cache_repair_executable = "/usr/sbin/cache_repair"
| [ 0:00] ## LVMCONF:     detect_internal_vg_cache_corruption = 1
| [ 0:00] ## LVMCONF:     fallback_to_local_locking = 0
| [ 0:00] ## LVMCONF:     fsadm_executable = "/sources/boot/LVM2.2.02.177/test/lib/fsadm"
| [ 0:00] ## LVMCONF:     library_dir = "@TESTDIR@/lib"
| [ 0:00] ## LVMCONF:     locking_dir = "@TESTDIR@/var/lock/lvm"
| [ 0:00] ## LVMCONF:     locking_type=1
| [ 0:00] ## LVMCONF:     notify_dbus = 0
| [ 0:00] ## LVMCONF:     si_unit_consistency = 1
| [ 0:00] ## LVMCONF:     thin_check_executable = "/usr/sbin/thin_check"
| [ 0:00] ## LVMCONF:     thin_dump_executable = "/usr/sbin/thin_dump"
| [ 0:00] ## LVMCONF:     thin_repair_executable = "/usr/sbin/thin_repair"
| [ 0:00] ## LVMCONF:     use_lvmetad = 0
| [ 0:00] ## LVMCONF:     use_lvmlockd = 0
| [ 0:00] ## LVMCONF:     use_lvmpolld = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: log {
| [ 0:00] ## LVMCONF:     activation = 1
| [ 0:00] ## LVMCONF:     file = "@TESTDIR@/debug.log"
| [ 0:00] ## LVMCONF:     indent = 1
| [ 0:00] ## LVMCONF:     level = 9
| [ 0:00] ## LVMCONF:     overwrite = 1
| [ 0:00] ## LVMCONF:     syslog = 0
| [ 0:00] ## LVMCONF:     verbose = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] <======== Processing test: "pvcreate-restore.sh" ========>
| [ 0:00] 
| [ 0:00] aux prepare_vg 4
| [ 0:00] #pvcreate-restore.sh:18+ aux prepare_vg 4
| [ 0:00] ## preparing loop device....ok (/dev/loop0)
| [ 0:00] ## preparing 4 devices...lib/utils: line 212: DM_UDEV_COOKIE: unbound variable
| [ 0:00] set +vx; STACKTRACE; set -vx
| [ 0:00] ##pvcreate-restore.sh:18+ set +vx
| [ 0:00] ## - /lfskernel/sources/boot/LVM2.2.02.177/test/shell/pvcreate-restore.sh:18
| [ 0:00] ## 1 STACKTRACE() called from /lfskernel/sources/boot/LVM2.2.02.177/test/shell/pvcreate-restore.sh:18
| [ 0:00] <======== Info ========>
| [ 0:00] ## DMINFO:   Name             Maj Min Stat Open Targ Event  UUID                                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv4  253   5 L--w    0    1      0 TEST-@PREFIX@pv4                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv3  253   4 L--w    0    1      0 TEST-@PREFIX@pv3                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv2  253   3 L--w    0    1      0 TEST-@PREFIX@pv2                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv1  253   6 L--w    0    1      0 TEST-@PREFIX@pv1                                                
| [ 0:00] <======== Active table ========>
| [ 0:00] ## DMTABLE:  @PREFIX@pv4: 0 69632 linear 7:0 210944
| [ 0:00] ## DMTABLE:  @PREFIX@pv3: 0 69632 linear 7:0 141312
| [ 0:00] ## DMTABLE:  @PREFIX@pv2: 0 69632 linear 7:0 71680
| [ 0:00] ## DMTABLE:  @PREFIX@pv1: 0 69632 linear 7:0 2048
| [ 0:00] <======== Inactive table ========>
| [ 0:00] ## DMITABLE: @PREFIX@pv4: 
| [ 0:00] ## DMITABLE: @PREFIX@pv3: 
| [ 0:00] ## DMITABLE: @PREFIX@pv2: 
| [ 0:00] ## DMITABLE: @PREFIX@pv1: 
| [ 0:00] <======== Status ========>
| [ 0:00] ## DMSTATUS: @PREFIX@pv4: 0 69632 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv3: 0 69632 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv2: 0 69632 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv1: 0 69632 linear 
| [ 0:00] <======== Tree ========>
| [ 0:00] ## DMTREE:   @PREFIX@pv4 (253:5)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   @PREFIX@pv3 (253:4)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   @PREFIX@pv2 (253:3)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   @PREFIX@pv1 (253:6)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   LFS_vg-lfs (253:2)
| [ 0:00] ## DMTREE:    `- (8:16)
| [ 0:00] ## DMTREE:   centos-swap (253:1)
| [ 0:00] ## DMTREE:    `- (8:2)
| [ 0:00] ## DMTREE:   centos-root (253:0)
| [ 0:00] ## DMTREE:    `- (8:2)
| [ 0:00] <======== Recursive list of @TESTDIR@/dev ========>
| [ 0:00] ## LSLR:	@TESTDIR@/dev:
| [ 0:00] ## LSLR:	total 4
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 0 Feb 21 02:27 loop0
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 1 Feb 21 02:27 loop1
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 2 Feb 21 02:27 loop2
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 3 Feb 21 02:27 loop3
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 4 Feb 21 02:27 loop4
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 5 Feb 21 02:27 loop5
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 6 Feb 21 02:27 loop6
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 7 Feb 21 02:27 loop7
| [ 0:00] ## LSLR:	drwxr-xr-x 2 root root 4096 Feb 21 02:27 mapper
| [ 0:00] ## LSLR:	crw-r--r-- 1 root root 1, 3 Feb 21 02:27 testnull
| [ 0:00] ## LSLR:	
| [ 0:00] ## LSLR:	@TESTDIR@/dev/mapper:
| [ 0:00] ## LSLR:	total 0
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   6 Feb 21 02:27 @PREFIX@pv1
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   3 Feb 21 02:27 @PREFIX@pv2
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   4 Feb 21 02:27 @PREFIX@pv3
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   5 Feb 21 02:27 @PREFIX@pv4
| [ 0:00] ## LSLR:	crw------- 1 root root  10, 236 Feb 21 02:27 control
| [ 0:00] <======== Udev DB content ========>
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-0
| [ 0:00] ## UDEV:	N: dm-0
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-0
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-0
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=0
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-1
| [ 0:00] ## UDEV:	N: dm-1
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-1
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-1
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=1
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-2
| [ 0:00] ## UDEV:	N: dm-2
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-2
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-2
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=2
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-3
| [ 0:00] ## UDEV:	N: dm-3
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-3
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-3
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=3
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-4
| [ 0:00] ## UDEV:	N: dm-4
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-4
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-4
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=4
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-5
| [ 0:00] ## UDEV:	N: dm-5
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-5
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-5
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=5
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-6
| [ 0:00] ## UDEV:	N: dm-6
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-6
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-6
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=6
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/loop0
| [ 0:00] ## UDEV:	N: loop0
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/loop0
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/loop0
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=7
| [ 0:00] ## UDEV:	E: MINOR=0
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] <======== Script file "pvcreate-restore.sh" ========>
| [ 0:00] ## Line: 1 	 #!/usr/bin/env bash
| [ 0:00] ## Line: 2 	 
| [ 0:00] ## Line: 3 	 # Copyright (C) 2015 Red Hat, Inc. All rights reserved.
| [ 0:00] ## Line: 4 	 #
| [ 0:00] ## Line: 5 	 # This copyrighted material is made available to anyone wishing to use,
| [ 0:00] ## Line: 6 	 # modify, copy, or redistribute it subject to the terms and conditions
| [ 0:00] ## Line: 7 	 # of the GNU General Public License v.2.
| [ 0:00] ## Line: 8 	 #
| [ 0:00] ## Line: 9 	 # You should have received a copy of the GNU General Public License
| [ 0:00] ## Line: 10 	 # along with this program; if not, write to the Free Software Foundation,
| [ 0:00] ## Line: 11 	 # Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA
| [ 0:00] ## Line: 12 	 
| [ 0:00] ## Line: 13 	 SKIP_WITH_LVMLOCKD=1
| [ 0:00] ## Line: 14 	 SKIP_WITH_LVMPOLLD=1
| [ 0:00] ## Line: 15 	 
| [ 0:00] ## Line: 16 	 . lib/inittest
| [ 0:00] ## Line: 17 	 
| [ 0:00] ## Line: 18 	 aux prepare_vg 4
| [ 0:00] ## Line: 19 	 
| [ 0:00] ## Line: 20 	 lvcreate --type snapshot -s -L10 -n $lv1 $vg --virtualsize 2T
| [ 0:00] ## Line: 21 	 lvcreate --type snapshot -s -L10 -n $lv2 $vg --virtualsize 4T
| [ 0:00] ## Line: 22 	 lvcreate --type snapshot -s -L10 -n $lv3 $vg --virtualsize 4194300M
| [ 0:00] ## Line: 23 	 
| [ 0:00] ## Line: 24 	 aux extend_filter_LVMTEST
| [ 0:00] ## Line: 25 	 
| [ 0:00] ## Line: 26 	 vgcreate $vg1 "$DM_DEV_DIR/$vg/$lv2"
| [ 0:00] ## Line: 27 	 
| [ 0:00] ## Line: 28 	 vgcfgbackup -f vgback $vg1
| [ 0:00] ## Line: 29 	 
| [ 0:00] ## Line: 30 	 UUID=$(get pv_field "$DM_DEV_DIR/$vg/$lv2" uuid)
| [ 0:00] ## Line: 31 	 pvremove -ff -y "$DM_DEV_DIR/$vg/$lv2"
| [ 0:00] ## Line: 32 	 
| [ 0:00] ## Line: 33 	 # too small to fit
| [ 0:00] ## Line: 34 	 fail pvcreate --restorefile vgback --uuid $UUID "$DM_DEV_DIR/$vg/$lv1"
| [ 0:00] ## Line: 35 	 
| [ 0:00] ## Line: 36 	 # still does not fit
| [ 0:00] ## Line: 37 	 fail pvcreate --restorefile vgback --uuid $UUID "$DM_DEV_DIR/$vg/$lv3"
| [ 0:00] ## Line: 38 	 
| [ 0:00] ## Line: 39 	 pvcreate --restorefile vgback --uuid $UUID "$DM_DEV_DIR/$vg/$lv2"
| [ 0:00] ## Line: 40 	 
| [ 0:00] ## Line: 41 	 vgremove -ff $vg
| [ 0:00] aux teardown
| [ 0:00] #pvcreate-restore.sh:1+ aux teardown
| [ 0:00] ## teardown.........ok
###       failed: [ndev-vanilla] shell/pvcreate-restore.sh

| [ 0:00] Library version:   1.02.146 (2017-12-18)
| [ 0:00] Driver version:    4.35.0
| [ 0:00] Kernel is Linux localhost.localdomain 3.10.0-693.11.1.el7.x86_64 #1 SMP Mon Dec 4 23:52:40 UTC 2017 x86_64 GNU/Linux
| [ 0:00] Selinux mode is not installed.
| [ 0:00]               total        used        free      shared  buff/cache   available
| [ 0:00] Mem:           7822        1080        4144          10        2598        6435
| [ 0:00] Swap:          4095           0        4095
| [ 0:00] Filesystem      Size  Used Avail Use% Mounted on
| [ 0:00] /dev/sdc1        18G  8.4G  8.4G  50% /
| [ 0:00] /dev/sdd1        51G  6.1G   43G  13% /lfskernel
| [ 0:00] devtmpfs        3.9G     0  3.9G   0% /dev
| [ 0:00] tmpfs           3.9G     0  3.9G   0% /run
| [ 0:00] @TESTDIR=/tmp/LVMTEST17569.1Nl2PrpKQt
| [ 0:00] @PREFIX=LVMTEST17569
| [ 0:00] ## LVMCONF: activation {
| [ 0:00] ## LVMCONF:     checks = 1
| [ 0:00] ## LVMCONF:     monitoring = 0
| [ 0:00] ## LVMCONF:     polling_interval = 1
| [ 0:00] ## LVMCONF:     raid_region_size = 512
| [ 0:00] ## LVMCONF:     retry_deactivation = 1
| [ 0:00] ## LVMCONF:     snapshot_autoextend_percent = 50
| [ 0:00] ## LVMCONF:     snapshot_autoextend_threshold = 50
| [ 0:00] ## LVMCONF:     udev_rules = 1
| [ 0:00] ## LVMCONF:     udev_sync = 1
| [ 0:00] ## LVMCONF:     verify_udev_operations = 1
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: allocation {
| [ 0:00] ## LVMCONF:     wipe_signatures_when_zeroing_new_lvs = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: backup {
| [ 0:00] ## LVMCONF:     archive = 0
| [ 0:00] ## LVMCONF:     backup = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: devices {
| [ 0:00] ## LVMCONF:     cache_dir = "@TESTDIR@/etc"
| [ 0:00] ## LVMCONF:     default_data_alignment = 1
| [ 0:00] ## LVMCONF:     dir = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     filter = "a|.*|"
| [ 0:00] ## LVMCONF:     global_filter = [ "a|@TESTDIR@/dev/mapper/@PREFIX@.*pv[0-9_]*$|", "r|.*|" ]
| [ 0:00] ## LVMCONF:     md_component_detection  = 0
| [ 0:00] ## LVMCONF:     scan = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     sysfs_scan = 1
| [ 0:00] ## LVMCONF:     write_cache_state = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: dmeventd {
| [ 0:00] ## LVMCONF:     executable = "/sources/boot/LVM2.2.02.177/test/lib/dmeventd"
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: global {
| [ 0:00] ## LVMCONF:     abort_on_internal_errors = 1
| [ 0:00] ## LVMCONF:     cache_check_executable = "/usr/sbin/cache_check"
| [ 0:00] ## LVMCONF:     cache_dump_executable = "/usr/sbin/cache_dump"
| [ 0:00] ## LVMCONF:     cache_repair_executable = "/usr/sbin/cache_repair"
| [ 0:00] ## LVMCONF:     detect_internal_vg_cache_corruption = 1
| [ 0:00] ## LVMCONF:     fallback_to_local_locking = 0
| [ 0:00] ## LVMCONF:     fsadm_executable = "/sources/boot/LVM2.2.02.177/test/lib/fsadm"
| [ 0:00] ## LVMCONF:     library_dir = "@TESTDIR@/lib"
| [ 0:00] ## LVMCONF:     locking_dir = "@TESTDIR@/var/lock/lvm"
| [ 0:00] ## LVMCONF:     locking_type=1
| [ 0:00] ## LVMCONF:     notify_dbus = 0
| [ 0:00] ## LVMCONF:     si_unit_consistency = 1
| [ 0:00] ## LVMCONF:     thin_check_executable = "/usr/sbin/thin_check"
| [ 0:00] ## LVMCONF:     thin_dump_executable = "/usr/sbin/thin_dump"
| [ 0:00] ## LVMCONF:     thin_repair_executable = "/usr/sbin/thin_repair"
| [ 0:00] ## LVMCONF:     use_lvmetad = 0
| [ 0:00] ## LVMCONF:     use_lvmlockd = 0
| [ 0:00] ## LVMCONF:     use_lvmpolld = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: log {
| [ 0:00] ## LVMCONF:     activation = 1
| [ 0:00] ## LVMCONF:     file = "@TESTDIR@/debug.log"
| [ 0:00] ## LVMCONF:     indent = 1
| [ 0:00] ## LVMCONF:     level = 9
| [ 0:00] ## LVMCONF:     overwrite = 1
| [ 0:00] ## LVMCONF:     syslog = 0
| [ 0:00] ## LVMCONF:     verbose = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] <======== Processing test: "pvcreate-usage.sh" ========>
| [ 0:00] 
| [ 0:00] aux prepare_devs 4
| [ 0:00] #pvcreate-usage.sh:22+ aux prepare_devs 4
| [ 0:00] ## preparing loop device....ok (/dev/loop0)
| [ 0:01] ## preparing 4 devices...lib/utils: line 212: DM_UDEV_COOKIE: unbound variable
| [ 0:01] set +vx; STACKTRACE; set -vx
| [ 0:01] ##pvcreate-usage.sh:22+ set +vx
| [ 0:01] ## - /lfskernel/sources/boot/LVM2.2.02.177/test/shell/pvcreate-usage.sh:22
| [ 0:01] ## 1 STACKTRACE() called from /lfskernel/sources/boot/LVM2.2.02.177/test/shell/pvcreate-usage.sh:22
| [ 0:01] <======== Info ========>
| [ 0:01] ## DMINFO:   Name             Maj Min Stat Open Targ Event  UUID                                                                
| [ 0:01] ## DMINFO:   @PREFIX@pv4  253   5 L--w    0    1      0 TEST-@PREFIX@pv4                                                
| [ 0:01] ## DMINFO:   @PREFIX@pv3  253   4 L--w    0    1      0 TEST-@PREFIX@pv3                                                
| [ 0:01] ## DMINFO:   @PREFIX@pv2  253   3 L--w    0    1      0 TEST-@PREFIX@pv2                                                
| [ 0:01] ## DMINFO:   @PREFIX@pv1  253   6 L--w    0    1      0 TEST-@PREFIX@pv1                                                
| [ 0:01] <======== Active table ========>
| [ 0:01] ## DMTABLE:  @PREFIX@pv4: 0 69632 linear 7:0 210944
| [ 0:01] ## DMTABLE:  @PREFIX@pv3: 0 69632 linear 7:0 141312
| [ 0:01] ## DMTABLE:  @PREFIX@pv2: 0 69632 linear 7:0 71680
| [ 0:01] ## DMTABLE:  @PREFIX@pv1: 0 69632 linear 7:0 2048
| [ 0:01] <======== Inactive table ========>
| [ 0:01] ## DMITABLE: @PREFIX@pv4: 
| [ 0:01] ## DMITABLE: @PREFIX@pv3: 
| [ 0:01] ## DMITABLE: @PREFIX@pv2: 
| [ 0:01] ## DMITABLE: @PREFIX@pv1: 
| [ 0:01] <======== Status ========>
| [ 0:01] ## DMSTATUS: @PREFIX@pv4: 0 69632 linear 
| [ 0:01] ## DMSTATUS: @PREFIX@pv3: 0 69632 linear 
| [ 0:01] ## DMSTATUS: @PREFIX@pv2: 0 69632 linear 
| [ 0:01] ## DMSTATUS: @PREFIX@pv1: 0 69632 linear 
| [ 0:01] <======== Tree ========>
| [ 0:01] ## DMTREE:   @PREFIX@pv4 (253:5)
| [ 0:01] ## DMTREE:    `- (7:0)
| [ 0:01] ## DMTREE:   @PREFIX@pv3 (253:4)
| [ 0:01] ## DMTREE:    `- (7:0)
| [ 0:01] ## DMTREE:   @PREFIX@pv2 (253:3)
| [ 0:01] ## DMTREE:    `- (7:0)
| [ 0:01] ## DMTREE:   @PREFIX@pv1 (253:6)
| [ 0:01] ## DMTREE:    `- (7:0)
| [ 0:01] ## DMTREE:   LFS_vg-lfs (253:2)
| [ 0:01] ## DMTREE:    `- (8:16)
| [ 0:01] ## DMTREE:   centos-swap (253:1)
| [ 0:01] ## DMTREE:    `- (8:2)
| [ 0:01] ## DMTREE:   centos-root (253:0)
| [ 0:01] ## DMTREE:    `- (8:2)
| [ 0:01] <======== Recursive list of @TESTDIR@/dev ========>
| [ 0:01] ## LSLR:	@TESTDIR@/dev:
| [ 0:01] ## LSLR:	total 4
| [ 0:01] ## LSLR:	brw-r--r-- 1 root root 7, 0 Feb 21 02:27 loop0
| [ 0:01] ## LSLR:	brw-r--r-- 1 root root 7, 1 Feb 21 02:27 loop1
| [ 0:01] ## LSLR:	brw-r--r-- 1 root root 7, 2 Feb 21 02:27 loop2
| [ 0:01] ## LSLR:	brw-r--r-- 1 root root 7, 3 Feb 21 02:27 loop3
| [ 0:01] ## LSLR:	brw-r--r-- 1 root root 7, 4 Feb 21 02:27 loop4
| [ 0:01] ## LSLR:	brw-r--r-- 1 root root 7, 5 Feb 21 02:27 loop5
| [ 0:01] ## LSLR:	brw-r--r-- 1 root root 7, 6 Feb 21 02:27 loop6
| [ 0:01] ## LSLR:	brw-r--r-- 1 root root 7, 7 Feb 21 02:27 loop7
| [ 0:01] ## LSLR:	drwxr-xr-x 2 root root 4096 Feb 21 02:27 mapper
| [ 0:01] ## LSLR:	crw-r--r-- 1 root root 1, 3 Feb 21 02:27 testnull
| [ 0:01] ## LSLR:	
| [ 0:01] ## LSLR:	@TESTDIR@/dev/mapper:
| [ 0:01] ## LSLR:	total 0
| [ 0:01] ## LSLR:	brw------- 1 root root 253,   6 Feb 21 02:27 @PREFIX@pv1
| [ 0:01] ## LSLR:	brw------- 1 root root 253,   3 Feb 21 02:27 @PREFIX@pv2
| [ 0:01] ## LSLR:	brw------- 1 root root 253,   4 Feb 21 02:27 @PREFIX@pv3
| [ 0:01] ## LSLR:	brw------- 1 root root 253,   5 Feb 21 02:27 @PREFIX@pv4
| [ 0:01] ## LSLR:	crw------- 1 root root  10, 236 Feb 21 02:27 control
| [ 0:01] <======== Udev DB content ========>
| [ 0:01] ## UDEV:	P: /devices/virtual/block/dm-0
| [ 0:01] ## UDEV:	N: dm-0
| [ 0:01] ## UDEV:	E: DEVNAME=/dev/dm-0
| [ 0:01] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-0
| [ 0:01] ## UDEV:	E: DEVTYPE=disk
| [ 0:01] ## UDEV:	E: MAJOR=253
| [ 0:01] ## UDEV:	E: MINOR=0
| [ 0:01] ## UDEV:	E: SUBSYSTEM=block
| [ 0:01] ## UDEV:	
| [ 0:01] ## UDEV:	P: /devices/virtual/block/dm-1
| [ 0:01] ## UDEV:	N: dm-1
| [ 0:01] ## UDEV:	E: DEVNAME=/dev/dm-1
| [ 0:01] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-1
| [ 0:01] ## UDEV:	E: DEVTYPE=disk
| [ 0:01] ## UDEV:	E: MAJOR=253
| [ 0:01] ## UDEV:	E: MINOR=1
| [ 0:01] ## UDEV:	E: SUBSYSTEM=block
| [ 0:01] ## UDEV:	
| [ 0:01] ## UDEV:	P: /devices/virtual/block/dm-2
| [ 0:01] ## UDEV:	N: dm-2
| [ 0:01] ## UDEV:	E: DEVNAME=/dev/dm-2
| [ 0:01] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-2
| [ 0:01] ## UDEV:	E: DEVTYPE=disk
| [ 0:01] ## UDEV:	E: MAJOR=253
| [ 0:01] ## UDEV:	E: MINOR=2
| [ 0:01] ## UDEV:	E: SUBSYSTEM=block
| [ 0:01] ## UDEV:	
| [ 0:01] ## UDEV:	P: /devices/virtual/block/dm-3
| [ 0:01] ## UDEV:	N: dm-3
| [ 0:01] ## UDEV:	E: DEVNAME=/dev/dm-3
| [ 0:01] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-3
| [ 0:01] ## UDEV:	E: DEVTYPE=disk
| [ 0:01] ## UDEV:	E: MAJOR=253
| [ 0:01] ## UDEV:	E: MINOR=3
| [ 0:01] ## UDEV:	E: SUBSYSTEM=block
| [ 0:01] ## UDEV:	
| [ 0:01] ## UDEV:	P: /devices/virtual/block/dm-4
| [ 0:01] ## UDEV:	N: dm-4
| [ 0:01] ## UDEV:	E: DEVNAME=/dev/dm-4
| [ 0:01] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-4
| [ 0:01] ## UDEV:	E: DEVTYPE=disk
| [ 0:01] ## UDEV:	E: MAJOR=253
| [ 0:01] ## UDEV:	E: MINOR=4
| [ 0:01] ## UDEV:	E: SUBSYSTEM=block
| [ 0:01] ## UDEV:	
| [ 0:01] ## UDEV:	P: /devices/virtual/block/dm-5
| [ 0:01] ## UDEV:	N: dm-5
| [ 0:01] ## UDEV:	E: DEVNAME=/dev/dm-5
| [ 0:01] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-5
| [ 0:01] ## UDEV:	E: DEVTYPE=disk
| [ 0:01] ## UDEV:	E: MAJOR=253
| [ 0:01] ## UDEV:	E: MINOR=5
| [ 0:01] ## UDEV:	E: SUBSYSTEM=block
| [ 0:01] ## UDEV:	
| [ 0:01] ## UDEV:	P: /devices/virtual/block/dm-6
| [ 0:01] ## UDEV:	N: dm-6
| [ 0:01] ## UDEV:	E: DEVNAME=/dev/dm-6
| [ 0:01] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-6
| [ 0:01] ## UDEV:	E: DEVTYPE=disk
| [ 0:01] ## UDEV:	E: MAJOR=253
| [ 0:01] ## UDEV:	E: MINOR=6
| [ 0:01] ## UDEV:	E: SUBSYSTEM=block
| [ 0:01] ## UDEV:	
| [ 0:01] ## UDEV:	P: /devices/virtual/block/loop0
| [ 0:01] ## UDEV:	N: loop0
| [ 0:01] ## UDEV:	E: DEVNAME=/dev/loop0
| [ 0:01] ## UDEV:	E: DEVPATH=/devices/virtual/block/loop0
| [ 0:01] ## UDEV:	E: DEVTYPE=disk
| [ 0:01] ## UDEV:	E: MAJOR=7
| [ 0:01] ## UDEV:	E: MINOR=0
| [ 0:01] ## UDEV:	E: SUBSYSTEM=block
| [ 0:01] ## UDEV:	
| [ 0:01] <======== Script file "pvcreate-usage.sh" ========>
| [ 0:01] ## Line: 1 	 #!/usr/bin/env bash
| [ 0:01] ## Line: 2 	 
| [ 0:01] ## Line: 3 	 # Copyright (C) 2008 Red Hat, Inc. All rights reserved.
| [ 0:01] ## Line: 4 	 #
| [ 0:01] ## Line: 5 	 # This copyrighted material is made available to anyone wishing to use,
| [ 0:01] ## Line: 6 	 # modify, copy, or redistribute it subject to the terms and conditions
| [ 0:01] ## Line: 7 	 # of the GNU General Public License v.2.
| [ 0:01] ## Line: 8 	 #
| [ 0:01] ## Line: 9 	 # You should have received a copy of the GNU General Public License
| [ 0:01] ## Line: 10 	 # along with this program; if not, write to the Free Software Foundation,
| [ 0:01] ## Line: 11 	 # Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA
| [ 0:01] ## Line: 12 	 
| [ 0:01] ## Line: 13 	 test_description='Test pvcreate option values'
| [ 0:01] ## Line: 14 	 SKIP_WITH_LVMLOCKD=1
| [ 0:01] ## Line: 15 	 SKIP_WITH_LVMPOLLD=1
| [ 0:01] ## Line: 16 	 PAGESIZE=$(getconf PAGESIZE)
| [ 0:01] ## Line: 17 	 # MDA_SIZE_MIN defined in lib/format_text/layout.h
| [ 0:01] ## Line: 18 	 MDA_SIZE_MIN=$(( 8 * PAGESIZE ))
| [ 0:01] ## Line: 19 	 
| [ 0:01] ## Line: 20 	 . lib/inittest
| [ 0:01] ## Line: 21 	 
| [ 0:01] ## Line: 22 	 aux prepare_devs 4
| [ 0:01] ## Line: 23 	 
| [ 0:01] ## Line: 24 	 #COMM 'pvcreate rejects negative setphysicalvolumesize'
| [ 0:01] ## Line: 25 	 not pvcreate --setphysicalvolumesize -1024 "$dev1"
| [ 0:01] ## Line: 26 	 
| [ 0:01] ## Line: 27 	 #COMM 'pvcreate rejects negative metadatasize'
| [ 0:01] ## Line: 28 	 not pvcreate --metadatasize -1024 "$dev1"
| [ 0:01] ## Line: 29 	 
| [ 0:01] ## Line: 30 	 #COMM 'pvcreate rejects metadatasize that is less than minimum size'
| [ 0:01] ## Line: 31 	 not pvcreate --dataalignment $(( MDA_SIZE_MIN / 2 ))b --metadatasize $(( MDA_SIZE_MIN / 2 ))b "$dev1" 2>err
| [ 0:01] ## Line: 32 	 grep "Metadata area size too small" err
| [ 0:01] ## Line: 33 	 
| [ 0:01] ## Line: 34 	 #COMM 'pvcreate accepts metadatasize that is at least the minimum size'
| [ 0:01] ## Line: 35 	 pvcreate --dataalignment ${MDA_SIZE_MIN}b --metadatasize ${MDA_SIZE_MIN}b "$dev1"
| [ 0:01] ## Line: 36 	 
| [ 0:01] ## Line: 37 	 # x. metadatasize 0, defaults to 255
| [ 0:01] ## Line: 38 	 # FIXME: unable to check default value, not in reporting cmds
| [ 0:01] ## Line: 39 	 # should default to 255 according to code
| [ 0:01] ## Line: 40 	 #   check pv_field pv_mda_size 255 
| [ 0:01] ## Line: 41 	 #COMM 'pvcreate accepts metadatasize 0'
| [ 0:01] ## Line: 42 	 pvcreate --metadatasize 0 "$dev1"
| [ 0:01] ## Line: 43 	 pvremove "$dev1"
| [ 0:01] ## Line: 44 	 
| [ 0:01] ## Line: 45 	 #Verify vg_mda_size is smaller pv_mda_size
| [ 0:01] ## Line: 46 	 pvcreate --metadatasize 512k "$dev1"
| [ 0:01] ## Line: 47 	 pvcreate --metadatasize 96k "$dev2"
| [ 0:01] ## Line: 48 	 vgcreate $vg "$dev1" "$dev2"
| [ 0:01] ## Line: 49 	 pvs -o +pv_mda_size
| [ 0:01] ## Line: 50 	 check compare_fields vgs $vg vg_mda_size pvs "$dev2" pv_mda_size
| [ 0:01] ## Line: 51 	 vgremove $vg
| [ 0:01] ## Line: 52 	 
| [ 0:01] ## Line: 53 	 # x. metadatasize too large
| [ 0:01] ## Line: 54 	 # For some reason we allow this, even though there's no room for data?
| [ 0:01] ## Line: 55 	 ##COMM  'pvcreate rejects metadatasize too large' 
| [ 0:01] ## Line: 56 	 #not pvcreate --metadatasize 100000000000000 "$dev1"
| [ 0:01] ## Line: 57 	 
| [ 0:01] ## Line: 58 	 #COMM 'pvcreate rejects metadatacopies < 0'
| [ 0:01] ## Line: 59 	 not pvcreate --metadatacopies -1 "$dev1"
| [ 0:01] ## Line: 60 	 
| [ 0:01] ## Line: 61 	 #COMM 'pvcreate accepts metadatacopies = 0, 1, 2'
| [ 0:01] ## Line: 62 	 for j in metadatacopies pvmetadatacopies
| [ 0:01] ## Line: 63 	 do
| [ 0:01] ## Line: 64 	 pvcreate --$j 0 "$dev1"
| [ 0:01] ## Line: 65 	 pvcreate --$j 1 "$dev2"
| [ 0:01] ## Line: 66 	 pvcreate --$j 2 "$dev3"
| [ 0:01] ## Line: 67 	 check pv_field "$dev1" pv_mda_count 0
| [ 0:01] ## Line: 68 	 check pv_field "$dev2" pv_mda_count 1
| [ 0:01] ## Line: 69 	 check pv_field "$dev3" pv_mda_count 2
| [ 0:01] ## Line: 70 	 pvremove "$dev1" "$dev2" "$dev3"
| [ 0:01] ## Line: 71 	 done
| [ 0:01] ## Line: 72 	 
| [ 0:01] ## Line: 73 	 #COMM 'pvcreate rejects metadatacopies > 2'
| [ 0:01] ## Line: 74 	 not pvcreate --metadatacopies 3 "$dev1"
| [ 0:01] ## Line: 75 	 
| [ 0:01] ## Line: 76 	 #COMM 'pvcreate rejects invalid device'
| [ 0:01] ## Line: 77 	 not pvcreate "$dev1"bogus
| [ 0:01] ## Line: 78 	 
| [ 0:01] ## Line: 79 	 #COMM 'pvcreate rejects labelsector < 0'
| [ 0:01] ## Line: 80 	 not pvcreate --labelsector -1 "$dev1"
| [ 0:01] ## Line: 81 	 
| [ 0:01] ## Line: 82 	 #COMM 'pvcreate rejects labelsector > 1000000000000'
| [ 0:01] ## Line: 83 	 not pvcreate --labelsector 1000000000000 "$dev1"
| [ 0:01] ## Line: 84 	 
| [ 0:01] ## Line: 85 	 # other possibilites based on code inspection (not sure how hard)
| [ 0:01] ## Line: 86 	 # x. device too small (min of 512 * 1024 KB)
| [ 0:01] ## Line: 87 	 # x. device filtered out
| [ 0:01] ## Line: 88 	 # x. unable to open /dev/urandom RDONLY
| [ 0:01] ## Line: 89 	 # x. device too large (pe_count > UINT32_MAX)
| [ 0:01] ## Line: 90 	 # x. device read-only
| [ 0:01] ## Line: 91 	 # x. unable to open device readonly
| [ 0:01] ## Line: 92 	 # x. BLKGETSIZE64 fails
| [ 0:01] ## Line: 93 	 # x. set size to value inconsistent with device / PE size
| [ 0:01] ## Line: 94 	 
| [ 0:01] ## Line: 95 	 #COMM 'pvcreate basic dataalignment sanity checks'
| [ 0:01] ## Line: 96 	 not pvcreate --dataalignment -1 "$dev1"
| [ 0:01] ## Line: 97 	 not pvcreate --dataalignment 1e "$dev1"
| [ 0:01] ## Line: 98 	 if test -n "$LVM_TEST_LVM1" ; then
| [ 0:01] ## Line: 99 	 not pvcreate -M1 --dataalignment 1 "$dev1"
| [ 0:01] ## Line: 100 	 fi
| [ 0:01] ## Line: 101 	 
| [ 0:01] ## Line: 102 	 #COMM 'pvcreate always rounded up to page size for start of device'
| [ 0:01] ## Line: 103 	 #pvcreate --metadatacopies 0 --dataalignment 1 "$dev1"
| [ 0:01] ## Line: 104 	 # amuse shell experts
| [ 0:01] ## Line: 105 	 #check pv_field "$dev1" pe_start $(($(getconf PAGESIZE)/1024))".00k"
| [ 0:01] ## Line: 106 	 
| [ 0:01] ## Line: 107 	 #COMM 'pvcreate sets data offset directly'
| [ 0:01] ## Line: 108 	 pvcreate --dataalignment 512k "$dev1"
| [ 0:01] ## Line: 109 	 check pv_field "$dev1" pe_start "512.00k"
| [ 0:01] ## Line: 110 	 
| [ 0:01] ## Line: 111 	 #COMM 'vgcreate/vgremove do not modify data offset of existing PV'
| [ 0:01] ## Line: 112 	 vgcreate $vg "$dev1"  --config 'devices { data_alignment = 1024 }'
| [ 0:01] ## Line: 113 	 check pv_field "$dev1" pe_start "512.00k"
| [ 0:01] ## Line: 114 	 vgremove $vg --config 'devices { data_alignment = 1024 }'
| [ 0:01] ## Line: 115 	 check pv_field "$dev1" pe_start "512.00k"
| [ 0:01] ## Line: 116 	 
| [ 0:01] ## Line: 117 	 #COMM 'pvcreate sets data offset next to mda area'
| [ 0:01] ## Line: 118 	 pvcreate --metadatasize 100k --dataalignment 100k "$dev1"
| [ 0:01] ## Line: 119 	 check pv_field "$dev1" pe_start "200.00k"
| [ 0:01] ## Line: 120 	 
| [ 0:01] ## Line: 121 	 # metadata area start is aligned according to pagesize
| [ 0:01] ## Line: 122 	 case "$PAGESIZE" in
| [ 0:01] ## Line: 123 	  65536) pv_align="192.50k" ;;
| [ 0:01] ## Line: 124 	  8192)	pv_align="136.50k" ;;
| [ 0:01] ## Line: 125 	  *)	pv_align="133.00k" ;;
| [ 0:01] ## Line: 126 	 esac
| [ 0:01] ## Line: 127 	 
| [ 0:01] ## Line: 128 	 pvcreate --metadatasize 128k --dataalignment 3.5k "$dev1"
| [ 0:01] ## Line: 129 	 check pv_field "$dev1" pe_start $pv_align
| [ 0:01] ## Line: 130 	 
| [ 0:01] ## Line: 131 	 pvcreate --metadatasize 128k --metadatacopies 2 --dataalignment 3.5k "$dev1"
| [ 0:01] ## Line: 132 	 check pv_field "$dev1" pe_start $pv_align
| [ 0:01] ## Line: 133 	 
| [ 0:01] ## Line: 134 	 # data area is aligned to 1M by default,
| [ 0:01] ## Line: 135 	 # data area start is shifted by the specified alignment_offset
| [ 0:01] ## Line: 136 	 pv_align=1052160B # 1048576 + (7*512)
| [ 0:01] ## Line: 137 	 pvcreate --metadatasize 128k --dataalignmentoffset 7s "$dev1"
| [ 0:01] ## Line: 138 	 check pv_field "$dev1" pe_start $pv_align --units b
| [ 0:01] ## Line: 139 	 
| [ 0:01] ## Line: 140 	 # 2nd metadata area is created without problems when
| [ 0:01] ## Line: 141 	 # data area start is shifted by the specified alignment_offset
| [ 0:01] ## Line: 142 	 pvcreate --metadatasize 128k --metadatacopies 2 --dataalignmentoffset 7s "$dev1"
| [ 0:01] ## Line: 143 	 check pv_field "$dev1" pv_mda_count 2
| [ 0:01] ## Line: 144 	 # FIXME: compare start of 2nd mda with and without --dataalignmentoffset
| [ 0:01] ## Line: 145 	 
| [ 0:01] ## Line: 146 	 #COMM 'pv with LVM1 compatible data alignment can be convereted'
| [ 0:01] ## Line: 147 	 #compatible == LVM1_PE_ALIGN == 64k
| [ 0:01] ## Line: 148 	 if test -n "$LVM_TEST_LVM1" ; then
| [ 0:01] ## Line: 149 	 pvcreate --dataalignment 256k "$dev1"
| [ 0:01] ## Line: 150 	 vgcreate -s 1m $vg "$dev1"
| [ 0:01] ## Line: 151 	 vgconvert -M1 $vg
| [ 0:01] ## Line: 152 	 vgconvert -M2 $vg
| [ 0:01] ## Line: 153 	 check pv_field "$dev1" pe_start 256.00k
| [ 0:01] ## Line: 154 	 vgremove $vg
| [ 0:01] ## Line: 155 	 fi
| [ 0:01] ## Line: 156 	 
| [ 0:01] ## Line: 157 	 #COMM 'pv with LVM1 incompatible data alignment cannot be convereted'
| [ 0:01] ## Line: 158 	 if test -n "$LVM_TEST_LVM1" ; then
| [ 0:01] ## Line: 159 	 pvcreate --dataalignment 10k "$dev1"
| [ 0:01] ## Line: 160 	 vgcreate -s 1m $vg "$dev1"
| [ 0:01] ## Line: 161 	 not vgconvert -M1 $vg
| [ 0:01] ## Line: 162 	 vgremove $vg
| [ 0:01] ## Line: 163 	 fi
| [ 0:01] ## Line: 164 	 
| [ 0:01] ## Line: 165 	 #COMM 'vgcfgrestore allows pe_start=0'
| [ 0:01] ## Line: 166 	 #basically it produces nonsense, but it tests vgcfgrestore,
| [ 0:01] ## Line: 167 	 #not that final cfg is usable...
| [ 0:01] ## Line: 168 	 pvcreate --metadatacopies 0 "$dev1"
| [ 0:01] ## Line: 169 	 pvcreate "$dev2"
| [ 0:01] ## Line: 170 	 vgcreate $vg "$dev1" "$dev2"
| [ 0:01] ## Line: 171 	 vgcfgbackup -f backup.$$ $vg
| [ 0:01] ## Line: 172 	 sed 's/pe_start = [0-9]*/pe_start = 0/' backup.$$ > backup.$$1
| [ 0:01] ## Line: 173 	 vgcfgrestore -f backup.$$1 $vg
| [ 0:01] ## Line: 174 	 check pv_field "$dev1" pe_start "0"
| [ 0:01] ## Line: 175 	 check pv_field "$dev2" pe_start "0"
| [ 0:01] ## Line: 176 	 vgremove $vg
| [ 0:01] ## Line: 177 	 
| [ 0:01] ## Line: 178 	 echo "test pvcreate --metadataignore"
| [ 0:01] ## Line: 179 	 for pv_in_vg in 1 0; do
| [ 0:01] ## Line: 180 	 for mdacp in 1 2; do
| [ 0:01] ## Line: 181 	 for ignore in y n; do
| [ 0:01] ## Line: 182 	 	echo "pvcreate --metadataignore has proper mda_count and mda_used_count"
| [ 0:01] ## Line: 183 	 	pvcreate --metadatacopies $mdacp --metadataignore $ignore "$dev1" "$dev2"
| [ 0:01] ## Line: 184 	 	check pv_field "$dev1" pv_mda_count "$mdacp"
| [ 0:01] ## Line: 185 	 	check pv_field "$dev2" pv_mda_count "$mdacp"
| [ 0:01] ## Line: 186 	 	if [ $ignore = y ]; then
| [ 0:01] ## Line: 187 	 		check pv_field "$dev1" pv_mda_used_count "0"
| [ 0:01] ## Line: 188 	 		check pv_field "$dev2" pv_mda_used_count "0"
| [ 0:01] ## Line: 189 	 	else
| [ 0:01] ## Line: 190 	 		check pv_field "$dev1" pv_mda_used_count "$mdacp"
| [ 0:01] ## Line: 191 	 		check pv_field "$dev2" pv_mda_used_count "$mdacp"
| [ 0:01] ## Line: 192 	 	fi
| [ 0:01] ## Line: 193 	 	echo "vgcreate has proper vg_mda_count and vg_mda_used_count"
| [ 0:01] ## Line: 194 	 	if [ $pv_in_vg = 1 ]; then
| [ 0:01] ## Line: 195 	 		vgcreate $vg "$dev1" "$dev2"
| [ 0:01] ## Line: 196 	 		check vg_field $vg vg_mda_count $(( mdacp * 2 ))
| [ 0:01] ## Line: 197 	 		if [ $ignore = y ]; then
| [ 0:01] ## Line: 198 	 			check vg_field $vg vg_mda_used_count "1"
| [ 0:01] ## Line: 199 	 		else
| [ 0:01] ## Line: 200 	 			check vg_field $vg vg_mda_used_count "$(( mdacp * 2 ))"
| [ 0:01] ## Line: 201 	 		fi
| [ 0:01] ## Line: 202 	 		check vg_field $vg vg_mda_copies "unmanaged"
| [ 0:01] ## Line: 203 	 		vgremove $vg
| [ 0:01] ## Line: 204 	 	fi
| [ 0:01] ## Line: 205 	 done
| [ 0:01] ## Line: 206 	 done
| [ 0:01] ## Line: 207 	 done
| [ 0:01] aux teardown
| [ 0:01] #pvcreate-usage.sh:1+ aux teardown
| [ 0:01] ## teardown.........ok
###       failed: [ndev-vanilla] shell/pvcreate-usage.sh

| [ 0:00] Library version:   1.02.146 (2017-12-18)
| [ 0:00] Driver version:    4.35.0
| [ 0:00] Kernel is Linux localhost.localdomain 3.10.0-693.11.1.el7.x86_64 #1 SMP Mon Dec 4 23:52:40 UTC 2017 x86_64 GNU/Linux
| [ 0:00] Selinux mode is not installed.
| [ 0:00]               total        used        free      shared  buff/cache   available
| [ 0:00] Mem:           7822        1080        4144          10        2598        6435
| [ 0:00] Swap:          4095           0        4095
| [ 0:00] Filesystem      Size  Used Avail Use% Mounted on
| [ 0:00] /dev/sdc1        18G  8.4G  8.4G  50% /
| [ 0:00] /dev/sdd1        51G  6.1G   43G  13% /lfskernel
| [ 0:00] devtmpfs        3.9G     0  3.9G   0% /dev
| [ 0:00] tmpfs           3.9G     0  3.9G   0% /run
| [ 0:00] @TESTDIR=/tmp/LVMTEST17763.XwhjvlCyA6
| [ 0:00] @PREFIX=LVMTEST17763
| [ 0:00] ## LVMCONF: activation {
| [ 0:00] ## LVMCONF:     checks = 1
| [ 0:00] ## LVMCONF:     monitoring = 0
| [ 0:00] ## LVMCONF:     polling_interval = 1
| [ 0:00] ## LVMCONF:     raid_region_size = 512
| [ 0:00] ## LVMCONF:     retry_deactivation = 1
| [ 0:00] ## LVMCONF:     snapshot_autoextend_percent = 50
| [ 0:00] ## LVMCONF:     snapshot_autoextend_threshold = 50
| [ 0:00] ## LVMCONF:     udev_rules = 1
| [ 0:00] ## LVMCONF:     udev_sync = 1
| [ 0:00] ## LVMCONF:     verify_udev_operations = 1
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: allocation {
| [ 0:00] ## LVMCONF:     wipe_signatures_when_zeroing_new_lvs = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: backup {
| [ 0:00] ## LVMCONF:     archive = 0
| [ 0:00] ## LVMCONF:     backup = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: devices {
| [ 0:00] ## LVMCONF:     cache_dir = "@TESTDIR@/etc"
| [ 0:00] ## LVMCONF:     default_data_alignment = 1
| [ 0:00] ## LVMCONF:     dir = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     filter = "a|.*|"
| [ 0:00] ## LVMCONF:     global_filter = [ "a|@TESTDIR@/dev/mapper/@PREFIX@.*pv[0-9_]*$|", "r|.*|" ]
| [ 0:00] ## LVMCONF:     md_component_detection  = 0
| [ 0:00] ## LVMCONF:     scan = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     sysfs_scan = 1
| [ 0:00] ## LVMCONF:     write_cache_state = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: dmeventd {
| [ 0:00] ## LVMCONF:     executable = "/sources/boot/LVM2.2.02.177/test/lib/dmeventd"
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: global {
| [ 0:00] ## LVMCONF:     abort_on_internal_errors = 1
| [ 0:00] ## LVMCONF:     cache_check_executable = "/usr/sbin/cache_check"
| [ 0:00] ## LVMCONF:     cache_dump_executable = "/usr/sbin/cache_dump"
| [ 0:00] ## LVMCONF:     cache_repair_executable = "/usr/sbin/cache_repair"
| [ 0:00] ## LVMCONF:     detect_internal_vg_cache_corruption = 1
| [ 0:00] ## LVMCONF:     fallback_to_local_locking = 0
| [ 0:00] ## LVMCONF:     fsadm_executable = "/sources/boot/LVM2.2.02.177/test/lib/fsadm"
| [ 0:00] ## LVMCONF:     library_dir = "@TESTDIR@/lib"
| [ 0:00] ## LVMCONF:     locking_dir = "@TESTDIR@/var/lock/lvm"
| [ 0:00] ## LVMCONF:     locking_type=1
| [ 0:00] ## LVMCONF:     notify_dbus = 0
| [ 0:00] ## LVMCONF:     si_unit_consistency = 1
| [ 0:00] ## LVMCONF:     thin_check_executable = "/usr/sbin/thin_check"
| [ 0:00] ## LVMCONF:     thin_dump_executable = "/usr/sbin/thin_dump"
| [ 0:00] ## LVMCONF:     thin_repair_executable = "/usr/sbin/thin_repair"
| [ 0:00] ## LVMCONF:     use_lvmetad = 0
| [ 0:00] ## LVMCONF:     use_lvmlockd = 0
| [ 0:00] ## LVMCONF:     use_lvmpolld = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: log {
| [ 0:00] ## LVMCONF:     activation = 1
| [ 0:00] ## LVMCONF:     file = "@TESTDIR@/debug.log"
| [ 0:00] ## LVMCONF:     indent = 1
| [ 0:00] ## LVMCONF:     level = 9
| [ 0:00] ## LVMCONF:     overwrite = 1
| [ 0:00] ## LVMCONF:     syslog = 0
| [ 0:00] ## LVMCONF:     verbose = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] <======== Processing test: "pvmove-abort-all.sh" ========>
| [ 0:00] 
| [ 0:00] aux prepare_pvs 6 60
| [ 0:00] #pvmove-abort-all.sh:23+ aux prepare_pvs 6 60
| [ 0:00] ## preparing loop device....ok (/dev/loop0)
| [ 0:00] ## preparing 6 devices...lib/utils: line 212: DM_UDEV_COOKIE: unbound variable
| [ 0:00] set +vx; STACKTRACE; set -vx
| [ 0:00] ##pvmove-abort-all.sh:23+ set +vx
| [ 0:00] ## - /lfskernel/sources/boot/LVM2.2.02.177/test/shell/pvmove-abort-all.sh:23
| [ 0:00] ## 1 STACKTRACE() called from /lfskernel/sources/boot/LVM2.2.02.177/test/shell/pvmove-abort-all.sh:23
| [ 0:00] <======== Info ========>
| [ 0:00] ## DMINFO:   Name             Maj Min Stat Open Targ Event  UUID                                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv6  253   4 L--w    0    1      0 TEST-@PREFIX@pv6                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv5  253   8 L--w    0    1      0 TEST-@PREFIX@pv5                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv4  253   6 L--w    0    1      0 TEST-@PREFIX@pv4                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv3  253   5 L--w    0    1      0 TEST-@PREFIX@pv3                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv2  253   3 L--w    0    1      0 TEST-@PREFIX@pv2                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv1  253   7 L--w    0    1      0 TEST-@PREFIX@pv1                                                
| [ 0:00] <======== Active table ========>
| [ 0:00] ## DMTABLE:  @PREFIX@pv6: 0 122880 linear 7:0 616448
| [ 0:00] ## DMTABLE:  @PREFIX@pv5: 0 122880 linear 7:0 493568
| [ 0:00] ## DMTABLE:  @PREFIX@pv4: 0 122880 linear 7:0 370688
| [ 0:00] ## DMTABLE:  @PREFIX@pv3: 0 122880 linear 7:0 247808
| [ 0:00] ## DMTABLE:  @PREFIX@pv2: 0 122880 linear 7:0 124928
| [ 0:00] ## DMTABLE:  @PREFIX@pv1: 0 122880 linear 7:0 2048
| [ 0:00] <======== Inactive table ========>
| [ 0:00] ## DMITABLE: @PREFIX@pv6: 
| [ 0:00] ## DMITABLE: @PREFIX@pv5: 
| [ 0:00] ## DMITABLE: @PREFIX@pv4: 
| [ 0:00] ## DMITABLE: @PREFIX@pv3: 
| [ 0:00] ## DMITABLE: @PREFIX@pv2: 
| [ 0:00] ## DMITABLE: @PREFIX@pv1: 
| [ 0:00] <======== Status ========>
| [ 0:00] ## DMSTATUS: @PREFIX@pv6: 0 122880 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv5: 0 122880 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv4: 0 122880 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv3: 0 122880 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv2: 0 122880 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv1: 0 122880 linear 
| [ 0:00] <======== Tree ========>
| [ 0:00] ## DMTREE:   @PREFIX@pv6 (253:4)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   @PREFIX@pv5 (253:8)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   @PREFIX@pv4 (253:6)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   @PREFIX@pv3 (253:5)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   @PREFIX@pv2 (253:3)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   LFS_vg-lfs (253:2)
| [ 0:00] ## DMTREE:    `- (8:16)
| [ 0:00] ## DMTREE:   centos-swap (253:1)
| [ 0:00] ## DMTREE:    `- (8:2)
| [ 0:00] ## DMTREE:   centos-root (253:0)
| [ 0:00] ## DMTREE:    `- (8:2)
| [ 0:00] ## DMTREE:   @PREFIX@pv1 (253:7)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] <======== Recursive list of @TESTDIR@/dev ========>
| [ 0:00] ## LSLR:	@TESTDIR@/dev:
| [ 0:00] ## LSLR:	total 4
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 0 Feb 21 02:27 loop0
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 1 Feb 21 02:27 loop1
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 2 Feb 21 02:27 loop2
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 3 Feb 21 02:27 loop3
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 4 Feb 21 02:27 loop4
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 5 Feb 21 02:27 loop5
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 6 Feb 21 02:27 loop6
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 7 Feb 21 02:27 loop7
| [ 0:00] ## LSLR:	drwxr-xr-x 2 root root 4096 Feb 21 02:27 mapper
| [ 0:00] ## LSLR:	crw-r--r-- 1 root root 1, 3 Feb 21 02:27 testnull
| [ 0:00] ## LSLR:	
| [ 0:00] ## LSLR:	@TESTDIR@/dev/mapper:
| [ 0:00] ## LSLR:	total 0
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   7 Feb 21 02:27 @PREFIX@pv1
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   3 Feb 21 02:27 @PREFIX@pv2
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   5 Feb 21 02:27 @PREFIX@pv3
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   6 Feb 21 02:27 @PREFIX@pv4
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   8 Feb 21 02:27 @PREFIX@pv5
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   4 Feb 21 02:27 @PREFIX@pv6
| [ 0:00] ## LSLR:	crw------- 1 root root  10, 236 Feb 21 02:27 control
| [ 0:00] <======== Udev DB content ========>
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-0
| [ 0:00] ## UDEV:	N: dm-0
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-0
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-0
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=0
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-1
| [ 0:00] ## UDEV:	N: dm-1
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-1
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-1
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=1
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-2
| [ 0:00] ## UDEV:	N: dm-2
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-2
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-2
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=2
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-3
| [ 0:00] ## UDEV:	N: dm-3
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-3
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-3
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=3
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-4
| [ 0:00] ## UDEV:	N: dm-4
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-4
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-4
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=4
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-5
| [ 0:00] ## UDEV:	N: dm-5
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-5
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-5
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=5
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-6
| [ 0:00] ## UDEV:	N: dm-6
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-6
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-6
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=6
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-7
| [ 0:00] ## UDEV:	N: dm-7
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-7
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-7
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=7
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-8
| [ 0:00] ## UDEV:	N: dm-8
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-8
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-8
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=8
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/loop0
| [ 0:00] ## UDEV:	N: loop0
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/loop0
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/loop0
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=7
| [ 0:00] ## UDEV:	E: MINOR=0
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] <======== Script file "pvmove-abort-all.sh" ========>
| [ 0:00] ## Line: 1 	 #!/usr/bin/env bash
| [ 0:00] ## Line: 2 	 
| [ 0:00] ## Line: 3 	 # Copyright (C) 2015 Red Hat, Inc. All rights reserved.
| [ 0:00] ## Line: 4 	 #
| [ 0:00] ## Line: 5 	 # This copyrighted material is made available to anyone wishing to use,
| [ 0:00] ## Line: 6 	 # modify, copy, or redistribute it subject to the terms and conditions
| [ 0:00] ## Line: 7 	 # of the GNU General Public License v.2.
| [ 0:00] ## Line: 8 	 #
| [ 0:00] ## Line: 9 	 # You should have received a copy of the GNU General Public License
| [ 0:00] ## Line: 10 	 # along with this program; if not, write to the Free Software Foundation,
| [ 0:00] ## Line: 11 	 # Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA
| [ 0:00] ## Line: 12 	 
| [ 0:00] ## Line: 13 	 # Check pvmove --abort behaviour for all VGs and PVs
| [ 0:00] ## Line: 14 	 
| [ 0:00] ## Line: 15 	 SKIP_WITH_LVMLOCKD=1
| [ 0:00] ## Line: 16 	 
| [ 0:00] ## Line: 17 	 # Ignore known failure when clvmd is processing sequences of commands for two VGs in parallel - 2015/07/17 agk
| [ 0:00] ## Line: 18 	 # CLVMD: ioctl/libdm-iface.c:1940   Internal error: Performing unsafe table load while 3 device(s) are known to be suspended:  (253:19) 
| [ 0:00] ## Line: 19 	 export DM_ABORT_ON_INTERNAL_ERRORS=0
| [ 0:00] ## Line: 20 	 
| [ 0:00] ## Line: 21 	 . lib/inittest
| [ 0:00] ## Line: 22 	 
| [ 0:00] ## Line: 23 	 aux prepare_pvs 6 60
| [ 0:00] ## Line: 24 	 
| [ 0:00] ## Line: 25 	 vgcreate -s 128k $vg "$dev1" "$dev2"
| [ 0:00] ## Line: 26 	 pvcreate --metadatacopies 0 "$dev3"
| [ 0:00] ## Line: 27 	 vgextend $vg "$dev3"
| [ 0:00] ## Line: 28 	 vgcreate -s 128k $vg1 "$dev4" "$dev5"
| [ 0:00] ## Line: 29 	 pvcreate --metadatacopies 0 "$dev6"
| [ 0:00] ## Line: 30 	 vgextend $vg1 "$dev6"
| [ 0:00] ## Line: 31 	 
| [ 0:00] ## Line: 32 	 # Slowdown writes
| [ 0:00] ## Line: 33 	 aux delay_dev "$dev3" 0 800 "$(get first_extent_sector "$dev3"):"
| [ 0:00] ## Line: 34 	 aux delay_dev "$dev6" 0 800 "$(get first_extent_sector "$dev6"):"
| [ 0:00] ## Line: 35 	 
| [ 0:00] ## Line: 36 	 for mode in "--atomic" "" ;
| [ 0:00] ## Line: 37 	 do
| [ 0:00] ## Line: 38 	 for backgroundarg in "-b" "" ;
| [ 0:00] ## Line: 39 	 do
| [ 0:00] ## Line: 40 	 
| [ 0:00] ## Line: 41 	 # Create multisegment LV
| [ 0:00] ## Line: 42 	 lvcreate -an -Zn -l30 -n $lv1 $vg "$dev1"
| [ 0:00] ## Line: 43 	 lvcreate -an -Zn -l30 -n $lv2 $vg "$dev2"
| [ 0:00] ## Line: 44 	 lvcreate -an -Zn -l30 -n $lv1 $vg1 "$dev4"
| [ 0:00] ## Line: 45 	 lvextend -l+30 -n $vg1/$lv1 "$dev5"
| [ 0:00] ## Line: 46 	 
| [ 0:00] ## Line: 47 	 cmd1=(pvmove -i1 $backgroundarg $mode "$dev1" "$dev3")
| [ 0:00] ## Line: 48 	 cmd2=(pvmove -i1 $backgroundarg $mode "$dev2" "$dev3")
| [ 0:00] ## Line: 49 	 cmd3=(pvmove -i1 $backgroundarg $mode -n $vg1/$lv1 "$dev4" "$dev6")
| [ 0:00] ## Line: 50 	 
| [ 0:00] ## Line: 51 	 if test -e HAVE_DM_DELAY; then
| [ 0:00] ## Line: 52 	 
| [ 0:00] ## Line: 53 	 if test -z "$backgroundarg" ; then
| [ 0:00] ## Line: 54 	 	"${cmd1[@]}" &
| [ 0:00] ## Line: 55 	 	aux wait_pvmove_lv_ready "$vg-pvmove0"
| [ 0:00] ## Line: 56 	 	"${cmd2[@]}" &
| [ 0:00] ## Line: 57 	 	aux wait_pvmove_lv_ready "$vg-pvmove1"
| [ 0:00] ## Line: 58 	 	"${cmd3[@]}" &
| [ 0:00] ## Line: 59 	 	aux wait_pvmove_lv_ready "$vg1-pvmove0"
| [ 0:00] ## Line: 60 	         lvs -a $vg $vg1
| [ 0:00] ## Line: 61 	 else
| [ 0:00] ## Line: 62 	 	LVM_TEST_TAG="kill_me_$PREFIX" "${cmd1[@]}"
| [ 0:00] ## Line: 63 	 	LVM_TEST_TAG="kill_me_$PREFIX" "${cmd2[@]}"
| [ 0:00] ## Line: 64 	 	LVM_TEST_TAG="kill_me_$PREFIX" "${cmd3[@]}"
| [ 0:00] ## Line: 65 	 fi
| [ 0:00] ## Line: 66 	 
| [ 0:00] ## Line: 67 	 fi
| [ 0:00] ## Line: 68 	 
| [ 0:00] ## Line: 69 	 # test removal of all pvmove LVs
| [ 0:00] ## Line: 70 	 pvmove --abort
| [ 0:00] ## Line: 71 	 
| [ 0:00] ## Line: 72 	 # check if proper pvmove was canceled
| [ 0:00] ## Line: 73 	 get lv_field $vg name -a | tee out
| [ 0:00] ## Line: 74 	 not grep "^\[pvmove" out
| [ 0:00] ## Line: 75 	 get lv_field $vg1 name -a | tee out
| [ 0:00] ## Line: 76 	 not grep "^\[pvmove" out
| [ 0:00] ## Line: 77 	 
| [ 0:00] ## Line: 78 	 lvremove -ff $vg $vg1
| [ 0:00] ## Line: 79 	 
| [ 0:00] ## Line: 80 	 wait
| [ 0:00] ## Line: 81 	 aux kill_tagged_processes
| [ 0:00] ## Line: 82 	 done
| [ 0:00] ## Line: 83 	 done
| [ 0:00] ## Line: 84 	 
| [ 0:00] ## Line: 85 	 # Restore delayed device back
| [ 0:00] ## Line: 86 	 aux enable_dev "$dev3" "$dev6"
| [ 0:00] ## Line: 87 	 
| [ 0:00] ## Line: 88 	 vgremove -ff $vg $vg1
| [ 0:00] aux teardown
| [ 0:00] #pvmove-abort-all.sh:1+ aux teardown
| [ 0:00] ## teardown.........ok
###       failed: [ndev-vanilla] shell/pvmove-abort-all.sh

| [ 0:00] Library version:   1.02.146 (2017-12-18)
| [ 0:00] Driver version:    4.35.0
| [ 0:00] Kernel is Linux localhost.localdomain 3.10.0-693.11.1.el7.x86_64 #1 SMP Mon Dec 4 23:52:40 UTC 2017 x86_64 GNU/Linux
| [ 0:00] Selinux mode is not installed.
| [ 0:00]               total        used        free      shared  buff/cache   available
| [ 0:00] Mem:           7822        1080        4144          10        2598        6435
| [ 0:00] Swap:          4095           0        4095
| [ 0:00] Filesystem      Size  Used Avail Use% Mounted on
| [ 0:00] /dev/sdc1        18G  8.4G  8.4G  50% /
| [ 0:00] /dev/sdd1        51G  6.1G   43G  13% /lfskernel
| [ 0:00] devtmpfs        3.9G     0  3.9G   0% /dev
| [ 0:00] tmpfs           3.9G     0  3.9G   0% /run
| [ 0:00] @TESTDIR=/tmp/LVMTEST17979.gyq7AcDNnX
| [ 0:00] @PREFIX=LVMTEST17979
| [ 0:00] ## LVMCONF: activation {
| [ 0:00] ## LVMCONF:     checks = 1
| [ 0:00] ## LVMCONF:     monitoring = 0
| [ 0:00] ## LVMCONF:     polling_interval = 1
| [ 0:00] ## LVMCONF:     raid_region_size = 512
| [ 0:00] ## LVMCONF:     retry_deactivation = 1
| [ 0:00] ## LVMCONF:     snapshot_autoextend_percent = 50
| [ 0:00] ## LVMCONF:     snapshot_autoextend_threshold = 50
| [ 0:00] ## LVMCONF:     udev_rules = 1
| [ 0:00] ## LVMCONF:     udev_sync = 1
| [ 0:00] ## LVMCONF:     verify_udev_operations = 1
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: allocation {
| [ 0:00] ## LVMCONF:     wipe_signatures_when_zeroing_new_lvs = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: backup {
| [ 0:00] ## LVMCONF:     archive = 0
| [ 0:00] ## LVMCONF:     backup = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: devices {
| [ 0:00] ## LVMCONF:     cache_dir = "@TESTDIR@/etc"
| [ 0:00] ## LVMCONF:     default_data_alignment = 1
| [ 0:00] ## LVMCONF:     dir = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     filter = "a|.*|"
| [ 0:00] ## LVMCONF:     global_filter = [ "a|@TESTDIR@/dev/mapper/@PREFIX@.*pv[0-9_]*$|", "r|.*|" ]
| [ 0:00] ## LVMCONF:     md_component_detection  = 0
| [ 0:00] ## LVMCONF:     scan = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     sysfs_scan = 1
| [ 0:00] ## LVMCONF:     write_cache_state = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: dmeventd {
| [ 0:00] ## LVMCONF:     executable = "/sources/boot/LVM2.2.02.177/test/lib/dmeventd"
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: global {
| [ 0:00] ## LVMCONF:     abort_on_internal_errors = 1
| [ 0:00] ## LVMCONF:     cache_check_executable = "/usr/sbin/cache_check"
| [ 0:00] ## LVMCONF:     cache_dump_executable = "/usr/sbin/cache_dump"
| [ 0:00] ## LVMCONF:     cache_repair_executable = "/usr/sbin/cache_repair"
| [ 0:00] ## LVMCONF:     detect_internal_vg_cache_corruption = 1
| [ 0:00] ## LVMCONF:     fallback_to_local_locking = 0
| [ 0:00] ## LVMCONF:     fsadm_executable = "/sources/boot/LVM2.2.02.177/test/lib/fsadm"
| [ 0:00] ## LVMCONF:     library_dir = "@TESTDIR@/lib"
| [ 0:00] ## LVMCONF:     locking_dir = "@TESTDIR@/var/lock/lvm"
| [ 0:00] ## LVMCONF:     locking_type=1
| [ 0:00] ## LVMCONF:     notify_dbus = 0
| [ 0:00] ## LVMCONF:     si_unit_consistency = 1
| [ 0:00] ## LVMCONF:     thin_check_executable = "/usr/sbin/thin_check"
| [ 0:00] ## LVMCONF:     thin_dump_executable = "/usr/sbin/thin_dump"
| [ 0:00] ## LVMCONF:     thin_repair_executable = "/usr/sbin/thin_repair"
| [ 0:00] ## LVMCONF:     use_lvmetad = 0
| [ 0:00] ## LVMCONF:     use_lvmlockd = 0
| [ 0:00] ## LVMCONF:     use_lvmpolld = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: log {
| [ 0:00] ## LVMCONF:     activation = 1
| [ 0:00] ## LVMCONF:     file = "@TESTDIR@/debug.log"
| [ 0:00] ## LVMCONF:     indent = 1
| [ 0:00] ## LVMCONF:     level = 9
| [ 0:00] ## LVMCONF:     overwrite = 1
| [ 0:00] ## LVMCONF:     syslog = 0
| [ 0:00] ## LVMCONF:     verbose = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] <======== Processing test: "pvmove-abort.sh" ========>
| [ 0:00] 
| [ 0:00] aux prepare_pvs 3 60
| [ 0:00] #pvmove-abort.sh:19+ aux prepare_pvs 3 60
| [ 0:00] ## preparing loop device....ok (/dev/loop0)
| [ 0:00] ## preparing 3 devices...lib/utils: line 212: DM_UDEV_COOKIE: unbound variable
| [ 0:00] set +vx; STACKTRACE; set -vx
| [ 0:00] ##pvmove-abort.sh:19+ set +vx
| [ 0:00] ## - /lfskernel/sources/boot/LVM2.2.02.177/test/shell/pvmove-abort.sh:19
| [ 0:00] ## 1 STACKTRACE() called from /lfskernel/sources/boot/LVM2.2.02.177/test/shell/pvmove-abort.sh:19
| [ 0:00] <======== Info ========>
| [ 0:00] ## DMINFO:   Name             Maj Min Stat Open Targ Event  UUID                                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv1  253   4 L--w    0    1      0 TEST-@PREFIX@pv1                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv3  253   3 L--w    0    1      0 TEST-@PREFIX@pv3                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv2  253   5 L--w    0    1      0 TEST-@PREFIX@pv2                                                
| [ 0:00] <======== Active table ========>
| [ 0:00] ## DMTABLE:  @PREFIX@pv1: 0 122880 linear 7:0 2048
| [ 0:00] ## DMTABLE:  @PREFIX@pv3: 0 122880 linear 7:0 247808
| [ 0:00] ## DMTABLE:  @PREFIX@pv2: 0 122880 linear 7:0 124928
| [ 0:00] <======== Inactive table ========>
| [ 0:00] ## DMITABLE: @PREFIX@pv1: 
| [ 0:00] ## DMITABLE: @PREFIX@pv3: 
| [ 0:00] ## DMITABLE: @PREFIX@pv2: 
| [ 0:00] <======== Status ========>
| [ 0:00] ## DMSTATUS: @PREFIX@pv1: 0 122880 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv3: 0 122880 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv2: 0 122880 linear 
| [ 0:00] <======== Tree ========>
| [ 0:00] ## DMTREE:   @PREFIX@pv1 (253:4)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   @PREFIX@pv3 (253:3)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   LFS_vg-lfs (253:2)
| [ 0:00] ## DMTREE:    `- (8:16)
| [ 0:00] ## DMTREE:   @PREFIX@pv2 (253:5)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   centos-swap (253:1)
| [ 0:00] ## DMTREE:    `- (8:2)
| [ 0:00] ## DMTREE:   centos-root (253:0)
| [ 0:00] ## DMTREE:    `- (8:2)
| [ 0:00] <======== Recursive list of @TESTDIR@/dev ========>
| [ 0:00] ## LSLR:	@TESTDIR@/dev:
| [ 0:00] ## LSLR:	total 4
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 0 Feb 21 02:27 loop0
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 1 Feb 21 02:27 loop1
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 2 Feb 21 02:27 loop2
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 3 Feb 21 02:27 loop3
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 4 Feb 21 02:27 loop4
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 5 Feb 21 02:27 loop5
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 6 Feb 21 02:27 loop6
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 7 Feb 21 02:27 loop7
| [ 0:00] ## LSLR:	drwxr-xr-x 2 root root 4096 Feb 21 02:27 mapper
| [ 0:00] ## LSLR:	crw-r--r-- 1 root root 1, 3 Feb 21 02:27 testnull
| [ 0:00] ## LSLR:	
| [ 0:00] ## LSLR:	@TESTDIR@/dev/mapper:
| [ 0:00] ## LSLR:	total 0
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   4 Feb 21 02:27 @PREFIX@pv1
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   5 Feb 21 02:27 @PREFIX@pv2
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   3 Feb 21 02:27 @PREFIX@pv3
| [ 0:00] ## LSLR:	crw------- 1 root root  10, 236 Feb 21 02:27 control
| [ 0:00] <======== Udev DB content ========>
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-0
| [ 0:00] ## UDEV:	N: dm-0
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-0
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-0
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=0
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-1
| [ 0:00] ## UDEV:	N: dm-1
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-1
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-1
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=1
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-2
| [ 0:00] ## UDEV:	N: dm-2
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-2
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-2
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=2
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-3
| [ 0:00] ## UDEV:	N: dm-3
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-3
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-3
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=3
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-4
| [ 0:00] ## UDEV:	N: dm-4
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-4
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-4
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=4
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-5
| [ 0:00] ## UDEV:	N: dm-5
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-5
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-5
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=5
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/loop0
| [ 0:00] ## UDEV:	N: loop0
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/loop0
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/loop0
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=7
| [ 0:00] ## UDEV:	E: MINOR=0
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] <======== Script file "pvmove-abort.sh" ========>
| [ 0:00] ## Line: 1 	 #!/usr/bin/env bash
| [ 0:00] ## Line: 2 	 
| [ 0:00] ## Line: 3 	 # Copyright (C) 2015 Red Hat, Inc. All rights reserved.
| [ 0:00] ## Line: 4 	 #
| [ 0:00] ## Line: 5 	 # This copyrighted material is made available to anyone wishing to use,
| [ 0:00] ## Line: 6 	 # modify, copy, or redistribute it subject to the terms and conditions
| [ 0:00] ## Line: 7 	 # of the GNU General Public License v.2.
| [ 0:00] ## Line: 8 	 #
| [ 0:00] ## Line: 9 	 # You should have received a copy of the GNU General Public License
| [ 0:00] ## Line: 10 	 # along with this program; if not, write to the Free Software Foundation,
| [ 0:00] ## Line: 11 	 # Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA
| [ 0:00] ## Line: 12 	 
| [ 0:00] ## Line: 13 	 # Check pvmove --abort behaviour when specific device is requested
| [ 0:00] ## Line: 14 	 
| [ 0:00] ## Line: 15 	 SKIP_WITH_LVMLOCKD=1
| [ 0:00] ## Line: 16 	 
| [ 0:00] ## Line: 17 	 . lib/inittest
| [ 0:00] ## Line: 18 	 
| [ 0:00] ## Line: 19 	 aux prepare_pvs 3 60
| [ 0:00] ## Line: 20 	 
| [ 0:00] ## Line: 21 	 vgcreate -s 128k $vg "$dev1" "$dev2"
| [ 0:00] ## Line: 22 	 pvcreate --metadatacopies 0 "$dev3"
| [ 0:00] ## Line: 23 	 vgextend $vg "$dev3"
| [ 0:00] ## Line: 24 	 
| [ 0:00] ## Line: 25 	 # Slowdown read/writes
| [ 0:00] ## Line: 26 	 aux delay_dev "$dev3" 0 800 "$(get first_extent_sector "$dev3"):"
| [ 0:00] ## Line: 27 	 
| [ 0:00] ## Line: 28 	 for mode in "--atomic" "" ;
| [ 0:00] ## Line: 29 	 do
| [ 0:00] ## Line: 30 	 for backgroundarg in "-b" "" ;
| [ 0:00] ## Line: 31 	 do
| [ 0:00] ## Line: 32 	 
| [ 0:00] ## Line: 33 	 # Create multisegment LV
| [ 0:00] ## Line: 34 	 lvcreate -an -Zn -l30 -n $lv1 $vg "$dev1"
| [ 0:00] ## Line: 35 	 lvcreate -an -Zn -l30 -n $lv2 $vg "$dev2"
| [ 0:00] ## Line: 36 	 
| [ 0:00] ## Line: 37 	 cmd1=(pvmove -i1 $backgroundarg $mode "$dev1" "$dev3")
| [ 0:00] ## Line: 38 	 cmd2=(pvmove -i1 $backgroundarg $mode "$dev2" "$dev3")
| [ 0:00] ## Line: 39 	 
| [ 0:00] ## Line: 40 	 if test -e HAVE_DM_DELAY; then
| [ 0:00] ## Line: 41 	 
| [ 0:00] ## Line: 42 	 if test -z "$backgroundarg" ; then
| [ 0:00] ## Line: 43 	 	"${cmd1[@]}" &
| [ 0:00] ## Line: 44 	 	aux wait_pvmove_lv_ready "$vg-pvmove0"
| [ 0:00] ## Line: 45 	 	"${cmd2[@]}" &
| [ 0:00] ## Line: 46 	 	aux wait_pvmove_lv_ready "$vg-pvmove1"
| [ 0:00] ## Line: 47 	 else
| [ 0:00] ## Line: 48 	 	LVM_TEST_TAG="kill_me_$PREFIX" "${cmd1[@]}"
| [ 0:00] ## Line: 49 	 	LVM_TEST_TAG="kill_me_$PREFIX" "${cmd2[@]}"
| [ 0:00] ## Line: 50 	 fi
| [ 0:00] ## Line: 51 	 
| [ 0:00] ## Line: 52 	 # remove specific device
| [ 0:00] ## Line: 53 	 pvmove --abort "$dev1"
| [ 0:00] ## Line: 54 	 
| [ 0:00] ## Line: 55 	 # check if proper pvmove was canceled
| [ 0:00] ## Line: 56 	 get lv_field $vg name -a | tee out
| [ 0:00] ## Line: 57 	 not grep -E "^\[?pvmove0" out
| [ 0:00] ## Line: 58 	 grep -E "^\[?pvmove1" out
| [ 0:00] ## Line: 59 	 
| [ 0:00] ## Line: 60 	 fi
| [ 0:00] ## Line: 61 	 
| [ 0:00] ## Line: 62 	 # remove any remaining pvmoves in progress
| [ 0:00] ## Line: 63 	 pvmove --abort
| [ 0:00] ## Line: 64 	 
| [ 0:00] ## Line: 65 	 lvremove -ff $vg
| [ 0:00] ## Line: 66 	 
| [ 0:00] ## Line: 67 	 wait
| [ 0:00] ## Line: 68 	 aux kill_tagged_processes
| [ 0:00] ## Line: 69 	 done
| [ 0:00] ## Line: 70 	 done
| [ 0:00] ## Line: 71 	 
| [ 0:00] ## Line: 72 	 # Restore delayed device back
| [ 0:00] ## Line: 73 	 aux enable_dev "$dev3"
| [ 0:00] ## Line: 74 	 
| [ 0:00] ## Line: 75 	 vgremove -ff $vg
| [ 0:00] aux teardown
| [ 0:00] #pvmove-abort.sh:1+ aux teardown
| [ 0:00] ## teardown.........ok
###       failed: [ndev-vanilla] shell/pvmove-abort.sh

| [ 0:00] Library version:   1.02.146 (2017-12-18)
| [ 0:00] Driver version:    4.35.0
| [ 0:00] Kernel is Linux localhost.localdomain 3.10.0-693.11.1.el7.x86_64 #1 SMP Mon Dec 4 23:52:40 UTC 2017 x86_64 GNU/Linux
| [ 0:00] Selinux mode is not installed.
| [ 0:00]               total        used        free      shared  buff/cache   available
| [ 0:00] Mem:           7822        1080        4143          10        2598        6435
| [ 0:00] Swap:          4095           0        4095
| [ 0:00] Filesystem      Size  Used Avail Use% Mounted on
| [ 0:00] /dev/sdc1        18G  8.4G  8.4G  50% /
| [ 0:00] /dev/sdd1        51G  6.1G   43G  13% /lfskernel
| [ 0:00] devtmpfs        3.9G     0  3.9G   0% /dev
| [ 0:00] tmpfs           3.9G     0  3.9G   0% /run
| [ 0:00] @TESTDIR=/tmp/LVMTEST18160.8OIdNtyi39
| [ 0:00] @PREFIX=LVMTEST18160
| [ 0:00] ## LVMCONF: activation {
| [ 0:00] ## LVMCONF:     checks = 1
| [ 0:00] ## LVMCONF:     monitoring = 0
| [ 0:00] ## LVMCONF:     polling_interval = 1
| [ 0:00] ## LVMCONF:     raid_region_size = 512
| [ 0:00] ## LVMCONF:     retry_deactivation = 1
| [ 0:00] ## LVMCONF:     snapshot_autoextend_percent = 50
| [ 0:00] ## LVMCONF:     snapshot_autoextend_threshold = 50
| [ 0:00] ## LVMCONF:     udev_rules = 1
| [ 0:00] ## LVMCONF:     udev_sync = 1
| [ 0:00] ## LVMCONF:     verify_udev_operations = 1
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: allocation {
| [ 0:00] ## LVMCONF:     wipe_signatures_when_zeroing_new_lvs = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: backup {
| [ 0:00] ## LVMCONF:     archive = 0
| [ 0:00] ## LVMCONF:     backup = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: devices {
| [ 0:00] ## LVMCONF:     cache_dir = "@TESTDIR@/etc"
| [ 0:00] ## LVMCONF:     default_data_alignment = 1
| [ 0:00] ## LVMCONF:     dir = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     filter = "a|.*|"
| [ 0:00] ## LVMCONF:     global_filter = [ "a|@TESTDIR@/dev/mapper/@PREFIX@.*pv[0-9_]*$|", "r|.*|" ]
| [ 0:00] ## LVMCONF:     md_component_detection  = 0
| [ 0:00] ## LVMCONF:     scan = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     sysfs_scan = 1
| [ 0:00] ## LVMCONF:     write_cache_state = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: dmeventd {
| [ 0:00] ## LVMCONF:     executable = "/sources/boot/LVM2.2.02.177/test/lib/dmeventd"
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: global {
| [ 0:00] ## LVMCONF:     abort_on_internal_errors = 1
| [ 0:00] ## LVMCONF:     cache_check_executable = "/usr/sbin/cache_check"
| [ 0:00] ## LVMCONF:     cache_dump_executable = "/usr/sbin/cache_dump"
| [ 0:00] ## LVMCONF:     cache_repair_executable = "/usr/sbin/cache_repair"
| [ 0:00] ## LVMCONF:     detect_internal_vg_cache_corruption = 1
| [ 0:00] ## LVMCONF:     fallback_to_local_locking = 0
| [ 0:00] ## LVMCONF:     fsadm_executable = "/sources/boot/LVM2.2.02.177/test/lib/fsadm"
| [ 0:00] ## LVMCONF:     library_dir = "@TESTDIR@/lib"
| [ 0:00] ## LVMCONF:     locking_dir = "@TESTDIR@/var/lock/lvm"
| [ 0:00] ## LVMCONF:     locking_type=1
| [ 0:00] ## LVMCONF:     notify_dbus = 0
| [ 0:00] ## LVMCONF:     si_unit_consistency = 1
| [ 0:00] ## LVMCONF:     thin_check_executable = "/usr/sbin/thin_check"
| [ 0:00] ## LVMCONF:     thin_dump_executable = "/usr/sbin/thin_dump"
| [ 0:00] ## LVMCONF:     thin_repair_executable = "/usr/sbin/thin_repair"
| [ 0:00] ## LVMCONF:     use_lvmetad = 0
| [ 0:00] ## LVMCONF:     use_lvmlockd = 0
| [ 0:00] ## LVMCONF:     use_lvmpolld = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: log {
| [ 0:00] ## LVMCONF:     activation = 1
| [ 0:00] ## LVMCONF:     file = "@TESTDIR@/debug.log"
| [ 0:00] ## LVMCONF:     indent = 1
| [ 0:00] ## LVMCONF:     level = 9
| [ 0:00] ## LVMCONF:     overwrite = 1
| [ 0:00] ## LVMCONF:     syslog = 0
| [ 0:00] ## LVMCONF:     verbose = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] <======== Processing test: "pvmove-all-segtypes.sh" ========>
| [ 0:00] 
| [ 0:00] which md5sum || skip
| [ 0:00] #pvmove-all-segtypes.sh:19+ which md5sum
| [ 0:00] /usr/bin/md5sum
| [ 0:00] 
| [ 0:00] aux prepare_vg 5 20
| [ 0:00] #pvmove-all-segtypes.sh:21+ aux prepare_vg 5 20
| [ 0:00] ## preparing loop device....ok (/dev/loop0)
| [ 0:00] ## preparing 5 devices...lib/utils: line 212: DM_UDEV_COOKIE: unbound variable
| [ 0:00] set +vx; STACKTRACE; set -vx
| [ 0:00] ##pvmove-all-segtypes.sh:21+ set +vx
| [ 0:00] ## - /lfskernel/sources/boot/LVM2.2.02.177/test/shell/pvmove-all-segtypes.sh:21
| [ 0:00] ## 1 STACKTRACE() called from /lfskernel/sources/boot/LVM2.2.02.177/test/shell/pvmove-all-segtypes.sh:21
| [ 0:00] <======== Info ========>
| [ 0:00] ## DMINFO:   Name             Maj Min Stat Open Targ Event  UUID                                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv2  253   7 L--w    0    1      0 TEST-@PREFIX@pv2                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv1  253   6 L--w    0    1      0 TEST-@PREFIX@pv1                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv5  253   5 L--w    0    1      0 TEST-@PREFIX@pv5                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv4  253   4 L--w    0    1      0 TEST-@PREFIX@pv4                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv3  253   3 L--w    0    1      0 TEST-@PREFIX@pv3                                                
| [ 0:00] <======== Active table ========>
| [ 0:00] ## DMTABLE:  @PREFIX@pv2: 0 40960 linear 7:0 43008
| [ 0:00] ## DMTABLE:  @PREFIX@pv1: 0 40960 linear 7:0 2048
| [ 0:00] ## DMTABLE:  @PREFIX@pv5: 0 40960 linear 7:0 165888
| [ 0:00] ## DMTABLE:  @PREFIX@pv4: 0 40960 linear 7:0 124928
| [ 0:00] ## DMTABLE:  @PREFIX@pv3: 0 40960 linear 7:0 83968
| [ 0:00] <======== Inactive table ========>
| [ 0:00] ## DMITABLE: @PREFIX@pv2: 
| [ 0:00] ## DMITABLE: @PREFIX@pv1: 
| [ 0:00] ## DMITABLE: @PREFIX@pv5: 
| [ 0:00] ## DMITABLE: @PREFIX@pv4: 
| [ 0:00] ## DMITABLE: @PREFIX@pv3: 
| [ 0:00] <======== Status ========>
| [ 0:00] ## DMSTATUS: @PREFIX@pv2: 0 40960 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv1: 0 40960 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv5: 0 40960 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv4: 0 40960 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv3: 0 40960 linear 
| [ 0:00] <======== Tree ========>
| [ 0:00] ## DMTREE:   @PREFIX@pv2 (253:7)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   @PREFIX@pv1 (253:6)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   @PREFIX@pv5 (253:5)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   @PREFIX@pv4 (253:4)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   LFS_vg-lfs (253:2)
| [ 0:00] ## DMTREE:    `- (8:16)
| [ 0:00] ## DMTREE:   centos-swap (253:1)
| [ 0:00] ## DMTREE:    `- (8:2)
| [ 0:00] ## DMTREE:   centos-root (253:0)
| [ 0:00] ## DMTREE:    `- (8:2)
| [ 0:00] ## DMTREE:   @PREFIX@pv3 (253:3)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] <======== Recursive list of @TESTDIR@/dev ========>
| [ 0:00] ## LSLR:	@TESTDIR@/dev:
| [ 0:00] ## LSLR:	total 4
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 0 Feb 21 02:27 loop0
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 1 Feb 21 02:27 loop1
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 2 Feb 21 02:27 loop2
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 3 Feb 21 02:27 loop3
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 4 Feb 21 02:27 loop4
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 5 Feb 21 02:27 loop5
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 6 Feb 21 02:27 loop6
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 7 Feb 21 02:27 loop7
| [ 0:00] ## LSLR:	drwxr-xr-x 2 root root 4096 Feb 21 02:27 mapper
| [ 0:00] ## LSLR:	crw-r--r-- 1 root root 1, 3 Feb 21 02:27 testnull
| [ 0:00] ## LSLR:	
| [ 0:00] ## LSLR:	@TESTDIR@/dev/mapper:
| [ 0:00] ## LSLR:	total 0
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   6 Feb 21 02:27 @PREFIX@pv1
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   7 Feb 21 02:27 @PREFIX@pv2
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   3 Feb 21 02:27 @PREFIX@pv3
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   4 Feb 21 02:27 @PREFIX@pv4
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   5 Feb 21 02:27 @PREFIX@pv5
| [ 0:00] ## LSLR:	crw------- 1 root root  10, 236 Feb 21 02:27 control
| [ 0:00] <======== Udev DB content ========>
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-0
| [ 0:00] ## UDEV:	N: dm-0
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-0
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-0
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=0
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-1
| [ 0:00] ## UDEV:	N: dm-1
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-1
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-1
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=1
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-2
| [ 0:00] ## UDEV:	N: dm-2
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-2
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-2
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=2
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-3
| [ 0:00] ## UDEV:	N: dm-3
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-3
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-3
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=3
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-4
| [ 0:00] ## UDEV:	N: dm-4
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-4
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-4
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=4
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-5
| [ 0:00] ## UDEV:	N: dm-5
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-5
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-5
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=5
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-6
| [ 0:00] ## UDEV:	N: dm-6
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-6
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-6
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=6
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-7
| [ 0:00] ## UDEV:	N: dm-7
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-7
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-7
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=7
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/loop0
| [ 0:00] ## UDEV:	N: loop0
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/loop0
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/loop0
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=7
| [ 0:00] ## UDEV:	E: MINOR=0
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] <======== Script file "pvmove-all-segtypes.sh" ========>
| [ 0:00] ## Line: 1 	 #!/usr/bin/env bash
| [ 0:00] ## Line: 2 	 
| [ 0:00] ## Line: 3 	 # Copyright (C) 2013 Red Hat, Inc. All rights reserved.
| [ 0:00] ## Line: 4 	 #
| [ 0:00] ## Line: 5 	 # This copyrighted material is made available to anyone wishing to use,
| [ 0:00] ## Line: 6 	 # modify, copy, or redistribute it subject to the terms and conditions
| [ 0:00] ## Line: 7 	 # of the GNU General Public License v.2.
| [ 0:00] ## Line: 8 	 #
| [ 0:00] ## Line: 9 	 # You should have received a copy of the GNU General Public License
| [ 0:00] ## Line: 10 	 # along with this program; if not, write to the Free Software Foundation,
| [ 0:00] ## Line: 11 	 # Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA
| [ 0:00] ## Line: 12 	 
| [ 0:00] ## Line: 13 	 test_description="ensure pvmove works with all common segment types"
| [ 0:00] ## Line: 14 	 
| [ 0:00] ## Line: 15 	 SKIP_WITH_LVMLOCKD=1
| [ 0:00] ## Line: 16 	 
| [ 0:00] ## Line: 17 	 . lib/inittest
| [ 0:00] ## Line: 18 	 
| [ 0:00] ## Line: 19 	 which md5sum || skip
| [ 0:00] ## Line: 20 	 
| [ 0:00] ## Line: 21 	 aux prepare_vg 5 20
| [ 0:00] ## Line: 22 	 
| [ 0:00] ## Line: 23 	 # Each of the following tests does:
| [ 0:00] ## Line: 24 	 # 1) Create two LVs - one linear and one other segment type
| [ 0:00] ## Line: 25 	 #    The two LVs will share a PV.
| [ 0:00] ## Line: 26 	 # 2) Move both LVs together
| [ 0:00] ## Line: 27 	 # 3) Move only the second LV by name
| [ 0:00] ## Line: 28 	 
| [ 0:00] ## Line: 29 	 # Testing pvmove of linear LV
| [ 0:00] ## Line: 30 	 lvcreate -aey -l 2 -n ${lv1}_foo $vg "$dev1"
| [ 0:00] ## Line: 31 	 lvcreate -aey -l 2 -n $lv1 $vg "$dev1"
| [ 0:00] ## Line: 32 	 check lv_tree_on $vg ${lv1}_foo "$dev1"
| [ 0:00] ## Line: 33 	 check lv_tree_on $vg $lv1 "$dev1"
| [ 0:00] ## Line: 34 	 aux mkdev_md5sum $vg $lv1
| [ 0:00] ## Line: 35 	 pvmove "$dev1" "$dev5"
| [ 0:00] ## Line: 36 	 check lv_tree_on $vg ${lv1}_foo "$dev5"
| [ 0:00] ## Line: 37 	 check lv_tree_on $vg $lv1 "$dev5"
| [ 0:00] ## Line: 38 	 check dev_md5sum $vg $lv1
| [ 0:00] ## Line: 39 	 pvmove -n $lv1 "$dev5" "$dev4"
| [ 0:00] ## Line: 40 	 check lv_tree_on $vg $lv1 "$dev4"
| [ 0:00] ## Line: 41 	 check lv_tree_on $vg ${lv1}_foo "$dev5"
| [ 0:00] ## Line: 42 	 check dev_md5sum $vg $lv1
| [ 0:00] ## Line: 43 	 lvremove -ff $vg
| [ 0:00] ## Line: 44 	 
| [ 0:00] ## Line: 45 	 # Testing pvmove of stripe LV
| [ 0:00] ## Line: 46 	 lvcreate -aey -l 2 -n ${lv1}_foo $vg "$dev1"
| [ 0:00] ## Line: 47 	 lvcreate -aey -l 4 -i 2 -n $lv1 $vg "$dev1" "$dev2"
| [ 0:00] ## Line: 48 	 check lv_tree_on $vg ${lv1}_foo "$dev1"
| [ 0:00] ## Line: 49 	 check lv_tree_on $vg $lv1 "$dev1" "$dev2"
| [ 0:00] ## Line: 50 	 aux mkdev_md5sum $vg $lv1
| [ 0:00] ## Line: 51 	 pvmove "$dev1" "$dev5"
| [ 0:00] ## Line: 52 	 check lv_tree_on $vg ${lv1}_foo "$dev5"
| [ 0:00] ## Line: 53 	 check lv_tree_on $vg $lv1 "$dev2" "$dev5"
| [ 0:00] ## Line: 54 	 check dev_md5sum $vg $lv1
| [ 0:00] ## Line: 55 	 pvmove -n $lv1 "$dev5" "$dev4"
| [ 0:00] ## Line: 56 	 check lv_tree_on $vg $lv1 "$dev2" "$dev4"
| [ 0:00] ## Line: 57 	 check lv_tree_on $vg ${lv1}_foo "$dev5"
| [ 0:00] ## Line: 58 	 check dev_md5sum $vg $lv1
| [ 0:00] ## Line: 59 	 lvremove -ff $vg
| [ 0:00] ## Line: 60 	 
| [ 0:00] ## Line: 61 	 if test -e LOCAL_CLVMD ; then
| [ 0:00] ## Line: 62 	 #FIXME these tests currently fail end require cmirrord
| [ 0:00] ## Line: 63 	 echo "$(should false)FIXME!!! pvmove in clustered VG not fully supported!"
| [ 0:00] ## Line: 64 	 else
| [ 0:00] ## Line: 65 	 
| [ 0:00] ## Line: 66 	 # Testing pvmove of mirror LV
| [ 0:00] ## Line: 67 	 lvcreate -aey -l 2 -n ${lv1}_foo $vg "$dev1"
| [ 0:00] ## Line: 68 	 lvcreate -aey -l 2 --type mirror -m 1 -n $lv1 $vg "$dev1" "$dev2"
| [ 0:00] ## Line: 69 	 check lv_tree_on $vg ${lv1}_foo "$dev1"
| [ 0:00] ## Line: 70 	 check lv_tree_on $vg $lv1 "$dev1" "$dev2"
| [ 0:00] ## Line: 71 	 aux mkdev_md5sum $vg $lv1
| [ 0:00] ## Line: 72 	 pvmove "$dev1" "$dev5"
| [ 0:00] ## Line: 73 	 check lv_tree_on $vg ${lv1}_foo "$dev5"
| [ 0:00] ## Line: 74 	 check lv_tree_on $vg $lv1 "$dev2" "$dev5"
| [ 0:00] ## Line: 75 	 check dev_md5sum $vg $lv1
| [ 0:00] ## Line: 76 	 pvmove -n $lv1 "$dev5" "$dev4"
| [ 0:00] ## Line: 77 	 check lv_tree_on $vg $lv1 "$dev2" "$dev4"
| [ 0:00] ## Line: 78 	 check lv_tree_on $vg ${lv1}_foo "$dev5"
| [ 0:00] ## Line: 79 	 check dev_md5sum $vg $lv1
| [ 0:00] ## Line: 80 	 lvremove -ff $vg
| [ 0:00] ## Line: 81 	 
| [ 0:00] ## Line: 82 	 # Dummy LV and snap share dev1, while origin is on dev2
| [ 0:00] ## Line: 83 	 # Testing pvmove of snapshot LV
| [ 0:00] ## Line: 84 	 lvcreate -aey -l 2 -n ${lv1}_foo $vg "$dev1"
| [ 0:00] ## Line: 85 	 lvcreate -aey -l 2 -n $lv1 $vg "$dev2"
| [ 0:00] ## Line: 86 	 lvcreate -s $vg/$lv1 -l 2 -n snap "$dev1"
| [ 0:00] ## Line: 87 	 check lv_tree_on $vg ${lv1}_foo "$dev1"
| [ 0:00] ## Line: 88 	 check lv_tree_on $vg snap "$dev1"
| [ 0:00] ## Line: 89 	 aux mkdev_md5sum $vg snap
| [ 0:00] ## Line: 90 	 pvmove "$dev1" "$dev5"
| [ 0:00] ## Line: 91 	 check lv_tree_on $vg ${lv1}_foo "$dev5"
| [ 0:00] ## Line: 92 	 check lv_tree_on $vg snap "$dev5"
| [ 0:00] ## Line: 93 	 check dev_md5sum $vg snap
| [ 0:00] ## Line: 94 	 pvmove -n snap "$dev5" "$dev4"
| [ 0:00] ## Line: 95 	 check lv_tree_on $vg snap "$dev4"
| [ 0:00] ## Line: 96 	 check lv_tree_on $vg ${lv1}_foo "$dev5"
| [ 0:00] ## Line: 97 	 check dev_md5sum $vg snap
| [ 0:00] ## Line: 98 	 lvremove -ff $vg
| [ 0:00] ## Line: 99 	 fi
| [ 0:00] ## Line: 100 	 
| [ 0:00] ## Line: 101 	 vgremove -ff $vg
| [ 0:00] aux teardown
| [ 0:00] #pvmove-all-segtypes.sh:1+ aux teardown
| [ 0:00] ## teardown.........ok
###       failed: [ndev-vanilla] shell/pvmove-all-segtypes.sh

| [ 0:00] Library version:   1.02.146 (2017-12-18)
| [ 0:00] Driver version:    4.35.0
| [ 0:00] Kernel is Linux localhost.localdomain 3.10.0-693.11.1.el7.x86_64 #1 SMP Mon Dec 4 23:52:40 UTC 2017 x86_64 GNU/Linux
| [ 0:00] Selinux mode is not installed.
| [ 0:00]               total        used        free      shared  buff/cache   available
| [ 0:00] Mem:           7822        1080        4144          10        2598        6435
| [ 0:00] Swap:          4095           0        4095
| [ 0:00] Filesystem      Size  Used Avail Use% Mounted on
| [ 0:00] /dev/sdc1        18G  8.4G  8.4G  50% /
| [ 0:00] /dev/sdd1        51G  6.1G   43G  13% /lfskernel
| [ 0:00] devtmpfs        3.9G     0  3.9G   0% /dev
| [ 0:00] tmpfs           3.9G     0  3.9G   0% /run
| [ 0:00] @TESTDIR=/tmp/LVMTEST18375.02Y9TXRtja
| [ 0:00] @PREFIX=LVMTEST18375
| [ 0:00] ## LVMCONF: activation {
| [ 0:00] ## LVMCONF:     checks = 1
| [ 0:00] ## LVMCONF:     monitoring = 0
| [ 0:00] ## LVMCONF:     polling_interval = 1
| [ 0:00] ## LVMCONF:     raid_region_size = 512
| [ 0:00] ## LVMCONF:     retry_deactivation = 1
| [ 0:00] ## LVMCONF:     snapshot_autoextend_percent = 50
| [ 0:00] ## LVMCONF:     snapshot_autoextend_threshold = 50
| [ 0:00] ## LVMCONF:     udev_rules = 1
| [ 0:00] ## LVMCONF:     udev_sync = 1
| [ 0:00] ## LVMCONF:     verify_udev_operations = 1
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: allocation {
| [ 0:00] ## LVMCONF:     wipe_signatures_when_zeroing_new_lvs = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: backup {
| [ 0:00] ## LVMCONF:     archive = 0
| [ 0:00] ## LVMCONF:     backup = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: devices {
| [ 0:00] ## LVMCONF:     cache_dir = "@TESTDIR@/etc"
| [ 0:00] ## LVMCONF:     default_data_alignment = 1
| [ 0:00] ## LVMCONF:     dir = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     filter = "a|.*|"
| [ 0:00] ## LVMCONF:     global_filter = [ "a|@TESTDIR@/dev/mapper/@PREFIX@.*pv[0-9_]*$|", "r|.*|" ]
| [ 0:00] ## LVMCONF:     md_component_detection  = 0
| [ 0:00] ## LVMCONF:     scan = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     sysfs_scan = 1
| [ 0:00] ## LVMCONF:     write_cache_state = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: dmeventd {
| [ 0:00] ## LVMCONF:     executable = "/sources/boot/LVM2.2.02.177/test/lib/dmeventd"
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: global {
| [ 0:00] ## LVMCONF:     abort_on_internal_errors = 1
| [ 0:00] ## LVMCONF:     cache_check_executable = "/usr/sbin/cache_check"
| [ 0:00] ## LVMCONF:     cache_dump_executable = "/usr/sbin/cache_dump"
| [ 0:00] ## LVMCONF:     cache_repair_executable = "/usr/sbin/cache_repair"
| [ 0:00] ## LVMCONF:     detect_internal_vg_cache_corruption = 1
| [ 0:00] ## LVMCONF:     fallback_to_local_locking = 0
| [ 0:00] ## LVMCONF:     fsadm_executable = "/sources/boot/LVM2.2.02.177/test/lib/fsadm"
| [ 0:00] ## LVMCONF:     library_dir = "@TESTDIR@/lib"
| [ 0:00] ## LVMCONF:     locking_dir = "@TESTDIR@/var/lock/lvm"
| [ 0:00] ## LVMCONF:     locking_type=1
| [ 0:00] ## LVMCONF:     notify_dbus = 0
| [ 0:00] ## LVMCONF:     si_unit_consistency = 1
| [ 0:00] ## LVMCONF:     thin_check_executable = "/usr/sbin/thin_check"
| [ 0:00] ## LVMCONF:     thin_dump_executable = "/usr/sbin/thin_dump"
| [ 0:00] ## LVMCONF:     thin_repair_executable = "/usr/sbin/thin_repair"
| [ 0:00] ## LVMCONF:     use_lvmetad = 0
| [ 0:00] ## LVMCONF:     use_lvmlockd = 0
| [ 0:00] ## LVMCONF:     use_lvmpolld = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: log {
| [ 0:00] ## LVMCONF:     activation = 1
| [ 0:00] ## LVMCONF:     file = "@TESTDIR@/debug.log"
| [ 0:00] ## LVMCONF:     indent = 1
| [ 0:00] ## LVMCONF:     level = 9
| [ 0:00] ## LVMCONF:     overwrite = 1
| [ 0:00] ## LVMCONF:     syslog = 0
| [ 0:00] ## LVMCONF:     verbose = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] <======== Processing test: "pvmove-background.sh" ========>
| [ 0:00] 
| [ 0:00] aux prepare_vg 3
| [ 0:00] #pvmove-background.sh:19+ aux prepare_vg 3
| [ 0:00] ## preparing loop device....ok (/dev/loop0)
| [ 0:00] ## preparing 3 devices...lib/utils: line 212: DM_UDEV_COOKIE: unbound variable
| [ 0:00] set +vx; STACKTRACE; set -vx
| [ 0:00] ##pvmove-background.sh:19+ set +vx
| [ 0:00] ## - /lfskernel/sources/boot/LVM2.2.02.177/test/shell/pvmove-background.sh:19
| [ 0:00] ## 1 STACKTRACE() called from /lfskernel/sources/boot/LVM2.2.02.177/test/shell/pvmove-background.sh:19
| [ 0:00] <======== Info ========>
| [ 0:00] ## DMINFO:   Name             Maj Min Stat Open Targ Event  UUID                                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv3  253   3 L--w    0    1      0 TEST-@PREFIX@pv3                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv2  253   5 L--w    0    1      0 TEST-@PREFIX@pv2                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv1  253   4 L--w    0    1      0 TEST-@PREFIX@pv1                                                
| [ 0:00] <======== Active table ========>
| [ 0:00] ## DMTABLE:  @PREFIX@pv3: 0 69632 linear 7:0 141312
| [ 0:00] ## DMTABLE:  @PREFIX@pv2: 0 69632 linear 7:0 71680
| [ 0:00] ## DMTABLE:  @PREFIX@pv1: 0 69632 linear 7:0 2048
| [ 0:00] <======== Inactive table ========>
| [ 0:00] ## DMITABLE: @PREFIX@pv3: 
| [ 0:00] ## DMITABLE: @PREFIX@pv2: 
| [ 0:00] ## DMITABLE: @PREFIX@pv1: 
| [ 0:00] <======== Status ========>
| [ 0:00] ## DMSTATUS: @PREFIX@pv3: 0 69632 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv2: 0 69632 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv1: 0 69632 linear 
| [ 0:00] <======== Tree ========>
| [ 0:00] ## DMTREE:   @PREFIX@pv3 (253:3)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   @PREFIX@pv2 (253:5)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   @PREFIX@pv1 (253:4)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   LFS_vg-lfs (253:2)
| [ 0:00] ## DMTREE:    `- (8:16)
| [ 0:00] ## DMTREE:   centos-swap (253:1)
| [ 0:00] ## DMTREE:    `- (8:2)
| [ 0:00] ## DMTREE:   centos-root (253:0)
| [ 0:00] ## DMTREE:    `- (8:2)
| [ 0:00] <======== Recursive list of @TESTDIR@/dev ========>
| [ 0:00] ## LSLR:	@TESTDIR@/dev:
| [ 0:00] ## LSLR:	total 4
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 0 Feb 21 02:27 loop0
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 1 Feb 21 02:27 loop1
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 2 Feb 21 02:27 loop2
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 3 Feb 21 02:27 loop3
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 4 Feb 21 02:27 loop4
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 5 Feb 21 02:27 loop5
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 6 Feb 21 02:27 loop6
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 7 Feb 21 02:27 loop7
| [ 0:00] ## LSLR:	drwxr-xr-x 2 root root 4096 Feb 21 02:27 mapper
| [ 0:00] ## LSLR:	crw-r--r-- 1 root root 1, 3 Feb 21 02:27 testnull
| [ 0:00] ## LSLR:	
| [ 0:00] ## LSLR:	@TESTDIR@/dev/mapper:
| [ 0:00] ## LSLR:	total 0
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   4 Feb 21 02:27 @PREFIX@pv1
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   5 Feb 21 02:27 @PREFIX@pv2
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   3 Feb 21 02:27 @PREFIX@pv3
| [ 0:00] ## LSLR:	crw------- 1 root root  10, 236 Feb 21 02:27 control
| [ 0:00] <======== Udev DB content ========>
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-0
| [ 0:00] ## UDEV:	N: dm-0
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-0
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-0
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=0
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-1
| [ 0:00] ## UDEV:	N: dm-1
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-1
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-1
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=1
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-2
| [ 0:00] ## UDEV:	N: dm-2
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-2
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-2
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=2
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-3
| [ 0:00] ## UDEV:	N: dm-3
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-3
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-3
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=3
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-4
| [ 0:00] ## UDEV:	N: dm-4
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-4
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-4
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=4
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-5
| [ 0:00] ## UDEV:	N: dm-5
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-5
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-5
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=5
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/loop0
| [ 0:00] ## UDEV:	N: loop0
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/loop0
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/loop0
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=7
| [ 0:00] ## UDEV:	E: MINOR=0
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] <======== Script file "pvmove-background.sh" ========>
| [ 0:00] ## Line: 1 	 #!/usr/bin/env bash
| [ 0:00] ## Line: 2 	 
| [ 0:00] ## Line: 3 	 # Copyright (C) 2014 Red Hat, Inc. All rights reserved.
| [ 0:00] ## Line: 4 	 #
| [ 0:00] ## Line: 5 	 # This copyrighted material is made available to anyone wishing to use,
| [ 0:00] ## Line: 6 	 # modify, copy, or redistribute it subject to the terms and conditions
| [ 0:00] ## Line: 7 	 # of the GNU General Public License v.2.
| [ 0:00] ## Line: 8 	 #
| [ 0:00] ## Line: 9 	 # You should have received a copy of the GNU General Public License
| [ 0:00] ## Line: 10 	 # along with this program; if not, write to the Free Software Foundation,
| [ 0:00] ## Line: 11 	 # Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA
| [ 0:00] ## Line: 12 	 
| [ 0:00] ## Line: 13 	 # Check pvmove behavior when it's progress and machine is rebooted
| [ 0:00] ## Line: 14 	 
| [ 0:00] ## Line: 15 	 SKIP_WITH_LVMLOCKD=1
| [ 0:00] ## Line: 16 	 
| [ 0:00] ## Line: 17 	 . lib/inittest
| [ 0:00] ## Line: 18 	 
| [ 0:00] ## Line: 19 	 aux prepare_vg 3
| [ 0:00] ## Line: 20 	 
| [ 0:00] ## Line: 21 	 for mode in "--atomic" ""
| [ 0:00] ## Line: 22 	 do
| [ 0:00] ## Line: 23 	 lvcreate -aey -l1 -n $lv1 $vg "$dev1"
| [ 0:00] ## Line: 24 	 
| [ 0:00] ## Line: 25 	 lvs -o +devices | tee out
| [ 0:00] ## Line: 26 	 grep "$dev1" out
| [ 0:00] ## Line: 27 	 
| [ 0:00] ## Line: 28 	 LVM_TEST_TAG="kill_me_$PREFIX" pvmove $mode -i 1 -b "$dev1" "$dev2"
| [ 0:00] ## Line: 29 	 sleep 5 # arbitrary...
| [ 0:00] ## Line: 30 	 lvs -o +devices | tee out
| [ 0:00] ## Line: 31 	 not grep "pvmove" out
| [ 0:00] ## Line: 32 	 lvs -o +devices | tee out
| [ 0:00] ## Line: 33 	 grep "$dev2" out
| [ 0:00] ## Line: 34 	 
| [ 0:00] ## Line: 35 	 lvremove -ff $vg
| [ 0:00] ## Line: 36 	 done
| [ 0:00] aux teardown
| [ 0:00] #pvmove-background.sh:1+ aux teardown
| [ 0:00] ## teardown.........ok
###       failed: [ndev-vanilla] shell/pvmove-background.sh

| [ 0:00] Library version:   1.02.146 (2017-12-18)
| [ 0:00] Driver version:    4.35.0
| [ 0:00] Kernel is Linux localhost.localdomain 3.10.0-693.11.1.el7.x86_64 #1 SMP Mon Dec 4 23:52:40 UTC 2017 x86_64 GNU/Linux
| [ 0:00] Selinux mode is not installed.
| [ 0:00]               total        used        free      shared  buff/cache   available
| [ 0:00] Mem:           7822        1080        4144          10        2598        6435
| [ 0:00] Swap:          4095           0        4095
| [ 0:00] Filesystem      Size  Used Avail Use% Mounted on
| [ 0:00] /dev/sdc1        18G  8.4G  8.4G  50% /
| [ 0:00] /dev/sdd1        51G  6.1G   43G  13% /lfskernel
| [ 0:00] devtmpfs        3.9G     0  3.9G   0% /dev
| [ 0:00] tmpfs           3.9G     0  3.9G   0% /run
| [ 0:00] @TESTDIR=/tmp/LVMTEST18565.0W2ukt7sVj
| [ 0:00] @PREFIX=LVMTEST18565
| [ 0:00] ## LVMCONF: activation {
| [ 0:00] ## LVMCONF:     checks = 1
| [ 0:00] ## LVMCONF:     monitoring = 0
| [ 0:00] ## LVMCONF:     polling_interval = 1
| [ 0:00] ## LVMCONF:     raid_region_size = 512
| [ 0:00] ## LVMCONF:     retry_deactivation = 1
| [ 0:00] ## LVMCONF:     snapshot_autoextend_percent = 50
| [ 0:00] ## LVMCONF:     snapshot_autoextend_threshold = 50
| [ 0:00] ## LVMCONF:     udev_rules = 1
| [ 0:00] ## LVMCONF:     udev_sync = 1
| [ 0:00] ## LVMCONF:     verify_udev_operations = 1
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: allocation {
| [ 0:00] ## LVMCONF:     wipe_signatures_when_zeroing_new_lvs = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: backup {
| [ 0:00] ## LVMCONF:     archive = 0
| [ 0:00] ## LVMCONF:     backup = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: devices {
| [ 0:00] ## LVMCONF:     cache_dir = "@TESTDIR@/etc"
| [ 0:00] ## LVMCONF:     default_data_alignment = 1
| [ 0:00] ## LVMCONF:     dir = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     filter = "a|.*|"
| [ 0:00] ## LVMCONF:     global_filter = [ "a|@TESTDIR@/dev/mapper/@PREFIX@.*pv[0-9_]*$|", "r|.*|" ]
| [ 0:00] ## LVMCONF:     md_component_detection  = 0
| [ 0:00] ## LVMCONF:     scan = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     sysfs_scan = 1
| [ 0:00] ## LVMCONF:     write_cache_state = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: dmeventd {
| [ 0:00] ## LVMCONF:     executable = "/sources/boot/LVM2.2.02.177/test/lib/dmeventd"
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: global {
| [ 0:00] ## LVMCONF:     abort_on_internal_errors = 1
| [ 0:00] ## LVMCONF:     cache_check_executable = "/usr/sbin/cache_check"
| [ 0:00] ## LVMCONF:     cache_dump_executable = "/usr/sbin/cache_dump"
| [ 0:00] ## LVMCONF:     cache_repair_executable = "/usr/sbin/cache_repair"
| [ 0:00] ## LVMCONF:     detect_internal_vg_cache_corruption = 1
| [ 0:00] ## LVMCONF:     fallback_to_local_locking = 0
| [ 0:00] ## LVMCONF:     fsadm_executable = "/sources/boot/LVM2.2.02.177/test/lib/fsadm"
| [ 0:00] ## LVMCONF:     library_dir = "@TESTDIR@/lib"
| [ 0:00] ## LVMCONF:     locking_dir = "@TESTDIR@/var/lock/lvm"
| [ 0:00] ## LVMCONF:     locking_type=1
| [ 0:00] ## LVMCONF:     notify_dbus = 0
| [ 0:00] ## LVMCONF:     si_unit_consistency = 1
| [ 0:00] ## LVMCONF:     thin_check_executable = "/usr/sbin/thin_check"
| [ 0:00] ## LVMCONF:     thin_dump_executable = "/usr/sbin/thin_dump"
| [ 0:00] ## LVMCONF:     thin_repair_executable = "/usr/sbin/thin_repair"
| [ 0:00] ## LVMCONF:     use_lvmetad = 0
| [ 0:00] ## LVMCONF:     use_lvmlockd = 0
| [ 0:00] ## LVMCONF:     use_lvmpolld = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: log {
| [ 0:00] ## LVMCONF:     activation = 1
| [ 0:00] ## LVMCONF:     file = "@TESTDIR@/debug.log"
| [ 0:00] ## LVMCONF:     indent = 1
| [ 0:00] ## LVMCONF:     level = 9
| [ 0:00] ## LVMCONF:     overwrite = 1
| [ 0:00] ## LVMCONF:     syslog = 0
| [ 0:00] ## LVMCONF:     verbose = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] <======== Processing test: "pvmove-basic.sh" ========>
| [ 0:01] 
| [ 0:01] which md5sum || skip
| [ 0:01] #pvmove-basic.sh:23+ which md5sum
| [ 0:01] /usr/bin/md5sum
| [ 0:01] 
| [ 0:01] # ---------------------------------------------------------------------
| [ 0:01] # Utilities
| [ 0:01] 
| [ 0:01] create_vg_() {
| [ 0:01] 	vgcreate -c n -s 128k "$vg" "${DEVICES[@]}"
| [ 0:01] }
| [ 0:01] 
| [ 0:01] # ---------------------------------------------------------------------
| [ 0:01] # Common environment setup/cleanup for each sub testcases
| [ 0:01] prepare_lvs_() {
| [ 0:01] 	lvcreate -l2 -n $lv1 $vg "$dev1"
| [ 0:01] 	check lv_on $vg $lv1 "$dev1"
| [ 0:01] 	lvcreate -l9 -i3 -n $lv2 $vg "$dev2" "$dev3" "$dev4"
| [ 0:01] 	check lv_on $vg $lv2 "$dev2" "$dev3" "$dev4"
| [ 0:01] 	lvextend -l+2 $vg/$lv1 "$dev2"
| [ 0:01] 	check lv_on $vg $lv1 "$dev1" "$dev2"
| [ 0:01] 	lvextend -l+2 $vg/$lv1 "$dev3"
| [ 0:01] 	lvextend -l+2 $vg/$lv1 "$dev1"
| [ 0:01] 	check lv_on $vg $lv1 "$dev1" "$dev2" "$dev3"
| [ 0:01] 	lvcreate -l1 -n $lv3 $vg "$dev2"
| [ 0:01] 	check lv_on $vg $lv3 "$dev2"
| [ 0:01] 	aux mkdev_md5sum $vg $lv1
| [ 0:01] 	aux mkdev_md5sum $vg $lv2
| [ 0:01] 	aux mkdev_md5sum $vg $lv3
| [ 0:01] 	get lv_devices "$vg/$lv1" > "${lv1}_devs"
| [ 0:01] 	get lv_devices "$vg/$lv2" > "${lv2}_devs"
| [ 0:01] 	get lv_devices "$vg/$lv3" > "${lv3}_devs"
| [ 0:01] 	lvs -a -o name,size,seg_pe_ranges $vg
| [ 0:01] 	vgcfgbackup -f bak-$$ $vg
| [ 0:01] }
| [ 0:01] 
| [ 0:01] # Restore metadata content, since data are pvmove-ed
| [ 0:01] # original content should be preserved
| [ 0:01] restore_lvs_() {
| [ 0:01] 	vgcfgrestore -f bak-$$ $vg
| [ 0:01] 	vgchange -ay $vg
| [ 0:01] }
| [ 0:01] 
| [ 0:01] lvs_not_changed_() {
| [ 0:01] 	for i in "${@}"; do
| [ 0:01] 		get lv_devices "$vg/$i" | tee out
| [ 0:01] 		diff "${i}_devs" out || \
| [ 0:01] 			(cat "${i}_devs"; die "Devices for LV $vg/$i differs!")
| [ 0:01] 	done
| [ 0:01] }
| [ 0:01] 
| [ 0:01] check_and_cleanup_lvs_() {
| [ 0:01] 	check dev_md5sum $vg $lv1
| [ 0:01] 	check dev_md5sum $vg $lv2
| [ 0:01] 	check dev_md5sum $vg $lv3
| [ 0:01] 	get lv_field $vg name -a >out
| [ 0:01] 	not grep "^\[pvmove" out
| [ 0:01] 	vgchange -an $vg
| [ 0:01] 	lvremove -ff $vg
| [ 0:01] 	(dm_table | not grep $vg) || \
| [ 0:01] 	      die "ERROR: lvremove did leave some mappings in DM behind!"
| [ 0:01] }
| [ 0:01] 
| [ 0:01] # ---------------------------------------------------------------------
| [ 0:01] # Initialize PVs and VGs
| [ 0:01] 
| [ 0:01] aux prepare_pvs 5 5
| [ 0:01] #pvmove-basic.sh:86+ aux prepare_pvs 5 5
| [ 0:01] ## preparing loop device....ok (/dev/loop0)
| [ 0:01] ## preparing 5 devices...lib/utils: line 212: DM_UDEV_COOKIE: unbound variable
| [ 0:01] set +vx; STACKTRACE; set -vx
| [ 0:01] ##pvmove-basic.sh:86+ set +vx
| [ 0:01] ## - /lfskernel/sources/boot/LVM2.2.02.177/test/shell/pvmove-basic.sh:86
| [ 0:01] ## 1 STACKTRACE() called from /lfskernel/sources/boot/LVM2.2.02.177/test/shell/pvmove-basic.sh:86
| [ 0:01] <======== Info ========>
| [ 0:01] ## DMINFO:   Name             Maj Min Stat Open Targ Event  UUID                                                                
| [ 0:01] ## DMINFO:   @PREFIX@pv5  253   6 L--w    0    1      0 TEST-@PREFIX@pv5                                                
| [ 0:01] ## DMINFO:   @PREFIX@pv4  253   5 L--w    0    1      0 TEST-@PREFIX@pv4                                                
| [ 0:01] ## DMINFO:   @PREFIX@pv3  253   4 L--w    0    1      0 TEST-@PREFIX@pv3                                                
| [ 0:01] ## DMINFO:   @PREFIX@pv2  253   3 L--w    0    1      0 TEST-@PREFIX@pv2                                                
| [ 0:01] ## DMINFO:   @PREFIX@pv1  253   7 L--w    0    1      0 TEST-@PREFIX@pv1                                                
| [ 0:01] <======== Active table ========>
| [ 0:01] ## DMTABLE:  @PREFIX@pv5: 0 10240 linear 7:0 43008
| [ 0:01] ## DMTABLE:  @PREFIX@pv4: 0 10240 linear 7:0 32768
| [ 0:01] ## DMTABLE:  @PREFIX@pv3: 0 10240 linear 7:0 22528
| [ 0:01] ## DMTABLE:  @PREFIX@pv2: 0 10240 linear 7:0 12288
| [ 0:01] ## DMTABLE:  @PREFIX@pv1: 0 10240 linear 7:0 2048
| [ 0:01] <======== Inactive table ========>
| [ 0:01] ## DMITABLE: @PREFIX@pv5: 
| [ 0:01] ## DMITABLE: @PREFIX@pv4: 
| [ 0:01] ## DMITABLE: @PREFIX@pv3: 
| [ 0:01] ## DMITABLE: @PREFIX@pv2: 
| [ 0:01] ## DMITABLE: @PREFIX@pv1: 
| [ 0:01] <======== Status ========>
| [ 0:01] ## DMSTATUS: @PREFIX@pv5: 0 10240 linear 
| [ 0:01] ## DMSTATUS: @PREFIX@pv4: 0 10240 linear 
| [ 0:01] ## DMSTATUS: @PREFIX@pv3: 0 10240 linear 
| [ 0:01] ## DMSTATUS: @PREFIX@pv2: 0 10240 linear 
| [ 0:01] ## DMSTATUS: @PREFIX@pv1: 0 10240 linear 
| [ 0:01] <======== Tree ========>
| [ 0:01] ## DMTREE:   @PREFIX@pv5 (253:6)
| [ 0:01] ## DMTREE:    `- (7:0)
| [ 0:01] ## DMTREE:   @PREFIX@pv4 (253:5)
| [ 0:01] ## DMTREE:    `- (7:0)
| [ 0:01] ## DMTREE:   @PREFIX@pv3 (253:4)
| [ 0:01] ## DMTREE:    `- (7:0)
| [ 0:01] ## DMTREE:   @PREFIX@pv2 (253:3)
| [ 0:01] ## DMTREE:    `- (7:0)
| [ 0:01] ## DMTREE:   @PREFIX@pv1 (253:7)
| [ 0:01] ## DMTREE:    `- (7:0)
| [ 0:01] ## DMTREE:   LFS_vg-lfs (253:2)
| [ 0:01] ## DMTREE:    `- (8:16)
| [ 0:01] ## DMTREE:   centos-swap (253:1)
| [ 0:01] ## DMTREE:    `- (8:2)
| [ 0:01] ## DMTREE:   centos-root (253:0)
| [ 0:01] ## DMTREE:    `- (8:2)
| [ 0:01] <======== Recursive list of @TESTDIR@/dev ========>
| [ 0:01] ## LSLR:	@TESTDIR@/dev:
| [ 0:01] ## LSLR:	total 4
| [ 0:01] ## LSLR:	brw-r--r-- 1 root root 7, 0 Feb 21 02:27 loop0
| [ 0:01] ## LSLR:	brw-r--r-- 1 root root 7, 1 Feb 21 02:27 loop1
| [ 0:01] ## LSLR:	brw-r--r-- 1 root root 7, 2 Feb 21 02:27 loop2
| [ 0:01] ## LSLR:	brw-r--r-- 1 root root 7, 3 Feb 21 02:27 loop3
| [ 0:01] ## LSLR:	brw-r--r-- 1 root root 7, 4 Feb 21 02:27 loop4
| [ 0:01] ## LSLR:	brw-r--r-- 1 root root 7, 5 Feb 21 02:27 loop5
| [ 0:01] ## LSLR:	brw-r--r-- 1 root root 7, 6 Feb 21 02:27 loop6
| [ 0:01] ## LSLR:	brw-r--r-- 1 root root 7, 7 Feb 21 02:27 loop7
| [ 0:01] ## LSLR:	drwxr-xr-x 2 root root 4096 Feb 21 02:27 mapper
| [ 0:01] ## LSLR:	crw-r--r-- 1 root root 1, 3 Feb 21 02:27 testnull
| [ 0:01] ## LSLR:	
| [ 0:01] ## LSLR:	@TESTDIR@/dev/mapper:
| [ 0:01] ## LSLR:	total 0
| [ 0:01] ## LSLR:	brw------- 1 root root 253,   7 Feb 21 02:27 @PREFIX@pv1
| [ 0:01] ## LSLR:	brw------- 1 root root 253,   3 Feb 21 02:27 @PREFIX@pv2
| [ 0:01] ## LSLR:	brw------- 1 root root 253,   4 Feb 21 02:27 @PREFIX@pv3
| [ 0:01] ## LSLR:	brw------- 1 root root 253,   5 Feb 21 02:27 @PREFIX@pv4
| [ 0:01] ## LSLR:	brw------- 1 root root 253,   6 Feb 21 02:27 @PREFIX@pv5
| [ 0:01] ## LSLR:	crw------- 1 root root  10, 236 Feb 21 02:27 control
| [ 0:01] <======== Udev DB content ========>
| [ 0:01] ## UDEV:	P: /devices/virtual/block/dm-0
| [ 0:01] ## UDEV:	N: dm-0
| [ 0:01] ## UDEV:	E: DEVNAME=/dev/dm-0
| [ 0:01] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-0
| [ 0:01] ## UDEV:	E: DEVTYPE=disk
| [ 0:01] ## UDEV:	E: MAJOR=253
| [ 0:01] ## UDEV:	E: MINOR=0
| [ 0:01] ## UDEV:	E: SUBSYSTEM=block
| [ 0:01] ## UDEV:	
| [ 0:01] ## UDEV:	P: /devices/virtual/block/dm-1
| [ 0:01] ## UDEV:	N: dm-1
| [ 0:01] ## UDEV:	E: DEVNAME=/dev/dm-1
| [ 0:01] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-1
| [ 0:01] ## UDEV:	E: DEVTYPE=disk
| [ 0:01] ## UDEV:	E: MAJOR=253
| [ 0:01] ## UDEV:	E: MINOR=1
| [ 0:01] ## UDEV:	E: SUBSYSTEM=block
| [ 0:01] ## UDEV:	
| [ 0:01] ## UDEV:	P: /devices/virtual/block/dm-2
| [ 0:01] ## UDEV:	N: dm-2
| [ 0:01] ## UDEV:	E: DEVNAME=/dev/dm-2
| [ 0:01] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-2
| [ 0:01] ## UDEV:	E: DEVTYPE=disk
| [ 0:01] ## UDEV:	E: MAJOR=253
| [ 0:01] ## UDEV:	E: MINOR=2
| [ 0:01] ## UDEV:	E: SUBSYSTEM=block
| [ 0:01] ## UDEV:	
| [ 0:01] ## UDEV:	P: /devices/virtual/block/dm-3
| [ 0:01] ## UDEV:	N: dm-3
| [ 0:01] ## UDEV:	E: DEVNAME=/dev/dm-3
| [ 0:01] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-3
| [ 0:01] ## UDEV:	E: DEVTYPE=disk
| [ 0:01] ## UDEV:	E: MAJOR=253
| [ 0:01] ## UDEV:	E: MINOR=3
| [ 0:01] ## UDEV:	E: SUBSYSTEM=block
| [ 0:01] ## UDEV:	
| [ 0:01] ## UDEV:	P: /devices/virtual/block/dm-4
| [ 0:01] ## UDEV:	N: dm-4
| [ 0:01] ## UDEV:	E: DEVNAME=/dev/dm-4
| [ 0:01] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-4
| [ 0:01] ## UDEV:	E: DEVTYPE=disk
| [ 0:01] ## UDEV:	E: MAJOR=253
| [ 0:01] ## UDEV:	E: MINOR=4
| [ 0:01] ## UDEV:	E: SUBSYSTEM=block
| [ 0:01] ## UDEV:	
| [ 0:01] ## UDEV:	P: /devices/virtual/block/dm-5
| [ 0:01] ## UDEV:	N: dm-5
| [ 0:01] ## UDEV:	E: DEVNAME=/dev/dm-5
| [ 0:01] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-5
| [ 0:01] ## UDEV:	E: DEVTYPE=disk
| [ 0:01] ## UDEV:	E: MAJOR=253
| [ 0:01] ## UDEV:	E: MINOR=5
| [ 0:01] ## UDEV:	E: SUBSYSTEM=block
| [ 0:01] ## UDEV:	
| [ 0:01] ## UDEV:	P: /devices/virtual/block/dm-6
| [ 0:01] ## UDEV:	N: dm-6
| [ 0:01] ## UDEV:	E: DEVNAME=/dev/dm-6
| [ 0:01] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-6
| [ 0:01] ## UDEV:	E: DEVTYPE=disk
| [ 0:01] ## UDEV:	E: MAJOR=253
| [ 0:01] ## UDEV:	E: MINOR=6
| [ 0:01] ## UDEV:	E: SUBSYSTEM=block
| [ 0:01] ## UDEV:	
| [ 0:01] ## UDEV:	P: /devices/virtual/block/dm-7
| [ 0:01] ## UDEV:	N: dm-7
| [ 0:01] ## UDEV:	E: DEVNAME=/dev/dm-7
| [ 0:01] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-7
| [ 0:01] ## UDEV:	E: DEVTYPE=disk
| [ 0:01] ## UDEV:	E: MAJOR=253
| [ 0:01] ## UDEV:	E: MINOR=7
| [ 0:01] ## UDEV:	E: SUBSYSTEM=block
| [ 0:01] ## UDEV:	
| [ 0:01] ## UDEV:	P: /devices/virtual/block/loop0
| [ 0:01] ## UDEV:	N: loop0
| [ 0:01] ## UDEV:	E: DEVNAME=/dev/loop0
| [ 0:01] ## UDEV:	E: DEVPATH=/devices/virtual/block/loop0
| [ 0:01] ## UDEV:	E: DEVTYPE=disk
| [ 0:01] ## UDEV:	E: MAJOR=7
| [ 0:01] ## UDEV:	E: MINOR=0
| [ 0:01] ## UDEV:	E: SUBSYSTEM=block
| [ 0:01] ## UDEV:	
| [ 0:01] <======== Script file "pvmove-basic.sh" ========>
| [ 0:01] ## Line: 1 	 #!/usr/bin/env bash
| [ 0:01] ## Line: 2 	 
| [ 0:01] ## Line: 3 	 # Copyright (C) 2008-2013 Red Hat, Inc. All rights reserved.
| [ 0:01] ## Line: 4 	 # Copyright (C) 2007 NEC Corporation
| [ 0:01] ## Line: 5 	 #
| [ 0:01] ## Line: 6 	 # This copyrighted material is made available to anyone wishing to use,
| [ 0:01] ## Line: 7 	 # modify, copy, or redistribute it subject to the terms and conditions
| [ 0:01] ## Line: 8 	 # of the GNU General Public License v.2.
| [ 0:01] ## Line: 9 	 #
| [ 0:01] ## Line: 10 	 # You should have received a copy of the GNU General Public License
| [ 0:01] ## Line: 11 	 # along with this program; if not, write to the Free Software Foundation,
| [ 0:01] ## Line: 12 	 # Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA
| [ 0:01] ## Line: 13 	 
| [ 0:01] ## Line: 14 	 test_description="ensure that pvmove works with basic options"
| [ 0:01] ## Line: 15 	 
| [ 0:01] ## Line: 16 	 SKIP_WITH_LVMLOCKD=1
| [ 0:01] ## Line: 17 	 
| [ 0:01] ## Line: 18 	 # disable lvmetad logging as it bogs down test systems
| [ 0:01] ## Line: 19 	 export LVM_TEST_LVMETAD_DEBUG_OPTS=${LVM_TEST_LVMETAD_DEBUG_OPTS-}
| [ 0:01] ## Line: 20 	 
| [ 0:01] ## Line: 21 	 . lib/inittest
| [ 0:01] ## Line: 22 	 
| [ 0:01] ## Line: 23 	 which md5sum || skip
| [ 0:01] ## Line: 24 	 
| [ 0:01] ## Line: 25 	 # ---------------------------------------------------------------------
| [ 0:01] ## Line: 26 	 # Utilities
| [ 0:01] ## Line: 27 	 
| [ 0:01] ## Line: 28 	 create_vg_() {
| [ 0:01] ## Line: 29 	 	vgcreate -c n -s 128k "$vg" "${DEVICES[@]}"
| [ 0:01] ## Line: 30 	 }
| [ 0:01] ## Line: 31 	 
| [ 0:01] ## Line: 32 	 # ---------------------------------------------------------------------
| [ 0:01] ## Line: 33 	 # Common environment setup/cleanup for each sub testcases
| [ 0:01] ## Line: 34 	 prepare_lvs_() {
| [ 0:01] ## Line: 35 	 	lvcreate -l2 -n $lv1 $vg "$dev1"
| [ 0:01] ## Line: 36 	 	check lv_on $vg $lv1 "$dev1"
| [ 0:01] ## Line: 37 	 	lvcreate -l9 -i3 -n $lv2 $vg "$dev2" "$dev3" "$dev4"
| [ 0:01] ## Line: 38 	 	check lv_on $vg $lv2 "$dev2" "$dev3" "$dev4"
| [ 0:01] ## Line: 39 	 	lvextend -l+2 $vg/$lv1 "$dev2"
| [ 0:01] ## Line: 40 	 	check lv_on $vg $lv1 "$dev1" "$dev2"
| [ 0:01] ## Line: 41 	 	lvextend -l+2 $vg/$lv1 "$dev3"
| [ 0:01] ## Line: 42 	 	lvextend -l+2 $vg/$lv1 "$dev1"
| [ 0:01] ## Line: 43 	 	check lv_on $vg $lv1 "$dev1" "$dev2" "$dev3"
| [ 0:01] ## Line: 44 	 	lvcreate -l1 -n $lv3 $vg "$dev2"
| [ 0:01] ## Line: 45 	 	check lv_on $vg $lv3 "$dev2"
| [ 0:01] ## Line: 46 	 	aux mkdev_md5sum $vg $lv1
| [ 0:01] ## Line: 47 	 	aux mkdev_md5sum $vg $lv2
| [ 0:01] ## Line: 48 	 	aux mkdev_md5sum $vg $lv3
| [ 0:01] ## Line: 49 	 	get lv_devices "$vg/$lv1" > "${lv1}_devs"
| [ 0:01] ## Line: 50 	 	get lv_devices "$vg/$lv2" > "${lv2}_devs"
| [ 0:01] ## Line: 51 	 	get lv_devices "$vg/$lv3" > "${lv3}_devs"
| [ 0:01] ## Line: 52 	 	lvs -a -o name,size,seg_pe_ranges $vg
| [ 0:01] ## Line: 53 	 	vgcfgbackup -f bak-$$ $vg
| [ 0:01] ## Line: 54 	 }
| [ 0:01] ## Line: 55 	 
| [ 0:01] ## Line: 56 	 # Restore metadata content, since data are pvmove-ed
| [ 0:01] ## Line: 57 	 # original content should be preserved
| [ 0:01] ## Line: 58 	 restore_lvs_() {
| [ 0:01] ## Line: 59 	 	vgcfgrestore -f bak-$$ $vg
| [ 0:01] ## Line: 60 	 	vgchange -ay $vg
| [ 0:01] ## Line: 61 	 }
| [ 0:01] ## Line: 62 	 
| [ 0:01] ## Line: 63 	 lvs_not_changed_() {
| [ 0:01] ## Line: 64 	 	for i in "${@}"; do
| [ 0:01] ## Line: 65 	 		get lv_devices "$vg/$i" | tee out
| [ 0:01] ## Line: 66 	 		diff "${i}_devs" out || \
| [ 0:01] ## Line: 67 	 			(cat "${i}_devs"; die "Devices for LV $vg/$i differs!")
| [ 0:01] ## Line: 68 	 	done
| [ 0:01] ## Line: 69 	 }
| [ 0:01] ## Line: 70 	 
| [ 0:01] ## Line: 71 	 check_and_cleanup_lvs_() {
| [ 0:01] ## Line: 72 	 	check dev_md5sum $vg $lv1
| [ 0:01] ## Line: 73 	 	check dev_md5sum $vg $lv2
| [ 0:01] ## Line: 74 	 	check dev_md5sum $vg $lv3
| [ 0:01] ## Line: 75 	 	get lv_field $vg name -a >out
| [ 0:01] ## Line: 76 	 	not grep "^\[pvmove" out
| [ 0:01] ## Line: 77 	 	vgchange -an $vg
| [ 0:01] ## Line: 78 	 	lvremove -ff $vg
| [ 0:01] ## Line: 79 	 	(dm_table | not grep $vg) || \
| [ 0:01] ## Line: 80 	 	      die "ERROR: lvremove did leave some mappings in DM behind!"
| [ 0:01] ## Line: 81 	 }
| [ 0:01] ## Line: 82 	 
| [ 0:01] ## Line: 83 	 # ---------------------------------------------------------------------
| [ 0:01] ## Line: 84 	 # Initialize PVs and VGs
| [ 0:01] ## Line: 85 	 
| [ 0:01] ## Line: 86 	 aux prepare_pvs 5 5
| [ 0:01] ## Line: 87 	 get_devs
| [ 0:01] ## Line: 88 	 
| [ 0:01] ## Line: 89 	 create_vg_
| [ 0:01] ## Line: 90 	 
| [ 0:01] ## Line: 91 	 for mode in "--atomic" ""
| [ 0:01] ## Line: 92 	 do
| [ 0:01] ## Line: 93 	 
| [ 0:01] ## Line: 94 	 #COMM "check environment setup/cleanup"
| [ 0:01] ## Line: 95 	 prepare_lvs_
| [ 0:01] ## Line: 96 	 check_and_cleanup_lvs_
| [ 0:01] ## Line: 97 	 
| [ 0:01] ## Line: 98 	 # ---------------------------------------------------------------------
| [ 0:01] ## Line: 99 	 # pvmove tests
| [ 0:01] ## Line: 100 	 
| [ 0:01] ## Line: 101 	 # ---
| [ 0:01] ## Line: 102 	 # filter by LV
| [ 0:01] ## Line: 103 	 
| [ 0:01] ## Line: 104 	 #COMM "only specified LV is moved: from pv2 to pv5 only for lv1"
| [ 0:01] ## Line: 105 	 restore_lvs_
| [ 0:01] ## Line: 106 	 pvmove $mode -i1 -n $vg/$lv1 "$dev2" "$dev5"
| [ 0:01] ## Line: 107 	 check lv_on $vg $lv1 "$dev1" "$dev5" "$dev3"
| [ 0:01] ## Line: 108 	 lvs_not_changed_ $lv2 $lv3
| [ 0:01] ## Line: 109 	 check_and_cleanup_lvs_
| [ 0:01] ## Line: 110 	 
| [ 0:01] ## Line: 111 	 # ---
| [ 0:01] ## Line: 112 	 # segments in a LV
| [ 0:01] ## Line: 113 	 
| [ 0:01] ## Line: 114 	 #COMM "the 1st seg of 3-segs LV is moved: from pv1 of lv1 to pv4"
| [ 0:01] ## Line: 115 	 restore_lvs_
| [ 0:01] ## Line: 116 	 pvmove $mode -i0 -n $vg/$lv1 "$dev1" "$dev4"
| [ 0:01] ## Line: 117 	 check lv_on $vg $lv1 "$dev4" "$dev2" "$dev3"
| [ 0:01] ## Line: 118 	 lvs_not_changed_ $lv2 $lv3
| [ 0:01] ## Line: 119 	 check_and_cleanup_lvs_
| [ 0:01] ## Line: 120 	 
| [ 0:01] ## Line: 121 	 #COMM "the 2nd seg of 3-segs LV is moved: from pv2 of lv1 to pv4"
| [ 0:01] ## Line: 122 	 restore_lvs_
| [ 0:01] ## Line: 123 	 pvmove $mode -i0 -n $vg/$lv1 "$dev2" "$dev4"
| [ 0:01] ## Line: 124 	 check lv_on $vg $lv1 "$dev1" "$dev4" "$dev3"
| [ 0:01] ## Line: 125 	 lvs_not_changed_ $lv2 $lv3
| [ 0:01] ## Line: 126 	 check_and_cleanup_lvs_
| [ 0:01] ## Line: 127 	 
| [ 0:01] ## Line: 128 	 #COMM "the 3rd seg of 3-segs LV is moved: from pv3 of lv1 to pv4"
| [ 0:01] ## Line: 129 	 restore_lvs_
| [ 0:01] ## Line: 130 	 pvmove $mode -i0 -n $vg/$lv1 "$dev3" "$dev4"
| [ 0:01] ## Line: 131 	 check lv_on $vg $lv1 "$dev1" "$dev2" "$dev4"
| [ 0:01] ## Line: 132 	 lvs_not_changed_ $lv2 $lv3
| [ 0:01] ## Line: 133 	 check_and_cleanup_lvs_
| [ 0:01] ## Line: 134 	 
| [ 0:01] ## Line: 135 	 # ---
| [ 0:01] ## Line: 136 	 # multiple LVs matching
| [ 0:01] ## Line: 137 	 
| [ 0:01] ## Line: 138 	 #COMM "1 out of 3 LVs is moved: from pv4 to pv5"
| [ 0:01] ## Line: 139 	 restore_lvs_
| [ 0:01] ## Line: 140 	 pvmove $mode -i0 "$dev4" "$dev5"
| [ 0:01] ## Line: 141 	 check lv_on $vg $lv2 "$dev2" "$dev3" "$dev5"
| [ 0:01] ## Line: 142 	 lvs_not_changed_ $lv1 $lv3
| [ 0:01] ## Line: 143 	 check_and_cleanup_lvs_
| [ 0:01] ## Line: 144 	 
| [ 0:01] ## Line: 145 	 #COMM "2 out of 3 LVs are moved: from pv3 to pv5"
| [ 0:01] ## Line: 146 	 restore_lvs_
| [ 0:01] ## Line: 147 	 pvmove $mode -i0 "$dev3" "$dev5"
| [ 0:01] ## Line: 148 	 check lv_on $vg $lv1 "$dev1" "$dev2" "$dev5"
| [ 0:01] ## Line: 149 	 check lv_on $vg $lv2 "$dev2" "$dev5" "$dev4"
| [ 0:01] ## Line: 150 	 lvs_not_changed_ $lv3
| [ 0:01] ## Line: 151 	 check_and_cleanup_lvs_
| [ 0:01] ## Line: 152 	 
| [ 0:01] ## Line: 153 	 #COMM "3 out of 3 LVs are moved: from pv2 to pv5"
| [ 0:01] ## Line: 154 	 restore_lvs_
| [ 0:01] ## Line: 155 	 pvmove $mode -i0 "$dev2" "$dev5"
| [ 0:01] ## Line: 156 	 check lv_on $vg $lv1 "$dev1" "$dev5" "$dev3"
| [ 0:01] ## Line: 157 	 check lv_on $vg $lv2 "$dev5" "$dev3" "$dev4"
| [ 0:01] ## Line: 158 	 check lv_on $vg $lv3 "$dev5"
| [ 0:01] ## Line: 159 	 check_and_cleanup_lvs_
| [ 0:01] ## Line: 160 	 
| [ 0:01] ## Line: 161 	 # ---
| [ 0:01] ## Line: 162 	 # areas of striping
| [ 0:01] ## Line: 163 	 
| [ 0:01] ## Line: 164 	 #COMM "move the 1st stripe: from pv2 of lv2 to pv1"
| [ 0:01] ## Line: 165 	 restore_lvs_
| [ 0:01] ## Line: 166 	 pvmove $mode -i0 -n $vg/$lv2 "$dev2" "$dev1"
| [ 0:01] ## Line: 167 	 check lv_on $vg $lv2 "$dev1" "$dev3" "$dev4"
| [ 0:01] ## Line: 168 	 lvs_not_changed_ $lv1 $lv3
| [ 0:01] ## Line: 169 	 check_and_cleanup_lvs_
| [ 0:01] ## Line: 170 	 
| [ 0:01] ## Line: 171 	 #COMM "move the 2nd stripe: from pv3 of lv2 to pv1"
| [ 0:01] ## Line: 172 	 restore_lvs_
| [ 0:01] ## Line: 173 	 pvmove $mode -i0 -n $vg/$lv2 "$dev3" "$dev1"
| [ 0:01] ## Line: 174 	 check lv_on $vg $lv2 "$dev2" "$dev1" "$dev4"
| [ 0:01] ## Line: 175 	 lvs_not_changed_ $lv1 $lv3
| [ 0:01] ## Line: 176 	 check_and_cleanup_lvs_
| [ 0:01] ## Line: 177 	 
| [ 0:01] ## Line: 178 	 #COMM "move the 3rd stripe: from pv4 of lv2 to pv1"
| [ 0:01] ## Line: 179 	 restore_lvs_
| [ 0:01] ## Line: 180 	 pvmove $mode -i0 -n $vg/$lv2 "$dev4" "$dev1"
| [ 0:01] ## Line: 181 	 check lv_on $vg $lv2 "$dev2" "$dev3" "$dev1"
| [ 0:01] ## Line: 182 	 lvs_not_changed_ $lv1 $lv3
| [ 0:01] ## Line: 183 	 check_and_cleanup_lvs_
| [ 0:01] ## Line: 184 	 
| [ 0:01] ## Line: 185 	 # ---
| [ 0:01] ## Line: 186 	 # partial segment match (source segment splitted)
| [ 0:01] ## Line: 187 	 
| [ 0:01] ## Line: 188 	 #COMM "match to the start of segment:from pv2:0-0 to pv5"
| [ 0:01] ## Line: 189 	 restore_lvs_
| [ 0:01] ## Line: 190 	 pvmove $mode -i0 "$dev2":0-0 "$dev5"
| [ 0:01] ## Line: 191 	 check lv_on $vg $lv2 "$dev5" "$dev2" "$dev3" "$dev4"
| [ 0:01] ## Line: 192 	 lvs_not_changed_ $lv1 $lv3
| [ 0:01] ## Line: 193 	 check_and_cleanup_lvs_
| [ 0:01] ## Line: 194 	 #exit 0
| [ 0:01] ## Line: 195 	 #COMM "match to the middle of segment: from pv2:1-1 to pv5"
| [ 0:01] ## Line: 196 	 restore_lvs_
| [ 0:01] ## Line: 197 	 pvmove $mode -i0 "$dev2":1-1 "$dev5"
| [ 0:01] ## Line: 198 	 check lv_on $vg $lv2 "$dev2" "$dev3" "$dev4" "$dev5"
| [ 0:01] ## Line: 199 	 lvs_not_changed_ $lv1 $lv3
| [ 0:01] ## Line: 200 	 check_and_cleanup_lvs_
| [ 0:01] ## Line: 201 	 
| [ 0:01] ## Line: 202 	 #COMM "match to the end of segment: from pv2:2-2 to pv5"
| [ 0:01] ## Line: 203 	 restore_lvs_
| [ 0:01] ## Line: 204 	 pvmove $mode -i0 "$dev2":2-2 "$dev5"
| [ 0:01] ## Line: 205 	 check lv_on $vg $lv2 "$dev2" "$dev5" "$dev3" "$dev4"
| [ 0:01] ## Line: 206 	 lvs_not_changed_ $lv1 $lv3
| [ 0:01] ## Line: 207 	 check_and_cleanup_lvs_
| [ 0:01] ## Line: 208 	 
| [ 0:01] ## Line: 209 	 # ---
| [ 0:01] ## Line: 210 	 # destination segment splitted
| [ 0:01] ## Line: 211 	 
| [ 0:01] ## Line: 212 	 #COMM "no destination split: from pv2:0-2 to pv5"
| [ 0:01] ## Line: 213 	 restore_lvs_
| [ 0:01] ## Line: 214 	 pvmove $mode -i0 "$dev2":0-2 "$dev5"
| [ 0:01] ## Line: 215 	 check lv_on $vg $lv2 "$dev5" "$dev3" "$dev4"
| [ 0:01] ## Line: 216 	 lvs_not_changed_ $lv1 $lv3
| [ 0:01] ## Line: 217 	 check_and_cleanup_lvs_
| [ 0:01] ## Line: 218 	 
| [ 0:01] ## Line: 219 	 #COMM "destination split into 2: from pv2:0-2 to pv5:5-5 and pv4:5-6"
| [ 0:01] ## Line: 220 	 restore_lvs_
| [ 0:01] ## Line: 221 	 pvmove $mode -i0 --alloc anywhere "$dev2":0-2 "$dev5":5-5 "$dev4":5-6
| [ 0:01] ## Line: 222 	 check lv_on $vg $lv2 "$dev5" "$dev4" "$dev3"
| [ 0:01] ## Line: 223 	 lvs_not_changed_ $lv1 $lv3
| [ 0:01] ## Line: 224 	 check_and_cleanup_lvs_
| [ 0:01] ## Line: 225 	 
| [ 0:01] ## Line: 226 	 #COMM "destination split into 3: from pv2:0-2 to {pv3,4,5}:5-5"
| [ 0:01] ## Line: 227 	 restore_lvs_
| [ 0:01] ## Line: 228 	 pvmove $mode -i0 --alloc anywhere "$dev2":0-2 "$dev3":5-5 "$dev4":5-5 "$dev5":5-5
| [ 0:01] ## Line: 229 	 check lv_on $vg $lv2 "$dev3" "$dev4" "$dev5"
| [ 0:01] ## Line: 230 	 lvs_not_changed_ $lv1 $lv3
| [ 0:01] ## Line: 231 	 check_and_cleanup_lvs_
| [ 0:01] ## Line: 232 	 
| [ 0:01] ## Line: 233 	 # ---
| [ 0:01] ## Line: 234 	 # alloc policy (anywhere, contiguous) with both success and failure cases
| [ 0:01] ## Line: 235 	 
| [ 0:01] ## Line: 236 	 #COMM "alloc normal on same PV for source and destination: from pv3:0-2 to pv3:5-7"
| [ 0:01] ## Line: 237 	 restore_lvs_
| [ 0:01] ## Line: 238 	 not pvmove $mode -i0 "$dev3":0-2 "$dev3":5-7
| [ 0:01] ## Line: 239 	 # "(cleanup previous test)"
| [ 0:01] ## Line: 240 	 lvs_not_changed_ $lv1 $lv2 $lv3
| [ 0:01] ## Line: 241 	 check_and_cleanup_lvs_
| [ 0:01] ## Line: 242 	 
| [ 0:01] ## Line: 243 	 #COMM "alloc anywhere on same PV for source and destination: from pv3:0-2 to pv3:5-7"
| [ 0:01] ## Line: 244 	 restore_lvs_
| [ 0:01] ## Line: 245 	 pvmove $mode -i0 --alloc anywhere "$dev3":0-2 "$dev3":5-7
| [ 0:01] ## Line: 246 	 check lv_on $vg $lv2 "$dev2" "$dev3" "$dev4"
| [ 0:01] ## Line: 247 	 lvs_not_changed_ $lv1 $lv3
| [ 0:01] ## Line: 248 	 check_and_cleanup_lvs_
| [ 0:01] ## Line: 249 	 
| [ 0:01] ## Line: 250 	 #COMM "alloc anywhere but better area available: from pv3:0-2 to pv3:5-7 or pv5:5-6,pv4:5-5"
| [ 0:01] ## Line: 251 	 restore_lvs_
| [ 0:01] ## Line: 252 	 #lvs -a -o name,size,seg_pe_ranges $vg
| [ 0:01] ## Line: 253 	 #LV2    1.12m @TESTDIR@/dev/mapper/@PREFIX@pv2:0-2 @TESTDIR@/dev/mapper/@PREFIX@pv3:0-2 @TESTDIR@/dev/mapper/@PREFIX@pv4:0-2
| [ 0:01] ## Line: 254 	 
| [ 0:01] ## Line: 255 	 pvmove $mode -i0 --alloc anywhere "$dev3":0-2 "$dev3":5-7 "$dev5":5-6 "$dev4":5-5
| [ 0:01] ## Line: 256 	 
| [ 0:01] ## Line: 257 	 #lvs -a -o name,size,seg_pe_ranges $vg
| [ 0:01] ## Line: 258 	 # Hmm is this correct ? - why pv2 is split
| [ 0:01] ## Line: 259 	 #LV2    1.12m @TESTDIR@/dev/mapper/@PREFIX@pv2:0-1 @TESTDIR@/dev/mapper/@PREFIX@pv5:5-6 @TESTDIR@/dev/mapper/@PREFIX@pv4:0-1
| [ 0:01] ## Line: 260 	 #LV2    1.12m @TESTDIR@/dev/mapper/@PREFIX@pv2:2-2 @TESTDIR@/dev/mapper/@PREFIX@pv3:5-5 @TESTDIR@/dev/mapper/@PREFIX@pv4:2-2
| [ 0:01] ## Line: 261 	 check lv_on $vg $lv2 "$dev2" "$dev3" "$dev4" "$dev5"
| [ 0:01] ## Line: 262 	 lvs_not_changed_ $lv1 $lv3
| [ 0:01] ## Line: 263 	 check_and_cleanup_lvs_
| [ 0:01] ## Line: 264 	 
| [ 0:01] ## Line: 265 	 #COMM "alloc contiguous but area not available: from pv2:0-2 to pv5:5-5 and pv4:5-6"
| [ 0:01] ## Line: 266 	 restore_lvs_
| [ 0:01] ## Line: 267 	 not pvmove $mode -i0 --alloc contiguous "$dev2":0-2 "$dev5":5-5 "$dev4":5-6
| [ 0:01] ## Line: 268 	 # "(cleanup previous test)"
| [ 0:01] ## Line: 269 	 lvs_not_changed_ $lv1 $lv2 $lv3
| [ 0:01] ## Line: 270 	 check_and_cleanup_lvs_
| [ 0:01] ## Line: 271 	 
| [ 0:01] ## Line: 272 	 #COMM "alloc contiguous and contiguous area available: from pv2:0-2 to pv5:0-0,pv5:3-5 and pv4:5-6"
| [ 0:01] ## Line: 273 	 restore_lvs_
| [ 0:01] ## Line: 274 	 pvmove $mode -i0 --alloc contiguous "$dev2":0-2 "$dev5":0-0 "$dev5":3-5 "$dev4":5-6
| [ 0:01] ## Line: 275 	 check lv_on $vg $lv2 "$dev5" "$dev3" "$dev4"
| [ 0:01] ## Line: 276 	 lvs_not_changed_ $lv1 $lv3
| [ 0:01] ## Line: 277 	 check_and_cleanup_lvs_
| [ 0:01] ## Line: 278 	 
| [ 0:01] ## Line: 279 	 # ---
| [ 0:01] ## Line: 280 	 # multiple segments in a LV
| [ 0:01] ## Line: 281 	 
| [ 0:01] ## Line: 282 	 #COMM "multiple source LVs: from pv3 to pv5"
| [ 0:01] ## Line: 283 	 restore_lvs_
| [ 0:01] ## Line: 284 	 pvmove $mode -i0 "$dev3" "$dev5"
| [ 0:01] ## Line: 285 	 check lv_on $vg $lv1 "$dev1" "$dev2" "$dev5"
| [ 0:01] ## Line: 286 	 check lv_on $vg $lv2 "$dev2" "$dev5" "$dev4"
| [ 0:01] ## Line: 287 	 lvs_not_changed_ $lv3
| [ 0:01] ## Line: 288 	 check_and_cleanup_lvs_
| [ 0:01] ## Line: 289 	 
| [ 0:01] ## Line: 290 	 # ---
| [ 0:01] ## Line: 291 	 # move inactive LV
| [ 0:01] ## Line: 292 	 
| [ 0:01] ## Line: 293 	 #COMM "move inactive LV: from pv2 to pv5"
| [ 0:01] ## Line: 294 	 restore_lvs_
| [ 0:01] ## Line: 295 	 lvchange -an $vg/$lv1
| [ 0:01] ## Line: 296 	 lvchange -an $vg/$lv3
| [ 0:01] ## Line: 297 	 pvmove $mode -i0 "$dev2" "$dev5"
| [ 0:01] ## Line: 298 	 check lv_on $vg $lv1 "$dev1" "$dev5" "$dev3"
| [ 0:01] ## Line: 299 	 check lv_on $vg $lv2 "$dev5" "$dev3" "$dev4"
| [ 0:01] ## Line: 300 	 check lv_on $vg $lv3 "$dev5"
| [ 0:01] ## Line: 301 	 check_and_cleanup_lvs_
| [ 0:01] ## Line: 302 	 
| [ 0:01] ## Line: 303 	 # ---
| [ 0:01] ## Line: 304 	 # other failure cases
| [ 0:01] ## Line: 305 	 
| [ 0:01] ## Line: 306 	 #COMM "no PEs to move: from pv3 to pv1"
| [ 0:01] ## Line: 307 	 restore_lvs_
| [ 0:01] ## Line: 308 	 pvmove $mode -i0 "$dev3" "$dev1"
| [ 0:01] ## Line: 309 	 not pvmove $mode -i0 "$dev3" "$dev1"
| [ 0:01] ## Line: 310 	 # "(cleanup previous test)"
| [ 0:01] ## Line: 311 	 check lv_on $vg $lv1 "$dev1" "$dev2" "$dev1"
| [ 0:01] ## Line: 312 	 check lv_on $vg $lv2 "$dev2" "$dev1" "$dev4"
| [ 0:01] ## Line: 313 	 lvs_not_changed_ $lv3
| [ 0:01] ## Line: 314 	 check_and_cleanup_lvs_
| [ 0:01] ## Line: 315 	 
| [ 0:01] ## Line: 316 	 #COMM "no space available: from pv2:0-0 to pv1:0-0"
| [ 0:01] ## Line: 317 	 restore_lvs_
| [ 0:01] ## Line: 318 	 not pvmove $mode -i0 "$dev2":0-0 "$dev1":0-0
| [ 0:01] ## Line: 319 	 # "(cleanup previous test)"
| [ 0:01] ## Line: 320 	 lvs_not_changed_ $lv1 $lv2 $lv3
| [ 0:01] ## Line: 321 	 check_and_cleanup_lvs_
| [ 0:01] ## Line: 322 	 
| [ 0:01] ## Line: 323 	 #COMM 'same source and destination: from pv1 to pv1'
| [ 0:01] ## Line: 324 	 restore_lvs_
| [ 0:01] ## Line: 325 	 not pvmove $mode -i0 "$dev1" "$dev1"
| [ 0:01] ## Line: 326 	 #"(cleanup previous test)"
| [ 0:01] ## Line: 327 	 lvs_not_changed_ $lv1 $lv2 $lv3
| [ 0:01] ## Line: 328 	 check_and_cleanup_lvs_
| [ 0:01] ## Line: 329 	 
| [ 0:01] ## Line: 330 	 #COMM "sum of specified destination PEs is large enough, but it includes source PEs and the free PEs are not enough"
| [ 0:01] ## Line: 331 	 restore_lvs_
| [ 0:01] ## Line: 332 	 not pvmove $mode --alloc anywhere "$dev1":0-2 "$dev1":0-2 "$dev5":0-0 2> err
| [ 0:01] ## Line: 333 	 #"(cleanup previous test)"
| [ 0:01] ## Line: 334 	 grep "Insufficient free space" err
| [ 0:01] ## Line: 335 	 lvs_not_changed_ $lv1 $lv2 $lv3
| [ 0:01] ## Line: 336 	 check_and_cleanup_lvs_
| [ 0:01] ## Line: 337 	 
| [ 0:01] ## Line: 338 	 # ---------------------------------------------------------------------
| [ 0:01] ## Line: 339 	 
| [ 0:01] ## Line: 340 	 #COMM "pvmove abort"
| [ 0:01] ## Line: 341 	 restore_lvs_
| [ 0:01] ## Line: 342 	 LVM_TEST_TAG="kill_me_$PREFIX" pvmove $mode -i100 -b "$dev1" "$dev3"
| [ 0:01] ## Line: 343 	 pvmove --abort
| [ 0:01] ## Line: 344 	 check_and_cleanup_lvs_
| [ 0:01] ## Line: 345 	 
| [ 0:01] ## Line: 346 	 #COMM "pvmove out of --metadatacopies 0 PV (bz252150)"
| [ 0:01] ## Line: 347 	 vgremove -ff $vg
| [ 0:01] ## Line: 348 	 pvcreate "${DEVICES[@]}"
| [ 0:01] ## Line: 349 	 pvcreate --metadatacopies 0 "$dev1" "$dev2"
| [ 0:01] ## Line: 350 	 create_vg_
| [ 0:01] ## Line: 351 	 lvcreate -l4 -n $lv1 $vg "$dev1"
| [ 0:01] ## Line: 352 	 pvmove $mode "$dev1"
| [ 0:01] ## Line: 353 	 
| [ 0:01] ## Line: 354 	 #COMM "pvmove fails activating mirror, properly restores state before pvmove"
| [ 0:01] ## Line: 355 	 dmsetup create $vg-pvmove0 --notable
| [ 0:01] ## Line: 356 	 not pvmove $mode -i 1 "$dev2"
| [ 0:01] ## Line: 357 	 dmsetup info --noheadings -c -o suspended $vg-$lv1
| [ 0:01] ## Line: 358 	 test "$(dmsetup info --noheadings -c -o suspended "$vg-$lv1")" = "Active"
| [ 0:01] ## Line: 359 	 if dmsetup info $vg-pvmove0_mimage_0 > /dev/null; then
| [ 0:01] ## Line: 360 	         dmsetup remove $vg-pvmove0 $vg-pvmove0_mimage_0 $vg-pvmove0_mimage_1
| [ 0:01] ## Line: 361 	 else
| [ 0:01] ## Line: 362 	         dmsetup remove $vg-pvmove0
| [ 0:01] ## Line: 363 	 fi
| [ 0:01] ## Line: 364 	 
| [ 0:01] ## Line: 365 	 lvremove -ff $vg
| [ 0:01] ## Line: 366 	 done
| [ 0:01] aux teardown
| [ 0:01] #pvmove-basic.sh:1+ aux teardown
| [ 0:01] ## teardown.........ok
###       failed: [ndev-vanilla] shell/pvmove-basic.sh
###      skipped: [ndev-vanilla] shell/pvmove-cache-segtypes.sh
###      skipped: [ndev-vanilla] shell/pvmove-raid-segtypes.sh

| [ 0:00] Library version:   1.02.146 (2017-12-18)
| [ 0:00] Driver version:    4.35.0
| [ 0:00] Kernel is Linux localhost.localdomain 3.10.0-693.11.1.el7.x86_64 #1 SMP Mon Dec 4 23:52:40 UTC 2017 x86_64 GNU/Linux
| [ 0:00] Selinux mode is not installed.
| [ 0:00]               total        used        free      shared  buff/cache   available
| [ 0:00] Mem:           7822        1080        4143          10        2598        6434
| [ 0:00] Swap:          4095           0        4095
| [ 0:00] Filesystem      Size  Used Avail Use% Mounted on
| [ 0:00] /dev/sdc1        18G  8.4G  8.4G  50% /
| [ 0:00] /dev/sdd1        51G  6.1G   43G  13% /lfskernel
| [ 0:00] devtmpfs        3.9G     0  3.9G   0% /dev
| [ 0:00] tmpfs           3.9G     0  3.9G   0% /run
| [ 0:00] @TESTDIR=/tmp/LVMTEST18912.0MDoYm9uoE
| [ 0:00] @PREFIX=LVMTEST18912
| [ 0:00] ## LVMCONF: activation {
| [ 0:00] ## LVMCONF:     checks = 1
| [ 0:00] ## LVMCONF:     monitoring = 0
| [ 0:00] ## LVMCONF:     polling_interval = 1
| [ 0:00] ## LVMCONF:     raid_region_size = 512
| [ 0:00] ## LVMCONF:     retry_deactivation = 1
| [ 0:00] ## LVMCONF:     snapshot_autoextend_percent = 50
| [ 0:00] ## LVMCONF:     snapshot_autoextend_threshold = 50
| [ 0:00] ## LVMCONF:     udev_rules = 1
| [ 0:00] ## LVMCONF:     udev_sync = 1
| [ 0:00] ## LVMCONF:     verify_udev_operations = 1
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: allocation {
| [ 0:00] ## LVMCONF:     wipe_signatures_when_zeroing_new_lvs = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: backup {
| [ 0:00] ## LVMCONF:     archive = 0
| [ 0:00] ## LVMCONF:     backup = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: devices {
| [ 0:00] ## LVMCONF:     cache_dir = "@TESTDIR@/etc"
| [ 0:00] ## LVMCONF:     default_data_alignment = 1
| [ 0:00] ## LVMCONF:     dir = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     filter = "a|.*|"
| [ 0:00] ## LVMCONF:     global_filter = [ "a|@TESTDIR@/dev/mapper/@PREFIX@.*pv[0-9_]*$|", "r|.*|" ]
| [ 0:00] ## LVMCONF:     md_component_detection  = 0
| [ 0:00] ## LVMCONF:     scan = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     sysfs_scan = 1
| [ 0:00] ## LVMCONF:     write_cache_state = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: dmeventd {
| [ 0:00] ## LVMCONF:     executable = "/sources/boot/LVM2.2.02.177/test/lib/dmeventd"
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: global {
| [ 0:00] ## LVMCONF:     abort_on_internal_errors = 1
| [ 0:00] ## LVMCONF:     cache_check_executable = "/usr/sbin/cache_check"
| [ 0:00] ## LVMCONF:     cache_dump_executable = "/usr/sbin/cache_dump"
| [ 0:00] ## LVMCONF:     cache_repair_executable = "/usr/sbin/cache_repair"
| [ 0:00] ## LVMCONF:     detect_internal_vg_cache_corruption = 1
| [ 0:00] ## LVMCONF:     fallback_to_local_locking = 0
| [ 0:00] ## LVMCONF:     fsadm_executable = "/sources/boot/LVM2.2.02.177/test/lib/fsadm"
| [ 0:00] ## LVMCONF:     library_dir = "@TESTDIR@/lib"
| [ 0:00] ## LVMCONF:     locking_dir = "@TESTDIR@/var/lock/lvm"
| [ 0:00] ## LVMCONF:     locking_type=1
| [ 0:00] ## LVMCONF:     notify_dbus = 0
| [ 0:00] ## LVMCONF:     si_unit_consistency = 1
| [ 0:00] ## LVMCONF:     thin_check_executable = "/usr/sbin/thin_check"
| [ 0:00] ## LVMCONF:     thin_dump_executable = "/usr/sbin/thin_dump"
| [ 0:00] ## LVMCONF:     thin_repair_executable = "/usr/sbin/thin_repair"
| [ 0:00] ## LVMCONF:     use_lvmetad = 0
| [ 0:00] ## LVMCONF:     use_lvmlockd = 0
| [ 0:00] ## LVMCONF:     use_lvmpolld = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: log {
| [ 0:00] ## LVMCONF:     activation = 1
| [ 0:00] ## LVMCONF:     file = "@TESTDIR@/debug.log"
| [ 0:00] ## LVMCONF:     indent = 1
| [ 0:00] ## LVMCONF:     level = 9
| [ 0:00] ## LVMCONF:     overwrite = 1
| [ 0:00] ## LVMCONF:     syslog = 0
| [ 0:00] ## LVMCONF:     verbose = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] <======== Processing test: "pvmove-restart.sh" ========>
| [ 0:00] 
| [ 0:00] aux prepare_pvs 3 60
| [ 0:00] #pvmove-restart.sh:19+ aux prepare_pvs 3 60
| [ 0:00] ## preparing loop device....ok (/dev/loop0)
| [ 0:00] ## preparing 3 devices...lib/utils: line 212: DM_UDEV_COOKIE: unbound variable
| [ 0:00] set +vx; STACKTRACE; set -vx
| [ 0:00] ##pvmove-restart.sh:19+ set +vx
| [ 0:00] ## - /lfskernel/sources/boot/LVM2.2.02.177/test/shell/pvmove-restart.sh:19
| [ 0:00] ## 1 STACKTRACE() called from /lfskernel/sources/boot/LVM2.2.02.177/test/shell/pvmove-restart.sh:19
| [ 0:00] <======== Info ========>
| [ 0:00] ## DMINFO:   Name             Maj Min Stat Open Targ Event  UUID                                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv3  253   3 L--w    0    1      0 TEST-@PREFIX@pv3                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv2  253   5 L--w    0    1      0 TEST-@PREFIX@pv2                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv1  253   4 L--w    0    1      0 TEST-@PREFIX@pv1                                                
| [ 0:00] <======== Active table ========>
| [ 0:00] ## DMTABLE:  @PREFIX@pv3: 0 122880 linear 7:0 247808
| [ 0:00] ## DMTABLE:  @PREFIX@pv2: 0 122880 linear 7:0 124928
| [ 0:00] ## DMTABLE:  @PREFIX@pv1: 0 122880 linear 7:0 2048
| [ 0:00] <======== Inactive table ========>
| [ 0:00] ## DMITABLE: @PREFIX@pv3: 
| [ 0:00] ## DMITABLE: @PREFIX@pv2: 
| [ 0:00] ## DMITABLE: @PREFIX@pv1: 
| [ 0:00] <======== Status ========>
| [ 0:00] ## DMSTATUS: @PREFIX@pv3: 0 122880 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv2: 0 122880 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv1: 0 122880 linear 
| [ 0:00] <======== Tree ========>
| [ 0:00] ## DMTREE:   @PREFIX@pv3 (253:3)
| [ 0:01] ## DMTREE:    `- (7:0)
| [ 0:01] ## DMTREE:   @PREFIX@pv2 (253:5)
| [ 0:01] ## DMTREE:    `- (7:0)
| [ 0:01] ## DMTREE:   LFS_vg-lfs (253:2)
| [ 0:01] ## DMTREE:    `- (8:16)
| [ 0:01] ## DMTREE:   @PREFIX@pv1 (253:4)
| [ 0:01] ## DMTREE:    `- (7:0)
| [ 0:01] ## DMTREE:   centos-swap (253:1)
| [ 0:01] ## DMTREE:    `- (8:2)
| [ 0:01] ## DMTREE:   centos-root (253:0)
| [ 0:01] ## DMTREE:    `- (8:2)
| [ 0:01] <======== Recursive list of @TESTDIR@/dev ========>
| [ 0:01] ## LSLR:	@TESTDIR@/dev:
| [ 0:01] ## LSLR:	total 4
| [ 0:01] ## LSLR:	brw-r--r-- 1 root root 7, 0 Feb 21 02:27 loop0
| [ 0:01] ## LSLR:	brw-r--r-- 1 root root 7, 1 Feb 21 02:27 loop1
| [ 0:01] ## LSLR:	brw-r--r-- 1 root root 7, 2 Feb 21 02:27 loop2
| [ 0:01] ## LSLR:	brw-r--r-- 1 root root 7, 3 Feb 21 02:27 loop3
| [ 0:01] ## LSLR:	brw-r--r-- 1 root root 7, 4 Feb 21 02:27 loop4
| [ 0:01] ## LSLR:	brw-r--r-- 1 root root 7, 5 Feb 21 02:27 loop5
| [ 0:01] ## LSLR:	brw-r--r-- 1 root root 7, 6 Feb 21 02:27 loop6
| [ 0:01] ## LSLR:	brw-r--r-- 1 root root 7, 7 Feb 21 02:27 loop7
| [ 0:01] ## LSLR:	drwxr-xr-x 2 root root 4096 Feb 21 02:27 mapper
| [ 0:01] ## LSLR:	crw-r--r-- 1 root root 1, 3 Feb 21 02:27 testnull
| [ 0:01] ## LSLR:	
| [ 0:01] ## LSLR:	@TESTDIR@/dev/mapper:
| [ 0:01] ## LSLR:	total 0
| [ 0:01] ## LSLR:	brw------- 1 root root 253,   4 Feb 21 02:27 @PREFIX@pv1
| [ 0:01] ## LSLR:	brw------- 1 root root 253,   5 Feb 21 02:27 @PREFIX@pv2
| [ 0:01] ## LSLR:	brw------- 1 root root 253,   3 Feb 21 02:27 @PREFIX@pv3
| [ 0:01] ## LSLR:	crw------- 1 root root  10, 236 Feb 21 02:27 control
| [ 0:01] <======== Udev DB content ========>
| [ 0:01] ## UDEV:	P: /devices/virtual/block/dm-0
| [ 0:01] ## UDEV:	N: dm-0
| [ 0:01] ## UDEV:	E: DEVNAME=/dev/dm-0
| [ 0:01] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-0
| [ 0:01] ## UDEV:	E: DEVTYPE=disk
| [ 0:01] ## UDEV:	E: MAJOR=253
| [ 0:01] ## UDEV:	E: MINOR=0
| [ 0:01] ## UDEV:	E: SUBSYSTEM=block
| [ 0:01] ## UDEV:	
| [ 0:01] ## UDEV:	P: /devices/virtual/block/dm-1
| [ 0:01] ## UDEV:	N: dm-1
| [ 0:01] ## UDEV:	E: DEVNAME=/dev/dm-1
| [ 0:01] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-1
| [ 0:01] ## UDEV:	E: DEVTYPE=disk
| [ 0:01] ## UDEV:	E: MAJOR=253
| [ 0:01] ## UDEV:	E: MINOR=1
| [ 0:01] ## UDEV:	E: SUBSYSTEM=block
| [ 0:01] ## UDEV:	
| [ 0:01] ## UDEV:	P: /devices/virtual/block/dm-2
| [ 0:01] ## UDEV:	N: dm-2
| [ 0:01] ## UDEV:	E: DEVNAME=/dev/dm-2
| [ 0:01] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-2
| [ 0:01] ## UDEV:	E: DEVTYPE=disk
| [ 0:01] ## UDEV:	E: MAJOR=253
| [ 0:01] ## UDEV:	E: MINOR=2
| [ 0:01] ## UDEV:	E: SUBSYSTEM=block
| [ 0:01] ## UDEV:	
| [ 0:01] ## UDEV:	P: /devices/virtual/block/dm-3
| [ 0:01] ## UDEV:	N: dm-3
| [ 0:01] ## UDEV:	E: DEVNAME=/dev/dm-3
| [ 0:01] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-3
| [ 0:01] ## UDEV:	E: DEVTYPE=disk
| [ 0:01] ## UDEV:	E: MAJOR=253
| [ 0:01] ## UDEV:	E: MINOR=3
| [ 0:01] ## UDEV:	E: SUBSYSTEM=block
| [ 0:01] ## UDEV:	
| [ 0:01] ## UDEV:	P: /devices/virtual/block/dm-4
| [ 0:01] ## UDEV:	N: dm-4
| [ 0:01] ## UDEV:	E: DEVNAME=/dev/dm-4
| [ 0:01] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-4
| [ 0:01] ## UDEV:	E: DEVTYPE=disk
| [ 0:01] ## UDEV:	E: MAJOR=253
| [ 0:01] ## UDEV:	E: MINOR=4
| [ 0:01] ## UDEV:	E: SUBSYSTEM=block
| [ 0:01] ## UDEV:	
| [ 0:01] ## UDEV:	P: /devices/virtual/block/dm-5
| [ 0:01] ## UDEV:	N: dm-5
| [ 0:01] ## UDEV:	E: DEVNAME=/dev/dm-5
| [ 0:01] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-5
| [ 0:01] ## UDEV:	E: DEVTYPE=disk
| [ 0:01] ## UDEV:	E: MAJOR=253
| [ 0:01] ## UDEV:	E: MINOR=5
| [ 0:01] ## UDEV:	E: SUBSYSTEM=block
| [ 0:01] ## UDEV:	
| [ 0:01] ## UDEV:	P: /devices/virtual/block/loop0
| [ 0:01] ## UDEV:	N: loop0
| [ 0:01] ## UDEV:	E: DEVNAME=/dev/loop0
| [ 0:01] ## UDEV:	E: DEVPATH=/devices/virtual/block/loop0
| [ 0:01] ## UDEV:	E: DEVTYPE=disk
| [ 0:01] ## UDEV:	E: MAJOR=7
| [ 0:01] ## UDEV:	E: MINOR=0
| [ 0:01] ## UDEV:	E: SUBSYSTEM=block
| [ 0:01] ## UDEV:	
| [ 0:01] <======== Script file "pvmove-restart.sh" ========>
| [ 0:01] ## Line: 1 	 #!/usr/bin/env bash
| [ 0:01] ## Line: 2 	 
| [ 0:01] ## Line: 3 	 # Copyright (C) 2013-2015 Red Hat, Inc. All rights reserved.
| [ 0:01] ## Line: 4 	 #
| [ 0:01] ## Line: 5 	 # This copyrighted material is made available to anyone wishing to use,
| [ 0:01] ## Line: 6 	 # modify, copy, or redistribute it subject to the terms and conditions
| [ 0:01] ## Line: 7 	 # of the GNU General Public License v.2.
| [ 0:01] ## Line: 8 	 #
| [ 0:01] ## Line: 9 	 # You should have received a copy of the GNU General Public License
| [ 0:01] ## Line: 10 	 # along with this program; if not, write to the Free Software Foundation,
| [ 0:01] ## Line: 11 	 # Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA
| [ 0:01] ## Line: 12 	 
| [ 0:01] ## Line: 13 	 # Check pvmove behavior when it's progress and machine is rebooted
| [ 0:01] ## Line: 14 	 
| [ 0:01] ## Line: 15 	 SKIP_WITH_LVMLOCKD=1
| [ 0:01] ## Line: 16 	 
| [ 0:01] ## Line: 17 	 . lib/inittest
| [ 0:01] ## Line: 18 	 
| [ 0:01] ## Line: 19 	 aux prepare_pvs 3 60
| [ 0:01] ## Line: 20 	 
| [ 0:01] ## Line: 21 	 vgcreate -s 128k $vg "$dev1" "$dev2"
| [ 0:01] ## Line: 22 	 pvcreate --metadatacopies 0 "$dev3"
| [ 0:01] ## Line: 23 	 vgextend $vg "$dev3"
| [ 0:01] ## Line: 24 	 
| [ 0:01] ## Line: 25 	 # Slowdown writes
| [ 0:01] ## Line: 26 	 # (FIXME: generates interesting race when not used)
| [ 0:01] ## Line: 27 	 aux delay_dev "$dev3" 0 800 "$(get first_extent_sector "$dev3"):"
| [ 0:01] ## Line: 28 	 test -e HAVE_DM_DELAY || skip
| [ 0:01] ## Line: 29 	 
| [ 0:01] ## Line: 30 	 for mode in "--atomic" ""
| [ 0:01] ## Line: 31 	 do
| [ 0:01] ## Line: 32 	 
| [ 0:01] ## Line: 33 	 # Create multisegment LV
| [ 0:01] ## Line: 34 	 lvcreate -an -Zn -l5 -n $lv1 $vg "$dev1"
| [ 0:01] ## Line: 35 	 lvextend -l+10 $vg/$lv1 "$dev2"
| [ 0:01] ## Line: 36 	 lvextend -l+5 $vg/$lv1 "$dev1"
| [ 0:01] ## Line: 37 	 lvextend -l+10 $vg/$lv1 "$dev2"
| [ 0:01] ## Line: 38 	 
| [ 0:01] ## Line: 39 	 pvmove -i10 -n $vg/$lv1 "$dev1" "$dev3" $mode &
| [ 0:01] ## Line: 40 	 PVMOVE=$!
| [ 0:01] ## Line: 41 	 # Let's wait a bit till pvmove starts and kill it
| [ 0:01] ## Line: 42 	 aux wait_pvmove_lv_ready "$vg-pvmove0"
| [ 0:01] ## Line: 43 	 kill -9 $PVMOVE
| [ 0:01] ## Line: 44 	 
| [ 0:01] ## Line: 45 	 if test -e LOCAL_LVMPOLLD; then
| [ 0:01] ## Line: 46 	 	aux prepare_lvmpolld
| [ 0:01] ## Line: 47 	 fi
| [ 0:01] ## Line: 48 	 
| [ 0:01] ## Line: 49 	 wait
| [ 0:01] ## Line: 50 	 
| [ 0:01] ## Line: 51 	 # Simulate reboot - forcibly remove related devices
| [ 0:01] ## Line: 52 	 
| [ 0:01] ## Line: 53 	 # First take down $lv1 then it's pvmove0
| [ 0:01] ## Line: 54 	 j=0
| [ 0:01] ## Line: 55 	 for i in $lv1 pvmove0 pvmove0_mimage_0 pvmove0_mimage_1 ; do
| [ 0:01] ## Line: 56 	 	while dmsetup status "$vg-$i"; do
| [ 0:01] ## Line: 57 	 		dmsetup remove "$vg-$i" || {
| [ 0:01] ## Line: 58 	 			j=$(( j + 1 ))
| [ 0:01] ## Line: 59 	 			test $j -le 100 || die "Cannot take down devices."
| [ 0:01] ## Line: 60 	 			sleep .1;
| [ 0:01] ## Line: 61 	 		}
| [ 0:01] ## Line: 62 	 	done
| [ 0:01] ## Line: 63 	 done
| [ 0:01] ## Line: 64 	 dmsetup table | grep $PREFIX
| [ 0:01] ## Line: 65 	 
| [ 0:01] ## Line: 66 	 # Check we really have pvmove volume
| [ 0:01] ## Line: 67 	 check lv_attr_bit type $vg/pvmove0 "p"
| [ 0:01] ## Line: 68 	 
| [ 0:01] ## Line: 69 	 if test -e LOCAL_CLVMD ; then
| [ 0:01] ## Line: 70 	 	# giveup all clvmd locks (faster then restarting clvmd)
| [ 0:01] ## Line: 71 	 	# no deactivation happen, nodes are already removed
| [ 0:01] ## Line: 72 	 	#vgchange -an $vg
| [ 0:01] ## Line: 73 	 	# FIXME: However above solution has one big problem
| [ 0:01] ## Line: 74 	 	# as clvmd starts to abort on internal errors on various
| [ 0:01] ## Line: 75 	 	# errors, based on the fact pvmove is killed -9
| [ 0:01] ## Line: 76 	 	# Restart clvmd
| [ 0:01] ## Line: 77 	 	kill "$(< LOCAL_CLVMD)"
| [ 0:01] ## Line: 78 	 	for i in $(seq 1 100) ; do
| [ 0:01] ## Line: 79 	 		test $i -eq 100 && die "Shutdown of clvmd is too slow."
| [ 0:01] ## Line: 80 	 		pgrep clvmd || break
| [ 0:01] ## Line: 81 	 		sleep .1
| [ 0:01] ## Line: 82 	 	done # wait for the pid removal
| [ 0:01] ## Line: 83 	 	aux prepare_clvmd
| [ 0:01] ## Line: 84 	 fi
| [ 0:01] ## Line: 85 	 
| [ 0:01] ## Line: 86 	 aux notify_lvmetad "$dev1" "$dev2" "$dev3"
| [ 0:01] ## Line: 87 	 
| [ 0:01] ## Line: 88 	 # Only PVs should be left in table...
| [ 0:01] ## Line: 89 	 dmsetup table
| [ 0:01] ## Line: 90 	 
| [ 0:01] ## Line: 91 	 # Restart pvmove
| [ 0:01] ## Line: 92 	 # use exclusive activation to have usable pvmove without cmirrord
| [ 0:01] ## Line: 93 	 LVM_TEST_TAG="kill_me_$PREFIX" vgchange --config 'activation{polling_interval=10}' -aey $vg
| [ 0:01] ## Line: 94 	 aux wait_pvmove_lv_ready "$vg-pvmove0"
| [ 0:01] ## Line: 95 	 dmsetup table
| [ 0:01] ## Line: 96 	 
| [ 0:01] ## Line: 97 	 pvmove --abort
| [ 0:01] ## Line: 98 	 
| [ 0:01] ## Line: 99 	 lvs -a -o+devices $vg
| [ 0:01] ## Line: 100 	 
| [ 0:01] ## Line: 101 	 lvremove -ff $vg
| [ 0:01] ## Line: 102 	 aux kill_tagged_processes
| [ 0:01] ## Line: 103 	 done
| [ 0:01] ## Line: 104 	 
| [ 0:01] ## Line: 105 	 # Restore delayed device back
| [ 0:01] ## Line: 106 	 aux delay_dev "$dev3"
| [ 0:01] ## Line: 107 	 
| [ 0:01] ## Line: 108 	 vgremove -ff $vg
| [ 0:01] aux teardown
| [ 0:01] #pvmove-restart.sh:1+ aux teardown
| [ 0:01] ## teardown.........ok
###       failed: [ndev-vanilla] shell/pvmove-restart.sh

| [ 0:00] Library version:   1.02.146 (2017-12-18)
| [ 0:00] Driver version:    4.35.0
| [ 0:00] Kernel is Linux localhost.localdomain 3.10.0-693.11.1.el7.x86_64 #1 SMP Mon Dec 4 23:52:40 UTC 2017 x86_64 GNU/Linux
| [ 0:00] Selinux mode is not installed.
| [ 0:00]               total        used        free      shared  buff/cache   available
| [ 0:00] Mem:           7822        1081        4143          10        2598        6435
| [ 0:00] Swap:          4095           0        4095
| [ 0:00] Filesystem      Size  Used Avail Use% Mounted on
| [ 0:00] /dev/sdc1        18G  8.4G  8.4G  50% /
| [ 0:00] /dev/sdd1        51G  6.1G   43G  13% /lfskernel
| [ 0:00] devtmpfs        3.9G     0  3.9G   0% /dev
| [ 0:00] tmpfs           3.9G     0  3.9G   0% /run
| [ 0:00] @TESTDIR=/tmp/LVMTEST19093.2IU0Hav7Wv
| [ 0:00] @PREFIX=LVMTEST19093
| [ 0:00] ## LVMCONF: activation {
| [ 0:00] ## LVMCONF:     checks = 1
| [ 0:00] ## LVMCONF:     monitoring = 0
| [ 0:00] ## LVMCONF:     polling_interval = 1
| [ 0:00] ## LVMCONF:     raid_region_size = 512
| [ 0:00] ## LVMCONF:     retry_deactivation = 1
| [ 0:00] ## LVMCONF:     snapshot_autoextend_percent = 50
| [ 0:00] ## LVMCONF:     snapshot_autoextend_threshold = 50
| [ 0:00] ## LVMCONF:     udev_rules = 1
| [ 0:00] ## LVMCONF:     udev_sync = 1
| [ 0:00] ## LVMCONF:     verify_udev_operations = 1
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: allocation {
| [ 0:00] ## LVMCONF:     wipe_signatures_when_zeroing_new_lvs = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: backup {
| [ 0:00] ## LVMCONF:     archive = 0
| [ 0:00] ## LVMCONF:     backup = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: devices {
| [ 0:00] ## LVMCONF:     cache_dir = "@TESTDIR@/etc"
| [ 0:00] ## LVMCONF:     default_data_alignment = 1
| [ 0:00] ## LVMCONF:     dir = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     filter = "a|.*|"
| [ 0:00] ## LVMCONF:     global_filter = [ "a|@TESTDIR@/dev/mapper/@PREFIX@.*pv[0-9_]*$|", "r|.*|" ]
| [ 0:00] ## LVMCONF:     md_component_detection  = 0
| [ 0:00] ## LVMCONF:     scan = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     sysfs_scan = 1
| [ 0:00] ## LVMCONF:     write_cache_state = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: dmeventd {
| [ 0:00] ## LVMCONF:     executable = "/sources/boot/LVM2.2.02.177/test/lib/dmeventd"
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: global {
| [ 0:00] ## LVMCONF:     abort_on_internal_errors = 1
| [ 0:00] ## LVMCONF:     cache_check_executable = "/usr/sbin/cache_check"
| [ 0:00] ## LVMCONF:     cache_dump_executable = "/usr/sbin/cache_dump"
| [ 0:00] ## LVMCONF:     cache_repair_executable = "/usr/sbin/cache_repair"
| [ 0:00] ## LVMCONF:     detect_internal_vg_cache_corruption = 1
| [ 0:00] ## LVMCONF:     fallback_to_local_locking = 0
| [ 0:00] ## LVMCONF:     fsadm_executable = "/sources/boot/LVM2.2.02.177/test/lib/fsadm"
| [ 0:00] ## LVMCONF:     library_dir = "@TESTDIR@/lib"
| [ 0:00] ## LVMCONF:     locking_dir = "@TESTDIR@/var/lock/lvm"
| [ 0:00] ## LVMCONF:     locking_type=1
| [ 0:00] ## LVMCONF:     notify_dbus = 0
| [ 0:00] ## LVMCONF:     si_unit_consistency = 1
| [ 0:00] ## LVMCONF:     thin_check_executable = "/usr/sbin/thin_check"
| [ 0:00] ## LVMCONF:     thin_dump_executable = "/usr/sbin/thin_dump"
| [ 0:00] ## LVMCONF:     thin_repair_executable = "/usr/sbin/thin_repair"
| [ 0:00] ## LVMCONF:     use_lvmetad = 0
| [ 0:00] ## LVMCONF:     use_lvmlockd = 0
| [ 0:00] ## LVMCONF:     use_lvmpolld = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: log {
| [ 0:00] ## LVMCONF:     activation = 1
| [ 0:00] ## LVMCONF:     file = "@TESTDIR@/debug.log"
| [ 0:00] ## LVMCONF:     indent = 1
| [ 0:00] ## LVMCONF:     level = 9
| [ 0:00] ## LVMCONF:     overwrite = 1
| [ 0:00] ## LVMCONF:     syslog = 0
| [ 0:00] ## LVMCONF:     verbose = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] <======== Processing test: "pvmove-resume-1.sh" ========>
| [ 0:00] 
| [ 0:00] aux prepare_pvs 4 30
| [ 0:00] #pvmove-resume-1.sh:23+ aux prepare_pvs 4 30
| [ 0:00] ## preparing loop device....ok (/dev/loop0)
| [ 0:00] ## preparing 4 devices...lib/utils: line 212: DM_UDEV_COOKIE: unbound variable
| [ 0:00] set +vx; STACKTRACE; set -vx
| [ 0:00] ##pvmove-resume-1.sh:23+ set +vx
| [ 0:00] ## - /lfskernel/sources/boot/LVM2.2.02.177/test/shell/pvmove-resume-1.sh:23
| [ 0:00] ## 1 STACKTRACE() called from /lfskernel/sources/boot/LVM2.2.02.177/test/shell/pvmove-resume-1.sh:23
| [ 0:00] <======== Info ========>
| [ 0:00] ## DMINFO:   Name             Maj Min Stat Open Targ Event  UUID                                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv2  253   4 L--w    0    1      0 TEST-@PREFIX@pv2                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv1  253   3 L--w    0    1      0 TEST-@PREFIX@pv1                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv4  253   6 L--w    0    1      0 TEST-@PREFIX@pv4                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv3  253   5 L--w    0    1      0 TEST-@PREFIX@pv3                                                
| [ 0:00] <======== Active table ========>
| [ 0:00] ## DMTABLE:  @PREFIX@pv2: 0 61440 linear 7:0 63488
| [ 0:00] ## DMTABLE:  @PREFIX@pv1: 0 61440 linear 7:0 2048
| [ 0:00] ## DMTABLE:  @PREFIX@pv4: 0 61440 linear 7:0 186368
| [ 0:00] ## DMTABLE:  @PREFIX@pv3: 0 61440 linear 7:0 124928
| [ 0:00] <======== Inactive table ========>
| [ 0:00] ## DMITABLE: @PREFIX@pv2: 
| [ 0:00] ## DMITABLE: @PREFIX@pv1: 
| [ 0:00] ## DMITABLE: @PREFIX@pv4: 
| [ 0:00] ## DMITABLE: @PREFIX@pv3: 
| [ 0:00] <======== Status ========>
| [ 0:00] ## DMSTATUS: @PREFIX@pv2: 0 61440 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv1: 0 61440 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv4: 0 61440 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv3: 0 61440 linear 
| [ 0:00] <======== Tree ========>
| [ 0:00] ## DMTREE:   @PREFIX@pv2 (253:4)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   @PREFIX@pv1 (253:3)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   @PREFIX@pv4 (253:6)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   LFS_vg-lfs (253:2)
| [ 0:00] ## DMTREE:    `- (8:16)
| [ 0:00] ## DMTREE:   @PREFIX@pv3 (253:5)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   centos-swap (253:1)
| [ 0:00] ## DMTREE:    `- (8:2)
| [ 0:00] ## DMTREE:   centos-root (253:0)
| [ 0:00] ## DMTREE:    `- (8:2)
| [ 0:00] <======== Recursive list of @TESTDIR@/dev ========>
| [ 0:00] ## LSLR:	@TESTDIR@/dev:
| [ 0:00] ## LSLR:	total 4
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 0 Feb 21 02:27 loop0
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 1 Feb 21 02:27 loop1
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 2 Feb 21 02:27 loop2
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 3 Feb 21 02:27 loop3
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 4 Feb 21 02:27 loop4
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 5 Feb 21 02:27 loop5
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 6 Feb 21 02:27 loop6
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 7 Feb 21 02:27 loop7
| [ 0:00] ## LSLR:	drwxr-xr-x 2 root root 4096 Feb 21 02:27 mapper
| [ 0:00] ## LSLR:	crw-r--r-- 1 root root 1, 3 Feb 21 02:27 testnull
| [ 0:00] ## LSLR:	
| [ 0:00] ## LSLR:	@TESTDIR@/dev/mapper:
| [ 0:00] ## LSLR:	total 0
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   3 Feb 21 02:27 @PREFIX@pv1
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   4 Feb 21 02:27 @PREFIX@pv2
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   5 Feb 21 02:27 @PREFIX@pv3
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   6 Feb 21 02:27 @PREFIX@pv4
| [ 0:00] ## LSLR:	crw------- 1 root root  10, 236 Feb 21 02:27 control
| [ 0:00] <======== Udev DB content ========>
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-0
| [ 0:00] ## UDEV:	N: dm-0
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-0
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-0
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=0
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-1
| [ 0:00] ## UDEV:	N: dm-1
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-1
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-1
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=1
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-2
| [ 0:00] ## UDEV:	N: dm-2
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-2
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-2
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=2
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-3
| [ 0:00] ## UDEV:	N: dm-3
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-3
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-3
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=3
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-4
| [ 0:00] ## UDEV:	N: dm-4
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-4
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-4
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=4
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-5
| [ 0:00] ## UDEV:	N: dm-5
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-5
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-5
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=5
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-6
| [ 0:00] ## UDEV:	N: dm-6
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-6
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-6
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=6
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/loop0
| [ 0:00] ## UDEV:	N: loop0
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/loop0
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/loop0
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=7
| [ 0:00] ## UDEV:	E: MINOR=0
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] <======== Script file "pvmove-resume-1.sh" ========>
| [ 0:00] ## Line: 1 	 #!/usr/bin/env bash
| [ 0:00] ## Line: 2 	 
| [ 0:00] ## Line: 3 	 # Copyright (C) 2015 Red Hat, Inc. All rights reserved.
| [ 0:00] ## Line: 4 	 #
| [ 0:00] ## Line: 5 	 # This copyrighted material is made available to anyone wishing to use,
| [ 0:00] ## Line: 6 	 # modify, copy, or redistribute it subject to the terms and conditions
| [ 0:00] ## Line: 7 	 # of the GNU General Public License v.2.
| [ 0:00] ## Line: 8 	 #
| [ 0:00] ## Line: 9 	 # You should have received a copy of the GNU General Public License
| [ 0:00] ## Line: 10 	 # along with this program; if not, write to the Free Software Foundation,
| [ 0:00] ## Line: 11 	 # Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA
| [ 0:00] ## Line: 12 	 
| [ 0:00] ## Line: 13 	 # Check whether all available pvmove resume methods works as expected.
| [ 0:00] ## Line: 14 	 # lvchange is able to resume pvmoves in progress.
| [ 0:00] ## Line: 15 	 
| [ 0:00] ## Line: 16 	 # 2 pvmove LVs in 2 VGs (1 per VG)
| [ 0:00] ## Line: 17 	 
| [ 0:00] ## Line: 18 	 SKIP_WITH_LVMLOCKD=1
| [ 0:00] ## Line: 19 	 SKIP_WITH_CLVMD=1
| [ 0:00] ## Line: 20 	 
| [ 0:00] ## Line: 21 	 . lib/inittest
| [ 0:00] ## Line: 22 	 
| [ 0:00] ## Line: 23 	 aux prepare_pvs 4 30
| [ 0:00] ## Line: 24 	 
| [ 0:00] ## Line: 25 	 vgcreate -s 128k $vg "$dev1"
| [ 0:00] ## Line: 26 	 vgcreate -s 128k $vg1 "$dev2"
| [ 0:00] ## Line: 27 	 pvcreate --metadatacopies 0 "$dev3"
| [ 0:00] ## Line: 28 	 pvcreate --metadatacopies 0 "$dev4"
| [ 0:00] ## Line: 29 	 vgextend $vg "$dev3"
| [ 0:00] ## Line: 30 	 vgextend $vg1 "$dev4"
| [ 0:00] ## Line: 31 	 
| [ 0:00] ## Line: 32 	 # $1 resume fn
| [ 0:00] ## Line: 33 	 test_pvmove_resume() {
| [ 0:00] ## Line: 34 	 	lvcreate -an -Zn -l30 -n $lv1 $vg
| [ 0:00] ## Line: 35 	 	lvcreate -an -Zn -l30 -n $lv1 $vg1
| [ 0:00] ## Line: 36 	 
| [ 0:00] ## Line: 37 	 	aux delay_dev "$dev3" 0 1000 "$(get first_extent_sector "$dev3"):"
| [ 0:00] ## Line: 38 	 	test -e HAVE_DM_DELAY || { lvremove -f $vg $vg1; return 0; }
| [ 0:00] ## Line: 39 	 	aux delay_dev "$dev4" 0 1000 "$(get first_extent_sector "$dev4"):"
| [ 0:00] ## Line: 40 	 
| [ 0:00] ## Line: 41 	 	pvmove -i5 "$dev1" &
| [ 0:00] ## Line: 42 	 	PVMOVE=$!
| [ 0:00] ## Line: 43 	 	aux wait_pvmove_lv_ready "$vg-pvmove0" 300
| [ 0:00] ## Line: 44 	 	kill -9 $PVMOVE
| [ 0:00] ## Line: 45 	 
| [ 0:00] ## Line: 46 	 	pvmove -i5 "$dev2" &
| [ 0:00] ## Line: 47 	 	PVMOVE=$!
| [ 0:00] ## Line: 48 	 	aux wait_pvmove_lv_ready "$vg1-pvmove0" 300
| [ 0:00] ## Line: 49 	 	kill -9 $PVMOVE
| [ 0:00] ## Line: 50 	 
| [ 0:00] ## Line: 51 	 	if test -e LOCAL_LVMPOLLD ; then
| [ 0:00] ## Line: 52 	 		aux prepare_lvmpolld
| [ 0:00] ## Line: 53 	 	fi
| [ 0:00] ## Line: 54 	 
| [ 0:00] ## Line: 55 	 	wait
| [ 0:00] ## Line: 56 	 
| [ 0:00] ## Line: 57 	 	local finished
| [ 0:00] ## Line: 58 	 	for i in {1..100}; do
| [ 0:00] ## Line: 59 	 		finished=1
| [ 0:00] ## Line: 60 	 		for d in  "$vg-$lv1" "$vg1-$lv1" "$vg-pvmove0" "$vg1-pvmove0" ; do
| [ 0:00] ## Line: 61 	 			dmsetup status "$d" 2>/dev/null && {
| [ 0:00] ## Line: 62 	 				dmsetup remove "$d" || finished=0
| [ 0:00] ## Line: 63 	 			}
| [ 0:00] ## Line: 64 	 		done
| [ 0:00] ## Line: 65 	 		test "$finished" -eq 0 || break
| [ 0:00] ## Line: 66 	 	done
| [ 0:00] ## Line: 67 	 	test "$finished" -eq 0 && die "Can't remove device"
| [ 0:00] ## Line: 68 	 
| [ 0:00] ## Line: 69 	 	check lv_attr_bit type $vg/pvmove0 "p"
| [ 0:00] ## Line: 70 	 	check lv_attr_bit type $vg1/pvmove0 "p"
| [ 0:00] ## Line: 71 	 
| [ 0:00] ## Line: 72 	 	if test -e LOCAL_CLVMD ; then
| [ 0:00] ## Line: 73 	 		# giveup all clvmd locks (faster then restarting clvmd)
| [ 0:00] ## Line: 74 	 		# no deactivation happen, nodes are already removed
| [ 0:00] ## Line: 75 	 		#vgchange -an $vg
| [ 0:00] ## Line: 76 	 		# FIXME: However above solution has one big problem
| [ 0:00] ## Line: 77 	 		# as clvmd starts to abort on internal errors on various
| [ 0:00] ## Line: 78 	 		# errors, based on the fact pvmove is killed -9
| [ 0:00] ## Line: 79 	 		# Restart clvmd
| [ 0:00] ## Line: 80 	 		kill "$(< LOCAL_CLVMD)"
| [ 0:00] ## Line: 81 	 		for i in $(seq 1 100) ; do
| [ 0:00] ## Line: 82 	 			test $i -eq 100 && die "Shutdown of clvmd is too slow."
| [ 0:00] ## Line: 83 	 			test -e "$CLVMD_PIDFILE" || break
| [ 0:00] ## Line: 84 	 			sleep .1
| [ 0:00] ## Line: 85 	 		done # wait for the pid removal
| [ 0:00] ## Line: 86 	 		aux prepare_clvmd
| [ 0:00] ## Line: 87 	 	fi
| [ 0:00] ## Line: 88 	 
| [ 0:00] ## Line: 89 	 	aux notify_lvmetad "$dev1" "$dev2" "$dev3" "$dev4"
| [ 0:00] ## Line: 90 	 
| [ 0:00] ## Line: 91 	 	# call resume function (see below)
| [ 0:00] ## Line: 92 	 	# with expected number of spawned
| [ 0:00] ## Line: 93 	 	# bg polling as parameter
| [ 0:00] ## Line: 94 	 	$1 2
| [ 0:00] ## Line: 95 	 
| [ 0:00] ## Line: 96 	 	aux enable_dev "$dev3"
| [ 0:00] ## Line: 97 	 	aux enable_dev "$dev4"
| [ 0:00] ## Line: 98 	 
| [ 0:00] ## Line: 99 	 	i=0
| [ 0:00] ## Line: 100 	 	while get lv_field $vg name -a | grep -E "^\[?pvmove"; do
| [ 0:00] ## Line: 101 	 		# wait for 30 secs at max
| [ 0:00] ## Line: 102 	 		test $i -ge 300 && die "Pvmove is too slow or does not progress."
| [ 0:00] ## Line: 103 	 		sleep .1
| [ 0:00] ## Line: 104 	 		i=$((i + 1))
| [ 0:00] ## Line: 105 	 	done
| [ 0:00] ## Line: 106 	 	while get lv_field $vg1 name -a | grep -E "^\[?pvmove"; do
| [ 0:00] ## Line: 107 	 		# wait for 30 secs at max
| [ 0:00] ## Line: 108 	 		test $i -ge 300 && die "Pvmove is too slow or does not progress."
| [ 0:00] ## Line: 109 	 		sleep .1
| [ 0:00] ## Line: 110 	 		i=$((i + 1))
| [ 0:00] ## Line: 111 	 	done
| [ 0:00] ## Line: 112 	 
| [ 0:00] ## Line: 113 	 	aux kill_tagged_processes
| [ 0:00] ## Line: 114 	 
| [ 0:00] ## Line: 115 	 	lvremove -ff $vg $vg1
| [ 0:00] ## Line: 116 	 }
| [ 0:00] ## Line: 117 	 
| [ 0:00] ## Line: 118 	 lvchange_single() {
| [ 0:00] ## Line: 119 	 	LVM_TEST_TAG="kill_me_$PREFIX" lvchange -aey $vg/$lv1
| [ 0:00] ## Line: 120 	 	LVM_TEST_TAG="kill_me_$PREFIX" lvchange -aey $vg1/$lv1
| [ 0:00] ## Line: 121 	 
| [ 0:00] ## Line: 122 	 	if test -e LOCAL_LVMPOLLD; then
| [ 0:00] ## Line: 123 	 		aux lvmpolld_dump | tee lvmpolld_dump.txt
| [ 0:00] ## Line: 124 	 		aux check_lvmpolld_init_rq_count 1 "$vg/pvmove0"
| [ 0:00] ## Line: 125 	 		aux check_lvmpolld_init_rq_count 1 "$vg1/pvmove0"
| [ 0:00] ## Line: 126 	 	else
| [ 0:00] ## Line: 127 	 		test "$(aux count_processes_with_tag)" -eq $1
| [ 0:00] ## Line: 128 	 	fi
| [ 0:00] ## Line: 129 	 }
| [ 0:00] ## Line: 130 	 
| [ 0:00] ## Line: 131 	 lvchange_all() {
| [ 0:00] ## Line: 132 	 	LVM_TEST_TAG="kill_me_$PREFIX" lvchange -aey $vg/$lv1 $vg1/$lv1
| [ 0:00] ## Line: 133 	 
| [ 0:00] ## Line: 134 	 	if test -e LOCAL_LVMPOLLD; then
| [ 0:00] ## Line: 135 	 		aux lvmpolld_dump | tee lvmpolld_dump.txt
| [ 0:00] ## Line: 136 	 		aux check_lvmpolld_init_rq_count 1 "$vg/pvmove0"
| [ 0:00] ## Line: 137 	 		aux check_lvmpolld_init_rq_count 1 "$vg1/pvmove0"
| [ 0:00] ## Line: 138 	 	else
| [ 0:00] ## Line: 139 	 		test "$(aux count_processes_with_tag)" -eq $1
| [ 0:00] ## Line: 140 	 	fi
| [ 0:00] ## Line: 141 	 }
| [ 0:00] ## Line: 142 	 
| [ 0:00] ## Line: 143 	 vgchange_single() {
| [ 0:00] ## Line: 144 	 	LVM_TEST_TAG="kill_me_$PREFIX" vgchange -aey $vg
| [ 0:00] ## Line: 145 	 	LVM_TEST_TAG="kill_me_$PREFIX" vgchange -aey $vg1
| [ 0:00] ## Line: 146 	 
| [ 0:00] ## Line: 147 	 	if test -e LOCAL_LVMPOLLD; then
| [ 0:00] ## Line: 148 	 		aux lvmpolld_dump | tee lvmpolld_dump.txt
| [ 0:00] ## Line: 149 	 		aux check_lvmpolld_init_rq_count 1 "$vg/pvmove0"
| [ 0:00] ## Line: 150 	 		aux check_lvmpolld_init_rq_count 1 "$vg1/pvmove0"
| [ 0:00] ## Line: 151 	 	else
| [ 0:00] ## Line: 152 	 		test "$(aux count_processes_with_tag)" -eq "$1"
| [ 0:00] ## Line: 153 	 	fi
| [ 0:00] ## Line: 154 	 }
| [ 0:00] ## Line: 155 	 
| [ 0:00] ## Line: 156 	 vgchange_all()  {
| [ 0:00] ## Line: 157 	 	LVM_TEST_TAG="kill_me_$PREFIX" vgchange -aey $vg $vg1
| [ 0:00] ## Line: 158 	 
| [ 0:00] ## Line: 159 	 	if test -e LOCAL_LVMPOLLD; then
| [ 0:00] ## Line: 160 	 		aux lvmpolld_dump | tee lvmpolld_dump.txt
| [ 0:00] ## Line: 161 	 		aux check_lvmpolld_init_rq_count 1 "$vg/pvmove0"
| [ 0:00] ## Line: 162 	 		aux check_lvmpolld_init_rq_count 1 "$vg1/pvmove0"
| [ 0:00] ## Line: 163 	 	else
| [ 0:00] ## Line: 164 	 		test "$(aux count_processes_with_tag)" -eq "$1"
| [ 0:00] ## Line: 165 	 	fi
| [ 0:00] ## Line: 166 	 }
| [ 0:00] ## Line: 167 	 
| [ 0:00] ## Line: 168 	 pvmove_fg() {
| [ 0:00] ## Line: 169 	 	# pvmove resume requires LVs active...
| [ 0:00] ## Line: 170 	 	LVM_TEST_TAG="kill_me_$PREFIX" vgchange --config 'activation{polling_interval=10}' -aey --poll n $vg $vg1
| [ 0:00] ## Line: 171 	 
| [ 0:00] ## Line: 172 	 	# ...also vgchange --poll n must not spawn any bg processes...
| [ 0:00] ## Line: 173 	 	if test -e LOCAL_LVMPOLLD; then
| [ 0:00] ## Line: 174 	 		aux lvmpolld_dump | tee lvmpolld_dump.txt
| [ 0:00] ## Line: 175 	 		aux check_lvmpolld_init_rq_count 0 "$vg/pvmove0"
| [ 0:00] ## Line: 176 	 		aux check_lvmpolld_init_rq_count 0 "$vg1/pvmove0"
| [ 0:00] ## Line: 177 	 	else
| [ 0:00] ## Line: 178 	 		test "$(aux count_processes_with_tag)" -eq 0
| [ 0:00] ## Line: 179 	 	fi
| [ 0:00] ## Line: 180 	 
| [ 0:00] ## Line: 181 	 	# ...thus finish polling
| [ 0:00] ## Line: 182 	 	get lv_field $vg name -a | grep -E "^\[?pvmove0"
| [ 0:00] ## Line: 183 	 	get lv_field $vg1 name -a | grep -E "^\[?pvmove0"
| [ 0:00] ## Line: 184 	 
| [ 0:00] ## Line: 185 	 	# disable delay device
| [ 0:00] ## Line: 186 	 	# fg pvmove would take ages to complete otherwise
| [ 0:00] ## Line: 187 	 	aux enable_dev "$dev3"
| [ 0:00] ## Line: 188 	 	aux enable_dev "$dev4"
| [ 0:00] ## Line: 189 	 
| [ 0:00] ## Line: 190 	 	pvmove
| [ 0:00] ## Line: 191 	 }
| [ 0:00] ## Line: 192 	 
| [ 0:00] ## Line: 193 	 pvmove_bg() {
| [ 0:00] ## Line: 194 	 	# pvmove resume requires LVs active...
| [ 0:00] ## Line: 195 	 	LVM_TEST_TAG="kill_me_$PREFIX" vgchange --config 'activation{polling_interval=10}' -aey --poll n $vg $vg1
| [ 0:00] ## Line: 196 	 
| [ 0:00] ## Line: 197 	 	# ...also vgchange --poll n must not spawn any bg processes...
| [ 0:00] ## Line: 198 	 	if test -e LOCAL_LVMPOLLD; then
| [ 0:00] ## Line: 199 	 		aux lvmpolld_dump | tee lvmpolld_dump.txt
| [ 0:00] ## Line: 200 	 		aux check_lvmpolld_init_rq_count 0 "$vg/pvmove0"
| [ 0:00] ## Line: 201 	 		aux check_lvmpolld_init_rq_count 0 "$vg1/pvmove0"
| [ 0:00] ## Line: 202 	 	else
| [ 0:00] ## Line: 203 	 		test "$(aux count_processes_with_tag)" -eq 0
| [ 0:00] ## Line: 204 	 	fi
| [ 0:00] ## Line: 205 	 
| [ 0:00] ## Line: 206 	 	# ...thus finish polling
| [ 0:00] ## Line: 207 	 	get lv_field $vg name -a | grep -E "^\[?pvmove0"
| [ 0:00] ## Line: 208 	 	get lv_field $vg1 name -a | grep -E "^\[?pvmove0"
| [ 0:00] ## Line: 209 	 
| [ 0:00] ## Line: 210 	 	LVM_TEST_TAG="kill_me_$PREFIX" pvmove -b -i0
| [ 0:00] ## Line: 211 	 }
| [ 0:00] ## Line: 212 	 
| [ 0:00] ## Line: 213 	 pvmove_fg_single() {
| [ 0:00] ## Line: 214 	 	# pvmove resume requires LVs active...
| [ 0:00] ## Line: 215 	 	LVM_TEST_TAG="kill_me_$PREFIX" vgchange --config 'activation{polling_interval=10}' -aey --poll n $vg
| [ 0:00] ## Line: 216 	 
| [ 0:00] ## Line: 217 	 	# ...also vgchange --poll n must not spawn any bg processes...
| [ 0:00] ## Line: 218 	 	if test -e LOCAL_LVMPOLLD; then
| [ 0:00] ## Line: 219 	 		aux lvmpolld_dump | tee lvmpolld_dump.txt
| [ 0:00] ## Line: 220 	 		aux check_lvmpolld_init_rq_count 0 "$vg/pvmove0"
| [ 0:00] ## Line: 221 	 		aux check_lvmpolld_init_rq_count 0 "$vg1/pvmove0"
| [ 0:00] ## Line: 222 	 	else
| [ 0:00] ## Line: 223 	 		test "$(aux count_processes_with_tag)" -eq 0
| [ 0:00] ## Line: 224 	 	fi
| [ 0:00] ## Line: 225 	 
| [ 0:00] ## Line: 226 	 	# ...thus finish polling
| [ 0:00] ## Line: 227 	 	get lv_field $vg name -a | grep -E "^\[?pvmove0"
| [ 0:00] ## Line: 228 	 	get lv_field $vg1 name -a | grep -E "^\[?pvmove0"
| [ 0:00] ## Line: 229 	 
| [ 0:00] ## Line: 230 	 	# disable delay device
| [ 0:00] ## Line: 231 	 	# fg pvmove would take ages to complete otherwise
| [ 0:00] ## Line: 232 	 	aux enable_dev "$dev3"
| [ 0:00] ## Line: 233 	 	aux enable_dev "$dev4"
| [ 0:00] ## Line: 234 	 
| [ 0:00] ## Line: 235 	 	pvmove "$dev1"
| [ 0:00] ## Line: 236 	 	pvmove "$dev2"
| [ 0:00] ## Line: 237 	 }
| [ 0:00] ## Line: 238 	 
| [ 0:00] ## Line: 239 	 pvmove_bg_single() {
| [ 0:00] ## Line: 240 	 	# pvmove resume requires LVs active...
| [ 0:00] ## Line: 241 	 	LVM_TEST_TAG="kill_me_$PREFIX" vgchange --config 'activation{polling_interval=10}' -aey --poll n $vg
| [ 0:00] ## Line: 242 	 
| [ 0:00] ## Line: 243 	 	# ...also vgchange --poll n must not spawn any bg processes...
| [ 0:00] ## Line: 244 	 	if test -e LOCAL_LVMPOLLD; then
| [ 0:00] ## Line: 245 	 		aux lvmpolld_dump | tee lvmpolld_dump.txt
| [ 0:00] ## Line: 246 	 		aux check_lvmpolld_init_rq_count 0 "$vg/pvmove0"
| [ 0:00] ## Line: 247 	 		aux check_lvmpolld_init_rq_count 0 "$vg1/pvmove0"
| [ 0:00] ## Line: 248 	 	else
| [ 0:00] ## Line: 249 	 		test "$(aux count_processes_with_tag)" -eq 0
| [ 0:00] ## Line: 250 	 	fi
| [ 0:00] ## Line: 251 	 
| [ 0:00] ## Line: 252 	 	# ...thus finish polling
| [ 0:00] ## Line: 253 	 	get lv_field $vg name -a | grep -E "^\[?pvmove0"
| [ 0:00] ## Line: 254 	 	get lv_field $vg1 name -a | grep -E "^\[?pvmove0"
| [ 0:00] ## Line: 255 	 
| [ 0:00] ## Line: 256 	 	LVM_TEST_TAG="kill_me_$PREFIX" pvmove -b "$dev1"
| [ 0:00] ## Line: 257 	 	LVM_TEST_TAG="kill_me_$PREFIX" pvmove -b "$dev2"
| [ 0:00] ## Line: 258 	 }
| [ 0:00] ## Line: 259 	 
| [ 0:00] ## Line: 260 	 test_pvmove_resume lvchange_single
| [ 0:00] ## Line: 261 	 test_pvmove_resume lvchange_all
| [ 0:00] ## Line: 262 	 test_pvmove_resume vgchange_single
| [ 0:00] ## Line: 263 	 test_pvmove_resume vgchange_all
| [ 0:00] ## Line: 264 	 test_pvmove_resume pvmove_fg
| [ 0:00] ## Line: 265 	 test_pvmove_resume pvmove_fg_single
| [ 0:00] ## Line: 266 	 test_pvmove_resume pvmove_bg
| [ 0:00] ## Line: 267 	 test_pvmove_resume pvmove_bg_single
| [ 0:00] ## Line: 268 	 
| [ 0:00] ## Line: 269 	 vgremove -ff $vg $vg1
| [ 0:00] aux teardown
| [ 0:00] #pvmove-resume-1.sh:1+ aux teardown
| [ 0:00] ## teardown.........ok
###       failed: [ndev-vanilla] shell/pvmove-resume-1.sh

| [ 0:00] Library version:   1.02.146 (2017-12-18)
| [ 0:00] Driver version:    4.35.0
| [ 0:00] Kernel is Linux localhost.localdomain 3.10.0-693.11.1.el7.x86_64 #1 SMP Mon Dec 4 23:52:40 UTC 2017 x86_64 GNU/Linux
| [ 0:00] Selinux mode is not installed.
| [ 0:00]               total        used        free      shared  buff/cache   available
| [ 0:00] Mem:           7822        1080        4143          10        2598        6435
| [ 0:00] Swap:          4095           0        4095
| [ 0:00] Filesystem      Size  Used Avail Use% Mounted on
| [ 0:00] /dev/sdc1        18G  8.4G  8.4G  50% /
| [ 0:00] /dev/sdd1        51G  6.1G   43G  13% /lfskernel
| [ 0:00] devtmpfs        3.9G     0  3.9G   0% /dev
| [ 0:00] tmpfs           3.9G     0  3.9G   0% /run
| [ 0:00] @TESTDIR=/tmp/LVMTEST19285.R8F3fgNmGq
| [ 0:00] @PREFIX=LVMTEST19285
| [ 0:00] ## LVMCONF: activation {
| [ 0:00] ## LVMCONF:     checks = 1
| [ 0:00] ## LVMCONF:     monitoring = 0
| [ 0:00] ## LVMCONF:     polling_interval = 1
| [ 0:00] ## LVMCONF:     raid_region_size = 512
| [ 0:00] ## LVMCONF:     retry_deactivation = 1
| [ 0:00] ## LVMCONF:     snapshot_autoextend_percent = 50
| [ 0:00] ## LVMCONF:     snapshot_autoextend_threshold = 50
| [ 0:00] ## LVMCONF:     udev_rules = 1
| [ 0:00] ## LVMCONF:     udev_sync = 1
| [ 0:00] ## LVMCONF:     verify_udev_operations = 1
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: allocation {
| [ 0:00] ## LVMCONF:     wipe_signatures_when_zeroing_new_lvs = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: backup {
| [ 0:00] ## LVMCONF:     archive = 0
| [ 0:00] ## LVMCONF:     backup = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: devices {
| [ 0:00] ## LVMCONF:     cache_dir = "@TESTDIR@/etc"
| [ 0:00] ## LVMCONF:     default_data_alignment = 1
| [ 0:00] ## LVMCONF:     dir = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     filter = "a|.*|"
| [ 0:00] ## LVMCONF:     global_filter = [ "a|@TESTDIR@/dev/mapper/@PREFIX@.*pv[0-9_]*$|", "r|.*|" ]
| [ 0:00] ## LVMCONF:     md_component_detection  = 0
| [ 0:00] ## LVMCONF:     scan = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     sysfs_scan = 1
| [ 0:00] ## LVMCONF:     write_cache_state = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: dmeventd {
| [ 0:00] ## LVMCONF:     executable = "/sources/boot/LVM2.2.02.177/test/lib/dmeventd"
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: global {
| [ 0:00] ## LVMCONF:     abort_on_internal_errors = 1
| [ 0:00] ## LVMCONF:     cache_check_executable = "/usr/sbin/cache_check"
| [ 0:00] ## LVMCONF:     cache_dump_executable = "/usr/sbin/cache_dump"
| [ 0:00] ## LVMCONF:     cache_repair_executable = "/usr/sbin/cache_repair"
| [ 0:00] ## LVMCONF:     detect_internal_vg_cache_corruption = 1
| [ 0:00] ## LVMCONF:     fallback_to_local_locking = 0
| [ 0:00] ## LVMCONF:     fsadm_executable = "/sources/boot/LVM2.2.02.177/test/lib/fsadm"
| [ 0:00] ## LVMCONF:     library_dir = "@TESTDIR@/lib"
| [ 0:00] ## LVMCONF:     locking_dir = "@TESTDIR@/var/lock/lvm"
| [ 0:00] ## LVMCONF:     locking_type=1
| [ 0:00] ## LVMCONF:     notify_dbus = 0
| [ 0:00] ## LVMCONF:     si_unit_consistency = 1
| [ 0:00] ## LVMCONF:     thin_check_executable = "/usr/sbin/thin_check"
| [ 0:00] ## LVMCONF:     thin_dump_executable = "/usr/sbin/thin_dump"
| [ 0:00] ## LVMCONF:     thin_repair_executable = "/usr/sbin/thin_repair"
| [ 0:00] ## LVMCONF:     use_lvmetad = 0
| [ 0:00] ## LVMCONF:     use_lvmlockd = 0
| [ 0:00] ## LVMCONF:     use_lvmpolld = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: log {
| [ 0:00] ## LVMCONF:     activation = 1
| [ 0:00] ## LVMCONF:     file = "@TESTDIR@/debug.log"
| [ 0:00] ## LVMCONF:     indent = 1
| [ 0:00] ## LVMCONF:     level = 9
| [ 0:00] ## LVMCONF:     overwrite = 1
| [ 0:00] ## LVMCONF:     syslog = 0
| [ 0:00] ## LVMCONF:     verbose = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] <======== Processing test: "pvmove-resume-2.sh" ========>
| [ 0:00] 
| [ 0:00] aux prepare_pvs 2 30
| [ 0:00] #pvmove-resume-2.sh:23+ aux prepare_pvs 2 30
| [ 0:00] ## preparing loop device....ok (/dev/loop0)
| [ 0:00] ## preparing 2 devices...lib/utils: line 212: DM_UDEV_COOKIE: unbound variable
| [ 0:00] set +vx; STACKTRACE; set -vx
| [ 0:00] ##pvmove-resume-2.sh:23+ set +vx
| [ 0:00] ## - /lfskernel/sources/boot/LVM2.2.02.177/test/shell/pvmove-resume-2.sh:23
| [ 0:00] ## 1 STACKTRACE() called from /lfskernel/sources/boot/LVM2.2.02.177/test/shell/pvmove-resume-2.sh:23
| [ 0:00] <======== Info ========>
| [ 0:00] ## DMINFO:   Name             Maj Min Stat Open Targ Event  UUID                                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv2  253   4 L--w    0    1      0 TEST-@PREFIX@pv2                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv1  253   3 L--w    0    1      0 TEST-@PREFIX@pv1                                                
| [ 0:00] <======== Active table ========>
| [ 0:00] ## DMTABLE:  @PREFIX@pv2: 0 61440 linear 7:0 63488
| [ 0:00] ## DMTABLE:  @PREFIX@pv1: 0 61440 linear 7:0 2048
| [ 0:00] <======== Inactive table ========>
| [ 0:00] ## DMITABLE: @PREFIX@pv2: 
| [ 0:00] ## DMITABLE: @PREFIX@pv1: 
| [ 0:00] <======== Status ========>
| [ 0:00] ## DMSTATUS: @PREFIX@pv2: 0 61440 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv1: 0 61440 linear 
| [ 0:00] <======== Tree ========>
| [ 0:00] ## DMTREE:   @PREFIX@pv2 (253:4)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   @PREFIX@pv1 (253:3)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   LFS_vg-lfs (253:2)
| [ 0:00] ## DMTREE:    `- (8:16)
| [ 0:00] ## DMTREE:   centos-swap (253:1)
| [ 0:00] ## DMTREE:    `- (8:2)
| [ 0:00] ## DMTREE:   centos-root (253:0)
| [ 0:00] ## DMTREE:    `- (8:2)
| [ 0:00] <======== Recursive list of @TESTDIR@/dev ========>
| [ 0:00] ## LSLR:	@TESTDIR@/dev:
| [ 0:00] ## LSLR:	total 4
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 0 Feb 21 02:27 loop0
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 1 Feb 21 02:27 loop1
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 2 Feb 21 02:27 loop2
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 3 Feb 21 02:27 loop3
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 4 Feb 21 02:27 loop4
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 5 Feb 21 02:27 loop5
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 6 Feb 21 02:27 loop6
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 7 Feb 21 02:27 loop7
| [ 0:00] ## LSLR:	drwxr-xr-x 2 root root 4096 Feb 21 02:27 mapper
| [ 0:00] ## LSLR:	crw-r--r-- 1 root root 1, 3 Feb 21 02:27 testnull
| [ 0:00] ## LSLR:	
| [ 0:00] ## LSLR:	@TESTDIR@/dev/mapper:
| [ 0:00] ## LSLR:	total 0
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   3 Feb 21 02:27 @PREFIX@pv1
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   4 Feb 21 02:27 @PREFIX@pv2
| [ 0:00] ## LSLR:	crw------- 1 root root  10, 236 Feb 21 02:27 control
| [ 0:00] <======== Udev DB content ========>
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-0
| [ 0:00] ## UDEV:	N: dm-0
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-0
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-0
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=0
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-1
| [ 0:00] ## UDEV:	N: dm-1
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-1
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-1
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=1
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-2
| [ 0:00] ## UDEV:	N: dm-2
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-2
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-2
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=2
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-3
| [ 0:00] ## UDEV:	N: dm-3
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-3
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-3
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=3
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-4
| [ 0:00] ## UDEV:	N: dm-4
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-4
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-4
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=4
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/loop0
| [ 0:00] ## UDEV:	N: loop0
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/loop0
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/loop0
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=7
| [ 0:00] ## UDEV:	E: MINOR=0
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] <======== Script file "pvmove-resume-2.sh" ========>
| [ 0:00] ## Line: 1 	 #!/usr/bin/env bash
| [ 0:00] ## Line: 2 	 
| [ 0:00] ## Line: 3 	 # Copyright (C) 2015 Red Hat, Inc. All rights reserved.
| [ 0:00] ## Line: 4 	 #
| [ 0:00] ## Line: 5 	 # This copyrighted material is made available to anyone wishing to use,
| [ 0:00] ## Line: 6 	 # modify, copy, or redistribute it subject to the terms and conditions
| [ 0:00] ## Line: 7 	 # of the GNU General Public License v.2.
| [ 0:00] ## Line: 8 	 #
| [ 0:00] ## Line: 9 	 # You should have received a copy of the GNU General Public License
| [ 0:00] ## Line: 10 	 # along with this program; if not, write to the Free Software Foundation,
| [ 0:00] ## Line: 11 	 # Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA
| [ 0:00] ## Line: 12 	 
| [ 0:00] ## Line: 13 	 # Check whether all available pvmove resume methods works as expected.
| [ 0:00] ## Line: 14 	 # lvchange is able to resume pvmoves in progress.
| [ 0:00] ## Line: 15 	 
| [ 0:00] ## Line: 16 	 # Moving 2 LVs in VG variant
| [ 0:00] ## Line: 17 	 
| [ 0:00] ## Line: 18 	 SKIP_WITH_LVMLOCKD=1
| [ 0:00] ## Line: 19 	 SKIP_WITH_CLVMD=1
| [ 0:00] ## Line: 20 	 
| [ 0:00] ## Line: 21 	 . lib/inittest
| [ 0:00] ## Line: 22 	 
| [ 0:00] ## Line: 23 	 aux prepare_pvs 2 30
| [ 0:00] ## Line: 24 	 
| [ 0:00] ## Line: 25 	 vgcreate -s 128k $vg "$dev1"
| [ 0:00] ## Line: 26 	 pvcreate --metadatacopies 0 "$dev2"
| [ 0:00] ## Line: 27 	 vgextend $vg "$dev2"
| [ 0:00] ## Line: 28 	 
| [ 0:00] ## Line: 29 	 test_pvmove_resume() {
| [ 0:00] ## Line: 30 	 	# 2 LVs on same device
| [ 0:00] ## Line: 31 	 	lvcreate -an -Zn -l15 -n $lv1 $vg "$dev1"
| [ 0:00] ## Line: 32 	 	lvcreate -an -Zn -l15 -n $lv2 $vg "$dev1"
| [ 0:00] ## Line: 33 	 
| [ 0:00] ## Line: 34 	 	aux delay_dev "$dev2" 0 1000 "$(get first_extent_sector "$dev2"):"
| [ 0:00] ## Line: 35 	 
| [ 0:00] ## Line: 36 	 	pvmove -i5 "$dev1" &
| [ 0:00] ## Line: 37 	 	PVMOVE=$!
| [ 0:00] ## Line: 38 	 	aux wait_pvmove_lv_ready "$vg-pvmove0" 300
| [ 0:00] ## Line: 39 	 	kill -9 $PVMOVE
| [ 0:00] ## Line: 40 	 
| [ 0:00] ## Line: 41 	 	if test -e LOCAL_LVMPOLLD ; then
| [ 0:00] ## Line: 42 	 		aux prepare_lvmpolld
| [ 0:00] ## Line: 43 	 	fi
| [ 0:00] ## Line: 44 	 
| [ 0:00] ## Line: 45 	 	wait
| [ 0:00] ## Line: 46 	 
| [ 0:00] ## Line: 47 	 	local finished
| [ 0:00] ## Line: 48 	 	for i in {1..100}; do
| [ 0:00] ## Line: 49 	 		finished=1
| [ 0:00] ## Line: 50 	 		for d in  "$vg-$lv1" "$vg-$lv2" "$vg-pvmove0" ; do
| [ 0:00] ## Line: 51 	 			dmsetup status "$d" 2>/dev/null && {
| [ 0:00] ## Line: 52 	 				dmsetup remove "$d" || finished=0
| [ 0:00] ## Line: 53 	 			}
| [ 0:00] ## Line: 54 	 		done
| [ 0:00] ## Line: 55 	 		test "$finished" -eq 0 || break
| [ 0:00] ## Line: 56 	 	done
| [ 0:00] ## Line: 57 	 	test "$finished" -eq 0 && die "Can't remove device"
| [ 0:00] ## Line: 58 	 
| [ 0:00] ## Line: 59 	 	check lv_attr_bit type $vg/pvmove0 "p"
| [ 0:00] ## Line: 60 	 
| [ 0:00] ## Line: 61 	 	if test -e LOCAL_CLVMD ; then
| [ 0:00] ## Line: 62 	 		# giveup all clvmd locks (faster then restarting clvmd)
| [ 0:00] ## Line: 63 	 		# no deactivation happen, nodes are already removed
| [ 0:00] ## Line: 64 	 		#vgchange -an $vg
| [ 0:00] ## Line: 65 	 		# FIXME: However above solution has one big problem
| [ 0:00] ## Line: 66 	 		# as clvmd starts to abort on internal errors on various
| [ 0:00] ## Line: 67 	 		# errors, based on the fact pvmove is killed -9
| [ 0:00] ## Line: 68 	 		# Restart clvmd
| [ 0:00] ## Line: 69 	 		kill "$(< LOCAL_CLVMD)"
| [ 0:00] ## Line: 70 	 		for i in {1 100} ; do
| [ 0:00] ## Line: 71 	 			test $i -eq 100 && die "Shutdown of clvmd is too slow."
| [ 0:00] ## Line: 72 	 			test -e "$CLVMD_PIDFILE" || break
| [ 0:00] ## Line: 73 	 			sleep .1
| [ 0:00] ## Line: 74 	 		done # wait for the pid removal
| [ 0:00] ## Line: 75 	 		aux prepare_clvmd
| [ 0:00] ## Line: 76 	 	fi
| [ 0:00] ## Line: 77 	 
| [ 0:00] ## Line: 78 	 	aux notify_lvmetad "$dev1" "$dev2"
| [ 0:00] ## Line: 79 	 
| [ 0:00] ## Line: 80 	 	# call resume function (see below)
| [ 0:00] ## Line: 81 	 	# with expected number of spawned
| [ 0:00] ## Line: 82 	 	# bg polling as parameter
| [ 0:00] ## Line: 83 	 	$1 1
| [ 0:00] ## Line: 84 	 
| [ 0:00] ## Line: 85 	 	aux enable_dev "$dev2"
| [ 0:00] ## Line: 86 	 
| [ 0:00] ## Line: 87 	 	i=0
| [ 0:00] ## Line: 88 	 	while get lv_field $vg name -a | grep -E "^\[?pvmove"; do
| [ 0:00] ## Line: 89 	 		# wait for 30 secs at max
| [ 0:00] ## Line: 90 	 		test $i -ge 300 && die "Pvmove is too slow or does not progress."
| [ 0:00] ## Line: 91 	 		sleep .1
| [ 0:00] ## Line: 92 	 		i=$((i + 1))
| [ 0:00] ## Line: 93 	 	done
| [ 0:00] ## Line: 94 	 
| [ 0:00] ## Line: 95 	 	aux kill_tagged_processes
| [ 0:00] ## Line: 96 	 
| [ 0:00] ## Line: 97 	 	lvremove -ff $vg
| [ 0:00] ## Line: 98 	 }
| [ 0:00] ## Line: 99 	 
| [ 0:00] ## Line: 100 	 lvchange_single() {
| [ 0:00] ## Line: 101 	 	LVM_TEST_TAG="kill_me_$PREFIX" lvchange -aey $vg/$lv1
| [ 0:00] ## Line: 102 	 	LVM_TEST_TAG="kill_me_$PREFIX" lvchange -aey $vg/$lv2
| [ 0:00] ## Line: 103 	 }
| [ 0:00] ## Line: 104 	 
| [ 0:00] ## Line: 105 	 lvchange_all() {
| [ 0:00] ## Line: 106 	 	LVM_TEST_TAG="kill_me_$PREFIX" lvchange -aey $vg/$lv1 $vg/$lv2
| [ 0:00] ## Line: 107 	 
| [ 0:00] ## Line: 108 	 	# we don't want to spawn more than $1 background pollings
| [ 0:00] ## Line: 109 	 	if test -e LOCAL_LVMPOLLD; then
| [ 0:00] ## Line: 110 	 		aux lvmpolld_dump | tee lvmpolld_dump.txt
| [ 0:00] ## Line: 111 	 		aux check_lvmpolld_init_rq_count 1 "$vg/pvmove0" || should false
| [ 0:00] ## Line: 112 	 	elif test -e HAVE_DM_DELAY; then
| [ 0:00] ## Line: 113 	 		test "$(aux count_processes_with_tag)" -eq "$1" || should false
| [ 0:00] ## Line: 114 	 	fi
| [ 0:00] ## Line: 115 	 }
| [ 0:00] ## Line: 116 	 
| [ 0:00] ## Line: 117 	 vgchange_single() {
| [ 0:00] ## Line: 118 	 	LVM_TEST_TAG="kill_me_$PREFIX" vgchange -aey $vg
| [ 0:00] ## Line: 119 	 
| [ 0:00] ## Line: 120 	 	if test -e LOCAL_LVMPOLLD; then
| [ 0:00] ## Line: 121 	 		aux lvmpolld_dump | tee lvmpolld_dump.txt
| [ 0:00] ## Line: 122 	 		aux check_lvmpolld_init_rq_count 1 "$vg/pvmove0"
| [ 0:00] ## Line: 123 	 	elif test -e HAVE_DM_DELAY; then
| [ 0:00] ## Line: 124 	 		test "$(aux count_processes_with_tag)" -eq "$1"
| [ 0:00] ## Line: 125 	 	fi
| [ 0:00] ## Line: 126 	 }
| [ 0:00] ## Line: 127 	 
| [ 0:00] ## Line: 128 	 pvmove_fg() {
| [ 0:00] ## Line: 129 	 	# pvmove resume requires LVs active...
| [ 0:00] ## Line: 130 	 	LVM_TEST_TAG="kill_me_$PREFIX" vgchange --config 'activation{polling_interval=10}' -aey --poll n $vg
| [ 0:00] ## Line: 131 	 
| [ 0:00] ## Line: 132 	 	# ...also vgchange --poll n must not spawn any bg processes
| [ 0:00] ## Line: 133 	 	if test -e LOCAL_LVMPOLLD; then
| [ 0:00] ## Line: 134 	 		aux lvmpolld_dump | tee lvmpolld_dump.txt
| [ 0:00] ## Line: 135 	 		aux check_lvmpolld_init_rq_count 0 "$vg/pvmove0"
| [ 0:00] ## Line: 136 	 	else
| [ 0:00] ## Line: 137 	 		test "$(aux count_processes_with_tag)" -eq 0
| [ 0:00] ## Line: 138 	 	fi
| [ 0:00] ## Line: 139 	 
| [ 0:00] ## Line: 140 	 	# ...thus finish polling
| [ 0:00] ## Line: 141 	 	get lv_field $vg name -a | grep -E "^\[?pvmove0"
| [ 0:00] ## Line: 142 	 
| [ 0:00] ## Line: 143 	 	aux enable_dev "$dev2"
| [ 0:00] ## Line: 144 	 
| [ 0:00] ## Line: 145 	 	pvmove
| [ 0:00] ## Line: 146 	 }
| [ 0:00] ## Line: 147 	 
| [ 0:00] ## Line: 148 	 pvmove_bg() {
| [ 0:00] ## Line: 149 	 	# pvmove resume requires LVs active...
| [ 0:00] ## Line: 150 	 	LVM_TEST_TAG="kill_me_$PREFIX" vgchange --config 'activation{polling_interval=10}' -aey --poll n $vg
| [ 0:00] ## Line: 151 	 
| [ 0:00] ## Line: 152 	 	# ...also vgchange --poll n must not spawn any bg processes
| [ 0:00] ## Line: 153 	 	if test -e LOCAL_LVMPOLLD; then
| [ 0:00] ## Line: 154 	 		aux lvmpolld_dump | tee lvmpolld_dump.txt
| [ 0:00] ## Line: 155 	 		aux check_lvmpolld_init_rq_count 0 "$vg/pvmove0"
| [ 0:00] ## Line: 156 	 	else
| [ 0:00] ## Line: 157 	 		test "$(aux count_processes_with_tag)" -eq 0
| [ 0:00] ## Line: 158 	 	fi
| [ 0:00] ## Line: 159 	 
| [ 0:00] ## Line: 160 	 	# ...thus finish polling
| [ 0:00] ## Line: 161 	 	get lv_field $vg name -a | grep -E "^\[?pvmove0"
| [ 0:00] ## Line: 162 	 
| [ 0:00] ## Line: 163 	 	LVM_TEST_TAG="kill_me_$PREFIX" pvmove -b
| [ 0:00] ## Line: 164 	 }
| [ 0:00] ## Line: 165 	 
| [ 0:00] ## Line: 166 	 pvmove_fg_single() {
| [ 0:00] ## Line: 167 	 	# pvmove resume requires LVs active...
| [ 0:00] ## Line: 168 	 	LVM_TEST_TAG="kill_me_$PREFIX" vgchange --config 'activation{polling_interval=10}' -aey --poll n $vg
| [ 0:00] ## Line: 169 	 
| [ 0:00] ## Line: 170 	 	# ...also vgchange --poll n must not spawn any bg processes
| [ 0:00] ## Line: 171 	 	if test -e LOCAL_LVMPOLLD; then
| [ 0:00] ## Line: 172 	 		aux lvmpolld_dump | tee lvmpolld_dump.txt
| [ 0:00] ## Line: 173 	 		aux check_lvmpolld_init_rq_count 0 "$vg/pvmove0"
| [ 0:00] ## Line: 174 	 	else
| [ 0:00] ## Line: 175 	 		test "$(aux count_processes_with_tag)" -eq 0
| [ 0:00] ## Line: 176 	 	fi
| [ 0:00] ## Line: 177 	 
| [ 0:00] ## Line: 178 	 	# ...thus finish polling
| [ 0:00] ## Line: 179 	 	get lv_field $vg name -a | grep -E "^\[?pvmove0"
| [ 0:00] ## Line: 180 	 
| [ 0:00] ## Line: 181 	 	aux enable_dev "$dev2"
| [ 0:00] ## Line: 182 	 
| [ 0:00] ## Line: 183 	 	pvmove "$dev1"
| [ 0:00] ## Line: 184 	 }
| [ 0:00] ## Line: 185 	 
| [ 0:00] ## Line: 186 	 pvmove_bg_single() {
| [ 0:00] ## Line: 187 	 	# pvmove resume requires LVs active...
| [ 0:00] ## Line: 188 	 	LVM_TEST_TAG="kill_me_$PREFIX" vgchange --config 'activation{polling_interval=10}' -aey --poll n $vg
| [ 0:00] ## Line: 189 	 
| [ 0:00] ## Line: 190 	 	# ...also vgchange --poll n must not spawn any bg processes...
| [ 0:00] ## Line: 191 	 	if test -e LOCAL_LVMPOLLD; then
| [ 0:00] ## Line: 192 	 		aux lvmpolld_dump | tee lvmpolld_dump.txt
| [ 0:00] ## Line: 193 	 		aux check_lvmpolld_init_rq_count 0 "$vg/pvmove0"
| [ 0:00] ## Line: 194 	 	else
| [ 0:00] ## Line: 195 	 		test "$(aux count_processes_with_tag)" -eq 0
| [ 0:00] ## Line: 196 	 	fi
| [ 0:00] ## Line: 197 	 
| [ 0:00] ## Line: 198 	 	# ...thus finish polling
| [ 0:00] ## Line: 199 	 	get lv_field $vg name -a | grep -E "^\[?pvmove0"
| [ 0:00] ## Line: 200 	 
| [ 0:00] ## Line: 201 	 	LVM_TEST_TAG="kill_me_$PREFIX" pvmove -b "$dev1"
| [ 0:00] ## Line: 202 	 }
| [ 0:00] ## Line: 203 	 
| [ 0:00] ## Line: 204 	 test_pvmove_resume lvchange_single
| [ 0:00] ## Line: 205 	 test_pvmove_resume lvchange_all
| [ 0:00] ## Line: 206 	 test_pvmove_resume vgchange_single
| [ 0:00] ## Line: 207 	 test_pvmove_resume pvmove_fg
| [ 0:00] ## Line: 208 	 test_pvmove_resume pvmove_fg_single
| [ 0:00] ## Line: 209 	 test_pvmove_resume pvmove_bg
| [ 0:00] ## Line: 210 	 test_pvmove_resume pvmove_bg_single
| [ 0:00] ## Line: 211 	 
| [ 0:00] ## Line: 212 	 vgremove -ff $vg
| [ 0:00] aux teardown
| [ 0:00] #pvmove-resume-2.sh:1+ aux teardown
| [ 0:00] ## teardown.........ok
###       failed: [ndev-vanilla] shell/pvmove-resume-2.sh

| [ 0:00] Library version:   1.02.146 (2017-12-18)
| [ 0:00] Driver version:    4.35.0
| [ 0:00] Kernel is Linux localhost.localdomain 3.10.0-693.11.1.el7.x86_64 #1 SMP Mon Dec 4 23:52:40 UTC 2017 x86_64 GNU/Linux
| [ 0:00] Selinux mode is not installed.
| [ 0:00]               total        used        free      shared  buff/cache   available
| [ 0:00] Mem:           7822        1080        4143          10        2598        6434
| [ 0:00] Swap:          4095           0        4095
| [ 0:00] Filesystem      Size  Used Avail Use% Mounted on
| [ 0:00] /dev/sdc1        18G  8.4G  8.4G  50% /
| [ 0:00] /dev/sdd1        51G  6.1G   43G  13% /lfskernel
| [ 0:00] devtmpfs        3.9G     0  3.9G   0% /dev
| [ 0:00] tmpfs           3.9G     0  3.9G   0% /run
| [ 0:00] @TESTDIR=/tmp/LVMTEST19453.AZl1e8kq1R
| [ 0:00] @PREFIX=LVMTEST19453
| [ 0:00] ## LVMCONF: activation {
| [ 0:00] ## LVMCONF:     checks = 1
| [ 0:00] ## LVMCONF:     monitoring = 0
| [ 0:00] ## LVMCONF:     polling_interval = 1
| [ 0:00] ## LVMCONF:     raid_region_size = 512
| [ 0:00] ## LVMCONF:     retry_deactivation = 1
| [ 0:00] ## LVMCONF:     snapshot_autoextend_percent = 50
| [ 0:00] ## LVMCONF:     snapshot_autoextend_threshold = 50
| [ 0:00] ## LVMCONF:     udev_rules = 1
| [ 0:00] ## LVMCONF:     udev_sync = 1
| [ 0:00] ## LVMCONF:     verify_udev_operations = 1
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: allocation {
| [ 0:00] ## LVMCONF:     wipe_signatures_when_zeroing_new_lvs = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: backup {
| [ 0:00] ## LVMCONF:     archive = 0
| [ 0:00] ## LVMCONF:     backup = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: devices {
| [ 0:00] ## LVMCONF:     cache_dir = "@TESTDIR@/etc"
| [ 0:00] ## LVMCONF:     default_data_alignment = 1
| [ 0:00] ## LVMCONF:     dir = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     filter = "a|.*|"
| [ 0:00] ## LVMCONF:     global_filter = [ "a|@TESTDIR@/dev/mapper/@PREFIX@.*pv[0-9_]*$|", "r|.*|" ]
| [ 0:00] ## LVMCONF:     md_component_detection  = 0
| [ 0:00] ## LVMCONF:     scan = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     sysfs_scan = 1
| [ 0:00] ## LVMCONF:     write_cache_state = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: dmeventd {
| [ 0:00] ## LVMCONF:     executable = "/sources/boot/LVM2.2.02.177/test/lib/dmeventd"
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: global {
| [ 0:00] ## LVMCONF:     abort_on_internal_errors = 1
| [ 0:00] ## LVMCONF:     cache_check_executable = "/usr/sbin/cache_check"
| [ 0:00] ## LVMCONF:     cache_dump_executable = "/usr/sbin/cache_dump"
| [ 0:00] ## LVMCONF:     cache_repair_executable = "/usr/sbin/cache_repair"
| [ 0:00] ## LVMCONF:     detect_internal_vg_cache_corruption = 1
| [ 0:00] ## LVMCONF:     fallback_to_local_locking = 0
| [ 0:00] ## LVMCONF:     fsadm_executable = "/sources/boot/LVM2.2.02.177/test/lib/fsadm"
| [ 0:00] ## LVMCONF:     library_dir = "@TESTDIR@/lib"
| [ 0:00] ## LVMCONF:     locking_dir = "@TESTDIR@/var/lock/lvm"
| [ 0:00] ## LVMCONF:     locking_type=1
| [ 0:00] ## LVMCONF:     notify_dbus = 0
| [ 0:00] ## LVMCONF:     si_unit_consistency = 1
| [ 0:00] ## LVMCONF:     thin_check_executable = "/usr/sbin/thin_check"
| [ 0:00] ## LVMCONF:     thin_dump_executable = "/usr/sbin/thin_dump"
| [ 0:00] ## LVMCONF:     thin_repair_executable = "/usr/sbin/thin_repair"
| [ 0:00] ## LVMCONF:     use_lvmetad = 0
| [ 0:00] ## LVMCONF:     use_lvmlockd = 0
| [ 0:00] ## LVMCONF:     use_lvmpolld = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: log {
| [ 0:00] ## LVMCONF:     activation = 1
| [ 0:00] ## LVMCONF:     file = "@TESTDIR@/debug.log"
| [ 0:00] ## LVMCONF:     indent = 1
| [ 0:00] ## LVMCONF:     level = 9
| [ 0:00] ## LVMCONF:     overwrite = 1
| [ 0:00] ## LVMCONF:     syslog = 0
| [ 0:00] ## LVMCONF:     verbose = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] <======== Processing test: "pvmove-resume-multiseg.sh" ========>
| [ 0:00] 
| [ 0:00] aux prepare_pvs 5 30
| [ 0:00] #pvmove-resume-multiseg.sh:23+ aux prepare_pvs 5 30
| [ 0:00] ## preparing loop device....ok (/dev/loop0)
| [ 0:00] ## preparing 5 devices...lib/utils: line 212: DM_UDEV_COOKIE: unbound variable
| [ 0:00] set +vx; STACKTRACE; set -vx
| [ 0:00] ##pvmove-resume-multiseg.sh:23+ set +vx
| [ 0:00] ## - /lfskernel/sources/boot/LVM2.2.02.177/test/shell/pvmove-resume-multiseg.sh:23
| [ 0:00] ## 1 STACKTRACE() called from /lfskernel/sources/boot/LVM2.2.02.177/test/shell/pvmove-resume-multiseg.sh:23
| [ 0:00] <======== Info ========>
| [ 0:00] ## DMINFO:   Name             Maj Min Stat Open Targ Event  UUID                                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv5  253   5 L--w    0    1      0 TEST-@PREFIX@pv5                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv4  253   4 L--w    0    1      0 TEST-@PREFIX@pv4                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv3  253   3 L--w    0    1      0 TEST-@PREFIX@pv3                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv2  253   7 L--w    0    1      0 TEST-@PREFIX@pv2                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv1  253   6 L--w    0    1      0 TEST-@PREFIX@pv1                                                
| [ 0:00] <======== Active table ========>
| [ 0:00] ## DMTABLE:  @PREFIX@pv5: 0 61440 linear 7:0 247808
| [ 0:00] ## DMTABLE:  @PREFIX@pv4: 0 61440 linear 7:0 186368
| [ 0:00] ## DMTABLE:  @PREFIX@pv3: 0 61440 linear 7:0 124928
| [ 0:00] ## DMTABLE:  @PREFIX@pv2: 0 61440 linear 7:0 63488
| [ 0:00] ## DMTABLE:  @PREFIX@pv1: 0 61440 linear 7:0 2048
| [ 0:00] <======== Inactive table ========>
| [ 0:00] ## DMITABLE: @PREFIX@pv5: 
| [ 0:00] ## DMITABLE: @PREFIX@pv4: 
| [ 0:00] ## DMITABLE: @PREFIX@pv3: 
| [ 0:00] ## DMITABLE: @PREFIX@pv2: 
| [ 0:00] ## DMITABLE: @PREFIX@pv1: 
| [ 0:00] <======== Status ========>
| [ 0:00] ## DMSTATUS: @PREFIX@pv5: 0 61440 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv4: 0 61440 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv3: 0 61440 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv2: 0 61440 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv1: 0 61440 linear 
| [ 0:00] <======== Tree ========>
| [ 0:00] ## DMTREE:   @PREFIX@pv5 (253:5)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   @PREFIX@pv4 (253:4)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   @PREFIX@pv3 (253:3)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   @PREFIX@pv2 (253:7)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   LFS_vg-lfs (253:2)
| [ 0:00] ## DMTREE:    `- (8:16)
| [ 0:00] ## DMTREE:   centos-swap (253:1)
| [ 0:00] ## DMTREE:    `- (8:2)
| [ 0:00] ## DMTREE:   centos-root (253:0)
| [ 0:00] ## DMTREE:    `- (8:2)
| [ 0:00] ## DMTREE:   @PREFIX@pv1 (253:6)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] <======== Recursive list of @TESTDIR@/dev ========>
| [ 0:00] ## LSLR:	@TESTDIR@/dev:
| [ 0:00] ## LSLR:	total 4
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 0 Feb 21 02:27 loop0
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 1 Feb 21 02:27 loop1
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 2 Feb 21 02:27 loop2
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 3 Feb 21 02:27 loop3
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 4 Feb 21 02:27 loop4
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 5 Feb 21 02:27 loop5
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 6 Feb 21 02:27 loop6
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 7 Feb 21 02:27 loop7
| [ 0:00] ## LSLR:	drwxr-xr-x 2 root root 4096 Feb 21 02:27 mapper
| [ 0:00] ## LSLR:	crw-r--r-- 1 root root 1, 3 Feb 21 02:27 testnull
| [ 0:00] ## LSLR:	
| [ 0:00] ## LSLR:	@TESTDIR@/dev/mapper:
| [ 0:00] ## LSLR:	total 0
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   6 Feb 21 02:27 @PREFIX@pv1
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   7 Feb 21 02:27 @PREFIX@pv2
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   3 Feb 21 02:27 @PREFIX@pv3
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   4 Feb 21 02:27 @PREFIX@pv4
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   5 Feb 21 02:27 @PREFIX@pv5
| [ 0:00] ## LSLR:	crw------- 1 root root  10, 236 Feb 21 02:27 control
| [ 0:00] <======== Udev DB content ========>
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-0
| [ 0:00] ## UDEV:	N: dm-0
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-0
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-0
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=0
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-1
| [ 0:00] ## UDEV:	N: dm-1
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-1
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-1
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=1
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-2
| [ 0:00] ## UDEV:	N: dm-2
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-2
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-2
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=2
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-3
| [ 0:00] ## UDEV:	N: dm-3
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-3
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-3
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=3
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-4
| [ 0:00] ## UDEV:	N: dm-4
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-4
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-4
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=4
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-5
| [ 0:00] ## UDEV:	N: dm-5
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-5
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-5
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=5
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-6
| [ 0:00] ## UDEV:	N: dm-6
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-6
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-6
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=6
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-7
| [ 0:00] ## UDEV:	N: dm-7
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-7
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-7
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=7
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/loop0
| [ 0:00] ## UDEV:	N: loop0
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/loop0
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/loop0
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=7
| [ 0:00] ## UDEV:	E: MINOR=0
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] <======== Script file "pvmove-resume-multiseg.sh" ========>
| [ 0:00] ## Line: 1 	 #!/usr/bin/env bash
| [ 0:00] ## Line: 2 	 
| [ 0:00] ## Line: 3 	 # Copyright (C) 2015 Red Hat, Inc. All rights reserved.
| [ 0:00] ## Line: 4 	 #
| [ 0:00] ## Line: 5 	 # This copyrighted material is made available to anyone wishing to use,
| [ 0:00] ## Line: 6 	 # modify, copy, or redistribute it subject to the terms and conditions
| [ 0:00] ## Line: 7 	 # of the GNU General Public License v.2.
| [ 0:00] ## Line: 8 	 #
| [ 0:00] ## Line: 9 	 # You should have received a copy of the GNU General Public License
| [ 0:00] ## Line: 10 	 # along with this program; if not, write to the Free Software Foundation,
| [ 0:00] ## Line: 11 	 # Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA
| [ 0:00] ## Line: 12 	 
| [ 0:00] ## Line: 13 	 # Check whether all available pvmove resume methods works as expected.
| [ 0:00] ## Line: 14 	 # lvchange is able to resume pvmoves in progress.
| [ 0:00] ## Line: 15 	 
| [ 0:00] ## Line: 16 	 # Multisegment variant w/ 2 pvmoves LVs per VG
| [ 0:00] ## Line: 17 	 
| [ 0:00] ## Line: 18 	 SKIP_WITH_LVMLOCKD=1
| [ 0:00] ## Line: 19 	 SKIP_WITH_CLVMD=1
| [ 0:00] ## Line: 20 	 
| [ 0:00] ## Line: 21 	 . lib/inittest
| [ 0:00] ## Line: 22 	 
| [ 0:00] ## Line: 23 	 aux prepare_pvs 5 30
| [ 0:00] ## Line: 24 	 
| [ 0:00] ## Line: 25 	 vgcreate -s 128k $vg "$dev1" "$dev2" "$dev3"
| [ 0:00] ## Line: 26 	 pvcreate --metadatacopies 0 "$dev4" "$dev5"
| [ 0:00] ## Line: 27 	 vgextend $vg "$dev4" "$dev5"
| [ 0:00] ## Line: 28 	 
| [ 0:00] ## Line: 29 	 # $1 resume fn
| [ 0:00] ## Line: 30 	 test_pvmove_resume() {
| [ 0:00] ## Line: 31 	 	# Create multisegment LV
| [ 0:00] ## Line: 32 	 	lvcreate -an -Zn -l30 -n $lv1 $vg "$dev1"
| [ 0:00] ## Line: 33 	 	lvextend -l+30 $vg/$lv1 "$dev2"
| [ 0:00] ## Line: 34 	 	# next LV on same VG and differetnt PV (we want to test 2 pvmoves per VG)
| [ 0:00] ## Line: 35 	 	lvcreate -an -Zn -l30 -n $lv2 $vg "$dev3"
| [ 0:00] ## Line: 36 	 
| [ 0:00] ## Line: 37 	 	aux delay_dev "$dev4" 0 250 "$(get first_extent_sector "$dev4"):"
| [ 0:00] ## Line: 38 	 	test -e HAVE_DM_DELAY || { lvremove -f $vg; return 0; }
| [ 0:00] ## Line: 39 	 	aux delay_dev "$dev5" 0 250 "$(get first_extent_sector "$dev5"):"
| [ 0:00] ## Line: 40 	 
| [ 0:00] ## Line: 41 	 	pvmove -i5 "$dev1" "$dev4" &
| [ 0:00] ## Line: 42 	 	PVMOVE=$!
| [ 0:00] ## Line: 43 	 	aux wait_pvmove_lv_ready "$vg-pvmove0" 300
| [ 0:00] ## Line: 44 	 	kill -9 $PVMOVE
| [ 0:00] ## Line: 45 	 
| [ 0:00] ## Line: 46 	 	pvmove -i5 -n $vg/$lv2 "$dev3" "$dev5" &
| [ 0:00] ## Line: 47 	 	PVMOVE=$!
| [ 0:00] ## Line: 48 	 	aux wait_pvmove_lv_ready "$vg-pvmove1" 300
| [ 0:00] ## Line: 49 	 	kill -9 $PVMOVE
| [ 0:00] ## Line: 50 	 
| [ 0:00] ## Line: 51 	 	if test -e LOCAL_LVMPOLLD ; then
| [ 0:00] ## Line: 52 	 		aux prepare_lvmpolld
| [ 0:00] ## Line: 53 	 	fi
| [ 0:00] ## Line: 54 	 
| [ 0:00] ## Line: 55 	 	wait
| [ 0:00] ## Line: 56 	 
| [ 0:00] ## Line: 57 	 	while dmsetup status "$vg-$lv1"; do dmsetup remove "$vg-$lv1" || true; done
| [ 0:00] ## Line: 58 	 	while dmsetup status "$vg-$lv2"; do dmsetup remove "$vg-$lv2" || true; done
| [ 0:00] ## Line: 59 	 	while dmsetup status "$vg-pvmove0"; do dmsetup remove "$vg-pvmove0" || true; done
| [ 0:00] ## Line: 60 	 	while dmsetup status "$vg-pvmove1"; do dmsetup remove "$vg-pvmove1" || true; done
| [ 0:00] ## Line: 61 	 
| [ 0:00] ## Line: 62 	 	check lv_attr_bit type $vg/pvmove0 "p"
| [ 0:00] ## Line: 63 	 	check lv_attr_bit type $vg/pvmove1 "p"
| [ 0:00] ## Line: 64 	 
| [ 0:00] ## Line: 65 	 	if test -e LOCAL_CLVMD ; then
| [ 0:00] ## Line: 66 	 		# giveup all clvmd locks (faster then restarting clvmd)
| [ 0:00] ## Line: 67 	 		# no deactivation happen, nodes are already removed
| [ 0:00] ## Line: 68 	 		#vgchange -an $vg
| [ 0:00] ## Line: 69 	 		# FIXME: However above solution has one big problem
| [ 0:00] ## Line: 70 	 		# as clvmd starts to abort on internal errors on various
| [ 0:00] ## Line: 71 	 		# errors, based on the fact pvmove is killed -9
| [ 0:00] ## Line: 72 	 		# Restart clvmd
| [ 0:00] ## Line: 73 	 		kill "$(< LOCAL_CLVMD)"
| [ 0:00] ## Line: 74 	 		for i in $(seq 1 100) ; do
| [ 0:00] ## Line: 75 	 			test $i -eq 100 && die "Shutdown of clvmd is too slow."
| [ 0:00] ## Line: 76 	 			test -e "$CLVMD_PIDFILE" || break
| [ 0:00] ## Line: 77 	 			sleep .1
| [ 0:00] ## Line: 78 	 		done # wait for the pid removal
| [ 0:00] ## Line: 79 	 		aux prepare_clvmd
| [ 0:00] ## Line: 80 	 	fi
| [ 0:00] ## Line: 81 	 
| [ 0:00] ## Line: 82 	 	aux notify_lvmetad "$dev1" "$dev2" "$dev3" "$dev4" "$dev5"
| [ 0:00] ## Line: 83 	 
| [ 0:00] ## Line: 84 	 	# call resume function (see below)
| [ 0:00] ## Line: 85 	 	# with expected number of spawned
| [ 0:00] ## Line: 86 	 	# bg polling as parameter
| [ 0:00] ## Line: 87 	 	$1 2
| [ 0:00] ## Line: 88 	 
| [ 0:00] ## Line: 89 	 	aux enable_dev "$dev4"
| [ 0:00] ## Line: 90 	 	aux enable_dev "$dev5"
| [ 0:00] ## Line: 91 	 
| [ 0:00] ## Line: 92 	 	i=0
| [ 0:00] ## Line: 93 	 	while get lv_field $vg name -a | grep -E "^\[?pvmove"; do
| [ 0:00] ## Line: 94 	 		# wait for 30 secs at max
| [ 0:00] ## Line: 95 	 		test $i -ge 300 && die "Pvmove is too slow or does not progress."
| [ 0:00] ## Line: 96 	 		sleep .1
| [ 0:00] ## Line: 97 	 		i=$((i + 1))
| [ 0:00] ## Line: 98 	 	done
| [ 0:00] ## Line: 99 	 
| [ 0:00] ## Line: 100 	 	aux kill_tagged_processes
| [ 0:00] ## Line: 101 	 
| [ 0:00] ## Line: 102 	 	lvremove -ff $vg
| [ 0:00] ## Line: 103 	 	# drop debug logs from killed lvm2 commands
| [ 0:00] ## Line: 104 	 	rm -f debug.log_DEBUG*
| [ 0:00] ## Line: 105 	 }
| [ 0:00] ## Line: 106 	 
| [ 0:00] ## Line: 107 	 lvchange_single() {
| [ 0:00] ## Line: 108 	 	LVM_TEST_TAG="kill_me_$PREFIX" lvchange -aey $vg/$lv1
| [ 0:00] ## Line: 109 	 	LVM_TEST_TAG="kill_me_$PREFIX" lvchange -aey $vg/$lv2
| [ 0:00] ## Line: 110 	 }
| [ 0:00] ## Line: 111 	 
| [ 0:00] ## Line: 112 	 lvchange_all() {
| [ 0:00] ## Line: 113 	 	LVM_TEST_TAG="kill_me_$PREFIX" lvchange -aey $vg/$lv1 $vg/$lv2
| [ 0:00] ## Line: 114 	 
| [ 0:00] ## Line: 115 	 	# we don't want to spawn more than $1 background pollings
| [ 0:00] ## Line: 116 	 	if test -e LOCAL_LVMPOLLD; then
| [ 0:00] ## Line: 117 	 		aux lvmpolld_dump | tee lvmpolld_dump.txt
| [ 0:00] ## Line: 118 	 		aux check_lvmpolld_init_rq_count 1 "$vg/pvmove0"
| [ 0:00] ## Line: 119 	 		aux check_lvmpolld_init_rq_count 1 "$vg/pvmove1"
| [ 0:00] ## Line: 120 	 	else
| [ 0:00] ## Line: 121 	 		test "$(aux count_processes_with_tag)" -eq $1
| [ 0:00] ## Line: 122 	 	fi
| [ 0:00] ## Line: 123 	 }
| [ 0:00] ## Line: 124 	 
| [ 0:00] ## Line: 125 	 vgchange_single() {
| [ 0:00] ## Line: 126 	 	LVM_TEST_TAG="kill_me_$PREFIX" vgchange -aey $vg
| [ 0:00] ## Line: 127 	 
| [ 0:00] ## Line: 128 	 	if test -e LOCAL_LVMPOLLD; then
| [ 0:00] ## Line: 129 	 		aux lvmpolld_dump | tee lvmpolld_dump.txt
| [ 0:00] ## Line: 130 	 		aux check_lvmpolld_init_rq_count 1 "$vg/pvmove0"
| [ 0:00] ## Line: 131 	 		aux check_lvmpolld_init_rq_count 1 "$vg/pvmove1"
| [ 0:00] ## Line: 132 	 	else
| [ 0:00] ## Line: 133 	 		test "$(aux count_processes_with_tag)" -eq "$1"
| [ 0:00] ## Line: 134 	 	fi
| [ 0:00] ## Line: 135 	 }
| [ 0:00] ## Line: 136 	 
| [ 0:00] ## Line: 137 	 pvmove_fg() {
| [ 0:00] ## Line: 138 	 	# pvmove resume requires LVs active...
| [ 0:00] ## Line: 139 	 	LVM_TEST_TAG="kill_me_$PREFIX" vgchange --config 'activation{polling_interval=10}' -aey --poll n $vg
| [ 0:00] ## Line: 140 	 
| [ 0:00] ## Line: 141 	 	# ...also vgchange --poll n must not spawn any bg processes...
| [ 0:00] ## Line: 142 	 	if test -e LOCAL_LVMPOLLD; then
| [ 0:00] ## Line: 143 	 		aux lvmpolld_dump | tee lvmpolld_dump.txt
| [ 0:00] ## Line: 144 	 		aux check_lvmpolld_init_rq_count 0 "$vg/pvmove0"
| [ 0:00] ## Line: 145 	 		aux check_lvmpolld_init_rq_count 0 "$vg/pvmove1"
| [ 0:00] ## Line: 146 	 	else
| [ 0:00] ## Line: 147 	 		test "$(aux count_processes_with_tag)" -eq 0
| [ 0:00] ## Line: 148 	 	fi
| [ 0:00] ## Line: 149 	 
| [ 0:00] ## Line: 150 	 	# ...thus finish polling
| [ 0:00] ## Line: 151 	 	get lv_field $vg name -a | grep -E "^\[?pvmove0"
| [ 0:00] ## Line: 152 	 	get lv_field $vg name -a | grep -E "^\[?pvmove1"
| [ 0:00] ## Line: 153 	 
| [ 0:00] ## Line: 154 	 	# disable delay device
| [ 0:00] ## Line: 155 	 	# fg pvmove would take ages to complete otherwise
| [ 0:00] ## Line: 156 	 	aux enable_dev "$dev4"
| [ 0:00] ## Line: 157 	 	aux enable_dev "$dev5"
| [ 0:00] ## Line: 158 	 
| [ 0:00] ## Line: 159 	 	pvmove
| [ 0:00] ## Line: 160 	 }
| [ 0:00] ## Line: 161 	 
| [ 0:00] ## Line: 162 	 pvmove_bg() {
| [ 0:00] ## Line: 163 	 	# pvmove resume requires LVs active...
| [ 0:00] ## Line: 164 	 	LVM_TEST_TAG="kill_me_$PREFIX" vgchange --config 'activation{polling_interval=10}' -aey --poll n $vg
| [ 0:00] ## Line: 165 	 
| [ 0:00] ## Line: 166 	 	# ...also vgchange --poll n must not spawn any bg processes...
| [ 0:00] ## Line: 167 	 	if test -e LOCAL_LVMPOLLD; then
| [ 0:00] ## Line: 168 	 		aux lvmpolld_dump | tee lvmpolld_dump.txt
| [ 0:00] ## Line: 169 	 		aux check_lvmpolld_init_rq_count 0 "$vg/pvmove0"
| [ 0:00] ## Line: 170 	 		aux check_lvmpolld_init_rq_count 0 "$vg/pvmove1"
| [ 0:00] ## Line: 171 	 	else
| [ 0:00] ## Line: 172 	 		test "$(aux count_processes_with_tag)" -eq 0
| [ 0:00] ## Line: 173 	 	fi
| [ 0:00] ## Line: 174 	 
| [ 0:00] ## Line: 175 	 	# ...thus finish polling
| [ 0:00] ## Line: 176 	 	get lv_field $vg name -a | grep -E "^\[?pvmove0"
| [ 0:00] ## Line: 177 	 	get lv_field $vg name -a | grep -E "^\[?pvmove1"
| [ 0:00] ## Line: 178 	 
| [ 0:00] ## Line: 179 	 	LVM_TEST_TAG="kill_me_$PREFIX" pvmove -b
| [ 0:00] ## Line: 180 	 }
| [ 0:00] ## Line: 181 	 
| [ 0:00] ## Line: 182 	 pvmove_fg_single() {
| [ 0:00] ## Line: 183 	 	# pvmove resume requires LVs active...
| [ 0:00] ## Line: 184 	 	LVM_TEST_TAG="kill_me_$PREFIX" vgchange --config 'activation{polling_interval=10}' -aey --poll n $vg
| [ 0:00] ## Line: 185 	 
| [ 0:00] ## Line: 186 	 	# ...also vgchange --poll n must not spawn any bg processes...
| [ 0:00] ## Line: 187 	 	if test -e LOCAL_LVMPOLLD; then
| [ 0:00] ## Line: 188 	 		aux lvmpolld_dump | tee lvmpolld_dump.txt
| [ 0:00] ## Line: 189 	 		aux check_lvmpolld_init_rq_count 0 "$vg/pvmove0"
| [ 0:00] ## Line: 190 	 		aux check_lvmpolld_init_rq_count 0 "$vg/pvmove1"
| [ 0:00] ## Line: 191 	 	else
| [ 0:00] ## Line: 192 	 		test "$(aux count_processes_with_tag)" -eq 0
| [ 0:00] ## Line: 193 	 	fi
| [ 0:00] ## Line: 194 	 
| [ 0:00] ## Line: 195 	 	# ...thus finish polling
| [ 0:00] ## Line: 196 	 	get lv_field $vg name -a | grep -E "^\[?pvmove0"
| [ 0:00] ## Line: 197 	 	get lv_field $vg name -a | grep -E "^\[?pvmove1"
| [ 0:00] ## Line: 198 	 
| [ 0:00] ## Line: 199 	 	# disable delay device
| [ 0:00] ## Line: 200 	 	# fg pvmove would take ages to complete otherwise
| [ 0:00] ## Line: 201 	 	aux enable_dev "$dev4"
| [ 0:00] ## Line: 202 	 	aux enable_dev "$dev5"
| [ 0:00] ## Line: 203 	 
| [ 0:00] ## Line: 204 	 	pvmove "$dev1"
| [ 0:00] ## Line: 205 	 	pvmove "$dev3"
| [ 0:00] ## Line: 206 	 }
| [ 0:00] ## Line: 207 	 
| [ 0:00] ## Line: 208 	 pvmove_bg_single() {
| [ 0:00] ## Line: 209 	 	# pvmove resume requires LVs active...
| [ 0:00] ## Line: 210 	 	LVM_TEST_TAG="kill_me_$PREFIX" vgchange --config 'activation{polling_interval=10}' -aey --poll n $vg
| [ 0:00] ## Line: 211 	 
| [ 0:00] ## Line: 212 	 	# ...also vgchange --poll n must not spawn any bg processes...
| [ 0:00] ## Line: 213 	 	if test -e LOCAL_LVMPOLLD; then
| [ 0:00] ## Line: 214 	 		aux lvmpolld_dump | tee lvmpolld_dump.txt
| [ 0:00] ## Line: 215 	 		aux check_lvmpolld_init_rq_count 0 "$vg/pvmove0"
| [ 0:00] ## Line: 216 	 		aux check_lvmpolld_init_rq_count 0 "$vg/pvmove1"
| [ 0:00] ## Line: 217 	 	else
| [ 0:00] ## Line: 218 	 		test "$(aux count_processes_with_tag)" -eq 0
| [ 0:00] ## Line: 219 	 	fi
| [ 0:00] ## Line: 220 	 
| [ 0:00] ## Line: 221 	 	# ...thus finish polling
| [ 0:00] ## Line: 222 	 	get lv_field $vg name -a | grep -E "^\[?pvmove0"
| [ 0:00] ## Line: 223 	 	get lv_field $vg name -a | grep -E "^\[?pvmove1"
| [ 0:00] ## Line: 224 	 
| [ 0:00] ## Line: 225 	 	LVM_TEST_TAG="kill_me_$PREFIX" pvmove -b "$dev1"
| [ 0:00] ## Line: 226 	 	LVM_TEST_TAG="kill_me_$PREFIX" pvmove -b "$dev3"
| [ 0:00] ## Line: 227 	 }
| [ 0:00] ## Line: 228 	 
| [ 0:00] ## Line: 229 	 test_pvmove_resume lvchange_single
| [ 0:00] ## Line: 230 	 test_pvmove_resume lvchange_all
| [ 0:00] ## Line: 231 	 test_pvmove_resume vgchange_single
| [ 0:00] ## Line: 232 	 test_pvmove_resume pvmove_fg
| [ 0:00] ## Line: 233 	 test_pvmove_resume pvmove_fg_single
| [ 0:00] ## Line: 234 	 test_pvmove_resume pvmove_bg
| [ 0:00] ## Line: 235 	 test_pvmove_resume pvmove_bg_single
| [ 0:00] ## Line: 236 	 
| [ 0:00] ## Line: 237 	 vgremove -ff $vg
| [ 0:00] aux teardown
| [ 0:00] #pvmove-resume-multiseg.sh:1+ aux teardown
| [ 0:00] ## teardown.........ok
###       failed: [ndev-vanilla] shell/pvmove-resume-multiseg.sh
###      skipped: [ndev-vanilla] shell/pvmove-thin-segtypes.sh

| [ 0:00] Library version:   1.02.146 (2017-12-18)
| [ 0:00] Driver version:    4.35.0
| [ 0:00] Kernel is Linux localhost.localdomain 3.10.0-693.11.1.el7.x86_64 #1 SMP Mon Dec 4 23:52:40 UTC 2017 x86_64 GNU/Linux
| [ 0:00] Selinux mode is not installed.
| [ 0:00]               total        used        free      shared  buff/cache   available
| [ 0:00] Mem:           7822        1080        4143          10        2598        6434
| [ 0:00] Swap:          4095           0        4095
| [ 0:00] Filesystem      Size  Used Avail Use% Mounted on
| [ 0:00] /dev/sdc1        18G  8.4G  8.4G  50% /
| [ 0:00] /dev/sdd1        51G  6.1G   43G  13% /lfskernel
| [ 0:00] devtmpfs        3.9G     0  3.9G   0% /dev
| [ 0:00] tmpfs           3.9G     0  3.9G   0% /run
| [ 0:00] @TESTDIR=/tmp/LVMTEST19728.qfn8Gv60V7
| [ 0:00] @PREFIX=LVMTEST19728
| [ 0:00] ## LVMCONF: activation {
| [ 0:00] ## LVMCONF:     checks = 1
| [ 0:00] ## LVMCONF:     monitoring = 0
| [ 0:00] ## LVMCONF:     polling_interval = 1
| [ 0:00] ## LVMCONF:     raid_region_size = 512
| [ 0:00] ## LVMCONF:     retry_deactivation = 1
| [ 0:00] ## LVMCONF:     snapshot_autoextend_percent = 50
| [ 0:00] ## LVMCONF:     snapshot_autoextend_threshold = 50
| [ 0:00] ## LVMCONF:     udev_rules = 1
| [ 0:00] ## LVMCONF:     udev_sync = 1
| [ 0:00] ## LVMCONF:     verify_udev_operations = 1
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: allocation {
| [ 0:00] ## LVMCONF:     wipe_signatures_when_zeroing_new_lvs = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: backup {
| [ 0:00] ## LVMCONF:     archive = 0
| [ 0:00] ## LVMCONF:     backup = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: devices {
| [ 0:00] ## LVMCONF:     cache_dir = "@TESTDIR@/etc"
| [ 0:00] ## LVMCONF:     default_data_alignment = 1
| [ 0:00] ## LVMCONF:     dir = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     filter = "a|.*|"
| [ 0:00] ## LVMCONF:     global_filter = [ "a|@TESTDIR@/dev/mapper/@PREFIX@.*pv[0-9_]*$|", "r|.*|" ]
| [ 0:00] ## LVMCONF:     md_component_detection  = 0
| [ 0:00] ## LVMCONF:     scan = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     sysfs_scan = 1
| [ 0:00] ## LVMCONF:     write_cache_state = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: dmeventd {
| [ 0:00] ## LVMCONF:     executable = "/sources/boot/LVM2.2.02.177/test/lib/dmeventd"
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: global {
| [ 0:00] ## LVMCONF:     abort_on_internal_errors = 1
| [ 0:00] ## LVMCONF:     cache_check_executable = "/usr/sbin/cache_check"
| [ 0:00] ## LVMCONF:     cache_dump_executable = "/usr/sbin/cache_dump"
| [ 0:00] ## LVMCONF:     cache_repair_executable = "/usr/sbin/cache_repair"
| [ 0:00] ## LVMCONF:     detect_internal_vg_cache_corruption = 1
| [ 0:00] ## LVMCONF:     fallback_to_local_locking = 0
| [ 0:00] ## LVMCONF:     fsadm_executable = "/sources/boot/LVM2.2.02.177/test/lib/fsadm"
| [ 0:00] ## LVMCONF:     library_dir = "@TESTDIR@/lib"
| [ 0:00] ## LVMCONF:     locking_dir = "@TESTDIR@/var/lock/lvm"
| [ 0:00] ## LVMCONF:     locking_type=1
| [ 0:00] ## LVMCONF:     notify_dbus = 0
| [ 0:00] ## LVMCONF:     si_unit_consistency = 1
| [ 0:00] ## LVMCONF:     thin_check_executable = "/usr/sbin/thin_check"
| [ 0:00] ## LVMCONF:     thin_dump_executable = "/usr/sbin/thin_dump"
| [ 0:00] ## LVMCONF:     thin_repair_executable = "/usr/sbin/thin_repair"
| [ 0:00] ## LVMCONF:     use_lvmetad = 0
| [ 0:00] ## LVMCONF:     use_lvmlockd = 0
| [ 0:00] ## LVMCONF:     use_lvmpolld = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: log {
| [ 0:00] ## LVMCONF:     activation = 1
| [ 0:00] ## LVMCONF:     file = "@TESTDIR@/debug.log"
| [ 0:00] ## LVMCONF:     indent = 1
| [ 0:00] ## LVMCONF:     level = 9
| [ 0:00] ## LVMCONF:     overwrite = 1
| [ 0:00] ## LVMCONF:     syslog = 0
| [ 0:00] ## LVMCONF:     verbose = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] <======== Processing test: "pvremove-thin.sh" ========>
| [ 0:00] 
| [ 0:00] aux prepare_vg
| [ 0:00] #pvremove-thin.sh:21+ aux prepare_vg
| [ 0:00] ## preparing loop device....ok (/dev/loop0)
| [ 0:00] ## preparing 3 devices...lib/utils: line 212: DM_UDEV_COOKIE: unbound variable
| [ 0:00] set +vx; STACKTRACE; set -vx
| [ 0:00] ##pvremove-thin.sh:21+ set +vx
| [ 0:00] ## - /lfskernel/sources/boot/LVM2.2.02.177/test/shell/pvremove-thin.sh:21
| [ 0:00] ## 1 STACKTRACE() called from /lfskernel/sources/boot/LVM2.2.02.177/test/shell/pvremove-thin.sh:21
| [ 0:00] <======== Info ========>
| [ 0:00] ## DMINFO:   Name             Maj Min Stat Open Targ Event  UUID                                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv3  253   4 L--w    0    1      0 TEST-@PREFIX@pv3                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv2  253   3 L--w    0    1      0 TEST-@PREFIX@pv2                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv1  253   5 L--w    0    1      0 TEST-@PREFIX@pv1                                                
| [ 0:00] <======== Active table ========>
| [ 0:00] ## DMTABLE:  @PREFIX@pv3: 0 69632 linear 7:0 141312
| [ 0:00] ## DMTABLE:  @PREFIX@pv2: 0 69632 linear 7:0 71680
| [ 0:00] ## DMTABLE:  @PREFIX@pv1: 0 69632 linear 7:0 2048
| [ 0:00] <======== Inactive table ========>
| [ 0:00] ## DMITABLE: @PREFIX@pv3: 
| [ 0:00] ## DMITABLE: @PREFIX@pv2: 
| [ 0:00] ## DMITABLE: @PREFIX@pv1: 
| [ 0:00] <======== Status ========>
| [ 0:00] ## DMSTATUS: @PREFIX@pv3: 0 69632 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv2: 0 69632 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv1: 0 69632 linear 
| [ 0:00] <======== Tree ========>
| [ 0:00] ## DMTREE:   @PREFIX@pv3 (253:4)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   @PREFIX@pv2 (253:3)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   @PREFIX@pv1 (253:5)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   LFS_vg-lfs (253:2)
| [ 0:00] ## DMTREE:    `- (8:16)
| [ 0:00] ## DMTREE:   centos-swap (253:1)
| [ 0:00] ## DMTREE:    `- (8:2)
| [ 0:00] ## DMTREE:   centos-root (253:0)
| [ 0:00] ## DMTREE:    `- (8:2)
| [ 0:00] <======== Recursive list of @TESTDIR@/dev ========>
| [ 0:00] ## LSLR:	@TESTDIR@/dev:
| [ 0:00] ## LSLR:	total 4
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 0 Feb 21 02:27 loop0
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 1 Feb 21 02:27 loop1
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 2 Feb 21 02:27 loop2
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 3 Feb 21 02:27 loop3
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 4 Feb 21 02:27 loop4
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 5 Feb 21 02:27 loop5
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 6 Feb 21 02:27 loop6
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 7 Feb 21 02:27 loop7
| [ 0:00] ## LSLR:	drwxr-xr-x 2 root root 4096 Feb 21 02:27 mapper
| [ 0:00] ## LSLR:	crw-r--r-- 1 root root 1, 3 Feb 21 02:27 testnull
| [ 0:00] ## LSLR:	
| [ 0:00] ## LSLR:	@TESTDIR@/dev/mapper:
| [ 0:00] ## LSLR:	total 0
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   5 Feb 21 02:27 @PREFIX@pv1
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   3 Feb 21 02:27 @PREFIX@pv2
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   4 Feb 21 02:27 @PREFIX@pv3
| [ 0:00] ## LSLR:	crw------- 1 root root  10, 236 Feb 21 02:27 control
| [ 0:00] <======== Udev DB content ========>
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-0
| [ 0:00] ## UDEV:	N: dm-0
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-0
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-0
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=0
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-1
| [ 0:00] ## UDEV:	N: dm-1
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-1
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-1
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=1
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-2
| [ 0:00] ## UDEV:	N: dm-2
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-2
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-2
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=2
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-3
| [ 0:00] ## UDEV:	N: dm-3
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-3
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-3
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=3
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-4
| [ 0:00] ## UDEV:	N: dm-4
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-4
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-4
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=4
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-5
| [ 0:00] ## UDEV:	N: dm-5
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-5
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-5
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=5
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/loop0
| [ 0:00] ## UDEV:	N: loop0
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/loop0
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/loop0
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=7
| [ 0:00] ## UDEV:	E: MINOR=0
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] <======== Script file "pvremove-thin.sh" ========>
| [ 0:00] ## Line: 1 	 #!/usr/bin/env bash
| [ 0:00] ## Line: 2 	 
| [ 0:00] ## Line: 3 	 # Copyright (C) 2014 Red Hat, Inc. All rights reserved.
| [ 0:00] ## Line: 4 	 #
| [ 0:00] ## Line: 5 	 # This copyrighted material is made available to anyone wishing to use,
| [ 0:00] ## Line: 6 	 # modify, copy, or redistribute it subject to the terms and conditions
| [ 0:00] ## Line: 7 	 # of the GNU General Public License v.2.
| [ 0:00] ## Line: 8 	 #
| [ 0:00] ## Line: 9 	 # You should have received a copy of the GNU General Public License
| [ 0:00] ## Line: 10 	 # along with this program; if not, write to the Free Software Foundation,
| [ 0:00] ## Line: 11 	 # Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA
| [ 0:00] ## Line: 12 	 
| [ 0:00] ## Line: 13 	 # Checks we are not reading our own devices
| [ 0:00] ## Line: 14 	 # https://bugzilla.redhat.com/show_bug.cgi?id=1064374
| [ 0:00] ## Line: 15 	 
| [ 0:00] ## Line: 16 	 SKIP_WITH_LVMLOCKD=1
| [ 0:00] ## Line: 17 	 SKIP_WITH_LVMPOLLD=1
| [ 0:00] ## Line: 18 	 
| [ 0:00] ## Line: 19 	 . lib/inittest
| [ 0:00] ## Line: 20 	 
| [ 0:00] ## Line: 21 	 aux prepare_vg
| [ 0:00] ## Line: 22 	 
| [ 0:00] ## Line: 23 	 aux have_thin 1 8 0 || skip
| [ 0:00] ## Line: 24 	 
| [ 0:00] ## Line: 25 	 aux extend_filter_LVMTEST
| [ 0:00] ## Line: 26 	 
| [ 0:00] ## Line: 27 	 lvcreate -L10 -V10 -n $lv1 -T $vg/pool1
| [ 0:00] ## Line: 28 	 
| [ 0:00] ## Line: 29 	 pvcreate "$DM_DEV_DIR/$vg/$lv1"
| [ 0:00] ## Line: 30 	 pvremove "$DM_DEV_DIR/$vg/$lv1"
| [ 0:00] ## Line: 31 	 
| [ 0:00] ## Line: 32 	 vgremove -ff $vg
| [ 0:00] aux teardown
| [ 0:00] #pvremove-thin.sh:1+ aux teardown
| [ 0:00] ## teardown.........ok
###       failed: [ndev-vanilla] shell/pvremove-thin.sh

| [ 0:00] Library version:   1.02.146 (2017-12-18)
| [ 0:00] Driver version:    4.35.0
| [ 0:00] Kernel is Linux localhost.localdomain 3.10.0-693.11.1.el7.x86_64 #1 SMP Mon Dec 4 23:52:40 UTC 2017 x86_64 GNU/Linux
| [ 0:00] Selinux mode is not installed.
| [ 0:00]               total        used        free      shared  buff/cache   available
| [ 0:00] Mem:           7822        1081        4143          10        2598        6434
| [ 0:00] Swap:          4095           0        4095
| [ 0:00] Filesystem      Size  Used Avail Use% Mounted on
| [ 0:00] /dev/sdc1        18G  8.4G  8.4G  50% /
| [ 0:00] /dev/sdd1        51G  6.1G   43G  13% /lfskernel
| [ 0:00] devtmpfs        3.9G     0  3.9G   0% /dev
| [ 0:00] tmpfs           3.9G     0  3.9G   0% /run
| [ 0:00] @TESTDIR=/tmp/LVMTEST19918.hH1RV9lhBq
| [ 0:00] @PREFIX=LVMTEST19918
| [ 0:00] ## LVMCONF: activation {
| [ 0:00] ## LVMCONF:     checks = 1
| [ 0:00] ## LVMCONF:     monitoring = 0
| [ 0:00] ## LVMCONF:     polling_interval = 1
| [ 0:00] ## LVMCONF:     raid_region_size = 512
| [ 0:00] ## LVMCONF:     retry_deactivation = 1
| [ 0:00] ## LVMCONF:     snapshot_autoextend_percent = 50
| [ 0:00] ## LVMCONF:     snapshot_autoextend_threshold = 50
| [ 0:00] ## LVMCONF:     udev_rules = 1
| [ 0:00] ## LVMCONF:     udev_sync = 1
| [ 0:00] ## LVMCONF:     verify_udev_operations = 1
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: allocation {
| [ 0:00] ## LVMCONF:     wipe_signatures_when_zeroing_new_lvs = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: backup {
| [ 0:00] ## LVMCONF:     archive = 0
| [ 0:00] ## LVMCONF:     backup = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: devices {
| [ 0:00] ## LVMCONF:     cache_dir = "@TESTDIR@/etc"
| [ 0:00] ## LVMCONF:     default_data_alignment = 1
| [ 0:00] ## LVMCONF:     dir = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     filter = "a|.*|"
| [ 0:00] ## LVMCONF:     global_filter = [ "a|@TESTDIR@/dev/mapper/@PREFIX@.*pv[0-9_]*$|", "r|.*|" ]
| [ 0:00] ## LVMCONF:     md_component_detection  = 0
| [ 0:00] ## LVMCONF:     scan = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     sysfs_scan = 1
| [ 0:00] ## LVMCONF:     write_cache_state = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: dmeventd {
| [ 0:00] ## LVMCONF:     executable = "/sources/boot/LVM2.2.02.177/test/lib/dmeventd"
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: global {
| [ 0:00] ## LVMCONF:     abort_on_internal_errors = 1
| [ 0:00] ## LVMCONF:     cache_check_executable = "/usr/sbin/cache_check"
| [ 0:00] ## LVMCONF:     cache_dump_executable = "/usr/sbin/cache_dump"
| [ 0:00] ## LVMCONF:     cache_repair_executable = "/usr/sbin/cache_repair"
| [ 0:00] ## LVMCONF:     detect_internal_vg_cache_corruption = 1
| [ 0:00] ## LVMCONF:     fallback_to_local_locking = 0
| [ 0:00] ## LVMCONF:     fsadm_executable = "/sources/boot/LVM2.2.02.177/test/lib/fsadm"
| [ 0:00] ## LVMCONF:     library_dir = "@TESTDIR@/lib"
| [ 0:00] ## LVMCONF:     locking_dir = "@TESTDIR@/var/lock/lvm"
| [ 0:00] ## LVMCONF:     locking_type=1
| [ 0:00] ## LVMCONF:     notify_dbus = 0
| [ 0:00] ## LVMCONF:     si_unit_consistency = 1
| [ 0:00] ## LVMCONF:     thin_check_executable = "/usr/sbin/thin_check"
| [ 0:00] ## LVMCONF:     thin_dump_executable = "/usr/sbin/thin_dump"
| [ 0:00] ## LVMCONF:     thin_repair_executable = "/usr/sbin/thin_repair"
| [ 0:00] ## LVMCONF:     use_lvmetad = 0
| [ 0:00] ## LVMCONF:     use_lvmlockd = 0
| [ 0:00] ## LVMCONF:     use_lvmpolld = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: log {
| [ 0:00] ## LVMCONF:     activation = 1
| [ 0:00] ## LVMCONF:     file = "@TESTDIR@/debug.log"
| [ 0:00] ## LVMCONF:     indent = 1
| [ 0:00] ## LVMCONF:     level = 9
| [ 0:00] ## LVMCONF:     overwrite = 1
| [ 0:00] ## LVMCONF:     syslog = 0
| [ 0:00] ## LVMCONF:     verbose = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] <======== Processing test: "pvremove-usage.sh" ========>
| [ 0:00] 
| [ 0:00] aux prepare_devs 3
| [ 0:00] #pvremove-usage.sh:18+ aux prepare_devs 3
| [ 0:00] ## preparing loop device....ok (/dev/loop0)
| [ 0:00] ## preparing 3 devices...lib/utils: line 212: DM_UDEV_COOKIE: unbound variable
| [ 0:00] set +vx; STACKTRACE; set -vx
| [ 0:00] ##pvremove-usage.sh:18+ set +vx
| [ 0:00] ## - /lfskernel/sources/boot/LVM2.2.02.177/test/shell/pvremove-usage.sh:18
| [ 0:00] ## 1 STACKTRACE() called from /lfskernel/sources/boot/LVM2.2.02.177/test/shell/pvremove-usage.sh:18
| [ 0:00] <======== Info ========>
| [ 0:00] ## DMINFO:   Name             Maj Min Stat Open Targ Event  UUID                                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv3  253   4 L--w    0    1      0 TEST-@PREFIX@pv3                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv2  253   3 L--w    0    1      0 TEST-@PREFIX@pv2                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv1  253   5 L--w    0    1      0 TEST-@PREFIX@pv1                                                
| [ 0:00] <======== Active table ========>
| [ 0:00] ## DMTABLE:  @PREFIX@pv3: 0 69632 linear 7:0 141312
| [ 0:00] ## DMTABLE:  @PREFIX@pv2: 0 69632 linear 7:0 71680
| [ 0:00] ## DMTABLE:  @PREFIX@pv1: 0 69632 linear 7:0 2048
| [ 0:00] <======== Inactive table ========>
| [ 0:00] ## DMITABLE: @PREFIX@pv3: 
| [ 0:00] ## DMITABLE: @PREFIX@pv2: 
| [ 0:00] ## DMITABLE: @PREFIX@pv1: 
| [ 0:00] <======== Status ========>
| [ 0:00] ## DMSTATUS: @PREFIX@pv3: 0 69632 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv2: 0 69632 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv1: 0 69632 linear 
| [ 0:00] <======== Tree ========>
| [ 0:00] ## DMTREE:   @PREFIX@pv3 (253:4)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   @PREFIX@pv2 (253:3)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   @PREFIX@pv1 (253:5)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   LFS_vg-lfs (253:2)
| [ 0:00] ## DMTREE:    `- (8:16)
| [ 0:00] ## DMTREE:   centos-swap (253:1)
| [ 0:00] ## DMTREE:    `- (8:2)
| [ 0:00] ## DMTREE:   centos-root (253:0)
| [ 0:00] ## DMTREE:    `- (8:2)
| [ 0:00] <======== Recursive list of @TESTDIR@/dev ========>
| [ 0:00] ## LSLR:	@TESTDIR@/dev:
| [ 0:00] ## LSLR:	total 4
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 0 Feb 21 02:27 loop0
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 1 Feb 21 02:27 loop1
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 2 Feb 21 02:27 loop2
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 3 Feb 21 02:27 loop3
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 4 Feb 21 02:27 loop4
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 5 Feb 21 02:27 loop5
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 6 Feb 21 02:27 loop6
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 7 Feb 21 02:27 loop7
| [ 0:00] ## LSLR:	drwxr-xr-x 2 root root 4096 Feb 21 02:27 mapper
| [ 0:00] ## LSLR:	crw-r--r-- 1 root root 1, 3 Feb 21 02:27 testnull
| [ 0:00] ## LSLR:	
| [ 0:00] ## LSLR:	@TESTDIR@/dev/mapper:
| [ 0:00] ## LSLR:	total 0
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   5 Feb 21 02:27 @PREFIX@pv1
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   3 Feb 21 02:27 @PREFIX@pv2
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   4 Feb 21 02:27 @PREFIX@pv3
| [ 0:00] ## LSLR:	crw------- 1 root root  10, 236 Feb 21 02:27 control
| [ 0:00] <======== Udev DB content ========>
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-0
| [ 0:00] ## UDEV:	N: dm-0
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-0
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-0
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=0
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-1
| [ 0:00] ## UDEV:	N: dm-1
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-1
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-1
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=1
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-2
| [ 0:00] ## UDEV:	N: dm-2
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-2
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-2
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=2
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-3
| [ 0:00] ## UDEV:	N: dm-3
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-3
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-3
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=3
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-4
| [ 0:00] ## UDEV:	N: dm-4
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-4
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-4
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=4
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-5
| [ 0:00] ## UDEV:	N: dm-5
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-5
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-5
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=5
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/loop0
| [ 0:00] ## UDEV:	N: loop0
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/loop0
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/loop0
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=7
| [ 0:00] ## UDEV:	E: MINOR=0
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] <======== Script file "pvremove-usage.sh" ========>
| [ 0:00] ## Line: 1 	 #!/usr/bin/env bash
| [ 0:00] ## Line: 2 	 
| [ 0:00] ## Line: 3 	 # Copyright (C) 2008 Red Hat, Inc. All rights reserved.
| [ 0:00] ## Line: 4 	 #
| [ 0:00] ## Line: 5 	 # This copyrighted material is made available to anyone wishing to use,
| [ 0:00] ## Line: 6 	 # modify, copy, or redistribute it subject to the terms and conditions
| [ 0:00] ## Line: 7 	 # of the GNU General Public License v.2.
| [ 0:00] ## Line: 8 	 #
| [ 0:00] ## Line: 9 	 # You should have received a copy of the GNU General Public License
| [ 0:00] ## Line: 10 	 # along with this program; if not, write to the Free Software Foundation,
| [ 0:00] ## Line: 11 	 # Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA
| [ 0:00] ## Line: 12 	 
| [ 0:00] ## Line: 13 	 SKIP_WITH_LVMLOCKD=1
| [ 0:00] ## Line: 14 	 SKIP_WITH_LVMPOLLD=1
| [ 0:00] ## Line: 15 	 
| [ 0:00] ## Line: 16 	 . lib/inittest
| [ 0:00] ## Line: 17 	 
| [ 0:00] ## Line: 18 	 aux prepare_devs 3
| [ 0:00] ## Line: 19 	 pvcreate "$dev1"
| [ 0:00] ## Line: 20 	 pvcreate --metadatacopies 0 "$dev2"
| [ 0:00] ## Line: 21 	 pvcreate --metadatacopies 2 "$dev3"
| [ 0:00] ## Line: 22 	 
| [ 0:00] ## Line: 23 	 # Fails without give argument
| [ 0:00] ## Line: 24 	 not pvremove
| [ 0:00] ## Line: 25 	 pvremove "$dev2"
| [ 0:00] ## Line: 26 	 
| [ 0:00] ## Line: 27 	 # failing, but still removing everything what can be removed
| [ 0:00] ## Line: 28 	 # is somewhat odd as default, what do we have -f for?
| [ 0:00] ## Line: 29 	 pvs | not grep "$dev2"
| [ 0:00] ## Line: 30 	 pvs -a | grep "$dev2"
| [ 0:00] ## Line: 31 	 # bz1108394 no crash on nonPV label listing
| [ 0:00] ## Line: 32 	 pvs -a -o+devices
| [ 0:00] ## Line: 33 	 
| [ 0:00] ## Line: 34 	 pvcreate  --metadatacopies 0 "$dev2"
| [ 0:00] ## Line: 35 	 
| [ 0:00] ## Line: 36 	 # check pvremove refuses to remove pv in a vg
| [ 0:00] ## Line: 37 	 vgcreate $vg "$dev1" "$dev2"
| [ 0:00] ## Line: 38 	 not pvremove "$dev2" "$dev3"
| [ 0:00] ## Line: 39 	 
| [ 0:00] ## Line: 40 	 for mdacp in 0 1 2; do
| [ 0:00] ## Line: 41 	     # check pvremove truly wipes the label (pvscan wont find) (---metadatacopies $mdacp)
| [ 0:00] ## Line: 42 	     pvcreate --metadatacopies $mdacp "$dev3"
| [ 0:00] ## Line: 43 	     pvremove "$dev3"
| [ 0:00] ## Line: 44 	     # try to remove agail - should fail cleanly
| [ 0:00] ## Line: 45 	     not pvremove "$dev3"
| [ 0:00] ## Line: 46 	     pvscan | not grep "$dev3"
| [ 0:00] ## Line: 47 	 
| [ 0:00] ## Line: 48 	 	# bz179473 refuse to wipe non-PV device without -f
| [ 0:00] ## Line: 49 	     not pvremove "$dev3"
| [ 0:00] ## Line: 50 	     pvremove -f "$dev3"
| [ 0:00] ## Line: 51 	 
| [ 0:00] ## Line: 52 	     # reset setup
| [ 0:00] ## Line: 53 	     vgremove -ff $vg
| [ 0:00] ## Line: 54 	     pvcreate --metadatacopies $mdacp "$dev1"
| [ 0:00] ## Line: 55 	     pvcreate "$dev2"
| [ 0:00] ## Line: 56 	     vgcreate $vg "$dev1" "$dev2"
| [ 0:00] ## Line: 57 	 
| [ 0:00] ## Line: 58 	     # pvremove -f fails when pv in a vg (---metadatacopies $mdacp)
| [ 0:00] ## Line: 59 	     not pvremove -f "$dev1" 2>&1 | tee out
| [ 0:00] ## Line: 60 	     grep "is used" out
| [ 0:00] ## Line: 61 	     pvs "$dev1"
| [ 0:00] ## Line: 62 	 
| [ 0:00] ## Line: 63 	     # pvremove -ff fails without confirmation when pv in a vg (---metadatacopies $mdacp)
| [ 0:00] ## Line: 64 	     not pvremove -ff "$dev1" 2>&1 | tee out
| [ 0:00] ## Line: 65 	     grep "is used" out
| [ 0:00] ## Line: 66 	 
| [ 0:00] ## Line: 67 	     # pvremove -ff succeds with confirmation when pv in a vg (---metadatacopies $mdacp)
| [ 0:00] ## Line: 68 	     pvremove -ffy "$dev1" 2>&1 | tee out
| [ 0:00] ## Line: 69 	     grep "is used" out
| [ 0:00] ## Line: 70 	     not pvs "$dev1"
| [ 0:00] ## Line: 71 	 
| [ 0:00] ## Line: 72 	     vgreduce --removemissing $vg
| [ 0:00] ## Line: 73 	     pvcreate --metadatacopies $mdacp "$dev1"
| [ 0:00] ## Line: 74 	     vgextend $vg "$dev1"
| [ 0:00] ## Line: 75 	 
| [ 0:00] ## Line: 76 	     # pvremove -ff -y is sufficient when pv in a vg (---metadatacopies $mdacp)" '
| [ 0:00] ## Line: 77 	     pvremove -ff -y "$dev1"
| [ 0:00] ## Line: 78 	 
| [ 0:00] ## Line: 79 	     vgreduce --removemissing $vg
| [ 0:00] ## Line: 80 	     pvcreate --metadatacopies $mdacp "$dev1"
| [ 0:00] ## Line: 81 	     vgextend $vg "$dev1"
| [ 0:00] ## Line: 82 	 done
| [ 0:00] ## Line: 83 	 
| [ 0:00] ## Line: 84 	 vgremove -ff $vg
| [ 0:00] aux teardown
| [ 0:00] #pvremove-usage.sh:1+ aux teardown
| [ 0:00] ## teardown.........ok
###       failed: [ndev-vanilla] shell/pvremove-usage.sh

| [ 0:00] Library version:   1.02.146 (2017-12-18)
| [ 0:00] Driver version:    4.35.0
| [ 0:00] Kernel is Linux localhost.localdomain 3.10.0-693.11.1.el7.x86_64 #1 SMP Mon Dec 4 23:52:40 UTC 2017 x86_64 GNU/Linux
| [ 0:00] Selinux mode is not installed.
| [ 0:00]               total        used        free      shared  buff/cache   available
| [ 0:00] Mem:           7822        1080        4143          10        2598        6435
| [ 0:00] Swap:          4095           0        4095
| [ 0:00] Filesystem      Size  Used Avail Use% Mounted on
| [ 0:00] /dev/sdc1        18G  8.4G  8.4G  50% /
| [ 0:00] /dev/sdd1        51G  6.1G   43G  13% /lfskernel
| [ 0:00] devtmpfs        3.9G     0  3.9G   0% /dev
| [ 0:00] tmpfs           3.9G     0  3.9G   0% /run
| [ 0:00] @TESTDIR=/tmp/LVMTEST20099.c7MPerYeqo
| [ 0:00] @PREFIX=LVMTEST20099
| [ 0:00] ## LVMCONF: activation {
| [ 0:00] ## LVMCONF:     checks = 1
| [ 0:00] ## LVMCONF:     monitoring = 0
| [ 0:00] ## LVMCONF:     polling_interval = 1
| [ 0:00] ## LVMCONF:     raid_region_size = 512
| [ 0:00] ## LVMCONF:     retry_deactivation = 1
| [ 0:00] ## LVMCONF:     snapshot_autoextend_percent = 50
| [ 0:00] ## LVMCONF:     snapshot_autoextend_threshold = 50
| [ 0:00] ## LVMCONF:     udev_rules = 1
| [ 0:00] ## LVMCONF:     udev_sync = 1
| [ 0:00] ## LVMCONF:     verify_udev_operations = 1
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: allocation {
| [ 0:00] ## LVMCONF:     wipe_signatures_when_zeroing_new_lvs = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: backup {
| [ 0:00] ## LVMCONF:     archive = 0
| [ 0:00] ## LVMCONF:     backup = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: devices {
| [ 0:00] ## LVMCONF:     cache_dir = "@TESTDIR@/etc"
| [ 0:00] ## LVMCONF:     default_data_alignment = 1
| [ 0:00] ## LVMCONF:     dir = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     filter = "a|.*|"
| [ 0:00] ## LVMCONF:     global_filter = [ "a|@TESTDIR@/dev/mapper/@PREFIX@.*pv[0-9_]*$|", "r|.*|" ]
| [ 0:00] ## LVMCONF:     md_component_detection  = 0
| [ 0:00] ## LVMCONF:     scan = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     sysfs_scan = 1
| [ 0:00] ## LVMCONF:     write_cache_state = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: dmeventd {
| [ 0:00] ## LVMCONF:     executable = "/sources/boot/LVM2.2.02.177/test/lib/dmeventd"
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: global {
| [ 0:00] ## LVMCONF:     abort_on_internal_errors = 1
| [ 0:00] ## LVMCONF:     cache_check_executable = "/usr/sbin/cache_check"
| [ 0:00] ## LVMCONF:     cache_dump_executable = "/usr/sbin/cache_dump"
| [ 0:00] ## LVMCONF:     cache_repair_executable = "/usr/sbin/cache_repair"
| [ 0:00] ## LVMCONF:     detect_internal_vg_cache_corruption = 1
| [ 0:00] ## LVMCONF:     fallback_to_local_locking = 0
| [ 0:00] ## LVMCONF:     fsadm_executable = "/sources/boot/LVM2.2.02.177/test/lib/fsadm"
| [ 0:00] ## LVMCONF:     library_dir = "@TESTDIR@/lib"
| [ 0:00] ## LVMCONF:     locking_dir = "@TESTDIR@/var/lock/lvm"
| [ 0:00] ## LVMCONF:     locking_type=1
| [ 0:00] ## LVMCONF:     notify_dbus = 0
| [ 0:00] ## LVMCONF:     si_unit_consistency = 1
| [ 0:00] ## LVMCONF:     thin_check_executable = "/usr/sbin/thin_check"
| [ 0:00] ## LVMCONF:     thin_dump_executable = "/usr/sbin/thin_dump"
| [ 0:00] ## LVMCONF:     thin_repair_executable = "/usr/sbin/thin_repair"
| [ 0:00] ## LVMCONF:     use_lvmetad = 0
| [ 0:00] ## LVMCONF:     use_lvmlockd = 0
| [ 0:00] ## LVMCONF:     use_lvmpolld = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: log {
| [ 0:00] ## LVMCONF:     activation = 1
| [ 0:00] ## LVMCONF:     file = "@TESTDIR@/debug.log"
| [ 0:00] ## LVMCONF:     indent = 1
| [ 0:00] ## LVMCONF:     level = 9
| [ 0:00] ## LVMCONF:     overwrite = 1
| [ 0:00] ## LVMCONF:     syslog = 0
| [ 0:00] ## LVMCONF:     verbose = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] <======== Processing test: "pvremove-warnings.sh" ========>
| [ 0:00] 
| [ 0:00] aux prepare_devs 2
| [ 0:00] #pvremove-warnings.sh:18+ aux prepare_devs 2
| [ 0:00] ## preparing loop device....ok (/dev/loop0)
| [ 0:00] ## preparing 2 devices...lib/utils: line 212: DM_UDEV_COOKIE: unbound variable
| [ 0:00] set +vx; STACKTRACE; set -vx
| [ 0:00] ##pvremove-warnings.sh:18+ set +vx
| [ 0:00] ## - /lfskernel/sources/boot/LVM2.2.02.177/test/shell/pvremove-warnings.sh:18
| [ 0:00] ## 1 STACKTRACE() called from /lfskernel/sources/boot/LVM2.2.02.177/test/shell/pvremove-warnings.sh:18
| [ 0:00] <======== Info ========>
| [ 0:00] ## DMINFO:   Name             Maj Min Stat Open Targ Event  UUID                                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv2  253   4 L--w    0    1      0 TEST-@PREFIX@pv2                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv1  253   3 L--w    0    1      0 TEST-@PREFIX@pv1                                                
| [ 0:00] <======== Active table ========>
| [ 0:00] ## DMTABLE:  @PREFIX@pv2: 0 69632 linear 7:0 71680
| [ 0:00] ## DMTABLE:  @PREFIX@pv1: 0 69632 linear 7:0 2048
| [ 0:00] <======== Inactive table ========>
| [ 0:00] ## DMITABLE: @PREFIX@pv2: 
| [ 0:00] ## DMITABLE: @PREFIX@pv1: 
| [ 0:00] <======== Status ========>
| [ 0:00] ## DMSTATUS: @PREFIX@pv2: 0 69632 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv1: 0 69632 linear 
| [ 0:00] <======== Tree ========>
| [ 0:00] ## DMTREE:   @PREFIX@pv2 (253:4)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   @PREFIX@pv1 (253:3)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   LFS_vg-lfs (253:2)
| [ 0:00] ## DMTREE:    `- (8:16)
| [ 0:00] ## DMTREE:   centos-swap (253:1)
| [ 0:00] ## DMTREE:    `- (8:2)
| [ 0:00] ## DMTREE:   centos-root (253:0)
| [ 0:00] ## DMTREE:    `- (8:2)
| [ 0:00] <======== Recursive list of @TESTDIR@/dev ========>
| [ 0:00] ## LSLR:	@TESTDIR@/dev:
| [ 0:00] ## LSLR:	total 4
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 0 Feb 21 02:27 loop0
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 1 Feb 21 02:27 loop1
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 2 Feb 21 02:27 loop2
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 3 Feb 21 02:27 loop3
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 4 Feb 21 02:27 loop4
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 5 Feb 21 02:27 loop5
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 6 Feb 21 02:27 loop6
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 7 Feb 21 02:27 loop7
| [ 0:00] ## LSLR:	drwxr-xr-x 2 root root 4096 Feb 21 02:27 mapper
| [ 0:00] ## LSLR:	crw-r--r-- 1 root root 1, 3 Feb 21 02:27 testnull
| [ 0:00] ## LSLR:	
| [ 0:00] ## LSLR:	@TESTDIR@/dev/mapper:
| [ 0:00] ## LSLR:	total 0
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   3 Feb 21 02:27 @PREFIX@pv1
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   4 Feb 21 02:27 @PREFIX@pv2
| [ 0:00] ## LSLR:	crw------- 1 root root  10, 236 Feb 21 02:27 control
| [ 0:00] <======== Udev DB content ========>
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-0
| [ 0:00] ## UDEV:	N: dm-0
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-0
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-0
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=0
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-1
| [ 0:00] ## UDEV:	N: dm-1
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-1
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-1
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=1
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-2
| [ 0:00] ## UDEV:	N: dm-2
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-2
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-2
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=2
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-3
| [ 0:00] ## UDEV:	N: dm-3
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-3
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-3
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=3
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-4
| [ 0:00] ## UDEV:	N: dm-4
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-4
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-4
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=4
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/loop0
| [ 0:00] ## UDEV:	N: loop0
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/loop0
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/loop0
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=7
| [ 0:00] ## UDEV:	E: MINOR=0
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] <======== Script file "pvremove-warnings.sh" ========>
| [ 0:00] ## Line: 1 	 #!/usr/bin/env bash
| [ 0:00] ## Line: 2 	 
| [ 0:00] ## Line: 3 	 # Copyright (C) 2014 Red Hat, Inc. All rights reserved.
| [ 0:00] ## Line: 4 	 #
| [ 0:00] ## Line: 5 	 # This copyrighted material is made available to anyone wishing to use,
| [ 0:00] ## Line: 6 	 # modify, copy, or redistribute it subject to the terms and conditions
| [ 0:00] ## Line: 7 	 # of the GNU General Public License v.2.
| [ 0:00] ## Line: 8 	 #
| [ 0:00] ## Line: 9 	 # You should have received a copy of the GNU General Public License
| [ 0:00] ## Line: 10 	 # along with this program; if not, write to the Free Software Foundation,
| [ 0:00] ## Line: 11 	 # Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA
| [ 0:00] ## Line: 12 	 
| [ 0:00] ## Line: 13 	 SKIP_WITH_LVMLOCKD=1
| [ 0:00] ## Line: 14 	 SKIP_WITH_LVMPOLLD=1
| [ 0:00] ## Line: 15 	 
| [ 0:00] ## Line: 16 	 . lib/inittest
| [ 0:00] ## Line: 17 	 
| [ 0:00] ## Line: 18 	 aux prepare_devs 2
| [ 0:00] ## Line: 19 	 pvcreate "$dev1" "$dev2"
| [ 0:00] ## Line: 20 	 pvremove "$dev1" "$dev2" 2>&1 | tee pvremove.txt
| [ 0:00] ## Line: 21 	 not grep "No physical" pvremove.txt
| [ 0:00] ## Line: 22 	 
| [ 0:00] ## Line: 23 	 pvcreate "$dev1" "$dev2"
| [ 0:00] ## Line: 24 	 vgcreate bla "$dev1" "$dev2"
| [ 0:00] ## Line: 25 	 pvremove -ff -y "$dev1" "$dev2" 2>&1 | tee pvremove.txt
| [ 0:00] ## Line: 26 	 not grep "device missing" pvremove.txt
| [ 0:00] aux teardown
| [ 0:00] #pvremove-warnings.sh:1+ aux teardown
| [ 0:00] ## teardown.........ok
###       failed: [ndev-vanilla] shell/pvremove-warnings.sh

| [ 0:00] Library version:   1.02.146 (2017-12-18)
| [ 0:00] Driver version:    4.35.0
| [ 0:00] Kernel is Linux localhost.localdomain 3.10.0-693.11.1.el7.x86_64 #1 SMP Mon Dec 4 23:52:40 UTC 2017 x86_64 GNU/Linux
| [ 0:00] Selinux mode is not installed.
| [ 0:00]               total        used        free      shared  buff/cache   available
| [ 0:00] Mem:           7822        1080        4143          10        2599        6435
| [ 0:00] Swap:          4095           0        4095
| [ 0:00] Filesystem      Size  Used Avail Use% Mounted on
| [ 0:00] /dev/sdc1        18G  8.4G  8.4G  50% /
| [ 0:00] /dev/sdd1        51G  6.1G   43G  13% /lfskernel
| [ 0:00] devtmpfs        3.9G     0  3.9G   0% /dev
| [ 0:00] tmpfs           3.9G     0  3.9G   0% /run
| [ 0:00] @TESTDIR=/tmp/LVMTEST20267.W0OwLWGIq6
| [ 0:00] @PREFIX=LVMTEST20267
| [ 0:00] ## LVMCONF: activation {
| [ 0:00] ## LVMCONF:     checks = 1
| [ 0:00] ## LVMCONF:     monitoring = 0
| [ 0:00] ## LVMCONF:     polling_interval = 1
| [ 0:00] ## LVMCONF:     raid_region_size = 512
| [ 0:00] ## LVMCONF:     retry_deactivation = 1
| [ 0:00] ## LVMCONF:     snapshot_autoextend_percent = 50
| [ 0:00] ## LVMCONF:     snapshot_autoextend_threshold = 50
| [ 0:00] ## LVMCONF:     udev_rules = 1
| [ 0:00] ## LVMCONF:     udev_sync = 1
| [ 0:00] ## LVMCONF:     verify_udev_operations = 1
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: allocation {
| [ 0:00] ## LVMCONF:     wipe_signatures_when_zeroing_new_lvs = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: backup {
| [ 0:00] ## LVMCONF:     archive = 0
| [ 0:00] ## LVMCONF:     backup = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: devices {
| [ 0:00] ## LVMCONF:     cache_dir = "@TESTDIR@/etc"
| [ 0:00] ## LVMCONF:     default_data_alignment = 1
| [ 0:00] ## LVMCONF:     dir = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     filter = "a|.*|"
| [ 0:00] ## LVMCONF:     global_filter = [ "a|@TESTDIR@/dev/mapper/@PREFIX@.*pv[0-9_]*$|", "r|.*|" ]
| [ 0:00] ## LVMCONF:     md_component_detection  = 0
| [ 0:00] ## LVMCONF:     scan = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     sysfs_scan = 1
| [ 0:00] ## LVMCONF:     write_cache_state = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: dmeventd {
| [ 0:00] ## LVMCONF:     executable = "/sources/boot/LVM2.2.02.177/test/lib/dmeventd"
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: global {
| [ 0:00] ## LVMCONF:     abort_on_internal_errors = 1
| [ 0:00] ## LVMCONF:     cache_check_executable = "/usr/sbin/cache_check"
| [ 0:00] ## LVMCONF:     cache_dump_executable = "/usr/sbin/cache_dump"
| [ 0:00] ## LVMCONF:     cache_repair_executable = "/usr/sbin/cache_repair"
| [ 0:00] ## LVMCONF:     detect_internal_vg_cache_corruption = 1
| [ 0:00] ## LVMCONF:     fallback_to_local_locking = 0
| [ 0:00] ## LVMCONF:     fsadm_executable = "/sources/boot/LVM2.2.02.177/test/lib/fsadm"
| [ 0:00] ## LVMCONF:     library_dir = "@TESTDIR@/lib"
| [ 0:00] ## LVMCONF:     locking_dir = "@TESTDIR@/var/lock/lvm"
| [ 0:00] ## LVMCONF:     locking_type=1
| [ 0:00] ## LVMCONF:     notify_dbus = 0
| [ 0:00] ## LVMCONF:     si_unit_consistency = 1
| [ 0:00] ## LVMCONF:     thin_check_executable = "/usr/sbin/thin_check"
| [ 0:00] ## LVMCONF:     thin_dump_executable = "/usr/sbin/thin_dump"
| [ 0:00] ## LVMCONF:     thin_repair_executable = "/usr/sbin/thin_repair"
| [ 0:00] ## LVMCONF:     use_lvmetad = 0
| [ 0:00] ## LVMCONF:     use_lvmlockd = 0
| [ 0:00] ## LVMCONF:     use_lvmpolld = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: log {
| [ 0:00] ## LVMCONF:     activation = 1
| [ 0:00] ## LVMCONF:     file = "@TESTDIR@/debug.log"
| [ 0:00] ## LVMCONF:     indent = 1
| [ 0:00] ## LVMCONF:     level = 9
| [ 0:00] ## LVMCONF:     overwrite = 1
| [ 0:00] ## LVMCONF:     syslog = 0
| [ 0:00] ## LVMCONF:     verbose = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] <======== Processing test: "pvresize-mdas.sh" ========>
| [ 0:00] 
| [ 0:00] aux prepare_devs 1 8
| [ 0:00] #pvresize-mdas.sh:18+ aux prepare_devs 1 8
| [ 0:00] ## preparing loop device....ok (/dev/loop0)
| [ 0:00] ## preparing 1 devices...lib/utils: line 212: DM_UDEV_COOKIE: unbound variable
| [ 0:00] set +vx; STACKTRACE; set -vx
| [ 0:00] ##pvresize-mdas.sh:18+ set +vx
| [ 0:00] ## - /lfskernel/sources/boot/LVM2.2.02.177/test/shell/pvresize-mdas.sh:18
| [ 0:00] ## 1 STACKTRACE() called from /lfskernel/sources/boot/LVM2.2.02.177/test/shell/pvresize-mdas.sh:18
| [ 0:00] <======== Info ========>
| [ 0:00] ## DMINFO:   Name             Maj Min Stat Open Targ Event  UUID                                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv1  253   3 L--w    0    1      0 TEST-@PREFIX@pv1                                                
| [ 0:00] <======== Active table ========>
| [ 0:00] ## DMTABLE:  @PREFIX@pv1: 0 16384 linear 7:0 2048
| [ 0:00] <======== Inactive table ========>
| [ 0:00] ## DMITABLE: @PREFIX@pv1: 
| [ 0:00] <======== Status ========>
| [ 0:00] ## DMSTATUS: @PREFIX@pv1: 0 16384 linear 
| [ 0:00] <======== Tree ========>
| [ 0:00] ## DMTREE:   @PREFIX@pv1 (253:3)
| [ 0:01] ## DMTREE:    `- (7:0)
| [ 0:01] ## DMTREE:   LFS_vg-lfs (253:2)
| [ 0:01] ## DMTREE:    `- (8:16)
| [ 0:01] ## DMTREE:   centos-swap (253:1)
| [ 0:01] ## DMTREE:    `- (8:2)
| [ 0:01] ## DMTREE:   centos-root (253:0)
| [ 0:01] ## DMTREE:    `- (8:2)
| [ 0:01] <======== Recursive list of @TESTDIR@/dev ========>
| [ 0:01] ## LSLR:	@TESTDIR@/dev:
| [ 0:01] ## LSLR:	total 4
| [ 0:01] ## LSLR:	brw-r--r-- 1 root root 7, 0 Feb 21 02:27 loop0
| [ 0:01] ## LSLR:	brw-r--r-- 1 root root 7, 1 Feb 21 02:27 loop1
| [ 0:01] ## LSLR:	brw-r--r-- 1 root root 7, 2 Feb 21 02:27 loop2
| [ 0:01] ## LSLR:	brw-r--r-- 1 root root 7, 3 Feb 21 02:27 loop3
| [ 0:01] ## LSLR:	brw-r--r-- 1 root root 7, 4 Feb 21 02:27 loop4
| [ 0:01] ## LSLR:	brw-r--r-- 1 root root 7, 5 Feb 21 02:27 loop5
| [ 0:01] ## LSLR:	brw-r--r-- 1 root root 7, 6 Feb 21 02:27 loop6
| [ 0:01] ## LSLR:	brw-r--r-- 1 root root 7, 7 Feb 21 02:27 loop7
| [ 0:01] ## LSLR:	drwxr-xr-x 2 root root 4096 Feb 21 02:27 mapper
| [ 0:01] ## LSLR:	crw-r--r-- 1 root root 1, 3 Feb 21 02:27 testnull
| [ 0:01] ## LSLR:	
| [ 0:01] ## LSLR:	@TESTDIR@/dev/mapper:
| [ 0:01] ## LSLR:	total 0
| [ 0:01] ## LSLR:	brw------- 1 root root 253,   3 Feb 21 02:27 @PREFIX@pv1
| [ 0:01] ## LSLR:	crw------- 1 root root  10, 236 Feb 21 02:27 control
| [ 0:01] <======== Udev DB content ========>
| [ 0:01] ## UDEV:	P: /devices/virtual/block/dm-0
| [ 0:01] ## UDEV:	N: dm-0
| [ 0:01] ## UDEV:	E: DEVNAME=/dev/dm-0
| [ 0:01] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-0
| [ 0:01] ## UDEV:	E: DEVTYPE=disk
| [ 0:01] ## UDEV:	E: MAJOR=253
| [ 0:01] ## UDEV:	E: MINOR=0
| [ 0:01] ## UDEV:	E: SUBSYSTEM=block
| [ 0:01] ## UDEV:	
| [ 0:01] ## UDEV:	P: /devices/virtual/block/dm-1
| [ 0:01] ## UDEV:	N: dm-1
| [ 0:01] ## UDEV:	E: DEVNAME=/dev/dm-1
| [ 0:01] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-1
| [ 0:01] ## UDEV:	E: DEVTYPE=disk
| [ 0:01] ## UDEV:	E: MAJOR=253
| [ 0:01] ## UDEV:	E: MINOR=1
| [ 0:01] ## UDEV:	E: SUBSYSTEM=block
| [ 0:01] ## UDEV:	
| [ 0:01] ## UDEV:	P: /devices/virtual/block/dm-2
| [ 0:01] ## UDEV:	N: dm-2
| [ 0:01] ## UDEV:	E: DEVNAME=/dev/dm-2
| [ 0:01] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-2
| [ 0:01] ## UDEV:	E: DEVTYPE=disk
| [ 0:01] ## UDEV:	E: MAJOR=253
| [ 0:01] ## UDEV:	E: MINOR=2
| [ 0:01] ## UDEV:	E: SUBSYSTEM=block
| [ 0:01] ## UDEV:	
| [ 0:01] ## UDEV:	P: /devices/virtual/block/dm-3
| [ 0:01] ## UDEV:	N: dm-3
| [ 0:01] ## UDEV:	E: DEVNAME=/dev/dm-3
| [ 0:01] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-3
| [ 0:01] ## UDEV:	E: DEVTYPE=disk
| [ 0:01] ## UDEV:	E: MAJOR=253
| [ 0:01] ## UDEV:	E: MINOR=3
| [ 0:01] ## UDEV:	E: SUBSYSTEM=block
| [ 0:01] ## UDEV:	
| [ 0:01] ## UDEV:	P: /devices/virtual/block/loop0
| [ 0:01] ## UDEV:	N: loop0
| [ 0:01] ## UDEV:	E: DEVNAME=/dev/loop0
| [ 0:01] ## UDEV:	E: DEVPATH=/devices/virtual/block/loop0
| [ 0:01] ## UDEV:	E: DEVTYPE=disk
| [ 0:01] ## UDEV:	E: MAJOR=7
| [ 0:01] ## UDEV:	E: MINOR=0
| [ 0:01] ## UDEV:	E: SUBSYSTEM=block
| [ 0:01] ## UDEV:	
| [ 0:01] <======== Script file "pvresize-mdas.sh" ========>
| [ 0:01] ## Line: 1 	 #!/usr/bin/env bash
| [ 0:01] ## Line: 2 	 
| [ 0:01] ## Line: 3 	 # Copyright (C) 2016 Red Hat, Inc. All rights reserved.
| [ 0:01] ## Line: 4 	 #
| [ 0:01] ## Line: 5 	 # This copyrighted material is made available to anyone wishing to use,
| [ 0:01] ## Line: 6 	 # modify, copy, or redistribute it subject to the terms and conditions
| [ 0:01] ## Line: 7 	 # of the GNU General Public License v.2.
| [ 0:01] ## Line: 8 	 #
| [ 0:01] ## Line: 9 	 # You should have received a copy of the GNU General Public License
| [ 0:01] ## Line: 10 	 # along with this program; if not, write to the Free Software Foundation,
| [ 0:01] ## Line: 11 	 # Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA
| [ 0:01] ## Line: 12 	 
| [ 0:01] ## Line: 13 	 SKIP_WITH_LVMLOCKD=1
| [ 0:01] ## Line: 14 	 SKIP_WITH_LVMPOLLD=1
| [ 0:01] ## Line: 15 	 
| [ 0:01] ## Line: 16 	 . lib/inittest
| [ 0:01] ## Line: 17 	 
| [ 0:01] ## Line: 18 	 aux prepare_devs 1 8
| [ 0:01] ## Line: 19 	 
| [ 0:01] ## Line: 20 	 pvcreate --setphysicalvolumesize 8m --metadatacopies 2 "$dev1"
| [ 0:01] ## Line: 21 	 check pv_field "$dev1" pv_size 8.00m
| [ 0:01] ## Line: 22 	 check pv_field "$dev1" pv_mda_count 2
| [ 0:01] ## Line: 23 	 pvs "$dev1"
| [ 0:01] ## Line: 24 	 
| [ 0:01] ## Line: 25 	 pvresize --setphysicalvolumesize 4m -y "$dev1"
| [ 0:01] ## Line: 26 	 check pv_field "$dev1" pv_size 4.00m
| [ 0:01] ## Line: 27 	 check pv_field "$dev1" pv_mda_count 2
| [ 0:01] ## Line: 28 	 pvs "$dev1"
| [ 0:01] aux teardown
| [ 0:01] #pvresize-mdas.sh:1+ aux teardown
| [ 0:01] ## teardown.........ok
###       failed: [ndev-vanilla] shell/pvresize-mdas.sh

| [ 0:00] Library version:   1.02.146 (2017-12-18)
| [ 0:00] Driver version:    4.35.0
| [ 0:00] Kernel is Linux localhost.localdomain 3.10.0-693.11.1.el7.x86_64 #1 SMP Mon Dec 4 23:52:40 UTC 2017 x86_64 GNU/Linux
| [ 0:00] Selinux mode is not installed.
| [ 0:00]               total        used        free      shared  buff/cache   available
| [ 0:00] Mem:           7822        1080        4142          10        2599        6435
| [ 0:00] Swap:          4095           0        4095
| [ 0:00] Filesystem      Size  Used Avail Use% Mounted on
| [ 0:00] /dev/sdc1        18G  8.4G  8.4G  50% /
| [ 0:00] /dev/sdd1        51G  6.1G   43G  13% /lfskernel
| [ 0:00] devtmpfs        3.9G     0  3.9G   0% /dev
| [ 0:00] tmpfs           3.9G     0  3.9G   0% /run
| [ 0:00] @TESTDIR=/tmp/LVMTEST20423.MjPwrtsbZZ
| [ 0:00] @PREFIX=LVMTEST20423
| [ 0:00] ## LVMCONF: activation {
| [ 0:00] ## LVMCONF:     checks = 1
| [ 0:00] ## LVMCONF:     monitoring = 0
| [ 0:00] ## LVMCONF:     polling_interval = 1
| [ 0:00] ## LVMCONF:     raid_region_size = 512
| [ 0:00] ## LVMCONF:     retry_deactivation = 1
| [ 0:00] ## LVMCONF:     snapshot_autoextend_percent = 50
| [ 0:00] ## LVMCONF:     snapshot_autoextend_threshold = 50
| [ 0:00] ## LVMCONF:     udev_rules = 1
| [ 0:00] ## LVMCONF:     udev_sync = 1
| [ 0:00] ## LVMCONF:     verify_udev_operations = 1
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: allocation {
| [ 0:00] ## LVMCONF:     wipe_signatures_when_zeroing_new_lvs = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: backup {
| [ 0:00] ## LVMCONF:     archive = 0
| [ 0:00] ## LVMCONF:     backup = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: devices {
| [ 0:00] ## LVMCONF:     cache_dir = "@TESTDIR@/etc"
| [ 0:00] ## LVMCONF:     default_data_alignment = 1
| [ 0:00] ## LVMCONF:     dir = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     filter = "a|.*|"
| [ 0:00] ## LVMCONF:     global_filter = [ "a|@TESTDIR@/dev/mapper/@PREFIX@.*pv[0-9_]*$|", "r|.*|" ]
| [ 0:00] ## LVMCONF:     md_component_detection  = 0
| [ 0:00] ## LVMCONF:     scan = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     sysfs_scan = 1
| [ 0:00] ## LVMCONF:     write_cache_state = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: dmeventd {
| [ 0:00] ## LVMCONF:     executable = "/sources/boot/LVM2.2.02.177/test/lib/dmeventd"
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: global {
| [ 0:00] ## LVMCONF:     abort_on_internal_errors = 1
| [ 0:00] ## LVMCONF:     cache_check_executable = "/usr/sbin/cache_check"
| [ 0:00] ## LVMCONF:     cache_dump_executable = "/usr/sbin/cache_dump"
| [ 0:00] ## LVMCONF:     cache_repair_executable = "/usr/sbin/cache_repair"
| [ 0:00] ## LVMCONF:     detect_internal_vg_cache_corruption = 1
| [ 0:00] ## LVMCONF:     fallback_to_local_locking = 0
| [ 0:00] ## LVMCONF:     fsadm_executable = "/sources/boot/LVM2.2.02.177/test/lib/fsadm"
| [ 0:00] ## LVMCONF:     library_dir = "@TESTDIR@/lib"
| [ 0:00] ## LVMCONF:     locking_dir = "@TESTDIR@/var/lock/lvm"
| [ 0:00] ## LVMCONF:     locking_type=1
| [ 0:00] ## LVMCONF:     notify_dbus = 0
| [ 0:00] ## LVMCONF:     si_unit_consistency = 1
| [ 0:00] ## LVMCONF:     thin_check_executable = "/usr/sbin/thin_check"
| [ 0:00] ## LVMCONF:     thin_dump_executable = "/usr/sbin/thin_dump"
| [ 0:00] ## LVMCONF:     thin_repair_executable = "/usr/sbin/thin_repair"
| [ 0:00] ## LVMCONF:     use_lvmetad = 0
| [ 0:00] ## LVMCONF:     use_lvmlockd = 0
| [ 0:00] ## LVMCONF:     use_lvmpolld = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: log {
| [ 0:00] ## LVMCONF:     activation = 1
| [ 0:00] ## LVMCONF:     file = "@TESTDIR@/debug.log"
| [ 0:00] ## LVMCONF:     indent = 1
| [ 0:00] ## LVMCONF:     level = 9
| [ 0:00] ## LVMCONF:     overwrite = 1
| [ 0:00] ## LVMCONF:     syslog = 0
| [ 0:00] ## LVMCONF:     verbose = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] <======== Processing test: "read-ahead.sh" ========>
| [ 0:00] 
| [ 0:00] aux prepare_vg 5
| [ 0:00] #read-ahead.sh:23+ aux prepare_vg 5
| [ 0:00] ## preparing loop device....ok (/dev/loop0)
| [ 0:00] ## preparing 5 devices...lib/utils: line 212: DM_UDEV_COOKIE: unbound variable
| [ 0:00] set +vx; STACKTRACE; set -vx
| [ 0:00] ##read-ahead.sh:23+ set +vx
| [ 0:00] ## - /lfskernel/sources/boot/LVM2.2.02.177/test/shell/read-ahead.sh:23
| [ 0:00] ## 1 STACKTRACE() called from /lfskernel/sources/boot/LVM2.2.02.177/test/shell/read-ahead.sh:23
| [ 0:00] <======== Info ========>
| [ 0:00] ## DMINFO:   Name             Maj Min Stat Open Targ Event  UUID                                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv4  253   4 L--w    0    1      0 TEST-@PREFIX@pv4                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv3  253   3 L--w    0    1      0 TEST-@PREFIX@pv3                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv2  253   7 L--w    0    1      0 TEST-@PREFIX@pv2                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv1  253   6 L--w    0    1      0 TEST-@PREFIX@pv1                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv5  253   5 L--w    0    1      0 TEST-@PREFIX@pv5                                                
| [ 0:00] <======== Active table ========>
| [ 0:00] ## DMTABLE:  @PREFIX@pv4: 0 69632 linear 7:0 210944
| [ 0:00] ## DMTABLE:  @PREFIX@pv3: 0 69632 linear 7:0 141312
| [ 0:00] ## DMTABLE:  @PREFIX@pv2: 0 69632 linear 7:0 71680
| [ 0:00] ## DMTABLE:  @PREFIX@pv1: 0 69632 linear 7:0 2048
| [ 0:00] ## DMTABLE:  @PREFIX@pv5: 0 69632 linear 7:0 280576
| [ 0:00] <======== Inactive table ========>
| [ 0:00] ## DMITABLE: @PREFIX@pv4: 
| [ 0:00] ## DMITABLE: @PREFIX@pv3: 
| [ 0:00] ## DMITABLE: @PREFIX@pv2: 
| [ 0:00] ## DMITABLE: @PREFIX@pv1: 
| [ 0:00] ## DMITABLE: @PREFIX@pv5: 
| [ 0:00] <======== Status ========>
| [ 0:00] ## DMSTATUS: @PREFIX@pv4: 0 69632 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv3: 0 69632 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv2: 0 69632 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv1: 0 69632 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv5: 0 69632 linear 
| [ 0:00] <======== Tree ========>
| [ 0:00] ## DMTREE:   @PREFIX@pv4 (253:4)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   @PREFIX@pv3 (253:3)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   @PREFIX@pv2 (253:7)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   @PREFIX@pv1 (253:6)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   LFS_vg-lfs (253:2)
| [ 0:00] ## DMTREE:    `- (8:16)
| [ 0:00] ## DMTREE:   centos-swap (253:1)
| [ 0:00] ## DMTREE:    `- (8:2)
| [ 0:00] ## DMTREE:   centos-root (253:0)
| [ 0:00] ## DMTREE:    `- (8:2)
| [ 0:00] ## DMTREE:   @PREFIX@pv5 (253:5)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] <======== Recursive list of @TESTDIR@/dev ========>
| [ 0:00] ## LSLR:	@TESTDIR@/dev:
| [ 0:00] ## LSLR:	total 4
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 0 Feb 21 02:27 loop0
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 1 Feb 21 02:27 loop1
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 2 Feb 21 02:27 loop2
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 3 Feb 21 02:27 loop3
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 4 Feb 21 02:27 loop4
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 5 Feb 21 02:27 loop5
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 6 Feb 21 02:27 loop6
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 7 Feb 21 02:27 loop7
| [ 0:00] ## LSLR:	drwxr-xr-x 2 root root 4096 Feb 21 02:27 mapper
| [ 0:00] ## LSLR:	crw-r--r-- 1 root root 1, 3 Feb 21 02:27 testnull
| [ 0:00] ## LSLR:	
| [ 0:00] ## LSLR:	@TESTDIR@/dev/mapper:
| [ 0:00] ## LSLR:	total 0
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   6 Feb 21 02:27 @PREFIX@pv1
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   7 Feb 21 02:27 @PREFIX@pv2
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   3 Feb 21 02:27 @PREFIX@pv3
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   4 Feb 21 02:27 @PREFIX@pv4
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   5 Feb 21 02:27 @PREFIX@pv5
| [ 0:00] ## LSLR:	crw------- 1 root root  10, 236 Feb 21 02:27 control
| [ 0:00] <======== Udev DB content ========>
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-0
| [ 0:00] ## UDEV:	N: dm-0
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-0
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-0
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=0
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-1
| [ 0:00] ## UDEV:	N: dm-1
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-1
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-1
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=1
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-2
| [ 0:00] ## UDEV:	N: dm-2
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-2
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-2
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=2
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-3
| [ 0:00] ## UDEV:	N: dm-3
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-3
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-3
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=3
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-4
| [ 0:00] ## UDEV:	N: dm-4
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-4
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-4
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=4
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-5
| [ 0:00] ## UDEV:	N: dm-5
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-5
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-5
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=5
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-6
| [ 0:00] ## UDEV:	N: dm-6
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-6
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-6
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=6
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-7
| [ 0:00] ## UDEV:	N: dm-7
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-7
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-7
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=7
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/loop0
| [ 0:00] ## UDEV:	N: loop0
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/loop0
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/loop0
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=7
| [ 0:00] ## UDEV:	E: MINOR=0
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] <======== Script file "read-ahead.sh" ========>
| [ 0:00] ## Line: 1 	 #!/usr/bin/env bash
| [ 0:00] ## Line: 2 	 
| [ 0:00] ## Line: 3 	 # Copyright (C) 2008 Red Hat, Inc. All rights reserved.
| [ 0:00] ## Line: 4 	 #
| [ 0:00] ## Line: 5 	 # This copyrighted material is made available to anyone wishing to use,
| [ 0:00] ## Line: 6 	 # modify, copy, or redistribute it subject to the terms and conditions
| [ 0:00] ## Line: 7 	 # of the GNU General Public License v.2.
| [ 0:00] ## Line: 8 	 #
| [ 0:00] ## Line: 9 	 # You should have received a copy of the GNU General Public License
| [ 0:00] ## Line: 10 	 # along with this program; if not, write to the Free Software Foundation,
| [ 0:00] ## Line: 11 	 # Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA
| [ 0:00] ## Line: 12 	 
| [ 0:00] ## Line: 13 	 #
| [ 0:00] ## Line: 14 	 # tests basic functionality of read-ahead and ra regressions
| [ 0:00] ## Line: 15 	 #
| [ 0:00] ## Line: 16 	 
| [ 0:00] ## Line: 17 	 test_description='Test read-ahead functionality'
| [ 0:00] ## Line: 18 	 SKIP_WITH_LVMLOCKD=1
| [ 0:00] ## Line: 19 	 SKIP_WITH_LVMPOLLD=1
| [ 0:00] ## Line: 20 	 
| [ 0:00] ## Line: 21 	 . lib/inittest
| [ 0:00] ## Line: 22 	 
| [ 0:00] ## Line: 23 	 aux prepare_vg 5
| [ 0:00] ## Line: 24 	 
| [ 0:00] ## Line: 25 	 #COMM "test various read ahead settings (bz450922)"
| [ 0:00] ## Line: 26 	 lvcreate -l 100%FREE -i5 -I512 -n $lv $vg
| [ 0:00] ## Line: 27 	 ra=$(get lv_field $vg/$lv lv_kernel_read_ahead --units s --nosuffix)
| [ 0:00] ## Line: 28 	 test $(( ( ra / 5 ) * 5 )) -le $ra
| [ 0:00] ## Line: 29 	 not lvchange -r auto $vg/$lv 2>&1 | grep auto
| [ 0:00] ## Line: 30 	 check lv_field $vg/$lv lv_read_ahead auto
| [ 0:00] ## Line: 31 	 lvchange -r 640 $vg/$lv
| [ 0:00] ## Line: 32 	 check lv_field $vg/$lv lv_read_ahead 640 --units s --nosuffix
| [ 0:00] ## Line: 33 	 lvremove -ff $vg
| [ 0:00] ## Line: 34 	 
| [ 0:00] ## Line: 35 	 #COMM "read ahead is properly inherited from underlying PV"
| [ 0:00] ## Line: 36 	 blockdev --setra 768 "$dev1"
| [ 0:00] ## Line: 37 	 vgscan
| [ 0:00] ## Line: 38 	 lvcreate -n $lv -L4m $vg "$dev1"
| [ 0:00] ## Line: 39 	 test "$(blockdev --getra "$DM_DEV_DIR/$vg/$lv")" -eq 768
| [ 0:00] ## Line: 40 	 lvremove -ff $vg
| [ 0:00] ## Line: 41 	 
| [ 0:00] ## Line: 42 	 # Check default, active/inactive values for read_ahead / kernel_read_ahead
| [ 0:00] ## Line: 43 	 lvcreate -n $lv -l 50%FREE $vg
| [ 0:00] ## Line: 44 	 lvchange -an $vg/$lv
| [ 0:00] ## Line: 45 	 check lv_field $vg/$lv lv_read_ahead auto
| [ 0:00] ## Line: 46 	 check lv_field $vg/$lv lv_kernel_read_ahead -1
| [ 0:00] ## Line: 47 	 lvchange -r 512 $vg/$lv
| [ 0:00] ## Line: 48 	 lvchange -ay $vg/$lv
| [ 0:00] ## Line: 49 	 check lv_field $vg/$lv lv_read_ahead 256.00k
| [ 0:00] ## Line: 50 	 check lv_field $vg/$lv lv_kernel_read_ahead 256.00k
| [ 0:00] ## Line: 51 	 
| [ 0:00] ## Line: 52 	 vgremove -ff $vg
| [ 0:00] aux teardown
| [ 0:00] #read-ahead.sh:1+ aux teardown
| [ 0:00] ## teardown.........ok
###       failed: [ndev-vanilla] shell/read-ahead.sh

| [ 0:00] Library version:   1.02.146 (2017-12-18)
| [ 0:00] Driver version:    4.35.0
| [ 0:00] Kernel is Linux localhost.localdomain 3.10.0-693.11.1.el7.x86_64 #1 SMP Mon Dec 4 23:52:40 UTC 2017 x86_64 GNU/Linux
| [ 0:00] Selinux mode is not installed.
| [ 0:00]               total        used        free      shared  buff/cache   available
| [ 0:00] Mem:           7822        1080        4142          10        2599        6435
| [ 0:00] Swap:          4095           0        4095
| [ 0:00] Filesystem      Size  Used Avail Use% Mounted on
| [ 0:00] /dev/sdc1        18G  8.4G  8.4G  50% /
| [ 0:00] /dev/sdd1        51G  6.1G   43G  13% /lfskernel
| [ 0:00] devtmpfs        3.9G     0  3.9G   0% /dev
| [ 0:00] tmpfs           3.9G     0  3.9G   0% /run
| [ 0:00] @TESTDIR=/tmp/LVMTEST20639.LmLtM0LrGR
| [ 0:00] @PREFIX=LVMTEST20639
| [ 0:00] ## LVMCONF: activation {
| [ 0:00] ## LVMCONF:     checks = 1
| [ 0:00] ## LVMCONF:     monitoring = 0
| [ 0:00] ## LVMCONF:     polling_interval = 1
| [ 0:00] ## LVMCONF:     raid_region_size = 512
| [ 0:00] ## LVMCONF:     retry_deactivation = 1
| [ 0:00] ## LVMCONF:     snapshot_autoextend_percent = 50
| [ 0:00] ## LVMCONF:     snapshot_autoextend_threshold = 50
| [ 0:00] ## LVMCONF:     udev_rules = 1
| [ 0:00] ## LVMCONF:     udev_sync = 1
| [ 0:00] ## LVMCONF:     verify_udev_operations = 1
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: allocation {
| [ 0:00] ## LVMCONF:     wipe_signatures_when_zeroing_new_lvs = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: backup {
| [ 0:00] ## LVMCONF:     archive = 0
| [ 0:00] ## LVMCONF:     backup = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: devices {
| [ 0:00] ## LVMCONF:     cache_dir = "@TESTDIR@/etc"
| [ 0:00] ## LVMCONF:     default_data_alignment = 1
| [ 0:00] ## LVMCONF:     dir = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     filter = "a|.*|"
| [ 0:00] ## LVMCONF:     global_filter = [ "a|@TESTDIR@/dev/mapper/@PREFIX@.*pv[0-9_]*$|", "r|.*|" ]
| [ 0:00] ## LVMCONF:     md_component_detection  = 0
| [ 0:00] ## LVMCONF:     scan = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     sysfs_scan = 1
| [ 0:00] ## LVMCONF:     write_cache_state = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: dmeventd {
| [ 0:00] ## LVMCONF:     executable = "/sources/boot/LVM2.2.02.177/test/lib/dmeventd"
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: global {
| [ 0:00] ## LVMCONF:     abort_on_internal_errors = 1
| [ 0:00] ## LVMCONF:     cache_check_executable = "/usr/sbin/cache_check"
| [ 0:00] ## LVMCONF:     cache_dump_executable = "/usr/sbin/cache_dump"
| [ 0:00] ## LVMCONF:     cache_repair_executable = "/usr/sbin/cache_repair"
| [ 0:00] ## LVMCONF:     detect_internal_vg_cache_corruption = 1
| [ 0:00] ## LVMCONF:     fallback_to_local_locking = 0
| [ 0:00] ## LVMCONF:     fsadm_executable = "/sources/boot/LVM2.2.02.177/test/lib/fsadm"
| [ 0:00] ## LVMCONF:     library_dir = "@TESTDIR@/lib"
| [ 0:00] ## LVMCONF:     locking_dir = "@TESTDIR@/var/lock/lvm"
| [ 0:00] ## LVMCONF:     locking_type=1
| [ 0:00] ## LVMCONF:     notify_dbus = 0
| [ 0:00] ## LVMCONF:     si_unit_consistency = 1
| [ 0:00] ## LVMCONF:     thin_check_executable = "/usr/sbin/thin_check"
| [ 0:00] ## LVMCONF:     thin_dump_executable = "/usr/sbin/thin_dump"
| [ 0:00] ## LVMCONF:     thin_repair_executable = "/usr/sbin/thin_repair"
| [ 0:00] ## LVMCONF:     use_lvmetad = 0
| [ 0:00] ## LVMCONF:     use_lvmlockd = 0
| [ 0:00] ## LVMCONF:     use_lvmpolld = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: log {
| [ 0:00] ## LVMCONF:     activation = 1
| [ 0:00] ## LVMCONF:     file = "@TESTDIR@/debug.log"
| [ 0:00] ## LVMCONF:     indent = 1
| [ 0:00] ## LVMCONF:     level = 9
| [ 0:00] ## LVMCONF:     overwrite = 1
| [ 0:00] ## LVMCONF:     syslog = 0
| [ 0:00] ## LVMCONF:     verbose = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] <======== Processing test: "relative-sign-options.sh" ========>
| [ 0:00] 
| [ 0:00] aux prepare_vg 1 256
| [ 0:00] #relative-sign-options.sh:21+ aux prepare_vg 1 256
| [ 0:00] ## preparing loop device....ok (/dev/loop0)
| [ 0:00] ## preparing 1 devices...lib/utils: line 212: DM_UDEV_COOKIE: unbound variable
| [ 0:00] set +vx; STACKTRACE; set -vx
| [ 0:00] ##relative-sign-options.sh:21+ set +vx
| [ 0:00] ## - /lfskernel/sources/boot/LVM2.2.02.177/test/shell/relative-sign-options.sh:21
| [ 0:00] ## 1 STACKTRACE() called from /lfskernel/sources/boot/LVM2.2.02.177/test/shell/relative-sign-options.sh:21
| [ 0:00] <======== Info ========>
| [ 0:00] ## DMINFO:   Name             Maj Min Stat Open Targ Event  UUID                                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv1  253   3 L--w    0    1      0 TEST-@PREFIX@pv1                                                
| [ 0:00] <======== Active table ========>
| [ 0:00] ## DMTABLE:  @PREFIX@pv1: 0 524288 linear 7:0 2048
| [ 0:00] <======== Inactive table ========>
| [ 0:00] ## DMITABLE: @PREFIX@pv1: 
| [ 0:00] <======== Status ========>
| [ 0:00] ## DMSTATUS: @PREFIX@pv1: 0 524288 linear 
| [ 0:00] <======== Tree ========>
| [ 0:00] ## DMTREE:   @PREFIX@pv1 (253:3)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   LFS_vg-lfs (253:2)
| [ 0:00] ## DMTREE:    `- (8:16)
| [ 0:00] ## DMTREE:   centos-swap (253:1)
| [ 0:00] ## DMTREE:    `- (8:2)
| [ 0:00] ## DMTREE:   centos-root (253:0)
| [ 0:00] ## DMTREE:    `- (8:2)
| [ 0:00] <======== Recursive list of @TESTDIR@/dev ========>
| [ 0:00] ## LSLR:	@TESTDIR@/dev:
| [ 0:00] ## LSLR:	total 4
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 0 Feb 21 02:27 loop0
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 1 Feb 21 02:27 loop1
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 2 Feb 21 02:27 loop2
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 3 Feb 21 02:27 loop3
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 4 Feb 21 02:27 loop4
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 5 Feb 21 02:27 loop5
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 6 Feb 21 02:27 loop6
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 7 Feb 21 02:27 loop7
| [ 0:00] ## LSLR:	drwxr-xr-x 2 root root 4096 Feb 21 02:27 mapper
| [ 0:00] ## LSLR:	crw-r--r-- 1 root root 1, 3 Feb 21 02:27 testnull
| [ 0:00] ## LSLR:	
| [ 0:00] ## LSLR:	@TESTDIR@/dev/mapper:
| [ 0:00] ## LSLR:	total 0
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   3 Feb 21 02:27 @PREFIX@pv1
| [ 0:00] ## LSLR:	crw------- 1 root root  10, 236 Feb 21 02:27 control
| [ 0:00] <======== Udev DB content ========>
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-0
| [ 0:00] ## UDEV:	N: dm-0
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-0
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-0
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=0
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-1
| [ 0:00] ## UDEV:	N: dm-1
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-1
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-1
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=1
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-2
| [ 0:00] ## UDEV:	N: dm-2
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-2
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-2
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=2
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-3
| [ 0:00] ## UDEV:	N: dm-3
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-3
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-3
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=3
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/loop0
| [ 0:00] ## UDEV:	N: loop0
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/loop0
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/loop0
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=7
| [ 0:00] ## UDEV:	E: MINOR=0
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] <======== Script file "relative-sign-options.sh" ========>
| [ 0:00] ## Line: 1 	 #!/usr/bin/env bash
| [ 0:00] ## Line: 2 	 
| [ 0:00] ## Line: 3 	 # Copyright (C) 2017 Red Hat, Inc. All rights reserved.
| [ 0:00] ## Line: 4 	 #
| [ 0:00] ## Line: 5 	 # This copyrighted material is made available to anyone wishing to use,
| [ 0:00] ## Line: 6 	 # modify, copy, or redistribute it subject to the terms and conditions
| [ 0:00] ## Line: 7 	 # of the GNU General Public License v.2.
| [ 0:00] ## Line: 8 	 #
| [ 0:00] ## Line: 9 	 # You should have received a copy of the GNU General Public License
| [ 0:00] ## Line: 10 	 # along with this program; if not, write to the Free Software Foundation,
| [ 0:00] ## Line: 11 	 # Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA
| [ 0:00] ## Line: 12 	 
| [ 0:00] ## Line: 13 	 test_description='Exercise toollib process_each_lv'
| [ 0:00] ## Line: 14 	 SKIP_WITH_LVMPOLLD=1
| [ 0:00] ## Line: 15 	 
| [ 0:00] ## Line: 16 	 # disable lvmetad logging as it bogs down test systems
| [ 0:00] ## Line: 17 	 export LVM_TEST_LVMETAD_DEBUG_OPTS=${LVM_TEST_LVMETAD_DEBUG_OPTS-}
| [ 0:00] ## Line: 18 	 
| [ 0:00] ## Line: 19 	 . lib/inittest
| [ 0:00] ## Line: 20 	 
| [ 0:00] ## Line: 21 	 aux prepare_vg 1 256
| [ 0:00] ## Line: 22 	 
| [ 0:00] ## Line: 23 	 lvcreate -an -n $lv1 -l4 $vg
| [ 0:00] ## Line: 24 	 lvcreate -an -n $lv2 -L4 $vg
| [ 0:00] ## Line: 25 	 lvcreate -an -n $lv3 -l+4 $vg
| [ 0:00] ## Line: 26 	 lvcreate -an -n $lv4 -L+4 $vg
| [ 0:00] ## Line: 27 	 not lvcreate -n $lv5 -l-4 $vg
| [ 0:00] ## Line: 28 	 not lvcreate -n $lv5 -L-4 $vg
| [ 0:00] ## Line: 29 	 
| [ 0:00] ## Line: 30 	 lvremove $vg/$lv1
| [ 0:00] ## Line: 31 	 lvremove $vg/$lv2
| [ 0:00] ## Line: 32 	 lvremove $vg/$lv3
| [ 0:00] ## Line: 33 	 lvremove $vg/$lv4
| [ 0:00] ## Line: 34 	 
| [ 0:00] ## Line: 35 	 lvcreate -an -n $lv1 -l4 $vg
| [ 0:00] ## Line: 36 	 lvresize -y -l8 $vg/$lv1
| [ 0:00] ## Line: 37 	 lvresize -y -L16 $vg/$lv1
| [ 0:00] ## Line: 38 	 lvresize -y -l+1 $vg/$lv1
| [ 0:00] ## Line: 39 	 lvresize -y -L+1 $vg/$lv1
| [ 0:00] ## Line: 40 	 lvresize -y -l-1 $vg/$lv1
| [ 0:00] ## Line: 41 	 lvresize -y -L-1 $vg/$lv1
| [ 0:00] ## Line: 42 	 
| [ 0:00] ## Line: 43 	 lvcreate -an -n $lv2 -l4 $vg
| [ 0:00] ## Line: 44 	 lvextend -y -l8 $vg/$lv2
| [ 0:00] ## Line: 45 	 lvextend -y -L16 $vg/$lv2
| [ 0:00] ## Line: 46 	 lvextend -y -l+1 $vg/$lv2
| [ 0:00] ## Line: 47 	 lvextend -y -L+1 $vg/$lv2
| [ 0:00] ## Line: 48 	 not lvextend -y -l-1 $vg/$lv2
| [ 0:00] ## Line: 49 	 not lvextend -y -L-1 $vg/$lv2
| [ 0:00] ## Line: 50 	 
| [ 0:00] ## Line: 51 	 lvcreate -an -n $lv3 -l64 $vg
| [ 0:00] ## Line: 52 	 lvreduce -y -l32 $vg/$lv3
| [ 0:00] ## Line: 53 	 lvreduce -y -L8 $vg/$lv3
| [ 0:00] ## Line: 54 	 lvreduce -y -l-1 $vg/$lv3
| [ 0:00] ## Line: 55 	 lvreduce -y -L-1 $vg/$lv3
| [ 0:00] ## Line: 56 	 not lvreduce -y -l+1 $vg/$lv3
| [ 0:00] ## Line: 57 	 not lvreduce -y -L+1 $vg/$lv3
| [ 0:00] ## Line: 58 	 
| [ 0:00] ## Line: 59 	 # relative with percent extents
| [ 0:00] ## Line: 60 	 
| [ 0:00] ## Line: 61 	 lvcreate -an -n $lv6 -l+100%FREE $vg
| [ 0:00] ## Line: 62 	 lvremove $vg/$lv6
| [ 0:00] ## Line: 63 	 
| [ 0:00] ## Line: 64 	 lvcreate -an -n $lv6 -l1 $vg
| [ 0:00] ## Line: 65 	 lvextend -y -l+100%FREE $vg/$lv6
| [ 0:00] ## Line: 66 	 lvremove $vg/$lv6
| [ 0:00] ## Line: 67 	 
| [ 0:00] ## Line: 68 	 lvcreate -an -n $lv6 -l1 $vg
| [ 0:00] ## Line: 69 	 lvresize -y -l+100%FREE $vg/$lv6
| [ 0:00] ## Line: 70 	 lvremove $vg/$lv6
| [ 0:00] ## Line: 71 	 
| [ 0:00] ## Line: 72 	 if aux have_thin 1 0 0 ; then
| [ 0:00] ## Line: 73 	 # relative poolmetadatasize
| [ 0:00] ## Line: 74 	 lvcreate --type thin-pool -L64 --poolmetadatasize 32 -n $lv7 $vg
| [ 0:00] ## Line: 75 	 lvresize --poolmetadatasize 64 $vg/$lv7
| [ 0:00] ## Line: 76 	 lvresize --poolmetadatasize +8 $vg/$lv7
| [ 0:00] ## Line: 77 	 not lvresize -y --poolmetadatasize -8 $vg/$lv7
| [ 0:00] ## Line: 78 	 
| [ 0:00] ## Line: 79 	 lvextend --poolmetadatasize +8 $vg/$lv7
| [ 0:00] ## Line: 80 	 not lvextend -y --poolmetadatasize -8 $vg/$lv7
| [ 0:00] ## Line: 81 	 fi
| [ 0:00] ## Line: 82 	 
| [ 0:00] ## Line: 83 	 vgremove -y $vg
| [ 0:00] aux teardown
| [ 0:00] #relative-sign-options.sh:1+ aux teardown
| [ 0:00] ## teardown.........ok
###       failed: [ndev-vanilla] shell/relative-sign-options.sh

| [ 0:00] Library version:   1.02.146 (2017-12-18)
| [ 0:00] Driver version:    4.35.0
| [ 0:00] Kernel is Linux localhost.localdomain 3.10.0-693.11.1.el7.x86_64 #1 SMP Mon Dec 4 23:52:40 UTC 2017 x86_64 GNU/Linux
| [ 0:00] Selinux mode is not installed.
| [ 0:00]               total        used        free      shared  buff/cache   available
| [ 0:00] Mem:           7822        1080        4142          10        2599        6434
| [ 0:00] Swap:          4095           0        4095
| [ 0:00] Filesystem      Size  Used Avail Use% Mounted on
| [ 0:00] /dev/sdc1        18G  8.4G  8.4G  50% /
| [ 0:00] /dev/sdd1        51G  6.1G   43G  13% /lfskernel
| [ 0:00] devtmpfs        3.9G     0  3.9G   0% /dev
| [ 0:00] tmpfs           3.9G     0  3.9G   0% /run
| [ 0:00] @TESTDIR=/tmp/LVMTEST20805.rWzsJ5apzv
| [ 0:00] @PREFIX=LVMTEST20805
| [ 0:00] ## LVMCONF: activation {
| [ 0:00] ## LVMCONF:     checks = 1
| [ 0:00] ## LVMCONF:     monitoring = 0
| [ 0:00] ## LVMCONF:     polling_interval = 1
| [ 0:00] ## LVMCONF:     raid_region_size = 512
| [ 0:00] ## LVMCONF:     retry_deactivation = 1
| [ 0:00] ## LVMCONF:     snapshot_autoextend_percent = 50
| [ 0:00] ## LVMCONF:     snapshot_autoextend_threshold = 50
| [ 0:00] ## LVMCONF:     udev_rules = 1
| [ 0:00] ## LVMCONF:     udev_sync = 1
| [ 0:00] ## LVMCONF:     verify_udev_operations = 1
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: allocation {
| [ 0:00] ## LVMCONF:     wipe_signatures_when_zeroing_new_lvs = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: backup {
| [ 0:00] ## LVMCONF:     archive = 0
| [ 0:00] ## LVMCONF:     backup = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: devices {
| [ 0:00] ## LVMCONF:     cache_dir = "@TESTDIR@/etc"
| [ 0:00] ## LVMCONF:     default_data_alignment = 1
| [ 0:00] ## LVMCONF:     dir = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     filter = "a|.*|"
| [ 0:00] ## LVMCONF:     global_filter = [ "a|@TESTDIR@/dev/mapper/@PREFIX@.*pv[0-9_]*$|", "r|.*|" ]
| [ 0:00] ## LVMCONF:     md_component_detection  = 0
| [ 0:00] ## LVMCONF:     scan = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     sysfs_scan = 1
| [ 0:00] ## LVMCONF:     write_cache_state = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: dmeventd {
| [ 0:00] ## LVMCONF:     executable = "/sources/boot/LVM2.2.02.177/test/lib/dmeventd"
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: global {
| [ 0:00] ## LVMCONF:     abort_on_internal_errors = 1
| [ 0:00] ## LVMCONF:     cache_check_executable = "/usr/sbin/cache_check"
| [ 0:00] ## LVMCONF:     cache_dump_executable = "/usr/sbin/cache_dump"
| [ 0:00] ## LVMCONF:     cache_repair_executable = "/usr/sbin/cache_repair"
| [ 0:00] ## LVMCONF:     detect_internal_vg_cache_corruption = 1
| [ 0:00] ## LVMCONF:     fallback_to_local_locking = 0
| [ 0:00] ## LVMCONF:     fsadm_executable = "/sources/boot/LVM2.2.02.177/test/lib/fsadm"
| [ 0:00] ## LVMCONF:     library_dir = "@TESTDIR@/lib"
| [ 0:00] ## LVMCONF:     locking_dir = "@TESTDIR@/var/lock/lvm"
| [ 0:00] ## LVMCONF:     locking_type=1
| [ 0:00] ## LVMCONF:     notify_dbus = 0
| [ 0:00] ## LVMCONF:     si_unit_consistency = 1
| [ 0:00] ## LVMCONF:     thin_check_executable = "/usr/sbin/thin_check"
| [ 0:00] ## LVMCONF:     thin_dump_executable = "/usr/sbin/thin_dump"
| [ 0:00] ## LVMCONF:     thin_repair_executable = "/usr/sbin/thin_repair"
| [ 0:00] ## LVMCONF:     use_lvmetad = 0
| [ 0:00] ## LVMCONF:     use_lvmlockd = 0
| [ 0:00] ## LVMCONF:     use_lvmpolld = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: log {
| [ 0:00] ## LVMCONF:     activation = 1
| [ 0:00] ## LVMCONF:     file = "@TESTDIR@/debug.log"
| [ 0:00] ## LVMCONF:     indent = 1
| [ 0:00] ## LVMCONF:     level = 9
| [ 0:00] ## LVMCONF:     overwrite = 1
| [ 0:00] ## LVMCONF:     syslog = 0
| [ 0:00] ## LVMCONF:     verbose = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] <======== Processing test: "report-fields.sh" ========>
| [ 0:00] 
| [ 0:00] # Test only that there's correct set of fields displayed on output.
| [ 0:00] 
| [ 0:00] aux prepare_pvs 1
| [ 0:00] #report-fields.sh:22+ aux prepare_pvs 1
| [ 0:00] ## preparing loop device....ok (/dev/loop0)
| [ 0:00] ## preparing 1 devices...lib/utils: line 212: DM_UDEV_COOKIE: unbound variable
| [ 0:00] set +vx; STACKTRACE; set -vx
| [ 0:00] ##report-fields.sh:22+ set +vx
| [ 0:00] ## - /lfskernel/sources/boot/LVM2.2.02.177/test/shell/report-fields.sh:22
| [ 0:00] ## 1 STACKTRACE() called from /lfskernel/sources/boot/LVM2.2.02.177/test/shell/report-fields.sh:22
| [ 0:00] <======== Info ========>
| [ 0:00] ## DMINFO:   Name             Maj Min Stat Open Targ Event  UUID                                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv1  253   3 L--w    0    1      0 TEST-@PREFIX@pv1                                                
| [ 0:00] <======== Active table ========>
| [ 0:00] ## DMTABLE:  @PREFIX@pv1: 0 69632 linear 7:0 2048
| [ 0:00] <======== Inactive table ========>
| [ 0:00] ## DMITABLE: @PREFIX@pv1: 
| [ 0:00] <======== Status ========>
| [ 0:00] ## DMSTATUS: @PREFIX@pv1: 0 69632 linear 
| [ 0:00] <======== Tree ========>
| [ 0:00] ## DMTREE:   @PREFIX@pv1 (253:3)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   LFS_vg-lfs (253:2)
| [ 0:00] ## DMTREE:    `- (8:16)
| [ 0:00] ## DMTREE:   centos-swap (253:1)
| [ 0:00] ## DMTREE:    `- (8:2)
| [ 0:00] ## DMTREE:   centos-root (253:0)
| [ 0:00] ## DMTREE:    `- (8:2)
| [ 0:00] <======== Recursive list of @TESTDIR@/dev ========>
| [ 0:00] ## LSLR:	@TESTDIR@/dev:
| [ 0:00] ## LSLR:	total 4
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 0 Feb 21 02:27 loop0
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 1 Feb 21 02:27 loop1
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 2 Feb 21 02:27 loop2
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 3 Feb 21 02:27 loop3
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 4 Feb 21 02:27 loop4
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 5 Feb 21 02:27 loop5
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 6 Feb 21 02:27 loop6
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 7 Feb 21 02:27 loop7
| [ 0:00] ## LSLR:	drwxr-xr-x 2 root root 4096 Feb 21 02:27 mapper
| [ 0:00] ## LSLR:	crw-r--r-- 1 root root 1, 3 Feb 21 02:27 testnull
| [ 0:00] ## LSLR:	
| [ 0:00] ## LSLR:	@TESTDIR@/dev/mapper:
| [ 0:00] ## LSLR:	total 0
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   3 Feb 21 02:27 @PREFIX@pv1
| [ 0:00] ## LSLR:	crw------- 1 root root  10, 236 Feb 21 02:27 control
| [ 0:00] <======== Udev DB content ========>
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-0
| [ 0:00] ## UDEV:	N: dm-0
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-0
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-0
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=0
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-1
| [ 0:00] ## UDEV:	N: dm-1
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-1
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-1
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=1
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-2
| [ 0:00] ## UDEV:	N: dm-2
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-2
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-2
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=2
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-3
| [ 0:00] ## UDEV:	N: dm-3
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-3
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-3
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=3
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/loop0
| [ 0:00] ## UDEV:	N: loop0
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/loop0
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/loop0
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=7
| [ 0:00] ## UDEV:	E: MINOR=0
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] <======== Script file "report-fields.sh" ========>
| [ 0:00] ## Line: 1 	 #!/usr/bin/env bash
| [ 0:00] ## Line: 2 	 
| [ 0:00] ## Line: 3 	 # Copyright (C) 2015 Red Hat, Inc. All rights reserved.
| [ 0:00] ## Line: 4 	 #
| [ 0:00] ## Line: 5 	 # This copyrighted material is made available to anyone wishing to use,
| [ 0:00] ## Line: 6 	 # modify, copy, or redistribute it subject to the terms and conditions
| [ 0:00] ## Line: 7 	 # of the GNU General Public License v.2.
| [ 0:00] ## Line: 8 	 #
| [ 0:00] ## Line: 9 	 # You should have received a copy of the GNU General Public License
| [ 0:00] ## Line: 10 	 # along with this program; if not, write to the Free Software Foundation,
| [ 0:00] ## Line: 11 	 # Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA
| [ 0:00] ## Line: 12 	 
| [ 0:00] ## Line: 13 	 SKIP_WITH_LVMLOCKD=1
| [ 0:00] ## Line: 14 	 SKIP_WITH_LVMETAD=1
| [ 0:00] ## Line: 15 	 SKIP_WITH_LVMPOLLD=1
| [ 0:00] ## Line: 16 	 SKIP_WITH_CLVMD=1
| [ 0:00] ## Line: 17 	 
| [ 0:00] ## Line: 18 	 . lib/inittest
| [ 0:00] ## Line: 19 	 
| [ 0:00] ## Line: 20 	 # Test only that there's correct set of fields displayed on output.
| [ 0:00] ## Line: 21 	 
| [ 0:00] ## Line: 22 	 aux prepare_pvs 1
| [ 0:00] ## Line: 23 	 
| [ 0:00] ## Line: 24 	 OPTS="--nameprefixes --noheadings --rows"
| [ 0:00] ## Line: 25 	 
| [ 0:00] ## Line: 26 	 aux lvmconf 'report/pvs_cols="pv_name,pv_size"'
| [ 0:00] ## Line: 27 	 aux lvmconf 'report/compact_output=0'
| [ 0:00] ## Line: 28 	 aux lvmconf 'report/compact_output_cols=""'
| [ 0:00] ## Line: 29 	 
| [ 0:00] ## Line: 30 	 pvs $OPTS > out
| [ 0:00] ## Line: 31 	 grep LVM2_PV_NAME out
| [ 0:00] ## Line: 32 	 grep LVM2_PV_SIZE out
| [ 0:00] ## Line: 33 	 
| [ 0:00] ## Line: 34 	 pvs $OPTS -o pv_attr > out
| [ 0:00] ## Line: 35 	 grep LVM2_PV_ATTR out
| [ 0:00] ## Line: 36 	 not grep -v LVM2_PV_ATTR out
| [ 0:00] ## Line: 37 	 
| [ 0:00] ## Line: 38 	 pvs $OPTS -o+pv_attr > out
| [ 0:00] ## Line: 39 	 grep LVM2_PV_NAME out
| [ 0:00] ## Line: 40 	 grep LVM2_PV_SIZE out
| [ 0:00] ## Line: 41 	 grep LVM2_PV_ATTR out
| [ 0:00] ## Line: 42 	 
| [ 0:00] ## Line: 43 	 pvs $OPTS -o-pv_name > out
| [ 0:00] ## Line: 44 	 not grep LVM2_PV_NAME out
| [ 0:00] ## Line: 45 	 grep LVM2_PV_SIZE out
| [ 0:00] ## Line: 46 	 
| [ 0:00] ## Line: 47 	 pvs $OPTS -o+pv_attr -o-pv_attr > out
| [ 0:00] ## Line: 48 	 grep LVM2_PV_NAME out
| [ 0:00] ## Line: 49 	 grep LVM2_PV_SIZE out
| [ 0:00] ## Line: 50 	 not grep LVM2_PV_ATTR out
| [ 0:00] ## Line: 51 	 
| [ 0:00] ## Line: 52 	 pvs $OPTS -o-pv_attr -o+pv_attr > out
| [ 0:00] ## Line: 53 	 grep LVM2_PV_NAME out
| [ 0:00] ## Line: 54 	 grep LVM2_PV_SIZE out
| [ 0:00] ## Line: 55 	 grep LVM2_PV_ATTR out
| [ 0:00] ## Line: 56 	 
| [ 0:00] ## Line: 57 	 pvs $OPTS -o+pv_attr -o-pv_attr -o pv_attr > out
| [ 0:00] ## Line: 58 	 grep LVM2_PV_ATTR out
| [ 0:00] ## Line: 59 	 not grep -v LVM2_PV_ATTR out
| [ 0:00] ## Line: 60 	 
| [ 0:00] ## Line: 61 	 # -o-size is the same as -o-pv_size - the prefix is recognized
| [ 0:00] ## Line: 62 	 pvs $OPTS -o-size > out
| [ 0:00] ## Line: 63 	 not grep LVM2_PV_SIZE out
| [ 0:00] ## Line: 64 	 
| [ 0:00] ## Line: 65 	 # PV does not have tags nor is it exported if we haven't done that explicitly.
| [ 0:00] ## Line: 66 	 # Check compaction per field is done correctly.
| [ 0:00] ## Line: 67 	 pvs $OPTS -o pv_name,pv_exported,pv_tags -o#pv_tags > out
| [ 0:00] ## Line: 68 	 grep LVM2_PV_NAME out
| [ 0:00] ## Line: 69 	 grep LVM2_PV_EXPORTED out
| [ 0:00] ## Line: 70 	 not grep LVM2_PV_TAGS out
| [ 0:00] ## Line: 71 	 
| [ 0:00] ## Line: 72 	 aux lvmconf 'report/compact_output_cols="pv_tags"'
| [ 0:00] ## Line: 73 	 
| [ 0:00] ## Line: 74 	 pvs $OPTS -o pv_name,pv_exported,pv_tags > out
| [ 0:00] ## Line: 75 	 grep LVM2_PV_NAME out
| [ 0:00] ## Line: 76 	 grep LVM2_PV_EXPORTED out
| [ 0:00] ## Line: 77 	 not grep LVM2_PV_TAGS out
| [ 0:00] ## Line: 78 	 
| [ 0:00] ## Line: 79 	 pvs $OPTS -o pv_name,pv_exported,pv_tags -o#pv_exported > out
| [ 0:00] ## Line: 80 	 grep LVM2_PV_NAME out
| [ 0:00] ## Line: 81 	 not grep LVM2_PV_EXPORTED out
| [ 0:00] ## Line: 82 	 grep LVM2_PV_TAGS out
| [ 0:00] ## Line: 83 	 
| [ 0:00] ## Line: 84 	 aux lvmconf 'report/compact_output=1'
| [ 0:00] ## Line: 85 	 pvs $OPTS -o pv_name,pv_exported,pv_tags > out
| [ 0:00] ## Line: 86 	 grep LVM2_PV_NAME out
| [ 0:00] ## Line: 87 	 not grep LVM2_PV_EXPORTED out
| [ 0:00] ## Line: 88 	 not grep LVM2_PV_TAGS out
| [ 0:00] ## Line: 89 	 
| [ 0:00] ## Line: 90 	 pvs $OPTS -o pv_name,pv_exported,pv_tags -o#pv_exported > out
| [ 0:00] ## Line: 91 	 grep LVM2_PV_NAME out
| [ 0:00] ## Line: 92 	 not grep LVM2_PV_EXPORTED out
| [ 0:00] ## Line: 93 	 not grep LVM2_PV_TAGS out
| [ 0:00] aux teardown
| [ 0:00] #report-fields.sh:1+ aux teardown
| [ 0:00] ## teardown.........ok
###       failed: [ndev-vanilla] shell/report-fields.sh

| [ 0:00] Library version:   1.02.146 (2017-12-18)
| [ 0:00] Driver version:    4.35.0
| [ 0:00] Kernel is Linux localhost.localdomain 3.10.0-693.11.1.el7.x86_64 #1 SMP Mon Dec 4 23:52:40 UTC 2017 x86_64 GNU/Linux
| [ 0:00] Selinux mode is not installed.
| [ 0:00]               total        used        free      shared  buff/cache   available
| [ 0:00] Mem:           7822        1080        4143          10        2599        6435
| [ 0:00] Swap:          4095           0        4095
| [ 0:00] Filesystem      Size  Used Avail Use% Mounted on
| [ 0:00] /dev/sdc1        18G  8.4G  8.4G  50% /
| [ 0:00] /dev/sdd1        51G  6.1G   43G  13% /lfskernel
| [ 0:00] devtmpfs        3.9G     0  3.9G   0% /dev
| [ 0:00] tmpfs           3.9G     0  3.9G   0% /run
| [ 0:00] @TESTDIR=/tmp/LVMTEST20962.EGNMi2jAE3
| [ 0:00] @PREFIX=LVMTEST20962
| [ 0:00] ## LVMCONF: activation {
| [ 0:00] ## LVMCONF:     checks = 1
| [ 0:00] ## LVMCONF:     monitoring = 0
| [ 0:00] ## LVMCONF:     polling_interval = 1
| [ 0:00] ## LVMCONF:     raid_region_size = 512
| [ 0:00] ## LVMCONF:     retry_deactivation = 1
| [ 0:00] ## LVMCONF:     snapshot_autoextend_percent = 50
| [ 0:00] ## LVMCONF:     snapshot_autoextend_threshold = 50
| [ 0:00] ## LVMCONF:     udev_rules = 1
| [ 0:00] ## LVMCONF:     udev_sync = 1
| [ 0:00] ## LVMCONF:     verify_udev_operations = 1
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: allocation {
| [ 0:00] ## LVMCONF:     wipe_signatures_when_zeroing_new_lvs = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: backup {
| [ 0:00] ## LVMCONF:     archive = 0
| [ 0:00] ## LVMCONF:     backup = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: devices {
| [ 0:00] ## LVMCONF:     cache_dir = "@TESTDIR@/etc"
| [ 0:00] ## LVMCONF:     default_data_alignment = 1
| [ 0:00] ## LVMCONF:     dir = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     filter = "a|.*|"
| [ 0:00] ## LVMCONF:     global_filter = [ "a|@TESTDIR@/dev/mapper/@PREFIX@.*pv[0-9_]*$|", "r|.*|" ]
| [ 0:00] ## LVMCONF:     md_component_detection  = 0
| [ 0:00] ## LVMCONF:     scan = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     sysfs_scan = 1
| [ 0:00] ## LVMCONF:     write_cache_state = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: dmeventd {
| [ 0:00] ## LVMCONF:     executable = "/sources/boot/LVM2.2.02.177/test/lib/dmeventd"
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: global {
| [ 0:00] ## LVMCONF:     abort_on_internal_errors = 1
| [ 0:00] ## LVMCONF:     cache_check_executable = "/usr/sbin/cache_check"
| [ 0:00] ## LVMCONF:     cache_dump_executable = "/usr/sbin/cache_dump"
| [ 0:00] ## LVMCONF:     cache_repair_executable = "/usr/sbin/cache_repair"
| [ 0:00] ## LVMCONF:     detect_internal_vg_cache_corruption = 1
| [ 0:00] ## LVMCONF:     fallback_to_local_locking = 0
| [ 0:00] ## LVMCONF:     fsadm_executable = "/sources/boot/LVM2.2.02.177/test/lib/fsadm"
| [ 0:00] ## LVMCONF:     library_dir = "@TESTDIR@/lib"
| [ 0:00] ## LVMCONF:     locking_dir = "@TESTDIR@/var/lock/lvm"
| [ 0:00] ## LVMCONF:     locking_type=1
| [ 0:00] ## LVMCONF:     notify_dbus = 0
| [ 0:00] ## LVMCONF:     si_unit_consistency = 1
| [ 0:00] ## LVMCONF:     thin_check_executable = "/usr/sbin/thin_check"
| [ 0:00] ## LVMCONF:     thin_dump_executable = "/usr/sbin/thin_dump"
| [ 0:00] ## LVMCONF:     thin_repair_executable = "/usr/sbin/thin_repair"
| [ 0:00] ## LVMCONF:     use_lvmetad = 0
| [ 0:00] ## LVMCONF:     use_lvmlockd = 0
| [ 0:00] ## LVMCONF:     use_lvmpolld = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: log {
| [ 0:00] ## LVMCONF:     activation = 1
| [ 0:00] ## LVMCONF:     file = "@TESTDIR@/debug.log"
| [ 0:00] ## LVMCONF:     indent = 1
| [ 0:00] ## LVMCONF:     level = 9
| [ 0:00] ## LVMCONF:     overwrite = 1
| [ 0:00] ## LVMCONF:     syslog = 0
| [ 0:00] ## LVMCONF:     verbose = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] <======== Processing test: "report-hidden.sh" ========>
| [ 0:00] 
| [ 0:00] aux prepare_vg 1
| [ 0:00] #report-hidden.sh:20+ aux prepare_vg 1
| [ 0:00] ## preparing loop device....ok (/dev/loop0)
| [ 0:00] ## preparing 1 devices...lib/utils: line 212: DM_UDEV_COOKIE: unbound variable
| [ 0:00] set +vx; STACKTRACE; set -vx
| [ 0:00] ##report-hidden.sh:20+ set +vx
| [ 0:00] ## - /lfskernel/sources/boot/LVM2.2.02.177/test/shell/report-hidden.sh:20
| [ 0:00] ## 1 STACKTRACE() called from /lfskernel/sources/boot/LVM2.2.02.177/test/shell/report-hidden.sh:20
| [ 0:00] <======== Info ========>
| [ 0:00] ## DMINFO:   Name             Maj Min Stat Open Targ Event  UUID                                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv1  253   3 L--w    0    1      0 TEST-@PREFIX@pv1                                                
| [ 0:00] <======== Active table ========>
| [ 0:00] ## DMTABLE:  @PREFIX@pv1: 0 69632 linear 7:0 2048
| [ 0:00] <======== Inactive table ========>
| [ 0:00] ## DMITABLE: @PREFIX@pv1: 
| [ 0:00] <======== Status ========>
| [ 0:00] ## DMSTATUS: @PREFIX@pv1: 0 69632 linear 
| [ 0:00] <======== Tree ========>
| [ 0:00] ## DMTREE:   LFS_vg-lfs (253:2)
| [ 0:00] ## DMTREE:    `- (8:16)
| [ 0:00] ## DMTREE:   @PREFIX@pv1 (253:3)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   centos-swap (253:1)
| [ 0:00] ## DMTREE:    `- (8:2)
| [ 0:00] ## DMTREE:   centos-root (253:0)
| [ 0:00] ## DMTREE:    `- (8:2)
| [ 0:00] <======== Recursive list of @TESTDIR@/dev ========>
| [ 0:00] ## LSLR:	@TESTDIR@/dev:
| [ 0:00] ## LSLR:	total 4
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 0 Feb 21 02:27 loop0
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 1 Feb 21 02:27 loop1
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 2 Feb 21 02:27 loop2
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 3 Feb 21 02:27 loop3
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 4 Feb 21 02:27 loop4
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 5 Feb 21 02:27 loop5
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 6 Feb 21 02:27 loop6
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 7 Feb 21 02:27 loop7
| [ 0:00] ## LSLR:	drwxr-xr-x 2 root root 4096 Feb 21 02:27 mapper
| [ 0:00] ## LSLR:	crw-r--r-- 1 root root 1, 3 Feb 21 02:27 testnull
| [ 0:00] ## LSLR:	
| [ 0:00] ## LSLR:	@TESTDIR@/dev/mapper:
| [ 0:00] ## LSLR:	total 0
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   3 Feb 21 02:27 @PREFIX@pv1
| [ 0:00] ## LSLR:	crw------- 1 root root  10, 236 Feb 21 02:27 control
| [ 0:00] <======== Udev DB content ========>
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-0
| [ 0:00] ## UDEV:	N: dm-0
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-0
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-0
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=0
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-1
| [ 0:00] ## UDEV:	N: dm-1
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-1
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-1
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=1
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-2
| [ 0:00] ## UDEV:	N: dm-2
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-2
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-2
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=2
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-3
| [ 0:00] ## UDEV:	N: dm-3
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-3
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-3
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=3
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/loop0
| [ 0:00] ## UDEV:	N: loop0
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/loop0
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/loop0
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=7
| [ 0:00] ## UDEV:	E: MINOR=0
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] <======== Script file "report-hidden.sh" ========>
| [ 0:00] ## Line: 1 	 #!/usr/bin/env bash
| [ 0:00] ## Line: 2 	 
| [ 0:00] ## Line: 3 	 # Copyright (C) 2016 Red Hat, Inc. All rights reserved.
| [ 0:00] ## Line: 4 	 #
| [ 0:00] ## Line: 5 	 # This copyrighted material is made available to anyone wishing to use,
| [ 0:00] ## Line: 6 	 # modify, copy, or redistribute it subject to the terms and conditions
| [ 0:00] ## Line: 7 	 # of the GNU General Public License v.2.
| [ 0:00] ## Line: 8 	 #
| [ 0:00] ## Line: 9 	 # You should have received a copy of the GNU General Public License
| [ 0:00] ## Line: 10 	 # along with this program; if not, write to the Free Software Foundation,
| [ 0:00] ## Line: 11 	 # Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA
| [ 0:00] ## Line: 12 	 
| [ 0:00] ## Line: 13 	 SKIP_WITH_LVMLOCKD=1
| [ 0:00] ## Line: 14 	 SKIP_WITH_LVMETAD=1
| [ 0:00] ## Line: 15 	 SKIP_WITH_CLVMD=1
| [ 0:00] ## Line: 16 	 SKIP_WITH_LVMPOLLD=1
| [ 0:00] ## Line: 17 	 
| [ 0:00] ## Line: 18 	 . lib/inittest
| [ 0:00] ## Line: 19 	 
| [ 0:00] ## Line: 20 	 aux prepare_vg 1
| [ 0:00] ## Line: 21 	 lvcreate --type mirror -m1 -l1 --alloc anywhere -n $lv1 $vg
| [ 0:00] ## Line: 22 	 
| [ 0:00] ## Line: 23 	 aux lvmconf 'log/prefix=""'
| [ 0:00] ## Line: 24 	 
| [ 0:00] ## Line: 25 	 aux lvmconf "report/mark_hidden_devices = 0"
| [ 0:00] ## Line: 26 	 lvs --noheadings -a -o name $vg > out
| [ 0:00] ## Line: 27 	 grep "^${lv1}_mimage_0" out
| [ 0:00] ## Line: 28 	 not grep "^\[${lv1}_mimage_0\]" out
| [ 0:00] ## Line: 29 	 
| [ 0:00] ## Line: 30 	 aux lvmconf "report/mark_hidden_devices = 1"
| [ 0:00] ## Line: 31 	 lvs --noheadings -a -o name $vg > out
| [ 0:00] ## Line: 32 	 grep "^\[${lv1}_mimage_0\]" out
| [ 0:00] ## Line: 33 	 not grep "^${lv1}_mimage_0" out
| [ 0:00] ## Line: 34 	 
| [ 0:00] ## Line: 35 	 vgremove -ff $vg
| [ 0:00] aux teardown
| [ 0:00] #report-hidden.sh:1+ aux teardown
| [ 0:00] ## teardown.........ok
###       failed: [ndev-vanilla] shell/report-hidden.sh

| [ 0:00] Library version:   1.02.146 (2017-12-18)
| [ 0:00] Driver version:    4.35.0
| [ 0:00] Kernel is Linux localhost.localdomain 3.10.0-693.11.1.el7.x86_64 #1 SMP Mon Dec 4 23:52:40 UTC 2017 x86_64 GNU/Linux
| [ 0:00] Selinux mode is not installed.
| [ 0:00]               total        used        free      shared  buff/cache   available
| [ 0:00] Mem:           7822        1080        4142          10        2599        6434
| [ 0:00] Swap:          4095           0        4095
| [ 0:00] Filesystem      Size  Used Avail Use% Mounted on
| [ 0:00] /dev/sdc1        18G  8.4G  8.4G  50% /
| [ 0:00] /dev/sdd1        51G  6.1G   43G  13% /lfskernel
| [ 0:00] devtmpfs        3.9G     0  3.9G   0% /dev
| [ 0:00] tmpfs           3.9G     0  3.9G   0% /run
| [ 0:00] @TESTDIR=/tmp/LVMTEST21128.5vga1CdQvD
| [ 0:00] @PREFIX=LVMTEST21128
| [ 0:00] ## LVMCONF: activation {
| [ 0:00] ## LVMCONF:     checks = 1
| [ 0:00] ## LVMCONF:     monitoring = 0
| [ 0:00] ## LVMCONF:     polling_interval = 1
| [ 0:00] ## LVMCONF:     raid_region_size = 512
| [ 0:00] ## LVMCONF:     retry_deactivation = 1
| [ 0:00] ## LVMCONF:     snapshot_autoextend_percent = 50
| [ 0:00] ## LVMCONF:     snapshot_autoextend_threshold = 50
| [ 0:00] ## LVMCONF:     udev_rules = 1
| [ 0:00] ## LVMCONF:     udev_sync = 1
| [ 0:00] ## LVMCONF:     verify_udev_operations = 1
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: allocation {
| [ 0:00] ## LVMCONF:     wipe_signatures_when_zeroing_new_lvs = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: backup {
| [ 0:00] ## LVMCONF:     archive = 0
| [ 0:00] ## LVMCONF:     backup = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: devices {
| [ 0:00] ## LVMCONF:     cache_dir = "@TESTDIR@/etc"
| [ 0:00] ## LVMCONF:     default_data_alignment = 1
| [ 0:00] ## LVMCONF:     dir = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     filter = "a|.*|"
| [ 0:00] ## LVMCONF:     global_filter = [ "a|@TESTDIR@/dev/mapper/@PREFIX@.*pv[0-9_]*$|", "r|.*|" ]
| [ 0:00] ## LVMCONF:     md_component_detection  = 0
| [ 0:00] ## LVMCONF:     scan = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     sysfs_scan = 1
| [ 0:00] ## LVMCONF:     write_cache_state = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: dmeventd {
| [ 0:00] ## LVMCONF:     executable = "/sources/boot/LVM2.2.02.177/test/lib/dmeventd"
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: global {
| [ 0:00] ## LVMCONF:     abort_on_internal_errors = 1
| [ 0:00] ## LVMCONF:     cache_check_executable = "/usr/sbin/cache_check"
| [ 0:00] ## LVMCONF:     cache_dump_executable = "/usr/sbin/cache_dump"
| [ 0:00] ## LVMCONF:     cache_repair_executable = "/usr/sbin/cache_repair"
| [ 0:00] ## LVMCONF:     detect_internal_vg_cache_corruption = 1
| [ 0:00] ## LVMCONF:     fallback_to_local_locking = 0
| [ 0:00] ## LVMCONF:     fsadm_executable = "/sources/boot/LVM2.2.02.177/test/lib/fsadm"
| [ 0:00] ## LVMCONF:     library_dir = "@TESTDIR@/lib"
| [ 0:00] ## LVMCONF:     locking_dir = "@TESTDIR@/var/lock/lvm"
| [ 0:00] ## LVMCONF:     locking_type=1
| [ 0:00] ## LVMCONF:     notify_dbus = 0
| [ 0:00] ## LVMCONF:     si_unit_consistency = 1
| [ 0:00] ## LVMCONF:     thin_check_executable = "/usr/sbin/thin_check"
| [ 0:00] ## LVMCONF:     thin_dump_executable = "/usr/sbin/thin_dump"
| [ 0:00] ## LVMCONF:     thin_repair_executable = "/usr/sbin/thin_repair"
| [ 0:00] ## LVMCONF:     use_lvmetad = 0
| [ 0:00] ## LVMCONF:     use_lvmlockd = 0
| [ 0:00] ## LVMCONF:     use_lvmpolld = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: log {
| [ 0:00] ## LVMCONF:     activation = 1
| [ 0:00] ## LVMCONF:     file = "@TESTDIR@/debug.log"
| [ 0:00] ## LVMCONF:     indent = 1
| [ 0:00] ## LVMCONF:     level = 9
| [ 0:00] ## LVMCONF:     overwrite = 1
| [ 0:00] ## LVMCONF:     syslog = 0
| [ 0:00] ## LVMCONF:     verbose = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] <======== Processing test: "select-report.sh" ========>
| [ 0:00] 
| [ 0:00] aux prepare_pvs 6 16
| [ 0:00] #select-report.sh:18+ aux prepare_pvs 6 16
| [ 0:00] ## preparing loop device....ok (/dev/loop0)
| [ 0:00] ## preparing 6 devices...lib/utils: line 212: DM_UDEV_COOKIE: unbound variable
| [ 0:00] set +vx; STACKTRACE; set -vx
| [ 0:00] ##select-report.sh:18+ set +vx
| [ 0:00] ## - /lfskernel/sources/boot/LVM2.2.02.177/test/shell/select-report.sh:18
| [ 0:00] ## 1 STACKTRACE() called from /lfskernel/sources/boot/LVM2.2.02.177/test/shell/select-report.sh:18
| [ 0:00] <======== Info ========>
| [ 0:00] ## DMINFO:   Name             Maj Min Stat Open Targ Event  UUID                                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv1  253   6 L--w    0    1      0 TEST-@PREFIX@pv1                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv6  253   4 L--w    0    1      0 TEST-@PREFIX@pv6                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv5  253   7 L--w    0    1      0 TEST-@PREFIX@pv5                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv4  253   5 L--w    0    1      0 TEST-@PREFIX@pv4                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv3  253   3 L--w    0    1      0 TEST-@PREFIX@pv3                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv2  253   8 L--w    0    1      0 TEST-@PREFIX@pv2                                                
| [ 0:00] <======== Active table ========>
| [ 0:00] ## DMTABLE:  @PREFIX@pv1: 0 32768 linear 7:0 2048
| [ 0:00] ## DMTABLE:  @PREFIX@pv6: 0 32768 linear 7:0 165888
| [ 0:00] ## DMTABLE:  @PREFIX@pv5: 0 32768 linear 7:0 133120
| [ 0:00] ## DMTABLE:  @PREFIX@pv4: 0 32768 linear 7:0 100352
| [ 0:00] ## DMTABLE:  @PREFIX@pv3: 0 32768 linear 7:0 67584
| [ 0:00] ## DMTABLE:  @PREFIX@pv2: 0 32768 linear 7:0 34816
| [ 0:00] <======== Inactive table ========>
| [ 0:00] ## DMITABLE: @PREFIX@pv1: 
| [ 0:00] ## DMITABLE: @PREFIX@pv6: 
| [ 0:00] ## DMITABLE: @PREFIX@pv5: 
| [ 0:00] ## DMITABLE: @PREFIX@pv4: 
| [ 0:00] ## DMITABLE: @PREFIX@pv3: 
| [ 0:00] ## DMITABLE: @PREFIX@pv2: 
| [ 0:00] <======== Status ========>
| [ 0:00] ## DMSTATUS: @PREFIX@pv1: 0 32768 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv6: 0 32768 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv5: 0 32768 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv4: 0 32768 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv3: 0 32768 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv2: 0 32768 linear 
| [ 0:00] <======== Tree ========>
| [ 0:00] ## DMTREE:   @PREFIX@pv1 (253:6)
| [ 0:01] ## DMTREE:    `- (7:0)
| [ 0:01] ## DMTREE:   @PREFIX@pv6 (253:4)
| [ 0:01] ## DMTREE:    `- (7:0)
| [ 0:01] ## DMTREE:   @PREFIX@pv5 (253:7)
| [ 0:01] ## DMTREE:    `- (7:0)
| [ 0:01] ## DMTREE:   @PREFIX@pv4 (253:5)
| [ 0:01] ## DMTREE:    `- (7:0)
| [ 0:01] ## DMTREE:   @PREFIX@pv3 (253:3)
| [ 0:01] ## DMTREE:    `- (7:0)
| [ 0:01] ## DMTREE:   LFS_vg-lfs (253:2)
| [ 0:01] ## DMTREE:    `- (8:16)
| [ 0:01] ## DMTREE:   @PREFIX@pv2 (253:8)
| [ 0:01] ## DMTREE:    `- (7:0)
| [ 0:01] ## DMTREE:   centos-swap (253:1)
| [ 0:01] ## DMTREE:    `- (8:2)
| [ 0:01] ## DMTREE:   centos-root (253:0)
| [ 0:01] ## DMTREE:    `- (8:2)
| [ 0:01] <======== Recursive list of @TESTDIR@/dev ========>
| [ 0:01] ## LSLR:	@TESTDIR@/dev:
| [ 0:01] ## LSLR:	total 4
| [ 0:01] ## LSLR:	brw-r--r-- 1 root root 7, 0 Feb 21 02:27 loop0
| [ 0:01] ## LSLR:	brw-r--r-- 1 root root 7, 1 Feb 21 02:27 loop1
| [ 0:01] ## LSLR:	brw-r--r-- 1 root root 7, 2 Feb 21 02:27 loop2
| [ 0:01] ## LSLR:	brw-r--r-- 1 root root 7, 3 Feb 21 02:27 loop3
| [ 0:01] ## LSLR:	brw-r--r-- 1 root root 7, 4 Feb 21 02:27 loop4
| [ 0:01] ## LSLR:	brw-r--r-- 1 root root 7, 5 Feb 21 02:27 loop5
| [ 0:01] ## LSLR:	brw-r--r-- 1 root root 7, 6 Feb 21 02:27 loop6
| [ 0:01] ## LSLR:	brw-r--r-- 1 root root 7, 7 Feb 21 02:27 loop7
| [ 0:01] ## LSLR:	drwxr-xr-x 2 root root 4096 Feb 21 02:27 mapper
| [ 0:01] ## LSLR:	crw-r--r-- 1 root root 1, 3 Feb 21 02:27 testnull
| [ 0:01] ## LSLR:	
| [ 0:01] ## LSLR:	@TESTDIR@/dev/mapper:
| [ 0:01] ## LSLR:	total 0
| [ 0:01] ## LSLR:	brw------- 1 root root 253,   6 Feb 21 02:27 @PREFIX@pv1
| [ 0:01] ## LSLR:	brw------- 1 root root 253,   8 Feb 21 02:27 @PREFIX@pv2
| [ 0:01] ## LSLR:	brw------- 1 root root 253,   3 Feb 21 02:27 @PREFIX@pv3
| [ 0:01] ## LSLR:	brw------- 1 root root 253,   5 Feb 21 02:27 @PREFIX@pv4
| [ 0:01] ## LSLR:	brw------- 1 root root 253,   7 Feb 21 02:27 @PREFIX@pv5
| [ 0:01] ## LSLR:	brw------- 1 root root 253,   4 Feb 21 02:27 @PREFIX@pv6
| [ 0:01] ## LSLR:	crw------- 1 root root  10, 236 Feb 21 02:27 control
| [ 0:01] <======== Udev DB content ========>
| [ 0:01] ## UDEV:	P: /devices/virtual/block/dm-0
| [ 0:01] ## UDEV:	N: dm-0
| [ 0:01] ## UDEV:	E: DEVNAME=/dev/dm-0
| [ 0:01] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-0
| [ 0:01] ## UDEV:	E: DEVTYPE=disk
| [ 0:01] ## UDEV:	E: MAJOR=253
| [ 0:01] ## UDEV:	E: MINOR=0
| [ 0:01] ## UDEV:	E: SUBSYSTEM=block
| [ 0:01] ## UDEV:	
| [ 0:01] ## UDEV:	P: /devices/virtual/block/dm-1
| [ 0:01] ## UDEV:	N: dm-1
| [ 0:01] ## UDEV:	E: DEVNAME=/dev/dm-1
| [ 0:01] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-1
| [ 0:01] ## UDEV:	E: DEVTYPE=disk
| [ 0:01] ## UDEV:	E: MAJOR=253
| [ 0:01] ## UDEV:	E: MINOR=1
| [ 0:01] ## UDEV:	E: SUBSYSTEM=block
| [ 0:01] ## UDEV:	
| [ 0:01] ## UDEV:	P: /devices/virtual/block/dm-2
| [ 0:01] ## UDEV:	N: dm-2
| [ 0:01] ## UDEV:	E: DEVNAME=/dev/dm-2
| [ 0:01] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-2
| [ 0:01] ## UDEV:	E: DEVTYPE=disk
| [ 0:01] ## UDEV:	E: MAJOR=253
| [ 0:01] ## UDEV:	E: MINOR=2
| [ 0:01] ## UDEV:	E: SUBSYSTEM=block
| [ 0:01] ## UDEV:	
| [ 0:01] ## UDEV:	P: /devices/virtual/block/dm-3
| [ 0:01] ## UDEV:	N: dm-3
| [ 0:01] ## UDEV:	E: DEVNAME=/dev/dm-3
| [ 0:01] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-3
| [ 0:01] ## UDEV:	E: DEVTYPE=disk
| [ 0:01] ## UDEV:	E: MAJOR=253
| [ 0:01] ## UDEV:	E: MINOR=3
| [ 0:01] ## UDEV:	E: SUBSYSTEM=block
| [ 0:01] ## UDEV:	
| [ 0:01] ## UDEV:	P: /devices/virtual/block/dm-4
| [ 0:01] ## UDEV:	N: dm-4
| [ 0:01] ## UDEV:	E: DEVNAME=/dev/dm-4
| [ 0:01] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-4
| [ 0:01] ## UDEV:	E: DEVTYPE=disk
| [ 0:01] ## UDEV:	E: MAJOR=253
| [ 0:01] ## UDEV:	E: MINOR=4
| [ 0:01] ## UDEV:	E: SUBSYSTEM=block
| [ 0:01] ## UDEV:	
| [ 0:01] ## UDEV:	P: /devices/virtual/block/dm-5
| [ 0:01] ## UDEV:	N: dm-5
| [ 0:01] ## UDEV:	E: DEVNAME=/dev/dm-5
| [ 0:01] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-5
| [ 0:01] ## UDEV:	E: DEVTYPE=disk
| [ 0:01] ## UDEV:	E: MAJOR=253
| [ 0:01] ## UDEV:	E: MINOR=5
| [ 0:01] ## UDEV:	E: SUBSYSTEM=block
| [ 0:01] ## UDEV:	
| [ 0:01] ## UDEV:	P: /devices/virtual/block/dm-6
| [ 0:01] ## UDEV:	N: dm-6
| [ 0:01] ## UDEV:	E: DEVNAME=/dev/dm-6
| [ 0:01] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-6
| [ 0:01] ## UDEV:	E: DEVTYPE=disk
| [ 0:01] ## UDEV:	E: MAJOR=253
| [ 0:01] ## UDEV:	E: MINOR=6
| [ 0:01] ## UDEV:	E: SUBSYSTEM=block
| [ 0:01] ## UDEV:	
| [ 0:01] ## UDEV:	P: /devices/virtual/block/dm-7
| [ 0:01] ## UDEV:	N: dm-7
| [ 0:01] ## UDEV:	E: DEVNAME=/dev/dm-7
| [ 0:01] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-7
| [ 0:01] ## UDEV:	E: DEVTYPE=disk
| [ 0:01] ## UDEV:	E: MAJOR=253
| [ 0:01] ## UDEV:	E: MINOR=7
| [ 0:01] ## UDEV:	E: SUBSYSTEM=block
| [ 0:01] ## UDEV:	
| [ 0:01] ## UDEV:	P: /devices/virtual/block/dm-8
| [ 0:01] ## UDEV:	N: dm-8
| [ 0:01] ## UDEV:	E: DEVNAME=/dev/dm-8
| [ 0:01] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-8
| [ 0:01] ## UDEV:	E: DEVTYPE=disk
| [ 0:01] ## UDEV:	E: MAJOR=253
| [ 0:01] ## UDEV:	E: MINOR=8
| [ 0:01] ## UDEV:	E: SUBSYSTEM=block
| [ 0:01] ## UDEV:	
| [ 0:01] ## UDEV:	P: /devices/virtual/block/loop0
| [ 0:01] ## UDEV:	N: loop0
| [ 0:01] ## UDEV:	E: DEVNAME=/dev/loop0
| [ 0:01] ## UDEV:	E: DEVPATH=/devices/virtual/block/loop0
| [ 0:01] ## UDEV:	E: DEVTYPE=disk
| [ 0:01] ## UDEV:	E: MAJOR=7
| [ 0:01] ## UDEV:	E: MINOR=0
| [ 0:01] ## UDEV:	E: SUBSYSTEM=block
| [ 0:01] ## UDEV:	
| [ 0:01] <======== Script file "select-report.sh" ========>
| [ 0:01] ## Line: 1 	 #!/usr/bin/env bash
| [ 0:01] ## Line: 2 	 
| [ 0:01] ## Line: 3 	 # Copyright (C) 2014-2015 Red Hat, Inc. All rights reserved.
| [ 0:01] ## Line: 4 	 #
| [ 0:01] ## Line: 5 	 # This copyrighted material is made available to anyone wishing to use,
| [ 0:01] ## Line: 6 	 # modify, copy, or redistribute it subject to the terms and conditions
| [ 0:01] ## Line: 7 	 # of the GNU General Public License v.2.
| [ 0:01] ## Line: 8 	 #
| [ 0:01] ## Line: 9 	 # You should have received a copy of the GNU General Public License
| [ 0:01] ## Line: 10 	 # along with this program; if not, write to the Free Software Foundation,
| [ 0:01] ## Line: 11 	 # Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA
| [ 0:01] ## Line: 12 	 
| [ 0:01] ## Line: 13 	 SKIP_WITH_LVMLOCKD=1
| [ 0:01] ## Line: 14 	 SKIP_WITH_LVMPOLLD=1
| [ 0:01] ## Line: 15 	 
| [ 0:01] ## Line: 16 	 . lib/inittest
| [ 0:01] ## Line: 17 	 
| [ 0:01] ## Line: 18 	 aux prepare_pvs 6 16
| [ 0:01] ## Line: 19 	 
| [ 0:01] ## Line: 20 	 # !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
| [ 0:01] ## Line: 21 	 # MAKE SURE ALL PV, VG AND LV NAMES CREATED IN
| [ 0:01] ## Line: 22 	 # THIS TEST ARE UNIQUE - THIS SIMPLIFIES TESTING
| [ 0:01] ## Line: 23 	 # !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
| [ 0:01] ## Line: 24 	 
| [ 0:01] ## Line: 25 	 # create $VGS with assorted tags
| [ 0:01] ## Line: 26 	 vgcreate $vg1 --vgmetadatacopies 2 --addtag "vg_tag3" --addtag "vg_tag2" -s 4m "$dev1" "$dev2" "$dev3"
| [ 0:01] ## Line: 27 	 vgcreate $vg2 --addtag "vg_tag2" -s 4m "$dev4" "$dev5"
| [ 0:01] ## Line: 28 	 vgcreate $vg3 --addtag "vg_tag1" -s 4m "$dev6"
| [ 0:01] ## Line: 29 	 
| [ 0:01] ## Line: 30 	 # add PV assorted tags
| [ 0:01] ## Line: 31 	 pvchange --addtag "pv_tag3" --addtag "pv_tag1" --addtag "pv_tag2" "$dev1"
| [ 0:01] ## Line: 32 	 pvchange --addtag "pv_tag1" --addtag "pv_tag4" "$dev6"
| [ 0:01] ## Line: 33 	 
| [ 0:01] ## Line: 34 	 # create $LVS with assorted tags and various sizes
| [ 0:01] ## Line: 35 	 lvcreate --addtag 'lv_tag2.-+/=!:&#' --addtag "lv_tag1" -L8m -n "vol1" $vg1
| [ 0:01] ## Line: 36 	 lvcreate --addtag "lv_tag1" -L4m -n "vol2" $vg1
| [ 0:01] ## Line: 37 	 lvcreate --readahead 512 --addtag "lv_tag1" -L16m -n "abc" $vg2
| [ 0:01] ## Line: 38 	 lvcreate --readahead 512 -My --minor 254 -L4m -n "xyz" $vg3
| [ 0:01] ## Line: 39 	 lvcreate -L4m -aey -n "orig" $vg3
| [ 0:01] ## Line: 40 	 lvcreate -L4m -s "$vg3/orig" -n "snap"
| [ 0:01] ## Line: 41 	 
| [ 0:01] ## Line: 42 	 OUT_LOG_FILE="out"
| [ 0:01] ## Line: 43 	 ERR_LOG_FILE="err"
| [ 0:01] ## Line: 44 	 
| [ 0:01] ## Line: 45 	 sel() {
| [ 0:01] ## Line: 46 	 	local items_found
| [ 0:01] ## Line: 47 	 
| [ 0:01] ## Line: 48 	 	${1}s --noheadings -o ${1}_name --select "$2" 2>"$ERR_LOG_FILE" | tee "$OUT_LOG_FILE"
| [ 0:01] ## Line: 49 	         shift 2
| [ 0:01] ## Line: 50 	 
| [ 0:01] ## Line: 51 	 	test -f "$OUT_LOG_FILE" || {
| [ 0:01] ## Line: 52 	 		echo "  >>> Missing log file to check!"
| [ 0:01] ## Line: 53 	 		return 1
| [ 0:01] ## Line: 54 	 	}
| [ 0:01] ## Line: 55 	 
| [ 0:01] ## Line: 56 	 	# there shouldn't be any selection syntax error
| [ 0:01] ## Line: 57 	 	grep "Selection syntax error at" "$ERR_LOG_FILE" >/dev/null && {
| [ 0:01] ## Line: 58 	 		echo "  >>> Selection syntax error hit!"
| [ 0:01] ## Line: 59 	 		return 1
| [ 0:01] ## Line: 60 	 	}
| [ 0:01] ## Line: 61 	 
| [ 0:01] ## Line: 62 	 	items_found=$(wc -l "$OUT_LOG_FILE" | cut -f 1 -d ' ')
| [ 0:01] ## Line: 63 	 
| [ 0:01] ## Line: 64 	 	# the number of lines on output must match
| [ 0:01] ## Line: 65 	 	test "$items_found" -eq $# || {
| [ 0:01] ## Line: 66 	 		echo "  >>> NUMBER OF ITEMS EXPECTED: $#" "$@"
| [ 0:01] ## Line: 67 	 		echo "  >>> NUMBER OF ITEMS FOUND: $items_found ($(< $OUT_LOG_FILE))"
| [ 0:01] ## Line: 68 	 		return 1
| [ 0:01] ## Line: 69 	 	}
| [ 0:01] ## Line: 70 	 
| [ 0:01] ## Line: 71 	 	# the names selected must be correct
| [ 0:01] ## Line: 72 	 	# each pv, vg and lv name is unique so just check
| [ 0:01] ## Line: 73 	 	# the presence of the names given as arg
| [ 0:01] ## Line: 74 	 	for name in "$@" ; do
| [ 0:01] ## Line: 75 	 		grep "$name" "$OUT_LOG_FILE" >/dev/null || {
| [ 0:01] ## Line: 76 	 			echo "  >>> $name not found in the output log"
| [ 0:01] ## Line: 77 	 			return 1
| [ 0:01] ## Line: 78 	 		}
| [ 0:01] ## Line: 79 	 	done
| [ 0:01] ## Line: 80 	 
| [ 0:01] ## Line: 81 	 	rm -f "$OUT_LOG_FILE" "$ERR_LOG_FILE"
| [ 0:01] ## Line: 82 	 }
| [ 0:01] ## Line: 83 	 
| [ 0:01] ## Line: 84 	 ##########################
| [ 0:01] ## Line: 85 	 # STRING FIELD SELECTION #
| [ 0:01] ## Line: 86 	 ##########################
| [ 0:01] ## Line: 87 	 #$LVS 'lv_name="vol1"' && result vol1
| [ 0:01] ## Line: 88 	 sel lv 'lv_name="vol1"' vol1
| [ 0:01] ## Line: 89 	 #$LVS 'lv_name!="vol1"' && result vol2 abc xyz
| [ 0:01] ## Line: 90 	 sel lv 'lv_name!="vol1"' vol2 abc xyz orig snap
| [ 0:01] ## Line: 91 	 # check string values are accepted without quotes too
| [ 0:01] ## Line: 92 	 sel lv 'lv_name=vol1' vol1
| [ 0:01] ## Line: 93 	 # check single quotes are also accepted instead of double quotes
| [ 0:01] ## Line: 94 	 sel lv "lv_name='vol1'" vol1
| [ 0:01] ## Line: 95 	 
| [ 0:01] ## Line: 96 	 ###############################
| [ 0:01] ## Line: 97 	 # STRING LIST FIELD SELECTION #
| [ 0:01] ## Line: 98 	 ###############################
| [ 0:01] ## Line: 99 	 sel pv 'tags=["pv_tag1"]'
| [ 0:01] ## Line: 100 	 # for one item, no need to use []
| [ 0:01] ## Line: 101 	 sel pv 'tags="pv_tag1"' "$dev1" "$dev6"
| [ 0:01] ## Line: 102 	 # no match
| [ 0:01] ## Line: 103 	 sel pv 'tags=["pv_tag1" && "pv_tag2"]'
| [ 0:01] ## Line: 104 	 sel pv 'tags=["pv_tag1" && "pv_tag2" && "pv_tag3"]' "$dev1"
| [ 0:01] ## Line: 105 	 # check the order has no effect on selection result
| [ 0:01] ## Line: 106 	 sel pv 'tags=["pv_tag3" && "pv_tag2" && "pv_tag1"]' "$dev1"
| [ 0:01] ## Line: 107 	 sel pv 'tags=["pv_tag4" || "pv_tag3"]' "$dev1" "$dev6"
| [ 0:01] ## Line: 108 	 sel pv 'tags!=["pv_tag1"]' "$dev1" "$dev2" "$dev3" "$dev4" "$dev5" "$dev6"
| [ 0:01] ## Line: 109 	 # check mixture of && and || - this is not allowed
| [ 0:01] ## Line: 110 	 not sel pv 'tags=["pv_tag1" && "pv_tag2" || "pv_tag3"]'
| [ 0:01] ## Line: 111 	 # check selection with blank value
| [ 0:01] ## Line: 112 	 sel lv 'tags=""' xyz orig snap
| [ 0:01] ## Line: 113 	 sel lv 'tags={}' xyz orig snap
| [ 0:01] ## Line: 114 	 sel lv 'tags=[]' xyz orig snap
| [ 0:01] ## Line: 115 	 # check subset selection
| [ 0:01] ## Line: 116 	 sel pv 'tags={"pv_tag1"}' "$dev1" "$dev6"
| [ 0:01] ## Line: 117 	 sel pv 'tags={"pv_tag1" && "pv_tag2"}' "$dev1"
| [ 0:01] ## Line: 118 	 
| [ 0:01] ## Line: 119 	 ##########################
| [ 0:01] ## Line: 120 	 # NUMBER FIELD SELECTION #
| [ 0:01] ## Line: 121 	 ##########################
| [ 0:01] ## Line: 122 	 sel vg 'pv_count=3' $vg1
| [ 0:01] ## Line: 123 	 sel vg 'pv_count!=3' $vg3 $vg2
| [ 0:01] ## Line: 124 	 sel vg 'pv_count<2' $vg3
| [ 0:01] ## Line: 125 	 sel vg 'pv_count<=2' $vg3 $vg2
| [ 0:01] ## Line: 126 	 sel vg 'pv_count>2' $vg1
| [ 0:01] ## Line: 127 	 sel vg 'pv_count>=2' $vg1 $vg2
| [ 0:01] ## Line: 128 	 
| [ 0:01] ## Line: 129 	 ########################
| [ 0:01] ## Line: 130 	 # SIZE FIELD SELECTION #
| [ 0:01] ## Line: 131 	 ########################
| [ 0:01] ## Line: 132 	 # check size units are accepted as well as floating point numbers for sizes
| [ 0:01] ## Line: 133 	 sel lv 'size=8388608b' vol1
| [ 0:01] ## Line: 134 	 sel lv 'size=8192k' vol1
| [ 0:01] ## Line: 135 	 sel lv 'size=8m' vol1
| [ 0:01] ## Line: 136 	 sel lv 'size=8.00m' vol1
| [ 0:01] ## Line: 137 	 sel lv 'size=0.0078125g' vol1
| [ 0:01] ## Line: 138 	 sel lv 'size=0.00000762939453125t' vol1
| [ 0:01] ## Line: 139 	 sel lv 'size=0.000000007450580596923828125p' vol1
| [ 0:01] ## Line: 140 	 sel lv 'size=0.0000000000072759576141834259033203125e' vol1
| [ 0:01] ## Line: 141 	 
| [ 0:01] ## Line: 142 	 sel lv 'size>8m' abc
| [ 0:01] ## Line: 143 	 sel lv 'size>=8m' abc vol1
| [ 0:01] ## Line: 144 	 sel lv 'size<8m' vol2 xyz orig snap
| [ 0:01] ## Line: 145 	 sel lv 'size<=8m' vol2 xyz vol1 orig snap
| [ 0:01] ## Line: 146 	 
| [ 0:01] ## Line: 147 	 ###########################
| [ 0:01] ## Line: 148 	 # PERCENT FIELD SELECTION #
| [ 0:01] ## Line: 149 	 ###########################
| [ 0:01] ## Line: 150 	 if aux target_at_least dm-snapshot 1 10 0; then
| [ 0:01] ## Line: 151 	 	# Test zero percent only if snapshot can be zero.
| [ 0:01] ## Line: 152 	 	# Before 1.10.0, the snap percent included metadata size.
| [ 0:01] ## Line: 153 	 	sel lv 'snap_percent=0' snap
| [ 0:01] ## Line: 154 	 fi
| [ 0:01] ## Line: 155 	 dd if=/dev/zero of="$DM_DEV_DIR/$vg3/snap" bs=1M count=1 conv=fdatasync
| [ 0:01] ## Line: 156 	 sel lv 'snap_percent<50' snap
| [ 0:01] ## Line: 157 	 sel lv 'snap_percent>50'
| [ 0:01] ## Line: 158 	 # overflow snapshot -> invalidated, but still showing 100%
| [ 0:01] ## Line: 159 	 not dd if=/dev/zero of="$DM_DEV_DIR/$vg3/snap" bs=1M count=4 conv=fdatasync
| [ 0:01] ## Line: 160 	 sel lv 'snap_percent=100' snap
| [ 0:01] ## Line: 161 	 # % char is accepted as suffix for percent values
| [ 0:01] ## Line: 162 	 sel lv 'snap_percent=100%' snap
| [ 0:01] ## Line: 163 	 # percent values over 100% are not accepted
| [ 0:01] ## Line: 164 	 not sel lv 'snap_percent=101%'
| [ 0:01] ## Line: 165 	 
| [ 0:01] ## Line: 166 	 #########################
| [ 0:01] ## Line: 167 	 # REGEX FIELD SELECTION #
| [ 0:01] ## Line: 168 	 #########################
| [ 0:01] ## Line: 169 	 sel lv 'lv_name=~"^vol[12]"' vol1 vol2
| [ 0:01] ## Line: 170 	 sel lv 'lv_name!~"^vol[12]"' abc xyz orig snap
| [ 0:01] ## Line: 171 	 # check regex is accepted without quotes too
| [ 0:01] ## Line: 172 	 sel lv 'lv_name=~^vol[12]' vol1 vol2
| [ 0:01] ## Line: 173 	 
| [ 0:01] ## Line: 174 	 ###########
| [ 0:01] ## Line: 175 	 # GENERIC #
| [ 0:01] ## Line: 176 	 ###########
| [ 0:01] ## Line: 177 	 # check prefix works for selection too
| [ 0:01] ## Line: 178 	 sel lv 'lv_name="vol1"' vol1
| [ 0:01] ## Line: 179 	 sel lv 'name="vol1"' vol1
| [ 0:01] ## Line: 180 	 
| [ 0:01] ## Line: 181 	 # check reserved values are accepted for certain fields as well as usual values
| [ 0:01] ## Line: 182 	 sel vg 'vg_mda_copies=unmanaged' $vg2 $vg3
| [ 0:01] ## Line: 183 	 sel vg 'vg_mda_copies=2' $vg1
| [ 0:01] ## Line: 184 	 # also, we must match only vg1, not including vg2 and vg3
| [ 0:01] ## Line: 185 	 # when comparing ranges - unamanged is mapped onto 2^64 - 1 internally,
| [ 0:01] ## Line: 186 	 # so we need to skip this internal value if it matches with selection criteria!
| [ 0:01] ## Line: 187 	 sel vg 'vg_mda_copies>=2' $vg1
| [ 0:01] ## Line: 188 	 not sel vg 'vg_mda_copies=18446744073709551615'
| [ 0:01] ## Line: 189 	 
| [ 0:01] ## Line: 190 	 sel lv 'lv_read_ahead=auto' vol1 vol2 orig snap
| [ 0:01] ## Line: 191 	 sel lv 'lv_read_ahead=256k' abc xyz
| [ 0:01] ## Line: 192 	 
| [ 0:01] ## Line: 193 	 sel lv 'lv_minor=-1' vol1 vol2 abc orig snap
| [ 0:01] ## Line: 194 	 sel lv 'lv_minor=undefined' vol1 vol2 abc orig snap
| [ 0:01] ## Line: 195 	 sel lv 'lv_minor=undef' vol1 vol2 abc orig snap
| [ 0:01] ## Line: 196 	 sel lv 'lv_minor=unknown' vol1 vol2 abc orig snap
| [ 0:01] ## Line: 197 	 sel lv 'lv_minor=254' xyz
| [ 0:01] ## Line: 198 	 # also test synonym for string field type
| [ 0:01] ## Line: 199 	 sel lv 'seg_monitor=undefined' vol1 vol2 abc abc orig snap xyz
| [ 0:01] ## Line: 200 	 
| [ 0:01] ## Line: 201 	 # if size unit not spefied, the 'm' (MiB) unit is used by default
| [ 0:01] ## Line: 202 	 sel lv 'lv_size=8' vol1
| [ 0:01] ## Line: 203 	 
| [ 0:01] ## Line: 204 	 # no need to use quotes for the whole selection string if it does not clash with shell
| [ 0:01] ## Line: 205 	 sel lv name=vol1 vol1
| [ 0:01] ## Line: 206 	 
| [ 0:01] ## Line: 207 	 ##########################################
| [ 0:01] ## Line: 208 	 # FORMING MORE COMPLEX SELECTION CLAUSES #
| [ 0:01] ## Line: 209 	 ##########################################
| [ 0:01] ## Line: 210 	 # AND clause
| [ 0:01] ## Line: 211 	 sel lv 'lv_tags=lv_tag1 && lv_size=4m' vol2
| [ 0:01] ## Line: 212 	 # OR clause
| [ 0:01] ## Line: 213 	 sel lv 'lv_name=vol1 || lv_name=vol2' vol1 vol2
| [ 0:01] ## Line: 214 	 # grouping by using ( )
| [ 0:01] ## Line: 215 	 sel lv '(lv_name=vol1 || lv_name=vol2) || vg_tags=vg_tag1' vol1 vol2 orig snap xyz
| [ 0:01] ## Line: 216 	 sel lv '(lv_name=vol1 && lv_size=100m) || vg_tags=vg_tag1' xyz orig snap
| [ 0:01] ## Line: 217 	 sel lv '(lv_name=vol1 || lv_name=vol2) && vg_tags=vg_tag1'
| [ 0:01] ## Line: 218 	 sel lv '(lv_name=vol1 || lv_name=vol2) && lv_size < 8m' vol2
| [ 0:01] ## Line: 219 	 sel lv '(lv_name=vol1 && lv_size=8m) && vg_tags=vg_tag2' vol1
| [ 0:01] ## Line: 220 	 # negation of clause grouped by ( )
| [ 0:01] ## Line: 221 	 sel lv '!(lv_name=vol1 || lv_name=vol2)' abc xyz orig snap
| [ 0:01] ## Line: 222 	 
| [ 0:01] ## Line: 223 	 vgremove -ff $vg1 $vg2 $vg3
| [ 0:01] aux teardown
| [ 0:01] #select-report.sh:1+ aux teardown
| [ 0:01] ## teardown.........ok
###       failed: [ndev-vanilla] shell/select-report.sh
###      skipped: [ndev-vanilla] shell/select-tools-thin.sh

| [ 0:00] Library version:   1.02.146 (2017-12-18)
| [ 0:00] Driver version:    4.35.0
| [ 0:00] Kernel is Linux localhost.localdomain 3.10.0-693.11.1.el7.x86_64 #1 SMP Mon Dec 4 23:52:40 UTC 2017 x86_64 GNU/Linux
| [ 0:00] Selinux mode is not installed.
| [ 0:00]               total        used        free      shared  buff/cache   available
| [ 0:00] Mem:           7822        1080        4142          10        2599        6435
| [ 0:00] Swap:          4095           0        4095
| [ 0:00] Filesystem      Size  Used Avail Use% Mounted on
| [ 0:00] /dev/sdc1        18G  8.4G  8.4G  50% /
| [ 0:00] /dev/sdd1        51G  6.1G   43G  13% /lfskernel
| [ 0:00] devtmpfs        3.9G     0  3.9G   0% /dev
| [ 0:00] tmpfs           3.9G     0  3.9G   0% /run
| [ 0:00] @TESTDIR=/tmp/LVMTEST21414.ox5nEF8aLp
| [ 0:00] @PREFIX=LVMTEST21414
| [ 0:00] ## LVMCONF: activation {
| [ 0:00] ## LVMCONF:     checks = 1
| [ 0:00] ## LVMCONF:     monitoring = 0
| [ 0:00] ## LVMCONF:     polling_interval = 1
| [ 0:00] ## LVMCONF:     raid_region_size = 512
| [ 0:00] ## LVMCONF:     retry_deactivation = 1
| [ 0:00] ## LVMCONF:     snapshot_autoextend_percent = 50
| [ 0:00] ## LVMCONF:     snapshot_autoextend_threshold = 50
| [ 0:00] ## LVMCONF:     udev_rules = 1
| [ 0:00] ## LVMCONF:     udev_sync = 1
| [ 0:00] ## LVMCONF:     verify_udev_operations = 1
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: allocation {
| [ 0:00] ## LVMCONF:     wipe_signatures_when_zeroing_new_lvs = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: backup {
| [ 0:00] ## LVMCONF:     archive = 0
| [ 0:00] ## LVMCONF:     backup = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: devices {
| [ 0:00] ## LVMCONF:     cache_dir = "@TESTDIR@/etc"
| [ 0:00] ## LVMCONF:     default_data_alignment = 1
| [ 0:00] ## LVMCONF:     dir = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     filter = "a|.*|"
| [ 0:00] ## LVMCONF:     global_filter = [ "a|@TESTDIR@/dev/mapper/@PREFIX@.*pv[0-9_]*$|", "r|.*|" ]
| [ 0:00] ## LVMCONF:     md_component_detection  = 0
| [ 0:00] ## LVMCONF:     scan = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     sysfs_scan = 1
| [ 0:00] ## LVMCONF:     write_cache_state = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: dmeventd {
| [ 0:00] ## LVMCONF:     executable = "/sources/boot/LVM2.2.02.177/test/lib/dmeventd"
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: global {
| [ 0:00] ## LVMCONF:     abort_on_internal_errors = 1
| [ 0:00] ## LVMCONF:     cache_check_executable = "/usr/sbin/cache_check"
| [ 0:00] ## LVMCONF:     cache_dump_executable = "/usr/sbin/cache_dump"
| [ 0:00] ## LVMCONF:     cache_repair_executable = "/usr/sbin/cache_repair"
| [ 0:00] ## LVMCONF:     detect_internal_vg_cache_corruption = 1
| [ 0:00] ## LVMCONF:     fallback_to_local_locking = 0
| [ 0:00] ## LVMCONF:     fsadm_executable = "/sources/boot/LVM2.2.02.177/test/lib/fsadm"
| [ 0:00] ## LVMCONF:     library_dir = "@TESTDIR@/lib"
| [ 0:00] ## LVMCONF:     locking_dir = "@TESTDIR@/var/lock/lvm"
| [ 0:00] ## LVMCONF:     locking_type=1
| [ 0:00] ## LVMCONF:     notify_dbus = 0
| [ 0:00] ## LVMCONF:     si_unit_consistency = 1
| [ 0:00] ## LVMCONF:     thin_check_executable = "/usr/sbin/thin_check"
| [ 0:00] ## LVMCONF:     thin_dump_executable = "/usr/sbin/thin_dump"
| [ 0:00] ## LVMCONF:     thin_repair_executable = "/usr/sbin/thin_repair"
| [ 0:00] ## LVMCONF:     use_lvmetad = 0
| [ 0:00] ## LVMCONF:     use_lvmlockd = 0
| [ 0:00] ## LVMCONF:     use_lvmpolld = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: log {
| [ 0:00] ## LVMCONF:     activation = 1
| [ 0:00] ## LVMCONF:     file = "@TESTDIR@/debug.log"
| [ 0:00] ## LVMCONF:     indent = 1
| [ 0:00] ## LVMCONF:     level = 9
| [ 0:00] ## LVMCONF:     overwrite = 1
| [ 0:00] ## LVMCONF:     syslog = 0
| [ 0:00] ## LVMCONF:     verbose = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] <======== Processing test: "select-tools.sh" ========>
| [ 0:00] 
| [ 0:00] aux prepare_pvs 4 12
| [ 0:00] #select-tools.sh:18+ aux prepare_pvs 4 12
| [ 0:00] ## preparing loop device....ok (/dev/loop0)
| [ 0:00] ## preparing 4 devices...lib/utils: line 212: DM_UDEV_COOKIE: unbound variable
| [ 0:00] set +vx; STACKTRACE; set -vx
| [ 0:00] ##select-tools.sh:18+ set +vx
| [ 0:00] ## - /lfskernel/sources/boot/LVM2.2.02.177/test/shell/select-tools.sh:18
| [ 0:00] ## 1 STACKTRACE() called from /lfskernel/sources/boot/LVM2.2.02.177/test/shell/select-tools.sh:18
| [ 0:00] <======== Info ========>
| [ 0:00] ## DMINFO:   Name             Maj Min Stat Open Targ Event  UUID                                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv3  253   4 L--w    0    1      0 TEST-@PREFIX@pv3                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv2  253   3 L--w    0    1      0 TEST-@PREFIX@pv2                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv1  253   6 L--w    0    1      0 TEST-@PREFIX@pv1                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv4  253   5 L--w    0    1      0 TEST-@PREFIX@pv4                                                
| [ 0:00] <======== Active table ========>
| [ 0:00] ## DMTABLE:  @PREFIX@pv3: 0 24576 linear 7:0 51200
| [ 0:00] ## DMTABLE:  @PREFIX@pv2: 0 24576 linear 7:0 26624
| [ 0:00] ## DMTABLE:  @PREFIX@pv1: 0 24576 linear 7:0 2048
| [ 0:00] ## DMTABLE:  @PREFIX@pv4: 0 24576 linear 7:0 75776
| [ 0:00] <======== Inactive table ========>
| [ 0:00] ## DMITABLE: @PREFIX@pv3: 
| [ 0:00] ## DMITABLE: @PREFIX@pv2: 
| [ 0:00] ## DMITABLE: @PREFIX@pv1: 
| [ 0:00] ## DMITABLE: @PREFIX@pv4: 
| [ 0:00] <======== Status ========>
| [ 0:00] ## DMSTATUS: @PREFIX@pv3: 0 24576 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv2: 0 24576 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv1: 0 24576 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv4: 0 24576 linear 
| [ 0:00] <======== Tree ========>
| [ 0:00] ## DMTREE:   @PREFIX@pv3 (253:4)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   @PREFIX@pv2 (253:3)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   @PREFIX@pv1 (253:6)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   LFS_vg-lfs (253:2)
| [ 0:00] ## DMTREE:    `- (8:16)
| [ 0:00] ## DMTREE:   centos-swap (253:1)
| [ 0:00] ## DMTREE:    `- (8:2)
| [ 0:00] ## DMTREE:   @PREFIX@pv4 (253:5)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   centos-root (253:0)
| [ 0:00] ## DMTREE:    `- (8:2)
| [ 0:00] <======== Recursive list of @TESTDIR@/dev ========>
| [ 0:00] ## LSLR:	@TESTDIR@/dev:
| [ 0:00] ## LSLR:	total 4
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 0 Feb 21 02:27 loop0
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 1 Feb 21 02:27 loop1
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 2 Feb 21 02:27 loop2
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 3 Feb 21 02:27 loop3
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 4 Feb 21 02:27 loop4
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 5 Feb 21 02:27 loop5
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 6 Feb 21 02:27 loop6
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 7 Feb 21 02:27 loop7
| [ 0:00] ## LSLR:	drwxr-xr-x 2 root root 4096 Feb 21 02:27 mapper
| [ 0:00] ## LSLR:	crw-r--r-- 1 root root 1, 3 Feb 21 02:27 testnull
| [ 0:00] ## LSLR:	
| [ 0:00] ## LSLR:	@TESTDIR@/dev/mapper:
| [ 0:00] ## LSLR:	total 0
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   6 Feb 21 02:27 @PREFIX@pv1
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   3 Feb 21 02:27 @PREFIX@pv2
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   4 Feb 21 02:27 @PREFIX@pv3
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   5 Feb 21 02:27 @PREFIX@pv4
| [ 0:00] ## LSLR:	crw------- 1 root root  10, 236 Feb 21 02:27 control
| [ 0:00] <======== Udev DB content ========>
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-0
| [ 0:00] ## UDEV:	N: dm-0
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-0
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-0
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=0
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-1
| [ 0:00] ## UDEV:	N: dm-1
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-1
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-1
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=1
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-2
| [ 0:00] ## UDEV:	N: dm-2
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-2
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-2
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=2
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-3
| [ 0:00] ## UDEV:	N: dm-3
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-3
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-3
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=3
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-4
| [ 0:00] ## UDEV:	N: dm-4
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-4
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-4
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=4
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-5
| [ 0:00] ## UDEV:	N: dm-5
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-5
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-5
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=5
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-6
| [ 0:00] ## UDEV:	N: dm-6
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-6
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-6
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=6
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/loop0
| [ 0:00] ## UDEV:	N: loop0
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/loop0
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/loop0
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=7
| [ 0:00] ## UDEV:	E: MINOR=0
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] <======== Script file "select-tools.sh" ========>
| [ 0:00] ## Line: 1 	 #!/usr/bin/env bash
| [ 0:00] ## Line: 2 	 
| [ 0:00] ## Line: 3 	 # Copyright (C) 2015 Red Hat, Inc. All rights reserved.
| [ 0:00] ## Line: 4 	 #
| [ 0:00] ## Line: 5 	 # This copyrighted material is made available to anyone wishing to use,
| [ 0:00] ## Line: 6 	 # modify, copy, or redistribute it subject to the terms and conditions
| [ 0:00] ## Line: 7 	 # of the GNU General Public License v.2.
| [ 0:00] ## Line: 8 	 #
| [ 0:00] ## Line: 9 	 # You should have received a copy of the GNU General Public License
| [ 0:00] ## Line: 10 	 # along with this program; if not, write to the Free Software Foundation,
| [ 0:00] ## Line: 11 	 # Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA
| [ 0:00] ## Line: 12 	 
| [ 0:00] ## Line: 13 	 SKIP_WITH_LVMLOCKD=1
| [ 0:00] ## Line: 14 	 SKIP_WITH_LVMPOLLD=1
| [ 0:00] ## Line: 15 	 
| [ 0:00] ## Line: 16 	 . lib/inittest
| [ 0:00] ## Line: 17 	 
| [ 0:00] ## Line: 18 	 aux prepare_pvs 4 12
| [ 0:00] ## Line: 19 	 
| [ 0:00] ## Line: 20 	 vgcreate -s 4m $vg1 "$dev1" "$dev2"
| [ 0:00] ## Line: 21 	 vgcreate -s 4m $vg2 "$dev3" "$dev4"
| [ 0:00] ## Line: 22 	 
| [ 0:00] ## Line: 23 	 # vg1/lv1 mapped onto dev1
| [ 0:00] ## Line: 24 	 lvcreate -l1 -n "lv1" $vg1 "$dev1"
| [ 0:00] ## Line: 25 	 
| [ 0:00] ## Line: 26 	 # vg1/lv2 mapped onto dev1 and dev2 (2 segments)
| [ 0:00] ## Line: 27 	 lvcreate -l3 -n "lv2" $vg1 "$dev1" "$dev2"
| [ 0:00] ## Line: 28 	 
| [ 0:00] ## Line: 29 	 # vg2/lv3 mapped onto dev3
| [ 0:00] ## Line: 30 	 lvcreate -l1 -n "lv3" $vg2 "$dev3"
| [ 0:00] ## Line: 31 	 
| [ 0:00] ## Line: 32 	 # vg2/lv4 mapped onto dev3
| [ 0:00] ## Line: 33 	 lvcreate -l1 -n "lv4" $vg2 "$dev3" "$dev4"
| [ 0:00] ## Line: 34 	 
| [ 0:00] ## Line: 35 	 # vg2/lv1 mapped onto "$dev4" (same LV name as vg1/lv1)
| [ 0:00] ## Line: 36 	 lvcreate -l1 -n "lv1" $vg2 "$dev4"
| [ 0:00] ## Line: 37 	 
| [ 0:00] ## Line: 38 	 ###########################################
| [ 0:00] ## Line: 39 	 # exercise process_each_vg with selection #
| [ 0:00] ## Line: 40 	 ###########################################
| [ 0:00] ## Line: 41 	 
| [ 0:00] ## Line: 42 	 # select contains VGS field
| [ 0:00] ## Line: 43 	 # direct vg name match
| [ 0:00] ## Line: 44 	 vgchange --addtag 101 -S "vg_name=$vg1"
| [ 0:00] ## Line: 45 	 check vg_field $vg1 vg_tags 101
| [ 0:00] ## Line: 46 	 not check vg_field $vg2 vg_tags 101
| [ 0:00] ## Line: 47 	 vgchange --deltag 101
| [ 0:00] ## Line: 48 	 
| [ 0:00] ## Line: 49 	 # select contains LVS fiels
| [ 0:00] ## Line: 50 	 vgchange --addtag 102 -S "lv_name=lv2"
| [ 0:00] ## Line: 51 	 check vg_field $vg1 vg_tags 102
| [ 0:00] ## Line: 52 	 not check vg_field $vg2 vg_tags 102
| [ 0:00] ## Line: 53 	 vgchange --deltag 102
| [ 0:00] ## Line: 54 	 vgchange --addtag 103 -S "lv_name=lv1"
| [ 0:00] ## Line: 55 	 check vg_field $vg1 vg_tags 103
| [ 0:00] ## Line: 56 	 check vg_field $vg2 vg_tags 103
| [ 0:00] ## Line: 57 	 vgchange --deltag 103
| [ 0:00] ## Line: 58 	 
| [ 0:00] ## Line: 59 	 # select contains SEGS field
| [ 0:00] ## Line: 60 	 vgchange --addtag 104 -S 'seg_start=8m'
| [ 0:00] ## Line: 61 	 check vg_field $vg1 vg_tags 104
| [ 0:00] ## Line: 62 	 not check vg_field $vg2 vg_tags 104
| [ 0:00] ## Line: 63 	 vgchange --deltag 104
| [ 0:00] ## Line: 64 	 vgchange --addtag 105 -S "seg_start=0m"
| [ 0:00] ## Line: 65 	 check vg_field $vg1 vg_tags 105
| [ 0:00] ## Line: 66 	 check vg_field $vg2 vg_tags 105
| [ 0:00] ## Line: 67 	 vgchange --deltag 105
| [ 0:00] ## Line: 68 	 
| [ 0:00] ## Line: 69 	 # select contains PVS field
| [ 0:00] ## Line: 70 	 vgchange --addtag 106 -S pv_name="$dev1"
| [ 0:00] ## Line: 71 	 check vg_field $vg1 vg_tags 106
| [ 0:00] ## Line: 72 	 not check vg_field $vg2 vg_tags 106
| [ 0:00] ## Line: 73 	 vgchange --deltag 106
| [ 0:00] ## Line: 74 	 vgchange --addtag 107 -S "pv_size>0m"
| [ 0:00] ## Line: 75 	 check vg_field $vg1 vg_tags 107
| [ 0:00] ## Line: 76 	 check vg_field $vg2 vg_tags 107
| [ 0:00] ## Line: 77 	 vgchange --deltag 107
| [ 0:00] ## Line: 78 	 
| [ 0:00] ## Line: 79 	 # select contains PVSEGS field
| [ 0:00] ## Line: 80 	 vgchange --addtag 108 -S "pvseg_size=2"
| [ 0:00] ## Line: 81 	 check vg_field $vg1 vg_tags 108
| [ 0:00] ## Line: 82 	 not check vg_field $vg2 vg_tags 108
| [ 0:00] ## Line: 83 	 vgchange --deltag 108
| [ 0:00] ## Line: 84 	 vgchange --addtag 109 -S "pvseg_size=1"
| [ 0:00] ## Line: 85 	 check vg_field $vg1 vg_tags 109
| [ 0:00] ## Line: 86 	 check vg_field $vg2 vg_tags 109
| [ 0:00] ## Line: 87 	 vgchange --deltag 109
| [ 0:00] ## Line: 88 	 
| [ 0:00] ## Line: 89 	 # if VG name or tag is supplied together with the
| [ 0:00] ## Line: 90 	 # selection, the result is an intersection of both
| [ 0:00] ## Line: 91 	 vgchange --addtag 110 -S "vg_name=$vg1" $vg2
| [ 0:00] ## Line: 92 	 not check vg_field $vg1 vg_tags 110
| [ 0:00] ## Line: 93 	 not check vg_field $vg2 vg_tags 110
| [ 0:00] ## Line: 94 	 vgchange --deltag 110
| [ 0:00] ## Line: 95 	 vgchange --addtag 111 -S "vg_name=$vg1" $vg1
| [ 0:00] ## Line: 96 	 check vg_field $vg1 vg_tags 111
| [ 0:00] ## Line: 97 	 not check vg_field $vg2 vg_tags 111
| [ 0:00] ## Line: 98 	 vgchange --deltag 111
| [ 0:00] ## Line: 99 	 vgchange --addtag "tag" $vg1
| [ 0:00] ## Line: 100 	 vgchange --addtag 112 -S "vg_name=$vg2" @tag
| [ 0:00] ## Line: 101 	 not check vg_field $vg1 vg_tags "tag,112"
| [ 0:00] ## Line: 102 	 not check vg_field $vg2 vg_tags "tag,112"
| [ 0:00] ## Line: 103 	 vgchange --deltag 112
| [ 0:00] ## Line: 104 	 vgchange --addtag 113 -S "vg_name=$vg1" @tag
| [ 0:00] ## Line: 105 	 check vg_field $vg1 vg_tags "113,tag"
| [ 0:00] ## Line: 106 	 not check vg_field $vg2 vg_tags "113,tag"
| [ 0:00] ## Line: 107 	 vgchange --deltag 113 --deltag tag
| [ 0:00] ## Line: 108 	 
| [ 0:00] ## Line: 109 	 ###########################################
| [ 0:00] ## Line: 110 	 # exercise process_each_lv with selection #
| [ 0:00] ## Line: 111 	 ###########################################
| [ 0:00] ## Line: 112 	 
| [ 0:00] ## Line: 113 	 # select contains VGS field
| [ 0:00] ## Line: 114 	 lvchange --addtag 201 -S "vg_name=$vg1"
| [ 0:00] ## Line: 115 	 check lv_field $vg1/lv1 lv_tags 201
| [ 0:00] ## Line: 116 	 check lv_field $vg1/lv2 lv_tags 201
| [ 0:00] ## Line: 117 	 not check lv_field $vg2/lv3 lv_tags 201
| [ 0:00] ## Line: 118 	 not check lv_field $vg2/lv4 lv_tags 201
| [ 0:00] ## Line: 119 	 not check lv_field $vg2/lv1 lv_tags 201
| [ 0:00] ## Line: 120 	 lvchange --deltag 201 $vg1 $vg2
| [ 0:00] ## Line: 121 	 
| [ 0:00] ## Line: 122 	 # select contains LVS fiels
| [ 0:00] ## Line: 123 	 lvchange --addtag 202 -S "lv_name=lv2"
| [ 0:00] ## Line: 124 	 not check lv_field $vg1/lv1 lv_tags 202
| [ 0:00] ## Line: 125 	 check lv_field $vg1/lv2 lv_tags 202
| [ 0:00] ## Line: 126 	 not check lv_field $vg2/lv3 lv_tags 202
| [ 0:00] ## Line: 127 	 not check lv_field $vg2/lv4 lv_tags 202
| [ 0:00] ## Line: 128 	 not check lv_field $vg2/lv1 lv_tags 202
| [ 0:00] ## Line: 129 	 lvchange --deltag 202 $vg1 $vg2
| [ 0:00] ## Line: 130 	 lvchange --addtag 203 -S "lv_name=lv1"
| [ 0:00] ## Line: 131 	 check lv_field $vg1/lv1 lv_tags 203
| [ 0:00] ## Line: 132 	 not check lv_field $vg1/lv2 lv_tags 203
| [ 0:00] ## Line: 133 	 not check lv_field $vg2/lv3 lv_tags 203
| [ 0:00] ## Line: 134 	 not check lv_field $vg2/lv4 lv_tags 203
| [ 0:00] ## Line: 135 	 check lv_field $vg2/lv1 lv_tags 203
| [ 0:00] ## Line: 136 	 lvchange --deltag 203 $vg1 $vg2
| [ 0:00] ## Line: 137 	 
| [ 0:00] ## Line: 138 	 # select contains SEGS field
| [ 0:00] ## Line: 139 	 lvchange --addtag 204 -S "seg_start=8m"
| [ 0:00] ## Line: 140 	 not check lv_field $vg1/lv1 lv_tags 204
| [ 0:00] ## Line: 141 	 check lv_field $vg1/lv2 lv_tags 204
| [ 0:00] ## Line: 142 	 not check lv_field $vg2/lv3 lv_tags 204
| [ 0:00] ## Line: 143 	 not check lv_field $vg2/lv4 lv_tags 204
| [ 0:00] ## Line: 144 	 not check lv_field $vg2/lv1 lv_tags 204
| [ 0:00] ## Line: 145 	 lvchange --deltag 204 $vg1 $vg2
| [ 0:00] ## Line: 146 	 
| [ 0:00] ## Line: 147 	 # select contains PVS field - COMBINATION NOT ALLOWED!
| [ 0:00] ## Line: 148 	 lvchange --addtag 205 -S pv_name="$dev1" 2>err
| [ 0:00] ## Line: 149 	 grep "Can't report LV and PV fields at the same time" err
| [ 0:00] ## Line: 150 	 grep "Selection failed for LV" err
| [ 0:00] ## Line: 151 	 not check lv_field $vg1/lv1 lv_tags 205
| [ 0:00] ## Line: 152 	 not check lv_field $vg1/lv2 lv_tags 205
| [ 0:00] ## Line: 153 	 not check lv_field $vg2/lv3 lv_tags 205
| [ 0:00] ## Line: 154 	 not check lv_field $vg2/lv4 lv_tags 205
| [ 0:00] ## Line: 155 	 not check lv_field $vg2/lv1 lv_tags 205
| [ 0:00] ## Line: 156 	 
| [ 0:00] ## Line: 157 	 # select contains PVSEGS field - COMBINATION NOT ALLOWED!
| [ 0:00] ## Line: 158 	 lvchange --addtag 206 -S "pvseg_start>=0" 2>err
| [ 0:00] ## Line: 159 	 grep "Can't report LV and PV fields at the same time" err
| [ 0:00] ## Line: 160 	 grep "Selection failed for LV" err
| [ 0:00] ## Line: 161 	 not check lv_field $vg1/lv1 lv_tags 206
| [ 0:00] ## Line: 162 	 not check lv_field $vg1/lv2 lv_tags 206
| [ 0:00] ## Line: 163 	 not check lv_field $vg2/lv3 lv_tags 206
| [ 0:00] ## Line: 164 	 not check lv_field $vg2/lv4 lv_tags 206
| [ 0:00] ## Line: 165 	 not check lv_field $vg2/lv1 lv_tags 206
| [ 0:00] ## Line: 166 	 
| [ 0:00] ## Line: 167 	 # if LV name or tag is supplied together with the
| [ 0:00] ## Line: 168 	 # selection, the result is an intersection of both
| [ 0:00] ## Line: 169 	 lvchange --addtag 207 -S "lv_name=lv2" $vg1/lv1
| [ 0:00] ## Line: 170 	 not check lv_field $vg1/lv1 lv_tags 207
| [ 0:00] ## Line: 171 	 not check lv_field $vg1/lv2 lv_tags 207
| [ 0:00] ## Line: 172 	 not check lv_field $vg2/lv3 lv_tags 207
| [ 0:00] ## Line: 173 	 not check lv_field $vg2/lv4 lv_tags 207
| [ 0:00] ## Line: 174 	 not check lv_field $vg2/lv1 lv_tags 207
| [ 0:00] ## Line: 175 	 lvchange --deltag 207 $vg1 $vg2
| [ 0:00] ## Line: 176 	 lvchange --addtag 208 -S "lv_name=lv2" $vg1/lv2
| [ 0:00] ## Line: 177 	 not check lv_field $vg1/lv1 lv_tags 208
| [ 0:00] ## Line: 178 	 check lv_field $vg1/lv2 lv_tags 208
| [ 0:00] ## Line: 179 	 not check lv_field $vg2/lv3 lv_tags 208
| [ 0:00] ## Line: 180 	 not check lv_field $vg2/lv4 lv_tags 208
| [ 0:00] ## Line: 181 	 not check lv_field $vg2/lv1 lv_tags 208
| [ 0:00] ## Line: 182 	 lvchange --deltag 208 $vg1 $vg2
| [ 0:00] ## Line: 183 	 lvchange --addtag "tag" $vg1/lv2
| [ 0:00] ## Line: 184 	 lvchange --addtag 209 -S "lv_name=lv3" @tag
| [ 0:00] ## Line: 185 	 not check lv_field $vg1/lv1 lv_tags "209,tag"
| [ 0:00] ## Line: 186 	 not check lv_field $vg1/lv2 lv_tags "209,tag"
| [ 0:00] ## Line: 187 	 not check lv_field $vg2/lv3 lv_tags "209,tag"
| [ 0:00] ## Line: 188 	 not check lv_field $vg2/lv4 lv_tags "209,tag"
| [ 0:00] ## Line: 189 	 not check lv_field $vg2/lv1 lv_tags "209,tag"
| [ 0:00] ## Line: 190 	 lvchange --deltag 209 $vg1 $vg2
| [ 0:00] ## Line: 191 	 lvchange --addtag 210 -S "lv_name=lv2" @tag
| [ 0:00] ## Line: 192 	 not check lv_field $vg1/lv1 lv_tags "210,tag"
| [ 0:00] ## Line: 193 	 check lv_field $vg1/lv2 lv_tags "210,tag"
| [ 0:00] ## Line: 194 	 not check lv_field $vg2/lv3 lv_tags "210,tag"
| [ 0:00] ## Line: 195 	 not check lv_field $vg2/lv4 lv_tags "210,tag"
| [ 0:00] ## Line: 196 	 not check lv_field $vg2/lv1 lv_tags "210,tag"
| [ 0:00] ## Line: 197 	 lvchange --deltag 210 --deltag tag $vg1 $vg2
| [ 0:00] ## Line: 198 	 
| [ 0:00] ## Line: 199 	 ###########################################
| [ 0:00] ## Line: 200 	 # exercise process_each_pv with selection #
| [ 0:00] ## Line: 201 	 ###########################################
| [ 0:00] ## Line: 202 	 
| [ 0:00] ## Line: 203 	 # select contains VGS field
| [ 0:00] ## Line: 204 	 pvchange --addtag 301 -S "vg_name=$vg1"
| [ 0:00] ## Line: 205 	 check pv_field "$dev1" pv_tags 301
| [ 0:00] ## Line: 206 	 check pv_field "$dev2" pv_tags 301
| [ 0:00] ## Line: 207 	 not check pv_field "$dev3" pv_tags 301
| [ 0:00] ## Line: 208 	 not check pv_field "$dev4" pv_tags 301
| [ 0:00] ## Line: 209 	 pvchange -a --deltag 301
| [ 0:00] ## Line: 210 	 
| [ 0:00] ## Line: 211 	 # select contains LVS field
| [ 0:00] ## Line: 212 	 pvchange --addtag 302 -S "lv_name=lv2"
| [ 0:00] ## Line: 213 	 check pv_field "$dev1" pv_tags 302
| [ 0:00] ## Line: 214 	 check pv_field "$dev2" pv_tags 302
| [ 0:00] ## Line: 215 	 not check pv_field "$dev3" pv_tags 302
| [ 0:00] ## Line: 216 	 not check pv_field "$dev4" pv_tags 302
| [ 0:00] ## Line: 217 	 pvchange -a --deltag 302
| [ 0:00] ## Line: 218 	 
| [ 0:00] ## Line: 219 	 # select contains SEGS field
| [ 0:00] ## Line: 220 	 pvchange --addtag 303 -S "seg_start=8m"
| [ 0:00] ## Line: 221 	 check pv_field "$dev1" pv_tags 303
| [ 0:00] ## Line: 222 	 not check pv_field "$dev2" pv_tags 303
| [ 0:00] ## Line: 223 	 not check pv_field "$dev3" pv_tags 303
| [ 0:00] ## Line: 224 	 not check pv_field "$dev4" pv_tags 303
| [ 0:00] ## Line: 225 	 pvchange -a --deltag 303
| [ 0:00] ## Line: 226 	 
| [ 0:00] ## Line: 227 	 # select contains PVS field
| [ 0:00] ## Line: 228 	 pvchange --addtag 304 -S pv_name="$dev1"
| [ 0:00] ## Line: 229 	 check pv_field "$dev1" pv_tags 304
| [ 0:00] ## Line: 230 	 not check pv_field "$dev2" pv_tags 304
| [ 0:00] ## Line: 231 	 not check pv_field "$dev3" pv_tags 304
| [ 0:00] ## Line: 232 	 not check pv_field "$dev4" pv_tags 304
| [ 0:00] ## Line: 233 	 pvchange -a --deltag 304
| [ 0:00] ## Line: 234 	 
| [ 0:00] ## Line: 235 	 # select contains PVSEGS field
| [ 0:00] ## Line: 236 	 pvchange --addtag 305 -S "pvseg_size=2"
| [ 0:00] ## Line: 237 	 not check pv_field "$dev1" pv_tags 305
| [ 0:00] ## Line: 238 	 check pv_field "$dev2" pv_tags 305
| [ 0:00] ## Line: 239 	 not check pv_field "$dev3" pv_tags 305
| [ 0:00] ## Line: 240 	 not check pv_field "$dev4" pv_tags 305
| [ 0:00] ## Line: 241 	 pvchange -a --deltag 305
| [ 0:00] ## Line: 242 	 
| [ 0:00] ## Line: 243 	 # if PV name or tag is supplied together with the
| [ 0:00] ## Line: 244 	 # selection, the result is an intersection of both
| [ 0:00] ## Line: 245 	 pvchange --addtag 306 -S pv_name="$dev1" "$dev2"
| [ 0:00] ## Line: 246 	 not check pv_field "$dev1" pv_tags 306
| [ 0:00] ## Line: 247 	 not check pv_field "$dev2" pv_tags 306
| [ 0:00] ## Line: 248 	 not check pv_field "$dev3" pv_tags 306
| [ 0:00] ## Line: 249 	 not check pv_field "$dev4" pv_tags 306
| [ 0:00] ## Line: 250 	 pvchange -a --deltag 306
| [ 0:00] ## Line: 251 	 pvchange --addtag 307 -S pv_name="$dev1" "$dev1"
| [ 0:00] ## Line: 252 	 check pv_field "$dev1" pv_tags 307
| [ 0:00] ## Line: 253 	 not check pv_field "$dev2" pv_tags 307
| [ 0:00] ## Line: 254 	 not check pv_field "$dev3" pv_tags 307
| [ 0:00] ## Line: 255 	 not check pv_field "$dev4" pv_tags 307
| [ 0:00] ## Line: 256 	 pvchange -a --deltag 307
| [ 0:00] ## Line: 257 	 pvchange --addtag "tag" "$dev1"
| [ 0:00] ## Line: 258 	 pvchange --addtag 308 -S pv_name="$dev2" @tag
| [ 0:00] ## Line: 259 	 not check pv_field "$dev1" pv_tags "308,tag"
| [ 0:00] ## Line: 260 	 not check pv_field "$dev2" pv_tags "308,tag"
| [ 0:00] ## Line: 261 	 not check pv_field "$dev3" pv_tags "308,tag"
| [ 0:00] ## Line: 262 	 not check pv_field "$dev4" pv_tags "308,tag"
| [ 0:00] ## Line: 263 	 pvchange --deltag 308 "$dev1"
| [ 0:00] ## Line: 264 	 pvchange --addtag 309 -S pv_name="$dev1" @tag
| [ 0:00] ## Line: 265 	 check pv_field "$dev1" pv_tags "309,tag"
| [ 0:00] ## Line: 266 	 not check pv_field "$dev2" pv_tags "309,tag"
| [ 0:00] ## Line: 267 	 not check pv_field "$dev3" pv_tags "309,tag"
| [ 0:00] ## Line: 268 	 not check pv_field "$dev4" pv_tags "309,tag"
| [ 0:00] ## Line: 269 	 pvchange -a --deltag 309 --deltag tag
| [ 0:00] ## Line: 270 	 
| [ 0:00] ## Line: 271 	 #########################
| [ 0:00] ## Line: 272 	 # special cases to test #
| [ 0:00] ## Line: 273 	 #########################
| [ 0:00] ## Line: 274 	 
| [ 0:00] ## Line: 275 	 # if calling vgremove, make sure we're doing selection per-VG, not per-LV
| [ 0:00] ## Line: 276 	 # (vgremove calls process_each_vg with vgremove_single which itself
| [ 0:00] ## Line: 277 	 # iterates over LVs with process_each_lv_in_vg - so internally it actually
| [ 0:00] ## Line: 278 	 # operates per-LV, but we still need the selection to be done per-VG)
| [ 0:00] ## Line: 279 	 vgremove --yes -S 'lv_name=lv2' # should remove whole vg1, not just the lv2
| [ 0:00] ## Line: 280 	 vgremove --yes $vg2
| [ 0:00] aux teardown
| [ 0:00] #select-tools.sh:1+ aux teardown
| [ 0:00] ## teardown.........ok
###       failed: [ndev-vanilla] shell/select-tools.sh
###      skipped: [ndev-vanilla] shell/snapshot-autoumount-dmeventd.sh

| [ 0:00] Library version:   1.02.146 (2017-12-18)
| [ 0:00] Driver version:    4.35.0
| [ 0:00] Kernel is Linux localhost.localdomain 3.10.0-693.11.1.el7.x86_64 #1 SMP Mon Dec 4 23:52:40 UTC 2017 x86_64 GNU/Linux
| [ 0:00] Selinux mode is not installed.
| [ 0:00]               total        used        free      shared  buff/cache   available
| [ 0:00] Mem:           7822        1080        4142          10        2599        6434
| [ 0:00] Swap:          4095           0        4095
| [ 0:00] Filesystem      Size  Used Avail Use% Mounted on
| [ 0:00] /dev/sdc1        18G  8.4G  8.4G  50% /
| [ 0:00] /dev/sdd1        51G  6.1G   43G  13% /lfskernel
| [ 0:00] devtmpfs        3.9G     0  3.9G   0% /dev
| [ 0:00] tmpfs           3.9G     0  3.9G   0% /run
| [ 0:00] @TESTDIR=/tmp/LVMTEST21686.7phxObw7lk
| [ 0:00] @PREFIX=LVMTEST21686
| [ 0:00] ## LVMCONF: activation {
| [ 0:00] ## LVMCONF:     checks = 1
| [ 0:00] ## LVMCONF:     monitoring = 0
| [ 0:00] ## LVMCONF:     polling_interval = 1
| [ 0:00] ## LVMCONF:     raid_region_size = 512
| [ 0:00] ## LVMCONF:     retry_deactivation = 1
| [ 0:00] ## LVMCONF:     snapshot_autoextend_percent = 50
| [ 0:00] ## LVMCONF:     snapshot_autoextend_threshold = 50
| [ 0:00] ## LVMCONF:     udev_rules = 1
| [ 0:00] ## LVMCONF:     udev_sync = 1
| [ 0:00] ## LVMCONF:     verify_udev_operations = 1
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: allocation {
| [ 0:00] ## LVMCONF:     wipe_signatures_when_zeroing_new_lvs = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: backup {
| [ 0:00] ## LVMCONF:     archive = 0
| [ 0:00] ## LVMCONF:     backup = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: devices {
| [ 0:00] ## LVMCONF:     cache_dir = "@TESTDIR@/etc"
| [ 0:00] ## LVMCONF:     default_data_alignment = 1
| [ 0:00] ## LVMCONF:     dir = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     filter = "a|.*|"
| [ 0:00] ## LVMCONF:     global_filter = [ "a|@TESTDIR@/dev/mapper/@PREFIX@.*pv[0-9_]*$|", "r|.*|" ]
| [ 0:00] ## LVMCONF:     md_component_detection  = 0
| [ 0:00] ## LVMCONF:     scan = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     sysfs_scan = 1
| [ 0:00] ## LVMCONF:     write_cache_state = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: dmeventd {
| [ 0:00] ## LVMCONF:     executable = "/sources/boot/LVM2.2.02.177/test/lib/dmeventd"
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: global {
| [ 0:00] ## LVMCONF:     abort_on_internal_errors = 1
| [ 0:00] ## LVMCONF:     cache_check_executable = "/usr/sbin/cache_check"
| [ 0:00] ## LVMCONF:     cache_dump_executable = "/usr/sbin/cache_dump"
| [ 0:00] ## LVMCONF:     cache_repair_executable = "/usr/sbin/cache_repair"
| [ 0:00] ## LVMCONF:     detect_internal_vg_cache_corruption = 1
| [ 0:00] ## LVMCONF:     fallback_to_local_locking = 0
| [ 0:00] ## LVMCONF:     fsadm_executable = "/sources/boot/LVM2.2.02.177/test/lib/fsadm"
| [ 0:00] ## LVMCONF:     library_dir = "@TESTDIR@/lib"
| [ 0:00] ## LVMCONF:     locking_dir = "@TESTDIR@/var/lock/lvm"
| [ 0:00] ## LVMCONF:     locking_type=1
| [ 0:00] ## LVMCONF:     notify_dbus = 0
| [ 0:00] ## LVMCONF:     si_unit_consistency = 1
| [ 0:00] ## LVMCONF:     thin_check_executable = "/usr/sbin/thin_check"
| [ 0:00] ## LVMCONF:     thin_dump_executable = "/usr/sbin/thin_dump"
| [ 0:00] ## LVMCONF:     thin_repair_executable = "/usr/sbin/thin_repair"
| [ 0:00] ## LVMCONF:     use_lvmetad = 0
| [ 0:00] ## LVMCONF:     use_lvmlockd = 0
| [ 0:00] ## LVMCONF:     use_lvmpolld = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: log {
| [ 0:00] ## LVMCONF:     activation = 1
| [ 0:00] ## LVMCONF:     file = "@TESTDIR@/debug.log"
| [ 0:00] ## LVMCONF:     indent = 1
| [ 0:00] ## LVMCONF:     level = 9
| [ 0:00] ## LVMCONF:     overwrite = 1
| [ 0:00] ## LVMCONF:     syslog = 0
| [ 0:00] ## LVMCONF:     verbose = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] <======== Processing test: "snapshot-cluster.sh" ========>
| [ 0:00] 
| [ 0:00] aux prepare_vg 1
| [ 0:00] #snapshot-cluster.sh:21+ aux prepare_vg 1
| [ 0:00] ## preparing loop device....ok (/dev/loop0)
| [ 0:00] ## preparing 1 devices...lib/utils: line 212: DM_UDEV_COOKIE: unbound variable
| [ 0:00] set +vx; STACKTRACE; set -vx
| [ 0:00] ##snapshot-cluster.sh:21+ set +vx
| [ 0:00] ## - /lfskernel/sources/boot/LVM2.2.02.177/test/shell/snapshot-cluster.sh:21
| [ 0:00] ## 1 STACKTRACE() called from /lfskernel/sources/boot/LVM2.2.02.177/test/shell/snapshot-cluster.sh:21
| [ 0:00] <======== Info ========>
| [ 0:00] ## DMINFO:   Name             Maj Min Stat Open Targ Event  UUID                                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv1  253   3 L--w    0    1      0 TEST-@PREFIX@pv1                                                
| [ 0:00] <======== Active table ========>
| [ 0:00] ## DMTABLE:  @PREFIX@pv1: 0 69632 linear 7:0 2048
| [ 0:00] <======== Inactive table ========>
| [ 0:00] ## DMITABLE: @PREFIX@pv1: 
| [ 0:00] <======== Status ========>
| [ 0:00] ## DMSTATUS: @PREFIX@pv1: 0 69632 linear 
| [ 0:00] <======== Tree ========>
| [ 0:00] ## DMTREE:   @PREFIX@pv1 (253:3)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   LFS_vg-lfs (253:2)
| [ 0:00] ## DMTREE:    `- (8:16)
| [ 0:00] ## DMTREE:   centos-swap (253:1)
| [ 0:00] ## DMTREE:    `- (8:2)
| [ 0:00] ## DMTREE:   centos-root (253:0)
| [ 0:00] ## DMTREE:    `- (8:2)
| [ 0:00] <======== Recursive list of @TESTDIR@/dev ========>
| [ 0:00] ## LSLR:	@TESTDIR@/dev:
| [ 0:00] ## LSLR:	total 4
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 0 Feb 21 02:27 loop0
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 1 Feb 21 02:27 loop1
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 2 Feb 21 02:27 loop2
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 3 Feb 21 02:27 loop3
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 4 Feb 21 02:27 loop4
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 5 Feb 21 02:27 loop5
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 6 Feb 21 02:27 loop6
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 7 Feb 21 02:27 loop7
| [ 0:00] ## LSLR:	drwxr-xr-x 2 root root 4096 Feb 21 02:27 mapper
| [ 0:00] ## LSLR:	crw-r--r-- 1 root root 1, 3 Feb 21 02:27 testnull
| [ 0:00] ## LSLR:	
| [ 0:00] ## LSLR:	@TESTDIR@/dev/mapper:
| [ 0:00] ## LSLR:	total 0
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   3 Feb 21 02:27 @PREFIX@pv1
| [ 0:00] ## LSLR:	crw------- 1 root root  10, 236 Feb 21 02:27 control
| [ 0:00] <======== Udev DB content ========>
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-0
| [ 0:00] ## UDEV:	N: dm-0
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-0
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-0
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=0
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-1
| [ 0:00] ## UDEV:	N: dm-1
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-1
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-1
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=1
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-2
| [ 0:00] ## UDEV:	N: dm-2
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-2
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-2
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=2
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-3
| [ 0:00] ## UDEV:	N: dm-3
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-3
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-3
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=3
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/loop0
| [ 0:00] ## UDEV:	N: loop0
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/loop0
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/loop0
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=7
| [ 0:00] ## UDEV:	E: MINOR=0
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] <======== Script file "snapshot-cluster.sh" ========>
| [ 0:00] ## Line: 1 	 #!/usr/bin/env bash
| [ 0:00] ## Line: 2 	 
| [ 0:00] ## Line: 3 	 # Copyright (C) 2014 Red Hat, Inc. All rights reserved.
| [ 0:00] ## Line: 4 	 #
| [ 0:00] ## Line: 5 	 # This copyrighted material is made available to anyone wishing to use,
| [ 0:00] ## Line: 6 	 # modify, copy, or redistribute it subject to the terms and conditions
| [ 0:00] ## Line: 7 	 # of the GNU General Public License v.2.
| [ 0:00] ## Line: 8 	 #
| [ 0:00] ## Line: 9 	 # You should have received a copy of the GNU General Public License
| [ 0:00] ## Line: 10 	 # along with this program; if not, write to the Free Software Foundation,
| [ 0:00] ## Line: 11 	 # Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA
| [ 0:00] ## Line: 12 	 
| [ 0:00] ## Line: 13 	 # Testing renaming snapshots in cluster
| [ 0:00] ## Line: 14 	 # https://bugzilla.redhat.com/show_bug.cgi?id=1136925
| [ 0:00] ## Line: 15 	 
| [ 0:00] ## Line: 16 	 SKIP_WITH_LVMLOCKD=1
| [ 0:00] ## Line: 17 	 SKIP_WITH_LVMPOLLD=1
| [ 0:00] ## Line: 18 	 
| [ 0:00] ## Line: 19 	 . lib/inittest
| [ 0:00] ## Line: 20 	 
| [ 0:00] ## Line: 21 	 aux prepare_vg 1
| [ 0:00] ## Line: 22 	 
| [ 0:00] ## Line: 23 	 lvcreate -aey -L1 -n $lv1 $vg
| [ 0:00] ## Line: 24 	 lvcreate -s -L1 -n $lv2 $vg/$lv1
| [ 0:00] ## Line: 25 	 lvrename  $vg/$lv2 $vg/$lv3
| [ 0:00] ## Line: 26 	 lvremove -f $vg/$lv1
| [ 0:00] ## Line: 27 	 
| [ 0:00] ## Line: 28 	 vgremove -f $vg
| [ 0:00] aux teardown
| [ 0:00] #snapshot-cluster.sh:1+ aux teardown
| [ 0:00] ## teardown.........ok
###       failed: [ndev-vanilla] shell/snapshot-cluster.sh

| [ 0:00] Library version:   1.02.146 (2017-12-18)
| [ 0:00] Driver version:    4.35.0
| [ 0:00] Kernel is Linux localhost.localdomain 3.10.0-693.11.1.el7.x86_64 #1 SMP Mon Dec 4 23:52:40 UTC 2017 x86_64 GNU/Linux
| [ 0:00] Selinux mode is not installed.
| [ 0:00]               total        used        free      shared  buff/cache   available
| [ 0:00] Mem:           7822        1080        4142          10        2599        6435
| [ 0:00] Swap:          4095           0        4095
| [ 0:00] Filesystem      Size  Used Avail Use% Mounted on
| [ 0:00] /dev/sdc1        18G  8.4G  8.4G  50% /
| [ 0:00] /dev/sdd1        51G  6.1G   43G  13% /lfskernel
| [ 0:00] devtmpfs        3.9G     0  3.9G   0% /dev
| [ 0:00] tmpfs           3.9G     0  3.9G   0% /run
| [ 0:00] @TESTDIR=/tmp/LVMTEST21852.Labh6C2rWQ
| [ 0:00] @PREFIX=LVMTEST21852
| [ 0:00] ## LVMCONF: activation {
| [ 0:00] ## LVMCONF:     checks = 1
| [ 0:00] ## LVMCONF:     monitoring = 0
| [ 0:00] ## LVMCONF:     polling_interval = 1
| [ 0:00] ## LVMCONF:     raid_region_size = 512
| [ 0:00] ## LVMCONF:     retry_deactivation = 1
| [ 0:00] ## LVMCONF:     snapshot_autoextend_percent = 50
| [ 0:00] ## LVMCONF:     snapshot_autoextend_threshold = 50
| [ 0:00] ## LVMCONF:     udev_rules = 1
| [ 0:00] ## LVMCONF:     udev_sync = 1
| [ 0:00] ## LVMCONF:     verify_udev_operations = 1
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: allocation {
| [ 0:00] ## LVMCONF:     wipe_signatures_when_zeroing_new_lvs = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: backup {
| [ 0:00] ## LVMCONF:     archive = 0
| [ 0:00] ## LVMCONF:     backup = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: devices {
| [ 0:00] ## LVMCONF:     cache_dir = "@TESTDIR@/etc"
| [ 0:00] ## LVMCONF:     default_data_alignment = 1
| [ 0:00] ## LVMCONF:     dir = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     filter = "a|.*|"
| [ 0:00] ## LVMCONF:     global_filter = [ "a|@TESTDIR@/dev/mapper/@PREFIX@.*pv[0-9_]*$|", "r|.*|" ]
| [ 0:00] ## LVMCONF:     md_component_detection  = 0
| [ 0:00] ## LVMCONF:     scan = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     sysfs_scan = 1
| [ 0:00] ## LVMCONF:     write_cache_state = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: dmeventd {
| [ 0:00] ## LVMCONF:     executable = "/sources/boot/LVM2.2.02.177/test/lib/dmeventd"
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: global {
| [ 0:00] ## LVMCONF:     abort_on_internal_errors = 1
| [ 0:00] ## LVMCONF:     cache_check_executable = "/usr/sbin/cache_check"
| [ 0:00] ## LVMCONF:     cache_dump_executable = "/usr/sbin/cache_dump"
| [ 0:00] ## LVMCONF:     cache_repair_executable = "/usr/sbin/cache_repair"
| [ 0:00] ## LVMCONF:     detect_internal_vg_cache_corruption = 1
| [ 0:00] ## LVMCONF:     fallback_to_local_locking = 0
| [ 0:00] ## LVMCONF:     fsadm_executable = "/sources/boot/LVM2.2.02.177/test/lib/fsadm"
| [ 0:00] ## LVMCONF:     library_dir = "@TESTDIR@/lib"
| [ 0:00] ## LVMCONF:     locking_dir = "@TESTDIR@/var/lock/lvm"
| [ 0:00] ## LVMCONF:     locking_type=1
| [ 0:00] ## LVMCONF:     notify_dbus = 0
| [ 0:00] ## LVMCONF:     si_unit_consistency = 1
| [ 0:00] ## LVMCONF:     thin_check_executable = "/usr/sbin/thin_check"
| [ 0:00] ## LVMCONF:     thin_dump_executable = "/usr/sbin/thin_dump"
| [ 0:00] ## LVMCONF:     thin_repair_executable = "/usr/sbin/thin_repair"
| [ 0:00] ## LVMCONF:     use_lvmetad = 0
| [ 0:00] ## LVMCONF:     use_lvmlockd = 0
| [ 0:00] ## LVMCONF:     use_lvmpolld = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: log {
| [ 0:00] ## LVMCONF:     activation = 1
| [ 0:00] ## LVMCONF:     file = "@TESTDIR@/debug.log"
| [ 0:00] ## LVMCONF:     indent = 1
| [ 0:00] ## LVMCONF:     level = 9
| [ 0:00] ## LVMCONF:     overwrite = 1
| [ 0:00] ## LVMCONF:     syslog = 0
| [ 0:00] ## LVMCONF:     verbose = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] <======== Processing test: "snapshot-lvm1.sh" ========>
| [ 0:00] 
| [ 0:00] aux prepare_devs 2
| [ 0:00] #snapshot-lvm1.sh:21+ aux prepare_devs 2
| [ 0:00] ## preparing loop device....ok (/dev/loop0)
| [ 0:00] ## preparing 2 devices...lib/utils: line 212: DM_UDEV_COOKIE: unbound variable
| [ 0:00] set +vx; STACKTRACE; set -vx
| [ 0:00] ##snapshot-lvm1.sh:21+ set +vx
| [ 0:00] ## - /lfskernel/sources/boot/LVM2.2.02.177/test/shell/snapshot-lvm1.sh:21
| [ 0:00] ## 1 STACKTRACE() called from /lfskernel/sources/boot/LVM2.2.02.177/test/shell/snapshot-lvm1.sh:21
| [ 0:00] <======== Info ========>
| [ 0:00] ## DMINFO:   Name             Maj Min Stat Open Targ Event  UUID                                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv2  253   3 L--w    0    1      0 TEST-@PREFIX@pv2                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv1  253   4 L--w    0    1      0 TEST-@PREFIX@pv1                                                
| [ 0:00] <======== Active table ========>
| [ 0:00] ## DMTABLE:  @PREFIX@pv2: 0 69632 linear 7:0 71680
| [ 0:00] ## DMTABLE:  @PREFIX@pv1: 0 69632 linear 7:0 2048
| [ 0:00] <======== Inactive table ========>
| [ 0:00] ## DMITABLE: @PREFIX@pv2: 
| [ 0:00] ## DMITABLE: @PREFIX@pv1: 
| [ 0:00] <======== Status ========>
| [ 0:00] ## DMSTATUS: @PREFIX@pv2: 0 69632 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv1: 0 69632 linear 
| [ 0:00] <======== Tree ========>
| [ 0:00] ## DMTREE:   @PREFIX@pv2 (253:3)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   LFS_vg-lfs (253:2)
| [ 0:00] ## DMTREE:    `- (8:16)
| [ 0:00] ## DMTREE:   @PREFIX@pv1 (253:4)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   centos-swap (253:1)
| [ 0:00] ## DMTREE:    `- (8:2)
| [ 0:00] ## DMTREE:   centos-root (253:0)
| [ 0:00] ## DMTREE:    `- (8:2)
| [ 0:00] <======== Recursive list of @TESTDIR@/dev ========>
| [ 0:00] ## LSLR:	@TESTDIR@/dev:
| [ 0:00] ## LSLR:	total 4
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 0 Feb 21 02:27 loop0
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 1 Feb 21 02:27 loop1
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 2 Feb 21 02:27 loop2
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 3 Feb 21 02:27 loop3
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 4 Feb 21 02:27 loop4
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 5 Feb 21 02:27 loop5
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 6 Feb 21 02:27 loop6
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 7 Feb 21 02:27 loop7
| [ 0:00] ## LSLR:	drwxr-xr-x 2 root root 4096 Feb 21 02:27 mapper
| [ 0:00] ## LSLR:	crw-r--r-- 1 root root 1, 3 Feb 21 02:27 testnull
| [ 0:00] ## LSLR:	
| [ 0:00] ## LSLR:	@TESTDIR@/dev/mapper:
| [ 0:00] ## LSLR:	total 0
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   4 Feb 21 02:27 @PREFIX@pv1
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   3 Feb 21 02:27 @PREFIX@pv2
| [ 0:00] ## LSLR:	crw------- 1 root root  10, 236 Feb 21 02:27 control
| [ 0:00] <======== Udev DB content ========>
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-0
| [ 0:00] ## UDEV:	N: dm-0
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-0
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-0
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=0
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-1
| [ 0:00] ## UDEV:	N: dm-1
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-1
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-1
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=1
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-2
| [ 0:00] ## UDEV:	N: dm-2
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-2
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-2
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=2
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-3
| [ 0:00] ## UDEV:	N: dm-3
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-3
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-3
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=3
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-4
| [ 0:00] ## UDEV:	N: dm-4
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-4
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-4
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=4
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/loop0
| [ 0:00] ## UDEV:	N: loop0
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/loop0
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/loop0
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=7
| [ 0:00] ## UDEV:	E: MINOR=0
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] <======== Script file "snapshot-lvm1.sh" ========>
| [ 0:00] ## Line: 1 	 #!/usr/bin/env bash
| [ 0:00] ## Line: 2 	 
| [ 0:00] ## Line: 3 	 # Copyright (C) 2013 Red Hat, Inc. All rights reserved.
| [ 0:00] ## Line: 4 	 #
| [ 0:00] ## Line: 5 	 # This copyrighted material is made available to anyone wishing to use,
| [ 0:00] ## Line: 6 	 # modify, copy, or redistribute it subject to the terms and conditions
| [ 0:00] ## Line: 7 	 # of the GNU General Public License v.2.
| [ 0:00] ## Line: 8 	 #
| [ 0:00] ## Line: 9 	 # You should have received a copy of the GNU General Public License
| [ 0:00] ## Line: 10 	 # along with this program; if not, write to the Free Software Foundation,
| [ 0:00] ## Line: 11 	 # Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA
| [ 0:00] ## Line: 12 	 
| [ 0:00] ## Line: 13 	 # regression test for lvmetad reporting error:
| [ 0:00] ## Line: 14 	 # Internal error: LV snap_with_lvm1_meta (00000000000000000000000000000001) missing from preload metadata
| [ 0:00] ## Line: 15 	 
| [ 0:00] ## Line: 16 	 SKIP_WITH_LVMLOCKD=1
| [ 0:00] ## Line: 17 	 SKIP_WITH_LVMPOLLD=1
| [ 0:00] ## Line: 18 	 
| [ 0:00] ## Line: 19 	 . lib/inittest
| [ 0:00] ## Line: 20 	 
| [ 0:00] ## Line: 21 	 aux prepare_devs 2
| [ 0:00] ## Line: 22 	 get_devs
| [ 0:00] ## Line: 23 	 
| [ 0:00] ## Line: 24 	 vgcreate --metadatatype 1 "$vg" "${DEVICES[@]}"
| [ 0:00] ## Line: 25 	 
| [ 0:00] ## Line: 26 	 # Make origin volume
| [ 0:00] ## Line: 27 	 lvcreate -ae -l5 $vg -n origin
| [ 0:00] ## Line: 28 	 
| [ 0:00] ## Line: 29 	 # Create a snap of origin
| [ 0:00] ## Line: 30 	 lvcreate -s $vg/origin -n snap_with_lvm1_meta -l4
| [ 0:00] ## Line: 31 	 
| [ 0:00] ## Line: 32 	 # Remove volume snapper/snap_with_lvm1_meta
| [ 0:00] ## Line: 33 	 lvremove -f $vg/snap_with_lvm1_meta
| [ 0:00] ## Line: 34 	 
| [ 0:00] ## Line: 35 	 vgremove -ff $vg
| [ 0:00] aux teardown
| [ 0:00] #snapshot-lvm1.sh:1+ aux teardown
| [ 0:00] ## teardown.........ok
###       failed: [ndev-vanilla] shell/snapshot-lvm1.sh

| [ 0:00] Library version:   1.02.146 (2017-12-18)
| [ 0:00] Driver version:    4.35.0
| [ 0:00] Kernel is Linux localhost.localdomain 3.10.0-693.11.1.el7.x86_64 #1 SMP Mon Dec 4 23:52:40 UTC 2017 x86_64 GNU/Linux
| [ 0:00] Selinux mode is not installed.
| [ 0:00]               total        used        free      shared  buff/cache   available
| [ 0:00] Mem:           7822        1080        4142          10        2599        6434
| [ 0:00] Swap:          4095           0        4095
| [ 0:00] Filesystem      Size  Used Avail Use% Mounted on
| [ 0:00] /dev/sdc1        18G  8.4G  8.4G  50% /
| [ 0:00] /dev/sdd1        51G  6.1G   43G  13% /lfskernel
| [ 0:00] devtmpfs        3.9G     0  3.9G   0% /dev
| [ 0:00] tmpfs           3.9G     0  3.9G   0% /run
| [ 0:00] @TESTDIR=/tmp/LVMTEST22029.V6WqACL8kM
| [ 0:00] @PREFIX=LVMTEST22029
| [ 0:00] ## LVMCONF: activation {
| [ 0:00] ## LVMCONF:     checks = 1
| [ 0:00] ## LVMCONF:     monitoring = 0
| [ 0:00] ## LVMCONF:     polling_interval = 1
| [ 0:00] ## LVMCONF:     raid_region_size = 512
| [ 0:00] ## LVMCONF:     retry_deactivation = 1
| [ 0:00] ## LVMCONF:     snapshot_autoextend_percent = 50
| [ 0:00] ## LVMCONF:     snapshot_autoextend_threshold = 50
| [ 0:00] ## LVMCONF:     udev_rules = 1
| [ 0:00] ## LVMCONF:     udev_sync = 1
| [ 0:00] ## LVMCONF:     verify_udev_operations = 1
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: allocation {
| [ 0:00] ## LVMCONF:     wipe_signatures_when_zeroing_new_lvs = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: backup {
| [ 0:00] ## LVMCONF:     archive = 0
| [ 0:00] ## LVMCONF:     backup = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: devices {
| [ 0:00] ## LVMCONF:     cache_dir = "@TESTDIR@/etc"
| [ 0:00] ## LVMCONF:     default_data_alignment = 1
| [ 0:00] ## LVMCONF:     dir = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     filter = "a|.*|"
| [ 0:00] ## LVMCONF:     global_filter = [ "a|@TESTDIR@/dev/mapper/@PREFIX@.*pv[0-9_]*$|", "r|.*|" ]
| [ 0:00] ## LVMCONF:     md_component_detection  = 0
| [ 0:00] ## LVMCONF:     scan = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     sysfs_scan = 1
| [ 0:00] ## LVMCONF:     write_cache_state = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: dmeventd {
| [ 0:00] ## LVMCONF:     executable = "/sources/boot/LVM2.2.02.177/test/lib/dmeventd"
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: global {
| [ 0:00] ## LVMCONF:     abort_on_internal_errors = 1
| [ 0:00] ## LVMCONF:     cache_check_executable = "/usr/sbin/cache_check"
| [ 0:00] ## LVMCONF:     cache_dump_executable = "/usr/sbin/cache_dump"
| [ 0:00] ## LVMCONF:     cache_repair_executable = "/usr/sbin/cache_repair"
| [ 0:00] ## LVMCONF:     detect_internal_vg_cache_corruption = 1
| [ 0:00] ## LVMCONF:     fallback_to_local_locking = 0
| [ 0:00] ## LVMCONF:     fsadm_executable = "/sources/boot/LVM2.2.02.177/test/lib/fsadm"
| [ 0:00] ## LVMCONF:     library_dir = "@TESTDIR@/lib"
| [ 0:00] ## LVMCONF:     locking_dir = "@TESTDIR@/var/lock/lvm"
| [ 0:00] ## LVMCONF:     locking_type=1
| [ 0:00] ## LVMCONF:     notify_dbus = 0
| [ 0:00] ## LVMCONF:     si_unit_consistency = 1
| [ 0:00] ## LVMCONF:     thin_check_executable = "/usr/sbin/thin_check"
| [ 0:00] ## LVMCONF:     thin_dump_executable = "/usr/sbin/thin_dump"
| [ 0:00] ## LVMCONF:     thin_repair_executable = "/usr/sbin/thin_repair"
| [ 0:00] ## LVMCONF:     use_lvmetad = 0
| [ 0:00] ## LVMCONF:     use_lvmlockd = 0
| [ 0:00] ## LVMCONF:     use_lvmpolld = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: log {
| [ 0:00] ## LVMCONF:     activation = 1
| [ 0:00] ## LVMCONF:     file = "@TESTDIR@/debug.log"
| [ 0:00] ## LVMCONF:     indent = 1
| [ 0:00] ## LVMCONF:     level = 9
| [ 0:00] ## LVMCONF:     overwrite = 1
| [ 0:00] ## LVMCONF:     syslog = 0
| [ 0:00] ## LVMCONF:     verbose = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] <======== Processing test: "snapshot-maxsize.sh" ========>
| [ 0:00] 
| [ 0:00] aux prepare_pvs 1
| [ 0:00] #snapshot-maxsize.sh:21+ aux prepare_pvs 1
| [ 0:00] ## preparing loop device....ok (/dev/loop0)
| [ 0:01] ## preparing 1 devices...lib/utils: line 212: DM_UDEV_COOKIE: unbound variable
| [ 0:01] set +vx; STACKTRACE; set -vx
| [ 0:01] ##snapshot-maxsize.sh:21+ set +vx
| [ 0:01] ## - /lfskernel/sources/boot/LVM2.2.02.177/test/shell/snapshot-maxsize.sh:21
| [ 0:01] ## 1 STACKTRACE() called from /lfskernel/sources/boot/LVM2.2.02.177/test/shell/snapshot-maxsize.sh:21
| [ 0:01] <======== Info ========>
| [ 0:01] ## DMINFO:   Name             Maj Min Stat Open Targ Event  UUID                                                                
| [ 0:01] ## DMINFO:   @PREFIX@pv1  253   3 L--w    0    1      0 TEST-@PREFIX@pv1                                                
| [ 0:01] <======== Active table ========>
| [ 0:01] ## DMTABLE:  @PREFIX@pv1: 0 69632 linear 7:0 2048
| [ 0:01] <======== Inactive table ========>
| [ 0:01] ## DMITABLE: @PREFIX@pv1: 
| [ 0:01] <======== Status ========>
| [ 0:01] ## DMSTATUS: @PREFIX@pv1: 0 69632 linear 
| [ 0:01] <======== Tree ========>
| [ 0:01] ## DMTREE:   LFS_vg-lfs (253:2)
| [ 0:01] ## DMTREE:    `- (8:16)
| [ 0:01] ## DMTREE:   @PREFIX@pv1 (253:3)
| [ 0:01] ## DMTREE:    `- (7:0)
| [ 0:01] ## DMTREE:   centos-swap (253:1)
| [ 0:01] ## DMTREE:    `- (8:2)
| [ 0:01] ## DMTREE:   centos-root (253:0)
| [ 0:01] ## DMTREE:    `- (8:2)
| [ 0:01] <======== Recursive list of @TESTDIR@/dev ========>
| [ 0:01] ## LSLR:	@TESTDIR@/dev:
| [ 0:01] ## LSLR:	total 4
| [ 0:01] ## LSLR:	brw-r--r-- 1 root root 7, 0 Feb 21 02:27 loop0
| [ 0:01] ## LSLR:	brw-r--r-- 1 root root 7, 1 Feb 21 02:27 loop1
| [ 0:01] ## LSLR:	brw-r--r-- 1 root root 7, 2 Feb 21 02:27 loop2
| [ 0:01] ## LSLR:	brw-r--r-- 1 root root 7, 3 Feb 21 02:27 loop3
| [ 0:01] ## LSLR:	brw-r--r-- 1 root root 7, 4 Feb 21 02:27 loop4
| [ 0:01] ## LSLR:	brw-r--r-- 1 root root 7, 5 Feb 21 02:27 loop5
| [ 0:01] ## LSLR:	brw-r--r-- 1 root root 7, 6 Feb 21 02:27 loop6
| [ 0:01] ## LSLR:	brw-r--r-- 1 root root 7, 7 Feb 21 02:27 loop7
| [ 0:01] ## LSLR:	drwxr-xr-x 2 root root 4096 Feb 21 02:27 mapper
| [ 0:01] ## LSLR:	crw-r--r-- 1 root root 1, 3 Feb 21 02:27 testnull
| [ 0:01] ## LSLR:	
| [ 0:01] ## LSLR:	@TESTDIR@/dev/mapper:
| [ 0:01] ## LSLR:	total 0
| [ 0:01] ## LSLR:	brw------- 1 root root 253,   3 Feb 21 02:27 @PREFIX@pv1
| [ 0:01] ## LSLR:	crw------- 1 root root  10, 236 Feb 21 02:27 control
| [ 0:01] <======== Udev DB content ========>
| [ 0:01] ## UDEV:	P: /devices/virtual/block/dm-0
| [ 0:01] ## UDEV:	N: dm-0
| [ 0:01] ## UDEV:	E: DEVNAME=/dev/dm-0
| [ 0:01] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-0
| [ 0:01] ## UDEV:	E: DEVTYPE=disk
| [ 0:01] ## UDEV:	E: MAJOR=253
| [ 0:01] ## UDEV:	E: MINOR=0
| [ 0:01] ## UDEV:	E: SUBSYSTEM=block
| [ 0:01] ## UDEV:	
| [ 0:01] ## UDEV:	P: /devices/virtual/block/dm-1
| [ 0:01] ## UDEV:	N: dm-1
| [ 0:01] ## UDEV:	E: DEVNAME=/dev/dm-1
| [ 0:01] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-1
| [ 0:01] ## UDEV:	E: DEVTYPE=disk
| [ 0:01] ## UDEV:	E: MAJOR=253
| [ 0:01] ## UDEV:	E: MINOR=1
| [ 0:01] ## UDEV:	E: SUBSYSTEM=block
| [ 0:01] ## UDEV:	
| [ 0:01] ## UDEV:	P: /devices/virtual/block/dm-2
| [ 0:01] ## UDEV:	N: dm-2
| [ 0:01] ## UDEV:	E: DEVNAME=/dev/dm-2
| [ 0:01] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-2
| [ 0:01] ## UDEV:	E: DEVTYPE=disk
| [ 0:01] ## UDEV:	E: MAJOR=253
| [ 0:01] ## UDEV:	E: MINOR=2
| [ 0:01] ## UDEV:	E: SUBSYSTEM=block
| [ 0:01] ## UDEV:	
| [ 0:01] ## UDEV:	P: /devices/virtual/block/dm-3
| [ 0:01] ## UDEV:	N: dm-3
| [ 0:01] ## UDEV:	E: DEVNAME=/dev/dm-3
| [ 0:01] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-3
| [ 0:01] ## UDEV:	E: DEVTYPE=disk
| [ 0:01] ## UDEV:	E: MAJOR=253
| [ 0:01] ## UDEV:	E: MINOR=3
| [ 0:01] ## UDEV:	E: SUBSYSTEM=block
| [ 0:01] ## UDEV:	
| [ 0:01] ## UDEV:	P: /devices/virtual/block/loop0
| [ 0:01] ## UDEV:	N: loop0
| [ 0:01] ## UDEV:	E: DEVNAME=/dev/loop0
| [ 0:01] ## UDEV:	E: DEVPATH=/devices/virtual/block/loop0
| [ 0:01] ## UDEV:	E: DEVTYPE=disk
| [ 0:01] ## UDEV:	E: MAJOR=7
| [ 0:01] ## UDEV:	E: MINOR=0
| [ 0:01] ## UDEV:	E: SUBSYSTEM=block
| [ 0:01] ## UDEV:	
| [ 0:01] <======== Script file "snapshot-maxsize.sh" ========>
| [ 0:01] ## Line: 1 	 #!/usr/bin/env bash
| [ 0:01] ## Line: 2 	 
| [ 0:01] ## Line: 3 	 # Copyright (C) 2014 Red Hat, Inc. All rights reserved.
| [ 0:01] ## Line: 4 	 #
| [ 0:01] ## Line: 5 	 # This copyrighted material is made available to anyone wishing to use,
| [ 0:01] ## Line: 6 	 # modify, copy, or redistribute it subject to the terms and conditions
| [ 0:01] ## Line: 7 	 # of the GNU General Public License v.2.
| [ 0:01] ## Line: 8 	 #
| [ 0:01] ## Line: 9 	 # You should have received a copy of the GNU General Public License
| [ 0:01] ## Line: 10 	 # along with this program; if not, write to the Free Software Foundation,
| [ 0:01] ## Line: 11 	 # Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA
| [ 0:01] ## Line: 12 	 
| [ 0:01] ## Line: 13 	 # Testing calculation of snapshot space
| [ 0:01] ## Line: 14 	 # https://bugzilla.redhat.com/show_bug.cgi?id=1035871
| [ 0:01] ## Line: 15 	 
| [ 0:01] ## Line: 16 	 SKIP_WITH_LVMLOCKD=1
| [ 0:01] ## Line: 17 	 SKIP_WITH_LVMPOLLD=1
| [ 0:01] ## Line: 18 	 
| [ 0:01] ## Line: 19 	 . lib/inittest
| [ 0:01] ## Line: 20 	 
| [ 0:01] ## Line: 21 	 aux prepare_pvs 1
| [ 0:01] ## Line: 22 	 get_devs
| [ 0:01] ## Line: 23 	 
| [ 0:01] ## Line: 24 	 vgcreate -s 1K "$vg" "${DEVICES[@]}"
| [ 0:01] ## Line: 25 	 
| [ 0:01] ## Line: 26 	 lvcreate -aey -L1 -n $lv1 $vg
| [ 0:01] ## Line: 27 	 # Snapshot should be large enough to handle any writes
| [ 0:01] ## Line: 28 	 lvcreate -L2 -s $vg/$lv1 -n $lv2
| [ 0:01] ## Line: 29 	 
| [ 0:01] ## Line: 30 	 dd if=/dev/zero of="$DM_DEV_DIR/$vg/$lv2" bs=1M count=1 conv=fdatasync
| [ 0:01] ## Line: 31 	 
| [ 0:01] ## Line: 32 	 # Snapshot must not be 'I'nvalid here
| [ 0:01] ## Line: 33 	 check lv_attr_bit state $vg/$lv2 "a"
| [ 0:01] ## Line: 34 	 
| [ 0:01] ## Line: 35 	 vgremove -f $vg
| [ 0:01] aux teardown
| [ 0:01] #snapshot-maxsize.sh:1+ aux teardown
| [ 0:01] ## teardown.........ok
###       failed: [ndev-vanilla] shell/snapshot-maxsize.sh
###      skipped: [ndev-vanilla] shell/snapshot-merge-stack.sh
###      skipped: [ndev-vanilla] shell/snapshot-merge.sh

| [ 0:00] Library version:   1.02.146 (2017-12-18)
| [ 0:00] Driver version:    4.35.0
| [ 0:00] Kernel is Linux localhost.localdomain 3.10.0-693.11.1.el7.x86_64 #1 SMP Mon Dec 4 23:52:40 UTC 2017 x86_64 GNU/Linux
| [ 0:00] Selinux mode is not installed.
| [ 0:00]               total        used        free      shared  buff/cache   available
| [ 0:00] Mem:           7822        1080        4142          10        2599        6435
| [ 0:00] Swap:          4095           0        4095
| [ 0:00] Filesystem      Size  Used Avail Use% Mounted on
| [ 0:00] /dev/sdc1        18G  8.4G  8.4G  50% /
| [ 0:00] /dev/sdd1        51G  6.1G   43G  13% /lfskernel
| [ 0:00] devtmpfs        3.9G     0  3.9G   0% /dev
| [ 0:00] tmpfs           3.9G     0  3.9G   0% /run
| [ 0:00] @TESTDIR=/tmp/LVMTEST22327.uimu5M6kk5
| [ 0:00] @PREFIX=LVMTEST22327
| [ 0:00] ## LVMCONF: activation {
| [ 0:00] ## LVMCONF:     checks = 1
| [ 0:00] ## LVMCONF:     monitoring = 0
| [ 0:00] ## LVMCONF:     polling_interval = 1
| [ 0:00] ## LVMCONF:     raid_region_size = 512
| [ 0:00] ## LVMCONF:     retry_deactivation = 1
| [ 0:00] ## LVMCONF:     snapshot_autoextend_percent = 50
| [ 0:00] ## LVMCONF:     snapshot_autoextend_threshold = 50
| [ 0:00] ## LVMCONF:     udev_rules = 1
| [ 0:00] ## LVMCONF:     udev_sync = 1
| [ 0:00] ## LVMCONF:     verify_udev_operations = 1
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: allocation {
| [ 0:00] ## LVMCONF:     wipe_signatures_when_zeroing_new_lvs = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: backup {
| [ 0:00] ## LVMCONF:     archive = 0
| [ 0:00] ## LVMCONF:     backup = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: devices {
| [ 0:00] ## LVMCONF:     cache_dir = "@TESTDIR@/etc"
| [ 0:00] ## LVMCONF:     default_data_alignment = 1
| [ 0:00] ## LVMCONF:     dir = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     filter = "a|.*|"
| [ 0:00] ## LVMCONF:     global_filter = [ "a|@TESTDIR@/dev/mapper/@PREFIX@.*pv[0-9_]*$|", "r|.*|" ]
| [ 0:00] ## LVMCONF:     md_component_detection  = 0
| [ 0:00] ## LVMCONF:     scan = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     sysfs_scan = 1
| [ 0:00] ## LVMCONF:     write_cache_state = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: dmeventd {
| [ 0:00] ## LVMCONF:     executable = "/sources/boot/LVM2.2.02.177/test/lib/dmeventd"
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: global {
| [ 0:00] ## LVMCONF:     abort_on_internal_errors = 1
| [ 0:00] ## LVMCONF:     cache_check_executable = "/usr/sbin/cache_check"
| [ 0:00] ## LVMCONF:     cache_dump_executable = "/usr/sbin/cache_dump"
| [ 0:00] ## LVMCONF:     cache_repair_executable = "/usr/sbin/cache_repair"
| [ 0:00] ## LVMCONF:     detect_internal_vg_cache_corruption = 1
| [ 0:00] ## LVMCONF:     fallback_to_local_locking = 0
| [ 0:00] ## LVMCONF:     fsadm_executable = "/sources/boot/LVM2.2.02.177/test/lib/fsadm"
| [ 0:00] ## LVMCONF:     library_dir = "@TESTDIR@/lib"
| [ 0:00] ## LVMCONF:     locking_dir = "@TESTDIR@/var/lock/lvm"
| [ 0:00] ## LVMCONF:     locking_type=1
| [ 0:00] ## LVMCONF:     notify_dbus = 0
| [ 0:00] ## LVMCONF:     si_unit_consistency = 1
| [ 0:00] ## LVMCONF:     thin_check_executable = "/usr/sbin/thin_check"
| [ 0:00] ## LVMCONF:     thin_dump_executable = "/usr/sbin/thin_dump"
| [ 0:00] ## LVMCONF:     thin_repair_executable = "/usr/sbin/thin_repair"
| [ 0:00] ## LVMCONF:     use_lvmetad = 0
| [ 0:00] ## LVMCONF:     use_lvmlockd = 0
| [ 0:00] ## LVMCONF:     use_lvmpolld = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: log {
| [ 0:00] ## LVMCONF:     activation = 1
| [ 0:00] ## LVMCONF:     file = "@TESTDIR@/debug.log"
| [ 0:00] ## LVMCONF:     indent = 1
| [ 0:00] ## LVMCONF:     level = 9
| [ 0:00] ## LVMCONF:     overwrite = 1
| [ 0:00] ## LVMCONF:     syslog = 0
| [ 0:00] ## LVMCONF:     verbose = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] <======== Processing test: "snapshot-reactivate.sh" ========>
| [ 0:00] 
| [ 0:00] # Snapshot should remain unmodified
| [ 0:00] check_s_() {
| [ 0:00] 	check dev_md5sum $vg s
| [ 0:00] 	#diff data "$DM_DEV_DIR/$vg/s"
| [ 0:00] }
| [ 0:00] 
| [ 0:00] which md5sum || skip
| [ 0:00] #snapshot-reactivate.sh:31+ which md5sum
| [ 0:00] /usr/bin/md5sum
| [ 0:00] 
| [ 0:00] aux prepare_vg
| [ 0:00] #snapshot-reactivate.sh:33+ aux prepare_vg
| [ 0:00] ## preparing loop device....ok (/dev/loop0)
| [ 0:01] ## preparing 3 devices...lib/utils: line 212: DM_UDEV_COOKIE: unbound variable
| [ 0:01] set +vx; STACKTRACE; set -vx
| [ 0:01] ##snapshot-reactivate.sh:33+ set +vx
| [ 0:01] ## - /lfskernel/sources/boot/LVM2.2.02.177/test/shell/snapshot-reactivate.sh:33
| [ 0:01] ## 1 STACKTRACE() called from /lfskernel/sources/boot/LVM2.2.02.177/test/shell/snapshot-reactivate.sh:33
| [ 0:01] <======== Info ========>
| [ 0:01] ## DMINFO:   Name             Maj Min Stat Open Targ Event  UUID                                                                
| [ 0:01] ## DMINFO:   @PREFIX@pv3  253   3 L--w    0    1      0 TEST-@PREFIX@pv3                                                
| [ 0:01] ## DMINFO:   @PREFIX@pv2  253   5 L--w    0    1      0 TEST-@PREFIX@pv2                                                
| [ 0:01] ## DMINFO:   @PREFIX@pv1  253   4 L--w    0    1      0 TEST-@PREFIX@pv1                                                
| [ 0:01] <======== Active table ========>
| [ 0:01] ## DMTABLE:  @PREFIX@pv3: 0 69632 linear 7:0 141312
| [ 0:01] ## DMTABLE:  @PREFIX@pv2: 0 69632 linear 7:0 71680
| [ 0:01] ## DMTABLE:  @PREFIX@pv1: 0 69632 linear 7:0 2048
| [ 0:01] <======== Inactive table ========>
| [ 0:01] ## DMITABLE: @PREFIX@pv3: 
| [ 0:01] ## DMITABLE: @PREFIX@pv2: 
| [ 0:01] ## DMITABLE: @PREFIX@pv1: 
| [ 0:01] <======== Status ========>
| [ 0:01] ## DMSTATUS: @PREFIX@pv3: 0 69632 linear 
| [ 0:01] ## DMSTATUS: @PREFIX@pv2: 0 69632 linear 
| [ 0:01] ## DMSTATUS: @PREFIX@pv1: 0 69632 linear 
| [ 0:01] <======== Tree ========>
| [ 0:01] ## DMTREE:   @PREFIX@pv3 (253:3)
| [ 0:01] ## DMTREE:    `- (7:0)
| [ 0:01] ## DMTREE:   @PREFIX@pv2 (253:5)
| [ 0:01] ## DMTREE:    `- (7:0)
| [ 0:01] ## DMTREE:   @PREFIX@pv1 (253:4)
| [ 0:01] ## DMTREE:    `- (7:0)
| [ 0:01] ## DMTREE:   LFS_vg-lfs (253:2)
| [ 0:01] ## DMTREE:    `- (8:16)
| [ 0:01] ## DMTREE:   centos-swap (253:1)
| [ 0:01] ## DMTREE:    `- (8:2)
| [ 0:01] ## DMTREE:   centos-root (253:0)
| [ 0:01] ## DMTREE:    `- (8:2)
| [ 0:01] <======== Recursive list of @TESTDIR@/dev ========>
| [ 0:01] ## LSLR:	@TESTDIR@/dev:
| [ 0:01] ## LSLR:	total 4
| [ 0:01] ## LSLR:	brw-r--r-- 1 root root 7, 0 Feb 21 02:27 loop0
| [ 0:01] ## LSLR:	brw-r--r-- 1 root root 7, 1 Feb 21 02:27 loop1
| [ 0:01] ## LSLR:	brw-r--r-- 1 root root 7, 2 Feb 21 02:27 loop2
| [ 0:01] ## LSLR:	brw-r--r-- 1 root root 7, 3 Feb 21 02:27 loop3
| [ 0:01] ## LSLR:	brw-r--r-- 1 root root 7, 4 Feb 21 02:27 loop4
| [ 0:01] ## LSLR:	brw-r--r-- 1 root root 7, 5 Feb 21 02:27 loop5
| [ 0:01] ## LSLR:	brw-r--r-- 1 root root 7, 6 Feb 21 02:27 loop6
| [ 0:01] ## LSLR:	brw-r--r-- 1 root root 7, 7 Feb 21 02:27 loop7
| [ 0:01] ## LSLR:	drwxr-xr-x 2 root root 4096 Feb 21 02:27 mapper
| [ 0:01] ## LSLR:	crw-r--r-- 1 root root 1, 3 Feb 21 02:27 testnull
| [ 0:01] ## LSLR:	
| [ 0:01] ## LSLR:	@TESTDIR@/dev/mapper:
| [ 0:01] ## LSLR:	total 0
| [ 0:01] ## LSLR:	brw------- 1 root root 253,   4 Feb 21 02:27 @PREFIX@pv1
| [ 0:01] ## LSLR:	brw------- 1 root root 253,   5 Feb 21 02:27 @PREFIX@pv2
| [ 0:01] ## LSLR:	brw------- 1 root root 253,   3 Feb 21 02:27 @PREFIX@pv3
| [ 0:01] ## LSLR:	crw------- 1 root root  10, 236 Feb 21 02:27 control
| [ 0:01] <======== Udev DB content ========>
| [ 0:01] ## UDEV:	P: /devices/virtual/block/dm-0
| [ 0:01] ## UDEV:	N: dm-0
| [ 0:01] ## UDEV:	E: DEVNAME=/dev/dm-0
| [ 0:01] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-0
| [ 0:01] ## UDEV:	E: DEVTYPE=disk
| [ 0:01] ## UDEV:	E: MAJOR=253
| [ 0:01] ## UDEV:	E: MINOR=0
| [ 0:01] ## UDEV:	E: SUBSYSTEM=block
| [ 0:01] ## UDEV:	
| [ 0:01] ## UDEV:	P: /devices/virtual/block/dm-1
| [ 0:01] ## UDEV:	N: dm-1
| [ 0:01] ## UDEV:	E: DEVNAME=/dev/dm-1
| [ 0:01] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-1
| [ 0:01] ## UDEV:	E: DEVTYPE=disk
| [ 0:01] ## UDEV:	E: MAJOR=253
| [ 0:01] ## UDEV:	E: MINOR=1
| [ 0:01] ## UDEV:	E: SUBSYSTEM=block
| [ 0:01] ## UDEV:	
| [ 0:01] ## UDEV:	P: /devices/virtual/block/dm-2
| [ 0:01] ## UDEV:	N: dm-2
| [ 0:01] ## UDEV:	E: DEVNAME=/dev/dm-2
| [ 0:01] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-2
| [ 0:01] ## UDEV:	E: DEVTYPE=disk
| [ 0:01] ## UDEV:	E: MAJOR=253
| [ 0:01] ## UDEV:	E: MINOR=2
| [ 0:01] ## UDEV:	E: SUBSYSTEM=block
| [ 0:01] ## UDEV:	
| [ 0:01] ## UDEV:	P: /devices/virtual/block/dm-3
| [ 0:01] ## UDEV:	N: dm-3
| [ 0:01] ## UDEV:	E: DEVNAME=/dev/dm-3
| [ 0:01] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-3
| [ 0:01] ## UDEV:	E: DEVTYPE=disk
| [ 0:01] ## UDEV:	E: MAJOR=253
| [ 0:01] ## UDEV:	E: MINOR=3
| [ 0:01] ## UDEV:	E: SUBSYSTEM=block
| [ 0:01] ## UDEV:	
| [ 0:01] ## UDEV:	P: /devices/virtual/block/dm-4
| [ 0:01] ## UDEV:	N: dm-4
| [ 0:01] ## UDEV:	E: DEVNAME=/dev/dm-4
| [ 0:01] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-4
| [ 0:01] ## UDEV:	E: DEVTYPE=disk
| [ 0:01] ## UDEV:	E: MAJOR=253
| [ 0:01] ## UDEV:	E: MINOR=4
| [ 0:01] ## UDEV:	E: SUBSYSTEM=block
| [ 0:01] ## UDEV:	
| [ 0:01] ## UDEV:	P: /devices/virtual/block/dm-5
| [ 0:01] ## UDEV:	N: dm-5
| [ 0:01] ## UDEV:	E: DEVNAME=/dev/dm-5
| [ 0:01] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-5
| [ 0:01] ## UDEV:	E: DEVTYPE=disk
| [ 0:01] ## UDEV:	E: MAJOR=253
| [ 0:01] ## UDEV:	E: MINOR=5
| [ 0:01] ## UDEV:	E: SUBSYSTEM=block
| [ 0:01] ## UDEV:	
| [ 0:01] ## UDEV:	P: /devices/virtual/block/loop0
| [ 0:01] ## UDEV:	N: loop0
| [ 0:01] ## UDEV:	E: DEVNAME=/dev/loop0
| [ 0:01] ## UDEV:	E: DEVPATH=/devices/virtual/block/loop0
| [ 0:01] ## UDEV:	E: DEVTYPE=disk
| [ 0:01] ## UDEV:	E: MAJOR=7
| [ 0:01] ## UDEV:	E: MINOR=0
| [ 0:01] ## UDEV:	E: SUBSYSTEM=block
| [ 0:01] ## UDEV:	
| [ 0:01] <======== Script file "snapshot-reactivate.sh" ========>
| [ 0:01] ## Line: 1 	 #!/usr/bin/env bash
| [ 0:01] ## Line: 2 	 
| [ 0:01] ## Line: 3 	 # Copyright (C) 2014 Red Hat, Inc. All rights reserved.
| [ 0:01] ## Line: 4 	 #
| [ 0:01] ## Line: 5 	 # This copyrighted material is made available to anyone wishing to use,
| [ 0:01] ## Line: 6 	 # modify, copy, or redistribute it subject to the terms and conditions
| [ 0:01] ## Line: 7 	 # of the GNU General Public License v.2.
| [ 0:01] ## Line: 8 	 #
| [ 0:01] ## Line: 9 	 # You should have received a copy of the GNU General Public License
| [ 0:01] ## Line: 10 	 # along with this program; if not, write to the Free Software Foundation,
| [ 0:01] ## Line: 11 	 # Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA
| [ 0:01] ## Line: 12 	 
| [ 0:01] ## Line: 13 	 #
| [ 0:01] ## Line: 14 	 # Checking consistency of old-snapshot metadata after de/activation
| [ 0:01] ## Line: 15 	 # Validates recent snapshot target kernel updates and error
| [ 0:01] ## Line: 16 	 # is triggered by kernel 3.14-rc[1..5]
| [ 0:01] ## Line: 17 	 # http://www.redhat.com/archives/dm-devel/2014-March/msg00005.html
| [ 0:01] ## Line: 18 	 #
| [ 0:01] ## Line: 19 	 
| [ 0:01] ## Line: 20 	 SKIP_WITH_LVMLOCKD=1
| [ 0:01] ## Line: 21 	 SKIP_WITH_LVMPOLLD=1
| [ 0:01] ## Line: 22 	 
| [ 0:01] ## Line: 23 	 . lib/inittest
| [ 0:01] ## Line: 24 	 
| [ 0:01] ## Line: 25 	 # Snapshot should remain unmodified
| [ 0:01] ## Line: 26 	 check_s_() {
| [ 0:01] ## Line: 27 	 	check dev_md5sum $vg s
| [ 0:01] ## Line: 28 	 	#diff data "$DM_DEV_DIR/$vg/s"
| [ 0:01] ## Line: 29 	 }
| [ 0:01] ## Line: 30 	 
| [ 0:01] ## Line: 31 	 which md5sum || skip
| [ 0:01] ## Line: 32 	 
| [ 0:01] ## Line: 33 	 aux prepare_vg
| [ 0:01] ## Line: 34 	 
| [ 0:01] ## Line: 35 	 # 8M file with some random data
| [ 0:01] ## Line: 36 	 dd if=/dev/urandom of=data bs=1M count=1 conv=fdatasync
| [ 0:01] ## Line: 37 	 dd if=data of=data bs=1M count=7 seek=1 conv=fdatasync
| [ 0:01] ## Line: 38 	 echo "$(md5sum data | cut -d' ' -f1)  $DM_DEV_DIR/$vg/s" >md5.${vg}-s
| [ 0:01] ## Line: 39 	 
| [ 0:01] ## Line: 40 	 lvcreate -aey -L 8M -n o $vg
| [ 0:01] ## Line: 41 	 dd if=data of="$DM_DEV_DIR/$vg/o" bs=1M conv=fdatasync
| [ 0:01] ## Line: 42 	 
| [ 0:01] ## Line: 43 	 lvcreate -L 8M -s -n s $vg/o
| [ 0:01] ## Line: 44 	 check_s_
| [ 0:01] ## Line: 45 	 
| [ 0:01] ## Line: 46 	 dd if=data of="$DM_DEV_DIR/$vg/o" bs=1234567 count=1 skip=1 conv=fdatasync
| [ 0:01] ## Line: 47 	 check_s_
| [ 0:01] ## Line: 48 	 lvchange -an $vg
| [ 0:01] ## Line: 49 	 
| [ 0:01] ## Line: 50 	 lvchange -ay $vg
| [ 0:01] ## Line: 51 	 check_s_
| [ 0:01] ## Line: 52 	 
| [ 0:01] ## Line: 53 	 dd if=data of="$DM_DEV_DIR/$vg/o" bs=1234567 count=2 skip=1 conv=fdatasync
| [ 0:01] ## Line: 54 	 check_s_
| [ 0:01] ## Line: 55 	 
| [ 0:01] ## Line: 56 	 lvchange -an $vg
| [ 0:01] ## Line: 57 	 lvchange -ay $vg
| [ 0:01] ## Line: 58 	 check_s_
| [ 0:01] ## Line: 59 	 
| [ 0:01] ## Line: 60 	 vgremove -f $vg
| [ 0:01] aux teardown
| [ 0:01] #snapshot-reactivate.sh:1+ aux teardown
| [ 0:01] ## teardown.........ok
###       failed: [ndev-vanilla] shell/snapshot-reactivate.sh

| [ 0:00] Library version:   1.02.146 (2017-12-18)
| [ 0:00] Driver version:    4.35.0
| [ 0:00] Kernel is Linux localhost.localdomain 3.10.0-693.11.1.el7.x86_64 #1 SMP Mon Dec 4 23:52:40 UTC 2017 x86_64 GNU/Linux
| [ 0:00] Selinux mode is not installed.
| [ 0:00]               total        used        free      shared  buff/cache   available
| [ 0:00] Mem:           7822        1080        4142          10        2599        6435
| [ 0:00] Swap:          4095           0        4095
| [ 0:00] Filesystem      Size  Used Avail Use% Mounted on
| [ 0:00] /dev/sdc1        18G  8.4G  8.4G  50% /
| [ 0:00] /dev/sdd1        51G  6.1G   43G  13% /lfskernel
| [ 0:00] devtmpfs        3.9G     0  3.9G   0% /dev
| [ 0:00] tmpfs           3.9G     0  3.9G   0% /run
| [ 0:00] @TESTDIR=/tmp/LVMTEST22518.TOQKSYub1P
| [ 0:00] @PREFIX=LVMTEST22518
| [ 0:00] ## LVMCONF: activation {
| [ 0:00] ## LVMCONF:     checks = 1
| [ 0:00] ## LVMCONF:     monitoring = 0
| [ 0:00] ## LVMCONF:     polling_interval = 1
| [ 0:00] ## LVMCONF:     raid_region_size = 512
| [ 0:00] ## LVMCONF:     retry_deactivation = 1
| [ 0:00] ## LVMCONF:     snapshot_autoextend_percent = 50
| [ 0:00] ## LVMCONF:     snapshot_autoextend_threshold = 50
| [ 0:00] ## LVMCONF:     udev_rules = 1
| [ 0:00] ## LVMCONF:     udev_sync = 1
| [ 0:00] ## LVMCONF:     verify_udev_operations = 1
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: allocation {
| [ 0:00] ## LVMCONF:     wipe_signatures_when_zeroing_new_lvs = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: backup {
| [ 0:00] ## LVMCONF:     archive = 0
| [ 0:00] ## LVMCONF:     backup = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: devices {
| [ 0:00] ## LVMCONF:     cache_dir = "@TESTDIR@/etc"
| [ 0:00] ## LVMCONF:     default_data_alignment = 1
| [ 0:00] ## LVMCONF:     dir = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     filter = "a|.*|"
| [ 0:00] ## LVMCONF:     global_filter = [ "a|@TESTDIR@/dev/mapper/@PREFIX@.*pv[0-9_]*$|", "r|.*|" ]
| [ 0:00] ## LVMCONF:     md_component_detection  = 0
| [ 0:00] ## LVMCONF:     scan = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     sysfs_scan = 1
| [ 0:00] ## LVMCONF:     write_cache_state = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: dmeventd {
| [ 0:00] ## LVMCONF:     executable = "/sources/boot/LVM2.2.02.177/test/lib/dmeventd"
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: global {
| [ 0:00] ## LVMCONF:     abort_on_internal_errors = 1
| [ 0:00] ## LVMCONF:     cache_check_executable = "/usr/sbin/cache_check"
| [ 0:00] ## LVMCONF:     cache_dump_executable = "/usr/sbin/cache_dump"
| [ 0:00] ## LVMCONF:     cache_repair_executable = "/usr/sbin/cache_repair"
| [ 0:00] ## LVMCONF:     detect_internal_vg_cache_corruption = 1
| [ 0:00] ## LVMCONF:     fallback_to_local_locking = 0
| [ 0:00] ## LVMCONF:     fsadm_executable = "/sources/boot/LVM2.2.02.177/test/lib/fsadm"
| [ 0:00] ## LVMCONF:     library_dir = "@TESTDIR@/lib"
| [ 0:00] ## LVMCONF:     locking_dir = "@TESTDIR@/var/lock/lvm"
| [ 0:00] ## LVMCONF:     locking_type=1
| [ 0:00] ## LVMCONF:     notify_dbus = 0
| [ 0:00] ## LVMCONF:     si_unit_consistency = 1
| [ 0:00] ## LVMCONF:     thin_check_executable = "/usr/sbin/thin_check"
| [ 0:00] ## LVMCONF:     thin_dump_executable = "/usr/sbin/thin_dump"
| [ 0:00] ## LVMCONF:     thin_repair_executable = "/usr/sbin/thin_repair"
| [ 0:00] ## LVMCONF:     use_lvmetad = 0
| [ 0:00] ## LVMCONF:     use_lvmlockd = 0
| [ 0:00] ## LVMCONF:     use_lvmpolld = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: log {
| [ 0:00] ## LVMCONF:     activation = 1
| [ 0:00] ## LVMCONF:     file = "@TESTDIR@/debug.log"
| [ 0:00] ## LVMCONF:     indent = 1
| [ 0:00] ## LVMCONF:     level = 9
| [ 0:00] ## LVMCONF:     overwrite = 1
| [ 0:00] ## LVMCONF:     syslog = 0
| [ 0:00] ## LVMCONF:     verbose = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] <======== Processing test: "snapshot-remove-dmsetup.sh" ========>
| [ 0:00] 
| [ 0:00] which mkfs.ext2 || skip
| [ 0:00] #snapshot-remove-dmsetup.sh:22+ which mkfs.ext2
| [ 0:00] /sbin/mkfs.ext2
| [ 0:00] 
| [ 0:00] aux prepare_vg 5
| [ 0:00] #snapshot-remove-dmsetup.sh:24+ aux prepare_vg 5
| [ 0:00] ## preparing loop device....ok (/dev/loop0)
| [ 0:00] ## preparing 5 devices...lib/utils: line 212: DM_UDEV_COOKIE: unbound variable
| [ 0:00] set +vx; STACKTRACE; set -vx
| [ 0:00] ##snapshot-remove-dmsetup.sh:24+ set +vx
| [ 0:00] ## - /lfskernel/sources/boot/LVM2.2.02.177/test/shell/snapshot-remove-dmsetup.sh:24
| [ 0:00] ## 1 STACKTRACE() called from /lfskernel/sources/boot/LVM2.2.02.177/test/shell/snapshot-remove-dmsetup.sh:24
| [ 0:00] <======== Info ========>
| [ 0:00] ## DMINFO:   Name             Maj Min Stat Open Targ Event  UUID                                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv5  253   6 L--w    0    1      0 TEST-@PREFIX@pv5                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv4  253   4 L--w    0    1      0 TEST-@PREFIX@pv4                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv3  253   3 L--w    0    1      0 TEST-@PREFIX@pv3                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv2  253   7 L--w    0    1      0 TEST-@PREFIX@pv2                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv1  253   5 L--w    0    1      0 TEST-@PREFIX@pv1                                                
| [ 0:00] <======== Active table ========>
| [ 0:00] ## DMTABLE:  @PREFIX@pv5: 0 69632 linear 7:0 280576
| [ 0:00] ## DMTABLE:  @PREFIX@pv4: 0 69632 linear 7:0 210944
| [ 0:00] ## DMTABLE:  @PREFIX@pv3: 0 69632 linear 7:0 141312
| [ 0:00] ## DMTABLE:  @PREFIX@pv2: 0 69632 linear 7:0 71680
| [ 0:00] ## DMTABLE:  @PREFIX@pv1: 0 69632 linear 7:0 2048
| [ 0:00] <======== Inactive table ========>
| [ 0:00] ## DMITABLE: @PREFIX@pv5: 
| [ 0:00] ## DMITABLE: @PREFIX@pv4: 
| [ 0:00] ## DMITABLE: @PREFIX@pv3: 
| [ 0:00] ## DMITABLE: @PREFIX@pv2: 
| [ 0:00] ## DMITABLE: @PREFIX@pv1: 
| [ 0:00] <======== Status ========>
| [ 0:00] ## DMSTATUS: @PREFIX@pv5: 0 69632 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv4: 0 69632 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv3: 0 69632 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv2: 0 69632 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv1: 0 69632 linear 
| [ 0:00] <======== Tree ========>
| [ 0:00] ## DMTREE:   @PREFIX@pv5 (253:6)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   @PREFIX@pv4 (253:4)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   @PREFIX@pv3 (253:3)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   @PREFIX@pv2 (253:7)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   @PREFIX@pv1 (253:5)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   LFS_vg-lfs (253:2)
| [ 0:00] ## DMTREE:    `- (8:16)
| [ 0:00] ## DMTREE:   centos-swap (253:1)
| [ 0:00] ## DMTREE:    `- (8:2)
| [ 0:00] ## DMTREE:   centos-root (253:0)
| [ 0:00] ## DMTREE:    `- (8:2)
| [ 0:00] <======== Recursive list of @TESTDIR@/dev ========>
| [ 0:00] ## LSLR:	@TESTDIR@/dev:
| [ 0:00] ## LSLR:	total 4
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 0 Feb 21 02:27 loop0
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 1 Feb 21 02:27 loop1
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 2 Feb 21 02:27 loop2
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 3 Feb 21 02:27 loop3
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 4 Feb 21 02:27 loop4
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 5 Feb 21 02:27 loop5
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 6 Feb 21 02:27 loop6
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 7 Feb 21 02:27 loop7
| [ 0:00] ## LSLR:	drwxr-xr-x 2 root root 4096 Feb 21 02:27 mapper
| [ 0:00] ## LSLR:	crw-r--r-- 1 root root 1, 3 Feb 21 02:27 testnull
| [ 0:00] ## LSLR:	
| [ 0:00] ## LSLR:	@TESTDIR@/dev/mapper:
| [ 0:00] ## LSLR:	total 0
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   5 Feb 21 02:27 @PREFIX@pv1
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   7 Feb 21 02:27 @PREFIX@pv2
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   3 Feb 21 02:27 @PREFIX@pv3
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   4 Feb 21 02:27 @PREFIX@pv4
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   6 Feb 21 02:27 @PREFIX@pv5
| [ 0:00] ## LSLR:	crw------- 1 root root  10, 236 Feb 21 02:27 control
| [ 0:00] <======== Udev DB content ========>
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-0
| [ 0:00] ## UDEV:	N: dm-0
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-0
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-0
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=0
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-1
| [ 0:00] ## UDEV:	N: dm-1
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-1
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-1
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=1
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-2
| [ 0:00] ## UDEV:	N: dm-2
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-2
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-2
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=2
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-3
| [ 0:00] ## UDEV:	N: dm-3
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-3
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-3
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=3
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-4
| [ 0:00] ## UDEV:	N: dm-4
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-4
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-4
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=4
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-5
| [ 0:00] ## UDEV:	N: dm-5
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-5
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-5
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=5
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-6
| [ 0:00] ## UDEV:	N: dm-6
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-6
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-6
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=6
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-7
| [ 0:00] ## UDEV:	N: dm-7
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-7
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-7
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=7
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/loop0
| [ 0:00] ## UDEV:	N: loop0
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/loop0
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/loop0
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=7
| [ 0:00] ## UDEV:	E: MINOR=0
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] <======== Script file "snapshot-remove-dmsetup.sh" ========>
| [ 0:00] ## Line: 1 	 #!/usr/bin/env bash
| [ 0:00] ## Line: 2 	 
| [ 0:00] ## Line: 3 	 # Copyright (C) 2015 Red Hat, Inc. All rights reserved.
| [ 0:00] ## Line: 4 	 #
| [ 0:00] ## Line: 5 	 # This copyrighted material is made available to anyone wishing to use,
| [ 0:00] ## Line: 6 	 # modify, copy, or redistribute it subject to the terms and conditions
| [ 0:00] ## Line: 7 	 # of the GNU General Public License v.2.
| [ 0:00] ## Line: 8 	 #
| [ 0:00] ## Line: 9 	 # You should have received a copy of the GNU General Public License
| [ 0:00] ## Line: 10 	 # along with this program; if not, write to the Free Software Foundation,
| [ 0:00] ## Line: 11 	 # Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA
| [ 0:00] ## Line: 12 	 
| [ 0:00] ## Line: 13 	 # check if 'dmsetup --noflush' will work properly for mounted snapshot
| [ 0:00] ## Line: 14 	 
| [ 0:00] ## Line: 15 	 SKIP_WITH_LVMLOCKD=1
| [ 0:00] ## Line: 16 	 SKIP_WITH_CLVMD=1
| [ 0:00] ## Line: 17 	 SKIP_WITH_LVMETAD=1
| [ 0:00] ## Line: 18 	 SKIP_WITH_LVMPOLLD=1
| [ 0:00] ## Line: 19 	 
| [ 0:00] ## Line: 20 	 . lib/inittest
| [ 0:00] ## Line: 21 	 
| [ 0:00] ## Line: 22 	 which mkfs.ext2 || skip
| [ 0:00] ## Line: 23 	 
| [ 0:00] ## Line: 24 	 aux prepare_vg 5
| [ 0:00] ## Line: 25 	 
| [ 0:00] ## Line: 26 	 # Create stacked device
| [ 0:00] ## Line: 27 	 lvcreate --type snapshot -s -L10 -n $lv1 $vg --virtualsize 100M
| [ 0:00] ## Line: 28 	 aux extend_filter_LVMTEST
| [ 0:00] ## Line: 29 	 vgcreate $vg1 "$DM_DEV_DIR"/$vg/$lv1
| [ 0:00] ## Line: 30 	 
| [ 0:00] ## Line: 31 	 
| [ 0:00] ## Line: 32 	 lvcreate -L20 -n $lv1 $vg1
| [ 0:00] ## Line: 33 	 lvcreate -L10 -n snap -s $vg1/$lv1
| [ 0:00] ## Line: 34 	 
| [ 0:00] ## Line: 35 	 mkfs.ext2 "$DM_DEV_DIR/$vg1/snap"
| [ 0:00] ## Line: 36 	 mkdir mnt
| [ 0:00] ## Line: 37 	 mount -o errors=remount-ro "$DM_DEV_DIR/$vg1/snap" mnt
| [ 0:00] ## Line: 38 	 
| [ 0:00] ## Line: 39 	 sync
| [ 0:00] ## Line: 40 	 
| [ 0:00] ## Line: 41 	 # intentionally suspend layer below
| [ 0:00] ## Line: 42 	 dmsetup suspend $vg-$lv1
| [ 0:00] ## Line: 43 	 
| [ 0:00] ## Line: 44 	 # now this should pass without blocking
| [ 0:00] ## Line: 45 	 dmsetup suspend --noflush --nolockfs $vg1-snap &
| [ 0:00] ## Line: 46 	 DMPID=$!
| [ 0:00] ## Line: 47 	 #dmsetup suspend $vg1-snap &
| [ 0:00] ## Line: 48 	 
| [ 0:00] ## Line: 49 	 sleep .5
| [ 0:00] ## Line: 50 	 
| [ 0:00] ## Line: 51 	 dmsetup info --noheadings -c -o suspended $vg1-snap | tee out
| [ 0:00] ## Line: 52 	 should grep -i suspend out
| [ 0:00] ## Line: 53 	 
| [ 0:00] ## Line: 54 	 # unlock device below
| [ 0:00] ## Line: 55 	 dmsetup resume $vg-$lv1
| [ 0:00] ## Line: 56 	 # so this will pass without blocking on udev
| [ 0:00] ## Line: 57 	 # otherwise --noudevsync would be needed
| [ 0:00] ## Line: 58 	 dmsetup resume $vg1-snap
| [ 0:00] ## Line: 59 	 
| [ 0:00] ## Line: 60 	 # Expecting success from 'dmsetup'
| [ 0:00] ## Line: 61 	 wait $DMPID
| [ 0:00] ## Line: 62 	 
| [ 0:00] ## Line: 63 	 
| [ 0:00] ## Line: 64 	 # Try how force removal works
| [ 0:00] ## Line: 65 	 dmsetup suspend $vg-$lv1
| [ 0:00] ## Line: 66 	 # needs to fail as device is still open
| [ 0:00] ## Line: 67 	 not dmsetup remove --force $vg1-snap &
| [ 0:00] ## Line: 68 	 DMPID=$!
| [ 0:00] ## Line: 69 	 
| [ 0:00] ## Line: 70 	 # on older snapshot target 'remove' will wait till $lv1 is resumed
| [ 0:00] ## Line: 71 	 if aux target_at_least dm-snapshot 1 6 0 ; then
| [ 0:00] ## Line: 72 	 sleep .5
| [ 0:00] ## Line: 73 	 
| [ 0:00] ## Line: 74 	 dmsetup table $vg1-snap | tee out
| [ 0:00] ## Line: 75 	 should grep -i error out
| [ 0:00] ## Line: 76 	 fi
| [ 0:00] ## Line: 77 	 
| [ 0:00] ## Line: 78 	 dmsetup resume $vg-$lv1
| [ 0:00] ## Line: 79 	 
| [ 0:00] ## Line: 80 	 # Expecting success from 'not dmsetup'
| [ 0:00] ## Line: 81 	 wait $DMPID
| [ 0:00] ## Line: 82 	 
| [ 0:00] ## Line: 83 	 # check it really is now 'error' target
| [ 0:00] ## Line: 84 	 dmsetup table $vg1-snap | tee out
| [ 0:00] ## Line: 85 	 grep error out
| [ 0:00] ## Line: 86 	 
| [ 0:00] ## Line: 87 	 umount mnt || true
| [ 0:00] ## Line: 88 	 
| [ 0:00] ## Line: 89 	 lvremove -f $vg1
| [ 0:00] ## Line: 90 	 
| [ 0:00] ## Line: 91 	 vgremove -ff $vg1
| [ 0:00] ## Line: 92 	 vgremove -ff $vg
| [ 0:00] aux teardown
| [ 0:00] #snapshot-remove-dmsetup.sh:1+ aux teardown
| [ 0:00] ## teardown.........ok
###       failed: [ndev-vanilla] shell/snapshot-remove-dmsetup.sh

| [ 0:00] Library version:   1.02.146 (2017-12-18)
| [ 0:00] Driver version:    4.35.0
| [ 0:00] Kernel is Linux localhost.localdomain 3.10.0-693.11.1.el7.x86_64 #1 SMP Mon Dec 4 23:52:40 UTC 2017 x86_64 GNU/Linux
| [ 0:00] Selinux mode is not installed.
| [ 0:00]               total        used        free      shared  buff/cache   available
| [ 0:00] Mem:           7822        1080        4141          10        2600        6434
| [ 0:00] Swap:          4095           0        4095
| [ 0:00] Filesystem      Size  Used Avail Use% Mounted on
| [ 0:00] /dev/sdc1        18G  8.4G  8.4G  50% /
| [ 0:00] /dev/sdd1        51G  6.1G   43G  13% /lfskernel
| [ 0:00] devtmpfs        3.9G     0  3.9G   0% /dev
| [ 0:00] tmpfs           3.9G     0  3.9G   0% /run
| [ 0:00] @TESTDIR=/tmp/LVMTEST22734.OQFZvaRJvh
| [ 0:00] @PREFIX=LVMTEST22734
| [ 0:00] ## LVMCONF: activation {
| [ 0:00] ## LVMCONF:     checks = 1
| [ 0:00] ## LVMCONF:     monitoring = 0
| [ 0:00] ## LVMCONF:     polling_interval = 1
| [ 0:00] ## LVMCONF:     raid_region_size = 512
| [ 0:00] ## LVMCONF:     retry_deactivation = 1
| [ 0:00] ## LVMCONF:     snapshot_autoextend_percent = 50
| [ 0:00] ## LVMCONF:     snapshot_autoextend_threshold = 50
| [ 0:00] ## LVMCONF:     udev_rules = 1
| [ 0:00] ## LVMCONF:     udev_sync = 1
| [ 0:00] ## LVMCONF:     verify_udev_operations = 1
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: allocation {
| [ 0:00] ## LVMCONF:     wipe_signatures_when_zeroing_new_lvs = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: backup {
| [ 0:00] ## LVMCONF:     archive = 0
| [ 0:00] ## LVMCONF:     backup = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: devices {
| [ 0:00] ## LVMCONF:     cache_dir = "@TESTDIR@/etc"
| [ 0:00] ## LVMCONF:     default_data_alignment = 1
| [ 0:00] ## LVMCONF:     dir = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     filter = "a|.*|"
| [ 0:00] ## LVMCONF:     global_filter = [ "a|@TESTDIR@/dev/mapper/@PREFIX@.*pv[0-9_]*$|", "r|.*|" ]
| [ 0:00] ## LVMCONF:     md_component_detection  = 0
| [ 0:00] ## LVMCONF:     scan = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     sysfs_scan = 1
| [ 0:00] ## LVMCONF:     write_cache_state = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: dmeventd {
| [ 0:00] ## LVMCONF:     executable = "/sources/boot/LVM2.2.02.177/test/lib/dmeventd"
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: global {
| [ 0:00] ## LVMCONF:     abort_on_internal_errors = 1
| [ 0:00] ## LVMCONF:     cache_check_executable = "/usr/sbin/cache_check"
| [ 0:00] ## LVMCONF:     cache_dump_executable = "/usr/sbin/cache_dump"
| [ 0:00] ## LVMCONF:     cache_repair_executable = "/usr/sbin/cache_repair"
| [ 0:00] ## LVMCONF:     detect_internal_vg_cache_corruption = 1
| [ 0:00] ## LVMCONF:     fallback_to_local_locking = 0
| [ 0:00] ## LVMCONF:     fsadm_executable = "/sources/boot/LVM2.2.02.177/test/lib/fsadm"
| [ 0:00] ## LVMCONF:     library_dir = "@TESTDIR@/lib"
| [ 0:00] ## LVMCONF:     locking_dir = "@TESTDIR@/var/lock/lvm"
| [ 0:00] ## LVMCONF:     locking_type=1
| [ 0:00] ## LVMCONF:     notify_dbus = 0
| [ 0:00] ## LVMCONF:     si_unit_consistency = 1
| [ 0:00] ## LVMCONF:     thin_check_executable = "/usr/sbin/thin_check"
| [ 0:00] ## LVMCONF:     thin_dump_executable = "/usr/sbin/thin_dump"
| [ 0:00] ## LVMCONF:     thin_repair_executable = "/usr/sbin/thin_repair"
| [ 0:00] ## LVMCONF:     use_lvmetad = 0
| [ 0:00] ## LVMCONF:     use_lvmlockd = 0
| [ 0:00] ## LVMCONF:     use_lvmpolld = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: log {
| [ 0:00] ## LVMCONF:     activation = 1
| [ 0:00] ## LVMCONF:     file = "@TESTDIR@/debug.log"
| [ 0:00] ## LVMCONF:     indent = 1
| [ 0:00] ## LVMCONF:     level = 9
| [ 0:00] ## LVMCONF:     overwrite = 1
| [ 0:00] ## LVMCONF:     syslog = 0
| [ 0:00] ## LVMCONF:     verbose = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] <======== Processing test: "snapshot-rename.sh" ========>
| [ 0:00] 
| [ 0:00] aux prepare_vg 1
| [ 0:00] #snapshot-rename.sh:21+ aux prepare_vg 1
| [ 0:00] ## preparing loop device....ok (/dev/loop0)
| [ 0:00] ## preparing 1 devices...lib/utils: line 212: DM_UDEV_COOKIE: unbound variable
| [ 0:00] set +vx; STACKTRACE; set -vx
| [ 0:00] ##snapshot-rename.sh:21+ set +vx
| [ 0:00] ## - /lfskernel/sources/boot/LVM2.2.02.177/test/shell/snapshot-rename.sh:21
| [ 0:00] ## 1 STACKTRACE() called from /lfskernel/sources/boot/LVM2.2.02.177/test/shell/snapshot-rename.sh:21
| [ 0:00] <======== Info ========>
| [ 0:00] ## DMINFO:   Name             Maj Min Stat Open Targ Event  UUID                                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv1  253   3 L--w    0    1      0 TEST-@PREFIX@pv1                                                
| [ 0:00] <======== Active table ========>
| [ 0:00] ## DMTABLE:  @PREFIX@pv1: 0 69632 linear 7:0 2048
| [ 0:00] <======== Inactive table ========>
| [ 0:00] ## DMITABLE: @PREFIX@pv1: 
| [ 0:00] <======== Status ========>
| [ 0:00] ## DMSTATUS: @PREFIX@pv1: 0 69632 linear 
| [ 0:00] <======== Tree ========>
| [ 0:00] ## DMTREE:   @PREFIX@pv1 (253:3)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   LFS_vg-lfs (253:2)
| [ 0:00] ## DMTREE:    `- (8:16)
| [ 0:00] ## DMTREE:   centos-swap (253:1)
| [ 0:00] ## DMTREE:    `- (8:2)
| [ 0:00] ## DMTREE:   centos-root (253:0)
| [ 0:00] ## DMTREE:    `- (8:2)
| [ 0:00] <======== Recursive list of @TESTDIR@/dev ========>
| [ 0:00] ## LSLR:	@TESTDIR@/dev:
| [ 0:00] ## LSLR:	total 4
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 0 Feb 21 02:27 loop0
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 1 Feb 21 02:27 loop1
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 2 Feb 21 02:27 loop2
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 3 Feb 21 02:27 loop3
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 4 Feb 21 02:27 loop4
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 5 Feb 21 02:27 loop5
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 6 Feb 21 02:27 loop6
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 7 Feb 21 02:27 loop7
| [ 0:00] ## LSLR:	drwxr-xr-x 2 root root 4096 Feb 21 02:27 mapper
| [ 0:00] ## LSLR:	crw-r--r-- 1 root root 1, 3 Feb 21 02:27 testnull
| [ 0:00] ## LSLR:	
| [ 0:00] ## LSLR:	@TESTDIR@/dev/mapper:
| [ 0:00] ## LSLR:	total 0
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   3 Feb 21 02:27 @PREFIX@pv1
| [ 0:00] ## LSLR:	crw------- 1 root root  10, 236 Feb 21 02:27 control
| [ 0:00] <======== Udev DB content ========>
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-0
| [ 0:00] ## UDEV:	N: dm-0
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-0
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-0
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=0
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-1
| [ 0:00] ## UDEV:	N: dm-1
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-1
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-1
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=1
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-2
| [ 0:00] ## UDEV:	N: dm-2
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-2
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-2
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=2
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-3
| [ 0:00] ## UDEV:	N: dm-3
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-3
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-3
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=3
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/loop0
| [ 0:00] ## UDEV:	N: loop0
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/loop0
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/loop0
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=7
| [ 0:00] ## UDEV:	E: MINOR=0
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] <======== Script file "snapshot-rename.sh" ========>
| [ 0:00] ## Line: 1 	 #!/usr/bin/env bash
| [ 0:00] ## Line: 2 	 
| [ 0:00] ## Line: 3 	 # Copyright (C) 2014 Red Hat, Inc. All rights reserved.
| [ 0:00] ## Line: 4 	 #
| [ 0:00] ## Line: 5 	 # This copyrighted material is made available to anyone wishing to use,
| [ 0:00] ## Line: 6 	 # modify, copy, or redistribute it subject to the terms and conditions
| [ 0:00] ## Line: 7 	 # of the GNU General Public License v.2.
| [ 0:00] ## Line: 8 	 #
| [ 0:00] ## Line: 9 	 # You should have received a copy of the GNU General Public License
| [ 0:00] ## Line: 10 	 # along with this program; if not, write to the Free Software Foundation,
| [ 0:00] ## Line: 11 	 # Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA
| [ 0:00] ## Line: 12 	 
| [ 0:00] ## Line: 13 	 # Testing renaming snapshots (had problem in cluster)
| [ 0:00] ## Line: 14 	 # https://bugzilla.redhat.com/show_bug.cgi?id=1136925
| [ 0:00] ## Line: 15 	 
| [ 0:00] ## Line: 16 	 SKIP_WITH_LVMLOCKD=1
| [ 0:00] ## Line: 17 	 SKIP_WITH_LVMPOLLD=1
| [ 0:00] ## Line: 18 	 
| [ 0:00] ## Line: 19 	 . lib/inittest
| [ 0:00] ## Line: 20 	 
| [ 0:00] ## Line: 21 	 aux prepare_vg 1
| [ 0:00] ## Line: 22 	 
| [ 0:00] ## Line: 23 	 lvcreate -aey -L1 -n $lv1 $vg
| [ 0:00] ## Line: 24 	 lvcreate -s -L1 -n $lv2 $vg/$lv1
| [ 0:00] ## Line: 25 	 lvrename $vg/$lv2 $vg/$lv3
| [ 0:00] ## Line: 26 	 lvremove -f $vg/$lv1
| [ 0:00] ## Line: 27 	 
| [ 0:00] ## Line: 28 	 vgremove -f $vg
| [ 0:00] aux teardown
| [ 0:00] #snapshot-rename.sh:1+ aux teardown
| [ 0:00] ## teardown.........ok
###       failed: [ndev-vanilla] shell/snapshot-rename.sh

| [ 0:01] Library version:   1.02.146 (2017-12-18)
| [ 0:01] Driver version:    4.35.0
| [ 0:01] Kernel is Linux localhost.localdomain 3.10.0-693.11.1.el7.x86_64 #1 SMP Mon Dec 4 23:52:40 UTC 2017 x86_64 GNU/Linux
| [ 0:01] Selinux mode is not installed.
| [ 0:01]               total        used        free      shared  buff/cache   available
| [ 0:01] Mem:           7822        1080        4141          10        2600        6435
| [ 0:01] Swap:          4095           0        4095
| [ 0:01] Filesystem      Size  Used Avail Use% Mounted on
| [ 0:01] /dev/sdc1        18G  8.4G  8.4G  50% /
| [ 0:01] /dev/sdd1        51G  6.1G   43G  13% /lfskernel
| [ 0:01] devtmpfs        3.9G     0  3.9G   0% /dev
| [ 0:01] tmpfs           3.9G     0  3.9G   0% /run
| [ 0:01] @TESTDIR=/tmp/LVMTEST22901.azWo5j62xB
| [ 0:01] @PREFIX=LVMTEST22901
| [ 0:01] ## LVMCONF: activation {
| [ 0:01] ## LVMCONF:     checks = 1
| [ 0:01] ## LVMCONF:     monitoring = 0
| [ 0:01] ## LVMCONF:     polling_interval = 1
| [ 0:01] ## LVMCONF:     raid_region_size = 512
| [ 0:01] ## LVMCONF:     retry_deactivation = 1
| [ 0:01] ## LVMCONF:     snapshot_autoextend_percent = 50
| [ 0:01] ## LVMCONF:     snapshot_autoextend_threshold = 50
| [ 0:01] ## LVMCONF:     udev_rules = 1
| [ 0:01] ## LVMCONF:     udev_sync = 1
| [ 0:01] ## LVMCONF:     verify_udev_operations = 1
| [ 0:01] ## LVMCONF: }
| [ 0:01] ## LVMCONF: allocation {
| [ 0:01] ## LVMCONF:     wipe_signatures_when_zeroing_new_lvs = 0
| [ 0:01] ## LVMCONF: }
| [ 0:01] ## LVMCONF: backup {
| [ 0:01] ## LVMCONF:     archive = 0
| [ 0:01] ## LVMCONF:     backup = 0
| [ 0:01] ## LVMCONF: }
| [ 0:01] ## LVMCONF: devices {
| [ 0:01] ## LVMCONF:     cache_dir = "@TESTDIR@/etc"
| [ 0:01] ## LVMCONF:     default_data_alignment = 1
| [ 0:01] ## LVMCONF:     dir = "@TESTDIR@/dev"
| [ 0:01] ## LVMCONF:     filter = "a|.*|"
| [ 0:01] ## LVMCONF:     global_filter = [ "a|@TESTDIR@/dev/mapper/@PREFIX@.*pv[0-9_]*$|", "r|.*|" ]
| [ 0:01] ## LVMCONF:     md_component_detection  = 0
| [ 0:01] ## LVMCONF:     scan = "@TESTDIR@/dev"
| [ 0:01] ## LVMCONF:     sysfs_scan = 1
| [ 0:01] ## LVMCONF:     write_cache_state = 0
| [ 0:01] ## LVMCONF: }
| [ 0:01] ## LVMCONF: dmeventd {
| [ 0:01] ## LVMCONF:     executable = "/sources/boot/LVM2.2.02.177/test/lib/dmeventd"
| [ 0:01] ## LVMCONF: }
| [ 0:01] ## LVMCONF: global {
| [ 0:01] ## LVMCONF:     abort_on_internal_errors = 1
| [ 0:01] ## LVMCONF:     cache_check_executable = "/usr/sbin/cache_check"
| [ 0:01] ## LVMCONF:     cache_dump_executable = "/usr/sbin/cache_dump"
| [ 0:01] ## LVMCONF:     cache_repair_executable = "/usr/sbin/cache_repair"
| [ 0:01] ## LVMCONF:     detect_internal_vg_cache_corruption = 1
| [ 0:01] ## LVMCONF:     fallback_to_local_locking = 0
| [ 0:01] ## LVMCONF:     fsadm_executable = "/sources/boot/LVM2.2.02.177/test/lib/fsadm"
| [ 0:01] ## LVMCONF:     library_dir = "@TESTDIR@/lib"
| [ 0:01] ## LVMCONF:     locking_dir = "@TESTDIR@/var/lock/lvm"
| [ 0:01] ## LVMCONF:     locking_type=1
| [ 0:01] ## LVMCONF:     notify_dbus = 0
| [ 0:01] ## LVMCONF:     si_unit_consistency = 1
| [ 0:01] ## LVMCONF:     thin_check_executable = "/usr/sbin/thin_check"
| [ 0:01] ## LVMCONF:     thin_dump_executable = "/usr/sbin/thin_dump"
| [ 0:01] ## LVMCONF:     thin_repair_executable = "/usr/sbin/thin_repair"
| [ 0:01] ## LVMCONF:     use_lvmetad = 0
| [ 0:01] ## LVMCONF:     use_lvmlockd = 0
| [ 0:01] ## LVMCONF:     use_lvmpolld = 0
| [ 0:01] ## LVMCONF: }
| [ 0:01] ## LVMCONF: log {
| [ 0:01] ## LVMCONF:     activation = 1
| [ 0:01] ## LVMCONF:     file = "@TESTDIR@/debug.log"
| [ 0:01] ## LVMCONF:     indent = 1
| [ 0:01] ## LVMCONF:     level = 9
| [ 0:01] ## LVMCONF:     overwrite = 1
| [ 0:01] ## LVMCONF:     syslog = 0
| [ 0:01] ## LVMCONF:     verbose = 0
| [ 0:01] ## LVMCONF: }
| [ 0:01] <======== Processing test: "snapshot-usage-exa.sh" ========>
| [ 0:01] 
| [ 0:01] aux can_use_16T || skip
| [ 0:01] #snapshot-usage-exa.sh:21+ aux can_use_16T
| [ 0:01] 
| [ 0:01] aux prepare_pvs 1
| [ 0:01] #snapshot-usage-exa.sh:23+ aux prepare_pvs 1
| [ 0:01] ## preparing loop device....ok (/dev/loop0)
| [ 0:01] ## preparing 1 devices...lib/utils: line 212: DM_UDEV_COOKIE: unbound variable
| [ 0:01] set +vx; STACKTRACE; set -vx
| [ 0:01] ##snapshot-usage-exa.sh:23+ set +vx
| [ 0:01] ## - /lfskernel/sources/boot/LVM2.2.02.177/test/shell/snapshot-usage-exa.sh:23
| [ 0:01] ## 1 STACKTRACE() called from /lfskernel/sources/boot/LVM2.2.02.177/test/shell/snapshot-usage-exa.sh:23
| [ 0:01] <======== Info ========>
| [ 0:01] ## DMINFO:   Name             Maj Min Stat Open Targ Event  UUID                                                                
| [ 0:01] ## DMINFO:   @PREFIX@pv1  253   3 L--w    0    1      0 TEST-@PREFIX@pv1                                                
| [ 0:01] <======== Active table ========>
| [ 0:01] ## DMTABLE:  @PREFIX@pv1: 0 69632 linear 7:0 2048
| [ 0:01] <======== Inactive table ========>
| [ 0:01] ## DMITABLE: @PREFIX@pv1: 
| [ 0:01] <======== Status ========>
| [ 0:01] ## DMSTATUS: @PREFIX@pv1: 0 69632 linear 
| [ 0:01] <======== Tree ========>
| [ 0:01] ## DMTREE:   @PREFIX@pv1 (253:3)
| [ 0:01] ## DMTREE:    `- (7:0)
| [ 0:01] ## DMTREE:   LFS_vg-lfs (253:2)
| [ 0:01] ## DMTREE:    `- (8:16)
| [ 0:01] ## DMTREE:   centos-swap (253:1)
| [ 0:01] ## DMTREE:    `- (8:2)
| [ 0:01] ## DMTREE:   centos-root (253:0)
| [ 0:01] ## DMTREE:    `- (8:2)
| [ 0:01] <======== Recursive list of @TESTDIR@/dev ========>
| [ 0:01] ## LSLR:	@TESTDIR@/dev:
| [ 0:01] ## LSLR:	total 4
| [ 0:01] ## LSLR:	brw-r--r-- 1 root root 7, 0 Feb 21 02:27 loop0
| [ 0:01] ## LSLR:	brw-r--r-- 1 root root 7, 1 Feb 21 02:27 loop1
| [ 0:01] ## LSLR:	brw-r--r-- 1 root root 7, 2 Feb 21 02:27 loop2
| [ 0:01] ## LSLR:	brw-r--r-- 1 root root 7, 3 Feb 21 02:27 loop3
| [ 0:01] ## LSLR:	brw-r--r-- 1 root root 7, 4 Feb 21 02:27 loop4
| [ 0:01] ## LSLR:	brw-r--r-- 1 root root 7, 5 Feb 21 02:27 loop5
| [ 0:01] ## LSLR:	brw-r--r-- 1 root root 7, 6 Feb 21 02:27 loop6
| [ 0:01] ## LSLR:	brw-r--r-- 1 root root 7, 7 Feb 21 02:27 loop7
| [ 0:01] ## LSLR:	drwxr-xr-x 2 root root 4096 Feb 21 02:27 mapper
| [ 0:01] ## LSLR:	crw-r--r-- 1 root root 1, 3 Feb 21 02:27 testnull
| [ 0:01] ## LSLR:	
| [ 0:01] ## LSLR:	@TESTDIR@/dev/mapper:
| [ 0:01] ## LSLR:	total 0
| [ 0:01] ## LSLR:	brw------- 1 root root 253,   3 Feb 21 02:27 @PREFIX@pv1
| [ 0:01] ## LSLR:	crw------- 1 root root  10, 236 Feb 21 02:27 control
| [ 0:01] <======== Udev DB content ========>
| [ 0:01] ## UDEV:	P: /devices/virtual/block/dm-0
| [ 0:01] ## UDEV:	N: dm-0
| [ 0:01] ## UDEV:	E: DEVNAME=/dev/dm-0
| [ 0:01] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-0
| [ 0:01] ## UDEV:	E: DEVTYPE=disk
| [ 0:01] ## UDEV:	E: MAJOR=253
| [ 0:01] ## UDEV:	E: MINOR=0
| [ 0:01] ## UDEV:	E: SUBSYSTEM=block
| [ 0:01] ## UDEV:	
| [ 0:01] ## UDEV:	P: /devices/virtual/block/dm-1
| [ 0:01] ## UDEV:	N: dm-1
| [ 0:01] ## UDEV:	E: DEVNAME=/dev/dm-1
| [ 0:01] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-1
| [ 0:01] ## UDEV:	E: DEVTYPE=disk
| [ 0:01] ## UDEV:	E: MAJOR=253
| [ 0:01] ## UDEV:	E: MINOR=1
| [ 0:01] ## UDEV:	E: SUBSYSTEM=block
| [ 0:01] ## UDEV:	
| [ 0:01] ## UDEV:	P: /devices/virtual/block/dm-2
| [ 0:01] ## UDEV:	N: dm-2
| [ 0:01] ## UDEV:	E: DEVNAME=/dev/dm-2
| [ 0:01] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-2
| [ 0:01] ## UDEV:	E: DEVTYPE=disk
| [ 0:01] ## UDEV:	E: MAJOR=253
| [ 0:01] ## UDEV:	E: MINOR=2
| [ 0:01] ## UDEV:	E: SUBSYSTEM=block
| [ 0:01] ## UDEV:	
| [ 0:01] ## UDEV:	P: /devices/virtual/block/dm-3
| [ 0:01] ## UDEV:	N: dm-3
| [ 0:01] ## UDEV:	E: DEVNAME=/dev/dm-3
| [ 0:01] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-3
| [ 0:01] ## UDEV:	E: DEVTYPE=disk
| [ 0:01] ## UDEV:	E: MAJOR=253
| [ 0:01] ## UDEV:	E: MINOR=3
| [ 0:01] ## UDEV:	E: SUBSYSTEM=block
| [ 0:01] ## UDEV:	
| [ 0:01] ## UDEV:	P: /devices/virtual/block/loop0
| [ 0:01] ## UDEV:	N: loop0
| [ 0:01] ## UDEV:	E: DEVNAME=/dev/loop0
| [ 0:01] ## UDEV:	E: DEVPATH=/devices/virtual/block/loop0
| [ 0:01] ## UDEV:	E: DEVTYPE=disk
| [ 0:01] ## UDEV:	E: MAJOR=7
| [ 0:01] ## UDEV:	E: MINOR=0
| [ 0:01] ## UDEV:	E: SUBSYSTEM=block
| [ 0:01] ## UDEV:	
| [ 0:01] <======== Script file "snapshot-usage-exa.sh" ========>
| [ 0:01] ## Line: 1 	 #!/usr/bin/env bash
| [ 0:01] ## Line: 2 	 
| [ 0:01] ## Line: 3 	 # Copyright (C) 2015 Red Hat, Inc. All rights reserved.
| [ 0:01] ## Line: 4 	 #
| [ 0:01] ## Line: 5 	 # This copyrighted material is made available to anyone wishing to use,
| [ 0:01] ## Line: 6 	 # modify, copy, or redistribute it subject to the terms and conditions
| [ 0:01] ## Line: 7 	 # of the GNU General Public License v.2.
| [ 0:01] ## Line: 8 	 #
| [ 0:01] ## Line: 9 	 # You should have received a copy of the GNU General Public License
| [ 0:01] ## Line: 10 	 # along with this program; if not, write to the Free Software Foundation,
| [ 0:01] ## Line: 11 	 # Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA
| [ 0:01] ## Line: 12 	 
| [ 0:01] ## Line: 13 	 # Check very large device size (upto 15Exa bytes)
| [ 0:01] ## Line: 14 	 # this needs 64bit arch
| [ 0:01] ## Line: 15 	 
| [ 0:01] ## Line: 16 	 SKIP_WITH_LVMLOCKD=1
| [ 0:01] ## Line: 17 	 SKIP_WITH_LVMPOLLD=1
| [ 0:01] ## Line: 18 	 
| [ 0:01] ## Line: 19 	 . lib/inittest
| [ 0:01] ## Line: 20 	 
| [ 0:01] ## Line: 21 	 aux can_use_16T || skip
| [ 0:01] ## Line: 22 	 
| [ 0:01] ## Line: 23 	 aux prepare_pvs 1
| [ 0:01] ## Line: 24 	 get_devs
| [ 0:01] ## Line: 25 	 
| [ 0:01] ## Line: 26 	 # Prepare large enough backend device
| [ 0:01] ## Line: 27 	 vgcreate -s 4M "$vg" "${DEVICES[@]}"
| [ 0:01] ## Line: 28 	 lvcreate --type snapshot -s -l 100%FREE -n $lv $vg --virtualsize 15P
| [ 0:01] ## Line: 29 	 aux extend_filter_LVMTEST
| [ 0:01] ## Line: 30 	 
| [ 0:01] ## Line: 31 	 # Check usability with largest extent size
| [ 0:01] ## Line: 32 	 pvcreate "$DM_DEV_DIR/$vg/$lv"
| [ 0:01] ## Line: 33 	 vgcreate -s 4G $vg1 "$DM_DEV_DIR/$vg/$lv"
| [ 0:01] ## Line: 34 	 
| [ 0:01] ## Line: 35 	 lvcreate -an -Zn -l50%FREE -n $lv1 $vg1
| [ 0:01] ## Line: 36 	 lvcreate -s -l100%FREE -n $lv2 $vg1/$lv1
| [ 0:01] ## Line: 37 	 check lv_field $vg1/$lv2 size "7.50p"
| [ 0:01] ## Line: 38 	 lvremove -ff $vg1
| [ 0:01] ## Line: 39 	 
| [ 0:01] ## Line: 40 	 lvcreate --type snapshot -V15E -l1 -n $lv1 -s $vg1
| [ 0:01] ## Line: 41 	 check lv_field $vg1/$lv1 origin_size "15.00e"
| [ 0:01] ## Line: 42 	 
| [ 0:01] ## Line: 43 	 vgremove -ff $vg1
| [ 0:01] ## Line: 44 	 vgremove -ff $vg
| [ 0:01] aux teardown
| [ 0:01] #snapshot-usage-exa.sh:1+ aux teardown
| [ 0:01] ## teardown.........ok
###       failed: [ndev-vanilla] shell/snapshot-usage-exa.sh

| [ 0:00] Library version:   1.02.146 (2017-12-18)
| [ 0:00] Driver version:    4.35.0
| [ 0:00] Kernel is Linux localhost.localdomain 3.10.0-693.11.1.el7.x86_64 #1 SMP Mon Dec 4 23:52:40 UTC 2017 x86_64 GNU/Linux
| [ 0:00] Selinux mode is not installed.
| [ 0:00]               total        used        free      shared  buff/cache   available
| [ 0:00] Mem:           7822        1080        4141          10        2600        6435
| [ 0:00] Swap:          4095           0        4095
| [ 0:00] Filesystem      Size  Used Avail Use% Mounted on
| [ 0:00] /dev/sdc1        18G  8.4G  8.4G  50% /
| [ 0:00] /dev/sdd1        51G  6.1G   43G  13% /lfskernel
| [ 0:00] devtmpfs        3.9G     0  3.9G   0% /dev
| [ 0:00] tmpfs           3.9G     0  3.9G   0% /run
| [ 0:00] @TESTDIR=/tmp/LVMTEST23060.dMtwZhElDM
| [ 0:00] @PREFIX=LVMTEST23060
| [ 0:00] ## LVMCONF: activation {
| [ 0:00] ## LVMCONF:     checks = 1
| [ 0:00] ## LVMCONF:     monitoring = 0
| [ 0:00] ## LVMCONF:     polling_interval = 1
| [ 0:00] ## LVMCONF:     raid_region_size = 512
| [ 0:00] ## LVMCONF:     retry_deactivation = 1
| [ 0:00] ## LVMCONF:     snapshot_autoextend_percent = 50
| [ 0:00] ## LVMCONF:     snapshot_autoextend_threshold = 50
| [ 0:00] ## LVMCONF:     udev_rules = 1
| [ 0:00] ## LVMCONF:     udev_sync = 1
| [ 0:00] ## LVMCONF:     verify_udev_operations = 1
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: allocation {
| [ 0:00] ## LVMCONF:     wipe_signatures_when_zeroing_new_lvs = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: backup {
| [ 0:00] ## LVMCONF:     archive = 0
| [ 0:00] ## LVMCONF:     backup = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: devices {
| [ 0:00] ## LVMCONF:     cache_dir = "@TESTDIR@/etc"
| [ 0:00] ## LVMCONF:     default_data_alignment = 1
| [ 0:00] ## LVMCONF:     dir = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     filter = "a|.*|"
| [ 0:00] ## LVMCONF:     global_filter = [ "a|@TESTDIR@/dev/mapper/@PREFIX@.*pv[0-9_]*$|", "r|.*|" ]
| [ 0:00] ## LVMCONF:     md_component_detection  = 0
| [ 0:00] ## LVMCONF:     scan = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     sysfs_scan = 1
| [ 0:00] ## LVMCONF:     write_cache_state = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: dmeventd {
| [ 0:00] ## LVMCONF:     executable = "/sources/boot/LVM2.2.02.177/test/lib/dmeventd"
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: global {
| [ 0:00] ## LVMCONF:     abort_on_internal_errors = 1
| [ 0:00] ## LVMCONF:     cache_check_executable = "/usr/sbin/cache_check"
| [ 0:00] ## LVMCONF:     cache_dump_executable = "/usr/sbin/cache_dump"
| [ 0:00] ## LVMCONF:     cache_repair_executable = "/usr/sbin/cache_repair"
| [ 0:00] ## LVMCONF:     detect_internal_vg_cache_corruption = 1
| [ 0:00] ## LVMCONF:     fallback_to_local_locking = 0
| [ 0:00] ## LVMCONF:     fsadm_executable = "/sources/boot/LVM2.2.02.177/test/lib/fsadm"
| [ 0:00] ## LVMCONF:     library_dir = "@TESTDIR@/lib"
| [ 0:00] ## LVMCONF:     locking_dir = "@TESTDIR@/var/lock/lvm"
| [ 0:00] ## LVMCONF:     locking_type=1
| [ 0:00] ## LVMCONF:     notify_dbus = 0
| [ 0:00] ## LVMCONF:     si_unit_consistency = 1
| [ 0:00] ## LVMCONF:     thin_check_executable = "/usr/sbin/thin_check"
| [ 0:00] ## LVMCONF:     thin_dump_executable = "/usr/sbin/thin_dump"
| [ 0:00] ## LVMCONF:     thin_repair_executable = "/usr/sbin/thin_repair"
| [ 0:00] ## LVMCONF:     use_lvmetad = 0
| [ 0:00] ## LVMCONF:     use_lvmlockd = 0
| [ 0:00] ## LVMCONF:     use_lvmpolld = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: log {
| [ 0:00] ## LVMCONF:     activation = 1
| [ 0:00] ## LVMCONF:     file = "@TESTDIR@/debug.log"
| [ 0:00] ## LVMCONF:     indent = 1
| [ 0:00] ## LVMCONF:     level = 9
| [ 0:00] ## LVMCONF:     overwrite = 1
| [ 0:00] ## LVMCONF:     syslog = 0
| [ 0:00] ## LVMCONF:     verbose = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] <======== Processing test: "snapshot-usage.sh" ========>
| [ 0:00] 
| [ 0:00] MKFS=mkfs.ext2
| [ 0:00] #snapshot-usage.sh:20+ MKFS=mkfs.ext2
| [ 0:00] which $MKFS || skip
| [ 0:00] #snapshot-usage.sh:21+ which mkfs.ext2
| [ 0:00] /sbin/mkfs.ext2
| [ 0:00] 
| [ 0:00] fill() {
| [ 0:00] 	dd if=/dev/zero of="$DM_DEV_DIR/${2:-$vg1/lvol0}" bs=$1 count=1 oflag=direct || \
| [ 0:00] 		die "Snapshot does not fit $1"
| [ 0:00] }
| [ 0:00] 
| [ 0:00] cleanup_tail()
| [ 0:00] {
| [ 0:00] 	test -z "$SLEEP_PID" || kill $SLEEP_PID || true
| [ 0:00] 	wait
| [ 0:00] 	vgremove -ff $vg1 || true
| [ 0:00] 	vgremove -ff $vg
| [ 0:00] 	aux teardown
| [ 0:00] }
| [ 0:00] 
| [ 0:00] TSIZE=15P
| [ 0:00] #snapshot-usage.sh:37+ TSIZE=15P
| [ 0:00] aux can_use_16T || TSIZE=15T
| [ 0:00] #snapshot-usage.sh:38+ aux can_use_16T
| [ 0:00] 
| [ 0:00] # With different snapshot target driver we may obtain different results.
| [ 0:00] # Older targets have metadata leak bug which needs extra compenstion.
| [ 0:00] # Ancient targets do not even provide separate info for metadata.
| [ 0:00] EXPECT1="16.00k"
| [ 0:00] #snapshot-usage.sh:43+ EXPECT1=16.00k
| [ 0:00] EXPECT2="512.00k"
| [ 0:00] #snapshot-usage.sh:44+ EXPECT2=512.00k
| [ 0:00] EXPECT3="32.00k"
| [ 0:00] #snapshot-usage.sh:45+ EXPECT3=32.00k
| [ 0:00] EXPECT4="66.67"
| [ 0:00] #snapshot-usage.sh:46+ EXPECT4=66.67
| [ 0:00] if aux target_at_least dm-snapshot 1 10 0 ; then
| [ 0:00] 	# Extra metadata size
| [ 0:00] 	EXPECT4="0.00"
| [ 0:00] 
| [ 0:00] 	if aux target_at_least dm-snapshot 1 12 0 ; then
| [ 0:00] 		# When fixed leak, expect smaller sizes
| [ 0:00] 		EXPECT1="12.00k"
| [ 0:00] 		EXPECT2="384.00k"
| [ 0:00] 		EXPECT3="28.00k"
| [ 0:00] 	fi
| [ 0:00] fi
| [ 0:00] #snapshot-usage.sh:47+ aux target_at_least dm-snapshot 1 10 0
| [ 0:00] modprobe: FATAL: Module dm-snapshot not found in directory /lib/modules/3.10.0-693.11.1.el7.x86_64
| [ 0:00] 
| [ 0:00] aux prepare_pvs 1
| [ 0:00] #snapshot-usage.sh:59+ aux prepare_pvs 1
| [ 0:00] ## preparing loop device....ok (/dev/loop0)
| [ 0:00] ## preparing 1 devices...lib/utils: line 212: DM_UDEV_COOKIE: unbound variable
| [ 0:00] set +vx; STACKTRACE; set -vx
| [ 0:00] ##snapshot-usage.sh:59+ set +vx
| [ 0:00] ## - /lfskernel/sources/boot/LVM2.2.02.177/test/shell/snapshot-usage.sh:59
| [ 0:00] ## 1 STACKTRACE() called from /lfskernel/sources/boot/LVM2.2.02.177/test/shell/snapshot-usage.sh:59
| [ 0:00] <======== Info ========>
| [ 0:00] ## DMINFO:   Name             Maj Min Stat Open Targ Event  UUID                                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv1  253   3 L--w    0    1      0 TEST-@PREFIX@pv1                                                
| [ 0:00] <======== Active table ========>
| [ 0:00] ## DMTABLE:  @PREFIX@pv1: 0 69632 linear 7:0 2048
| [ 0:00] <======== Inactive table ========>
| [ 0:00] ## DMITABLE: @PREFIX@pv1: 
| [ 0:00] <======== Status ========>
| [ 0:00] ## DMSTATUS: @PREFIX@pv1: 0 69632 linear 
| [ 0:00] <======== Tree ========>
| [ 0:00] ## DMTREE:   @PREFIX@pv1 (253:3)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   LFS_vg-lfs (253:2)
| [ 0:00] ## DMTREE:    `- (8:16)
| [ 0:00] ## DMTREE:   centos-swap (253:1)
| [ 0:00] ## DMTREE:    `- (8:2)
| [ 0:00] ## DMTREE:   centos-root (253:0)
| [ 0:00] ## DMTREE:    `- (8:2)
| [ 0:00] <======== Recursive list of @TESTDIR@/dev ========>
| [ 0:00] ## LSLR:	@TESTDIR@/dev:
| [ 0:00] ## LSLR:	total 4
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 0 Feb 21 02:27 loop0
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 1 Feb 21 02:27 loop1
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 2 Feb 21 02:27 loop2
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 3 Feb 21 02:27 loop3
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 4 Feb 21 02:27 loop4
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 5 Feb 21 02:27 loop5
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 6 Feb 21 02:27 loop6
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 7 Feb 21 02:27 loop7
| [ 0:00] ## LSLR:	drwxr-xr-x 2 root root 4096 Feb 21 02:27 mapper
| [ 0:00] ## LSLR:	crw-r--r-- 1 root root 1, 3 Feb 21 02:27 testnull
| [ 0:00] ## LSLR:	
| [ 0:00] ## LSLR:	@TESTDIR@/dev/mapper:
| [ 0:00] ## LSLR:	total 0
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   3 Feb 21 02:27 @PREFIX@pv1
| [ 0:00] ## LSLR:	crw------- 1 root root  10, 236 Feb 21 02:27 control
| [ 0:00] <======== Udev DB content ========>
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-0
| [ 0:00] ## UDEV:	N: dm-0
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-0
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-0
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=0
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-1
| [ 0:00] ## UDEV:	N: dm-1
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-1
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-1
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=1
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-2
| [ 0:00] ## UDEV:	N: dm-2
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-2
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-2
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=2
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-3
| [ 0:00] ## UDEV:	N: dm-3
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-3
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-3
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=3
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/loop0
| [ 0:00] ## UDEV:	N: loop0
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/loop0
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/loop0
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=7
| [ 0:00] ## UDEV:	E: MINOR=0
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] <======== Script file "snapshot-usage.sh" ========>
| [ 0:00] ## Line: 1 	 #!/usr/bin/env bash
| [ 0:00] ## Line: 2 	 
| [ 0:00] ## Line: 3 	 # Copyright (C) 2013 Red Hat, Inc. All rights reserved.
| [ 0:00] ## Line: 4 	 #
| [ 0:00] ## Line: 5 	 # This copyrighted material is made available to anyone wishing to use,
| [ 0:00] ## Line: 6 	 # modify, copy, or redistribute it subject to the terms and conditions
| [ 0:00] ## Line: 7 	 # of the GNU General Public License v.2.
| [ 0:00] ## Line: 8 	 #
| [ 0:00] ## Line: 9 	 # You should have received a copy of the GNU General Public License
| [ 0:00] ## Line: 10 	 # along with this program; if not, write to the Free Software Foundation,
| [ 0:00] ## Line: 11 	 # Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA
| [ 0:00] ## Line: 12 	 
| [ 0:00] ## Line: 13 	 # no automatic extensions please
| [ 0:00] ## Line: 14 	 
| [ 0:00] ## Line: 15 	 SKIP_WITH_LVMLOCKD=1
| [ 0:00] ## Line: 16 	 SKIP_WITH_LVMPOLLD=1
| [ 0:00] ## Line: 17 	 
| [ 0:00] ## Line: 18 	 . lib/inittest
| [ 0:00] ## Line: 19 	 
| [ 0:00] ## Line: 20 	 MKFS=mkfs.ext2
| [ 0:00] ## Line: 21 	 which $MKFS || skip
| [ 0:00] ## Line: 22 	 
| [ 0:00] ## Line: 23 	 fill() {
| [ 0:00] ## Line: 24 	 	dd if=/dev/zero of="$DM_DEV_DIR/${2:-$vg1/lvol0}" bs=$1 count=1 oflag=direct || \
| [ 0:00] ## Line: 25 	 		die "Snapshot does not fit $1"
| [ 0:00] ## Line: 26 	 }
| [ 0:00] ## Line: 27 	 
| [ 0:00] ## Line: 28 	 cleanup_tail()
| [ 0:00] ## Line: 29 	 {
| [ 0:00] ## Line: 30 	 	test -z "$SLEEP_PID" || kill $SLEEP_PID || true
| [ 0:00] ## Line: 31 	 	wait
| [ 0:00] ## Line: 32 	 	vgremove -ff $vg1 || true
| [ 0:00] ## Line: 33 	 	vgremove -ff $vg
| [ 0:00] ## Line: 34 	 	aux teardown
| [ 0:00] ## Line: 35 	 }
| [ 0:00] ## Line: 36 	 
| [ 0:00] ## Line: 37 	 TSIZE=15P
| [ 0:00] ## Line: 38 	 aux can_use_16T || TSIZE=15T
| [ 0:00] ## Line: 39 	 
| [ 0:00] ## Line: 40 	 # With different snapshot target driver we may obtain different results.
| [ 0:00] ## Line: 41 	 # Older targets have metadata leak bug which needs extra compenstion.
| [ 0:00] ## Line: 42 	 # Ancient targets do not even provide separate info for metadata.
| [ 0:00] ## Line: 43 	 EXPECT1="16.00k"
| [ 0:00] ## Line: 44 	 EXPECT2="512.00k"
| [ 0:00] ## Line: 45 	 EXPECT3="32.00k"
| [ 0:00] ## Line: 46 	 EXPECT4="66.67"
| [ 0:00] ## Line: 47 	 if aux target_at_least dm-snapshot 1 10 0 ; then
| [ 0:00] ## Line: 48 	 	# Extra metadata size
| [ 0:00] ## Line: 49 	 	EXPECT4="0.00"
| [ 0:00] ## Line: 50 	 
| [ 0:00] ## Line: 51 	 	if aux target_at_least dm-snapshot 1 12 0 ; then
| [ 0:00] ## Line: 52 	 		# When fixed leak, expect smaller sizes
| [ 0:00] ## Line: 53 	 		EXPECT1="12.00k"
| [ 0:00] ## Line: 54 	 		EXPECT2="384.00k"
| [ 0:00] ## Line: 55 	 		EXPECT3="28.00k"
| [ 0:00] ## Line: 56 	 	fi
| [ 0:00] ## Line: 57 	 fi
| [ 0:00] ## Line: 58 	 
| [ 0:00] ## Line: 59 	 aux prepare_pvs 1
| [ 0:00] ## Line: 60 	 get_devs
| [ 0:00] ## Line: 61 	 
| [ 0:00] ## Line: 62 	 vgcreate -s 4M "$vg" "${DEVICES[@]}"
| [ 0:00] ## Line: 63 	 
| [ 0:00] ## Line: 64 	 # Play with 1 extent
| [ 0:00] ## Line: 65 	 lvcreate -aey -l1 -n $lv $vg
| [ 0:00] ## Line: 66 	 # 100%LV is not supported for snapshot
| [ 0:00] ## Line: 67 	 fail lvcreate -s -l 100%LV -n snap $vg/$lv 2>&1 | tee out
| [ 0:00] ## Line: 68 	 grep 'Please express size as %FREE, %ORIGIN, %PVS or %VG' out
| [ 0:00] ## Line: 69 	 # 100%ORIGIN needs to have enough space for all data and needs to round-up
| [ 0:00] ## Line: 70 	 lvcreate -s -l 100%ORIGIN -n $lv1 $vg/$lv
| [ 0:00] ## Line: 71 	 # everything needs to fit
| [ 0:00] ## Line: 72 	 fill 4M $vg/$lv1
| [ 0:00] ## Line: 73 	 lvremove -f $vg
| [ 0:00] ## Line: 74 	 
| [ 0:00] ## Line: 75 	 
| [ 0:00] ## Line: 76 	 # Automatically activates exclusively in cluster
| [ 0:00] ## Line: 77 	 lvcreate --type snapshot -s -l 100%FREE -n $lv $vg --virtualsize $TSIZE
| [ 0:00] ## Line: 78 	 
| [ 0:00] ## Line: 79 	 aux extend_filter_LVMTEST
| [ 0:00] ## Line: 80 	 aux lvmconf "activation/snapshot_autoextend_percent = 20" \
| [ 0:00] ## Line: 81 	             "activation/snapshot_autoextend_threshold = 50"
| [ 0:00] ## Line: 82 	 
| [ 0:00] ## Line: 83 	 # Check usability with smallest (1k) extent size ($lv has 15P)
| [ 0:00] ## Line: 84 	 pvcreate --yes --setphysicalvolumesize 4T "$DM_DEV_DIR/$vg/$lv"
| [ 0:00] ## Line: 85 	 trap 'cleanup_tail' EXIT
| [ 0:00] ## Line: 86 	 vgcreate -s 1K $vg1 "$DM_DEV_DIR/$vg/$lv"
| [ 0:00] ## Line: 87 	 
| [ 0:00] ## Line: 88 	 
| [ 0:00] ## Line: 89 	 # Play with small 1k 128 extents
| [ 0:00] ## Line: 90 	 lvcreate -aey -L128K -n $lv $vg1
| [ 0:00] ## Line: 91 	 # 100%ORIGIN needs to have enough space for all data
| [ 0:00] ## Line: 92 	 lvcreate -s -l 100%ORIGIN -n snap100 $vg1/$lv
| [ 0:00] ## Line: 93 	 # everything needs to fit
| [ 0:00] ## Line: 94 	 fill 128k $vg1/snap100
| [ 0:00] ## Line: 95 	 
| [ 0:00] ## Line: 96 	 # 50%ORIGIN needs to have enough space for 50% of data
| [ 0:00] ## Line: 97 	 lvcreate -s -l 50%ORIGIN -n snap50 $vg1/$lv
| [ 0:00] ## Line: 98 	 fill 64k $vg1/snap50
| [ 0:00] ## Line: 99 	 
| [ 0:00] ## Line: 100 	 lvcreate -s -l 25%ORIGIN -n snap25 $vg1/$lv
| [ 0:00] ## Line: 101 	 fill 32k $vg1/snap25
| [ 0:00] ## Line: 102 	 
| [ 0:00] ## Line: 103 	 # Check we do not provide too much extra space
| [ 0:00] ## Line: 104 	 not fill 33k $vg1/snap25
| [ 0:00] ## Line: 105 	 
| [ 0:00] ## Line: 106 	 lvs -a $vg1
| [ 0:00] ## Line: 107 	 lvremove -f $vg1
| [ 0:00] ## Line: 108 	 
| [ 0:00] ## Line: 109 	 # Test virtual snapshot over /dev/zero
| [ 0:00] ## Line: 110 	 lvcreate --type snapshot -V50 -L10 -n $lv1 -s $vg1
| [ 0:00] ## Line: 111 	 CHECK_ACTIVE="active"
| [ 0:00] ## Line: 112 	 test ! -e LOCAL_CLVMD || CHECK_ACTIVE="local exclusive"
| [ 0:00] ## Line: 113 	 check lv_field $vg1/$lv1 lv_active "$CHECK_ACTIVE"
| [ 0:00] ## Line: 114 	 lvchange -an $vg1
| [ 0:00] ## Line: 115 	 
| [ 0:00] ## Line: 116 	 # On cluster snapshot gets exclusive activation
| [ 0:00] ## Line: 117 	 lvchange -ay $vg1
| [ 0:00] ## Line: 118 	 check lv_field $vg1/$lv1 lv_active "$CHECK_ACTIVE"
| [ 0:00] ## Line: 119 	 
| [ 0:00] ## Line: 120 	 # Test removal of opened (but unmounted) snapshot (device busy) for a while
| [ 0:00] ## Line: 121 	 SLEEP_PID=$(aux hold_device_open $vg1 $lv1 60)
| [ 0:00] ## Line: 122 	 
| [ 0:00] ## Line: 123 	 # Opened virtual snapshot device is not removable
| [ 0:00] ## Line: 124 	 # it should retry device removal for a few seconds
| [ 0:00] ## Line: 125 	 not lvremove -f $vg1/$lv1
| [ 0:00] ## Line: 126 	 
| [ 0:00] ## Line: 127 	 kill $SLEEP_PID
| [ 0:00] ## Line: 128 	 SLEEP_PID=
| [ 0:00] ## Line: 129 	 # Wait for killed task, so there is no device holder
| [ 0:00] ## Line: 130 	 wait
| [ 0:00] ## Line: 131 	 
| [ 0:00] ## Line: 132 	 lvremove -f $vg1/$lv1
| [ 0:00] ## Line: 133 	 check lv_not_exists $vg1 $lv1
| [ 0:00] ## Line: 134 	 
| [ 0:00] ## Line: 135 	 # Check border size
| [ 0:00] ## Line: 136 	 lvcreate -aey -L4095G $vg1
| [ 0:00] ## Line: 137 	 lvcreate -s -L100K $vg1/lvol0
| [ 0:00] ## Line: 138 	 fill 1K
| [ 0:00] ## Line: 139 	 check lv_field $vg1/lvol1 data_percent "12.00"
| [ 0:00] ## Line: 140 	 
| [ 0:00] ## Line: 141 	 lvremove -ff $vg1
| [ 0:00] ## Line: 142 	 
| [ 0:00] ## Line: 143 	 # Create 1KB snapshot, does not need to be active here
| [ 0:00] ## Line: 144 	 lvcreate -an -Zn -l1 -n $lv1 $vg1
| [ 0:00] ## Line: 145 	 not lvcreate -s -l1 $vg1/$lv1
| [ 0:00] ## Line: 146 	 not lvcreate -s -l3 $vg1/$lv1
| [ 0:00] ## Line: 147 	 lvcreate -s -l30 -n $lv2 $vg1/$lv1
| [ 0:00] ## Line: 148 	 check lv_field $vg1/$lv2 size "$EXPECT1"
| [ 0:00] ## Line: 149 	 
| [ 0:00] ## Line: 150 	 not lvcreate -s -c512 -l512 $vg1/$lv1
| [ 0:00] ## Line: 151 	 lvcreate -s -c128 -l1700 -n $lv3 $vg1/$lv1
| [ 0:00] ## Line: 152 	 # 3 * 128
| [ 0:00] ## Line: 153 	 check lv_field $vg1/$lv3 size "$EXPECT2"
| [ 0:00] ## Line: 154 	 lvremove -ff $vg1
| [ 0:00] ## Line: 155 	 
| [ 0:00] ## Line: 156 	 lvcreate -aey -l20 $vg1
| [ 0:00] ## Line: 157 	 lvcreate -s -l12 $vg1/lvol0
| [ 0:00] ## Line: 158 	 
| [ 0:00] ## Line: 159 	 # Fill 1KB -> 100% snapshot (1x 4KB chunk)
| [ 0:00] ## Line: 160 	 fill 1K
| [ 0:00] ## Line: 161 	 check lv_field $vg1/lvol1 data_percent "100.00"
| [ 0:00] ## Line: 162 	 
| [ 0:00] ## Line: 163 	 # Check it resizes 100% full valid snapshot to fit threshold
| [ 0:00] ## Line: 164 	 lvextend --use-policies $vg1/lvol1
| [ 0:00] ## Line: 165 	 check lv_field $vg1/lvol1 data_percent "50.00"
| [ 0:00] ## Line: 166 	 
| [ 0:00] ## Line: 167 	 fill 4K
| [ 0:00] ## Line: 168 	 lvextend --use-policies $vg1/lvol1
| [ 0:00] ## Line: 169 	 check lv_field $vg1/lvol1 size "24.00k"
| [ 0:00] ## Line: 170 	 
| [ 0:00] ## Line: 171 	 lvextend -l+33 $vg1/lvol1
| [ 0:00] ## Line: 172 	 check lv_field $vg1/lvol1 size "$EXPECT3"
| [ 0:00] ## Line: 173 	 
| [ 0:00] ## Line: 174 	 fill 20K
| [ 0:00] ## Line: 175 	 
| [ 0:00] ## Line: 176 	 lvremove -f $vg1
| [ 0:00] ## Line: 177 	 
| [ 0:00] ## Line: 178 	 # Check snapshot really deletes COW header for read-only snapshot
| [ 0:00] ## Line: 179 	 # Test needs special relation between chunk size and extent size
| [ 0:00] ## Line: 180 	 # This test expects extent size 1K
| [ 0:00] ## Line: 181 	 aux lvmconf "allocation/wipe_signatures_when_zeroing_new_lvs = 1"
| [ 0:00] ## Line: 182 	 lvcreate -aey -L4 -n $lv $vg1
| [ 0:00] ## Line: 183 	 lvcreate -c 8 -s -L1 -n snap $vg1/$lv
| [ 0:00] ## Line: 184 	 # Populate snapshot
| [ 0:00] ## Line: 185 	 #dd if=/dev/urandom of="$DM_DEV_DIR/$vg1/$lv" bs=4096 count=10
| [ 0:00] ## Line: 186 	 $MKFS "$DM_DEV_DIR/$vg1/$lv"
| [ 0:00] ## Line: 187 	 lvremove -f $vg1/snap
| [ 0:00] ## Line: 188 	 
| [ 0:00] ## Line: 189 	 # Undeleted header would trigger attempt to access
| [ 0:00] ## Line: 190 	 # beyond end of COW device
| [ 0:00] ## Line: 191 	 # Fails to create when chunk size is different
| [ 0:00] ## Line: 192 	 lvcreate -s -pr -l12 -n snap $vg1/$lv
| [ 0:00] ## Line: 193 	 
| [ 0:00] ## Line: 194 	 # When header is undelete, fails to read snapshot without read errors
| [ 0:00] ## Line: 195 	 #dd if="$DM_DEV_DIR/$vg1/snap" of=/dev/null bs=1M count=2
| [ 0:00] ## Line: 196 	 fsck -n "$DM_DEV_DIR/$vg1/snap"
| [ 0:00] ## Line: 197 	 
| [ 0:00] ## Line: 198 	 # This test would trigger read of weird percentage for undeleted header
| [ 0:00] ## Line: 199 	 # And since older snapshot target counts with metadata sectors
| [ 0:00] ## Line: 200 	 # we have 2 valid results  (unsure about correct version number)
| [ 0:00] ## Line: 201 	 check lv_field $vg1/snap data_percent "$EXPECT4"
| [ 0:00] ## Line: 202 	 
| [ 0:00] ## Line: 203 	 vgremove -ff $vg1
| [ 0:00] aux teardown
| [ 0:00] #snapshot-usage.sh:1+ aux teardown
| [ 0:00] ## teardown.........ok
###       failed: [ndev-vanilla] shell/snapshot-usage.sh

| [ 0:00] Library version:   1.02.146 (2017-12-18)
| [ 0:00] Driver version:    4.35.0
| [ 0:00] Kernel is Linux localhost.localdomain 3.10.0-693.11.1.el7.x86_64 #1 SMP Mon Dec 4 23:52:40 UTC 2017 x86_64 GNU/Linux
| [ 0:00] Selinux mode is not installed.
| [ 0:00]               total        used        free      shared  buff/cache   available
| [ 0:00] Mem:           7822        1081        4141          10        2600        6434
| [ 0:00] Swap:          4095           0        4095
| [ 0:00] Filesystem      Size  Used Avail Use% Mounted on
| [ 0:00] /dev/sdc1        18G  8.4G  8.4G  50% /
| [ 0:00] /dev/sdd1        51G  6.1G   43G  13% /lfskernel
| [ 0:00] devtmpfs        3.9G     0  3.9G   0% /dev
| [ 0:00] tmpfs           3.9G     0  3.9G   0% /run
| [ 0:00] @TESTDIR=/tmp/LVMTEST23225.bh7NYm5fCH
| [ 0:00] @PREFIX=LVMTEST23225
| [ 0:00] ## LVMCONF: activation {
| [ 0:00] ## LVMCONF:     checks = 1
| [ 0:00] ## LVMCONF:     monitoring = 0
| [ 0:00] ## LVMCONF:     polling_interval = 1
| [ 0:00] ## LVMCONF:     raid_region_size = 512
| [ 0:00] ## LVMCONF:     retry_deactivation = 1
| [ 0:00] ## LVMCONF:     snapshot_autoextend_percent = 50
| [ 0:00] ## LVMCONF:     snapshot_autoextend_threshold = 50
| [ 0:00] ## LVMCONF:     udev_rules = 1
| [ 0:00] ## LVMCONF:     udev_sync = 1
| [ 0:00] ## LVMCONF:     verify_udev_operations = 1
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: allocation {
| [ 0:00] ## LVMCONF:     wipe_signatures_when_zeroing_new_lvs = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: backup {
| [ 0:00] ## LVMCONF:     archive = 0
| [ 0:00] ## LVMCONF:     backup = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: devices {
| [ 0:00] ## LVMCONF:     cache_dir = "@TESTDIR@/etc"
| [ 0:00] ## LVMCONF:     default_data_alignment = 1
| [ 0:00] ## LVMCONF:     dir = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     filter = "a|.*|"
| [ 0:00] ## LVMCONF:     global_filter = [ "a|@TESTDIR@/dev/mapper/@PREFIX@.*pv[0-9_]*$|", "r|.*|" ]
| [ 0:00] ## LVMCONF:     md_component_detection  = 0
| [ 0:00] ## LVMCONF:     scan = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     sysfs_scan = 1
| [ 0:00] ## LVMCONF:     write_cache_state = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: dmeventd {
| [ 0:00] ## LVMCONF:     executable = "/sources/boot/LVM2.2.02.177/test/lib/dmeventd"
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: global {
| [ 0:00] ## LVMCONF:     abort_on_internal_errors = 1
| [ 0:00] ## LVMCONF:     cache_check_executable = "/usr/sbin/cache_check"
| [ 0:00] ## LVMCONF:     cache_dump_executable = "/usr/sbin/cache_dump"
| [ 0:00] ## LVMCONF:     cache_repair_executable = "/usr/sbin/cache_repair"
| [ 0:00] ## LVMCONF:     detect_internal_vg_cache_corruption = 1
| [ 0:00] ## LVMCONF:     fallback_to_local_locking = 0
| [ 0:00] ## LVMCONF:     fsadm_executable = "/sources/boot/LVM2.2.02.177/test/lib/fsadm"
| [ 0:00] ## LVMCONF:     library_dir = "@TESTDIR@/lib"
| [ 0:00] ## LVMCONF:     locking_dir = "@TESTDIR@/var/lock/lvm"
| [ 0:00] ## LVMCONF:     locking_type=1
| [ 0:00] ## LVMCONF:     notify_dbus = 0
| [ 0:00] ## LVMCONF:     si_unit_consistency = 1
| [ 0:00] ## LVMCONF:     thin_check_executable = "/usr/sbin/thin_check"
| [ 0:00] ## LVMCONF:     thin_dump_executable = "/usr/sbin/thin_dump"
| [ 0:00] ## LVMCONF:     thin_repair_executable = "/usr/sbin/thin_repair"
| [ 0:00] ## LVMCONF:     use_lvmetad = 0
| [ 0:00] ## LVMCONF:     use_lvmlockd = 0
| [ 0:00] ## LVMCONF:     use_lvmpolld = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: log {
| [ 0:00] ## LVMCONF:     activation = 1
| [ 0:00] ## LVMCONF:     file = "@TESTDIR@/debug.log"
| [ 0:00] ## LVMCONF:     indent = 1
| [ 0:00] ## LVMCONF:     level = 9
| [ 0:00] ## LVMCONF:     overwrite = 1
| [ 0:00] ## LVMCONF:     syslog = 0
| [ 0:00] ## LVMCONF:     verbose = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] <======== Processing test: "snapshots-of-mirrors.sh" ========>
| [ 0:00] 
| [ 0:00] aux prepare_vg 4
| [ 0:00] #snapshots-of-mirrors.sh:17+ aux prepare_vg 4
| [ 0:00] ## preparing loop device....ok (/dev/loop0)
| [ 0:00] ## preparing 4 devices...lib/utils: line 212: DM_UDEV_COOKIE: unbound variable
| [ 0:00] set +vx; STACKTRACE; set -vx
| [ 0:00] ##snapshots-of-mirrors.sh:17+ set +vx
| [ 0:00] ## - /lfskernel/sources/boot/LVM2.2.02.177/test/shell/snapshots-of-mirrors.sh:17
| [ 0:00] ## 1 STACKTRACE() called from /lfskernel/sources/boot/LVM2.2.02.177/test/shell/snapshots-of-mirrors.sh:17
| [ 0:00] <======== Info ========>
| [ 0:00] ## DMINFO:   Name             Maj Min Stat Open Targ Event  UUID                                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv4  253   5 L--w    0    1      0 TEST-@PREFIX@pv4                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv3  253   4 L--w    0    1      0 TEST-@PREFIX@pv3                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv2  253   3 L--w    0    1      0 TEST-@PREFIX@pv2                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv1  253   6 L--w    0    1      0 TEST-@PREFIX@pv1                                                
| [ 0:00] <======== Active table ========>
| [ 0:00] ## DMTABLE:  @PREFIX@pv4: 0 69632 linear 7:0 210944
| [ 0:00] ## DMTABLE:  @PREFIX@pv3: 0 69632 linear 7:0 141312
| [ 0:00] ## DMTABLE:  @PREFIX@pv2: 0 69632 linear 7:0 71680
| [ 0:00] ## DMTABLE:  @PREFIX@pv1: 0 69632 linear 7:0 2048
| [ 0:00] <======== Inactive table ========>
| [ 0:00] ## DMITABLE: @PREFIX@pv4: 
| [ 0:00] ## DMITABLE: @PREFIX@pv3: 
| [ 0:00] ## DMITABLE: @PREFIX@pv2: 
| [ 0:00] ## DMITABLE: @PREFIX@pv1: 
| [ 0:00] <======== Status ========>
| [ 0:00] ## DMSTATUS: @PREFIX@pv4: 0 69632 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv3: 0 69632 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv2: 0 69632 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv1: 0 69632 linear 
| [ 0:00] <======== Tree ========>
| [ 0:00] ## DMTREE:   @PREFIX@pv4 (253:5)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   @PREFIX@pv3 (253:4)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   @PREFIX@pv2 (253:3)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   @PREFIX@pv1 (253:6)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   LFS_vg-lfs (253:2)
| [ 0:00] ## DMTREE:    `- (8:16)
| [ 0:00] ## DMTREE:   centos-swap (253:1)
| [ 0:00] ## DMTREE:    `- (8:2)
| [ 0:00] ## DMTREE:   centos-root (253:0)
| [ 0:00] ## DMTREE:    `- (8:2)
| [ 0:00] <======== Recursive list of @TESTDIR@/dev ========>
| [ 0:00] ## LSLR:	@TESTDIR@/dev:
| [ 0:00] ## LSLR:	total 4
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 0 Feb 21 02:27 loop0
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 1 Feb 21 02:27 loop1
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 2 Feb 21 02:27 loop2
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 3 Feb 21 02:27 loop3
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 4 Feb 21 02:27 loop4
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 5 Feb 21 02:27 loop5
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 6 Feb 21 02:27 loop6
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 7 Feb 21 02:27 loop7
| [ 0:00] ## LSLR:	drwxr-xr-x 2 root root 4096 Feb 21 02:27 mapper
| [ 0:00] ## LSLR:	crw-r--r-- 1 root root 1, 3 Feb 21 02:27 testnull
| [ 0:00] ## LSLR:	
| [ 0:00] ## LSLR:	@TESTDIR@/dev/mapper:
| [ 0:00] ## LSLR:	total 0
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   6 Feb 21 02:27 @PREFIX@pv1
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   3 Feb 21 02:27 @PREFIX@pv2
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   4 Feb 21 02:27 @PREFIX@pv3
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   5 Feb 21 02:27 @PREFIX@pv4
| [ 0:00] ## LSLR:	crw------- 1 root root  10, 236 Feb 21 02:27 control
| [ 0:00] <======== Udev DB content ========>
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-0
| [ 0:00] ## UDEV:	N: dm-0
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-0
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-0
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=0
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-1
| [ 0:00] ## UDEV:	N: dm-1
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-1
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-1
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=1
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-2
| [ 0:00] ## UDEV:	N: dm-2
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-2
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-2
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=2
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-3
| [ 0:00] ## UDEV:	N: dm-3
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-3
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-3
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=3
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-4
| [ 0:00] ## UDEV:	N: dm-4
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-4
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-4
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=4
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-5
| [ 0:00] ## UDEV:	N: dm-5
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-5
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-5
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=5
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-6
| [ 0:00] ## UDEV:	N: dm-6
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-6
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-6
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=6
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/loop0
| [ 0:00] ## UDEV:	N: loop0
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/loop0
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/loop0
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=7
| [ 0:00] ## UDEV:	E: MINOR=0
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] <======== Script file "snapshots-of-mirrors.sh" ========>
| [ 0:00] ## Line: 1 	 #!/usr/bin/env bash
| [ 0:00] ## Line: 2 	 
| [ 0:00] ## Line: 3 	 # Copyright (C) 2010 Red Hat, Inc. All rights reserved.
| [ 0:00] ## Line: 4 	 #
| [ 0:00] ## Line: 5 	 # This copyrighted material is made available to anyone wishing to use,
| [ 0:00] ## Line: 6 	 # modify, copy, or redistribute it subject to the terms and conditions
| [ 0:00] ## Line: 7 	 # of the GNU General Public License v.2.
| [ 0:00] ## Line: 8 	 #
| [ 0:00] ## Line: 9 	 # You should have received a copy of the GNU General Public License
| [ 0:00] ## Line: 10 	 # along with this program; if not, write to the Free Software Foundation,
| [ 0:00] ## Line: 11 	 # Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA
| [ 0:00] ## Line: 12 	 
| [ 0:00] ## Line: 13 	 SKIP_WITH_LVMLOCKD=1
| [ 0:00] ## Line: 14 	 
| [ 0:00] ## Line: 15 	 . lib/inittest
| [ 0:00] ## Line: 16 	 
| [ 0:00] ## Line: 17 	 aux prepare_vg 4
| [ 0:00] ## Line: 18 	 
| [ 0:00] ## Line: 19 	 lvcreate -aey --type mirror -m 1 -L 10M --nosync -n lv $vg
| [ 0:00] ## Line: 20 	 
| [ 0:00] ## Line: 21 	 # Create snapshot of a mirror origin
| [ 0:00] ## Line: 22 	 lvcreate -s $vg/lv -L 10M -n snap
| [ 0:00] ## Line: 23 	 
| [ 0:00] ## Line: 24 	 # Down-convert (mirror -> linear) under a snapshot
| [ 0:00] ## Line: 25 	 lvconvert -m0 $vg/lv
| [ 0:00] ## Line: 26 	 
| [ 0:00] ## Line: 27 	 # Up-convert (linear -> mirror)
| [ 0:00] ## Line: 28 	 lvconvert --type mirror -m2 $vg/lv
| [ 0:00] ## Line: 29 	 
| [ 0:00] ## Line: 30 	 # Down-convert (mirror -> mirror)
| [ 0:00] ## Line: 31 	 lvconvert -m 1 $vg/lv
| [ 0:00] ## Line: 32 	 
| [ 0:00] ## Line: 33 	 # Up-convert (mirror -> mirror) -- Not supported!
| [ 0:00] ## Line: 34 	 not lvconvert -m2 $vg/lv
| [ 0:00] ## Line: 35 	 
| [ 0:00] ## Line: 36 	 # Log conversion (disk -> core)
| [ 0:00] ## Line: 37 	 lvconvert --mirrorlog core $vg/lv
| [ 0:00] ## Line: 38 	 
| [ 0:00] ## Line: 39 	 # Log conversion (core -> mirrored)
| [ 0:00] ## Line: 40 	 # FIXME on cluster
| [ 0:00] ## Line: 41 	 SHOULD=""
| [ 0:00] ## Line: 42 	 test -e LOCAL_CLVMD && SHOULD=should
| [ 0:00] ## Line: 43 	 $SHOULD lvconvert --mirrorlog mirrored $vg/lv
| [ 0:00] ## Line: 44 	 
| [ 0:00] ## Line: 45 	 # Log conversion (mirrored -> core)
| [ 0:00] ## Line: 46 	 lvconvert --mirrorlog core $vg/lv
| [ 0:00] ## Line: 47 	 
| [ 0:00] ## Line: 48 	 # Log conversion (core -> disk)
| [ 0:00] ## Line: 49 	 lvconvert --mirrorlog disk $vg/lv
| [ 0:00] ## Line: 50 	 
| [ 0:00] ## Line: 51 	 ## Clean-up
| [ 0:00] ## Line: 52 	 vgremove -f $vg
| [ 0:00] aux teardown
| [ 0:00] #snapshots-of-mirrors.sh:1+ aux teardown
| [ 0:00] ## teardown.........ok
###       failed: [ndev-vanilla] shell/snapshots-of-mirrors.sh

| [ 0:00] Library version:   1.02.146 (2017-12-18)
| [ 0:00] Driver version:    4.35.0
| [ 0:00] Kernel is Linux localhost.localdomain 3.10.0-693.11.1.el7.x86_64 #1 SMP Mon Dec 4 23:52:40 UTC 2017 x86_64 GNU/Linux
| [ 0:00] Selinux mode is not installed.
| [ 0:00]               total        used        free      shared  buff/cache   available
| [ 0:00] Mem:           7822        1081        4141          10        2600        6434
| [ 0:00] Swap:          4095           0        4095
| [ 0:00] Filesystem      Size  Used Avail Use% Mounted on
| [ 0:00] /dev/sdc1        18G  8.4G  8.4G  50% /
| [ 0:00] /dev/sdd1        51G  6.1G   43G  13% /lfskernel
| [ 0:00] devtmpfs        3.9G     0  3.9G   0% /dev
| [ 0:00] tmpfs           3.9G     0  3.9G   0% /run
| [ 0:00] @TESTDIR=/tmp/LVMTEST23429.jXnBQoCMTC
| [ 0:00] @PREFIX=LVMTEST23429
| [ 0:00] ## LVMCONF: activation {
| [ 0:00] ## LVMCONF:     checks = 1
| [ 0:00] ## LVMCONF:     monitoring = 0
| [ 0:00] ## LVMCONF:     polling_interval = 1
| [ 0:00] ## LVMCONF:     raid_region_size = 512
| [ 0:00] ## LVMCONF:     retry_deactivation = 1
| [ 0:00] ## LVMCONF:     snapshot_autoextend_percent = 50
| [ 0:00] ## LVMCONF:     snapshot_autoextend_threshold = 50
| [ 0:00] ## LVMCONF:     udev_rules = 1
| [ 0:00] ## LVMCONF:     udev_sync = 1
| [ 0:00] ## LVMCONF:     verify_udev_operations = 1
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: allocation {
| [ 0:00] ## LVMCONF:     wipe_signatures_when_zeroing_new_lvs = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: backup {
| [ 0:00] ## LVMCONF:     archive = 0
| [ 0:00] ## LVMCONF:     backup = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: devices {
| [ 0:00] ## LVMCONF:     cache_dir = "@TESTDIR@/etc"
| [ 0:00] ## LVMCONF:     default_data_alignment = 1
| [ 0:00] ## LVMCONF:     dir = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     filter = "a|.*|"
| [ 0:00] ## LVMCONF:     global_filter = [ "a|@TESTDIR@/dev/mapper/@PREFIX@.*pv[0-9_]*$|", "r|.*|" ]
| [ 0:00] ## LVMCONF:     md_component_detection  = 0
| [ 0:00] ## LVMCONF:     scan = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     sysfs_scan = 1
| [ 0:00] ## LVMCONF:     write_cache_state = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: dmeventd {
| [ 0:00] ## LVMCONF:     executable = "/sources/boot/LVM2.2.02.177/test/lib/dmeventd"
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: global {
| [ 0:00] ## LVMCONF:     abort_on_internal_errors = 1
| [ 0:00] ## LVMCONF:     cache_check_executable = "/usr/sbin/cache_check"
| [ 0:00] ## LVMCONF:     cache_dump_executable = "/usr/sbin/cache_dump"
| [ 0:00] ## LVMCONF:     cache_repair_executable = "/usr/sbin/cache_repair"
| [ 0:00] ## LVMCONF:     detect_internal_vg_cache_corruption = 1
| [ 0:00] ## LVMCONF:     fallback_to_local_locking = 0
| [ 0:00] ## LVMCONF:     fsadm_executable = "/sources/boot/LVM2.2.02.177/test/lib/fsadm"
| [ 0:00] ## LVMCONF:     library_dir = "@TESTDIR@/lib"
| [ 0:00] ## LVMCONF:     locking_dir = "@TESTDIR@/var/lock/lvm"
| [ 0:00] ## LVMCONF:     locking_type=1
| [ 0:00] ## LVMCONF:     notify_dbus = 0
| [ 0:00] ## LVMCONF:     si_unit_consistency = 1
| [ 0:00] ## LVMCONF:     thin_check_executable = "/usr/sbin/thin_check"
| [ 0:00] ## LVMCONF:     thin_dump_executable = "/usr/sbin/thin_dump"
| [ 0:00] ## LVMCONF:     thin_repair_executable = "/usr/sbin/thin_repair"
| [ 0:00] ## LVMCONF:     use_lvmetad = 0
| [ 0:00] ## LVMCONF:     use_lvmlockd = 0
| [ 0:00] ## LVMCONF:     use_lvmpolld = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: log {
| [ 0:00] ## LVMCONF:     activation = 1
| [ 0:00] ## LVMCONF:     file = "@TESTDIR@/debug.log"
| [ 0:00] ## LVMCONF:     indent = 1
| [ 0:00] ## LVMCONF:     level = 9
| [ 0:00] ## LVMCONF:     overwrite = 1
| [ 0:00] ## LVMCONF:     syslog = 0
| [ 0:00] ## LVMCONF:     verbose = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] <======== Processing test: "stray-device-node.sh" ========>
| [ 0:00] 
| [ 0:00] aux prepare_devs 3
| [ 0:00] #stray-device-node.sh:18+ aux prepare_devs 3
| [ 0:00] ## preparing loop device....ok (/dev/loop0)
| [ 0:00] ## preparing 3 devices...lib/utils: line 212: DM_UDEV_COOKIE: unbound variable
| [ 0:00] set +vx; STACKTRACE; set -vx
| [ 0:00] ##stray-device-node.sh:18+ set +vx
| [ 0:00] ## - /lfskernel/sources/boot/LVM2.2.02.177/test/shell/stray-device-node.sh:18
| [ 0:00] ## 1 STACKTRACE() called from /lfskernel/sources/boot/LVM2.2.02.177/test/shell/stray-device-node.sh:18
| [ 0:00] <======== Info ========>
| [ 0:00] ## DMINFO:   Name             Maj Min Stat Open Targ Event  UUID                                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv3  253   3 L--w    0    1      0 TEST-@PREFIX@pv3                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv2  253   5 L--w    0    1      0 TEST-@PREFIX@pv2                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv1  253   4 L--w    0    1      0 TEST-@PREFIX@pv1                                                
| [ 0:00] <======== Active table ========>
| [ 0:00] ## DMTABLE:  @PREFIX@pv3: 0 69632 linear 7:0 141312
| [ 0:00] ## DMTABLE:  @PREFIX@pv2: 0 69632 linear 7:0 71680
| [ 0:00] ## DMTABLE:  @PREFIX@pv1: 0 69632 linear 7:0 2048
| [ 0:00] <======== Inactive table ========>
| [ 0:00] ## DMITABLE: @PREFIX@pv3: 
| [ 0:00] ## DMITABLE: @PREFIX@pv2: 
| [ 0:00] ## DMITABLE: @PREFIX@pv1: 
| [ 0:00] <======== Status ========>
| [ 0:00] ## DMSTATUS: @PREFIX@pv3: 0 69632 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv2: 0 69632 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv1: 0 69632 linear 
| [ 0:00] <======== Tree ========>
| [ 0:00] ## DMTREE:   @PREFIX@pv3 (253:3)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   @PREFIX@pv2 (253:5)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   @PREFIX@pv1 (253:4)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   LFS_vg-lfs (253:2)
| [ 0:00] ## DMTREE:    `- (8:16)
| [ 0:00] ## DMTREE:   centos-swap (253:1)
| [ 0:00] ## DMTREE:    `- (8:2)
| [ 0:00] ## DMTREE:   centos-root (253:0)
| [ 0:00] ## DMTREE:    `- (8:2)
| [ 0:00] <======== Recursive list of @TESTDIR@/dev ========>
| [ 0:00] ## LSLR:	@TESTDIR@/dev:
| [ 0:00] ## LSLR:	total 4
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 0 Feb 21 02:27 loop0
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 1 Feb 21 02:27 loop1
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 2 Feb 21 02:27 loop2
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 3 Feb 21 02:27 loop3
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 4 Feb 21 02:27 loop4
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 5 Feb 21 02:27 loop5
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 6 Feb 21 02:27 loop6
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 7 Feb 21 02:27 loop7
| [ 0:00] ## LSLR:	drwxr-xr-x 2 root root 4096 Feb 21 02:27 mapper
| [ 0:00] ## LSLR:	crw-r--r-- 1 root root 1, 3 Feb 21 02:27 testnull
| [ 0:00] ## LSLR:	
| [ 0:00] ## LSLR:	@TESTDIR@/dev/mapper:
| [ 0:00] ## LSLR:	total 0
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   4 Feb 21 02:27 @PREFIX@pv1
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   5 Feb 21 02:27 @PREFIX@pv2
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   3 Feb 21 02:27 @PREFIX@pv3
| [ 0:00] ## LSLR:	crw------- 1 root root  10, 236 Feb 21 02:27 control
| [ 0:00] <======== Udev DB content ========>
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-0
| [ 0:00] ## UDEV:	N: dm-0
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-0
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-0
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=0
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-1
| [ 0:00] ## UDEV:	N: dm-1
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-1
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-1
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=1
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-2
| [ 0:00] ## UDEV:	N: dm-2
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-2
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-2
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=2
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-3
| [ 0:00] ## UDEV:	N: dm-3
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-3
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-3
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=3
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-4
| [ 0:00] ## UDEV:	N: dm-4
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-4
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-4
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=4
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-5
| [ 0:00] ## UDEV:	N: dm-5
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-5
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-5
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=5
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/loop0
| [ 0:00] ## UDEV:	N: loop0
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/loop0
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/loop0
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=7
| [ 0:00] ## UDEV:	E: MINOR=0
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] <======== Script file "stray-device-node.sh" ========>
| [ 0:00] ## Line: 1 	 #!/usr/bin/env bash
| [ 0:00] ## Line: 2 	 
| [ 0:00] ## Line: 3 	 # Copyright (C) 2014 Red Hat, Inc. All rights reserved.
| [ 0:00] ## Line: 4 	 #
| [ 0:00] ## Line: 5 	 # This copyrighted material is made available to anyone wishing to use,
| [ 0:00] ## Line: 6 	 # modify, copy, or redistribute it subject to the terms and conditions
| [ 0:00] ## Line: 7 	 # of the GNU General Public License v.2.
| [ 0:00] ## Line: 8 	 #
| [ 0:00] ## Line: 9 	 # You should have received a copy of the GNU General Public License
| [ 0:00] ## Line: 10 	 # along with this program; if not, write to the Free Software Foundation,
| [ 0:00] ## Line: 11 	 # Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA
| [ 0:00] ## Line: 12 	 
| [ 0:00] ## Line: 13 	 SKIP_WITH_LVMLOCKD=1
| [ 0:00] ## Line: 14 	 SKIP_WITH_LVMPOLLD=1
| [ 0:00] ## Line: 15 	 
| [ 0:00] ## Line: 16 	 . lib/inittest
| [ 0:00] ## Line: 17 	 
| [ 0:00] ## Line: 18 	 aux prepare_devs 3
| [ 0:00] ## Line: 19 	 get_devs
| [ 0:00] ## Line: 20 	 
| [ 0:00] ## Line: 21 	 cp -r "$dev1" "$DM_DEV_DIR/stray"
| [ 0:00] ## Line: 22 	 
| [ 0:00] ## Line: 23 	 vgcreate "$vg" "${DEVICES[@]}"
| [ 0:00] ## Line: 24 	 lvcreate -an -Zn --type mirror -m 1 -l 1 -n mirror $vg
| [ 0:00] ## Line: 25 	 aux disable_dev "$dev1"
| [ 0:00] ## Line: 26 	 # FIXME:
| [ 0:00] ## Line: 27 	 # for the .cache use case we need to run pvscan
| [ 0:00] ## Line: 28 	 # to keep clvmd in sync.
| [ 0:00] ## Line: 29 	 pvscan
| [ 0:00] ## Line: 30 	 vgreduce --removemissing --force $vg
| [ 0:00] ## Line: 31 	 aux enable_dev "$dev1"
| [ 0:00] aux teardown
| [ 0:00] #stray-device-node.sh:1+ aux teardown
| [ 0:00] ## teardown.........ok
###       failed: [ndev-vanilla] shell/stray-device-node.sh

| [ 0:00] Library version:   1.02.146 (2017-12-18)
| [ 0:00] Driver version:    4.35.0
| [ 0:00] Kernel is Linux localhost.localdomain 3.10.0-693.11.1.el7.x86_64 #1 SMP Mon Dec 4 23:52:40 UTC 2017 x86_64 GNU/Linux
| [ 0:00] Selinux mode is not installed.
| [ 0:00]               total        used        free      shared  buff/cache   available
| [ 0:00] Mem:           7822        1080        4141          10        2600        6435
| [ 0:00] Swap:          4095           0        4095
| [ 0:00] Filesystem      Size  Used Avail Use% Mounted on
| [ 0:00] /dev/sdc1        18G  8.4G  8.4G  50% /
| [ 0:00] /dev/sdd1        51G  6.1G   43G  13% /lfskernel
| [ 0:00] devtmpfs        3.9G     0  3.9G   0% /dev
| [ 0:00] tmpfs           3.9G     0  3.9G   0% /run
| [ 0:00] @TESTDIR=/tmp/LVMTEST23609.STnRynifiR
| [ 0:00] @PREFIX=LVMTEST23609
| [ 0:00] ## LVMCONF: activation {
| [ 0:00] ## LVMCONF:     checks = 1
| [ 0:00] ## LVMCONF:     monitoring = 0
| [ 0:00] ## LVMCONF:     polling_interval = 1
| [ 0:00] ## LVMCONF:     raid_region_size = 512
| [ 0:00] ## LVMCONF:     retry_deactivation = 1
| [ 0:00] ## LVMCONF:     snapshot_autoextend_percent = 50
| [ 0:00] ## LVMCONF:     snapshot_autoextend_threshold = 50
| [ 0:00] ## LVMCONF:     udev_rules = 1
| [ 0:00] ## LVMCONF:     udev_sync = 1
| [ 0:00] ## LVMCONF:     verify_udev_operations = 1
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: allocation {
| [ 0:00] ## LVMCONF:     wipe_signatures_when_zeroing_new_lvs = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: backup {
| [ 0:00] ## LVMCONF:     archive = 0
| [ 0:00] ## LVMCONF:     backup = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: devices {
| [ 0:00] ## LVMCONF:     cache_dir = "@TESTDIR@/etc"
| [ 0:00] ## LVMCONF:     default_data_alignment = 1
| [ 0:00] ## LVMCONF:     dir = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     filter = "a|.*|"
| [ 0:00] ## LVMCONF:     global_filter = [ "a|@TESTDIR@/dev/mapper/@PREFIX@.*pv[0-9_]*$|", "r|.*|" ]
| [ 0:00] ## LVMCONF:     md_component_detection  = 0
| [ 0:00] ## LVMCONF:     scan = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     sysfs_scan = 1
| [ 0:00] ## LVMCONF:     write_cache_state = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: dmeventd {
| [ 0:00] ## LVMCONF:     executable = "/sources/boot/LVM2.2.02.177/test/lib/dmeventd"
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: global {
| [ 0:00] ## LVMCONF:     abort_on_internal_errors = 1
| [ 0:00] ## LVMCONF:     cache_check_executable = "/usr/sbin/cache_check"
| [ 0:00] ## LVMCONF:     cache_dump_executable = "/usr/sbin/cache_dump"
| [ 0:00] ## LVMCONF:     cache_repair_executable = "/usr/sbin/cache_repair"
| [ 0:00] ## LVMCONF:     detect_internal_vg_cache_corruption = 1
| [ 0:00] ## LVMCONF:     fallback_to_local_locking = 0
| [ 0:00] ## LVMCONF:     fsadm_executable = "/sources/boot/LVM2.2.02.177/test/lib/fsadm"
| [ 0:00] ## LVMCONF:     library_dir = "@TESTDIR@/lib"
| [ 0:00] ## LVMCONF:     locking_dir = "@TESTDIR@/var/lock/lvm"
| [ 0:00] ## LVMCONF:     locking_type=1
| [ 0:00] ## LVMCONF:     notify_dbus = 0
| [ 0:00] ## LVMCONF:     si_unit_consistency = 1
| [ 0:00] ## LVMCONF:     thin_check_executable = "/usr/sbin/thin_check"
| [ 0:00] ## LVMCONF:     thin_dump_executable = "/usr/sbin/thin_dump"
| [ 0:00] ## LVMCONF:     thin_repair_executable = "/usr/sbin/thin_repair"
| [ 0:00] ## LVMCONF:     use_lvmetad = 0
| [ 0:00] ## LVMCONF:     use_lvmlockd = 0
| [ 0:00] ## LVMCONF:     use_lvmpolld = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: log {
| [ 0:00] ## LVMCONF:     activation = 1
| [ 0:00] ## LVMCONF:     file = "@TESTDIR@/debug.log"
| [ 0:00] ## LVMCONF:     indent = 1
| [ 0:00] ## LVMCONF:     level = 9
| [ 0:00] ## LVMCONF:     overwrite = 1
| [ 0:00] ## LVMCONF:     syslog = 0
| [ 0:00] ## LVMCONF:     verbose = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] <======== Processing test: "system_id.sh" ========>
| [ 0:00] 
| [ 0:00] aux prepare_devs 1
| [ 0:00] #system_id.sh:23+ aux prepare_devs 1
| [ 0:00] ## preparing loop device....ok (/dev/loop0)
| [ 0:00] ## preparing 1 devices...lib/utils: line 212: DM_UDEV_COOKIE: unbound variable
| [ 0:00] set +vx; STACKTRACE; set -vx
| [ 0:00] ##system_id.sh:23+ set +vx
| [ 0:00] ## - /lfskernel/sources/boot/LVM2.2.02.177/test/shell/system_id.sh:23
| [ 0:00] ## 1 STACKTRACE() called from /lfskernel/sources/boot/LVM2.2.02.177/test/shell/system_id.sh:23
| [ 0:00] <======== Info ========>
| [ 0:00] ## DMINFO:   Name             Maj Min Stat Open Targ Event  UUID                                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv1  253   3 L--w    0    1      0 TEST-@PREFIX@pv1                                                
| [ 0:00] <======== Active table ========>
| [ 0:00] ## DMTABLE:  @PREFIX@pv1: 0 69632 linear 7:0 2048
| [ 0:00] <======== Inactive table ========>
| [ 0:00] ## DMITABLE: @PREFIX@pv1: 
| [ 0:00] <======== Status ========>
| [ 0:00] ## DMSTATUS: @PREFIX@pv1: 0 69632 linear 
| [ 0:00] <======== Tree ========>
| [ 0:00] ## DMTREE:   @PREFIX@pv1 (253:3)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   LFS_vg-lfs (253:2)
| [ 0:00] ## DMTREE:    `- (8:16)
| [ 0:00] ## DMTREE:   centos-swap (253:1)
| [ 0:00] ## DMTREE:    `- (8:2)
| [ 0:00] ## DMTREE:   centos-root (253:0)
| [ 0:00] ## DMTREE:    `- (8:2)
| [ 0:00] <======== Recursive list of @TESTDIR@/dev ========>
| [ 0:00] ## LSLR:	@TESTDIR@/dev:
| [ 0:00] ## LSLR:	total 4
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 0 Feb 21 02:27 loop0
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 1 Feb 21 02:27 loop1
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 2 Feb 21 02:27 loop2
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 3 Feb 21 02:27 loop3
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 4 Feb 21 02:27 loop4
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 5 Feb 21 02:27 loop5
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 6 Feb 21 02:27 loop6
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 7 Feb 21 02:27 loop7
| [ 0:00] ## LSLR:	drwxr-xr-x 2 root root 4096 Feb 21 02:27 mapper
| [ 0:00] ## LSLR:	crw-r--r-- 1 root root 1, 3 Feb 21 02:27 testnull
| [ 0:00] ## LSLR:	
| [ 0:00] ## LSLR:	@TESTDIR@/dev/mapper:
| [ 0:00] ## LSLR:	total 0
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   3 Feb 21 02:27 @PREFIX@pv1
| [ 0:00] ## LSLR:	crw------- 1 root root  10, 236 Feb 21 02:27 control
| [ 0:00] <======== Udev DB content ========>
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-0
| [ 0:00] ## UDEV:	N: dm-0
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-0
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-0
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=0
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-1
| [ 0:00] ## UDEV:	N: dm-1
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-1
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-1
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=1
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-2
| [ 0:00] ## UDEV:	N: dm-2
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-2
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-2
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=2
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-3
| [ 0:00] ## UDEV:	N: dm-3
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-3
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-3
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=3
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/loop0
| [ 0:00] ## UDEV:	N: loop0
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/loop0
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/loop0
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=7
| [ 0:00] ## UDEV:	E: MINOR=0
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] <======== Script file "system_id.sh" ========>
| [ 0:00] ## Line: 1 	 #!/usr/bin/env bash
| [ 0:00] ## Line: 2 	 
| [ 0:00] ## Line: 3 	 # Copyright (C) 2015 Red Hat, Inc. All rights reserved.
| [ 0:00] ## Line: 4 	 #
| [ 0:00] ## Line: 5 	 # This copyrighted material is made available to anyone wishing to use,
| [ 0:00] ## Line: 6 	 # modify, copy, or redistribute it subject to the terms and conditions
| [ 0:00] ## Line: 7 	 # of the GNU General Public License v.2.
| [ 0:00] ## Line: 8 	 #
| [ 0:00] ## Line: 9 	 # You should have received a copy of the GNU General Public License
| [ 0:00] ## Line: 10 	 # along with this program; if not, write to the Free Software Foundation,
| [ 0:00] ## Line: 11 	 # Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA
| [ 0:00] ## Line: 12 	 
| [ 0:00] ## Line: 13 	 test_description='Test system_id'
| [ 0:00] ## Line: 14 	 SKIP_WITH_LVMLOCKD=1
| [ 0:00] ## Line: 15 	 SKIP_WITH_LVMPOLLD=1
| [ 0:00] ## Line: 16 	 
| [ 0:00] ## Line: 17 	 print_lvmlocal() {
| [ 0:00] ## Line: 18 	 	{ echo "local {"; printf "%s\n" "$@"; echo "}"; } >"$LVMLOCAL"
| [ 0:00] ## Line: 19 	 }
| [ 0:00] ## Line: 20 	 
| [ 0:00] ## Line: 21 	 . lib/inittest
| [ 0:00] ## Line: 22 	 
| [ 0:00] ## Line: 23 	 aux prepare_devs 1
| [ 0:00] ## Line: 24 	 
| [ 0:00] ## Line: 25 	 SIDFILE="etc/lvm_test.conf"
| [ 0:00] ## Line: 26 	 LVMLOCAL="etc/lvmlocal.conf"
| [ 0:00] ## Line: 27 	 
| [ 0:00] ## Line: 28 	 # with clvm enabled, vgcreate with no -c option creates a clustered vg,
| [ 0:00] ## Line: 29 	 # which should have no system id
| [ 0:00] ## Line: 30 	 
| [ 0:00] ## Line: 31 	 if [ -e LOCAL_CLVMD ]; then
| [ 0:00] ## Line: 32 	 SID1=sidfoolocal
| [ 0:00] ## Line: 33 	 SID2=""
| [ 0:00] ## Line: 34 	 print_lvmlocal "  system_id = $SID1"
| [ 0:00] ## Line: 35 	 aux lvmconf "global/system_id_source = lvmlocal"
| [ 0:00] ## Line: 36 	 vgcreate $vg1 "$dev1"
| [ 0:00] ## Line: 37 	 vgs -o+systemid $vg1
| [ 0:00] ## Line: 38 	 check vg_field $vg1 systemid "$SID2"
| [ 0:00] ## Line: 39 	 vgremove $vg1
| [ 0:00] ## Line: 40 	 rm -f "$LVMLOCAL"
| [ 0:00] ## Line: 41 	 exit 0
| [ 0:00] ## Line: 42 	 fi
| [ 0:00] ## Line: 43 	 
| [ 0:00] ## Line: 44 	 # create vg with system_id using each source
| [ 0:00] ## Line: 45 	 
| [ 0:00] ## Line: 46 	 ## none
| [ 0:00] ## Line: 47 	 
| [ 0:00] ## Line: 48 	 SID=""
| [ 0:00] ## Line: 49 	 aux lvmconf "global/system_id_source = none"
| [ 0:00] ## Line: 50 	 vgcreate $vg1 "$dev1"
| [ 0:00] ## Line: 51 	 check vg_field $vg1 systemid "$SID"
| [ 0:00] ## Line: 52 	 vgremove $vg1
| [ 0:00] ## Line: 53 	 
| [ 0:00] ## Line: 54 	 # FIXME - print 'life' config data
| [ 0:00] ## Line: 55 	 eval "$(lvmconfig global/etc 2>/dev/null || lvmconfig --type default global/etc)"
| [ 0:00] ## Line: 56 	 
| [ 0:00] ## Line: 57 	 ## machineid
| [ 0:00] ## Line: 58 	 if [ -e "$etc/machine-id" ]; then
| [ 0:00] ## Line: 59 	 SID=$(cat "$etc/machine-id")
| [ 0:00] ## Line: 60 	 aux lvmconf "global/system_id_source = machineid"
| [ 0:00] ## Line: 61 	 vgcreate $vg1 "$dev1"
| [ 0:00] ## Line: 62 	 vgs -o+systemid $vg1
| [ 0:00] ## Line: 63 	 check vg_field $vg1 systemid "$SID"
| [ 0:00] ## Line: 64 	 vgremove $vg1
| [ 0:00] ## Line: 65 	 fi
| [ 0:00] ## Line: 66 	 
| [ 0:00] ## Line: 67 	 ## uname
| [ 0:00] ## Line: 68 	 
| [ 0:00] ## Line: 69 	 SID1=$(uname -n)
| [ 0:00] ## Line: 70 	 if [ -n "$SID1" ]; then
| [ 0:00] ## Line: 71 	 aux lvmconf "global/system_id_source = uname"
| [ 0:00] ## Line: 72 	 SID2=$(lvm systemid | awk '{ print $3 }')
| [ 0:00] ## Line: 73 	 vgcreate $vg1 "$dev1"
| [ 0:00] ## Line: 74 	 vgs -o+systemid $vg1
| [ 0:00] ## Line: 75 	 check vg_field $vg1 systemid "$SID2"
| [ 0:00] ## Line: 76 	 vgremove $vg1
| [ 0:00] ## Line: 77 	 fi
| [ 0:00] ## Line: 78 	 
| [ 0:00] ## Line: 79 	 ## lvmlocal
| [ 0:00] ## Line: 80 	 
| [ 0:00] ## Line: 81 	 SID=sidfoolocal
| [ 0:00] ## Line: 82 	 print_lvmlocal "  system_id = $SID"
| [ 0:00] ## Line: 83 	 aux lvmconf "global/system_id_source = lvmlocal"
| [ 0:00] ## Line: 84 	 vgcreate $vg1 "$dev1"
| [ 0:00] ## Line: 85 	 vgs -o+systemid $vg1
| [ 0:00] ## Line: 86 	 check vg_field $vg1 systemid "$SID"
| [ 0:00] ## Line: 87 	 vgremove $vg1
| [ 0:00] ## Line: 88 	 rm -f "$LVMLOCAL"
| [ 0:00] ## Line: 89 	 
| [ 0:00] ## Line: 90 	 ## file
| [ 0:00] ## Line: 91 	 
| [ 0:00] ## Line: 92 	 SID=sidfoofile
| [ 0:00] ## Line: 93 	 echo "$SID" > "$SIDFILE"
| [ 0:00] ## Line: 94 	 aux lvmconf "global/system_id_source = file" \
| [ 0:00] ## Line: 95 	 	    "global/system_id_file = \"$SIDFILE\""
| [ 0:00] ## Line: 96 	 vgcreate $vg1 "$dev1"
| [ 0:00] ## Line: 97 	 vgs -o+systemid $vg1
| [ 0:00] ## Line: 98 	 check vg_field $vg1 systemid "$SID"
| [ 0:00] ## Line: 99 	 vgremove $vg1
| [ 0:00] ## Line: 100 	 
| [ 0:00] ## Line: 101 	 # override system_id to create a foreign vg, then fail to use the vg
| [ 0:00] ## Line: 102 	 
| [ 0:00] ## Line: 103 	 SID1=sidfoofile1
| [ 0:00] ## Line: 104 	 SID2=sidfoofile2
| [ 0:00] ## Line: 105 	 echo "$SID1" > "$SIDFILE"
| [ 0:00] ## Line: 106 	 aux lvmconf "global/system_id_source = file" \
| [ 0:00] ## Line: 107 	 	    "global/system_id_file = \"$SIDFILE\""
| [ 0:00] ## Line: 108 	 # create a vg, overriding the local system_id so the vg looks foreign
| [ 0:00] ## Line: 109 	 vgcreate --systemid "$SID2" "$vg1" "$dev1"
| [ 0:00] ## Line: 110 	 # normal vgs is not an error and does not see the vg
| [ 0:00] ## Line: 111 	 vgs >err
| [ 0:00] ## Line: 112 	 not grep $vg1 err
| [ 0:00] ## Line: 113 	 # vgs on the foreign vg is an error and not displayed
| [ 0:00] ## Line: 114 	 not vgs $vg1 >err
| [ 0:00] ## Line: 115 	 not grep $vg1 err
| [ 0:00] ## Line: 116 	 # fail to remove foreign vg
| [ 0:00] ## Line: 117 	 not vgremove $vg1
| [ 0:00] ## Line: 118 	 # using --foreign we can see foreign vg
| [ 0:00] ## Line: 119 	 vgs --foreign >err
| [ 0:00] ## Line: 120 	 grep $vg1 err
| [ 0:00] ## Line: 121 	 vgs --foreign $vg1 >err
| [ 0:00] ## Line: 122 	 grep $vg1 err
| [ 0:00] ## Line: 123 	 # change the local system_id to the second value, making the vg not foreign
| [ 0:00] ## Line: 124 	 echo "$SID2" > "$SIDFILE"
| [ 0:00] ## Line: 125 	 # we can now see and remove the vg
| [ 0:00] ## Line: 126 	 vgs $vg1 >err
| [ 0:00] ## Line: 127 	 grep $vg1 err
| [ 0:00] ## Line: 128 	 vgremove $vg1
| [ 0:00] ## Line: 129 	 
| [ 0:00] ## Line: 130 	 # create a vg, then change the local system_id, making the vg foreign
| [ 0:00] ## Line: 131 	 
| [ 0:00] ## Line: 132 	 SID1=sidfoofile1
| [ 0:00] ## Line: 133 	 SID2=sidfoofile2
| [ 0:00] ## Line: 134 	 echo "$SID1" > "$SIDFILE"
| [ 0:00] ## Line: 135 	 aux lvmconf "global/system_id_source = file" \
| [ 0:00] ## Line: 136 	 	    "global/system_id_file = \"$SIDFILE\""
| [ 0:00] ## Line: 137 	 # create a vg
| [ 0:00] ## Line: 138 	 vgcreate $vg1 "$dev1"
| [ 0:00] ## Line: 139 	 # normal vgs sees the vg
| [ 0:00] ## Line: 140 	 vgs >err
| [ 0:00] ## Line: 141 	 grep $vg1 err
| [ 0:00] ## Line: 142 	 # change the local system_id, making the vg foreign
| [ 0:00] ## Line: 143 	 echo "$SID2" > "$SIDFILE"
| [ 0:00] ## Line: 144 	 # normal vgs doesn't see the vg
| [ 0:00] ## Line: 145 	 vgs >err
| [ 0:00] ## Line: 146 	 not grep $vg1 err
| [ 0:00] ## Line: 147 	 # using --foreign we can see the vg
| [ 0:00] ## Line: 148 	 vgs --foreign >err
| [ 0:00] ## Line: 149 	 grep $vg1 err
| [ 0:00] ## Line: 150 	 # change the local system_id back to the first value, making the vg not foreign
| [ 0:00] ## Line: 151 	 echo "$SID1" > "$SIDFILE"
| [ 0:00] ## Line: 152 	 vgs >err
| [ 0:00] ## Line: 153 	 grep $vg1 err
| [ 0:00] ## Line: 154 	 vgremove $vg1
| [ 0:00] ## Line: 155 	 
| [ 0:00] ## Line: 156 	 # create a vg, then change the vg's system_id, making it foreign
| [ 0:00] ## Line: 157 	 
| [ 0:00] ## Line: 158 	 SID1=sidfoofile1
| [ 0:00] ## Line: 159 	 SID2=sidfoofile2
| [ 0:00] ## Line: 160 	 echo "$SID1" > "$SIDFILE"
| [ 0:00] ## Line: 161 	 aux lvmconf "global/system_id_source = file" \
| [ 0:00] ## Line: 162 	 	    "global/system_id_file = \"$SIDFILE\""
| [ 0:00] ## Line: 163 	 # create a vg
| [ 0:00] ## Line: 164 	 vgcreate $vg1 "$dev1"
| [ 0:00] ## Line: 165 	 # normal vgs sees the vg
| [ 0:00] ## Line: 166 	 vgs >err
| [ 0:00] ## Line: 167 	 grep $vg1 err
| [ 0:00] ## Line: 168 	 # change the vg's system_id, making the vg foreign
| [ 0:00] ## Line: 169 	 vgchange --yes --systemid "$SID2" $vg1
| [ 0:00] ## Line: 170 	 # normal vgs doesn't see the vg
| [ 0:00] ## Line: 171 	 vgs >err
| [ 0:00] ## Line: 172 	 not grep $vg1 err
| [ 0:00] ## Line: 173 	 # using --foreign we can see the vg
| [ 0:00] ## Line: 174 	 vgs --foreign >err
| [ 0:00] ## Line: 175 	 grep $vg1 err
| [ 0:00] ## Line: 176 	 # change the local system_id to the second system_id so we can remove the vg
| [ 0:00] ## Line: 177 	 echo "$SID2" > "$SIDFILE"
| [ 0:00] ## Line: 178 	 vgs >err
| [ 0:00] ## Line: 179 	 grep $vg1 err
| [ 0:00] ## Line: 180 	 vgremove $vg1
| [ 0:00] ## Line: 181 	 
| [ 0:00] ## Line: 182 	 # create a vg, create active lvs in it, change our system_id, making
| [ 0:00] ## Line: 183 	 # the VG foreign, verify that we can still see the foreign VG,
| [ 0:00] ## Line: 184 	 # and can deactivate the LVs
| [ 0:00] ## Line: 185 	 
| [ 0:00] ## Line: 186 	 SID1=sidfoofile1
| [ 0:00] ## Line: 187 	 SID2=sidfoofile2
| [ 0:00] ## Line: 188 	 echo "$SID1" > "$SIDFILE"
| [ 0:00] ## Line: 189 	 aux lvmconf "global/system_id_source = file" \
| [ 0:00] ## Line: 190 	 	    "global/system_id_file = \"$SIDFILE\""
| [ 0:00] ## Line: 191 	 # create a vg
| [ 0:00] ## Line: 192 	 vgcreate $vg1 "$dev1"
| [ 0:00] ## Line: 193 	 lvcreate -n $lv1 -l 2 $vg1
| [ 0:00] ## Line: 194 	 # normal vgs sees the vg and lv
| [ 0:00] ## Line: 195 	 vgs >err
| [ 0:00] ## Line: 196 	 grep $vg1 err
| [ 0:00] ## Line: 197 	 check lv_exists $vg1 $lv1
| [ 0:00] ## Line: 198 	 # change our system_id, making the vg foreign, but accessible
| [ 0:00] ## Line: 199 	 echo "$SID2" > "$SIDFILE"
| [ 0:00] ## Line: 200 	 vgs >err
| [ 0:00] ## Line: 201 	 grep $vg1 err
| [ 0:00] ## Line: 202 	 check lv_exists $vg1 $lv1
| [ 0:00] ## Line: 203 	 # can deactivate the lv
| [ 0:00] ## Line: 204 	 lvchange -an $vg1/$lv1
| [ 0:00] ## Line: 205 	 # now that the foreign vg has no active lvs, we can't access it
| [ 0:00] ## Line: 206 	 not lvremove $vg1/$lv1
| [ 0:00] ## Line: 207 	 not vgremove $vg1
| [ 0:00] ## Line: 208 	 # change our system_id back to match the vg so it's not foreign
| [ 0:00] ## Line: 209 	 echo "$SID1" > "$SIDFILE"
| [ 0:00] ## Line: 210 	 vgs >err
| [ 0:00] ## Line: 211 	 grep $vg1 err
| [ 0:00] ## Line: 212 	 lvremove $vg1/$lv1
| [ 0:00] ## Line: 213 	 vgremove $vg1
| [ 0:00] ## Line: 214 	 
| [ 0:00] ## Line: 215 	 # local system has no system_id, so it can't access a vg with a system_id
| [ 0:00] ## Line: 216 	 
| [ 0:00] ## Line: 217 	 SID1=sidfoofile1
| [ 0:00] ## Line: 218 	 echo "$SID1" > "$SIDFILE"
| [ 0:00] ## Line: 219 	 aux lvmconf "global/system_id_source = file" \
| [ 0:00] ## Line: 220 	 	    "global/system_id_file = \"$SIDFILE\""
| [ 0:00] ## Line: 221 	 # create a vg
| [ 0:00] ## Line: 222 	 vgcreate $vg1 "$dev1"
| [ 0:00] ## Line: 223 	 aux lvmconf "global/system_id_source = none"
| [ 0:00] ## Line: 224 	 vgs >err
| [ 0:00] ## Line: 225 	 not grep $vg1 err
| [ 0:00] ## Line: 226 	 not vgs $vg1 >err
| [ 0:00] ## Line: 227 	 not grep $vg1 err
| [ 0:00] ## Line: 228 	 aux lvmconf "global/system_id_source = file"
| [ 0:00] ## Line: 229 	 vgs >err
| [ 0:00] ## Line: 230 	 grep $vg1 err
| [ 0:00] ## Line: 231 	 vgremove $vg1
| [ 0:00] ## Line: 232 	 
| [ 0:00] ## Line: 233 	 # local system has a system_id, and can use a vg without a system_id
| [ 0:00] ## Line: 234 	 
| [ 0:00] ## Line: 235 	 SID1=sidfoofile1
| [ 0:00] ## Line: 236 	 rm -f "$SIDFILE"
| [ 0:00] ## Line: 237 	 # create a vg with no system_id
| [ 0:00] ## Line: 238 	 aux lvmconf "global/system_id_source = none"
| [ 0:00] ## Line: 239 	 vgcreate $vg1 "$dev1"
| [ 0:00] ## Line: 240 	 check vg_field $vg1 systemid ""
| [ 0:00] ## Line: 241 	 # set a local system_id
| [ 0:00] ## Line: 242 	 echo "$SID1" > "$SIDFILE"
| [ 0:00] ## Line: 243 	 aux lvmconf "global/system_id_source = file" \
| [ 0:00] ## Line: 244 	 	    "global/system_id_file = \"$SIDFILE\""
| [ 0:00] ## Line: 245 	 # check we can see and use the vg with no system_id
| [ 0:00] ## Line: 246 	 vgs >err
| [ 0:00] ## Line: 247 	 grep $vg1 err
| [ 0:00] ## Line: 248 	 vgs $vg1 >err
| [ 0:00] ## Line: 249 	 grep $vg1 err
| [ 0:00] ## Line: 250 	 vgremove $vg1
| [ 0:00] ## Line: 251 	 
| [ 0:00] ## Line: 252 	 # vgexport clears system_id, vgimport sets system_id
| [ 0:00] ## Line: 253 	 
| [ 0:00] ## Line: 254 	 SID1=sidfoofile1
| [ 0:00] ## Line: 255 	 echo "$SID1" > "$SIDFILE"
| [ 0:00] ## Line: 256 	 aux lvmconf "global/system_id_source = file" \
| [ 0:00] ## Line: 257 	 	    "global/system_id_file = \"$SIDFILE\""
| [ 0:00] ## Line: 258 	 # create a vg
| [ 0:00] ## Line: 259 	 vgcreate $vg1 "$dev1"
| [ 0:00] ## Line: 260 	 # normal vgs sees the vg
| [ 0:00] ## Line: 261 	 vgs -o+systemid >err
| [ 0:00] ## Line: 262 	 grep $vg1 err
| [ 0:00] ## Line: 263 	 grep "$SID1" err
| [ 0:00] ## Line: 264 	 # after vgexport there is no systemid
| [ 0:00] ## Line: 265 	 vgexport $vg1
| [ 0:00] ## Line: 266 	 vgs -o+systemid >err
| [ 0:00] ## Line: 267 	 grep $vg1 err
| [ 0:00] ## Line: 268 	 not grep "$SID1" err
| [ 0:00] ## Line: 269 	 # after vgimport there is a systemid
| [ 0:00] ## Line: 270 	 vgimport $vg1
| [ 0:00] ## Line: 271 	 vgs -o+systemid >err
| [ 0:00] ## Line: 272 	 grep $vg1 err
| [ 0:00] ## Line: 273 	 grep "$SID1" err
| [ 0:00] ## Line: 274 	 vgremove $vg1
| [ 0:00] ## Line: 275 	 
| [ 0:00] ## Line: 276 	 # vgchange -cy clears system_id, vgchange -cn sets system_id
| [ 0:00] ## Line: 277 	 
| [ 0:00] ## Line: 278 	 SID1=sidfoofile1
| [ 0:00] ## Line: 279 	 echo "$SID1" > "$SIDFILE"
| [ 0:00] ## Line: 280 	 aux lvmconf "global/system_id_source = file" \
| [ 0:00] ## Line: 281 	 	    "global/system_id_file = \"$SIDFILE\""
| [ 0:00] ## Line: 282 	 # create a vg
| [ 0:00] ## Line: 283 	 vgcreate $vg1 "$dev1"
| [ 0:00] ## Line: 284 	 # normal vgs sees the vg
| [ 0:00] ## Line: 285 	 vgs -o+systemid >err
| [ 0:00] ## Line: 286 	 grep $vg1 err
| [ 0:00] ## Line: 287 	 grep "$SID1" err
| [ 0:00] ## Line: 288 	 # after vgchange -cy there is no systemid
| [ 0:00] ## Line: 289 	 vgchange --yes -cy $vg1
| [ 0:00] ## Line: 290 	 vgs --config 'global { locking_type=0 }' -o+systemid $vg1 >err
| [ 0:00] ## Line: 291 	 grep $vg1 err
| [ 0:00] ## Line: 292 	 not grep "$SID1" err
| [ 0:00] ## Line: 293 	 # after vgchange -cn there is a systemid
| [ 0:00] ## Line: 294 	 vgchange --config 'global { locking_type=0 }' -cn $vg1
| [ 0:00] ## Line: 295 	 vgs -o+systemid >err
| [ 0:00] ## Line: 296 	 grep $vg1 err
| [ 0:00] ## Line: 297 	 grep "$SID1" err
| [ 0:00] ## Line: 298 	 vgremove $vg1
| [ 0:00] ## Line: 299 	 
| [ 0:00] ## Line: 300 	 # Test max system_id length (128) and invalid system_id characters.
| [ 0:00] ## Line: 301 	 # The 128 length limit is imposed before invalid characters are omitted.
| [ 0:00] ## Line: 302 	 
| [ 0:00] ## Line: 303 	 # 120 numbers followed by 8 letters (max len)
| [ 0:00] ## Line: 304 	 SID1=012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789abcdefgh
| [ 0:00] ## Line: 305 	 # 120 numbers followed by 9 letters (too long by 1 character, the last is omitted)
| [ 0:00] ## Line: 306 	 SID2=012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789abcdefghi
| [ 0:00] ## Line: 307 	 
| [ 0:00] ## Line: 308 	 # max len system_id should appear normally
| [ 0:00] ## Line: 309 	 echo "$SID1" > "$SIDFILE"
| [ 0:00] ## Line: 310 	 aux lvmconf "global/system_id_source = file" \
| [ 0:00] ## Line: 311 	 	    "global/system_id_file = \"$SIDFILE\""
| [ 0:00] ## Line: 312 	 # create a vg
| [ 0:00] ## Line: 313 	 vgcreate $vg1 "$dev1"
| [ 0:00] ## Line: 314 	 # normal vgs sees the vg
| [ 0:00] ## Line: 315 	 vgs -o+systemid $vg1 >err
| [ 0:00] ## Line: 316 	 grep $vg1 err
| [ 0:00] ## Line: 317 	 grep "$SID1" err
| [ 0:00] ## Line: 318 	 vgremove $vg1
| [ 0:00] ## Line: 319 	 
| [ 0:00] ## Line: 320 	 # max+1 len system_id should be missing the last character
| [ 0:00] ## Line: 321 	 echo "$SID2" > "$SIDFILE"
| [ 0:00] ## Line: 322 	 aux lvmconf "global/system_id_source = file" \
| [ 0:00] ## Line: 323 	 	    "global/system_id_file = \"$SIDFILE\""
| [ 0:00] ## Line: 324 	 # create a vg
| [ 0:00] ## Line: 325 	 vgcreate $vg1 "$dev1"
| [ 0:00] ## Line: 326 	 # normal vgs sees the vg
| [ 0:00] ## Line: 327 	 vgs -o+systemid $vg1 >err
| [ 0:00] ## Line: 328 	 grep $vg1 err
| [ 0:00] ## Line: 329 	 grep "$SID1" err
| [ 0:00] ## Line: 330 	 not grep "$SID2" err
| [ 0:00] ## Line: 331 	 vgremove $vg1
| [ 0:00] ## Line: 332 	 
| [ 0:00] ## Line: 333 	 # max len system_id containing an invalid character should appear without
| [ 0:00] ## Line: 334 	 # the invalid character
| [ 0:00] ## Line: 335 	 # 120 numbers followed by invalid '%' character followed by 8 letters (too long by 1 character)
| [ 0:00] ## Line: 336 	 SID1=012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789%abcdefgh
| [ 0:00] ## Line: 337 	 # After the invalid character is omitted from SID1
| [ 0:00] ## Line: 338 	 # The string is truncated to max length (128) before the invalid character is omitted
| [ 0:00] ## Line: 339 	 SID2=012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789abcdefg
| [ 0:00] ## Line: 340 	 echo "$SID1" > "$SIDFILE"
| [ 0:00] ## Line: 341 	 aux lvmconf "global/system_id_source = file" \
| [ 0:00] ## Line: 342 	 	    "global/system_id_file = \"$SIDFILE\""
| [ 0:00] ## Line: 343 	 # create a vg
| [ 0:00] ## Line: 344 	 vgcreate $vg1 "$dev1"
| [ 0:00] ## Line: 345 	 # normal vgs sees the vg
| [ 0:00] ## Line: 346 	 vgs -o+systemid $vg1 >err
| [ 0:00] ## Line: 347 	 grep $vg1 err
| [ 0:00] ## Line: 348 	 not grep $SID1 err
| [ 0:00] ## Line: 349 	 grep $SID2 err
| [ 0:00] ## Line: 350 	 vgremove $vg1
| [ 0:00] ## Line: 351 	 
| [ 0:00] ## Line: 352 	 # contains a bunch of invalid characters
| [ 0:00] ## Line: 353 	 SID1="?%$&A.@1]"
| [ 0:00] ## Line: 354 	 # SID1 without the invalid characters
| [ 0:00] ## Line: 355 	 SID2=A.1
| [ 0:00] ## Line: 356 	 echo "$SID1" > "$SIDFILE"
| [ 0:00] ## Line: 357 	 aux lvmconf "global/system_id_source = file" \
| [ 0:00] ## Line: 358 	 	    "global/system_id_file = \"$SIDFILE\""
| [ 0:00] ## Line: 359 	 # create a vg
| [ 0:00] ## Line: 360 	 vgcreate $vg1 "$dev1"
| [ 0:00] ## Line: 361 	 # normal vgs sees the vg
| [ 0:00] ## Line: 362 	 vgs -o+systemid $vg1 >err
| [ 0:00] ## Line: 363 	 grep $vg1 err
| [ 0:00] ## Line: 364 	 not grep "$SID1" err
| [ 0:00] ## Line: 365 	 grep "$SID2" err
| [ 0:00] ## Line: 366 	 vgremove $vg1
| [ 0:00] ## Line: 367 	 
| [ 0:00] ## Line: 368 	 
| [ 0:00] ## Line: 369 	 # pvs: pv in a foreign vg not reported
| [ 0:00] ## Line: 370 	 # pvs --foreign: pv in a foreign vg is reported
| [ 0:00] ## Line: 371 	 
| [ 0:00] ## Line: 372 	 SID1=sidfoofile1
| [ 0:00] ## Line: 373 	 SID2=sidfoofile2
| [ 0:00] ## Line: 374 	 echo "$SID1" > "$SIDFILE"
| [ 0:00] ## Line: 375 	 aux lvmconf "global/system_id_source = file" \
| [ 0:00] ## Line: 376 	 	    "global/system_id_file = \"$SIDFILE\""
| [ 0:00] ## Line: 377 	 # create a vg
| [ 0:00] ## Line: 378 	 vgcreate $vg1 "$dev1"
| [ 0:00] ## Line: 379 	 # normal pvs sees the vg and pv
| [ 0:00] ## Line: 380 	 pvs >err
| [ 0:00] ## Line: 381 	 grep $vg1 err
| [ 0:00] ## Line: 382 	 grep "$dev1" err
| [ 0:00] ## Line: 383 	 # change the local system_id, making the vg foreign
| [ 0:00] ## Line: 384 	 echo "$SID2" > "$SIDFILE"
| [ 0:00] ## Line: 385 	 # normal pvs does not see the vg or pv
| [ 0:00] ## Line: 386 	 pvs >err
| [ 0:00] ## Line: 387 	 not grep $vg1 err
| [ 0:00] ## Line: 388 	 not grep "$dev1" err
| [ 0:00] ## Line: 389 	 # pvs --foreign does see the vg and pv
| [ 0:00] ## Line: 390 	 pvs --foreign >err
| [ 0:00] ## Line: 391 	 grep $vg1 err
| [ 0:00] ## Line: 392 	 grep "$dev1" err
| [ 0:00] ## Line: 393 	 # change the local system_id back so the vg can be removed
| [ 0:00] ## Line: 394 	 echo "$SID1" > "$SIDFILE"
| [ 0:00] ## Line: 395 	 vgremove $vg1
| [ 0:00] ## Line: 396 	 rm -f "$SIDFILE"
| [ 0:00] ## Line: 397 	 
| [ 0:00] ## Line: 398 	 # lvs: lvs in a foreign vg not reported
| [ 0:00] ## Line: 399 	 # lvs --foreign: lvs in a foreign vg are reported
| [ 0:00] ## Line: 400 	 
| [ 0:00] ## Line: 401 	 SID1=sidfoofile1
| [ 0:00] ## Line: 402 	 SID2=sidfoofile2
| [ 0:00] ## Line: 403 	 echo "$SID1" > "$SIDFILE"
| [ 0:00] ## Line: 404 	 aux lvmconf "global/system_id_source = file" \
| [ 0:00] ## Line: 405 	 	    "global/system_id_file = \"$SIDFILE\""
| [ 0:00] ## Line: 406 	 # create a vg
| [ 0:00] ## Line: 407 	 vgcreate $vg1 "$dev1"
| [ 0:00] ## Line: 408 	 lvcreate -n $lv1 -l 2 $vg1
| [ 0:00] ## Line: 409 	 lvchange -an $vg1/$lv1
| [ 0:00] ## Line: 410 	 # normal lvs sees the vg and lv
| [ 0:00] ## Line: 411 	 lvs >err
| [ 0:00] ## Line: 412 	 grep $vg1 err
| [ 0:00] ## Line: 413 	 grep $lv1 err
| [ 0:00] ## Line: 414 	 # change the local system_id, making the vg foreign
| [ 0:00] ## Line: 415 	 echo "$SID2" > "$SIDFILE"
| [ 0:00] ## Line: 416 	 # normal lvs does not see the vg or lv
| [ 0:00] ## Line: 417 	 lvs >err
| [ 0:00] ## Line: 418 	 not grep $vg1 err
| [ 0:00] ## Line: 419 	 not grep $lv1 err
| [ 0:00] ## Line: 420 	 # lvs --foreign does see the vg and lv
| [ 0:00] ## Line: 421 	 lvs --foreign >err
| [ 0:00] ## Line: 422 	 grep $vg1 err
| [ 0:00] ## Line: 423 	 grep $lv1 err
| [ 0:00] ## Line: 424 	 # change the local system_id back so the vg can be removed
| [ 0:00] ## Line: 425 	 echo "$SID1" > "$SIDFILE"
| [ 0:00] ## Line: 426 	 lvremove $vg1/$lv1
| [ 0:00] ## Line: 427 	 vgremove $vg1
| [ 0:00] ## Line: 428 	 rm -f "$SIDFILE"
| [ 0:00] ## Line: 429 	 
| [ 0:00] ## Line: 430 	 # use extra_system_ids to read a foreign VG
| [ 0:00] ## Line: 431 	 
| [ 0:00] ## Line: 432 	 SID1=sidfoofile1
| [ 0:00] ## Line: 433 	 SID2=sidfoofile2
| [ 0:00] ## Line: 434 	 rm -f "$LVMLOCAL"
| [ 0:00] ## Line: 435 	 echo "$SID1" > "$SIDFILE"
| [ 0:00] ## Line: 436 	 aux lvmconf "global/system_id_source = file" \
| [ 0:00] ## Line: 437 	 	    "global/system_id_file = \"$SIDFILE\""
| [ 0:00] ## Line: 438 	 # create a vg
| [ 0:00] ## Line: 439 	 vgcreate $vg1 "$dev1"
| [ 0:00] ## Line: 440 	 # normal vgs sees the vg
| [ 0:00] ## Line: 441 	 vgs >err
| [ 0:00] ## Line: 442 	 grep $vg1 err
| [ 0:00] ## Line: 443 	 # change the local system_id, making the vg foreign
| [ 0:00] ## Line: 444 	 echo "$SID2" > "$SIDFILE"
| [ 0:00] ## Line: 445 	 # normal vgs doesn't see the vg
| [ 0:00] ## Line: 446 	 vgs >err
| [ 0:00] ## Line: 447 	 not grep $vg1 err
| [ 0:00] ## Line: 448 	 # using --foreign we can see the vg
| [ 0:00] ## Line: 449 	 vgs --foreign >err
| [ 0:00] ## Line: 450 	 grep $vg1 err
| [ 0:00] ## Line: 451 	 # add the first system_id to extra_system_ids so we can see the vg
| [ 0:00] ## Line: 452 	 print_lvmlocal "  extra_system_ids = [ $SID1 ] "
| [ 0:00] ## Line: 453 	 vgs >err
| [ 0:00] ## Line: 454 	 grep $vg1 err
| [ 0:00] ## Line: 455 	 vgremove $vg1
| [ 0:00] ## Line: 456 	 rm -f "$LVMLOCAL"
| [ 0:00] ## Line: 457 	 
| [ 0:00] ## Line: 458 	 # vgcreate --systemid "" creates a vg without a system_id even if source is set
| [ 0:00] ## Line: 459 	 SID1=sidfoofile1
| [ 0:00] ## Line: 460 	 echo "$SID1" > "$SIDFILE"
| [ 0:00] ## Line: 461 	 aux lvmconf "global/system_id_source = file" \
| [ 0:00] ## Line: 462 	 	    "global/system_id_file = \"$SIDFILE\""
| [ 0:00] ## Line: 463 	 # create a vg
| [ 0:00] ## Line: 464 	 vgcreate --systemid "" $vg1 "$dev1"
| [ 0:00] ## Line: 465 	 # normal vgs sees the vg
| [ 0:00] ## Line: 466 	 vgs >err
| [ 0:00] ## Line: 467 	 grep $vg1 err
| [ 0:00] ## Line: 468 	 # our system_id is not displayed for the vg
| [ 0:00] ## Line: 469 	 vgs -o+systemid >err
| [ 0:00] ## Line: 470 	 not grep "$SID1" err
| [ 0:00] ## Line: 471 	 vgremove $vg1
| [ 0:00] ## Line: 472 	 rm -f "$SIDFILE"
| [ 0:00] ## Line: 473 	 
| [ 0:00] ## Line: 474 	 # vgchange --systemid "" clears the system_id on owned vg
| [ 0:00] ## Line: 475 	 SID1=sidfoofile1
| [ 0:00] ## Line: 476 	 echo "$SID1" > "$SIDFILE"
| [ 0:00] ## Line: 477 	 aux lvmconf "global/system_id_source = file" \
| [ 0:00] ## Line: 478 	 	    "global/system_id_file = \"$SIDFILE\""
| [ 0:00] ## Line: 479 	 # create a vg
| [ 0:00] ## Line: 480 	 vgcreate $vg1 "$dev1"
| [ 0:00] ## Line: 481 	 # normal vgs sees the vg
| [ 0:00] ## Line: 482 	 vgs >err
| [ 0:00] ## Line: 483 	 grep $vg1 err
| [ 0:00] ## Line: 484 	 # the vg has our system_id
| [ 0:00] ## Line: 485 	 vgs -o+systemid >err
| [ 0:00] ## Line: 486 	 grep $SID1 err
| [ 0:00] ## Line: 487 	 # clear the system_id
| [ 0:00] ## Line: 488 	 vgchange --yes --systemid "" $vg1
| [ 0:00] ## Line: 489 	 # normal vgs sees the vg
| [ 0:00] ## Line: 490 	 vgs >err
| [ 0:00] ## Line: 491 	 grep $vg1 err
| [ 0:00] ## Line: 492 	 # the vg does not have our system_id
| [ 0:00] ## Line: 493 	 vgs -o+systemid >err
| [ 0:00] ## Line: 494 	 not grep "$SID1" err
| [ 0:00] ## Line: 495 	 vgremove $vg1
| [ 0:00] ## Line: 496 	 
| [ 0:00] ## Line: 497 	 # vgchange --systemid does not set the system_id on foreign vg
| [ 0:00] ## Line: 498 	 SID1=sidfoofile1
| [ 0:00] ## Line: 499 	 SID2=sidfoofile2
| [ 0:00] ## Line: 500 	 rm -f "$LVMLOCAL"
| [ 0:00] ## Line: 501 	 echo "$SID1" > "$SIDFILE"
| [ 0:00] ## Line: 502 	 aux lvmconf "global/system_id_source = file" \
| [ 0:00] ## Line: 503 	 	    "global/system_id_file = \"$SIDFILE\""
| [ 0:00] ## Line: 504 	 # create a vg
| [ 0:00] ## Line: 505 	 vgcreate $vg1 "$dev1"
| [ 0:00] ## Line: 506 	 # normal vgs sees the vg
| [ 0:00] ## Line: 507 	 vgs >err
| [ 0:00] ## Line: 508 	 grep $vg1 err
| [ 0:00] ## Line: 509 	 # change the local system_id, making the vg foreign
| [ 0:00] ## Line: 510 	 echo "$SID2" > "$SIDFILE"
| [ 0:00] ## Line: 511 	 # normal vgs doesn't see the vg
| [ 0:00] ## Line: 512 	 vgs >err
| [ 0:00] ## Line: 513 	 not grep $vg1 err
| [ 0:00] ## Line: 514 	 # using --foreign we can see the vg
| [ 0:00] ## Line: 515 	 vgs --foreign >err
| [ 0:00] ## Line: 516 	 grep $vg1 err
| [ 0:00] ## Line: 517 	 # cannot clear the system_id of the foreign vg
| [ 0:00] ## Line: 518 	 not vgchange --yes --systemid "" $vg1
| [ 0:00] ## Line: 519 	 # cannot set the system_id of the foreign vg
| [ 0:00] ## Line: 520 	 not vgchange --yes --systemid foo $vg1
| [ 0:00] ## Line: 521 	 # change our system_id back so we can remove the vg
| [ 0:00] ## Line: 522 	 echo "$SID1" > "$SIDFILE"
| [ 0:00] ## Line: 523 	 vgremove $vg1
| [ 0:00] ## Line: 524 	 
| [ 0:00] ## Line: 525 	 # vgcfgbackup backs up foreign vg with --foreign
| [ 0:00] ## Line: 526 	 SID1=sidfoofile1
| [ 0:00] ## Line: 527 	 SID2=sidfoofile2
| [ 0:00] ## Line: 528 	 rm -f "$LVMLOCAL"
| [ 0:00] ## Line: 529 	 echo "$SID1" > "$SIDFILE"
| [ 0:00] ## Line: 530 	 aux lvmconf "global/system_id_source = file" \
| [ 0:00] ## Line: 531 	 	    "global/system_id_file = \"$SIDFILE\""
| [ 0:00] ## Line: 532 	 # create a vg
| [ 0:00] ## Line: 533 	 vgcreate $vg1 "$dev1"
| [ 0:00] ## Line: 534 	 # normal vgs sees the vg
| [ 0:00] ## Line: 535 	 vgs >err
| [ 0:00] ## Line: 536 	 grep $vg1 err
| [ 0:00] ## Line: 537 	 # change the local system_id, making the vg foreign
| [ 0:00] ## Line: 538 	 echo "$SID2" > "$SIDFILE"
| [ 0:00] ## Line: 539 	 # normal vgs doesn't see the vg
| [ 0:00] ## Line: 540 	 vgs >err
| [ 0:00] ## Line: 541 	 not grep $vg1 err
| [ 0:00] ## Line: 542 	 # using --foreign we can back up the vg
| [ 0:00] ## Line: 543 	 not vgcfgbackup $vg1
| [ 0:00] ## Line: 544 	 vgcfgbackup --foreign $vg1
| [ 0:00] ## Line: 545 	 # change our system_id back so we can remove the vg
| [ 0:00] ## Line: 546 	 echo "$SID1" > "$SIDFILE"
| [ 0:00] ## Line: 547 	 vgremove $vg1
| [ 0:00] ## Line: 548 	 rm -f "$SIDFILE"
| [ 0:00] ## Line: 549 	 
| [ 0:00] ## Line: 550 	 
| [ 0:00] ## Line: 551 	 # Test handling of bad system_id source configurations
| [ 0:00] ## Line: 552 	 # The commands should proceed without a system_id.
| [ 0:00] ## Line: 553 	 # Look at the warning/error messages.
| [ 0:00] ## Line: 554 	 
| [ 0:00] ## Line: 555 	 # vgcreate with source machineid, where no $etc/machine-id file exists
| [ 0:00] ## Line: 556 	 if [ ! -e "$etc/machine-id" ]; then
| [ 0:00] ## Line: 557 	 SID=""
| [ 0:00] ## Line: 558 	 aux lvmconf "global/system_id_source = machineid"
| [ 0:00] ## Line: 559 	 vgcreate $vg1 "$dev1" 2>&1 | tee err
| [ 0:00] ## Line: 560 	 vgs -o+systemid $vg1
| [ 0:00] ## Line: 561 	 check vg_field $vg1 systemid $SID
| [ 0:00] ## Line: 562 	 grep "No system ID found from system_id_source" err
| [ 0:00] ## Line: 563 	 vgremove $vg1
| [ 0:00] ## Line: 564 	 fi
| [ 0:00] ## Line: 565 	 
| [ 0:00] ## Line: 566 	 # vgcreate with source uname, but uname is localhost
| [ 0:00] ## Line: 567 	 # TODO: don't want to change the hostname on the test machine...
| [ 0:00] ## Line: 568 	 
| [ 0:00] ## Line: 569 	 # vgcreate with source lvmlocal, but no lvmlocal.conf file
| [ 0:00] ## Line: 570 	 SID=""
| [ 0:00] ## Line: 571 	 rm -f $LVMLOCAL
| [ 0:00] ## Line: 572 	 aux lvmconf "global/system_id_source = lvmlocal"
| [ 0:00] ## Line: 573 	 vgcreate $vg1 "$dev1" 2>&1 | tee err
| [ 0:00] ## Line: 574 	 vgs -o+systemid $vg1
| [ 0:00] ## Line: 575 	 check vg_field $vg1 systemid $SID
| [ 0:00] ## Line: 576 	 grep "No system ID found from system_id_source" err
| [ 0:00] ## Line: 577 	 vgremove $vg1
| [ 0:00] ## Line: 578 	 
| [ 0:00] ## Line: 579 	 # vgcreate with source lvmlocal, but no system_id = "x" entry
| [ 0:00] ## Line: 580 	 SID=""
| [ 0:00] ## Line: 581 	 print_lvmlocal   # "  system_id = $SID"
| [ 0:00] ## Line: 582 	 aux lvmconf "global/system_id_source = lvmlocal"
| [ 0:00] ## Line: 583 	 vgcreate $vg1 "$dev1" 2>&1 | tee err
| [ 0:00] ## Line: 584 	 vgs -o+systemid $vg1
| [ 0:00] ## Line: 585 	 check vg_field $vg1 systemid $SID
| [ 0:00] ## Line: 586 	 grep "No system ID found from system_id_source" err
| [ 0:00] ## Line: 587 	 vgremove $vg1
| [ 0:00] ## Line: 588 	 
| [ 0:00] ## Line: 589 	 # vgcreate with source lvmlocal, and empty string system_id = ""
| [ 0:00] ## Line: 590 	 SID=""
| [ 0:00] ## Line: 591 	 print_lvmlocal "  system_id = \"\""
| [ 0:00] ## Line: 592 	 aux lvmconf "global/system_id_source = lvmlocal"
| [ 0:00] ## Line: 593 	 vgcreate $vg1 "$dev1" 2>&1 | tee err
| [ 0:00] ## Line: 594 	 vgs -o+systemid $vg1
| [ 0:00] ## Line: 595 	 check vg_field $vg1 systemid "$SID"
| [ 0:00] ## Line: 596 	 grep "No system ID found from system_id_source" err
| [ 0:00] ## Line: 597 	 vgremove $vg1
| [ 0:00] ## Line: 598 	 rm -f $LVMLOCAL
| [ 0:00] ## Line: 599 	 
| [ 0:00] ## Line: 600 	 # vgcreate with source file, but no system_id_file config
| [ 0:00] ## Line: 601 	 SID=""
| [ 0:00] ## Line: 602 	 rm -f "$SIDFILE"
| [ 0:00] ## Line: 603 	 aux lvmconf "global/system_id_source = file"
| [ 0:00] ## Line: 604 	 vgcreate $vg1 "$dev1" 2>&1 | tee err
| [ 0:00] ## Line: 605 	 vgs -o+systemid $vg1
| [ 0:00] ## Line: 606 	 check vg_field $vg1 systemid "$SID"
| [ 0:00] ## Line: 607 	 grep "No system ID found from system_id_source" err
| [ 0:00] ## Line: 608 	 vgremove $vg1
| [ 0:00] ## Line: 609 	 
| [ 0:00] ## Line: 610 	 # vgcreate with source file, but system_id_file does not exist
| [ 0:00] ## Line: 611 	 SID=""
| [ 0:00] ## Line: 612 	 rm -f "$SIDFILE"
| [ 0:00] ## Line: 613 	 aux lvmconf "global/system_id_source = file" \
| [ 0:00] ## Line: 614 	 	    "global/system_id_file = \"$SIDFILE\""
| [ 0:00] ## Line: 615 	 vgcreate $vg1 "$dev1" 2>&1 | tee err
| [ 0:00] ## Line: 616 	 vgs -o+systemid $vg1
| [ 0:00] ## Line: 617 	 check vg_field $vg1 systemid "$SID"
| [ 0:00] ## Line: 618 	 grep "No system ID found from system_id_source" err
| [ 0:00] ## Line: 619 	 vgremove $vg1
| [ 0:00] ## Line: 620 	 
| [ 0:00] ## Line: 621 	 
| [ 0:00] ## Line: 622 	 # Test cases where lvmetad cache of a foreign VG are out of date
| [ 0:00] ## Line: 623 	 # because the foreign owner has changed the VG.
| [ 0:00] ## Line: 624 	 
| [ 0:00] ## Line: 625 	 test ! -e LOCAL_LVMETAD && exit 0
| [ 0:00] ## Line: 626 	 
| [ 0:00] ## Line: 627 	 # When a foreign vg is newer on disk than in lvmetad, using --foreign
| [ 0:00] ## Line: 628 	 # should find the newer version.  This simulates a foreign host changing
| [ 0:00] ## Line: 629 	 # foreign vg by turning off lvmetad when we create an lv in the vg.
| [ 0:00] ## Line: 630 	 SID1=sidfoofile1
| [ 0:00] ## Line: 631 	 SID2=sidfoofile2
| [ 0:00] ## Line: 632 	 echo "$SID1" > "$SIDFILE"
| [ 0:00] ## Line: 633 	 aux lvmconf "global/system_id_source = file" \
| [ 0:00] ## Line: 634 	 	    "global/system_id_file = \"$SIDFILE\""
| [ 0:00] ## Line: 635 	 # create a vg with an lv
| [ 0:00] ## Line: 636 	 vgcreate $vg1 "$dev1"
| [ 0:00] ## Line: 637 	 lvcreate -n $lv1 -l 2 -an $vg1
| [ 0:00] ## Line: 638 	 # normal vgs sees the vg and lv
| [ 0:00] ## Line: 639 	 vgs >err
| [ 0:00] ## Line: 640 	 grep $vg1 err
| [ 0:00] ## Line: 641 	 check lv_exists $vg1 $lv1
| [ 0:00] ## Line: 642 	 # go around lvmetad to create another lv in the vg,
| [ 0:00] ## Line: 643 	 # forcing the lvmetad copy to be older than on disk.
| [ 0:00] ## Line: 644 	 aux lvmconf 'global/use_lvmetad = 0'
| [ 0:00] ## Line: 645 	 lvcreate -n $lv2 -l 2 -an $vg1
| [ 0:00] ## Line: 646 	 aux lvmconf 'global/use_lvmetad = 1'
| [ 0:00] ## Line: 647 	 # verify that the second lv is not in lvmetad
| [ 0:00] ## Line: 648 	 lvs $vg1 >err
| [ 0:00] ## Line: 649 	 grep $lv1 err
| [ 0:00] ## Line: 650 	 not grep $lv2 err
| [ 0:00] ## Line: 651 	 # change our system_id, making the vg foreign
| [ 0:00] ## Line: 652 	 echo "$SID2" > "$SIDFILE"
| [ 0:00] ## Line: 653 	 vgs >err
| [ 0:00] ## Line: 654 	 not grep $vg1 err
| [ 0:00] ## Line: 655 	 # using --foreign, we will get the latest vg from disk
| [ 0:00] ## Line: 656 	 lvs --foreign $vg1 >err
| [ 0:00] ## Line: 657 	 grep $vg1 err
| [ 0:00] ## Line: 658 	 grep $lv1 err
| [ 0:00] ## Line: 659 	 grep $lv2 err
| [ 0:00] ## Line: 660 	 # change our system_id back to match the vg so it's not foreign
| [ 0:00] ## Line: 661 	 echo "$SID1" > "$SIDFILE"
| [ 0:00] ## Line: 662 	 lvremove $vg1/$lv1
| [ 0:00] ## Line: 663 	 lvremove $vg1/$lv2
| [ 0:00] ## Line: 664 	 vgremove $vg1
| [ 0:00] ## Line: 665 	 
| [ 0:00] ## Line: 666 	 # vgimport should find the exported vg on disk even though
| [ 0:00] ## Line: 667 	 # lvmetad's copy of the vg shows it's foreign.
| [ 0:00] ## Line: 668 	 SID1=sidfoofile1
| [ 0:00] ## Line: 669 	 SID2=sidfoofile2
| [ 0:00] ## Line: 670 	 echo "$SID1" > "$SIDFILE"
| [ 0:00] ## Line: 671 	 aux lvmconf "global/system_id_source = file" \
| [ 0:00] ## Line: 672 	 	    "global/system_id_file = \"$SIDFILE\""
| [ 0:00] ## Line: 673 	 # create a vg with an lv
| [ 0:00] ## Line: 674 	 vgcreate $vg1 "$dev1"
| [ 0:00] ## Line: 675 	 lvcreate -n $lv1 -l 2 -an $vg1
| [ 0:00] ## Line: 676 	 # normal vgs sees the vg and lv
| [ 0:00] ## Line: 677 	 vgs >err
| [ 0:00] ## Line: 678 	 grep $vg1 err
| [ 0:00] ## Line: 679 	 check lv_exists $vg1 $lv1
| [ 0:00] ## Line: 680 	 # go around lvmetad to export the vg so that lvmetad still
| [ 0:00] ## Line: 681 	 # has the original vg owned by SID1 in its cache
| [ 0:00] ## Line: 682 	 aux lvmconf 'global/use_lvmetad = 0'
| [ 0:00] ## Line: 683 	 vgexport $vg1
| [ 0:00] ## Line: 684 	 aux lvmconf 'global/use_lvmetad = 1'
| [ 0:00] ## Line: 685 	 # change the local system_id so the lvmetad copy of the vg is foreign
| [ 0:00] ## Line: 686 	 echo "$SID2" > "$SIDFILE"
| [ 0:00] ## Line: 687 	 # verify that lvmetad thinks the vg is foreign
| [ 0:00] ## Line: 688 	 # (don't use --foreign to verify this because that will cause
| [ 0:00] ## Line: 689 	 # the lvmetad cache to be updated, which we don't want yet)
| [ 0:00] ## Line: 690 	 not vgs $vg1
| [ 0:00] ## Line: 691 	 # attempt to import the vg that has been exported, but
| [ 0:00] ## Line: 692 	 # which lvmetad thinks is foreign
| [ 0:00] ## Line: 693 	 vgimport $vg1
| [ 0:00] ## Line: 694 	 # verify that the imported vg has our system_id
| [ 0:00] ## Line: 695 	 vgs -o+systemid $vg1 >err
| [ 0:00] ## Line: 696 	 grep $vg1 err
| [ 0:00] ## Line: 697 	 grep $SID2 err
| [ 0:00] ## Line: 698 	 check lv_exists $vg1 $lv1
| [ 0:00] ## Line: 699 	 lvremove $vg1/$lv1
| [ 0:00] ## Line: 700 	 vgremove $vg1
| [ 0:00] ## Line: 701 	 rm -f "$SIDFILE"
| [ 0:00] ## Line: 702 	 
| [ 0:00] ## Line: 703 	 # pvscan --cache should cause the latest version of a foreign VG to be
| [ 0:00] ## Line: 704 	 # cached in lvmetad.  Without the --cache option, pvscan will see the old
| [ 0:00] ## Line: 705 	 # version of the VG.
| [ 0:00] ## Line: 706 	 SID1=sidfoofile1
| [ 0:00] ## Line: 707 	 SID2=sidfoofile2
| [ 0:00] ## Line: 708 	 echo "$SID1" > "$SIDFILE"
| [ 0:00] ## Line: 709 	 aux lvmconf "global/system_id_source = file" \
| [ 0:00] ## Line: 710 	 	    "global/system_id_file = \"$SIDFILE\""
| [ 0:00] ## Line: 711 	 # create a vg with an lv
| [ 0:00] ## Line: 712 	 vgcreate $vg1 "$dev1"
| [ 0:00] ## Line: 713 	 lvcreate -n $lv1 -l 2 -an $vg1
| [ 0:00] ## Line: 714 	 # normal vgs sees the vg and lv
| [ 0:00] ## Line: 715 	 vgs >err
| [ 0:00] ## Line: 716 	 grep $vg1 err
| [ 0:00] ## Line: 717 	 check lv_exists $vg1 $lv1
| [ 0:00] ## Line: 718 	 # go around lvmetad to create another lv in the vg,
| [ 0:00] ## Line: 719 	 # forcing the lvmetad copy to be older than on disk.
| [ 0:00] ## Line: 720 	 aux lvmconf 'global/use_lvmetad = 0'
| [ 0:00] ## Line: 721 	 lvcreate -n $lv2 -l 2 -an $vg1
| [ 0:00] ## Line: 722 	 aux lvmconf 'global/use_lvmetad = 1'
| [ 0:00] ## Line: 723 	 # verify that the second lv is not in lvmetad
| [ 0:00] ## Line: 724 	 lvs $vg1 >err
| [ 0:00] ## Line: 725 	 grep $lv1 err
| [ 0:00] ## Line: 726 	 not grep $lv2 err
| [ 0:00] ## Line: 727 	 # verify that after pvscan without --cache, lvmetad still
| [ 0:00] ## Line: 728 	 # reports the old version
| [ 0:00] ## Line: 729 	 pvscan
| [ 0:00] ## Line: 730 	 lvs $vg1 >err
| [ 0:00] ## Line: 731 	 grep $lv1 err
| [ 0:00] ## Line: 732 	 not grep $lv2 err
| [ 0:00] ## Line: 733 	 # change our system_id, making the vg foreign
| [ 0:00] ## Line: 734 	 echo "$SID2" > "$SIDFILE"
| [ 0:00] ## Line: 735 	 not vgs $vg1 >err
| [ 0:00] ## Line: 736 	 not grep $vg1 err
| [ 0:00] ## Line: 737 	 # use pvscan --cache to update the foreign vg in lvmetad
| [ 0:00] ## Line: 738 	 pvscan --cache
| [ 0:00] ## Line: 739 	 not vgs $vg1 >err
| [ 0:00] ## Line: 740 	 not grep $vg1 err
| [ 0:00] ## Line: 741 	 # change our system_id back to SID1 so we can check that
| [ 0:00] ## Line: 742 	 # lvmetad has the latest copy of the vg (without having
| [ 0:00] ## Line: 743 	 # to use --foreign to check)
| [ 0:00] ## Line: 744 	 echo "$SID1" > "$SIDFILE"
| [ 0:00] ## Line: 745 	 vgs $vg1 >err
| [ 0:00] ## Line: 746 	 grep $vg1 err
| [ 0:00] ## Line: 747 	 lvs $vg1 >err
| [ 0:00] ## Line: 748 	 grep $lv1 err
| [ 0:00] ## Line: 749 	 grep $lv2 err
| [ 0:00] ## Line: 750 	 lvremove $vg1/$lv1
| [ 0:00] ## Line: 751 	 lvremove $vg1/$lv2
| [ 0:00] ## Line: 752 	 vgremove $vg1
| [ 0:00] ## Line: 753 	 
| [ 0:00] ## Line: 754 	 # repeat the same test for vgscan instead of pvscan
| [ 0:00] ## Line: 755 	 SID1=sidfoofile1
| [ 0:00] ## Line: 756 	 SID2=sidfoofile2
| [ 0:00] ## Line: 757 	 echo "$SID1" > "$SIDFILE"
| [ 0:00] ## Line: 758 	 aux lvmconf "global/system_id_source = file" \
| [ 0:00] ## Line: 759 	 	    "global/system_id_file = \"$SIDFILE\""
| [ 0:00] ## Line: 760 	 # create a vg with an lv
| [ 0:00] ## Line: 761 	 vgcreate $vg1 "$dev1"
| [ 0:00] ## Line: 762 	 lvcreate -n $lv1 -l 2 -an $vg1
| [ 0:00] ## Line: 763 	 # normal vgs sees the vg and lv
| [ 0:00] ## Line: 764 	 vgs >err
| [ 0:00] ## Line: 765 	 grep $vg1 err
| [ 0:00] ## Line: 766 	 check lv_exists $vg1 $lv1
| [ 0:00] ## Line: 767 	 # go around lvmetad to create another lv in the vg,
| [ 0:00] ## Line: 768 	 # forcing the lvmetad copy to be older than on disk.
| [ 0:00] ## Line: 769 	 aux lvmconf 'global/use_lvmetad = 0'
| [ 0:00] ## Line: 770 	 lvcreate -n $lv2 -l 2 -an $vg1
| [ 0:00] ## Line: 771 	 aux lvmconf 'global/use_lvmetad = 1'
| [ 0:00] ## Line: 772 	 # verify that the second lv is not in lvmetad
| [ 0:00] ## Line: 773 	 lvs $vg1 >err
| [ 0:00] ## Line: 774 	 grep $lv1 err
| [ 0:00] ## Line: 775 	 not grep $lv2 err
| [ 0:00] ## Line: 776 	 # verify that after vgscan without --cache, lvmetad still
| [ 0:00] ## Line: 777 	 # reports the old version
| [ 0:00] ## Line: 778 	 vgscan
| [ 0:00] ## Line: 779 	 lvs $vg1 >err
| [ 0:00] ## Line: 780 	 grep $lv1 err
| [ 0:00] ## Line: 781 	 not grep $lv2 err
| [ 0:00] ## Line: 782 	 # change our system_id, making the vg foreign
| [ 0:00] ## Line: 783 	 echo "$SID2" > "$SIDFILE"
| [ 0:00] ## Line: 784 	 not vgs $vg1 >err
| [ 0:00] ## Line: 785 	 not grep $vg1 err
| [ 0:00] ## Line: 786 	 # use vgscan --cache to update the foreign vg in lvmetad
| [ 0:00] ## Line: 787 	 vgscan --cache
| [ 0:00] ## Line: 788 	 not vgs $vg1 >err
| [ 0:00] ## Line: 789 	 not grep $vg1 err
| [ 0:00] ## Line: 790 	 # change our system_id back to SID1 so we can check that
| [ 0:00] ## Line: 791 	 # lvmetad has the latest copy of the vg (without having
| [ 0:00] ## Line: 792 	 # to use --foreign to check)
| [ 0:00] ## Line: 793 	 echo "$SID1" > "$SIDFILE"
| [ 0:00] ## Line: 794 	 vgs $vg1 >err
| [ 0:00] ## Line: 795 	 grep $vg1 err
| [ 0:00] ## Line: 796 	 lvs $vg1 >err
| [ 0:00] ## Line: 797 	 grep $lv1 err
| [ 0:00] ## Line: 798 	 grep $lv2 err
| [ 0:00] ## Line: 799 	 lvremove $vg1/$lv1
| [ 0:00] ## Line: 800 	 lvremove $vg1/$lv2
| [ 0:00] ## Line: 801 	 vgremove $vg1
| [ 0:00] aux teardown
| [ 0:00] #system_id.sh:1+ aux teardown
| [ 0:00] ## teardown.........ok
###       failed: [ndev-vanilla] shell/system_id.sh

| [ 0:00] Library version:   1.02.146 (2017-12-18)
| [ 0:00] Driver version:    4.35.0
| [ 0:00] Kernel is Linux localhost.localdomain 3.10.0-693.11.1.el7.x86_64 #1 SMP Mon Dec 4 23:52:40 UTC 2017 x86_64 GNU/Linux
| [ 0:00] Selinux mode is not installed.
| [ 0:00]               total        used        free      shared  buff/cache   available
| [ 0:00] Mem:           7822        1081        4141          10        2600        6434
| [ 0:00] Swap:          4095           0        4095
| [ 0:00] Filesystem      Size  Used Avail Use% Mounted on
| [ 0:00] /dev/sdc1        18G  8.4G  8.4G  50% /
| [ 0:00] /dev/sdd1        51G  6.1G   43G  13% /lfskernel
| [ 0:00] devtmpfs        3.9G     0  3.9G   0% /dev
| [ 0:00] tmpfs           3.9G     0  3.9G   0% /run
| [ 0:00] @TESTDIR=/tmp/LVMTEST23765.AJ8S9tkjri
| [ 0:00] @PREFIX=LVMTEST23765
| [ 0:00] ## LVMCONF: activation {
| [ 0:00] ## LVMCONF:     checks = 1
| [ 0:00] ## LVMCONF:     monitoring = 0
| [ 0:00] ## LVMCONF:     polling_interval = 1
| [ 0:00] ## LVMCONF:     raid_region_size = 512
| [ 0:00] ## LVMCONF:     retry_deactivation = 1
| [ 0:00] ## LVMCONF:     snapshot_autoextend_percent = 50
| [ 0:00] ## LVMCONF:     snapshot_autoextend_threshold = 50
| [ 0:00] ## LVMCONF:     udev_rules = 1
| [ 0:00] ## LVMCONF:     udev_sync = 1
| [ 0:00] ## LVMCONF:     verify_udev_operations = 1
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: allocation {
| [ 0:00] ## LVMCONF:     wipe_signatures_when_zeroing_new_lvs = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: backup {
| [ 0:00] ## LVMCONF:     archive = 0
| [ 0:00] ## LVMCONF:     backup = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: devices {
| [ 0:00] ## LVMCONF:     cache_dir = "@TESTDIR@/etc"
| [ 0:00] ## LVMCONF:     default_data_alignment = 1
| [ 0:00] ## LVMCONF:     dir = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     filter = "a|.*|"
| [ 0:00] ## LVMCONF:     global_filter = [ "a|@TESTDIR@/dev/mapper/@PREFIX@.*pv[0-9_]*$|", "r|.*|" ]
| [ 0:00] ## LVMCONF:     md_component_detection  = 0
| [ 0:00] ## LVMCONF:     scan = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     sysfs_scan = 1
| [ 0:00] ## LVMCONF:     write_cache_state = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: dmeventd {
| [ 0:00] ## LVMCONF:     executable = "/sources/boot/LVM2.2.02.177/test/lib/dmeventd"
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: global {
| [ 0:00] ## LVMCONF:     abort_on_internal_errors = 1
| [ 0:00] ## LVMCONF:     cache_check_executable = "/usr/sbin/cache_check"
| [ 0:00] ## LVMCONF:     cache_dump_executable = "/usr/sbin/cache_dump"
| [ 0:00] ## LVMCONF:     cache_repair_executable = "/usr/sbin/cache_repair"
| [ 0:00] ## LVMCONF:     detect_internal_vg_cache_corruption = 1
| [ 0:00] ## LVMCONF:     fallback_to_local_locking = 0
| [ 0:00] ## LVMCONF:     fsadm_executable = "/sources/boot/LVM2.2.02.177/test/lib/fsadm"
| [ 0:00] ## LVMCONF:     library_dir = "@TESTDIR@/lib"
| [ 0:00] ## LVMCONF:     locking_dir = "@TESTDIR@/var/lock/lvm"
| [ 0:00] ## LVMCONF:     locking_type=1
| [ 0:00] ## LVMCONF:     notify_dbus = 0
| [ 0:00] ## LVMCONF:     si_unit_consistency = 1
| [ 0:00] ## LVMCONF:     thin_check_executable = "/usr/sbin/thin_check"
| [ 0:00] ## LVMCONF:     thin_dump_executable = "/usr/sbin/thin_dump"
| [ 0:00] ## LVMCONF:     thin_repair_executable = "/usr/sbin/thin_repair"
| [ 0:00] ## LVMCONF:     use_lvmetad = 0
| [ 0:00] ## LVMCONF:     use_lvmlockd = 0
| [ 0:00] ## LVMCONF:     use_lvmpolld = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: log {
| [ 0:00] ## LVMCONF:     activation = 1
| [ 0:00] ## LVMCONF:     file = "@TESTDIR@/debug.log"
| [ 0:00] ## LVMCONF:     indent = 1
| [ 0:00] ## LVMCONF:     level = 9
| [ 0:00] ## LVMCONF:     overwrite = 1
| [ 0:00] ## LVMCONF:     syslog = 0
| [ 0:00] ## LVMCONF:     verbose = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] <======== Processing test: "tags.sh" ========>
| [ 0:00] 
| [ 0:00] aux prepare_pvs 4
| [ 0:00] #tags.sh:18+ aux prepare_pvs 4
| [ 0:00] ## preparing loop device....ok (/dev/loop0)
| [ 0:01] ## preparing 4 devices...lib/utils: line 212: DM_UDEV_COOKIE: unbound variable
| [ 0:01] set +vx; STACKTRACE; set -vx
| [ 0:01] ##tags.sh:18+ set +vx
| [ 0:01] ## - /lfskernel/sources/boot/LVM2.2.02.177/test/shell/tags.sh:18
| [ 0:01] ## 1 STACKTRACE() called from /lfskernel/sources/boot/LVM2.2.02.177/test/shell/tags.sh:18
| [ 0:01] <======== Info ========>
| [ 0:01] ## DMINFO:   Name             Maj Min Stat Open Targ Event  UUID                                                                
| [ 0:01] ## DMINFO:   @PREFIX@pv4  253   5 L--w    0    1      0 TEST-@PREFIX@pv4                                                
| [ 0:01] ## DMINFO:   @PREFIX@pv3  253   4 L--w    0    1      0 TEST-@PREFIX@pv3                                                
| [ 0:01] ## DMINFO:   @PREFIX@pv2  253   3 L--w    0    1      0 TEST-@PREFIX@pv2                                                
| [ 0:01] ## DMINFO:   @PREFIX@pv1  253   6 L--w    0    1      0 TEST-@PREFIX@pv1                                                
| [ 0:01] <======== Active table ========>
| [ 0:01] ## DMTABLE:  @PREFIX@pv4: 0 69632 linear 7:0 210944
| [ 0:01] ## DMTABLE:  @PREFIX@pv3: 0 69632 linear 7:0 141312
| [ 0:01] ## DMTABLE:  @PREFIX@pv2: 0 69632 linear 7:0 71680
| [ 0:01] ## DMTABLE:  @PREFIX@pv1: 0 69632 linear 7:0 2048
| [ 0:01] <======== Inactive table ========>
| [ 0:01] ## DMITABLE: @PREFIX@pv4: 
| [ 0:01] ## DMITABLE: @PREFIX@pv3: 
| [ 0:01] ## DMITABLE: @PREFIX@pv2: 
| [ 0:01] ## DMITABLE: @PREFIX@pv1: 
| [ 0:01] <======== Status ========>
| [ 0:01] ## DMSTATUS: @PREFIX@pv4: 0 69632 linear 
| [ 0:01] ## DMSTATUS: @PREFIX@pv3: 0 69632 linear 
| [ 0:01] ## DMSTATUS: @PREFIX@pv2: 0 69632 linear 
| [ 0:01] ## DMSTATUS: @PREFIX@pv1: 0 69632 linear 
| [ 0:01] <======== Tree ========>
| [ 0:01] ## DMTREE:   @PREFIX@pv4 (253:5)
| [ 0:01] ## DMTREE:    `- (7:0)
| [ 0:01] ## DMTREE:   @PREFIX@pv3 (253:4)
| [ 0:01] ## DMTREE:    `- (7:0)
| [ 0:01] ## DMTREE:   @PREFIX@pv2 (253:3)
| [ 0:01] ## DMTREE:    `- (7:0)
| [ 0:01] ## DMTREE:   @PREFIX@pv1 (253:6)
| [ 0:01] ## DMTREE:    `- (7:0)
| [ 0:01] ## DMTREE:   LFS_vg-lfs (253:2)
| [ 0:01] ## DMTREE:    `- (8:16)
| [ 0:01] ## DMTREE:   centos-swap (253:1)
| [ 0:01] ## DMTREE:    `- (8:2)
| [ 0:01] ## DMTREE:   centos-root (253:0)
| [ 0:01] ## DMTREE:    `- (8:2)
| [ 0:01] <======== Recursive list of @TESTDIR@/dev ========>
| [ 0:01] ## LSLR:	@TESTDIR@/dev:
| [ 0:01] ## LSLR:	total 4
| [ 0:01] ## LSLR:	brw-r--r-- 1 root root 7, 0 Feb 21 02:27 loop0
| [ 0:01] ## LSLR:	brw-r--r-- 1 root root 7, 1 Feb 21 02:27 loop1
| [ 0:01] ## LSLR:	brw-r--r-- 1 root root 7, 2 Feb 21 02:27 loop2
| [ 0:01] ## LSLR:	brw-r--r-- 1 root root 7, 3 Feb 21 02:27 loop3
| [ 0:01] ## LSLR:	brw-r--r-- 1 root root 7, 4 Feb 21 02:27 loop4
| [ 0:01] ## LSLR:	brw-r--r-- 1 root root 7, 5 Feb 21 02:27 loop5
| [ 0:01] ## LSLR:	brw-r--r-- 1 root root 7, 6 Feb 21 02:27 loop6
| [ 0:01] ## LSLR:	brw-r--r-- 1 root root 7, 7 Feb 21 02:27 loop7
| [ 0:01] ## LSLR:	drwxr-xr-x 2 root root 4096 Feb 21 02:27 mapper
| [ 0:01] ## LSLR:	crw-r--r-- 1 root root 1, 3 Feb 21 02:27 testnull
| [ 0:01] ## LSLR:	
| [ 0:01] ## LSLR:	@TESTDIR@/dev/mapper:
| [ 0:01] ## LSLR:	total 0
| [ 0:01] ## LSLR:	brw------- 1 root root 253,   6 Feb 21 02:27 @PREFIX@pv1
| [ 0:01] ## LSLR:	brw------- 1 root root 253,   3 Feb 21 02:27 @PREFIX@pv2
| [ 0:01] ## LSLR:	brw------- 1 root root 253,   4 Feb 21 02:27 @PREFIX@pv3
| [ 0:01] ## LSLR:	brw------- 1 root root 253,   5 Feb 21 02:27 @PREFIX@pv4
| [ 0:01] ## LSLR:	crw------- 1 root root  10, 236 Feb 21 02:27 control
| [ 0:01] <======== Udev DB content ========>
| [ 0:01] ## UDEV:	P: /devices/virtual/block/dm-0
| [ 0:01] ## UDEV:	N: dm-0
| [ 0:01] ## UDEV:	E: DEVNAME=/dev/dm-0
| [ 0:01] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-0
| [ 0:01] ## UDEV:	E: DEVTYPE=disk
| [ 0:01] ## UDEV:	E: MAJOR=253
| [ 0:01] ## UDEV:	E: MINOR=0
| [ 0:01] ## UDEV:	E: SUBSYSTEM=block
| [ 0:01] ## UDEV:	
| [ 0:01] ## UDEV:	P: /devices/virtual/block/dm-1
| [ 0:01] ## UDEV:	N: dm-1
| [ 0:01] ## UDEV:	E: DEVNAME=/dev/dm-1
| [ 0:01] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-1
| [ 0:01] ## UDEV:	E: DEVTYPE=disk
| [ 0:01] ## UDEV:	E: MAJOR=253
| [ 0:01] ## UDEV:	E: MINOR=1
| [ 0:01] ## UDEV:	E: SUBSYSTEM=block
| [ 0:01] ## UDEV:	
| [ 0:01] ## UDEV:	P: /devices/virtual/block/dm-2
| [ 0:01] ## UDEV:	N: dm-2
| [ 0:01] ## UDEV:	E: DEVNAME=/dev/dm-2
| [ 0:01] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-2
| [ 0:01] ## UDEV:	E: DEVTYPE=disk
| [ 0:01] ## UDEV:	E: MAJOR=253
| [ 0:01] ## UDEV:	E: MINOR=2
| [ 0:01] ## UDEV:	E: SUBSYSTEM=block
| [ 0:01] ## UDEV:	
| [ 0:01] ## UDEV:	P: /devices/virtual/block/dm-3
| [ 0:01] ## UDEV:	N: dm-3
| [ 0:01] ## UDEV:	E: DEVNAME=/dev/dm-3
| [ 0:01] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-3
| [ 0:01] ## UDEV:	E: DEVTYPE=disk
| [ 0:01] ## UDEV:	E: MAJOR=253
| [ 0:01] ## UDEV:	E: MINOR=3
| [ 0:01] ## UDEV:	E: SUBSYSTEM=block
| [ 0:01] ## UDEV:	
| [ 0:01] ## UDEV:	P: /devices/virtual/block/dm-4
| [ 0:01] ## UDEV:	N: dm-4
| [ 0:01] ## UDEV:	E: DEVNAME=/dev/dm-4
| [ 0:01] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-4
| [ 0:01] ## UDEV:	E: DEVTYPE=disk
| [ 0:01] ## UDEV:	E: MAJOR=253
| [ 0:01] ## UDEV:	E: MINOR=4
| [ 0:01] ## UDEV:	E: SUBSYSTEM=block
| [ 0:01] ## UDEV:	
| [ 0:01] ## UDEV:	P: /devices/virtual/block/dm-5
| [ 0:01] ## UDEV:	N: dm-5
| [ 0:01] ## UDEV:	E: DEVNAME=/dev/dm-5
| [ 0:01] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-5
| [ 0:01] ## UDEV:	E: DEVTYPE=disk
| [ 0:01] ## UDEV:	E: MAJOR=253
| [ 0:01] ## UDEV:	E: MINOR=5
| [ 0:01] ## UDEV:	E: SUBSYSTEM=block
| [ 0:01] ## UDEV:	
| [ 0:01] ## UDEV:	P: /devices/virtual/block/dm-6
| [ 0:01] ## UDEV:	N: dm-6
| [ 0:01] ## UDEV:	E: DEVNAME=/dev/dm-6
| [ 0:01] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-6
| [ 0:01] ## UDEV:	E: DEVTYPE=disk
| [ 0:01] ## UDEV:	E: MAJOR=253
| [ 0:01] ## UDEV:	E: MINOR=6
| [ 0:01] ## UDEV:	E: SUBSYSTEM=block
| [ 0:01] ## UDEV:	
| [ 0:01] ## UDEV:	P: /devices/virtual/block/loop0
| [ 0:01] ## UDEV:	N: loop0
| [ 0:01] ## UDEV:	E: DEVNAME=/dev/loop0
| [ 0:01] ## UDEV:	E: DEVPATH=/devices/virtual/block/loop0
| [ 0:01] ## UDEV:	E: DEVTYPE=disk
| [ 0:01] ## UDEV:	E: MAJOR=7
| [ 0:01] ## UDEV:	E: MINOR=0
| [ 0:01] ## UDEV:	E: SUBSYSTEM=block
| [ 0:01] ## UDEV:	
| [ 0:01] <======== Script file "tags.sh" ========>
| [ 0:01] ## Line: 1 	 #!/usr/bin/env bash
| [ 0:01] ## Line: 2 	 
| [ 0:01] ## Line: 3 	 # Copyright (C) 2008-2012 Red Hat, Inc. All rights reserved.
| [ 0:01] ## Line: 4 	 #
| [ 0:01] ## Line: 5 	 # This copyrighted material is made available to anyone wishing to use,
| [ 0:01] ## Line: 6 	 # modify, copy, or redistribute it subject to the terms and conditions
| [ 0:01] ## Line: 7 	 # of the GNU General Public License v.2.
| [ 0:01] ## Line: 8 	 #
| [ 0:01] ## Line: 9 	 # You should have received a copy of the GNU General Public License
| [ 0:01] ## Line: 10 	 # along with this program; if not, write to the Free Software Foundation,
| [ 0:01] ## Line: 11 	 # Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA
| [ 0:01] ## Line: 12 	 
| [ 0:01] ## Line: 13 	 SKIP_WITH_LVMLOCKD=1
| [ 0:01] ## Line: 14 	 SKIP_WITH_LVMPOLLD=1
| [ 0:01] ## Line: 15 	 
| [ 0:01] ## Line: 16 	 . lib/inittest
| [ 0:01] ## Line: 17 	 
| [ 0:01] ## Line: 18 	 aux prepare_pvs 4
| [ 0:01] ## Line: 19 	 
| [ 0:01] ## Line: 20 	 # vgcreate with --addtag
| [ 0:01] ## Line: 21 	 vgcreate --addtag firstvg $vg1 "$dev1" "$dev2"
| [ 0:01] ## Line: 22 	 vgcreate --addtag secondvg $vg2 "$dev3" "$dev4"
| [ 0:01] ## Line: 23 	 check vg_field $vg1 tags "firstvg"
| [ 0:01] ## Line: 24 	 check vg_field $vg2 tags "secondvg"
| [ 0:01] ## Line: 25 	 vgremove -f $vg1 $vg2
| [ 0:01] ## Line: 26 	 
| [ 0:01] ## Line: 27 	 # vgchange with --addtag and --deltag
| [ 0:01] ## Line: 28 	 vgcreate $vg1 "$dev1" "$dev2"
| [ 0:01] ## Line: 29 	 vgcreate $vg2 "$dev3" "$dev4"
| [ 0:01] ## Line: 30 	 vgchange --addtag firstvgtag1 $vg1
| [ 0:01] ## Line: 31 	 # adding a tag multiple times is not an error
| [ 0:01] ## Line: 32 	 vgchange --addtag firstvgtag2 $vg1
| [ 0:01] ## Line: 33 	 vgchange --addtag firstvgtag2 $vg1
| [ 0:01] ## Line: 34 	 vgchange --addtag firstvgtag3 $vg1
| [ 0:01] ## Line: 35 	 vgchange --addtag secondvgtag1 $vg2
| [ 0:01] ## Line: 36 	 vgchange --addtag secondvgtag2 $vg2
| [ 0:01] ## Line: 37 	 vgchange --addtag secondvgtag3 $vg2
| [ 0:01] ## Line: 38 	 check vg_field @firstvgtag2 tags "firstvgtag1,firstvgtag2,firstvgtag3"
| [ 0:01] ## Line: 39 	 check vg_field @secondvgtag1 tags "secondvgtag1,secondvgtag2,secondvgtag3"
| [ 0:01] ## Line: 40 	 vgchange --deltag firstvgtag2 $vg1
| [ 0:01] ## Line: 41 	 check vg_field @firstvgtag1 tags "firstvgtag1,firstvgtag3"
| [ 0:01] ## Line: 42 	 # deleting a tag multiple times is not an error
| [ 0:01] ## Line: 43 	 vgchange --deltag firstvgtag2 $vg1
| [ 0:01] ## Line: 44 	 vgchange --deltag firstvgtag1 $vg2
| [ 0:01] ## Line: 45 	 vgremove -f $vg1 $vg2
| [ 0:01] ## Line: 46 	 
| [ 0:01] ## Line: 47 	 # lvcreate with --addtag
| [ 0:01] ## Line: 48 	 vgcreate $vg1 "$dev1" "$dev2"
| [ 0:01] ## Line: 49 	 lvcreate --addtag firstlvtag1 -l 4 -n $lv1 $vg1
| [ 0:01] ## Line: 50 	 lvcreate --addtag secondlvtag1 -l 4 -n $lv2 $vg1
| [ 0:01] ## Line: 51 	 check lv_field @firstlvtag1 tags "firstlvtag1"
| [ 0:01] ## Line: 52 	 not check lv_field @secondlvtag1 tags "firstlvtag1"
| [ 0:01] ## Line: 53 	 check lv_field $vg1/$lv2 tags "secondlvtag1"
| [ 0:01] ## Line: 54 	 not check lv_field $vg1/$lv1 tags "secondlvtag1"
| [ 0:01] ## Line: 55 	 vgremove -f $vg1
| [ 0:01] ## Line: 56 	 
| [ 0:01] ## Line: 57 	 # lvchange with --addtag and --deltag
| [ 0:01] ## Line: 58 	 vgcreate $vg1 "$dev1" "$dev2"
| [ 0:01] ## Line: 59 	 lvcreate -l 4 -n $lv1 $vg1
| [ 0:01] ## Line: 60 	 lvcreate -l 4 -n $lv2 $vg1
| [ 0:01] ## Line: 61 	 lvchange --addtag firstlvtag1 $vg1/$lv1
| [ 0:01] ## Line: 62 	 # adding a tag multiple times is not an error
| [ 0:01] ## Line: 63 	 lvchange --addtag firstlvtag2 $vg1/$lv1
| [ 0:01] ## Line: 64 	 lvchange --addtag firstlvtag2 $vg1/$lv1
| [ 0:01] ## Line: 65 	 lvchange --addtag firstlvtag3 $vg1/$lv1
| [ 0:01] ## Line: 66 	 lvchange --addtag secondlvtag1 $vg1/$lv2
| [ 0:01] ## Line: 67 	 lvchange --addtag secondlvtag2 $vg1/$lv2
| [ 0:01] ## Line: 68 	 lvchange --addtag secondlvtag3 $vg1/$lv2
| [ 0:01] ## Line: 69 	 check lv_field $vg1/$lv1 tags "firstlvtag1,firstlvtag2,firstlvtag3"
| [ 0:01] ## Line: 70 	 not check lv_field $vg1/$lv1 tags "secondlvtag1"
| [ 0:01] ## Line: 71 	 check lv_field $vg1/$lv2 tags "secondlvtag1,secondlvtag2,secondlvtag3"
| [ 0:01] ## Line: 72 	 not check lv_field $vg1/$lv1 tags "secondlvtag1"
| [ 0:01] ## Line: 73 	 # deleting a tag multiple times is not an error
| [ 0:01] ## Line: 74 	 lvchange --deltag firstlvtag2 $vg1/$lv1
| [ 0:01] ## Line: 75 	 lvchange --deltag firstlvtag2 $vg1/$lv1
| [ 0:01] ## Line: 76 	 check lv_field $vg1/$lv1 tags "firstlvtag1,firstlvtag3"
| [ 0:01] ## Line: 77 	 check lv_field $vg1/$lv2 tags "secondlvtag1,secondlvtag2,secondlvtag3"
| [ 0:01] ## Line: 78 	 
| [ 0:01] ## Line: 79 	 vgremove -ff $vg1
| [ 0:01] aux teardown
| [ 0:01] #tags.sh:1+ aux teardown
| [ 0:01] ## teardown.........ok
###       failed: [ndev-vanilla] shell/tags.sh

| [ 0:00] Library version:   1.02.146 (2017-12-18)
| [ 0:00] Driver version:    4.35.0
| [ 0:00] Kernel is Linux localhost.localdomain 3.10.0-693.11.1.el7.x86_64 #1 SMP Mon Dec 4 23:52:40 UTC 2017 x86_64 GNU/Linux
| [ 0:00] Selinux mode is not installed.
| [ 0:00]               total        used        free      shared  buff/cache   available
| [ 0:00] Mem:           7822        1080        4141          10        2600        6435
| [ 0:00] Swap:          4095           0        4095
| [ 0:00] Filesystem      Size  Used Avail Use% Mounted on
| [ 0:00] /dev/sdc1        18G  8.4G  8.4G  50% /
| [ 0:00] /dev/sdd1        51G  6.1G   43G  13% /lfskernel
| [ 0:00] devtmpfs        3.9G     0  3.9G   0% /dev
| [ 0:00] tmpfs           3.9G     0  3.9G   0% /run
| [ 0:00] @TESTDIR=/tmp/LVMTEST23958.W7Yoif6sDq
| [ 0:00] @PREFIX=LVMTEST23958
| [ 0:00] ## LVMCONF: activation {
| [ 0:00] ## LVMCONF:     checks = 1
| [ 0:00] ## LVMCONF:     monitoring = 0
| [ 0:00] ## LVMCONF:     polling_interval = 1
| [ 0:00] ## LVMCONF:     raid_region_size = 512
| [ 0:00] ## LVMCONF:     retry_deactivation = 1
| [ 0:00] ## LVMCONF:     snapshot_autoextend_percent = 50
| [ 0:00] ## LVMCONF:     snapshot_autoextend_threshold = 50
| [ 0:00] ## LVMCONF:     udev_rules = 1
| [ 0:00] ## LVMCONF:     udev_sync = 1
| [ 0:00] ## LVMCONF:     verify_udev_operations = 1
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: allocation {
| [ 0:00] ## LVMCONF:     wipe_signatures_when_zeroing_new_lvs = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: backup {
| [ 0:00] ## LVMCONF:     archive = 0
| [ 0:00] ## LVMCONF:     backup = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: devices {
| [ 0:00] ## LVMCONF:     cache_dir = "@TESTDIR@/etc"
| [ 0:00] ## LVMCONF:     default_data_alignment = 1
| [ 0:00] ## LVMCONF:     dir = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     filter = "a|.*|"
| [ 0:00] ## LVMCONF:     global_filter = [ "a|@TESTDIR@/dev/mapper/@PREFIX@.*pv[0-9_]*$|", "r|.*|" ]
| [ 0:00] ## LVMCONF:     md_component_detection  = 0
| [ 0:00] ## LVMCONF:     scan = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     sysfs_scan = 1
| [ 0:00] ## LVMCONF:     write_cache_state = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: dmeventd {
| [ 0:00] ## LVMCONF:     executable = "/sources/boot/LVM2.2.02.177/test/lib/dmeventd"
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: global {
| [ 0:00] ## LVMCONF:     abort_on_internal_errors = 1
| [ 0:00] ## LVMCONF:     cache_check_executable = "/usr/sbin/cache_check"
| [ 0:00] ## LVMCONF:     cache_dump_executable = "/usr/sbin/cache_dump"
| [ 0:00] ## LVMCONF:     cache_repair_executable = "/usr/sbin/cache_repair"
| [ 0:00] ## LVMCONF:     detect_internal_vg_cache_corruption = 1
| [ 0:00] ## LVMCONF:     fallback_to_local_locking = 0
| [ 0:00] ## LVMCONF:     fsadm_executable = "/sources/boot/LVM2.2.02.177/test/lib/fsadm"
| [ 0:00] ## LVMCONF:     library_dir = "@TESTDIR@/lib"
| [ 0:00] ## LVMCONF:     locking_dir = "@TESTDIR@/var/lock/lvm"
| [ 0:00] ## LVMCONF:     locking_type=1
| [ 0:00] ## LVMCONF:     notify_dbus = 0
| [ 0:00] ## LVMCONF:     si_unit_consistency = 1
| [ 0:00] ## LVMCONF:     thin_check_executable = "/usr/sbin/thin_check"
| [ 0:00] ## LVMCONF:     thin_dump_executable = "/usr/sbin/thin_dump"
| [ 0:00] ## LVMCONF:     thin_repair_executable = "/usr/sbin/thin_repair"
| [ 0:00] ## LVMCONF:     use_lvmetad = 0
| [ 0:00] ## LVMCONF:     use_lvmlockd = 0
| [ 0:00] ## LVMCONF:     use_lvmpolld = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: log {
| [ 0:00] ## LVMCONF:     activation = 1
| [ 0:00] ## LVMCONF:     file = "@TESTDIR@/debug.log"
| [ 0:00] ## LVMCONF:     indent = 1
| [ 0:00] ## LVMCONF:     level = 9
| [ 0:00] ## LVMCONF:     overwrite = 1
| [ 0:00] ## LVMCONF:     syslog = 0
| [ 0:00] ## LVMCONF:     verbose = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] <======== Processing test: "test-partition.sh" ========>
| [ 0:00] 
| [ 0:00] which sfdisk || skip
| [ 0:00] #test-partition.sh:26+ which sfdisk
| [ 0:00] /sbin/sfdisk
| [ 0:00] 
| [ 0:00] aux prepare_pvs 1 30
| [ 0:00] #test-partition.sh:28+ aux prepare_pvs 1 30
| [ 0:00] ## preparing loop device....ok (/dev/loop0)
| [ 0:00] ## preparing 1 devices...lib/utils: line 212: DM_UDEV_COOKIE: unbound variable
| [ 0:00] set +vx; STACKTRACE; set -vx
| [ 0:00] ##test-partition.sh:28+ set +vx
| [ 0:00] ## - /lfskernel/sources/boot/LVM2.2.02.177/test/shell/test-partition.sh:28
| [ 0:00] ## 1 STACKTRACE() called from /lfskernel/sources/boot/LVM2.2.02.177/test/shell/test-partition.sh:28
| [ 0:00] <======== Info ========>
| [ 0:00] ## DMINFO:   Name             Maj Min Stat Open Targ Event  UUID                                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv1  253   3 L--w    0    1      0 TEST-@PREFIX@pv1                                                
| [ 0:00] <======== Active table ========>
| [ 0:00] ## DMTABLE:  @PREFIX@pv1: 0 61440 linear 7:0 2048
| [ 0:00] <======== Inactive table ========>
| [ 0:00] ## DMITABLE: @PREFIX@pv1: 
| [ 0:00] <======== Status ========>
| [ 0:00] ## DMSTATUS: @PREFIX@pv1: 0 61440 linear 
| [ 0:00] <======== Tree ========>
| [ 0:00] ## DMTREE:   @PREFIX@pv1 (253:3)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   LFS_vg-lfs (253:2)
| [ 0:00] ## DMTREE:    `- (8:16)
| [ 0:00] ## DMTREE:   centos-swap (253:1)
| [ 0:00] ## DMTREE:    `- (8:2)
| [ 0:00] ## DMTREE:   centos-root (253:0)
| [ 0:00] ## DMTREE:    `- (8:2)
| [ 0:00] <======== Recursive list of @TESTDIR@/dev ========>
| [ 0:00] ## LSLR:	@TESTDIR@/dev:
| [ 0:00] ## LSLR:	total 4
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 0 Feb 21 02:27 loop0
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 1 Feb 21 02:27 loop1
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 2 Feb 21 02:27 loop2
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 3 Feb 21 02:27 loop3
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 4 Feb 21 02:27 loop4
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 5 Feb 21 02:27 loop5
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 6 Feb 21 02:27 loop6
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 7 Feb 21 02:27 loop7
| [ 0:00] ## LSLR:	drwxr-xr-x 2 root root 4096 Feb 21 02:27 mapper
| [ 0:00] ## LSLR:	crw-r--r-- 1 root root 1, 3 Feb 21 02:27 testnull
| [ 0:00] ## LSLR:	
| [ 0:00] ## LSLR:	@TESTDIR@/dev/mapper:
| [ 0:00] ## LSLR:	total 0
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   3 Feb 21 02:27 @PREFIX@pv1
| [ 0:00] ## LSLR:	crw------- 1 root root  10, 236 Feb 21 02:27 control
| [ 0:00] <======== Udev DB content ========>
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-0
| [ 0:00] ## UDEV:	N: dm-0
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-0
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-0
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=0
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-1
| [ 0:00] ## UDEV:	N: dm-1
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-1
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-1
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=1
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-2
| [ 0:00] ## UDEV:	N: dm-2
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-2
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-2
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=2
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-3
| [ 0:00] ## UDEV:	N: dm-3
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-3
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-3
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=3
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/loop0
| [ 0:00] ## UDEV:	N: loop0
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/loop0
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/loop0
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=7
| [ 0:00] ## UDEV:	E: MINOR=0
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] <======== Script file "test-partition.sh" ========>
| [ 0:00] ## Line: 1 	 #!/usr/bin/env bash
| [ 0:00] ## Line: 2 	 
| [ 0:00] ## Line: 3 	 # Copyright (C) 2010 Red Hat, Inc. All rights reserved.
| [ 0:00] ## Line: 4 	 #
| [ 0:00] ## Line: 5 	 # This copyrighted material is made available to anyone wishing to use,
| [ 0:00] ## Line: 6 	 # modify, copy, or redistribute it subject to the terms and conditions
| [ 0:00] ## Line: 7 	 # of the GNU General Public License v.2.
| [ 0:00] ## Line: 8 	 #
| [ 0:00] ## Line: 9 	 # You should have received a copy of the GNU General Public License
| [ 0:00] ## Line: 10 	 # along with this program; if not, write to the Free Software Foundation,
| [ 0:00] ## Line: 11 	 # Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA
| [ 0:00] ## Line: 12 	 
| [ 0:00] ## Line: 13 	 #
| [ 0:00] ## Line: 14 	 # Testcase for bugzilla #621173 
| [ 0:00] ## Line: 15 	 # excercises partition table scanning code path
| [ 0:00] ## Line: 16 	 #
| [ 0:00] ## Line: 17 	 
| [ 0:00] ## Line: 18 	 
| [ 0:00] ## Line: 19 	 SKIP_WITH_LVMLOCKD=1
| [ 0:00] ## Line: 20 	 SKIP_WITH_LVMPOLLD=1
| [ 0:00] ## Line: 21 	 
| [ 0:00] ## Line: 22 	 LVM_TEST_CONFIG_DEVICES="types = [\"device-mapper\", 142]"
| [ 0:00] ## Line: 23 	 
| [ 0:00] ## Line: 24 	 . lib/inittest
| [ 0:00] ## Line: 25 	 
| [ 0:00] ## Line: 26 	 which sfdisk || skip
| [ 0:00] ## Line: 27 	 
| [ 0:00] ## Line: 28 	 aux prepare_pvs 1 30
| [ 0:00] ## Line: 29 	 
| [ 0:00] ## Line: 30 	 pvs "$dev1"
| [ 0:00] ## Line: 31 	 
| [ 0:00] ## Line: 32 	 # create small partition table
| [ 0:00] ## Line: 33 	 echo "1 2" | sfdisk --force "$dev1"
| [ 0:00] ## Line: 34 	 
| [ 0:00] ## Line: 35 	 aux notify_lvmetad "$dev1"
| [ 0:00] ## Line: 36 	 not pvs "$dev1"
| [ 0:00] aux teardown
| [ 0:00] #test-partition.sh:1+ aux teardown
| [ 0:00] ## teardown.........ok
###       failed: [ndev-vanilla] shell/test-partition.sh
###      skipped: [ndev-vanilla] shell/thin-autoumount-dmeventd.sh
###      skipped: [ndev-vanilla] shell/thin-defaults.sh
###      skipped: [ndev-vanilla] shell/thin-dmeventd-warns.sh
###      skipped: [ndev-vanilla] shell/thin-flags.sh
###      skipped: [ndev-vanilla] shell/thin-foreign-dmeventd.sh
###      skipped: [ndev-vanilla] shell/thin-large.sh
###      skipped: [ndev-vanilla] shell/thin-merge.sh
###      skipped: [ndev-vanilla] shell/thin-overprovisioning.sh
###      skipped: [ndev-vanilla] shell/thin-resize-match.sh
###      skipped: [ndev-vanilla] shell/thin-restore.sh
###      skipped: [ndev-vanilla] shell/thin-vglock.sh
###      skipped: [ndev-vanilla] shell/thin-volume-list.sh
###      skipped: [ndev-vanilla] shell/topology-support.sh

| [ 0:00] Library version:   1.02.146 (2017-12-18)
| [ 0:00] Driver version:    4.35.0
| [ 0:00] Kernel is Linux localhost.localdomain 3.10.0-693.11.1.el7.x86_64 #1 SMP Mon Dec 4 23:52:40 UTC 2017 x86_64 GNU/Linux
| [ 0:00] Selinux mode is not installed.
| [ 0:00]               total        used        free      shared  buff/cache   available
| [ 0:00] Mem:           7822        1070        4150          10        2601        6444
| [ 0:00] Swap:          4095           0        4095
| [ 0:00] Filesystem      Size  Used Avail Use% Mounted on
| [ 0:00] /dev/sdc1        18G  8.4G  8.4G  50% /
| [ 0:00] /dev/sdd1        51G  6.1G   43G  13% /lfskernel
| [ 0:00] devtmpfs        3.9G     0  3.9G   0% /dev
| [ 0:00] tmpfs           3.9G     0  3.9G   0% /run
| [ 0:00] @TESTDIR=/tmp/LVMTEST25023.abt3czZEnU
| [ 0:00] @PREFIX=LVMTEST25023
| [ 0:00] ## LVMCONF: activation {
| [ 0:00] ## LVMCONF:     checks = 1
| [ 0:00] ## LVMCONF:     monitoring = 0
| [ 0:00] ## LVMCONF:     polling_interval = 1
| [ 0:00] ## LVMCONF:     raid_region_size = 512
| [ 0:00] ## LVMCONF:     retry_deactivation = 1
| [ 0:00] ## LVMCONF:     snapshot_autoextend_percent = 50
| [ 0:00] ## LVMCONF:     snapshot_autoextend_threshold = 50
| [ 0:00] ## LVMCONF:     udev_rules = 1
| [ 0:00] ## LVMCONF:     udev_sync = 1
| [ 0:00] ## LVMCONF:     verify_udev_operations = 1
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: allocation {
| [ 0:00] ## LVMCONF:     wipe_signatures_when_zeroing_new_lvs = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: backup {
| [ 0:00] ## LVMCONF:     archive = 0
| [ 0:00] ## LVMCONF:     backup = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: devices {
| [ 0:00] ## LVMCONF:     cache_dir = "@TESTDIR@/etc"
| [ 0:00] ## LVMCONF:     default_data_alignment = 1
| [ 0:00] ## LVMCONF:     dir = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     filter = "a|.*|"
| [ 0:00] ## LVMCONF:     global_filter = [ "a|@TESTDIR@/dev/mapper/@PREFIX@.*pv[0-9_]*$|", "r|.*|" ]
| [ 0:00] ## LVMCONF:     md_component_detection  = 0
| [ 0:00] ## LVMCONF:     scan = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     sysfs_scan = 1
| [ 0:00] ## LVMCONF:     write_cache_state = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: dmeventd {
| [ 0:00] ## LVMCONF:     executable = "/sources/boot/LVM2.2.02.177/test/lib/dmeventd"
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: global {
| [ 0:00] ## LVMCONF:     abort_on_internal_errors = 1
| [ 0:00] ## LVMCONF:     cache_check_executable = "/usr/sbin/cache_check"
| [ 0:00] ## LVMCONF:     cache_dump_executable = "/usr/sbin/cache_dump"
| [ 0:00] ## LVMCONF:     cache_repair_executable = "/usr/sbin/cache_repair"
| [ 0:00] ## LVMCONF:     detect_internal_vg_cache_corruption = 1
| [ 0:00] ## LVMCONF:     fallback_to_local_locking = 0
| [ 0:00] ## LVMCONF:     fsadm_executable = "/sources/boot/LVM2.2.02.177/test/lib/fsadm"
| [ 0:00] ## LVMCONF:     library_dir = "@TESTDIR@/lib"
| [ 0:00] ## LVMCONF:     locking_dir = "@TESTDIR@/var/lock/lvm"
| [ 0:00] ## LVMCONF:     locking_type=1
| [ 0:00] ## LVMCONF:     notify_dbus = 0
| [ 0:00] ## LVMCONF:     si_unit_consistency = 1
| [ 0:00] ## LVMCONF:     thin_check_executable = "/usr/sbin/thin_check"
| [ 0:00] ## LVMCONF:     thin_dump_executable = "/usr/sbin/thin_dump"
| [ 0:00] ## LVMCONF:     thin_repair_executable = "/usr/sbin/thin_repair"
| [ 0:00] ## LVMCONF:     use_lvmetad = 0
| [ 0:00] ## LVMCONF:     use_lvmlockd = 0
| [ 0:00] ## LVMCONF:     use_lvmpolld = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: log {
| [ 0:00] ## LVMCONF:     activation = 1
| [ 0:00] ## LVMCONF:     file = "@TESTDIR@/debug.log"
| [ 0:00] ## LVMCONF:     indent = 1
| [ 0:00] ## LVMCONF:     level = 9
| [ 0:00] ## LVMCONF:     overwrite = 1
| [ 0:00] ## LVMCONF:     syslog = 0
| [ 0:00] ## LVMCONF:     verbose = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] <======== Processing test: "unknown-segment.sh" ========>
| [ 0:00] 
| [ 0:00] aux prepare_vg 4
| [ 0:00] #unknown-segment.sh:18+ aux prepare_vg 4
| [ 0:00] ## preparing loop device....ok (/dev/loop0)
| [ 0:00] ## preparing 4 devices...lib/utils: line 212: DM_UDEV_COOKIE: unbound variable
| [ 0:00] set +vx; STACKTRACE; set -vx
| [ 0:00] ##unknown-segment.sh:18+ set +vx
| [ 0:00] ## - /lfskernel/sources/boot/LVM2.2.02.177/test/shell/unknown-segment.sh:18
| [ 0:00] ## 1 STACKTRACE() called from /lfskernel/sources/boot/LVM2.2.02.177/test/shell/unknown-segment.sh:18
| [ 0:00] <======== Info ========>
| [ 0:01] ## DMINFO:   Name             Maj Min Stat Open Targ Event  UUID                                                                
| [ 0:01] ## DMINFO:   @PREFIX@pv3  253   3 L--w    0    1      0 TEST-@PREFIX@pv3                                                
| [ 0:01] ## DMINFO:   @PREFIX@pv2  253   6 L--w    0    1      0 TEST-@PREFIX@pv2                                                
| [ 0:01] ## DMINFO:   @PREFIX@pv1  253   5 L--w    0    1      0 TEST-@PREFIX@pv1                                                
| [ 0:01] ## DMINFO:   @PREFIX@pv4  253   4 L--w    0    1      0 TEST-@PREFIX@pv4                                                
| [ 0:01] <======== Active table ========>
| [ 0:01] ## DMTABLE:  @PREFIX@pv3: 0 69632 linear 7:0 141312
| [ 0:01] ## DMTABLE:  @PREFIX@pv2: 0 69632 linear 7:0 71680
| [ 0:01] ## DMTABLE:  @PREFIX@pv1: 0 69632 linear 7:0 2048
| [ 0:01] ## DMTABLE:  @PREFIX@pv4: 0 69632 linear 7:0 210944
| [ 0:01] <======== Inactive table ========>
| [ 0:01] ## DMITABLE: @PREFIX@pv3: 
| [ 0:01] ## DMITABLE: @PREFIX@pv2: 
| [ 0:01] ## DMITABLE: @PREFIX@pv1: 
| [ 0:01] ## DMITABLE: @PREFIX@pv4: 
| [ 0:01] <======== Status ========>
| [ 0:01] ## DMSTATUS: @PREFIX@pv3: 0 69632 linear 
| [ 0:01] ## DMSTATUS: @PREFIX@pv2: 0 69632 linear 
| [ 0:01] ## DMSTATUS: @PREFIX@pv1: 0 69632 linear 
| [ 0:01] ## DMSTATUS: @PREFIX@pv4: 0 69632 linear 
| [ 0:01] <======== Tree ========>
| [ 0:01] ## DMTREE:   @PREFIX@pv3 (253:3)
| [ 0:01] ## DMTREE:    `- (7:0)
| [ 0:01] ## DMTREE:   @PREFIX@pv2 (253:6)
| [ 0:01] ## DMTREE:    `- (7:0)
| [ 0:01] ## DMTREE:   @PREFIX@pv1 (253:5)
| [ 0:01] ## DMTREE:    `- (7:0)
| [ 0:01] ## DMTREE:   LFS_vg-lfs (253:2)
| [ 0:01] ## DMTREE:    `- (8:16)
| [ 0:01] ## DMTREE:   centos-swap (253:1)
| [ 0:01] ## DMTREE:    `- (8:2)
| [ 0:01] ## DMTREE:   centos-root (253:0)
| [ 0:01] ## DMTREE:    `- (8:2)
| [ 0:01] ## DMTREE:   @PREFIX@pv4 (253:4)
| [ 0:01] ## DMTREE:    `- (7:0)
| [ 0:01] <======== Recursive list of @TESTDIR@/dev ========>
| [ 0:01] ## LSLR:	@TESTDIR@/dev:
| [ 0:01] ## LSLR:	total 4
| [ 0:01] ## LSLR:	brw-r--r-- 1 root root 7, 0 Feb 21 02:27 loop0
| [ 0:01] ## LSLR:	brw-r--r-- 1 root root 7, 1 Feb 21 02:27 loop1
| [ 0:01] ## LSLR:	brw-r--r-- 1 root root 7, 2 Feb 21 02:27 loop2
| [ 0:01] ## LSLR:	brw-r--r-- 1 root root 7, 3 Feb 21 02:27 loop3
| [ 0:01] ## LSLR:	brw-r--r-- 1 root root 7, 4 Feb 21 02:27 loop4
| [ 0:01] ## LSLR:	brw-r--r-- 1 root root 7, 5 Feb 21 02:27 loop5
| [ 0:01] ## LSLR:	brw-r--r-- 1 root root 7, 6 Feb 21 02:27 loop6
| [ 0:01] ## LSLR:	brw-r--r-- 1 root root 7, 7 Feb 21 02:27 loop7
| [ 0:01] ## LSLR:	drwxr-xr-x 2 root root 4096 Feb 21 02:27 mapper
| [ 0:01] ## LSLR:	crw-r--r-- 1 root root 1, 3 Feb 21 02:27 testnull
| [ 0:01] ## LSLR:	
| [ 0:01] ## LSLR:	@TESTDIR@/dev/mapper:
| [ 0:01] ## LSLR:	total 0
| [ 0:01] ## LSLR:	brw------- 1 root root 253,   5 Feb 21 02:27 @PREFIX@pv1
| [ 0:01] ## LSLR:	brw------- 1 root root 253,   6 Feb 21 02:27 @PREFIX@pv2
| [ 0:01] ## LSLR:	brw------- 1 root root 253,   3 Feb 21 02:27 @PREFIX@pv3
| [ 0:01] ## LSLR:	brw------- 1 root root 253,   4 Feb 21 02:27 @PREFIX@pv4
| [ 0:01] ## LSLR:	crw------- 1 root root  10, 236 Feb 21 02:27 control
| [ 0:01] <======== Udev DB content ========>
| [ 0:01] ## UDEV:	P: /devices/virtual/block/dm-0
| [ 0:01] ## UDEV:	N: dm-0
| [ 0:01] ## UDEV:	E: DEVNAME=/dev/dm-0
| [ 0:01] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-0
| [ 0:01] ## UDEV:	E: DEVTYPE=disk
| [ 0:01] ## UDEV:	E: MAJOR=253
| [ 0:01] ## UDEV:	E: MINOR=0
| [ 0:01] ## UDEV:	E: SUBSYSTEM=block
| [ 0:01] ## UDEV:	
| [ 0:01] ## UDEV:	P: /devices/virtual/block/dm-1
| [ 0:01] ## UDEV:	N: dm-1
| [ 0:01] ## UDEV:	E: DEVNAME=/dev/dm-1
| [ 0:01] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-1
| [ 0:01] ## UDEV:	E: DEVTYPE=disk
| [ 0:01] ## UDEV:	E: MAJOR=253
| [ 0:01] ## UDEV:	E: MINOR=1
| [ 0:01] ## UDEV:	E: SUBSYSTEM=block
| [ 0:01] ## UDEV:	
| [ 0:01] ## UDEV:	P: /devices/virtual/block/dm-2
| [ 0:01] ## UDEV:	N: dm-2
| [ 0:01] ## UDEV:	E: DEVNAME=/dev/dm-2
| [ 0:01] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-2
| [ 0:01] ## UDEV:	E: DEVTYPE=disk
| [ 0:01] ## UDEV:	E: MAJOR=253
| [ 0:01] ## UDEV:	E: MINOR=2
| [ 0:01] ## UDEV:	E: SUBSYSTEM=block
| [ 0:01] ## UDEV:	
| [ 0:01] ## UDEV:	P: /devices/virtual/block/dm-3
| [ 0:01] ## UDEV:	N: dm-3
| [ 0:01] ## UDEV:	E: DEVNAME=/dev/dm-3
| [ 0:01] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-3
| [ 0:01] ## UDEV:	E: DEVTYPE=disk
| [ 0:01] ## UDEV:	E: MAJOR=253
| [ 0:01] ## UDEV:	E: MINOR=3
| [ 0:01] ## UDEV:	E: SUBSYSTEM=block
| [ 0:01] ## UDEV:	
| [ 0:01] ## UDEV:	P: /devices/virtual/block/dm-4
| [ 0:01] ## UDEV:	N: dm-4
| [ 0:01] ## UDEV:	E: DEVNAME=/dev/dm-4
| [ 0:01] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-4
| [ 0:01] ## UDEV:	E: DEVTYPE=disk
| [ 0:01] ## UDEV:	E: MAJOR=253
| [ 0:01] ## UDEV:	E: MINOR=4
| [ 0:01] ## UDEV:	E: SUBSYSTEM=block
| [ 0:01] ## UDEV:	
| [ 0:01] ## UDEV:	P: /devices/virtual/block/dm-5
| [ 0:01] ## UDEV:	N: dm-5
| [ 0:01] ## UDEV:	E: DEVNAME=/dev/dm-5
| [ 0:01] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-5
| [ 0:01] ## UDEV:	E: DEVTYPE=disk
| [ 0:01] ## UDEV:	E: MAJOR=253
| [ 0:01] ## UDEV:	E: MINOR=5
| [ 0:01] ## UDEV:	E: SUBSYSTEM=block
| [ 0:01] ## UDEV:	
| [ 0:01] ## UDEV:	P: /devices/virtual/block/dm-6
| [ 0:01] ## UDEV:	N: dm-6
| [ 0:01] ## UDEV:	E: DEVNAME=/dev/dm-6
| [ 0:01] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-6
| [ 0:01] ## UDEV:	E: DEVTYPE=disk
| [ 0:01] ## UDEV:	E: MAJOR=253
| [ 0:01] ## UDEV:	E: MINOR=6
| [ 0:01] ## UDEV:	E: SUBSYSTEM=block
| [ 0:01] ## UDEV:	
| [ 0:01] ## UDEV:	P: /devices/virtual/block/loop0
| [ 0:01] ## UDEV:	N: loop0
| [ 0:01] ## UDEV:	E: DEVNAME=/dev/loop0
| [ 0:01] ## UDEV:	E: DEVPATH=/devices/virtual/block/loop0
| [ 0:01] ## UDEV:	E: DEVTYPE=disk
| [ 0:01] ## UDEV:	E: MAJOR=7
| [ 0:01] ## UDEV:	E: MINOR=0
| [ 0:01] ## UDEV:	E: SUBSYSTEM=block
| [ 0:01] ## UDEV:	
| [ 0:01] <======== Script file "unknown-segment.sh" ========>
| [ 0:01] ## Line: 1 	 #!/usr/bin/env bash
| [ 0:01] ## Line: 2 	 
| [ 0:01] ## Line: 3 	 # Copyright (C) 2009 Red Hat, Inc. All rights reserved.
| [ 0:01] ## Line: 4 	 #
| [ 0:01] ## Line: 5 	 # This copyrighted material is made available to anyone wishing to use,
| [ 0:01] ## Line: 6 	 # modify, copy, or redistribute it subject to the terms and conditions
| [ 0:01] ## Line: 7 	 # of the GNU General Public License v.2.
| [ 0:01] ## Line: 8 	 #
| [ 0:01] ## Line: 9 	 # You should have received a copy of the GNU General Public License
| [ 0:01] ## Line: 10 	 # along with this program; if not, write to the Free Software Foundation,
| [ 0:01] ## Line: 11 	 # Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA
| [ 0:01] ## Line: 12 	 
| [ 0:01] ## Line: 13 	 SKIP_WITH_LVMLOCKD=1
| [ 0:01] ## Line: 14 	 SKIP_WITH_LVMPOLLD=1
| [ 0:01] ## Line: 15 	 
| [ 0:01] ## Line: 16 	 . lib/inittest
| [ 0:01] ## Line: 17 	 
| [ 0:01] ## Line: 18 	 aux prepare_vg 4
| [ 0:01] ## Line: 19 	 
| [ 0:01] ## Line: 20 	 lvcreate -an -Zn -l 1 -n $lv1 $vg
| [ 0:01] ## Line: 21 	 lvcreate -an -Zn -l 2 --type mirror -m 1 -n $lv2 $vg
| [ 0:01] ## Line: 22 	 lvcreate -an -Zn --type zero -l 1 -n $lv3 $vg
| [ 0:01] ## Line: 23 	 
| [ 0:01] ## Line: 24 	 vgcfgbackup -f bak0 $vg
| [ 0:01] ## Line: 25 	 sed -e 's,striped,unstriped,;s,mirror,unmirror,;s,zero,zero+NEWFLAG,' -i.orig bak0
| [ 0:01] ## Line: 26 	 vgcfgrestore -f bak0 $vg
| [ 0:01] ## Line: 27 	 
| [ 0:01] ## Line: 28 	 # we have on-disk metadata with unknown segments now
| [ 0:01] ## Line: 29 	 not lvchange -aey $vg/$lv1 # check that activation is refused
| [ 0:01] ## Line: 30 	 
| [ 0:01] ## Line: 31 	 # try once more to catch invalid memory access with valgrind
| [ 0:01] ## Line: 32 	 # when clvmd flushes cmd mem pool
| [ 0:01] ## Line: 33 	 not lvchange -aey $vg/$lv2 # check that activation is refused
| [ 0:01] ## Line: 34 	 
| [ 0:01] ## Line: 35 	 not lvchange -aey $vg/$lv3 # check that activation is refused
| [ 0:01] ## Line: 36 	 
| [ 0:01] ## Line: 37 	 vgcfgbackup -f bak1 $vg
| [ 0:01] ## Line: 38 	 cat bak1
| [ 0:01] ## Line: 39 	 sed -e 's,unstriped,striped,;s,unmirror,mirror,;s,zero+NEWFLAG,zero,' -i.orig bak1
| [ 0:01] ## Line: 40 	 vgcfgrestore -f bak1 $vg
| [ 0:01] ## Line: 41 	 vgcfgbackup -f bak2 $vg
| [ 0:01] ## Line: 42 	 
| [ 0:01] ## Line: 43 	 grep -v -E 'description|seqno|creation_time|Generated' < bak0.orig > a
| [ 0:01] ## Line: 44 	 grep -v -E 'description|seqno|creation_time|Generated' < bak2 > b
| [ 0:01] ## Line: 45 	 diff -u a b
| [ 0:01] ## Line: 46 	 
| [ 0:01] ## Line: 47 	 vgremove -ff $vg
| [ 0:01] aux teardown
| [ 0:01] #unknown-segment.sh:1+ aux teardown
| [ 0:01] ## teardown.........ok
###       failed: [ndev-vanilla] shell/unknown-segment.sh

| [ 0:00] Library version:   1.02.146 (2017-12-18)
| [ 0:00] Driver version:    4.35.0
| [ 0:00] Kernel is Linux localhost.localdomain 3.10.0-693.11.1.el7.x86_64 #1 SMP Mon Dec 4 23:52:40 UTC 2017 x86_64 GNU/Linux
| [ 0:00] Selinux mode is not installed.
| [ 0:00]               total        used        free      shared  buff/cache   available
| [ 0:00] Mem:           7822        1075        4146          10        2601        6440
| [ 0:00] Swap:          4095           0        4095
| [ 0:00] Filesystem      Size  Used Avail Use% Mounted on
| [ 0:00] /dev/sdc1        18G  8.4G  8.4G  50% /
| [ 0:00] /dev/sdd1        51G  6.1G   43G  13% /lfskernel
| [ 0:00] devtmpfs        3.9G     0  3.9G   0% /dev
| [ 0:00] tmpfs           3.9G     0  3.9G   0% /run
| [ 0:00] @TESTDIR=/tmp/LVMTEST25233.MqSA2VGGX4
| [ 0:00] @PREFIX=LVMTEST25233
| [ 0:00] ## LVMCONF: activation {
| [ 0:00] ## LVMCONF:     checks = 1
| [ 0:00] ## LVMCONF:     monitoring = 0
| [ 0:00] ## LVMCONF:     polling_interval = 1
| [ 0:00] ## LVMCONF:     raid_region_size = 512
| [ 0:00] ## LVMCONF:     retry_deactivation = 1
| [ 0:00] ## LVMCONF:     snapshot_autoextend_percent = 50
| [ 0:00] ## LVMCONF:     snapshot_autoextend_threshold = 50
| [ 0:00] ## LVMCONF:     udev_rules = 1
| [ 0:00] ## LVMCONF:     udev_sync = 1
| [ 0:00] ## LVMCONF:     verify_udev_operations = 1
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: allocation {
| [ 0:00] ## LVMCONF:     wipe_signatures_when_zeroing_new_lvs = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: backup {
| [ 0:00] ## LVMCONF:     archive = 0
| [ 0:00] ## LVMCONF:     backup = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: devices {
| [ 0:00] ## LVMCONF:     cache_dir = "@TESTDIR@/etc"
| [ 0:00] ## LVMCONF:     default_data_alignment = 1
| [ 0:00] ## LVMCONF:     dir = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     filter = "a|.*|"
| [ 0:00] ## LVMCONF:     global_filter = [ "a|@TESTDIR@/dev/mapper/@PREFIX@.*pv[0-9_]*$|", "r|.*|" ]
| [ 0:00] ## LVMCONF:     md_component_detection  = 0
| [ 0:00] ## LVMCONF:     scan = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     sysfs_scan = 1
| [ 0:00] ## LVMCONF:     write_cache_state = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: dmeventd {
| [ 0:00] ## LVMCONF:     executable = "/sources/boot/LVM2.2.02.177/test/lib/dmeventd"
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: global {
| [ 0:00] ## LVMCONF:     abort_on_internal_errors = 1
| [ 0:00] ## LVMCONF:     cache_check_executable = "/usr/sbin/cache_check"
| [ 0:00] ## LVMCONF:     cache_dump_executable = "/usr/sbin/cache_dump"
| [ 0:00] ## LVMCONF:     cache_repair_executable = "/usr/sbin/cache_repair"
| [ 0:00] ## LVMCONF:     detect_internal_vg_cache_corruption = 1
| [ 0:00] ## LVMCONF:     fallback_to_local_locking = 0
| [ 0:00] ## LVMCONF:     fsadm_executable = "/sources/boot/LVM2.2.02.177/test/lib/fsadm"
| [ 0:00] ## LVMCONF:     library_dir = "@TESTDIR@/lib"
| [ 0:00] ## LVMCONF:     locking_dir = "@TESTDIR@/var/lock/lvm"
| [ 0:00] ## LVMCONF:     locking_type=1
| [ 0:00] ## LVMCONF:     notify_dbus = 0
| [ 0:00] ## LVMCONF:     si_unit_consistency = 1
| [ 0:00] ## LVMCONF:     thin_check_executable = "/usr/sbin/thin_check"
| [ 0:00] ## LVMCONF:     thin_dump_executable = "/usr/sbin/thin_dump"
| [ 0:00] ## LVMCONF:     thin_repair_executable = "/usr/sbin/thin_repair"
| [ 0:00] ## LVMCONF:     use_lvmetad = 0
| [ 0:00] ## LVMCONF:     use_lvmlockd = 0
| [ 0:00] ## LVMCONF:     use_lvmpolld = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: log {
| [ 0:00] ## LVMCONF:     activation = 1
| [ 0:00] ## LVMCONF:     file = "@TESTDIR@/debug.log"
| [ 0:00] ## LVMCONF:     indent = 1
| [ 0:00] ## LVMCONF:     level = 9
| [ 0:00] ## LVMCONF:     overwrite = 1
| [ 0:00] ## LVMCONF:     syslog = 0
| [ 0:00] ## LVMCONF:     verbose = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] <======== Processing test: "unlost-pv.sh" ========>
| [ 0:00] 
| [ 0:00] check_() {
| [ 0:00] 	local cache=""
| [ 0:00] 	# vgscan needs --cache option for direct scan if lvmetad is used
| [ 0:00] 	test -e LOCAL_LVMETAD && cache="--cache"
| [ 0:00] 	vgscan $cache 2>&1 | tee vgscan.out
| [ 0:00] 	"$@" grep "Inconsistent metadata found for VG $vg" vgscan.out
| [ 0:00] }
| [ 0:00] 
| [ 0:00] aux prepare_vg 3
| [ 0:00] #unlost-pv.sh:26+ aux prepare_vg 3
| [ 0:00] ## preparing loop device....ok (/dev/loop0)
| [ 0:00] ## preparing 3 devices...lib/utils: line 212: DM_UDEV_COOKIE: unbound variable
| [ 0:00] set +vx; STACKTRACE; set -vx
| [ 0:00] ##unlost-pv.sh:26+ set +vx
| [ 0:00] ## - /lfskernel/sources/boot/LVM2.2.02.177/test/shell/unlost-pv.sh:26
| [ 0:00] ## 1 STACKTRACE() called from /lfskernel/sources/boot/LVM2.2.02.177/test/shell/unlost-pv.sh:26
| [ 0:00] <======== Info ========>
| [ 0:00] ## DMINFO:   Name             Maj Min Stat Open Targ Event  UUID                                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv3  253   4 L--w    0    1      0 TEST-@PREFIX@pv3                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv2  253   3 L--w    0    1      0 TEST-@PREFIX@pv2                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv1  253   5 L--w    0    1      0 TEST-@PREFIX@pv1                                                
| [ 0:00] <======== Active table ========>
| [ 0:00] ## DMTABLE:  @PREFIX@pv3: 0 69632 linear 7:0 141312
| [ 0:00] ## DMTABLE:  @PREFIX@pv2: 0 69632 linear 7:0 71680
| [ 0:00] ## DMTABLE:  @PREFIX@pv1: 0 69632 linear 7:0 2048
| [ 0:00] <======== Inactive table ========>
| [ 0:00] ## DMITABLE: @PREFIX@pv3: 
| [ 0:00] ## DMITABLE: @PREFIX@pv2: 
| [ 0:00] ## DMITABLE: @PREFIX@pv1: 
| [ 0:00] <======== Status ========>
| [ 0:00] ## DMSTATUS: @PREFIX@pv3: 0 69632 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv2: 0 69632 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv1: 0 69632 linear 
| [ 0:00] <======== Tree ========>
| [ 0:00] ## DMTREE:   @PREFIX@pv3 (253:4)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   @PREFIX@pv2 (253:3)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   @PREFIX@pv1 (253:5)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   LFS_vg-lfs (253:2)
| [ 0:00] ## DMTREE:    `- (8:16)
| [ 0:00] ## DMTREE:   centos-swap (253:1)
| [ 0:00] ## DMTREE:    `- (8:2)
| [ 0:00] ## DMTREE:   centos-root (253:0)
| [ 0:00] ## DMTREE:    `- (8:2)
| [ 0:00] <======== Recursive list of @TESTDIR@/dev ========>
| [ 0:00] ## LSLR:	@TESTDIR@/dev:
| [ 0:00] ## LSLR:	total 4
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 0 Feb 21 02:27 loop0
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 1 Feb 21 02:27 loop1
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 2 Feb 21 02:27 loop2
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 3 Feb 21 02:27 loop3
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 4 Feb 21 02:27 loop4
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 5 Feb 21 02:27 loop5
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 6 Feb 21 02:27 loop6
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 7 Feb 21 02:27 loop7
| [ 0:00] ## LSLR:	drwxr-xr-x 2 root root 4096 Feb 21 02:27 mapper
| [ 0:00] ## LSLR:	crw-r--r-- 1 root root 1, 3 Feb 21 02:27 testnull
| [ 0:00] ## LSLR:	
| [ 0:00] ## LSLR:	@TESTDIR@/dev/mapper:
| [ 0:00] ## LSLR:	total 0
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   5 Feb 21 02:27 @PREFIX@pv1
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   3 Feb 21 02:27 @PREFIX@pv2
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   4 Feb 21 02:27 @PREFIX@pv3
| [ 0:00] ## LSLR:	crw------- 1 root root  10, 236 Feb 21 02:27 control
| [ 0:00] <======== Udev DB content ========>
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-0
| [ 0:00] ## UDEV:	N: dm-0
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-0
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-0
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=0
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-1
| [ 0:00] ## UDEV:	N: dm-1
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-1
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-1
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=1
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-2
| [ 0:00] ## UDEV:	N: dm-2
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-2
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-2
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=2
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-3
| [ 0:00] ## UDEV:	N: dm-3
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-3
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-3
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=3
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-4
| [ 0:00] ## UDEV:	N: dm-4
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-4
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-4
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=4
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-5
| [ 0:00] ## UDEV:	N: dm-5
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-5
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-5
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=5
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/loop0
| [ 0:00] ## UDEV:	N: loop0
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/loop0
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/loop0
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=7
| [ 0:00] ## UDEV:	E: MINOR=0
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] <======== Script file "unlost-pv.sh" ========>
| [ 0:00] ## Line: 1 	 #!/usr/bin/env bash
| [ 0:00] ## Line: 2 	 
| [ 0:00] ## Line: 3 	 # Copyright (C) 2008 Red Hat, Inc. All rights reserved.
| [ 0:00] ## Line: 4 	 #
| [ 0:00] ## Line: 5 	 # This copyrighted material is made available to anyone wishing to use,
| [ 0:00] ## Line: 6 	 # modify, copy, or redistribute it subject to the terms and conditions
| [ 0:00] ## Line: 7 	 # of the GNU General Public License v.2.
| [ 0:00] ## Line: 8 	 #
| [ 0:00] ## Line: 9 	 # You should have received a copy of the GNU General Public License
| [ 0:00] ## Line: 10 	 # along with this program; if not, write to the Free Software Foundation,
| [ 0:00] ## Line: 11 	 # Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA
| [ 0:00] ## Line: 12 	 
| [ 0:00] ## Line: 13 	 SKIP_WITH_LVMLOCKD=1
| [ 0:00] ## Line: 14 	 SKIP_WITH_LVMPOLLD=1
| [ 0:00] ## Line: 15 	 
| [ 0:00] ## Line: 16 	 . lib/inittest
| [ 0:00] ## Line: 17 	 
| [ 0:00] ## Line: 18 	 check_() {
| [ 0:00] ## Line: 19 	 	local cache=""
| [ 0:00] ## Line: 20 	 	# vgscan needs --cache option for direct scan if lvmetad is used
| [ 0:00] ## Line: 21 	 	test -e LOCAL_LVMETAD && cache="--cache"
| [ 0:00] ## Line: 22 	 	vgscan $cache 2>&1 | tee vgscan.out
| [ 0:00] ## Line: 23 	 	"$@" grep "Inconsistent metadata found for VG $vg" vgscan.out
| [ 0:00] ## Line: 24 	 }
| [ 0:00] ## Line: 25 	 
| [ 0:00] ## Line: 26 	 aux prepare_vg 3
| [ 0:00] ## Line: 27 	 
| [ 0:00] ## Line: 28 	 lvcreate -an -Zn --type mirror -m 1 -l 1 -n mirror $vg
| [ 0:00] ## Line: 29 	 #lvchange -a n $vg
| [ 0:00] ## Line: 30 	 
| [ 0:00] ## Line: 31 	 # try orphaning a missing PV (bz45867)
| [ 0:00] ## Line: 32 	 aux disable_dev "$dev1"
| [ 0:00] ## Line: 33 	 vgreduce --removemissing --force $vg
| [ 0:00] ## Line: 34 	 aux enable_dev "$dev1"
| [ 0:00] ## Line: 35 	 
| [ 0:00] ## Line: 36 	 check_
| [ 0:00] ## Line: 37 	 test -e LOCAL_LVMETAD && pvcreate -f "$dev1"
| [ 0:00] ## Line: 38 	 check_ not
| [ 0:00] ## Line: 39 	 
| [ 0:00] ## Line: 40 	 # try to just change metadata; we expect the new version (with MISSING_PV set
| [ 0:00] ## Line: 41 	 # on the reappeared volume) to be written out to the previously missing PV
| [ 0:00] ## Line: 42 	 vgextend $vg "$dev1"
| [ 0:00] ## Line: 43 	 lvcreate -l 1 -n boo -a n --zero n $vg
| [ 0:00] ## Line: 44 	 aux disable_dev "$dev1"
| [ 0:00] ## Line: 45 	 lvremove $vg/mirror
| [ 0:00] ## Line: 46 	 aux enable_dev "$dev1"
| [ 0:00] ## Line: 47 	 check_
| [ 0:00] ## Line: 48 	 test -e LOCAL_LVMETAD && lvremove $vg/boo # FIXME trigger a write :-(
| [ 0:00] ## Line: 49 	 check_ not
| [ 0:00] ## Line: 50 	 
| [ 0:00] ## Line: 51 	 aux disable_dev "$dev1"
| [ 0:00] ## Line: 52 	 vgreduce --removemissing --force $vg
| [ 0:00] ## Line: 53 	 aux enable_dev "$dev1"
| [ 0:00] ## Line: 54 	 
| [ 0:00] ## Line: 55 	 vgscan 2>&1 | tee out
| [ 0:00] ## Line: 56 	 grep 'Removing PV' out
| [ 0:00] ## Line: 57 	 
| [ 0:00] ## Line: 58 	 vgs 2>&1 | tee out
| [ 0:00] ## Line: 59 	 not grep 'Removing PV' out
| [ 0:00] ## Line: 60 	 
| [ 0:00] ## Line: 61 	 vgremove -ff $vg
| [ 0:00] aux teardown
| [ 0:00] #unlost-pv.sh:1+ aux teardown
| [ 0:00] ## teardown.........ok
###       failed: [ndev-vanilla] shell/unlost-pv.sh

| [ 0:00] Library version:   1.02.146 (2017-12-18)
| [ 0:00] Driver version:    4.35.0
| [ 0:00] Kernel is Linux localhost.localdomain 3.10.0-693.11.1.el7.x86_64 #1 SMP Mon Dec 4 23:52:40 UTC 2017 x86_64 GNU/Linux
| [ 0:00] Selinux mode is not installed.
| [ 0:00]               total        used        free      shared  buff/cache   available
| [ 0:00] Mem:           7822        1075        4146          10        2601        6440
| [ 0:00] Swap:          4095           0        4095
| [ 0:00] Filesystem      Size  Used Avail Use% Mounted on
| [ 0:00] /dev/sdc1        18G  8.4G  8.4G  50% /
| [ 0:00] /dev/sdd1        51G  6.1G   43G  13% /lfskernel
| [ 0:00] devtmpfs        3.9G     0  3.9G   0% /dev
| [ 0:00] tmpfs           3.9G     0  3.9G   0% /run
| [ 0:00] @TESTDIR=/tmp/LVMTEST25423.s7mWCGZl6W
| [ 0:00] @PREFIX=LVMTEST25423
| [ 0:00] ## LVMCONF: activation {
| [ 0:00] ## LVMCONF:     checks = 1
| [ 0:00] ## LVMCONF:     monitoring = 0
| [ 0:00] ## LVMCONF:     polling_interval = 1
| [ 0:00] ## LVMCONF:     raid_region_size = 512
| [ 0:00] ## LVMCONF:     retry_deactivation = 1
| [ 0:00] ## LVMCONF:     snapshot_autoextend_percent = 50
| [ 0:00] ## LVMCONF:     snapshot_autoextend_threshold = 50
| [ 0:00] ## LVMCONF:     udev_rules = 1
| [ 0:00] ## LVMCONF:     udev_sync = 1
| [ 0:00] ## LVMCONF:     verify_udev_operations = 1
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: allocation {
| [ 0:00] ## LVMCONF:     wipe_signatures_when_zeroing_new_lvs = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: backup {
| [ 0:00] ## LVMCONF:     archive = 0
| [ 0:00] ## LVMCONF:     backup = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: devices {
| [ 0:00] ## LVMCONF:     cache_dir = "@TESTDIR@/etc"
| [ 0:00] ## LVMCONF:     default_data_alignment = 1
| [ 0:00] ## LVMCONF:     dir = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     filter = "a|.*|"
| [ 0:00] ## LVMCONF:     global_filter = [ "a|@TESTDIR@/dev/mapper/@PREFIX@.*pv[0-9_]*$|", "r|.*|" ]
| [ 0:00] ## LVMCONF:     md_component_detection  = 0
| [ 0:00] ## LVMCONF:     scan = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     sysfs_scan = 1
| [ 0:00] ## LVMCONF:     write_cache_state = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: dmeventd {
| [ 0:00] ## LVMCONF:     executable = "/sources/boot/LVM2.2.02.177/test/lib/dmeventd"
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: global {
| [ 0:00] ## LVMCONF:     abort_on_internal_errors = 1
| [ 0:00] ## LVMCONF:     cache_check_executable = "/usr/sbin/cache_check"
| [ 0:00] ## LVMCONF:     cache_dump_executable = "/usr/sbin/cache_dump"
| [ 0:00] ## LVMCONF:     cache_repair_executable = "/usr/sbin/cache_repair"
| [ 0:00] ## LVMCONF:     detect_internal_vg_cache_corruption = 1
| [ 0:00] ## LVMCONF:     fallback_to_local_locking = 0
| [ 0:00] ## LVMCONF:     fsadm_executable = "/sources/boot/LVM2.2.02.177/test/lib/fsadm"
| [ 0:00] ## LVMCONF:     library_dir = "@TESTDIR@/lib"
| [ 0:00] ## LVMCONF:     locking_dir = "@TESTDIR@/var/lock/lvm"
| [ 0:00] ## LVMCONF:     locking_type=1
| [ 0:00] ## LVMCONF:     notify_dbus = 0
| [ 0:00] ## LVMCONF:     si_unit_consistency = 1
| [ 0:00] ## LVMCONF:     thin_check_executable = "/usr/sbin/thin_check"
| [ 0:00] ## LVMCONF:     thin_dump_executable = "/usr/sbin/thin_dump"
| [ 0:00] ## LVMCONF:     thin_repair_executable = "/usr/sbin/thin_repair"
| [ 0:00] ## LVMCONF:     use_lvmetad = 0
| [ 0:00] ## LVMCONF:     use_lvmlockd = 0
| [ 0:00] ## LVMCONF:     use_lvmpolld = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: log {
| [ 0:00] ## LVMCONF:     activation = 1
| [ 0:00] ## LVMCONF:     file = "@TESTDIR@/debug.log"
| [ 0:00] ## LVMCONF:     indent = 1
| [ 0:00] ## LVMCONF:     level = 9
| [ 0:00] ## LVMCONF:     overwrite = 1
| [ 0:00] ## LVMCONF:     syslog = 0
| [ 0:00] ## LVMCONF:     verbose = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] <======== Processing test: "vg-check-devs-used.sh" ========>
| [ 0:00] 
| [ 0:00] # We need "dm" directory for dm devices in sysfs.
| [ 0:00] aux driver_at_least 4 15 || skip
| [ 0:00] #vg-check-devs-used.sh:18+ aux driver_at_least 4 15
| [ 0:00] 
| [ 0:00] aux prepare_devs 3 8
| [ 0:00] #vg-check-devs-used.sh:20+ aux prepare_devs 3 8
| [ 0:00] ## preparing loop device....ok (/dev/loop0)
| [ 0:00] ## preparing 3 devices...lib/utils: line 212: DM_UDEV_COOKIE: unbound variable
| [ 0:00] set +vx; STACKTRACE; set -vx
| [ 0:00] ##vg-check-devs-used.sh:20+ set +vx
| [ 0:00] ## - /lfskernel/sources/boot/LVM2.2.02.177/test/shell/vg-check-devs-used.sh:20
| [ 0:00] ## 1 STACKTRACE() called from /lfskernel/sources/boot/LVM2.2.02.177/test/shell/vg-check-devs-used.sh:20
| [ 0:00] <======== Info ========>
| [ 0:00] ## DMINFO:   Name             Maj Min Stat Open Targ Event  UUID                                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv3  253   3 L--w    0    1      0 TEST-@PREFIX@pv3                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv2  253   5 L--w    0    1      0 TEST-@PREFIX@pv2                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv1  253   4 L--w    0    1      0 TEST-@PREFIX@pv1                                                
| [ 0:00] <======== Active table ========>
| [ 0:00] ## DMTABLE:  @PREFIX@pv3: 0 16384 linear 7:0 34816
| [ 0:00] ## DMTABLE:  @PREFIX@pv2: 0 16384 linear 7:0 18432
| [ 0:00] ## DMTABLE:  @PREFIX@pv1: 0 16384 linear 7:0 2048
| [ 0:00] <======== Inactive table ========>
| [ 0:00] ## DMITABLE: @PREFIX@pv3: 
| [ 0:00] ## DMITABLE: @PREFIX@pv2: 
| [ 0:00] ## DMITABLE: @PREFIX@pv1: 
| [ 0:00] <======== Status ========>
| [ 0:00] ## DMSTATUS: @PREFIX@pv3: 0 16384 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv2: 0 16384 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv1: 0 16384 linear 
| [ 0:00] <======== Tree ========>
| [ 0:00] ## DMTREE:   @PREFIX@pv3 (253:3)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   @PREFIX@pv2 (253:5)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   @PREFIX@pv1 (253:4)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   LFS_vg-lfs (253:2)
| [ 0:00] ## DMTREE:    `- (8:16)
| [ 0:00] ## DMTREE:   centos-swap (253:1)
| [ 0:00] ## DMTREE:    `- (8:2)
| [ 0:00] ## DMTREE:   centos-root (253:0)
| [ 0:00] ## DMTREE:    `- (8:2)
| [ 0:00] <======== Recursive list of @TESTDIR@/dev ========>
| [ 0:00] ## LSLR:	@TESTDIR@/dev:
| [ 0:00] ## LSLR:	total 4
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 0 Feb 21 02:27 loop0
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 1 Feb 21 02:27 loop1
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 2 Feb 21 02:27 loop2
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 3 Feb 21 02:27 loop3
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 4 Feb 21 02:27 loop4
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 5 Feb 21 02:27 loop5
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 6 Feb 21 02:27 loop6
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 7 Feb 21 02:27 loop7
| [ 0:00] ## LSLR:	drwxr-xr-x 2 root root 4096 Feb 21 02:27 mapper
| [ 0:00] ## LSLR:	crw-r--r-- 1 root root 1, 3 Feb 21 02:27 testnull
| [ 0:00] ## LSLR:	
| [ 0:00] ## LSLR:	@TESTDIR@/dev/mapper:
| [ 0:00] ## LSLR:	total 0
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   4 Feb 21 02:27 @PREFIX@pv1
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   5 Feb 21 02:27 @PREFIX@pv2
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   3 Feb 21 02:27 @PREFIX@pv3
| [ 0:00] ## LSLR:	crw------- 1 root root  10, 236 Feb 21 02:27 control
| [ 0:00] <======== Udev DB content ========>
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-0
| [ 0:00] ## UDEV:	N: dm-0
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-0
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-0
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=0
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-1
| [ 0:00] ## UDEV:	N: dm-1
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-1
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-1
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=1
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-2
| [ 0:00] ## UDEV:	N: dm-2
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-2
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-2
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=2
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-3
| [ 0:00] ## UDEV:	N: dm-3
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-3
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-3
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=3
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-4
| [ 0:00] ## UDEV:	N: dm-4
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-4
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-4
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=4
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-5
| [ 0:00] ## UDEV:	N: dm-5
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-5
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-5
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=5
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/loop0
| [ 0:00] ## UDEV:	N: loop0
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/loop0
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/loop0
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=7
| [ 0:00] ## UDEV:	E: MINOR=0
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] <======== Script file "vg-check-devs-used.sh" ========>
| [ 0:00] ## Line: 1 	 #!/usr/bin/env bash
| [ 0:00] ## Line: 2 	 
| [ 0:00] ## Line: 3 	 # Copyright (C) 2016 Red Hat, Inc. All rights reserved.
| [ 0:00] ## Line: 4 	 #
| [ 0:00] ## Line: 5 	 # This copyrighted material is made available to anyone wishing to use,
| [ 0:00] ## Line: 6 	 # modify, copy, or redistribute it subject to the terms and conditions
| [ 0:00] ## Line: 7 	 # of the GNU General Public License v.2.
| [ 0:00] ## Line: 8 	 #
| [ 0:00] ## Line: 9 	 # You should have received a copy of the GNU General Public License
| [ 0:00] ## Line: 10 	 # along with this program; if not, write to the Free Software Foundation,
| [ 0:00] ## Line: 11 	 # Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA
| [ 0:00] ## Line: 12 	 
| [ 0:00] ## Line: 13 	 SKIP_WITH_LVMPOLLD=1
| [ 0:00] ## Line: 14 	 
| [ 0:00] ## Line: 15 	 . lib/inittest
| [ 0:00] ## Line: 16 	 
| [ 0:00] ## Line: 17 	 # We need "dm" directory for dm devices in sysfs.
| [ 0:00] ## Line: 18 	 aux driver_at_least 4 15 || skip
| [ 0:00] ## Line: 19 	 
| [ 0:00] ## Line: 20 	 aux prepare_devs 3 8
| [ 0:00] ## Line: 21 	 
| [ 0:00] ## Line: 22 	 vgcreate "$vg" "$dev1" "$dev2"
| [ 0:00] ## Line: 23 	 lvcreate -l100%FREE -n $lv $vg
| [ 0:00] ## Line: 24 	 dd if="$dev1" of="$dev3" bs=1M
| [ 0:00] ## Line: 25 	 pvs --config "devices/global_filter = [ \"a|$dev2|\", \"a|$dev3|\", \"r|.*|\" ]" 2>err
| [ 0:00] ## Line: 26 	 grep "WARNING: Device mismatch detected for $vg/$lv which is accessing $dev1 instead of $dev3" err
| [ 0:00] ## Line: 27 	 
| [ 0:00] ## Line: 28 	 dd if=/dev/zero of="$dev3" bs=1M count=8
| [ 0:00] ## Line: 29 	 lvremove -ff $vg
| [ 0:00] ## Line: 30 	 
| [ 0:00] ## Line: 31 	 # Also test if sub LVs with suffixes are correctly processed.
| [ 0:00] ## Line: 32 	 # Check with thick snapshot which has sub LVs with -real and -cow suffix in UUID.
| [ 0:00] ## Line: 33 	 lvcreate -l1 -aey -n $lv $vg
| [ 0:00] ## Line: 34 	 lvcreate -l1 -aey -s $vg/$lv
| [ 0:00] ## Line: 35 	 pvs 2>err
| [ 0:00] ## Line: 36 	 not grep "WARNING: Device mismatch detected for $vg/$lv" err
| [ 0:00] ## Line: 37 	 
| [ 0:00] ## Line: 38 	 vgremove -ff $vg
| [ 0:00] aux teardown
| [ 0:00] #vg-check-devs-used.sh:1+ aux teardown
| [ 0:00] ## teardown.........ok
###       failed: [ndev-vanilla] shell/vg-check-devs-used.sh

| [ 0:00] Library version:   1.02.146 (2017-12-18)
| [ 0:00] Driver version:    4.35.0
| [ 0:00] Kernel is Linux localhost.localdomain 3.10.0-693.11.1.el7.x86_64 #1 SMP Mon Dec 4 23:52:40 UTC 2017 x86_64 GNU/Linux
| [ 0:00] Selinux mode is not installed.
| [ 0:00]               total        used        free      shared  buff/cache   available
| [ 0:00] Mem:           7822        1075        4146          10        2601        6440
| [ 0:00] Swap:          4095           0        4095
| [ 0:00] Filesystem      Size  Used Avail Use% Mounted on
| [ 0:00] /dev/sdc1        18G  8.4G  8.4G  50% /
| [ 0:00] /dev/sdd1        51G  6.1G   43G  13% /lfskernel
| [ 0:00] devtmpfs        3.9G     0  3.9G   0% /dev
| [ 0:00] tmpfs           3.9G     0  3.9G   0% /run
| [ 0:00] @TESTDIR=/tmp/LVMTEST25608.6NDh9z7DLs
| [ 0:00] @PREFIX=LVMTEST25608
| [ 0:00] ## LVMCONF: activation {
| [ 0:00] ## LVMCONF:     checks = 1
| [ 0:00] ## LVMCONF:     monitoring = 0
| [ 0:00] ## LVMCONF:     polling_interval = 1
| [ 0:00] ## LVMCONF:     raid_region_size = 512
| [ 0:00] ## LVMCONF:     retry_deactivation = 1
| [ 0:00] ## LVMCONF:     snapshot_autoextend_percent = 50
| [ 0:00] ## LVMCONF:     snapshot_autoextend_threshold = 50
| [ 0:00] ## LVMCONF:     udev_rules = 1
| [ 0:00] ## LVMCONF:     udev_sync = 1
| [ 0:00] ## LVMCONF:     verify_udev_operations = 1
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: allocation {
| [ 0:00] ## LVMCONF:     wipe_signatures_when_zeroing_new_lvs = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: backup {
| [ 0:00] ## LVMCONF:     archive = 0
| [ 0:00] ## LVMCONF:     backup = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: devices {
| [ 0:00] ## LVMCONF:     cache_dir = "@TESTDIR@/etc"
| [ 0:00] ## LVMCONF:     default_data_alignment = 1
| [ 0:00] ## LVMCONF:     dir = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     filter = "a|.*|"
| [ 0:00] ## LVMCONF:     global_filter = [ "a|@TESTDIR@/dev/mapper/@PREFIX@.*pv[0-9_]*$|", "r|.*|" ]
| [ 0:00] ## LVMCONF:     md_component_detection  = 0
| [ 0:00] ## LVMCONF:     scan = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     sysfs_scan = 1
| [ 0:00] ## LVMCONF:     write_cache_state = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: dmeventd {
| [ 0:00] ## LVMCONF:     executable = "/sources/boot/LVM2.2.02.177/test/lib/dmeventd"
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: global {
| [ 0:00] ## LVMCONF:     abort_on_internal_errors = 1
| [ 0:00] ## LVMCONF:     cache_check_executable = "/usr/sbin/cache_check"
| [ 0:00] ## LVMCONF:     cache_dump_executable = "/usr/sbin/cache_dump"
| [ 0:00] ## LVMCONF:     cache_repair_executable = "/usr/sbin/cache_repair"
| [ 0:00] ## LVMCONF:     detect_internal_vg_cache_corruption = 1
| [ 0:00] ## LVMCONF:     fallback_to_local_locking = 0
| [ 0:00] ## LVMCONF:     fsadm_executable = "/sources/boot/LVM2.2.02.177/test/lib/fsadm"
| [ 0:00] ## LVMCONF:     library_dir = "@TESTDIR@/lib"
| [ 0:00] ## LVMCONF:     locking_dir = "@TESTDIR@/var/lock/lvm"
| [ 0:00] ## LVMCONF:     locking_type=1
| [ 0:00] ## LVMCONF:     notify_dbus = 0
| [ 0:00] ## LVMCONF:     si_unit_consistency = 1
| [ 0:00] ## LVMCONF:     thin_check_executable = "/usr/sbin/thin_check"
| [ 0:00] ## LVMCONF:     thin_dump_executable = "/usr/sbin/thin_dump"
| [ 0:00] ## LVMCONF:     thin_repair_executable = "/usr/sbin/thin_repair"
| [ 0:00] ## LVMCONF:     use_lvmetad = 0
| [ 0:00] ## LVMCONF:     use_lvmlockd = 0
| [ 0:00] ## LVMCONF:     use_lvmpolld = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: log {
| [ 0:00] ## LVMCONF:     activation = 1
| [ 0:00] ## LVMCONF:     file = "@TESTDIR@/debug.log"
| [ 0:00] ## LVMCONF:     indent = 1
| [ 0:00] ## LVMCONF:     level = 9
| [ 0:00] ## LVMCONF:     overwrite = 1
| [ 0:00] ## LVMCONF:     syslog = 0
| [ 0:00] ## LVMCONF:     verbose = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] <======== Processing test: "vg-name-from-env.sh" ========>
| [ 0:00] 
| [ 0:00] aux prepare_devs 2
| [ 0:00] #vg-name-from-env.sh:15+ aux prepare_devs 2
| [ 0:00] ## preparing loop device....ok (/dev/loop0)
| [ 0:00] ## preparing 2 devices...lib/utils: line 212: DM_UDEV_COOKIE: unbound variable
| [ 0:00] set +vx; STACKTRACE; set -vx
| [ 0:00] ##vg-name-from-env.sh:15+ set +vx
| [ 0:00] ## - /lfskernel/sources/boot/LVM2.2.02.177/test/shell/vg-name-from-env.sh:15
| [ 0:00] ## 1 STACKTRACE() called from /lfskernel/sources/boot/LVM2.2.02.177/test/shell/vg-name-from-env.sh:15
| [ 0:00] <======== Info ========>
| [ 0:00] ## DMINFO:   Name             Maj Min Stat Open Targ Event  UUID                                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv2  253   4 L--w    0    1      0 TEST-@PREFIX@pv2                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv1  253   3 L--w    0    1      0 TEST-@PREFIX@pv1                                                
| [ 0:00] <======== Active table ========>
| [ 0:00] ## DMTABLE:  @PREFIX@pv2: 0 69632 linear 7:0 71680
| [ 0:00] ## DMTABLE:  @PREFIX@pv1: 0 69632 linear 7:0 2048
| [ 0:00] <======== Inactive table ========>
| [ 0:00] ## DMITABLE: @PREFIX@pv2: 
| [ 0:00] ## DMITABLE: @PREFIX@pv1: 
| [ 0:00] <======== Status ========>
| [ 0:00] ## DMSTATUS: @PREFIX@pv2: 0 69632 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv1: 0 69632 linear 
| [ 0:00] <======== Tree ========>
| [ 0:00] ## DMTREE:   @PREFIX@pv2 (253:4)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   @PREFIX@pv1 (253:3)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   LFS_vg-lfs (253:2)
| [ 0:00] ## DMTREE:    `- (8:16)
| [ 0:00] ## DMTREE:   centos-swap (253:1)
| [ 0:00] ## DMTREE:    `- (8:2)
| [ 0:00] ## DMTREE:   centos-root (253:0)
| [ 0:00] ## DMTREE:    `- (8:2)
| [ 0:00] <======== Recursive list of @TESTDIR@/dev ========>
| [ 0:00] ## LSLR:	@TESTDIR@/dev:
| [ 0:00] ## LSLR:	total 4
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 0 Feb 21 02:27 loop0
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 1 Feb 21 02:27 loop1
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 2 Feb 21 02:27 loop2
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 3 Feb 21 02:27 loop3
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 4 Feb 21 02:27 loop4
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 5 Feb 21 02:27 loop5
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 6 Feb 21 02:27 loop6
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 7 Feb 21 02:27 loop7
| [ 0:00] ## LSLR:	drwxr-xr-x 2 root root 4096 Feb 21 02:27 mapper
| [ 0:00] ## LSLR:	crw-r--r-- 1 root root 1, 3 Feb 21 02:27 testnull
| [ 0:00] ## LSLR:	
| [ 0:00] ## LSLR:	@TESTDIR@/dev/mapper:
| [ 0:00] ## LSLR:	total 0
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   3 Feb 21 02:27 @PREFIX@pv1
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   4 Feb 21 02:27 @PREFIX@pv2
| [ 0:00] ## LSLR:	crw------- 1 root root  10, 236 Feb 21 02:27 control
| [ 0:00] <======== Udev DB content ========>
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-0
| [ 0:00] ## UDEV:	N: dm-0
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-0
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-0
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=0
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-1
| [ 0:00] ## UDEV:	N: dm-1
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-1
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-1
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=1
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-2
| [ 0:00] ## UDEV:	N: dm-2
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-2
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-2
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=2
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-3
| [ 0:00] ## UDEV:	N: dm-3
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-3
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-3
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=3
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-4
| [ 0:00] ## UDEV:	N: dm-4
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-4
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-4
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=4
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/loop0
| [ 0:00] ## UDEV:	N: loop0
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/loop0
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/loop0
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=7
| [ 0:00] ## UDEV:	E: MINOR=0
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] <======== Script file "vg-name-from-env.sh" ========>
| [ 0:00] ## Line: 1 	 #!/usr/bin/env bash
| [ 0:00] ## Line: 2 	 
| [ 0:00] ## Line: 3 	 # Copyright (C) 2008-2013 Red Hat, Inc. All rights reserved.
| [ 0:00] ## Line: 4 	 #
| [ 0:00] ## Line: 5 	 # This copyrighted material is made available to anyone wishing to use,
| [ 0:00] ## Line: 6 	 # modify, copy, or redistribute it subject to the terms and conditions
| [ 0:00] ## Line: 7 	 # of the GNU General Public License v.2.
| [ 0:00] ## Line: 8 	 
| [ 0:00] ## Line: 9 	 test_description='Test the vg name for an lv from env var'
| [ 0:00] ## Line: 10 	 SKIP_WITH_LVMLOCKD=1
| [ 0:00] ## Line: 11 	 SKIP_WITH_LVMPOLLD=1
| [ 0:00] ## Line: 12 	 
| [ 0:00] ## Line: 13 	 . lib/inittest
| [ 0:00] ## Line: 14 	 
| [ 0:00] ## Line: 15 	 aux prepare_devs 2
| [ 0:00] ## Line: 16 	 
| [ 0:00] ## Line: 17 	 pvcreate "$dev1"
| [ 0:00] ## Line: 18 	 pvcreate "$dev2"
| [ 0:00] ## Line: 19 	 
| [ 0:00] ## Line: 20 	 vgcreate $vg1 "$dev1"
| [ 0:00] ## Line: 21 	 vgcreate $vg2 "$dev2"
| [ 0:00] ## Line: 22 	 
| [ 0:00] ## Line: 23 	 export LVM_VG_NAME=$vg1
| [ 0:00] ## Line: 24 	 
| [ 0:00] ## Line: 25 	 # should use env
| [ 0:00] ## Line: 26 	 lvcreate -n $lv1 -l 2
| [ 0:00] ## Line: 27 	 lvcreate -n $lv3 -l 2
| [ 0:00] ## Line: 28 	 
| [ 0:00] ## Line: 29 	 lvcreate -n $lv2 -l 2 $vg2
| [ 0:00] ## Line: 30 	 lvcreate -n $lv4 -l 2 $vg2
| [ 0:00] ## Line: 31 	 
| [ 0:00] ## Line: 32 	 lvs >err
| [ 0:00] ## Line: 33 	 grep $lv1 err
| [ 0:00] ## Line: 34 	 grep $lv3 err
| [ 0:00] ## Line: 35 	 grep $lv2 err
| [ 0:00] ## Line: 36 	 grep $lv4 err
| [ 0:00] ## Line: 37 	 
| [ 0:00] ## Line: 38 	 not lvs $vg1 >err
| [ 0:00] ## Line: 39 	 not grep $lv1 err
| [ 0:00] ## Line: 40 	 not grep $lv3 err
| [ 0:00] ## Line: 41 	 not grep $lv2 err
| [ 0:00] ## Line: 42 	 not grep $lv4 err
| [ 0:00] ## Line: 43 	 
| [ 0:00] ## Line: 44 	 not lvs $vg2 >err
| [ 0:00] ## Line: 45 	 not grep $lv1 err
| [ 0:00] ## Line: 46 	 not grep $lv3 err
| [ 0:00] ## Line: 47 	 not grep $lv2 err
| [ 0:00] ## Line: 48 	 not grep $lv4 err
| [ 0:00] ## Line: 49 	 
| [ 0:00] ## Line: 50 	 lvs $lv1 >err
| [ 0:00] ## Line: 51 	 grep $lv1 err
| [ 0:00] ## Line: 52 	 not grep $lv3 err
| [ 0:00] ## Line: 53 	 not grep $lv2 err
| [ 0:00] ## Line: 54 	 not grep $lv4 err
| [ 0:00] ## Line: 55 	 
| [ 0:00] ## Line: 56 	 lvs $lv1 $lv3 >err
| [ 0:00] ## Line: 57 	 grep $lv1 err
| [ 0:00] ## Line: 58 	 grep $lv3 err
| [ 0:00] ## Line: 59 	 not grep $lv2 err
| [ 0:00] ## Line: 60 	 not grep $lv4 err
| [ 0:00] ## Line: 61 	 
| [ 0:00] ## Line: 62 	 # should use env and fail to fine lv4 in vg1
| [ 0:00] ## Line: 63 	 not lvs $lv4 >err
| [ 0:00] ## Line: 64 	 not grep $lv1 err
| [ 0:00] ## Line: 65 	 not grep $lv3 err
| [ 0:00] ## Line: 66 	 not grep $lv2 err
| [ 0:00] ## Line: 67 	 not grep $lv4 err
| [ 0:00] ## Line: 68 	 
| [ 0:00] ## Line: 69 	 lvs $vg2/$lv4 >err
| [ 0:00] ## Line: 70 	 not grep $lv1 err
| [ 0:00] ## Line: 71 	 not grep $lv3 err
| [ 0:00] ## Line: 72 	 not grep $lv2 err
| [ 0:00] ## Line: 73 	 grep $lv4 err
| [ 0:00] ## Line: 74 	 
| [ 0:00] ## Line: 75 	 lvs $vg2/$lv2 $vg2/$lv4 >err
| [ 0:00] ## Line: 76 	 not grep $lv1 err
| [ 0:00] ## Line: 77 	 not grep $lv3 err
| [ 0:00] ## Line: 78 	 grep $lv2 err
| [ 0:00] ## Line: 79 	 grep $lv4 err
| [ 0:00] ## Line: 80 	 
| [ 0:00] ## Line: 81 	 # should use env
| [ 0:00] ## Line: 82 	 lvchange -an $lv3
| [ 0:00] ## Line: 83 	 lvremove $lv3
| [ 0:00] ## Line: 84 	 not lvremove $lv4
| [ 0:00] ## Line: 85 	 
| [ 0:00] ## Line: 86 	 lvs >err
| [ 0:00] ## Line: 87 	 grep $lv1 err
| [ 0:00] ## Line: 88 	 not grep $lv3 err
| [ 0:00] ## Line: 89 	 grep $lv2 err
| [ 0:00] ## Line: 90 	 grep $lv4 err
| [ 0:00] ## Line: 91 	 
| [ 0:00] ## Line: 92 	 # should use env
| [ 0:00] ## Line: 93 	 lvcreate -n $lv3 -l 2
| [ 0:00] ## Line: 94 	 lvchange --addtag foo $lv3
| [ 0:00] ## Line: 95 	 lvchange -an $lv3
| [ 0:00] ## Line: 96 	 
| [ 0:00] ## Line: 97 	 # lvremove by tag should apply to all vgs, not env vg
| [ 0:00] ## Line: 98 	 lvchange --addtag foo $vg2/$lv4
| [ 0:00] ## Line: 99 	 lvchange -an $vg2/$lv4
| [ 0:00] ## Line: 100 	 lvremove @foo
| [ 0:00] ## Line: 101 	 
| [ 0:00] ## Line: 102 	 lvs >err
| [ 0:00] ## Line: 103 	 grep $lv1 err
| [ 0:00] ## Line: 104 	 not grep $lv3 err
| [ 0:00] ## Line: 105 	 grep $lv2 err
| [ 0:00] ## Line: 106 	 not grep $lv4 err
| [ 0:00] ## Line: 107 	 
| [ 0:00] ## Line: 108 	 vgremove -ff $vg1 $vg2
| [ 0:00] aux teardown
| [ 0:00] #vg-name-from-env.sh:1+ aux teardown
| [ 0:00] ## teardown.........ok
###       failed: [ndev-vanilla] shell/vg-name-from-env.sh

| [ 0:00] Library version:   1.02.146 (2017-12-18)
| [ 0:00] Driver version:    4.35.0
| [ 0:00] Kernel is Linux localhost.localdomain 3.10.0-693.11.1.el7.x86_64 #1 SMP Mon Dec 4 23:52:40 UTC 2017 x86_64 GNU/Linux
| [ 0:00] Selinux mode is not installed.
| [ 0:00]               total        used        free      shared  buff/cache   available
| [ 0:00] Mem:           7822        1075        4146          10        2601        6440
| [ 0:00] Swap:          4095           0        4095
| [ 0:00] Filesystem      Size  Used Avail Use% Mounted on
| [ 0:00] /dev/sdc1        18G  8.4G  8.4G  50% /
| [ 0:00] /dev/sdd1        51G  6.1G   43G  13% /lfskernel
| [ 0:00] devtmpfs        3.9G     0  3.9G   0% /dev
| [ 0:00] tmpfs           3.9G     0  3.9G   0% /run
| [ 0:00] @TESTDIR=/tmp/LVMTEST25777.2J1V7BepEG
| [ 0:00] @PREFIX=LVMTEST25777
| [ 0:00] ## LVMCONF: activation {
| [ 0:00] ## LVMCONF:     checks = 1
| [ 0:00] ## LVMCONF:     monitoring = 0
| [ 0:00] ## LVMCONF:     polling_interval = 1
| [ 0:00] ## LVMCONF:     raid_region_size = 512
| [ 0:00] ## LVMCONF:     retry_deactivation = 1
| [ 0:00] ## LVMCONF:     snapshot_autoextend_percent = 50
| [ 0:00] ## LVMCONF:     snapshot_autoextend_threshold = 50
| [ 0:00] ## LVMCONF:     udev_rules = 1
| [ 0:00] ## LVMCONF:     udev_sync = 1
| [ 0:00] ## LVMCONF:     verify_udev_operations = 1
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: allocation {
| [ 0:00] ## LVMCONF:     wipe_signatures_when_zeroing_new_lvs = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: backup {
| [ 0:00] ## LVMCONF:     archive = 0
| [ 0:00] ## LVMCONF:     backup = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: devices {
| [ 0:00] ## LVMCONF:     cache_dir = "@TESTDIR@/etc"
| [ 0:00] ## LVMCONF:     default_data_alignment = 1
| [ 0:00] ## LVMCONF:     dir = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     filter = "a|.*|"
| [ 0:00] ## LVMCONF:     global_filter = [ "a|@TESTDIR@/dev/mapper/@PREFIX@.*pv[0-9_]*$|", "r|.*|" ]
| [ 0:00] ## LVMCONF:     md_component_detection  = 0
| [ 0:00] ## LVMCONF:     scan = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     sysfs_scan = 1
| [ 0:00] ## LVMCONF:     write_cache_state = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: dmeventd {
| [ 0:00] ## LVMCONF:     executable = "/sources/boot/LVM2.2.02.177/test/lib/dmeventd"
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: global {
| [ 0:00] ## LVMCONF:     abort_on_internal_errors = 1
| [ 0:00] ## LVMCONF:     cache_check_executable = "/usr/sbin/cache_check"
| [ 0:00] ## LVMCONF:     cache_dump_executable = "/usr/sbin/cache_dump"
| [ 0:00] ## LVMCONF:     cache_repair_executable = "/usr/sbin/cache_repair"
| [ 0:00] ## LVMCONF:     detect_internal_vg_cache_corruption = 1
| [ 0:00] ## LVMCONF:     fallback_to_local_locking = 0
| [ 0:00] ## LVMCONF:     fsadm_executable = "/sources/boot/LVM2.2.02.177/test/lib/fsadm"
| [ 0:00] ## LVMCONF:     library_dir = "@TESTDIR@/lib"
| [ 0:00] ## LVMCONF:     locking_dir = "@TESTDIR@/var/lock/lvm"
| [ 0:00] ## LVMCONF:     locking_type=1
| [ 0:00] ## LVMCONF:     notify_dbus = 0
| [ 0:00] ## LVMCONF:     si_unit_consistency = 1
| [ 0:00] ## LVMCONF:     thin_check_executable = "/usr/sbin/thin_check"
| [ 0:00] ## LVMCONF:     thin_dump_executable = "/usr/sbin/thin_dump"
| [ 0:00] ## LVMCONF:     thin_repair_executable = "/usr/sbin/thin_repair"
| [ 0:00] ## LVMCONF:     use_lvmetad = 0
| [ 0:00] ## LVMCONF:     use_lvmlockd = 0
| [ 0:00] ## LVMCONF:     use_lvmpolld = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: log {
| [ 0:00] ## LVMCONF:     activation = 1
| [ 0:00] ## LVMCONF:     file = "@TESTDIR@/debug.log"
| [ 0:00] ## LVMCONF:     indent = 1
| [ 0:00] ## LVMCONF:     level = 9
| [ 0:00] ## LVMCONF:     overwrite = 1
| [ 0:00] ## LVMCONF:     syslog = 0
| [ 0:00] ## LVMCONF:     verbose = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] <======== Processing test: "vgcfgbackup-lvm1.sh" ========>
| [ 0:00] 
| [ 0:00] aux prepare_pvs 4
| [ 0:00] #vgcfgbackup-lvm1.sh:18+ aux prepare_pvs 4
| [ 0:00] ## preparing loop device....ok (/dev/loop0)
| [ 0:00] ## preparing 4 devices...lib/utils: line 212: DM_UDEV_COOKIE: unbound variable
| [ 0:00] set +vx; STACKTRACE; set -vx
| [ 0:00] ##vgcfgbackup-lvm1.sh:18+ set +vx
| [ 0:00] ## - /lfskernel/sources/boot/LVM2.2.02.177/test/shell/vgcfgbackup-lvm1.sh:18
| [ 0:00] ## 1 STACKTRACE() called from /lfskernel/sources/boot/LVM2.2.02.177/test/shell/vgcfgbackup-lvm1.sh:18
| [ 0:00] <======== Info ========>
| [ 0:00] ## DMINFO:   Name             Maj Min Stat Open Targ Event  UUID                                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv2  253   6 L--w    0    1      0 TEST-@PREFIX@pv2                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv1  253   5 L--w    0    1      0 TEST-@PREFIX@pv1                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv4  253   4 L--w    0    1      0 TEST-@PREFIX@pv4                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv3  253   3 L--w    0    1      0 TEST-@PREFIX@pv3                                                
| [ 0:00] <======== Active table ========>
| [ 0:00] ## DMTABLE:  @PREFIX@pv2: 0 69632 linear 7:0 71680
| [ 0:00] ## DMTABLE:  @PREFIX@pv1: 0 69632 linear 7:0 2048
| [ 0:00] ## DMTABLE:  @PREFIX@pv4: 0 69632 linear 7:0 210944
| [ 0:00] ## DMTABLE:  @PREFIX@pv3: 0 69632 linear 7:0 141312
| [ 0:00] <======== Inactive table ========>
| [ 0:00] ## DMITABLE: @PREFIX@pv2: 
| [ 0:00] ## DMITABLE: @PREFIX@pv1: 
| [ 0:00] ## DMITABLE: @PREFIX@pv4: 
| [ 0:00] ## DMITABLE: @PREFIX@pv3: 
| [ 0:00] <======== Status ========>
| [ 0:00] ## DMSTATUS: @PREFIX@pv2: 0 69632 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv1: 0 69632 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv4: 0 69632 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv3: 0 69632 linear 
| [ 0:00] <======== Tree ========>
| [ 0:00] ## DMTREE:   @PREFIX@pv2 (253:6)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   @PREFIX@pv1 (253:5)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   @PREFIX@pv4 (253:4)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   LFS_vg-lfs (253:2)
| [ 0:00] ## DMTREE:    `- (8:16)
| [ 0:00] ## DMTREE:   centos-swap (253:1)
| [ 0:00] ## DMTREE:    `- (8:2)
| [ 0:00] ## DMTREE:   centos-root (253:0)
| [ 0:00] ## DMTREE:    `- (8:2)
| [ 0:00] ## DMTREE:   @PREFIX@pv3 (253:3)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] <======== Recursive list of @TESTDIR@/dev ========>
| [ 0:00] ## LSLR:	@TESTDIR@/dev:
| [ 0:00] ## LSLR:	total 4
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 0 Feb 21 02:27 loop0
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 1 Feb 21 02:27 loop1
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 2 Feb 21 02:27 loop2
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 3 Feb 21 02:27 loop3
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 4 Feb 21 02:27 loop4
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 5 Feb 21 02:27 loop5
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 6 Feb 21 02:27 loop6
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 7 Feb 21 02:27 loop7
| [ 0:00] ## LSLR:	drwxr-xr-x 2 root root 4096 Feb 21 02:27 mapper
| [ 0:00] ## LSLR:	crw-r--r-- 1 root root 1, 3 Feb 21 02:27 testnull
| [ 0:00] ## LSLR:	
| [ 0:00] ## LSLR:	@TESTDIR@/dev/mapper:
| [ 0:00] ## LSLR:	total 0
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   5 Feb 21 02:27 @PREFIX@pv1
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   6 Feb 21 02:27 @PREFIX@pv2
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   3 Feb 21 02:27 @PREFIX@pv3
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   4 Feb 21 02:27 @PREFIX@pv4
| [ 0:00] ## LSLR:	crw------- 1 root root  10, 236 Feb 21 02:27 control
| [ 0:00] <======== Udev DB content ========>
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-0
| [ 0:00] ## UDEV:	N: dm-0
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-0
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-0
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=0
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-1
| [ 0:00] ## UDEV:	N: dm-1
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-1
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-1
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=1
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-2
| [ 0:00] ## UDEV:	N: dm-2
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-2
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-2
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=2
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-3
| [ 0:00] ## UDEV:	N: dm-3
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-3
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-3
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=3
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-4
| [ 0:00] ## UDEV:	N: dm-4
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-4
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-4
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=4
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-5
| [ 0:00] ## UDEV:	N: dm-5
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-5
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-5
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=5
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-6
| [ 0:00] ## UDEV:	N: dm-6
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-6
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-6
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=6
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/loop0
| [ 0:00] ## UDEV:	N: loop0
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/loop0
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/loop0
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=7
| [ 0:00] ## UDEV:	E: MINOR=0
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] <======== Script file "vgcfgbackup-lvm1.sh" ========>
| [ 0:00] ## Line: 1 	 #!/usr/bin/env bash
| [ 0:00] ## Line: 2 	 
| [ 0:00] ## Line: 3 	 # Copyright (C) 2008-2013 Red Hat, Inc. All rights reserved.
| [ 0:00] ## Line: 4 	 #
| [ 0:00] ## Line: 5 	 # This copyrighted material is made available to anyone wishing to use,
| [ 0:00] ## Line: 6 	 # modify, copy, or redistribute it subject to the terms and conditions
| [ 0:00] ## Line: 7 	 # of the GNU General Public License v.2.
| [ 0:00] ## Line: 8 	 #
| [ 0:00] ## Line: 9 	 # You should have received a copy of the GNU General Public License
| [ 0:00] ## Line: 10 	 # along with this program; if not, write to the Free Software Foundation,
| [ 0:00] ## Line: 11 	 # Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA
| [ 0:00] ## Line: 12 	 
| [ 0:00] ## Line: 13 	 SKIP_WITH_LVMLOCKD=1
| [ 0:00] ## Line: 14 	 SKIP_WITH_LVMPOLLD=1
| [ 0:00] ## Line: 15 	 
| [ 0:00] ## Line: 16 	 . lib/inittest
| [ 0:00] ## Line: 17 	 
| [ 0:00] ## Line: 18 	 aux prepare_pvs 4
| [ 0:00] ## Line: 19 	 get_devs
| [ 0:00] ## Line: 20 	 
| [ 0:00] ## Line: 21 	 if test -n "$LVM_TEST_LVM1" ; then
| [ 0:00] ## Line: 22 	 
| [ 0:00] ## Line: 23 	 pvcreate --metadatacopies 0 "$dev4"
| [ 0:00] ## Line: 24 	 
| [ 0:00] ## Line: 25 	 # No automatic backup
| [ 0:00] ## Line: 26 	 aux lvmconf "backup/backup = 0"
| [ 0:00] ## Line: 27 	 
| [ 0:00] ## Line: 28 	 # vgcfgbackup correctly stores metadata LVM1 with missing PVs
| [ 0:00] ## Line: 29 	 
| [ 0:00] ## Line: 30 	 pvcreate -M1 "${DEVICES[@]}"
| [ 0:00] ## Line: 31 	 vgcreate -M1 -c n "$vg" "${DEVICES[@]}"
| [ 0:00] ## Line: 32 	 lvcreate -l1 -n $lv1 $vg "$dev1"
| [ 0:00] ## Line: 33 	 pvremove -ff -y "$dev2"
| [ 0:00] ## Line: 34 	 not lvcreate -l1 -n $lv1 $vg "$dev3"
| [ 0:00] ## Line: 35 	 lvchange -an $vg
| [ 0:00] ## Line: 36 	 vgcfgbackup -f "backup.$$" $vg
| [ 0:00] ## Line: 37 	 
| [ 0:00] ## Line: 38 	 fi
| [ 0:00] aux teardown
| [ 0:00] #vgcfgbackup-lvm1.sh:1+ aux teardown
| [ 0:00] ## teardown.........ok
###       failed: [ndev-vanilla] shell/vgcfgbackup-lvm1.sh

| [ 0:01] Library version:   1.02.146 (2017-12-18)
| [ 0:01] Driver version:    4.35.0
| [ 0:01] Kernel is Linux localhost.localdomain 3.10.0-693.11.1.el7.x86_64 #1 SMP Mon Dec 4 23:52:40 UTC 2017 x86_64 GNU/Linux
| [ 0:01] Selinux mode is not installed.
| [ 0:01]               total        used        free      shared  buff/cache   available
| [ 0:01] Mem:           7822        1075        4146          10        2601        6440
| [ 0:01] Swap:          4095           0        4095
| [ 0:01] Filesystem      Size  Used Avail Use% Mounted on
| [ 0:01] /dev/sdc1        18G  8.4G  8.4G  50% /
| [ 0:01] /dev/sdd1        51G  6.1G   43G  13% /lfskernel
| [ 0:01] devtmpfs        3.9G     0  3.9G   0% /dev
| [ 0:01] tmpfs           3.9G     0  3.9G   0% /run
| [ 0:01] @TESTDIR=/tmp/LVMTEST25970.qrCohz74Gp
| [ 0:01] @PREFIX=LVMTEST25970
| [ 0:01] ## LVMCONF: activation {
| [ 0:01] ## LVMCONF:     checks = 1
| [ 0:01] ## LVMCONF:     monitoring = 0
| [ 0:01] ## LVMCONF:     polling_interval = 1
| [ 0:01] ## LVMCONF:     raid_region_size = 512
| [ 0:01] ## LVMCONF:     retry_deactivation = 1
| [ 0:01] ## LVMCONF:     snapshot_autoextend_percent = 50
| [ 0:01] ## LVMCONF:     snapshot_autoextend_threshold = 50
| [ 0:01] ## LVMCONF:     udev_rules = 1
| [ 0:01] ## LVMCONF:     udev_sync = 1
| [ 0:01] ## LVMCONF:     verify_udev_operations = 1
| [ 0:01] ## LVMCONF: }
| [ 0:01] ## LVMCONF: allocation {
| [ 0:01] ## LVMCONF:     wipe_signatures_when_zeroing_new_lvs = 0
| [ 0:01] ## LVMCONF: }
| [ 0:01] ## LVMCONF: backup {
| [ 0:01] ## LVMCONF:     archive = 0
| [ 0:01] ## LVMCONF:     backup = 0
| [ 0:01] ## LVMCONF: }
| [ 0:01] ## LVMCONF: devices {
| [ 0:01] ## LVMCONF:     cache_dir = "@TESTDIR@/etc"
| [ 0:01] ## LVMCONF:     default_data_alignment = 1
| [ 0:01] ## LVMCONF:     dir = "@TESTDIR@/dev"
| [ 0:01] ## LVMCONF:     filter = "a|.*|"
| [ 0:01] ## LVMCONF:     global_filter = [ "a|@TESTDIR@/dev/mapper/@PREFIX@.*pv[0-9_]*$|", "r|.*|" ]
| [ 0:01] ## LVMCONF:     md_component_detection  = 0
| [ 0:01] ## LVMCONF:     scan = "@TESTDIR@/dev"
| [ 0:01] ## LVMCONF:     sysfs_scan = 1
| [ 0:01] ## LVMCONF:     write_cache_state = 0
| [ 0:01] ## LVMCONF: }
| [ 0:01] ## LVMCONF: dmeventd {
| [ 0:01] ## LVMCONF:     executable = "/sources/boot/LVM2.2.02.177/test/lib/dmeventd"
| [ 0:01] ## LVMCONF: }
| [ 0:01] ## LVMCONF: global {
| [ 0:01] ## LVMCONF:     abort_on_internal_errors = 1
| [ 0:01] ## LVMCONF:     cache_check_executable = "/usr/sbin/cache_check"
| [ 0:01] ## LVMCONF:     cache_dump_executable = "/usr/sbin/cache_dump"
| [ 0:01] ## LVMCONF:     cache_repair_executable = "/usr/sbin/cache_repair"
| [ 0:01] ## LVMCONF:     detect_internal_vg_cache_corruption = 1
| [ 0:01] ## LVMCONF:     fallback_to_local_locking = 0
| [ 0:01] ## LVMCONF:     fsadm_executable = "/sources/boot/LVM2.2.02.177/test/lib/fsadm"
| [ 0:01] ## LVMCONF:     library_dir = "@TESTDIR@/lib"
| [ 0:01] ## LVMCONF:     locking_dir = "@TESTDIR@/var/lock/lvm"
| [ 0:01] ## LVMCONF:     locking_type=1
| [ 0:01] ## LVMCONF:     notify_dbus = 0
| [ 0:01] ## LVMCONF:     si_unit_consistency = 1
| [ 0:01] ## LVMCONF:     thin_check_executable = "/usr/sbin/thin_check"
| [ 0:01] ## LVMCONF:     thin_dump_executable = "/usr/sbin/thin_dump"
| [ 0:01] ## LVMCONF:     thin_repair_executable = "/usr/sbin/thin_repair"
| [ 0:01] ## LVMCONF:     use_lvmetad = 0
| [ 0:01] ## LVMCONF:     use_lvmlockd = 0
| [ 0:01] ## LVMCONF:     use_lvmpolld = 0
| [ 0:01] ## LVMCONF: }
| [ 0:01] ## LVMCONF: log {
| [ 0:01] ## LVMCONF:     activation = 1
| [ 0:01] ## LVMCONF:     file = "@TESTDIR@/debug.log"
| [ 0:01] ## LVMCONF:     indent = 1
| [ 0:01] ## LVMCONF:     level = 9
| [ 0:01] ## LVMCONF:     overwrite = 1
| [ 0:01] ## LVMCONF:     syslog = 0
| [ 0:01] ## LVMCONF:     verbose = 0
| [ 0:01] ## LVMCONF: }
| [ 0:01] <======== Processing test: "vgcfgbackup-usage.sh" ========>
| [ 0:01] 
| [ 0:01] aux prepare_pvs 4
| [ 0:01] #vgcfgbackup-usage.sh:18+ aux prepare_pvs 4
| [ 0:01] ## preparing loop device....ok (/dev/loop0)
| [ 0:01] ## preparing 4 devices...lib/utils: line 212: DM_UDEV_COOKIE: unbound variable
| [ 0:01] set +vx; STACKTRACE; set -vx
| [ 0:01] ##vgcfgbackup-usage.sh:18+ set +vx
| [ 0:01] ## - /lfskernel/sources/boot/LVM2.2.02.177/test/shell/vgcfgbackup-usage.sh:18
| [ 0:01] ## 1 STACKTRACE() called from /lfskernel/sources/boot/LVM2.2.02.177/test/shell/vgcfgbackup-usage.sh:18
| [ 0:01] <======== Info ========>
| [ 0:01] ## DMINFO:   Name             Maj Min Stat Open Targ Event  UUID                                                                
| [ 0:01] ## DMINFO:   @PREFIX@pv1  253   6 L--w    0    1      0 TEST-@PREFIX@pv1                                                
| [ 0:01] ## DMINFO:   @PREFIX@pv4  253   5 L--w    0    1      0 TEST-@PREFIX@pv4                                                
| [ 0:01] ## DMINFO:   @PREFIX@pv3  253   4 L--w    0    1      0 TEST-@PREFIX@pv3                                                
| [ 0:01] ## DMINFO:   @PREFIX@pv2  253   3 L--w    0    1      0 TEST-@PREFIX@pv2                                                
| [ 0:01] <======== Active table ========>
| [ 0:01] ## DMTABLE:  @PREFIX@pv1: 0 69632 linear 7:0 2048
| [ 0:01] ## DMTABLE:  @PREFIX@pv4: 0 69632 linear 7:0 210944
| [ 0:01] ## DMTABLE:  @PREFIX@pv3: 0 69632 linear 7:0 141312
| [ 0:01] ## DMTABLE:  @PREFIX@pv2: 0 69632 linear 7:0 71680
| [ 0:01] <======== Inactive table ========>
| [ 0:01] ## DMITABLE: @PREFIX@pv1: 
| [ 0:01] ## DMITABLE: @PREFIX@pv4: 
| [ 0:01] ## DMITABLE: @PREFIX@pv3: 
| [ 0:01] ## DMITABLE: @PREFIX@pv2: 
| [ 0:01] <======== Status ========>
| [ 0:01] ## DMSTATUS: @PREFIX@pv1: 0 69632 linear 
| [ 0:01] ## DMSTATUS: @PREFIX@pv4: 0 69632 linear 
| [ 0:01] ## DMSTATUS: @PREFIX@pv3: 0 69632 linear 
| [ 0:01] ## DMSTATUS: @PREFIX@pv2: 0 69632 linear 
| [ 0:01] <======== Tree ========>
| [ 0:01] ## DMTREE:   @PREFIX@pv1 (253:6)
| [ 0:01] ## DMTREE:    `- (7:0)
| [ 0:01] ## DMTREE:   @PREFIX@pv4 (253:5)
| [ 0:01] ## DMTREE:    `- (7:0)
| [ 0:01] ## DMTREE:   @PREFIX@pv3 (253:4)
| [ 0:01] ## DMTREE:    `- (7:0)
| [ 0:01] ## DMTREE:   LFS_vg-lfs (253:2)
| [ 0:01] ## DMTREE:    `- (8:16)
| [ 0:01] ## DMTREE:   centos-swap (253:1)
| [ 0:01] ## DMTREE:    `- (8:2)
| [ 0:01] ## DMTREE:   centos-root (253:0)
| [ 0:01] ## DMTREE:    `- (8:2)
| [ 0:01] ## DMTREE:   @PREFIX@pv2 (253:3)
| [ 0:01] ## DMTREE:    `- (7:0)
| [ 0:01] <======== Recursive list of @TESTDIR@/dev ========>
| [ 0:01] ## LSLR:	@TESTDIR@/dev:
| [ 0:01] ## LSLR:	total 4
| [ 0:01] ## LSLR:	brw-r--r-- 1 root root 7, 0 Feb 21 02:27 loop0
| [ 0:01] ## LSLR:	brw-r--r-- 1 root root 7, 1 Feb 21 02:27 loop1
| [ 0:01] ## LSLR:	brw-r--r-- 1 root root 7, 2 Feb 21 02:27 loop2
| [ 0:01] ## LSLR:	brw-r--r-- 1 root root 7, 3 Feb 21 02:27 loop3
| [ 0:01] ## LSLR:	brw-r--r-- 1 root root 7, 4 Feb 21 02:27 loop4
| [ 0:01] ## LSLR:	brw-r--r-- 1 root root 7, 5 Feb 21 02:27 loop5
| [ 0:01] ## LSLR:	brw-r--r-- 1 root root 7, 6 Feb 21 02:27 loop6
| [ 0:01] ## LSLR:	brw-r--r-- 1 root root 7, 7 Feb 21 02:27 loop7
| [ 0:01] ## LSLR:	drwxr-xr-x 2 root root 4096 Feb 21 02:27 mapper
| [ 0:01] ## LSLR:	crw-r--r-- 1 root root 1, 3 Feb 21 02:27 testnull
| [ 0:01] ## LSLR:	
| [ 0:01] ## LSLR:	@TESTDIR@/dev/mapper:
| [ 0:01] ## LSLR:	total 0
| [ 0:01] ## LSLR:	brw------- 1 root root 253,   6 Feb 21 02:27 @PREFIX@pv1
| [ 0:01] ## LSLR:	brw------- 1 root root 253,   3 Feb 21 02:27 @PREFIX@pv2
| [ 0:01] ## LSLR:	brw------- 1 root root 253,   4 Feb 21 02:27 @PREFIX@pv3
| [ 0:01] ## LSLR:	brw------- 1 root root 253,   5 Feb 21 02:27 @PREFIX@pv4
| [ 0:01] ## LSLR:	crw------- 1 root root  10, 236 Feb 21 02:27 control
| [ 0:01] <======== Udev DB content ========>
| [ 0:01] ## UDEV:	P: /devices/virtual/block/dm-0
| [ 0:01] ## UDEV:	N: dm-0
| [ 0:01] ## UDEV:	E: DEVNAME=/dev/dm-0
| [ 0:01] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-0
| [ 0:01] ## UDEV:	E: DEVTYPE=disk
| [ 0:01] ## UDEV:	E: MAJOR=253
| [ 0:01] ## UDEV:	E: MINOR=0
| [ 0:01] ## UDEV:	E: SUBSYSTEM=block
| [ 0:01] ## UDEV:	
| [ 0:01] ## UDEV:	P: /devices/virtual/block/dm-1
| [ 0:01] ## UDEV:	N: dm-1
| [ 0:01] ## UDEV:	E: DEVNAME=/dev/dm-1
| [ 0:01] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-1
| [ 0:01] ## UDEV:	E: DEVTYPE=disk
| [ 0:01] ## UDEV:	E: MAJOR=253
| [ 0:01] ## UDEV:	E: MINOR=1
| [ 0:01] ## UDEV:	E: SUBSYSTEM=block
| [ 0:01] ## UDEV:	
| [ 0:01] ## UDEV:	P: /devices/virtual/block/dm-2
| [ 0:01] ## UDEV:	N: dm-2
| [ 0:01] ## UDEV:	E: DEVNAME=/dev/dm-2
| [ 0:01] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-2
| [ 0:01] ## UDEV:	E: DEVTYPE=disk
| [ 0:01] ## UDEV:	E: MAJOR=253
| [ 0:01] ## UDEV:	E: MINOR=2
| [ 0:01] ## UDEV:	E: SUBSYSTEM=block
| [ 0:01] ## UDEV:	
| [ 0:01] ## UDEV:	P: /devices/virtual/block/dm-3
| [ 0:01] ## UDEV:	N: dm-3
| [ 0:01] ## UDEV:	E: DEVNAME=/dev/dm-3
| [ 0:01] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-3
| [ 0:01] ## UDEV:	E: DEVTYPE=disk
| [ 0:01] ## UDEV:	E: MAJOR=253
| [ 0:01] ## UDEV:	E: MINOR=3
| [ 0:01] ## UDEV:	E: SUBSYSTEM=block
| [ 0:01] ## UDEV:	
| [ 0:01] ## UDEV:	P: /devices/virtual/block/dm-4
| [ 0:01] ## UDEV:	N: dm-4
| [ 0:01] ## UDEV:	E: DEVNAME=/dev/dm-4
| [ 0:01] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-4
| [ 0:01] ## UDEV:	E: DEVTYPE=disk
| [ 0:01] ## UDEV:	E: MAJOR=253
| [ 0:01] ## UDEV:	E: MINOR=4
| [ 0:01] ## UDEV:	E: SUBSYSTEM=block
| [ 0:01] ## UDEV:	
| [ 0:01] ## UDEV:	P: /devices/virtual/block/dm-5
| [ 0:01] ## UDEV:	N: dm-5
| [ 0:01] ## UDEV:	E: DEVNAME=/dev/dm-5
| [ 0:01] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-5
| [ 0:01] ## UDEV:	E: DEVTYPE=disk
| [ 0:01] ## UDEV:	E: MAJOR=253
| [ 0:01] ## UDEV:	E: MINOR=5
| [ 0:01] ## UDEV:	E: SUBSYSTEM=block
| [ 0:01] ## UDEV:	
| [ 0:01] ## UDEV:	P: /devices/virtual/block/dm-6
| [ 0:01] ## UDEV:	N: dm-6
| [ 0:01] ## UDEV:	E: DEVNAME=/dev/dm-6
| [ 0:01] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-6
| [ 0:01] ## UDEV:	E: DEVTYPE=disk
| [ 0:01] ## UDEV:	E: MAJOR=253
| [ 0:01] ## UDEV:	E: MINOR=6
| [ 0:01] ## UDEV:	E: SUBSYSTEM=block
| [ 0:01] ## UDEV:	
| [ 0:01] ## UDEV:	P: /devices/virtual/block/loop0
| [ 0:01] ## UDEV:	N: loop0
| [ 0:01] ## UDEV:	E: DEVNAME=/dev/loop0
| [ 0:01] ## UDEV:	E: DEVPATH=/devices/virtual/block/loop0
| [ 0:01] ## UDEV:	E: DEVTYPE=disk
| [ 0:01] ## UDEV:	E: MAJOR=7
| [ 0:01] ## UDEV:	E: MINOR=0
| [ 0:01] ## UDEV:	E: SUBSYSTEM=block
| [ 0:01] ## UDEV:	
| [ 0:01] <======== Script file "vgcfgbackup-usage.sh" ========>
| [ 0:01] ## Line: 1 	 #!/usr/bin/env bash
| [ 0:01] ## Line: 2 	 
| [ 0:01] ## Line: 3 	 # Copyright (C) 2008-2013 Red Hat, Inc. All rights reserved.
| [ 0:01] ## Line: 4 	 #
| [ 0:01] ## Line: 5 	 # This copyrighted material is made available to anyone wishing to use,
| [ 0:01] ## Line: 6 	 # modify, copy, or redistribute it subject to the terms and conditions
| [ 0:01] ## Line: 7 	 # of the GNU General Public License v.2.
| [ 0:01] ## Line: 8 	 #
| [ 0:01] ## Line: 9 	 # You should have received a copy of the GNU General Public License
| [ 0:01] ## Line: 10 	 # along with this program; if not, write to the Free Software Foundation,
| [ 0:01] ## Line: 11 	 # Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA
| [ 0:01] ## Line: 12 	 
| [ 0:01] ## Line: 13 	 SKIP_WITH_LVMLOCKD=1
| [ 0:01] ## Line: 14 	 SKIP_WITH_LVMPOLLD=1
| [ 0:01] ## Line: 15 	 
| [ 0:01] ## Line: 16 	 . lib/inittest
| [ 0:01] ## Line: 17 	 
| [ 0:01] ## Line: 18 	 aux prepare_pvs 4
| [ 0:01] ## Line: 19 	 get_devs
| [ 0:01] ## Line: 20 	 
| [ 0:01] ## Line: 21 	 pvcreate --metadatacopies 0 "$dev4"
| [ 0:01] ## Line: 22 	 
| [ 0:01] ## Line: 23 	 # No automatic backup
| [ 0:01] ## Line: 24 	 aux lvmconf "backup/backup = 0"
| [ 0:01] ## Line: 25 	 
| [ 0:01] ## Line: 26 	 # vgcfgbackup handles similar VG names (bz458941)
| [ 0:01] ## Line: 27 	 vg1=${PREFIX}vg00
| [ 0:01] ## Line: 28 	 vg2=${PREFIX}vg01
| [ 0:01] ## Line: 29 	 vgcreate $vg1 "$dev1"
| [ 0:01] ## Line: 30 	 vgcreate $vg2 "$dev2"
| [ 0:01] ## Line: 31 	 
| [ 0:01] ## Line: 32 	 # Enforces system backup
| [ 0:01] ## Line: 33 	 test ! -e etc/backup/$vg1
| [ 0:01] ## Line: 34 	 test ! -e etc/backup/$vg2
| [ 0:01] ## Line: 35 	 vgcfgbackup
| [ 0:01] ## Line: 36 	 test -e etc/backup/$vg1
| [ 0:01] ## Line: 37 	 test -e etc/backup/$vg2
| [ 0:01] ## Line: 38 	 
| [ 0:01] ## Line: 39 	 aux lvmconf "backup/archive = 1"
| [ 0:01] ## Line: 40 	 
| [ 0:01] ## Line: 41 	 vgcfgbackup -f "bak-%s" >out
| [ 0:01] ## Line: 42 	 grep "Volume group \"$vg1\" successfully backed up." out
| [ 0:01] ## Line: 43 	 grep "Volume group \"$vg2\" successfully backed up." out
| [ 0:01] ## Line: 44 	 # increase seqno
| [ 0:01] ## Line: 45 	 lvcreate -an -Zn -l1 $vg1
| [ 0:01] ## Line: 46 	 
| [ 0:01] ## Line: 47 	 invalid vgcfgrestore -f "bak-$vg1" $vg1-inv@lid
| [ 0:01] ## Line: 48 	 invalid vgcfgrestore -f "bak-$vg1" $vg1 $vg2
| [ 0:01] ## Line: 49 	 
| [ 0:01] ## Line: 50 	 vgcfgrestore -l $vg1 | tee out
| [ 0:01] ## Line: 51 	 test "$(grep -c Description out)" -eq 2
| [ 0:01] ## Line: 52 	 
| [ 0:01] ## Line: 53 	 vgcfgrestore -l -f "bak-$vg1" $vg1
| [ 0:01] ## Line: 54 	 
| [ 0:01] ## Line: 55 	 vgremove -ff $vg1 $vg2
| [ 0:01] ## Line: 56 	 
| [ 0:01] ## Line: 57 	 # vgcfgbackup correctly stores metadata with missing PVs
| [ 0:01] ## Line: 58 	 # and vgcfgrestore able to restore them when device reappears
| [ 0:01] ## Line: 59 	 pv1_uuid=$(get pv_field "$dev1" pv_uuid)
| [ 0:01] ## Line: 60 	 pv2_uuid=$(get pv_field "$dev2" pv_uuid)
| [ 0:01] ## Line: 61 	 vgcreate "$vg" "${DEVICES[@]}"
| [ 0:01] ## Line: 62 	 lvcreate -l1 -n $lv1 $vg "$dev1"
| [ 0:01] ## Line: 63 	 lvcreate -l1 -n $lv2 $vg "$dev2"
| [ 0:01] ## Line: 64 	 lvcreate -l1 -n $lv3 $vg "$dev3"
| [ 0:01] ## Line: 65 	 vgchange -a n $vg
| [ 0:01] ## Line: 66 	 pvcreate -ff -y "$dev1"
| [ 0:01] ## Line: 67 	 pvcreate -ff -y "$dev2"
| [ 0:01] ## Line: 68 	 vgcfgbackup -f "backup.$$" $vg
| [ 0:01] ## Line: 69 	 sed 's/flags = \[\"MISSING\"\]/flags = \[\]/' "backup.$$" > "backup.$$1"
| [ 0:01] ## Line: 70 	 pvcreate -ff -y --norestorefile -u $pv1_uuid "$dev1"
| [ 0:01] ## Line: 71 	 pvcreate -ff -y --norestorefile -u $pv2_uuid "$dev2"
| [ 0:01] ## Line: 72 	 
| [ 0:01] ## Line: 73 	 # Try to recover nonexisting vgname
| [ 0:01] ## Line: 74 	 not vgcfgrestore -f "backup.$$1" ${vg}_nonexistent
| [ 0:01] ## Line: 75 	 vgcfgrestore -f "backup.$$1" $vg
| [ 0:01] ## Line: 76 	 vgchange -an $vg
| [ 0:01] ## Line: 77 	 vgremove -f $vg
| [ 0:01] ## Line: 78 	 
| [ 0:01] aux teardown
| [ 0:01] #vgcfgbackup-usage.sh:1+ aux teardown
| [ 0:01] ## teardown.........ok
###       failed: [ndev-vanilla] shell/vgcfgbackup-usage.sh

| [ 0:00] Library version:   1.02.146 (2017-12-18)
| [ 0:00] Driver version:    4.35.0
| [ 0:00] Kernel is Linux localhost.localdomain 3.10.0-693.11.1.el7.x86_64 #1 SMP Mon Dec 4 23:52:40 UTC 2017 x86_64 GNU/Linux
| [ 0:00] Selinux mode is not installed.
| [ 0:00]               total        used        free      shared  buff/cache   available
| [ 0:00] Mem:           7822        1075        4146          10        2601        6440
| [ 0:00] Swap:          4095           0        4095
| [ 0:00] Filesystem      Size  Used Avail Use% Mounted on
| [ 0:00] /dev/sdc1        18G  8.4G  8.4G  50% /
| [ 0:00] /dev/sdd1        51G  6.1G   43G  13% /lfskernel
| [ 0:00] devtmpfs        3.9G     0  3.9G   0% /dev
| [ 0:00] tmpfs           3.9G     0  3.9G   0% /run
| [ 0:00] @TESTDIR=/tmp/LVMTEST26162.xZv3Zr6KJH
| [ 0:00] @PREFIX=LVMTEST26162
| [ 0:00] ## LVMCONF: activation {
| [ 0:00] ## LVMCONF:     checks = 1
| [ 0:00] ## LVMCONF:     monitoring = 0
| [ 0:00] ## LVMCONF:     polling_interval = 1
| [ 0:00] ## LVMCONF:     raid_region_size = 512
| [ 0:00] ## LVMCONF:     retry_deactivation = 1
| [ 0:00] ## LVMCONF:     snapshot_autoextend_percent = 50
| [ 0:00] ## LVMCONF:     snapshot_autoextend_threshold = 50
| [ 0:00] ## LVMCONF:     udev_rules = 1
| [ 0:00] ## LVMCONF:     udev_sync = 1
| [ 0:00] ## LVMCONF:     verify_udev_operations = 1
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: allocation {
| [ 0:00] ## LVMCONF:     wipe_signatures_when_zeroing_new_lvs = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: backup {
| [ 0:00] ## LVMCONF:     archive = 0
| [ 0:00] ## LVMCONF:     backup = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: devices {
| [ 0:00] ## LVMCONF:     cache_dir = "@TESTDIR@/etc"
| [ 0:00] ## LVMCONF:     default_data_alignment = 1
| [ 0:00] ## LVMCONF:     dir = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     filter = "a|.*|"
| [ 0:00] ## LVMCONF:     global_filter = [ "a|@TESTDIR@/dev/mapper/@PREFIX@.*pv[0-9_]*$|", "r|.*|" ]
| [ 0:00] ## LVMCONF:     md_component_detection  = 0
| [ 0:00] ## LVMCONF:     scan = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     sysfs_scan = 1
| [ 0:00] ## LVMCONF:     write_cache_state = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: dmeventd {
| [ 0:00] ## LVMCONF:     executable = "/sources/boot/LVM2.2.02.177/test/lib/dmeventd"
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: global {
| [ 0:00] ## LVMCONF:     abort_on_internal_errors = 1
| [ 0:00] ## LVMCONF:     cache_check_executable = "/usr/sbin/cache_check"
| [ 0:00] ## LVMCONF:     cache_dump_executable = "/usr/sbin/cache_dump"
| [ 0:00] ## LVMCONF:     cache_repair_executable = "/usr/sbin/cache_repair"
| [ 0:00] ## LVMCONF:     detect_internal_vg_cache_corruption = 1
| [ 0:00] ## LVMCONF:     fallback_to_local_locking = 0
| [ 0:00] ## LVMCONF:     fsadm_executable = "/sources/boot/LVM2.2.02.177/test/lib/fsadm"
| [ 0:00] ## LVMCONF:     library_dir = "@TESTDIR@/lib"
| [ 0:00] ## LVMCONF:     locking_dir = "@TESTDIR@/var/lock/lvm"
| [ 0:00] ## LVMCONF:     locking_type=1
| [ 0:00] ## LVMCONF:     notify_dbus = 0
| [ 0:00] ## LVMCONF:     si_unit_consistency = 1
| [ 0:00] ## LVMCONF:     thin_check_executable = "/usr/sbin/thin_check"
| [ 0:00] ## LVMCONF:     thin_dump_executable = "/usr/sbin/thin_dump"
| [ 0:00] ## LVMCONF:     thin_repair_executable = "/usr/sbin/thin_repair"
| [ 0:00] ## LVMCONF:     use_lvmetad = 0
| [ 0:00] ## LVMCONF:     use_lvmlockd = 0
| [ 0:00] ## LVMCONF:     use_lvmpolld = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: log {
| [ 0:00] ## LVMCONF:     activation = 1
| [ 0:00] ## LVMCONF:     file = "@TESTDIR@/debug.log"
| [ 0:00] ## LVMCONF:     indent = 1
| [ 0:00] ## LVMCONF:     level = 9
| [ 0:00] ## LVMCONF:     overwrite = 1
| [ 0:00] ## LVMCONF:     syslog = 0
| [ 0:00] ## LVMCONF:     verbose = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] <======== Processing test: "vgchange-many.sh" ========>
| [ 0:00] 
| [ 0:00] # FIXME: lvmetad fails with i.e. 1500 device on memory failure...
| [ 0:00] 
| [ 0:00] # Number of LVs to create
| [ 0:00] TEST_DEVS=1000
| [ 0:00] #vgchange-many.sh:22+ TEST_DEVS=1000
| [ 0:00] # On low-memory boxes let's not stress too much
| [ 0:00] test "$(aux total_mem)" -gt 524288 || TEST_DEVS=256
| [ 0:00] ##vgchange-many.sh:24+ aux total_mem
| [ 0:00] #vgchange-many.sh:24+ test '        8010648' -gt 524288
| [ 0:00] 
| [ 0:00] aux prepare_pvs 1 400
| [ 0:00] #vgchange-many.sh:26+ aux prepare_pvs 1 400
| [ 0:00] ## preparing loop device....ok (/dev/loop0)
| [ 0:00] ## preparing 1 devices...lib/utils: line 212: DM_UDEV_COOKIE: unbound variable
| [ 0:00] set +vx; STACKTRACE; set -vx
| [ 0:00] ##vgchange-many.sh:26+ set +vx
| [ 0:00] ## - /lfskernel/sources/boot/LVM2.2.02.177/test/shell/vgchange-many.sh:26
| [ 0:00] ## 1 STACKTRACE() called from /lfskernel/sources/boot/LVM2.2.02.177/test/shell/vgchange-many.sh:26
| [ 0:00] <======== Info ========>
| [ 0:00] ## DMINFO:   Name             Maj Min Stat Open Targ Event  UUID                                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv1  253   3 L--w    0    1      0 TEST-@PREFIX@pv1                                                
| [ 0:00] <======== Active table ========>
| [ 0:00] ## DMTABLE:  @PREFIX@pv1: 0 819200 linear 7:0 2048
| [ 0:00] <======== Inactive table ========>
| [ 0:00] ## DMITABLE: @PREFIX@pv1: 
| [ 0:00] <======== Status ========>
| [ 0:00] ## DMSTATUS: @PREFIX@pv1: 0 819200 linear 
| [ 0:00] <======== Tree ========>
| [ 0:00] ## DMTREE:   @PREFIX@pv1 (253:3)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   LFS_vg-lfs (253:2)
| [ 0:00] ## DMTREE:    `- (8:16)
| [ 0:00] ## DMTREE:   centos-swap (253:1)
| [ 0:00] ## DMTREE:    `- (8:2)
| [ 0:00] ## DMTREE:   centos-root (253:0)
| [ 0:00] ## DMTREE:    `- (8:2)
| [ 0:00] <======== Recursive list of @TESTDIR@/dev ========>
| [ 0:00] ## LSLR:	@TESTDIR@/dev:
| [ 0:00] ## LSLR:	total 4
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 0 Feb 21 02:27 loop0
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 1 Feb 21 02:27 loop1
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 2 Feb 21 02:27 loop2
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 3 Feb 21 02:27 loop3
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 4 Feb 21 02:27 loop4
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 5 Feb 21 02:27 loop5
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 6 Feb 21 02:27 loop6
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 7 Feb 21 02:27 loop7
| [ 0:00] ## LSLR:	drwxr-xr-x 2 root root 4096 Feb 21 02:27 mapper
| [ 0:00] ## LSLR:	crw-r--r-- 1 root root 1, 3 Feb 21 02:27 testnull
| [ 0:00] ## LSLR:	
| [ 0:00] ## LSLR:	@TESTDIR@/dev/mapper:
| [ 0:00] ## LSLR:	total 0
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   3 Feb 21 02:27 @PREFIX@pv1
| [ 0:00] ## LSLR:	crw------- 1 root root  10, 236 Feb 21 02:27 control
| [ 0:00] <======== Udev DB content ========>
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-0
| [ 0:00] ## UDEV:	N: dm-0
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-0
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-0
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=0
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-1
| [ 0:00] ## UDEV:	N: dm-1
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-1
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-1
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=1
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-2
| [ 0:00] ## UDEV:	N: dm-2
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-2
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-2
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=2
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-3
| [ 0:00] ## UDEV:	N: dm-3
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-3
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-3
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=3
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/loop0
| [ 0:00] ## UDEV:	N: loop0
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/loop0
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/loop0
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=7
| [ 0:00] ## UDEV:	E: MINOR=0
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] <======== Script file "vgchange-many.sh" ========>
| [ 0:00] ## Line: 1 	 #!/usr/bin/env bash
| [ 0:00] ## Line: 2 	 
| [ 0:00] ## Line: 3 	 # Copyright (C) 2013 Red Hat, Inc. All rights reserved.
| [ 0:00] ## Line: 4 	 #
| [ 0:00] ## Line: 5 	 # This copyrighted material is made available to anyone wishing to use,
| [ 0:00] ## Line: 6 	 # modify, copy, or redistribute it subject to the terms and conditions
| [ 0:00] ## Line: 7 	 # of the GNU General Public License v.2.
| [ 0:00] ## Line: 8 	 #
| [ 0:00] ## Line: 9 	 # You should have received a copy of the GNU General Public License
| [ 0:00] ## Line: 10 	 # along with this program; if not, write to the Free Software Foundation,
| [ 0:00] ## Line: 11 	 # Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA
| [ 0:00] ## Line: 12 	 
| [ 0:00] ## Line: 13 	 # Check perfomance of activation and deactivation
| [ 0:00] ## Line: 14 	 SKIP_WITH_LVMLOCKD=1
| [ 0:00] ## Line: 15 	 SKIP_WITH_LVMPOLLD=1
| [ 0:00] ## Line: 16 	 
| [ 0:00] ## Line: 17 	 . lib/inittest
| [ 0:00] ## Line: 18 	 
| [ 0:00] ## Line: 19 	 # FIXME: lvmetad fails with i.e. 1500 device on memory failure...
| [ 0:00] ## Line: 20 	 
| [ 0:00] ## Line: 21 	 # Number of LVs to create
| [ 0:00] ## Line: 22 	 TEST_DEVS=1000
| [ 0:00] ## Line: 23 	 # On low-memory boxes let's not stress too much
| [ 0:00] ## Line: 24 	 test "$(aux total_mem)" -gt 524288 || TEST_DEVS=256
| [ 0:00] ## Line: 25 	 
| [ 0:00] ## Line: 26 	 aux prepare_pvs 1 400
| [ 0:00] ## Line: 27 	 get_devs
| [ 0:00] ## Line: 28 	 
| [ 0:00] ## Line: 29 	 vgcreate -s 128K "$vg" "${DEVICES[@]}"
| [ 0:00] ## Line: 30 	 
| [ 0:00] ## Line: 31 	 vgcfgbackup -f data $vg
| [ 0:00] ## Line: 32 	 
| [ 0:00] ## Line: 33 	 # Generate a lot of devices (size of 1 extent)
| [ 0:00] ## Line: 34 	 awk -v TEST_DEVS=$TEST_DEVS '/^\t\}/ {
| [ 0:00] ## Line: 35 	     printf("\t}\n\tlogical_volumes {\n");
| [ 0:00] ## Line: 36 	     cnt=0;
| [ 0:00] ## Line: 37 	     for (i = 0; i < TEST_DEVS; i++) {
| [ 0:00] ## Line: 38 	 	printf("\t\tlvol%06d  {\n", i);
| [ 0:00] ## Line: 39 	 	printf("\t\t\tid = \"%06d-1111-2222-3333-2222-1111-%06d\"\n", i, i);
| [ 0:00] ## Line: 40 	 	print "\t\t\tstatus = [\"READ\", \"WRITE\", \"VISIBLE\"]";
| [ 0:00] ## Line: 41 	 	print "\t\t\tsegment_count = 1";
| [ 0:00] ## Line: 42 	 	print "\t\t\tsegment1 {";
| [ 0:00] ## Line: 43 	 	print "\t\t\t\tstart_extent = 0";
| [ 0:00] ## Line: 44 	 	print "\t\t\t\textent_count = 1";
| [ 0:00] ## Line: 45 	 	print "\t\t\t\ttype = \"striped\"";
| [ 0:00] ## Line: 46 	 	print "\t\t\t\tstripe_count = 1";
| [ 0:00] ## Line: 47 	 	print "\t\t\t\tstripes = [";
| [ 0:00] ## Line: 48 	 	print "\t\t\t\t\t\"pv0\", " cnt++;
| [ 0:00] ## Line: 49 	 	printf("\t\t\t\t]\n\t\t\t}\n\t\t}\n");
| [ 0:00] ## Line: 50 	       }
| [ 0:00] ## Line: 51 	   }
| [ 0:00] ## Line: 52 	   {print}
| [ 0:00] ## Line: 53 	 ' data >data_new
| [ 0:00] ## Line: 54 	 
| [ 0:00] ## Line: 55 	 vgcfgrestore -f data_new $vg
| [ 0:00] ## Line: 56 	 
| [ 0:00] ## Line: 57 	 # Activate and deactivate all of them
| [ 0:00] ## Line: 58 	 vgchange -ay $vg
| [ 0:00] ## Line: 59 	 vgchange -an $vg
| [ 0:00] aux teardown
| [ 0:00] #vgchange-many.sh:1+ aux teardown
| [ 0:00] ## teardown.........ok
###       failed: [ndev-vanilla] shell/vgchange-many.sh
###      skipped: [ndev-vanilla] shell/vgchange-maxlv.sh

| [ 0:00] Library version:   1.02.146 (2017-12-18)
| [ 0:00] Driver version:    4.35.0
| [ 0:00] Kernel is Linux localhost.localdomain 3.10.0-693.11.1.el7.x86_64 #1 SMP Mon Dec 4 23:52:40 UTC 2017 x86_64 GNU/Linux
| [ 0:00] Selinux mode is not installed.
| [ 0:00]               total        used        free      shared  buff/cache   available
| [ 0:00] Mem:           7822        1075        4146          10        2601        6440
| [ 0:00] Swap:          4095           0        4095
| [ 0:00] Filesystem      Size  Used Avail Use% Mounted on
| [ 0:00] /dev/sdc1        18G  8.4G  8.4G  50% /
| [ 0:00] /dev/sdd1        51G  6.1G   43G  13% /lfskernel
| [ 0:00] devtmpfs        3.9G     0  3.9G   0% /dev
| [ 0:00] tmpfs           3.9G     0  3.9G   0% /run
| [ 0:00] @TESTDIR=/tmp/LVMTEST26391.OUA4YDkrOM
| [ 0:00] @PREFIX=LVMTEST26391
| [ 0:00] ## LVMCONF: activation {
| [ 0:00] ## LVMCONF:     checks = 1
| [ 0:00] ## LVMCONF:     monitoring = 0
| [ 0:00] ## LVMCONF:     polling_interval = 1
| [ 0:00] ## LVMCONF:     raid_region_size = 512
| [ 0:00] ## LVMCONF:     retry_deactivation = 1
| [ 0:00] ## LVMCONF:     snapshot_autoextend_percent = 50
| [ 0:00] ## LVMCONF:     snapshot_autoextend_threshold = 50
| [ 0:00] ## LVMCONF:     udev_rules = 1
| [ 0:00] ## LVMCONF:     udev_sync = 1
| [ 0:00] ## LVMCONF:     verify_udev_operations = 1
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: allocation {
| [ 0:00] ## LVMCONF:     wipe_signatures_when_zeroing_new_lvs = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: backup {
| [ 0:00] ## LVMCONF:     archive = 0
| [ 0:00] ## LVMCONF:     backup = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: devices {
| [ 0:00] ## LVMCONF:     cache_dir = "@TESTDIR@/etc"
| [ 0:00] ## LVMCONF:     default_data_alignment = 1
| [ 0:00] ## LVMCONF:     dir = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     filter = "a|.*|"
| [ 0:00] ## LVMCONF:     global_filter = [ "a|@TESTDIR@/dev/mapper/@PREFIX@.*pv[0-9_]*$|", "r|.*|" ]
| [ 0:00] ## LVMCONF:     md_component_detection  = 0
| [ 0:00] ## LVMCONF:     scan = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     sysfs_scan = 1
| [ 0:00] ## LVMCONF:     write_cache_state = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: dmeventd {
| [ 0:00] ## LVMCONF:     executable = "/sources/boot/LVM2.2.02.177/test/lib/dmeventd"
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: global {
| [ 0:00] ## LVMCONF:     abort_on_internal_errors = 1
| [ 0:00] ## LVMCONF:     cache_check_executable = "/usr/sbin/cache_check"
| [ 0:00] ## LVMCONF:     cache_dump_executable = "/usr/sbin/cache_dump"
| [ 0:00] ## LVMCONF:     cache_repair_executable = "/usr/sbin/cache_repair"
| [ 0:00] ## LVMCONF:     detect_internal_vg_cache_corruption = 1
| [ 0:00] ## LVMCONF:     fallback_to_local_locking = 0
| [ 0:00] ## LVMCONF:     fsadm_executable = "/sources/boot/LVM2.2.02.177/test/lib/fsadm"
| [ 0:00] ## LVMCONF:     library_dir = "@TESTDIR@/lib"
| [ 0:00] ## LVMCONF:     locking_dir = "@TESTDIR@/var/lock/lvm"
| [ 0:00] ## LVMCONF:     locking_type=1
| [ 0:00] ## LVMCONF:     notify_dbus = 0
| [ 0:00] ## LVMCONF:     si_unit_consistency = 1
| [ 0:00] ## LVMCONF:     thin_check_executable = "/usr/sbin/thin_check"
| [ 0:00] ## LVMCONF:     thin_dump_executable = "/usr/sbin/thin_dump"
| [ 0:00] ## LVMCONF:     thin_repair_executable = "/usr/sbin/thin_repair"
| [ 0:00] ## LVMCONF:     use_lvmetad = 0
| [ 0:00] ## LVMCONF:     use_lvmlockd = 0
| [ 0:00] ## LVMCONF:     use_lvmpolld = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: log {
| [ 0:00] ## LVMCONF:     activation = 1
| [ 0:00] ## LVMCONF:     file = "@TESTDIR@/debug.log"
| [ 0:00] ## LVMCONF:     indent = 1
| [ 0:00] ## LVMCONF:     level = 9
| [ 0:00] ## LVMCONF:     overwrite = 1
| [ 0:00] ## LVMCONF:     syslog = 0
| [ 0:00] ## LVMCONF:     verbose = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] <======== Processing test: "vgchange-partial.sh" ========>
| [ 0:00] 
| [ 0:00] aux prepare_vg 2
| [ 0:00] #vgchange-partial.sh:18+ aux prepare_vg 2
| [ 0:00] ## preparing loop device....ok (/dev/loop0)
| [ 0:00] ## preparing 2 devices...lib/utils: line 212: DM_UDEV_COOKIE: unbound variable
| [ 0:00] set +vx; STACKTRACE; set -vx
| [ 0:00] ##vgchange-partial.sh:18+ set +vx
| [ 0:00] ## - /lfskernel/sources/boot/LVM2.2.02.177/test/shell/vgchange-partial.sh:18
| [ 0:00] ## 1 STACKTRACE() called from /lfskernel/sources/boot/LVM2.2.02.177/test/shell/vgchange-partial.sh:18
| [ 0:00] <======== Info ========>
| [ 0:00] ## DMINFO:   Name             Maj Min Stat Open Targ Event  UUID                                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv2  253   3 L--w    0    1      0 TEST-@PREFIX@pv2                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv1  253   4 L--w    0    1      0 TEST-@PREFIX@pv1                                                
| [ 0:00] <======== Active table ========>
| [ 0:00] ## DMTABLE:  @PREFIX@pv2: 0 69632 linear 7:0 71680
| [ 0:00] ## DMTABLE:  @PREFIX@pv1: 0 69632 linear 7:0 2048
| [ 0:00] <======== Inactive table ========>
| [ 0:00] ## DMITABLE: @PREFIX@pv2: 
| [ 0:00] ## DMITABLE: @PREFIX@pv1: 
| [ 0:00] <======== Status ========>
| [ 0:00] ## DMSTATUS: @PREFIX@pv2: 0 69632 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv1: 0 69632 linear 
| [ 0:00] <======== Tree ========>
| [ 0:00] ## DMTREE:   @PREFIX@pv2 (253:3)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   @PREFIX@pv1 (253:4)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   LFS_vg-lfs (253:2)
| [ 0:00] ## DMTREE:    `- (8:16)
| [ 0:00] ## DMTREE:   centos-swap (253:1)
| [ 0:00] ## DMTREE:    `- (8:2)
| [ 0:00] ## DMTREE:   centos-root (253:0)
| [ 0:00] ## DMTREE:    `- (8:2)
| [ 0:00] <======== Recursive list of @TESTDIR@/dev ========>
| [ 0:00] ## LSLR:	@TESTDIR@/dev:
| [ 0:00] ## LSLR:	total 4
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 0 Feb 21 02:27 loop0
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 1 Feb 21 02:27 loop1
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 2 Feb 21 02:27 loop2
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 3 Feb 21 02:27 loop3
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 4 Feb 21 02:27 loop4
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 5 Feb 21 02:27 loop5
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 6 Feb 21 02:27 loop6
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 7 Feb 21 02:27 loop7
| [ 0:00] ## LSLR:	drwxr-xr-x 2 root root 4096 Feb 21 02:27 mapper
| [ 0:00] ## LSLR:	crw-r--r-- 1 root root 1, 3 Feb 21 02:27 testnull
| [ 0:00] ## LSLR:	
| [ 0:00] ## LSLR:	@TESTDIR@/dev/mapper:
| [ 0:00] ## LSLR:	total 0
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   4 Feb 21 02:27 @PREFIX@pv1
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   3 Feb 21 02:27 @PREFIX@pv2
| [ 0:00] ## LSLR:	crw------- 1 root root  10, 236 Feb 21 02:27 control
| [ 0:00] <======== Udev DB content ========>
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-0
| [ 0:00] ## UDEV:	N: dm-0
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-0
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-0
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=0
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-1
| [ 0:00] ## UDEV:	N: dm-1
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-1
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-1
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=1
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-2
| [ 0:00] ## UDEV:	N: dm-2
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-2
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-2
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=2
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-3
| [ 0:00] ## UDEV:	N: dm-3
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-3
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-3
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=3
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-4
| [ 0:00] ## UDEV:	N: dm-4
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-4
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-4
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=4
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/loop0
| [ 0:00] ## UDEV:	N: loop0
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/loop0
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/loop0
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=7
| [ 0:00] ## UDEV:	E: MINOR=0
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] <======== Script file "vgchange-partial.sh" ========>
| [ 0:00] ## Line: 1 	 #!/usr/bin/env bash
| [ 0:00] ## Line: 2 	 
| [ 0:00] ## Line: 3 	 # Copyright (C) 2012 Red Hat, Inc. All rights reserved.
| [ 0:00] ## Line: 4 	 #
| [ 0:00] ## Line: 5 	 # This copyrighted material is made available to anyone wishing to use,
| [ 0:00] ## Line: 6 	 # modify, copy, or redistribute it subject to the terms and conditions
| [ 0:00] ## Line: 7 	 # of the GNU General Public License v.2.
| [ 0:00] ## Line: 8 	 #
| [ 0:00] ## Line: 9 	 # You should have received a copy of the GNU General Public License
| [ 0:00] ## Line: 10 	 # along with this program; if not, write to the Free Software Foundation,
| [ 0:00] ## Line: 11 	 # Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA
| [ 0:00] ## Line: 12 	 
| [ 0:00] ## Line: 13 	 SKIP_WITH_LVMLOCKD=1
| [ 0:00] ## Line: 14 	 SKIP_WITH_LVMPOLLD=1
| [ 0:00] ## Line: 15 	 
| [ 0:00] ## Line: 16 	 . lib/inittest
| [ 0:00] ## Line: 17 	 
| [ 0:00] ## Line: 18 	 aux prepare_vg 2
| [ 0:00] ## Line: 19 	 
| [ 0:00] ## Line: 20 	 aux disable_dev "$dev1"
| [ 0:00] ## Line: 21 	 
| [ 0:00] ## Line: 22 	 #
| [ 0:00] ## Line: 23 	 # Test for allowable metadata changes
| [ 0:00] ## Line: 24 	 # addtag_ARG
| [ 0:00] ## Line: 25 	 # deltag_ARG
| [ 0:00] ## Line: 26 	 vgchange --addtag foo $vg
| [ 0:00] ## Line: 27 	 vgchange --deltag foo $vg
| [ 0:00] ## Line: 28 	 
| [ 0:00] ## Line: 29 	 #
| [ 0:00] ## Line: 30 	 # Test for disallowed metadata changes
| [ 0:00] ## Line: 31 	 #
| [ 0:00] ## Line: 32 	 # maxphysicalvolumes_ARG
| [ 0:00] ## Line: 33 	 not vgchange -p 10 $vg
| [ 0:00] ## Line: 34 	 
| [ 0:00] ## Line: 35 	 # resizeable_ARG
| [ 0:00] ## Line: 36 	 not vgchange -x n $vg
| [ 0:00] ## Line: 37 	 
| [ 0:00] ## Line: 38 	 # uuid_ARG
| [ 0:00] ## Line: 39 	 not vgchange -u $vg
| [ 0:00] ## Line: 40 	 
| [ 0:00] ## Line: 41 	 # physicalextentsize_ARG
| [ 0:00] ## Line: 42 	 not vgchange -s 2M $vg
| [ 0:00] ## Line: 43 	 
| [ 0:00] ## Line: 44 	 # clustered_ARG
| [ 0:00] ## Line: 45 	 not vgchange -c y $vg
| [ 0:00] ## Line: 46 	 
| [ 0:00] ## Line: 47 	 # alloc_ARG
| [ 0:00] ## Line: 48 	 not vgchange --alloc anywhere $vg
| [ 0:00] ## Line: 49 	 
| [ 0:00] ## Line: 50 	 # vgmetadatacopies_ARG
| [ 0:00] ## Line: 51 	 not vgchange --vgmetadatacopies 2 $vg
| [ 0:00] ## Line: 52 	 
| [ 0:00] ## Line: 53 	 #
| [ 0:00] ## Line: 54 	 # Ensure that allowed args don't cause disallowed args to get through
| [ 0:00] ## Line: 55 	 #
| [ 0:00] ## Line: 56 	 not vgchange -p 10 --addtag foo $vg
| [ 0:00] ## Line: 57 	 
| [ 0:00] ## Line: 58 	 vgremove -ff $vg
| [ 0:00] aux teardown
| [ 0:00] #vgchange-partial.sh:1+ aux teardown
| [ 0:00] ## teardown.........ok
###       failed: [ndev-vanilla] shell/vgchange-partial.sh

| [ 0:00] Library version:   1.02.146 (2017-12-18)
| [ 0:00] Driver version:    4.35.0
| [ 0:00] Kernel is Linux localhost.localdomain 3.10.0-693.11.1.el7.x86_64 #1 SMP Mon Dec 4 23:52:40 UTC 2017 x86_64 GNU/Linux
| [ 0:00] Selinux mode is not installed.
| [ 0:00]               total        used        free      shared  buff/cache   available
| [ 0:00] Mem:           7822        1075        4146          10        2601        6440
| [ 0:00] Swap:          4095           0        4095
| [ 0:00] Filesystem      Size  Used Avail Use% Mounted on
| [ 0:00] /dev/sdc1        18G  8.4G  8.4G  50% /
| [ 0:00] /dev/sdd1        51G  6.1G   43G  13% /lfskernel
| [ 0:00] devtmpfs        3.9G     0  3.9G   0% /dev
| [ 0:00] tmpfs           3.9G     0  3.9G   0% /run
| [ 0:00] @TESTDIR=/tmp/LVMTEST26569.m9OO470Vdf
| [ 0:00] @PREFIX=LVMTEST26569
| [ 0:00] ## LVMCONF: activation {
| [ 0:00] ## LVMCONF:     checks = 1
| [ 0:00] ## LVMCONF:     monitoring = 0
| [ 0:00] ## LVMCONF:     polling_interval = 1
| [ 0:00] ## LVMCONF:     raid_region_size = 512
| [ 0:00] ## LVMCONF:     retry_deactivation = 1
| [ 0:00] ## LVMCONF:     snapshot_autoextend_percent = 50
| [ 0:00] ## LVMCONF:     snapshot_autoextend_threshold = 50
| [ 0:00] ## LVMCONF:     udev_rules = 1
| [ 0:00] ## LVMCONF:     udev_sync = 1
| [ 0:00] ## LVMCONF:     verify_udev_operations = 1
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: allocation {
| [ 0:00] ## LVMCONF:     wipe_signatures_when_zeroing_new_lvs = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: backup {
| [ 0:00] ## LVMCONF:     archive = 0
| [ 0:00] ## LVMCONF:     backup = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: devices {
| [ 0:00] ## LVMCONF:     cache_dir = "@TESTDIR@/etc"
| [ 0:00] ## LVMCONF:     default_data_alignment = 1
| [ 0:00] ## LVMCONF:     dir = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     filter = "a|.*|"
| [ 0:00] ## LVMCONF:     global_filter = [ "a|@TESTDIR@/dev/mapper/@PREFIX@.*pv[0-9_]*$|", "r|.*|" ]
| [ 0:00] ## LVMCONF:     md_component_detection  = 0
| [ 0:00] ## LVMCONF:     scan = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     sysfs_scan = 1
| [ 0:00] ## LVMCONF:     write_cache_state = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: dmeventd {
| [ 0:00] ## LVMCONF:     executable = "/sources/boot/LVM2.2.02.177/test/lib/dmeventd"
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: global {
| [ 0:00] ## LVMCONF:     abort_on_internal_errors = 1
| [ 0:00] ## LVMCONF:     cache_check_executable = "/usr/sbin/cache_check"
| [ 0:00] ## LVMCONF:     cache_dump_executable = "/usr/sbin/cache_dump"
| [ 0:00] ## LVMCONF:     cache_repair_executable = "/usr/sbin/cache_repair"
| [ 0:00] ## LVMCONF:     detect_internal_vg_cache_corruption = 1
| [ 0:00] ## LVMCONF:     fallback_to_local_locking = 0
| [ 0:00] ## LVMCONF:     fsadm_executable = "/sources/boot/LVM2.2.02.177/test/lib/fsadm"
| [ 0:00] ## LVMCONF:     library_dir = "@TESTDIR@/lib"
| [ 0:00] ## LVMCONF:     locking_dir = "@TESTDIR@/var/lock/lvm"
| [ 0:00] ## LVMCONF:     locking_type=1
| [ 0:00] ## LVMCONF:     notify_dbus = 0
| [ 0:00] ## LVMCONF:     si_unit_consistency = 1
| [ 0:00] ## LVMCONF:     thin_check_executable = "/usr/sbin/thin_check"
| [ 0:00] ## LVMCONF:     thin_dump_executable = "/usr/sbin/thin_dump"
| [ 0:00] ## LVMCONF:     thin_repair_executable = "/usr/sbin/thin_repair"
| [ 0:00] ## LVMCONF:     use_lvmetad = 0
| [ 0:00] ## LVMCONF:     use_lvmlockd = 0
| [ 0:00] ## LVMCONF:     use_lvmpolld = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: log {
| [ 0:00] ## LVMCONF:     activation = 1
| [ 0:00] ## LVMCONF:     file = "@TESTDIR@/debug.log"
| [ 0:00] ## LVMCONF:     indent = 1
| [ 0:00] ## LVMCONF:     level = 9
| [ 0:00] ## LVMCONF:     overwrite = 1
| [ 0:00] ## LVMCONF:     syslog = 0
| [ 0:00] ## LVMCONF:     verbose = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] <======== Processing test: "vgchange-sysinit.sh" ========>
| [ 0:00] 
| [ 0:00] which mkfs.ext3 || skip
| [ 0:00] #vgchange-sysinit.sh:19+ which mkfs.ext3
| [ 0:00] /sbin/mkfs.ext3
| [ 0:00] 
| [ 0:00] aux prepare_pvs 2 8
| [ 0:00] #vgchange-sysinit.sh:21+ aux prepare_pvs 2 8
| [ 0:00] ## preparing loop device....ok (/dev/loop0)
| [ 0:00] ## preparing 2 devices...lib/utils: line 212: DM_UDEV_COOKIE: unbound variable
| [ 0:00] set +vx; STACKTRACE; set -vx
| [ 0:00] ##vgchange-sysinit.sh:21+ set +vx
| [ 0:00] ## - /lfskernel/sources/boot/LVM2.2.02.177/test/shell/vgchange-sysinit.sh:21
| [ 0:00] ## 1 STACKTRACE() called from /lfskernel/sources/boot/LVM2.2.02.177/test/shell/vgchange-sysinit.sh:21
| [ 0:00] <======== Info ========>
| [ 0:00] ## DMINFO:   Name             Maj Min Stat Open Targ Event  UUID                                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv2  253   4 L--w    0    1      0 TEST-@PREFIX@pv2                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv1  253   3 L--w    0    1      0 TEST-@PREFIX@pv1                                                
| [ 0:00] <======== Active table ========>
| [ 0:00] ## DMTABLE:  @PREFIX@pv2: 0 16384 linear 7:0 18432
| [ 0:00] ## DMTABLE:  @PREFIX@pv1: 0 16384 linear 7:0 2048
| [ 0:00] <======== Inactive table ========>
| [ 0:00] ## DMITABLE: @PREFIX@pv2: 
| [ 0:00] ## DMITABLE: @PREFIX@pv1: 
| [ 0:00] <======== Status ========>
| [ 0:00] ## DMSTATUS: @PREFIX@pv2: 0 16384 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv1: 0 16384 linear 
| [ 0:00] <======== Tree ========>
| [ 0:00] ## DMTREE:   @PREFIX@pv2 (253:4)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   @PREFIX@pv1 (253:3)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   LFS_vg-lfs (253:2)
| [ 0:00] ## DMTREE:    `- (8:16)
| [ 0:00] ## DMTREE:   centos-swap (253:1)
| [ 0:00] ## DMTREE:    `- (8:2)
| [ 0:00] ## DMTREE:   centos-root (253:0)
| [ 0:00] ## DMTREE:    `- (8:2)
| [ 0:00] <======== Recursive list of @TESTDIR@/dev ========>
| [ 0:00] ## LSLR:	@TESTDIR@/dev:
| [ 0:00] ## LSLR:	total 4
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 0 Feb 21 02:27 loop0
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 1 Feb 21 02:27 loop1
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 2 Feb 21 02:27 loop2
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 3 Feb 21 02:27 loop3
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 4 Feb 21 02:27 loop4
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 5 Feb 21 02:27 loop5
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 6 Feb 21 02:27 loop6
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 7 Feb 21 02:27 loop7
| [ 0:00] ## LSLR:	drwxr-xr-x 2 root root 4096 Feb 21 02:27 mapper
| [ 0:00] ## LSLR:	crw-r--r-- 1 root root 1, 3 Feb 21 02:27 testnull
| [ 0:00] ## LSLR:	
| [ 0:00] ## LSLR:	@TESTDIR@/dev/mapper:
| [ 0:00] ## LSLR:	total 0
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   3 Feb 21 02:27 @PREFIX@pv1
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   4 Feb 21 02:27 @PREFIX@pv2
| [ 0:00] ## LSLR:	crw------- 1 root root  10, 236 Feb 21 02:27 control
| [ 0:00] <======== Udev DB content ========>
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-0
| [ 0:00] ## UDEV:	N: dm-0
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-0
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-0
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=0
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-1
| [ 0:00] ## UDEV:	N: dm-1
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-1
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-1
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=1
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-2
| [ 0:00] ## UDEV:	N: dm-2
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-2
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-2
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=2
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-3
| [ 0:00] ## UDEV:	N: dm-3
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-3
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-3
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=3
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-4
| [ 0:00] ## UDEV:	N: dm-4
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-4
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-4
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=4
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/loop0
| [ 0:00] ## UDEV:	N: loop0
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/loop0
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/loop0
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=7
| [ 0:00] ## UDEV:	E: MINOR=0
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] <======== Script file "vgchange-sysinit.sh" ========>
| [ 0:00] ## Line: 1 	 #!/usr/bin/env bash
| [ 0:00] ## Line: 2 	 
| [ 0:00] ## Line: 3 	 # Copyright (C) 2011 Red Hat, Inc. All rights reserved.
| [ 0:00] ## Line: 4 	 #
| [ 0:00] ## Line: 5 	 # This copyrighted material is made available to anyone wishing to use,
| [ 0:00] ## Line: 6 	 # modify, copy, or redistribute it subject to the terms and conditions
| [ 0:00] ## Line: 7 	 # of the GNU General Public License v.2.
| [ 0:00] ## Line: 8 	 #
| [ 0:00] ## Line: 9 	 # You should have received a copy of the GNU General Public License
| [ 0:00] ## Line: 10 	 # along with this program; if not, write to the Free Software Foundation,
| [ 0:00] ## Line: 11 	 # Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA
| [ 0:00] ## Line: 12 	 
| [ 0:00] ## Line: 13 	 SKIP_WITH_LVMLOCKD=1
| [ 0:00] ## Line: 14 	 SKIP_WITH_CLVMD=1
| [ 0:00] ## Line: 15 	 SKIP_WITH_LVMPOLLD=1
| [ 0:00] ## Line: 16 	 
| [ 0:00] ## Line: 17 	 . lib/inittest
| [ 0:00] ## Line: 18 	 
| [ 0:00] ## Line: 19 	 which mkfs.ext3 || skip
| [ 0:00] ## Line: 20 	 
| [ 0:00] ## Line: 21 	 aux prepare_pvs 2 8
| [ 0:00] ## Line: 22 	 
| [ 0:00] ## Line: 23 	 var_lock="$DM_DEV_DIR/$vg1/$lv1"
| [ 0:00] ## Line: 24 	 # keep in sync with aux configured lockingdir
| [ 0:00] ## Line: 25 	 mount_dir="var/lock/lvm"
| [ 0:00] ## Line: 26 	 
| [ 0:00] ## Line: 27 	 cleanup_mounted_and_teardown()
| [ 0:00] ## Line: 28 	 {
| [ 0:00] ## Line: 29 	 	umount "$mount_dir" || true
| [ 0:00] ## Line: 30 	 	aux teardown
| [ 0:00] ## Line: 31 	 }
| [ 0:00] ## Line: 32 	 
| [ 0:00] ## Line: 33 	 vgcreate $vg1 "$dev1"
| [ 0:00] ## Line: 34 	 vgcreate $vg2 "$dev2"
| [ 0:00] ## Line: 35 	 
| [ 0:00] ## Line: 36 	 lvcreate -l 1 -n $lv2 $vg2
| [ 0:00] ## Line: 37 	 vgchange -an $vg2
| [ 0:00] ## Line: 38 	 
| [ 0:00] ## Line: 39 	 lvcreate -n $lv1 -l 100%FREE $vg1
| [ 0:00] ## Line: 40 	 mkfs.ext3 -b4096 -j "$var_lock"
| [ 0:00] ## Line: 41 	 
| [ 0:00] ## Line: 42 	 trap 'cleanup_mounted_and_teardown' EXIT
| [ 0:00] ## Line: 43 	 mount -n -r "$var_lock" "$mount_dir"
| [ 0:00] ## Line: 44 	 
| [ 0:00] ## Line: 45 	 # locking must fail on read-only filesystem
| [ 0:00] ## Line: 46 	 not vgchange -ay $vg2
| [ 0:00] ## Line: 47 	 
| [ 0:00] ## Line: 48 	 # no-locking with --sysinit
| [ 0:00] ## Line: 49 	 vgchange --sysinit -ay $vg2
| [ 0:00] ## Line: 50 	 test -b "$DM_DEV_DIR/$vg2/$lv2"
| [ 0:00] ## Line: 51 	 
| [ 0:00] ## Line: 52 	 vgchange --sysinit -an $vg2
| [ 0:00] ## Line: 53 	 test ! -b "$DM_DEV_DIR/$vg2/$lv2"
| [ 0:00] ## Line: 54 	 
| [ 0:00] ## Line: 55 	 vgchange --ignorelockingfailure -ay $vg2
| [ 0:00] ## Line: 56 	 
| [ 0:00] ## Line: 57 	 # TODO maybe also support --ignorelockingfailure ??
| [ 0:00] ## Line: 58 	 vgremove --config 'global{locking_type=0}' -ff $vg2
| [ 0:00] ## Line: 59 	 umount "$mount_dir" || true
| [ 0:00] ## Line: 60 	 vgremove -ff $vg1
| [ 0:00] aux teardown
| [ 0:00] #vgchange-sysinit.sh:1+ aux teardown
| [ 0:00] ## teardown.........ok
###       failed: [ndev-vanilla] shell/vgchange-sysinit.sh

| [ 0:00] Library version:   1.02.146 (2017-12-18)
| [ 0:00] Driver version:    4.35.0
| [ 0:00] Kernel is Linux localhost.localdomain 3.10.0-693.11.1.el7.x86_64 #1 SMP Mon Dec 4 23:52:40 UTC 2017 x86_64 GNU/Linux
| [ 0:00] Selinux mode is not installed.
| [ 0:00]               total        used        free      shared  buff/cache   available
| [ 0:00] Mem:           7822        1075        4146          10        2601        6440
| [ 0:00] Swap:          4095           0        4095
| [ 0:00] Filesystem      Size  Used Avail Use% Mounted on
| [ 0:00] /dev/sdc1        18G  8.4G  8.4G  50% /
| [ 0:00] /dev/sdd1        51G  6.1G   43G  13% /lfskernel
| [ 0:00] devtmpfs        3.9G     0  3.9G   0% /dev
| [ 0:00] tmpfs           3.9G     0  3.9G   0% /run
| [ 0:00] @TESTDIR=/tmp/LVMTEST26738.oeBGuOaNk4
| [ 0:00] @PREFIX=LVMTEST26738
| [ 0:00] ## LVMCONF: activation {
| [ 0:01] ## LVMCONF:     checks = 1
| [ 0:01] ## LVMCONF:     monitoring = 0
| [ 0:01] ## LVMCONF:     polling_interval = 1
| [ 0:01] ## LVMCONF:     raid_region_size = 512
| [ 0:01] ## LVMCONF:     retry_deactivation = 1
| [ 0:01] ## LVMCONF:     snapshot_autoextend_percent = 50
| [ 0:01] ## LVMCONF:     snapshot_autoextend_threshold = 50
| [ 0:01] ## LVMCONF:     udev_rules = 1
| [ 0:01] ## LVMCONF:     udev_sync = 1
| [ 0:01] ## LVMCONF:     verify_udev_operations = 1
| [ 0:01] ## LVMCONF: }
| [ 0:01] ## LVMCONF: allocation {
| [ 0:01] ## LVMCONF:     wipe_signatures_when_zeroing_new_lvs = 0
| [ 0:01] ## LVMCONF: }
| [ 0:01] ## LVMCONF: backup {
| [ 0:01] ## LVMCONF:     archive = 0
| [ 0:01] ## LVMCONF:     backup = 0
| [ 0:01] ## LVMCONF: }
| [ 0:01] ## LVMCONF: devices {
| [ 0:01] ## LVMCONF:     cache_dir = "@TESTDIR@/etc"
| [ 0:01] ## LVMCONF:     default_data_alignment = 1
| [ 0:01] ## LVMCONF:     dir = "@TESTDIR@/dev"
| [ 0:01] ## LVMCONF:     filter = "a|.*|"
| [ 0:01] ## LVMCONF:     global_filter = [ "a|@TESTDIR@/dev/mapper/@PREFIX@.*pv[0-9_]*$|", "r|.*|" ]
| [ 0:01] ## LVMCONF:     md_component_detection  = 0
| [ 0:01] ## LVMCONF:     scan = "@TESTDIR@/dev"
| [ 0:01] ## LVMCONF:     sysfs_scan = 1
| [ 0:01] ## LVMCONF:     write_cache_state = 0
| [ 0:01] ## LVMCONF: }
| [ 0:01] ## LVMCONF: dmeventd {
| [ 0:01] ## LVMCONF:     executable = "/sources/boot/LVM2.2.02.177/test/lib/dmeventd"
| [ 0:01] ## LVMCONF: }
| [ 0:01] ## LVMCONF: global {
| [ 0:01] ## LVMCONF:     abort_on_internal_errors = 1
| [ 0:01] ## LVMCONF:     cache_check_executable = "/usr/sbin/cache_check"
| [ 0:01] ## LVMCONF:     cache_dump_executable = "/usr/sbin/cache_dump"
| [ 0:01] ## LVMCONF:     cache_repair_executable = "/usr/sbin/cache_repair"
| [ 0:01] ## LVMCONF:     detect_internal_vg_cache_corruption = 1
| [ 0:01] ## LVMCONF:     fallback_to_local_locking = 0
| [ 0:01] ## LVMCONF:     fsadm_executable = "/sources/boot/LVM2.2.02.177/test/lib/fsadm"
| [ 0:01] ## LVMCONF:     library_dir = "@TESTDIR@/lib"
| [ 0:01] ## LVMCONF:     locking_dir = "@TESTDIR@/var/lock/lvm"
| [ 0:01] ## LVMCONF:     locking_type=1
| [ 0:01] ## LVMCONF:     notify_dbus = 0
| [ 0:01] ## LVMCONF:     si_unit_consistency = 1
| [ 0:01] ## LVMCONF:     thin_check_executable = "/usr/sbin/thin_check"
| [ 0:01] ## LVMCONF:     thin_dump_executable = "/usr/sbin/thin_dump"
| [ 0:01] ## LVMCONF:     thin_repair_executable = "/usr/sbin/thin_repair"
| [ 0:01] ## LVMCONF:     use_lvmetad = 0
| [ 0:01] ## LVMCONF:     use_lvmlockd = 0
| [ 0:01] ## LVMCONF:     use_lvmpolld = 0
| [ 0:01] ## LVMCONF: }
| [ 0:01] ## LVMCONF: log {
| [ 0:01] ## LVMCONF:     activation = 1
| [ 0:01] ## LVMCONF:     file = "@TESTDIR@/debug.log"
| [ 0:01] ## LVMCONF:     indent = 1
| [ 0:01] ## LVMCONF:     level = 9
| [ 0:01] ## LVMCONF:     overwrite = 1
| [ 0:01] ## LVMCONF:     syslog = 0
| [ 0:01] ## LVMCONF:     verbose = 0
| [ 0:01] ## LVMCONF: }
| [ 0:01] <======== Processing test: "vgchange-usage.sh" ========>
| [ 0:01] 
| [ 0:01] aux prepare_pvs 4
| [ 0:01] #vgchange-usage.sh:19+ aux prepare_pvs 4
| [ 0:01] ## preparing loop device....ok (/dev/loop0)
| [ 0:01] ## preparing 4 devices...lib/utils: line 212: DM_UDEV_COOKIE: unbound variable
| [ 0:01] set +vx; STACKTRACE; set -vx
| [ 0:01] ##vgchange-usage.sh:19+ set +vx
| [ 0:01] ## - /lfskernel/sources/boot/LVM2.2.02.177/test/shell/vgchange-usage.sh:19
| [ 0:01] ## 1 STACKTRACE() called from /lfskernel/sources/boot/LVM2.2.02.177/test/shell/vgchange-usage.sh:19
| [ 0:01] <======== Info ========>
| [ 0:01] ## DMINFO:   Name             Maj Min Stat Open Targ Event  UUID                                                                
| [ 0:01] ## DMINFO:   @PREFIX@pv4  253   5 L--w    0    1      0 TEST-@PREFIX@pv4                                                
| [ 0:01] ## DMINFO:   @PREFIX@pv3  253   4 L--w    0    1      0 TEST-@PREFIX@pv3                                                
| [ 0:01] ## DMINFO:   @PREFIX@pv2  253   3 L--w    0    1      0 TEST-@PREFIX@pv2                                                
| [ 0:01] ## DMINFO:   @PREFIX@pv1  253   6 L--w    0    1      0 TEST-@PREFIX@pv1                                                
| [ 0:01] <======== Active table ========>
| [ 0:01] ## DMTABLE:  @PREFIX@pv4: 0 69632 linear 7:0 210944
| [ 0:01] ## DMTABLE:  @PREFIX@pv3: 0 69632 linear 7:0 141312
| [ 0:01] ## DMTABLE:  @PREFIX@pv2: 0 69632 linear 7:0 71680
| [ 0:01] ## DMTABLE:  @PREFIX@pv1: 0 69632 linear 7:0 2048
| [ 0:01] <======== Inactive table ========>
| [ 0:01] ## DMITABLE: @PREFIX@pv4: 
| [ 0:01] ## DMITABLE: @PREFIX@pv3: 
| [ 0:01] ## DMITABLE: @PREFIX@pv2: 
| [ 0:01] ## DMITABLE: @PREFIX@pv1: 
| [ 0:01] <======== Status ========>
| [ 0:01] ## DMSTATUS: @PREFIX@pv4: 0 69632 linear 
| [ 0:01] ## DMSTATUS: @PREFIX@pv3: 0 69632 linear 
| [ 0:01] ## DMSTATUS: @PREFIX@pv2: 0 69632 linear 
| [ 0:01] ## DMSTATUS: @PREFIX@pv1: 0 69632 linear 
| [ 0:01] <======== Tree ========>
| [ 0:01] ## DMTREE:   @PREFIX@pv4 (253:5)
| [ 0:01] ## DMTREE:    `- (7:0)
| [ 0:01] ## DMTREE:   @PREFIX@pv3 (253:4)
| [ 0:01] ## DMTREE:    `- (7:0)
| [ 0:01] ## DMTREE:   @PREFIX@pv2 (253:3)
| [ 0:01] ## DMTREE:    `- (7:0)
| [ 0:01] ## DMTREE:   @PREFIX@pv1 (253:6)
| [ 0:01] ## DMTREE:    `- (7:0)
| [ 0:01] ## DMTREE:   LFS_vg-lfs (253:2)
| [ 0:01] ## DMTREE:    `- (8:16)
| [ 0:01] ## DMTREE:   centos-swap (253:1)
| [ 0:01] ## DMTREE:    `- (8:2)
| [ 0:01] ## DMTREE:   centos-root (253:0)
| [ 0:01] ## DMTREE:    `- (8:2)
| [ 0:01] <======== Recursive list of @TESTDIR@/dev ========>
| [ 0:01] ## LSLR:	@TESTDIR@/dev:
| [ 0:01] ## LSLR:	total 4
| [ 0:01] ## LSLR:	brw-r--r-- 1 root root 7, 0 Feb 21 02:27 loop0
| [ 0:01] ## LSLR:	brw-r--r-- 1 root root 7, 1 Feb 21 02:27 loop1
| [ 0:01] ## LSLR:	brw-r--r-- 1 root root 7, 2 Feb 21 02:27 loop2
| [ 0:01] ## LSLR:	brw-r--r-- 1 root root 7, 3 Feb 21 02:27 loop3
| [ 0:01] ## LSLR:	brw-r--r-- 1 root root 7, 4 Feb 21 02:27 loop4
| [ 0:01] ## LSLR:	brw-r--r-- 1 root root 7, 5 Feb 21 02:27 loop5
| [ 0:01] ## LSLR:	brw-r--r-- 1 root root 7, 6 Feb 21 02:27 loop6
| [ 0:01] ## LSLR:	brw-r--r-- 1 root root 7, 7 Feb 21 02:27 loop7
| [ 0:01] ## LSLR:	drwxr-xr-x 2 root root 4096 Feb 21 02:27 mapper
| [ 0:01] ## LSLR:	crw-r--r-- 1 root root 1, 3 Feb 21 02:27 testnull
| [ 0:01] ## LSLR:	
| [ 0:01] ## LSLR:	@TESTDIR@/dev/mapper:
| [ 0:01] ## LSLR:	total 0
| [ 0:01] ## LSLR:	brw------- 1 root root 253,   6 Feb 21 02:27 @PREFIX@pv1
| [ 0:01] ## LSLR:	brw------- 1 root root 253,   3 Feb 21 02:27 @PREFIX@pv2
| [ 0:01] ## LSLR:	brw------- 1 root root 253,   4 Feb 21 02:27 @PREFIX@pv3
| [ 0:01] ## LSLR:	brw------- 1 root root 253,   5 Feb 21 02:27 @PREFIX@pv4
| [ 0:01] ## LSLR:	crw------- 1 root root  10, 236 Feb 21 02:27 control
| [ 0:01] <======== Udev DB content ========>
| [ 0:01] ## UDEV:	P: /devices/virtual/block/dm-0
| [ 0:01] ## UDEV:	N: dm-0
| [ 0:01] ## UDEV:	E: DEVNAME=/dev/dm-0
| [ 0:01] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-0
| [ 0:01] ## UDEV:	E: DEVTYPE=disk
| [ 0:01] ## UDEV:	E: MAJOR=253
| [ 0:01] ## UDEV:	E: MINOR=0
| [ 0:01] ## UDEV:	E: SUBSYSTEM=block
| [ 0:01] ## UDEV:	
| [ 0:01] ## UDEV:	P: /devices/virtual/block/dm-1
| [ 0:01] ## UDEV:	N: dm-1
| [ 0:01] ## UDEV:	E: DEVNAME=/dev/dm-1
| [ 0:01] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-1
| [ 0:01] ## UDEV:	E: DEVTYPE=disk
| [ 0:01] ## UDEV:	E: MAJOR=253
| [ 0:01] ## UDEV:	E: MINOR=1
| [ 0:01] ## UDEV:	E: SUBSYSTEM=block
| [ 0:01] ## UDEV:	
| [ 0:01] ## UDEV:	P: /devices/virtual/block/dm-2
| [ 0:01] ## UDEV:	N: dm-2
| [ 0:01] ## UDEV:	E: DEVNAME=/dev/dm-2
| [ 0:01] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-2
| [ 0:01] ## UDEV:	E: DEVTYPE=disk
| [ 0:01] ## UDEV:	E: MAJOR=253
| [ 0:01] ## UDEV:	E: MINOR=2
| [ 0:01] ## UDEV:	E: SUBSYSTEM=block
| [ 0:01] ## UDEV:	
| [ 0:01] ## UDEV:	P: /devices/virtual/block/dm-3
| [ 0:01] ## UDEV:	N: dm-3
| [ 0:01] ## UDEV:	E: DEVNAME=/dev/dm-3
| [ 0:01] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-3
| [ 0:01] ## UDEV:	E: DEVTYPE=disk
| [ 0:01] ## UDEV:	E: MAJOR=253
| [ 0:01] ## UDEV:	E: MINOR=3
| [ 0:01] ## UDEV:	E: SUBSYSTEM=block
| [ 0:01] ## UDEV:	
| [ 0:01] ## UDEV:	P: /devices/virtual/block/dm-4
| [ 0:01] ## UDEV:	N: dm-4
| [ 0:01] ## UDEV:	E: DEVNAME=/dev/dm-4
| [ 0:01] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-4
| [ 0:01] ## UDEV:	E: DEVTYPE=disk
| [ 0:01] ## UDEV:	E: MAJOR=253
| [ 0:01] ## UDEV:	E: MINOR=4
| [ 0:01] ## UDEV:	E: SUBSYSTEM=block
| [ 0:01] ## UDEV:	
| [ 0:01] ## UDEV:	P: /devices/virtual/block/dm-5
| [ 0:01] ## UDEV:	N: dm-5
| [ 0:01] ## UDEV:	E: DEVNAME=/dev/dm-5
| [ 0:01] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-5
| [ 0:01] ## UDEV:	E: DEVTYPE=disk
| [ 0:01] ## UDEV:	E: MAJOR=253
| [ 0:01] ## UDEV:	E: MINOR=5
| [ 0:01] ## UDEV:	E: SUBSYSTEM=block
| [ 0:01] ## UDEV:	
| [ 0:01] ## UDEV:	P: /devices/virtual/block/dm-6
| [ 0:01] ## UDEV:	N: dm-6
| [ 0:01] ## UDEV:	E: DEVNAME=/dev/dm-6
| [ 0:01] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-6
| [ 0:01] ## UDEV:	E: DEVTYPE=disk
| [ 0:01] ## UDEV:	E: MAJOR=253
| [ 0:01] ## UDEV:	E: MINOR=6
| [ 0:01] ## UDEV:	E: SUBSYSTEM=block
| [ 0:01] ## UDEV:	
| [ 0:01] ## UDEV:	P: /devices/virtual/block/loop0
| [ 0:01] ## UDEV:	N: loop0
| [ 0:01] ## UDEV:	E: DEVNAME=/dev/loop0
| [ 0:01] ## UDEV:	E: DEVPATH=/devices/virtual/block/loop0
| [ 0:01] ## UDEV:	E: DEVTYPE=disk
| [ 0:01] ## UDEV:	E: MAJOR=7
| [ 0:01] ## UDEV:	E: MINOR=0
| [ 0:01] ## UDEV:	E: SUBSYSTEM=block
| [ 0:01] ## UDEV:	
| [ 0:01] <======== Script file "vgchange-usage.sh" ========>
| [ 0:01] ## Line: 1 	 #!/usr/bin/env bash
| [ 0:01] ## Line: 2 	 
| [ 0:01] ## Line: 3 	 # Copyright (C) 2008 Red Hat, Inc. All rights reserved.
| [ 0:01] ## Line: 4 	 #
| [ 0:01] ## Line: 5 	 # This copyrighted material is made available to anyone wishing to use,
| [ 0:01] ## Line: 6 	 # modify, copy, or redistribute it subject to the terms and conditions
| [ 0:01] ## Line: 7 	 # of the GNU General Public License v.2.
| [ 0:01] ## Line: 8 	 #
| [ 0:01] ## Line: 9 	 # You should have received a copy of the GNU General Public License
| [ 0:01] ## Line: 10 	 # along with this program; if not, write to the Free Software Foundation,
| [ 0:01] ## Line: 11 	 # Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA
| [ 0:01] ## Line: 12 	 
| [ 0:01] ## Line: 13 	 test_description='Exercise some vgchange diagnostics'
| [ 0:01] ## Line: 14 	 SKIP_WITH_LVMLOCKD=1
| [ 0:01] ## Line: 15 	 SKIP_WITH_LVMPOLLD=1
| [ 0:01] ## Line: 16 	 
| [ 0:01] ## Line: 17 	 . lib/inittest
| [ 0:01] ## Line: 18 	 
| [ 0:01] ## Line: 19 	 aux prepare_pvs 4
| [ 0:01] ## Line: 20 	 
| [ 0:01] ## Line: 21 	 pvcreate --metadatacopies 0 "$dev1"
| [ 0:01] ## Line: 22 	 vgcreate -s 4M $vg "$dev1" "$dev2" "$dev3"
| [ 0:01] ## Line: 23 	 
| [ 0:01] ## Line: 24 	 # cannot change anything in exported vg
| [ 0:01] ## Line: 25 	 vgexport $vg
| [ 0:01] ## Line: 26 	 fail vgchange -ay $vg
| [ 0:01] ## Line: 27 	 fail vgchange -p 8 $vg
| [ 0:01] ## Line: 28 	 fail vgchange -x n $vg
| [ 0:01] ## Line: 29 	 fail vgchange --addtag tag $vg
| [ 0:01] ## Line: 30 	 fail vgchange --deltag tag $vg
| [ 0:01] ## Line: 31 	 fail vgchange -s 4k $vg
| [ 0:01] ## Line: 32 	 fail vgchange --uuid $vg
| [ 0:01] ## Line: 33 	 fail vgchange --alloc anywhere $vg
| [ 0:01] ## Line: 34 	 fail vgchange -c y $vg
| [ 0:01] ## Line: 35 	 vgimport $vg
| [ 0:01] ## Line: 36 	 
| [ 0:01] ## Line: 37 	 # unsupported combinations of options...
| [ 0:01] ## Line: 38 	 invalid vgchange --ignorelockingfailure --uuid $vg
| [ 0:01] ## Line: 39 	 invalid vgchange --sysinit --alloc normal $vg
| [ 0:01] ## Line: 40 	 invalid vgchange --sysinit --poll y $vg
| [ 0:01] ## Line: 41 	 invalid vgchange -an --poll y $vg
| [ 0:01] ## Line: 42 	 invalid vgchange -an --monitor y $vg
| [ 0:01] ## Line: 43 	 invalid vgchange -ay --refresh $vg
| [ 0:01] ## Line: 44 	 
| [ 0:01] ## Line: 45 	 vgdisplay $vg
| [ 0:01] ## Line: 46 	 
| [ 0:01] ## Line: 47 	 # vgchange -p MaxPhysicalVolumes (bz202232)
| [ 0:01] ## Line: 48 	 check vg_field $vg max_pv 0
| [ 0:01] ## Line: 49 	 vgchange -p 128 $vg
| [ 0:01] ## Line: 50 	 check vg_field $vg max_pv 128
| [ 0:01] ## Line: 51 	 
| [ 0:01] ## Line: 52 	 pv_count=$(get vg_field $vg pv_count)
| [ 0:01] ## Line: 53 	 not vgchange -p 2 $vg 2>err
| [ 0:01] ## Line: 54 	 grep "MaxPhysicalVolumes is less than the current number $pv_count of PVs for" err
| [ 0:01] ## Line: 55 	 check vg_field $vg max_pv 128
| [ 0:01] ## Line: 56 	 
| [ 0:01] ## Line: 57 	 # try some numbers around MAX limit (uint32)
| [ 0:01] ## Line: 58 	 vgchange -p 4294967295 $vg
| [ 0:01] ## Line: 59 	 invalid vgchange -p 4294967296 $vg
| [ 0:01] ## Line: 60 	 invalid vgchange -p 18446744073709551615 $vg
| [ 0:01] ## Line: 61 	 invalid vgchange -p 18446744073709551616 $vg
| [ 0:01] ## Line: 62 	 check vg_field $vg max_pv 4294967295
| [ 0:01] ## Line: 63 	 
| [ 0:01] ## Line: 64 	 # vgchange -l MaxLogicalVolumes
| [ 0:01] ## Line: 65 	 check vg_field $vg max_lv 0
| [ 0:01] ## Line: 66 	 invalid vgchange -l -128 $vg
| [ 0:01] ## Line: 67 	 vgchange -l 4294967295 $vg
| [ 0:01] ## Line: 68 	 invalid vgchange -l 4294967296 $vg
| [ 0:01] ## Line: 69 	 invalid vgchange -l 18446744073709551615 $vg
| [ 0:01] ## Line: 70 	 invalid vgchange -l 18446744073709551616 $vg
| [ 0:01] ## Line: 71 	 check vg_field $vg max_lv 4294967295
| [ 0:01] ## Line: 72 	 vgchange -l 128 $vg
| [ 0:01] ## Line: 73 	 check vg_field $vg max_lv 128
| [ 0:01] ## Line: 74 	 
| [ 0:01] ## Line: 75 	 # vgchange -s
| [ 0:01] ## Line: 76 	 lvcreate -l4 -n $lv1 $vg
| [ 0:01] ## Line: 77 	 lvcreate -l4 -n $lv2 $vg
| [ 0:01] ## Line: 78 	 SIZELV2=$(get lv_field $vg/$lv2 size)
| [ 0:01] ## Line: 79 	 check lv_field $vg/$lv2 seg_size_pe "4"
| [ 0:01] ## Line: 80 	 vgchange -s 4K $vg
| [ 0:01] ## Line: 81 	 check vg_field $vg vg_extent_size "4.00k"
| [ 0:01] ## Line: 82 	 check lv_field $vg/$lv2 size "$SIZELV2"
| [ 0:01] ## Line: 83 	 check lv_field $vg/$lv2 seg_size_pe "4096"
| [ 0:01] ## Line: 84 	 
| [ 0:01] ## Line: 85 	 
| [ 0:01] ## Line: 86 	 lv_count=$(get vg_field $vg lv_count)
| [ 0:01] ## Line: 87 	 not vgchange -l 1 $vg 2>err
| [ 0:01] ## Line: 88 	 grep "MaxLogicalVolume is less than the current number $lv_count of LVs for"  err
| [ 0:01] ## Line: 89 	 check vg_field $vg max_lv 128
| [ 0:01] ## Line: 90 	 
| [ 0:01] ## Line: 91 	 # check non-resizebility
| [ 0:01] ## Line: 92 	 fail vgchange -x y $vg
| [ 0:01] ## Line: 93 	 check vg_attr_bit resizeable $vg "z"
| [ 0:01] ## Line: 94 	 vgchange -x n $vg
| [ 0:01] ## Line: 95 	 check vg_attr_bit resizeable $vg "-"
| [ 0:01] ## Line: 96 	 fail vgchange -x n $vg
| [ 0:01] ## Line: 97 	 fail vgextend $vg "$dev4"
| [ 0:01] ## Line: 98 	 vgremove -ff $vg
| [ 0:01] ## Line: 99 	 
| [ 0:01] ## Line: 100 	 # set cluster bit
| [ 0:01] ## Line: 101 	 vgcreate -cn $vg "$dev1" "$dev2" "$dev3"
| [ 0:01] ## Line: 102 	 # check prompt to change cluster bit without giving explicit vg name
| [ 0:01] ## Line: 103 	 fail vgchange -cy 2>&1 | tee out
| [ 0:01] ## Line: 104 	 grep "y/n" out
| [ 0:01] ## Line: 105 	 check vg_attr_bit cluster $vg "-"
| [ 0:01] ## Line: 106 	 
| [ 0:01] ## Line: 107 	 lvcreate -l1 -n $lv1 $vg
| [ 0:01] ## Line: 108 	 
| [ 0:01] ## Line: 109 	 # check on cluster
| [ 0:01] ## Line: 110 	 # either skipped as clustered (non-cluster), or already clustered (on cluster)
| [ 0:01] ## Line: 111 	 if test -e LOCAL_CLVMD ; then
| [ 0:01] ## Line: 112 	 	# can switch with active LV
| [ 0:01] ## Line: 113 	 	vgchange -cy $vg
| [ 0:01] ## Line: 114 	 	fail vgchange -cy $vg
| [ 0:01] ## Line: 115 	 	# check volume is active locally exclusively
| [ 0:01] ## Line: 116 	 	check lv_field $vg/$lv1 lv_active "local exclusive"
| [ 0:01] ## Line: 117 	 	check vg_attr_bit cluster $vg "c"
| [ 0:01] ## Line: 118 	 	# check we do not support conversion of just locally active LVs
| [ 0:01] ## Line: 119 	 	lvchange -an $vg
| [ 0:01] ## Line: 120 	 	lvchange -ay $vg
| [ 0:01] ## Line: 121 	 	not vgchange -cn $vg
| [ 0:01] ## Line: 122 	 	lvchange -an $vg
| [ 0:01] ## Line: 123 	 	lvchange -aey $vg
| [ 0:01] ## Line: 124 	 	vgchange -cn $vg
| [ 0:01] ## Line: 125 	 else
| [ 0:01] ## Line: 126 	 	# no clvmd is running
| [ 0:01] ## Line: 127 	 	fail vgchange -cy $vg
| [ 0:01] ## Line: 128 	 	# can't switch with active LV
| [ 0:01] ## Line: 129 	 	vgchange --yes -cy $vg
| [ 0:01] ## Line: 130 	 	fail vgchange --yes -cy $vg
| [ 0:01] ## Line: 131 	 	fail vgs $vg 2>&1 | tee out
| [ 0:01] ## Line: 132 	 	grep "Skipping clustered volume group" out
| [ 0:01] ## Line: 133 	 	vgs --ignoreskippedcluster $vg 2>&1 | tee out
| [ 0:01] ## Line: 134 	 	not grep "Skipping clustered volume group" out
| [ 0:01] ## Line: 135 	 	# reset back to non-clustered VG with disabled locking
| [ 0:01] ## Line: 136 	 	vgchange -cn $vg --config 'global{locking_type=0}' $vg
| [ 0:01] ## Line: 137 	 fi
| [ 0:01] ## Line: 138 	 check vg_attr_bit cluster $vg "-"
| [ 0:01] ## Line: 139 	 
| [ 0:01] ## Line: 140 	 vgremove -ff $vg
| [ 0:01] aux teardown
| [ 0:01] #vgchange-usage.sh:1+ aux teardown
| [ 0:01] ## teardown.........ok
###       failed: [ndev-vanilla] shell/vgchange-usage.sh

| [ 0:00] Library version:   1.02.146 (2017-12-18)
| [ 0:00] Driver version:    4.35.0
| [ 0:00] Kernel is Linux localhost.localdomain 3.10.0-693.11.1.el7.x86_64 #1 SMP Mon Dec 4 23:52:40 UTC 2017 x86_64 GNU/Linux
| [ 0:00] Selinux mode is not installed.
| [ 0:00]               total        used        free      shared  buff/cache   available
| [ 0:00] Mem:           7822        1075        4145          10        2601        6440
| [ 0:00] Swap:          4095           0        4095
| [ 0:00] Filesystem      Size  Used Avail Use% Mounted on
| [ 0:00] /dev/sdc1        18G  8.4G  8.4G  50% /
| [ 0:00] /dev/sdd1        51G  6.1G   43G  13% /lfskernel
| [ 0:00] devtmpfs        3.9G     0  3.9G   0% /dev
| [ 0:00] tmpfs           3.9G     0  3.9G   0% /run
| [ 0:00] @TESTDIR=/tmp/LVMTEST26931.X0bAkwXuad
| [ 0:00] @PREFIX=LVMTEST26931
| [ 0:00] ## LVMCONF: activation {
| [ 0:00] ## LVMCONF:     checks = 1
| [ 0:00] ## LVMCONF:     monitoring = 0
| [ 0:00] ## LVMCONF:     polling_interval = 1
| [ 0:00] ## LVMCONF:     raid_region_size = 512
| [ 0:00] ## LVMCONF:     retry_deactivation = 1
| [ 0:00] ## LVMCONF:     snapshot_autoextend_percent = 50
| [ 0:00] ## LVMCONF:     snapshot_autoextend_threshold = 50
| [ 0:00] ## LVMCONF:     udev_rules = 1
| [ 0:00] ## LVMCONF:     udev_sync = 1
| [ 0:00] ## LVMCONF:     verify_udev_operations = 1
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: allocation {
| [ 0:00] ## LVMCONF:     wipe_signatures_when_zeroing_new_lvs = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: backup {
| [ 0:00] ## LVMCONF:     archive = 0
| [ 0:00] ## LVMCONF:     backup = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: devices {
| [ 0:00] ## LVMCONF:     cache_dir = "@TESTDIR@/etc"
| [ 0:00] ## LVMCONF:     default_data_alignment = 1
| [ 0:00] ## LVMCONF:     dir = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     filter = "a|.*|"
| [ 0:00] ## LVMCONF:     global_filter = [ "a|@TESTDIR@/dev/mapper/@PREFIX@.*pv[0-9_]*$|", "r|.*|" ]
| [ 0:00] ## LVMCONF:     md_component_detection  = 0
| [ 0:00] ## LVMCONF:     scan = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     sysfs_scan = 1
| [ 0:00] ## LVMCONF:     write_cache_state = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: dmeventd {
| [ 0:00] ## LVMCONF:     executable = "/sources/boot/LVM2.2.02.177/test/lib/dmeventd"
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: global {
| [ 0:00] ## LVMCONF:     abort_on_internal_errors = 1
| [ 0:00] ## LVMCONF:     cache_check_executable = "/usr/sbin/cache_check"
| [ 0:00] ## LVMCONF:     cache_dump_executable = "/usr/sbin/cache_dump"
| [ 0:00] ## LVMCONF:     cache_repair_executable = "/usr/sbin/cache_repair"
| [ 0:00] ## LVMCONF:     detect_internal_vg_cache_corruption = 1
| [ 0:00] ## LVMCONF:     fallback_to_local_locking = 0
| [ 0:00] ## LVMCONF:     fsadm_executable = "/sources/boot/LVM2.2.02.177/test/lib/fsadm"
| [ 0:00] ## LVMCONF:     library_dir = "@TESTDIR@/lib"
| [ 0:00] ## LVMCONF:     locking_dir = "@TESTDIR@/var/lock/lvm"
| [ 0:00] ## LVMCONF:     locking_type=1
| [ 0:00] ## LVMCONF:     notify_dbus = 0
| [ 0:00] ## LVMCONF:     si_unit_consistency = 1
| [ 0:00] ## LVMCONF:     thin_check_executable = "/usr/sbin/thin_check"
| [ 0:00] ## LVMCONF:     thin_dump_executable = "/usr/sbin/thin_dump"
| [ 0:00] ## LVMCONF:     thin_repair_executable = "/usr/sbin/thin_repair"
| [ 0:00] ## LVMCONF:     use_lvmetad = 0
| [ 0:00] ## LVMCONF:     use_lvmlockd = 0
| [ 0:00] ## LVMCONF:     use_lvmpolld = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: log {
| [ 0:00] ## LVMCONF:     activation = 1
| [ 0:00] ## LVMCONF:     file = "@TESTDIR@/debug.log"
| [ 0:00] ## LVMCONF:     indent = 1
| [ 0:00] ## LVMCONF:     level = 9
| [ 0:00] ## LVMCONF:     overwrite = 1
| [ 0:00] ## LVMCONF:     syslog = 0
| [ 0:00] ## LVMCONF:     verbose = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] <======== Processing test: "vgck.sh" ========>
| [ 0:00] 
| [ 0:00] aux prepare_vg 3
| [ 0:00] #vgck.sh:18+ aux prepare_vg 3
| [ 0:00] ## preparing loop device....ok (/dev/loop0)
| [ 0:00] ## preparing 3 devices...lib/utils: line 212: DM_UDEV_COOKIE: unbound variable
| [ 0:00] set +vx; STACKTRACE; set -vx
| [ 0:00] ##vgck.sh:18+ set +vx
| [ 0:00] ## - /lfskernel/sources/boot/LVM2.2.02.177/test/shell/vgck.sh:18
| [ 0:00] ## 1 STACKTRACE() called from /lfskernel/sources/boot/LVM2.2.02.177/test/shell/vgck.sh:18
| [ 0:00] <======== Info ========>
| [ 0:00] ## DMINFO:   Name             Maj Min Stat Open Targ Event  UUID                                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv3  253   4 L--w    0    1      0 TEST-@PREFIX@pv3                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv2  253   3 L--w    0    1      0 TEST-@PREFIX@pv2                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv1  253   5 L--w    0    1      0 TEST-@PREFIX@pv1                                                
| [ 0:00] <======== Active table ========>
| [ 0:00] ## DMTABLE:  @PREFIX@pv3: 0 69632 linear 7:0 141312
| [ 0:00] ## DMTABLE:  @PREFIX@pv2: 0 69632 linear 7:0 71680
| [ 0:00] ## DMTABLE:  @PREFIX@pv1: 0 69632 linear 7:0 2048
| [ 0:00] <======== Inactive table ========>
| [ 0:00] ## DMITABLE: @PREFIX@pv3: 
| [ 0:00] ## DMITABLE: @PREFIX@pv2: 
| [ 0:00] ## DMITABLE: @PREFIX@pv1: 
| [ 0:00] <======== Status ========>
| [ 0:00] ## DMSTATUS: @PREFIX@pv3: 0 69632 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv2: 0 69632 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv1: 0 69632 linear 
| [ 0:00] <======== Tree ========>
| [ 0:00] ## DMTREE:   @PREFIX@pv3 (253:4)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   @PREFIX@pv2 (253:3)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   @PREFIX@pv1 (253:5)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   LFS_vg-lfs (253:2)
| [ 0:00] ## DMTREE:    `- (8:16)
| [ 0:00] ## DMTREE:   centos-swap (253:1)
| [ 0:00] ## DMTREE:    `- (8:2)
| [ 0:00] ## DMTREE:   centos-root (253:0)
| [ 0:00] ## DMTREE:    `- (8:2)
| [ 0:00] <======== Recursive list of @TESTDIR@/dev ========>
| [ 0:00] ## LSLR:	@TESTDIR@/dev:
| [ 0:00] ## LSLR:	total 4
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 0 Feb 21 02:27 loop0
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 1 Feb 21 02:27 loop1
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 2 Feb 21 02:27 loop2
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 3 Feb 21 02:27 loop3
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 4 Feb 21 02:27 loop4
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 5 Feb 21 02:27 loop5
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 6 Feb 21 02:27 loop6
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 7 Feb 21 02:27 loop7
| [ 0:00] ## LSLR:	drwxr-xr-x 2 root root 4096 Feb 21 02:27 mapper
| [ 0:00] ## LSLR:	crw-r--r-- 1 root root 1, 3 Feb 21 02:27 testnull
| [ 0:00] ## LSLR:	
| [ 0:00] ## LSLR:	@TESTDIR@/dev/mapper:
| [ 0:00] ## LSLR:	total 0
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   5 Feb 21 02:27 @PREFIX@pv1
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   3 Feb 21 02:27 @PREFIX@pv2
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   4 Feb 21 02:27 @PREFIX@pv3
| [ 0:00] ## LSLR:	crw------- 1 root root  10, 236 Feb 21 02:27 control
| [ 0:00] <======== Udev DB content ========>
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-0
| [ 0:00] ## UDEV:	N: dm-0
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-0
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-0
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=0
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-1
| [ 0:00] ## UDEV:	N: dm-1
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-1
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-1
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=1
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-2
| [ 0:00] ## UDEV:	N: dm-2
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-2
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-2
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=2
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-3
| [ 0:00] ## UDEV:	N: dm-3
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-3
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-3
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=3
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-4
| [ 0:00] ## UDEV:	N: dm-4
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-4
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-4
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=4
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-5
| [ 0:00] ## UDEV:	N: dm-5
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-5
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-5
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=5
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/loop0
| [ 0:00] ## UDEV:	N: loop0
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/loop0
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/loop0
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=7
| [ 0:00] ## UDEV:	E: MINOR=0
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] <======== Script file "vgck.sh" ========>
| [ 0:00] ## Line: 1 	 #!/usr/bin/env bash
| [ 0:00] ## Line: 2 	 
| [ 0:00] ## Line: 3 	 # Copyright (C) 2013 Red Hat, Inc. All rights reserved.
| [ 0:00] ## Line: 4 	 #
| [ 0:00] ## Line: 5 	 # This copyrighted material is made available to anyone wishing to use,
| [ 0:00] ## Line: 6 	 # modify, copy, or redistribute it subject to the terms and conditions
| [ 0:00] ## Line: 7 	 # of the GNU General Public License v.2.
| [ 0:00] ## Line: 8 	 #
| [ 0:00] ## Line: 9 	 # You should have received a copy of the GNU General Public License
| [ 0:00] ## Line: 10 	 # along with this program; if not, write to the Free Software Foundation,
| [ 0:00] ## Line: 11 	 # Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA
| [ 0:00] ## Line: 12 	 
| [ 0:00] ## Line: 13 	 SKIP_WITH_LVMLOCKD=1
| [ 0:00] ## Line: 14 	 SKIP_WITH_LVMPOLLD=1
| [ 0:00] ## Line: 15 	 
| [ 0:00] ## Line: 16 	 . lib/inittest
| [ 0:00] ## Line: 17 	 
| [ 0:00] ## Line: 18 	 aux prepare_vg 3
| [ 0:00] ## Line: 19 	 lvcreate -n blabla -L 1 $vg
| [ 0:00] ## Line: 20 	 
| [ 0:00] ## Line: 21 	 dd if=/dev/urandom bs=512 seek=2 count=32 of="$dev2"
| [ 0:00] ## Line: 22 	 
| [ 0:00] ## Line: 23 	 # TODO: aux lvmconf "global/locking_type = 4"
| [ 0:00] ## Line: 24 	 
| [ 0:00] ## Line: 25 	 vgscan 2>&1 | tee vgscan.out
| [ 0:00] ## Line: 26 	 
| [ 0:00] ## Line: 27 	 if test -e LOCAL_LVMETAD; then
| [ 0:00] ## Line: 28 	     not grep "Inconsistent metadata found for VG $vg" vgscan.out
| [ 0:00] ## Line: 29 	 else
| [ 0:00] ## Line: 30 	     grep "Inconsistent metadata found for VG $vg" vgscan.out
| [ 0:00] ## Line: 31 	 fi
| [ 0:00] ## Line: 32 	 
| [ 0:00] ## Line: 33 	 dd if=/dev/urandom bs=512 seek=2 count=32 of="$dev2"
| [ 0:00] ## Line: 34 	 aux notify_lvmetad "$dev2"
| [ 0:00] ## Line: 35 	 
| [ 0:00] ## Line: 36 	 vgck $vg 2>&1 | tee vgck.out
| [ 0:00] ## Line: 37 	 grep Incorrect vgck.out
| [ 0:00] ## Line: 38 	 
| [ 0:00] ## Line: 39 	 vgremove -ff $vg
| [ 0:00] aux teardown
| [ 0:00] #vgck.sh:1+ aux teardown
| [ 0:00] ## teardown.........ok
###       failed: [ndev-vanilla] shell/vgck.sh

| [ 0:00] Library version:   1.02.146 (2017-12-18)
| [ 0:00] Driver version:    4.35.0
| [ 0:00] Kernel is Linux localhost.localdomain 3.10.0-693.11.1.el7.x86_64 #1 SMP Mon Dec 4 23:52:40 UTC 2017 x86_64 GNU/Linux
| [ 0:00] Selinux mode is not installed.
| [ 0:00]               total        used        free      shared  buff/cache   available
| [ 0:00] Mem:           7822        1075        4145          10        2601        6440
| [ 0:00] Swap:          4095           0        4095
| [ 0:00] Filesystem      Size  Used Avail Use% Mounted on
| [ 0:00] /dev/sdc1        18G  8.4G  8.4G  50% /
| [ 0:00] /dev/sdd1        51G  6.1G   43G  13% /lfskernel
| [ 0:00] devtmpfs        3.9G     0  3.9G   0% /dev
| [ 0:00] tmpfs           3.9G     0  3.9G   0% /run
| [ 0:00] @TESTDIR=/tmp/LVMTEST27121.s9LJE7nurK
| [ 0:00] @PREFIX=LVMTEST27121
| [ 0:00] ## LVMCONF: activation {
| [ 0:00] ## LVMCONF:     checks = 1
| [ 0:00] ## LVMCONF:     monitoring = 0
| [ 0:00] ## LVMCONF:     polling_interval = 1
| [ 0:00] ## LVMCONF:     raid_region_size = 512
| [ 0:00] ## LVMCONF:     retry_deactivation = 1
| [ 0:00] ## LVMCONF:     snapshot_autoextend_percent = 50
| [ 0:00] ## LVMCONF:     snapshot_autoextend_threshold = 50
| [ 0:00] ## LVMCONF:     udev_rules = 1
| [ 0:00] ## LVMCONF:     udev_sync = 1
| [ 0:00] ## LVMCONF:     verify_udev_operations = 1
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: allocation {
| [ 0:00] ## LVMCONF:     wipe_signatures_when_zeroing_new_lvs = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: backup {
| [ 0:00] ## LVMCONF:     archive = 0
| [ 0:00] ## LVMCONF:     backup = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: devices {
| [ 0:00] ## LVMCONF:     cache_dir = "@TESTDIR@/etc"
| [ 0:00] ## LVMCONF:     default_data_alignment = 1
| [ 0:00] ## LVMCONF:     dir = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     filter = "a|.*|"
| [ 0:00] ## LVMCONF:     global_filter = [ "a|@TESTDIR@/dev/mapper/@PREFIX@.*pv[0-9_]*$|", "r|.*|" ]
| [ 0:00] ## LVMCONF:     md_component_detection  = 0
| [ 0:00] ## LVMCONF:     scan = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     sysfs_scan = 1
| [ 0:00] ## LVMCONF:     write_cache_state = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: dmeventd {
| [ 0:00] ## LVMCONF:     executable = "/sources/boot/LVM2.2.02.177/test/lib/dmeventd"
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: global {
| [ 0:00] ## LVMCONF:     abort_on_internal_errors = 1
| [ 0:00] ## LVMCONF:     cache_check_executable = "/usr/sbin/cache_check"
| [ 0:00] ## LVMCONF:     cache_dump_executable = "/usr/sbin/cache_dump"
| [ 0:00] ## LVMCONF:     cache_repair_executable = "/usr/sbin/cache_repair"
| [ 0:00] ## LVMCONF:     detect_internal_vg_cache_corruption = 1
| [ 0:00] ## LVMCONF:     fallback_to_local_locking = 0
| [ 0:00] ## LVMCONF:     fsadm_executable = "/sources/boot/LVM2.2.02.177/test/lib/fsadm"
| [ 0:00] ## LVMCONF:     library_dir = "@TESTDIR@/lib"
| [ 0:00] ## LVMCONF:     locking_dir = "@TESTDIR@/var/lock/lvm"
| [ 0:00] ## LVMCONF:     locking_type=1
| [ 0:00] ## LVMCONF:     notify_dbus = 0
| [ 0:00] ## LVMCONF:     si_unit_consistency = 1
| [ 0:00] ## LVMCONF:     thin_check_executable = "/usr/sbin/thin_check"
| [ 0:00] ## LVMCONF:     thin_dump_executable = "/usr/sbin/thin_dump"
| [ 0:00] ## LVMCONF:     thin_repair_executable = "/usr/sbin/thin_repair"
| [ 0:00] ## LVMCONF:     use_lvmetad = 0
| [ 0:00] ## LVMCONF:     use_lvmlockd = 0
| [ 0:00] ## LVMCONF:     use_lvmpolld = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: log {
| [ 0:00] ## LVMCONF:     activation = 1
| [ 0:00] ## LVMCONF:     file = "@TESTDIR@/debug.log"
| [ 0:00] ## LVMCONF:     indent = 1
| [ 0:00] ## LVMCONF:     level = 9
| [ 0:00] ## LVMCONF:     overwrite = 1
| [ 0:00] ## LVMCONF:     syslog = 0
| [ 0:00] ## LVMCONF:     verbose = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] <======== Processing test: "vgcreate-many-pvs.sh" ========>
| [ 0:00] 
| [ 0:00] #
| [ 0:00] # Test to exercise larger number of PVs in a VG
| [ 0:00] # Related to https://bugzilla.redhat.com/show_bug.cgi?id=736027
| [ 0:00] # 
| [ 0:00] # Original measured times of the whole test case before 
| [ 0:00] # and with the acceleration patch from my bare metal hw
| [ 0:00] # (Lenovo T61, 2.2GHz, 4G RAM, rawhide 2015-03-06 with ndebug kernel):
| [ 0:00] #
| [ 0:00] # export LVM_TEST_PVS=300
| [ 0:00] #
| [ 0:00] # make check_local   ~52sec  (U:29s, S:13s)
| [ 0:00] # make check_lvmetad ~20sec  (U: 4s, S: 5s)
| [ 0:00] #
| [ 0:00] # With patch from 2015-03-06:
| [ 0:00] #
| [ 0:00] # make check_local   ~30sec  (U:10s, S:12s)
| [ 0:00] # make check_lvmetad ~20sec  (U: 4s, S: 5s)
| [ 0:00] #
| [ 0:00] 
| [ 0:00] # TODO: extend test suite to monitor performance and report regressions...
| [ 0:00] 
| [ 0:00] # Use just 100 to get 'decent' speed on slow boxes
| [ 0:00] LVM_TEST_PVS=${LVM_TEST_PVS:-100}
| [ 0:00] #vgcreate-many-pvs.sh:40+ LVM_TEST_PVS=100
| [ 0:00] 
| [ 0:00] #aux prepare_devs $LVM_TEST_PVS 8
| [ 0:00] #vgcreate $vg $(< DEVICES)
| [ 0:00] 
| [ 0:00] # prepare_vg is now directly using steps above
| [ 0:00] aux prepare_vg $LVM_TEST_PVS
| [ 0:00] #vgcreate-many-pvs.sh:46+ aux prepare_vg 100
| [ 0:00] ## preparing loop device....ok (/dev/loop0)
| [ 0:00] ## preparing 100 devices...lib/utils: line 212: DM_UDEV_COOKIE: unbound variable
| [ 0:01] set +vx; STACKTRACE; set -vx
| [ 0:01] ##vgcreate-many-pvs.sh:46+ set +vx
| [ 0:01] ## - /lfskernel/sources/boot/LVM2.2.02.177/test/shell/vgcreate-many-pvs.sh:46
| [ 0:01] ## 1 STACKTRACE() called from /lfskernel/sources/boot/LVM2.2.02.177/test/shell/vgcreate-many-pvs.sh:46
| [ 0:01] <======== Info ========>
| [ 0:01] ## DMINFO:   Name              Maj Min Stat Open Targ Event  UUID                                                                
| [ 0:01] ## DMINFO:   @PREFIX@pv59  253  97 L--w    0    1      0 TEST-@PREFIX@pv59                                               
| [ 0:01] ## DMINFO:   @PREFIX@pv44  253   7 L--w    0    1      0 TEST-@PREFIX@pv44                                               
| [ 0:01] ## DMINFO:   @PREFIX@pv61  253  76 L--w    0    1      0 TEST-@PREFIX@pv61                                               
| [ 0:01] ## DMINFO:   @PREFIX@pv76  253  68 L--w    0    1      0 TEST-@PREFIX@pv76                                               
| [ 0:01] ## DMINFO:   @PREFIX@pv93  253  73 L--w    0    1      0 TEST-@PREFIX@pv93                                               
| [ 0:01] ## DMINFO:   @PREFIX@pv6   253  23 L--w    0    1      0 TEST-@PREFIX@pv6                                                
| [ 0:01] ## DMINFO:   @PREFIX@pv26  253  15 L--w    0    1      0 TEST-@PREFIX@pv26                                               
| [ 0:01] ## DMINFO:   @PREFIX@pv11  253  20 L--w    0    1      0 TEST-@PREFIX@pv11                                               
| [ 0:01] ## DMINFO:   @PREFIX@pv58  253  83 L--w    0    1      0 TEST-@PREFIX@pv58                                               
| [ 0:01] ## DMINFO:   @PREFIX@pv43  253   4 L--w    0    1      0 TEST-@PREFIX@pv43                                               
| [ 0:01] ## DMINFO:   @PREFIX@pv60  253  84 L--w    0    1      0 TEST-@PREFIX@pv60                                               
| [ 0:01] ## DMINFO:   @PREFIX@pv75  253  81 L--w    0    1      0 TEST-@PREFIX@pv75                                               
| [ 0:01] ## DMINFO:   @PREFIX@pv92  253  91 L--w    0    1      0 TEST-@PREFIX@pv92                                               
| [ 0:01] ## DMINFO:   @PREFIX@pv5   253  39 L--w    0    1      0 TEST-@PREFIX@pv5                                                
| [ 0:01] ## DMINFO:   @PREFIX@pv25  253  14 L--w    0    1      0 TEST-@PREFIX@pv25                                               
| [ 0:01] ## DMINFO:   @PREFIX@pv10  253  29 L--w    0    1      0 TEST-@PREFIX@pv10                                               
| [ 0:01] ## DMINFO:   @PREFIX@pv57  253  61 L--w    0    1      0 TEST-@PREFIX@pv57                                               
| [ 0:01] ## DMINFO:   @PREFIX@pv42  253  38 L--w    0    1      0 TEST-@PREFIX@pv42                                               
| [ 0:01] ## DMINFO:   @PREFIX@pv89  253  87 L--w    0    1      0 TEST-@PREFIX@pv89                                               
| [ 0:01] ## DMINFO:   @PREFIX@pv74  253  67 L--w    0    1      0 TEST-@PREFIX@pv74                                               
| [ 0:01] ## DMINFO:   @PREFIX@pv91  253  60 L--w    0    1      0 TEST-@PREFIX@pv91                                               
| [ 0:01] ## DMINFO:   @PREFIX@pv4   253  26 L--w    0    1      0 TEST-@PREFIX@pv4                                                
| [ 0:01] ## DMINFO:   @PREFIX@pv39  253  37 L--w    0    1      0 TEST-@PREFIX@pv39                                               
| [ 0:01] ## DMINFO:   @PREFIX@pv24  253  21 L--w    0    1      0 TEST-@PREFIX@pv24                                               
| [ 0:01] ## DMINFO:   @PREFIX@pv56  253  69 L--w    0    1      0 TEST-@PREFIX@pv56                                               
| [ 0:01] ## DMINFO:   @PREFIX@pv41  253   3 L--w    0    1      0 TEST-@PREFIX@pv41                                               
| [ 0:01] ## DMINFO:   @PREFIX@pv88  253  71 L--w    0    1      0 TEST-@PREFIX@pv88                                               
| [ 0:01] ## DMINFO:   @PREFIX@pv73  253  79 L--w    0    1      0 TEST-@PREFIX@pv73                                               
| [ 0:01] ## DMINFO:   @PREFIX@pv90  253  72 L--w    0    1      0 TEST-@PREFIX@pv90                                               
| [ 0:01] ## DMINFO:   @PREFIX@pv3   253  25 L--w    0    1      0 TEST-@PREFIX@pv3                                                
| [ 0:01] ## DMINFO:   @PREFIX@pv38  253   6 L--w    0    1      0 TEST-@PREFIX@pv38                                               
| [ 0:01] ## DMINFO:   @PREFIX@pv23  253  33 L--w    0    1      0 TEST-@PREFIX@pv23                                               
| [ 0:01] ## DMINFO:   @PREFIX@pv55  253  96 L--w    0    1      0 TEST-@PREFIX@pv55                                               
| [ 0:01] ## DMINFO:   @PREFIX@pv40  253  18 L--w    0    1      0 TEST-@PREFIX@pv40                                               
| [ 0:01] ## DMINFO:   @PREFIX@pv72  253  59 L--w    0    1      0 TEST-@PREFIX@pv72                                               
| [ 0:01] ## DMINFO:   @PREFIX@pv87  253  95 L--w    0    1      0 TEST-@PREFIX@pv87                                               
| [ 0:01] ## DMINFO:   @PREFIX@pv2   253  41 L--w    0    1      0 TEST-@PREFIX@pv2                                                
| [ 0:01] ## DMINFO:   @PREFIX@pv22  253  13 L--w    0    1      0 TEST-@PREFIX@pv22                                               
| [ 0:01] ## DMINFO:   @PREFIX@pv37  253  45 L--w    0    1      0 TEST-@PREFIX@pv37                                               
| [ 0:01] ## DMINFO:   @PREFIX@pv69  253  92 L--w    0    1      0 TEST-@PREFIX@pv69                                               
| [ 0:01] ## DMINFO:   @PREFIX@pv54  253  75 L--w    0    1      0 TEST-@PREFIX@pv54                                               
| [ 0:01] ## DMINFO:   @PREFIX@pv71  253  78 L--w    0    1      0 TEST-@PREFIX@pv71                                               
| [ 0:01] ## DMINFO:   @PREFIX@pv86  253  94 L--w    0    1      0 TEST-@PREFIX@pv86                                               
| [ 0:01] ## DMINFO:   @PREFIX@pv1   253  47 L--w    0    1      0 TEST-@PREFIX@pv1                                                
| [ 0:01] ## DMINFO:   @PREFIX@pv19  253  12 L--w    0    1      0 TEST-@PREFIX@pv19                                               
| [ 0:01] ## DMINFO:   @PREFIX@pv21  253  48 L--w    0    1      0 TEST-@PREFIX@pv21                                               
| [ 0:01] ## DMINFO:   @PREFIX@pv36  253  17 L--w    0    1      0 TEST-@PREFIX@pv36                                               
| [ 0:01] ## DMINFO:   @PREFIX@pv68  253  64 L--w    0    1      0 TEST-@PREFIX@pv68                                               
| [ 0:01] ## DMINFO:   @PREFIX@pv53  253  82 L--w    0    1      0 TEST-@PREFIX@pv53                                               
| [ 0:01] ## DMINFO:   @PREFIX@pv85  253  99 L--w    0    1      0 TEST-@PREFIX@pv85                                               
| [ 0:01] ## DMINFO:   @PREFIX@pv70  253  77 L--w    0    1      0 TEST-@PREFIX@pv70                                               
| [ 0:01] ## DMINFO:   @PREFIX@pv18  253  31 L--w    0    1      0 TEST-@PREFIX@pv18                                               
| [ 0:01] ## DMINFO:   @PREFIX@pv35  253  43 L--w    0    1      0 TEST-@PREFIX@pv35                                               
| [ 0:01] ## DMINFO:   @PREFIX@pv20  253  32 L--w    0    1      0 TEST-@PREFIX@pv20                                               
| [ 0:01] ## DMINFO:   @PREFIX@pv100 253 102 L--w    0    1      0 TEST-@PREFIX@pv100                                              
| [ 0:01] ## DMINFO:   @PREFIX@pv67  253  89 L--w    0    1      0 TEST-@PREFIX@pv67                                               
| [ 0:01] ## DMINFO:   @PREFIX@pv52  253  74 L--w    0    1      0 TEST-@PREFIX@pv52                                               
| [ 0:01] ## DMINFO:   @PREFIX@pv99  253 101 L--w    0    1      0 TEST-@PREFIX@pv99                                               
| [ 0:01] ## DMINFO:   @PREFIX@pv84  253  63 L--w    0    1      0 TEST-@PREFIX@pv84                                               
| [ 0:01] ## DMINFO:   @PREFIX@pv17  253  11 L--w    0    1      0 TEST-@PREFIX@pv17                                               
| [ 0:01] ## DMINFO:   @PREFIX@pv49  253  51 L--w    0    1      0 TEST-@PREFIX@pv49                                               
| [ 0:01] ## DMINFO:   @PREFIX@pv34  253  16 L--w    0    1      0 TEST-@PREFIX@pv34                                               
| [ 0:01] ## DMINFO:   @PREFIX@pv51  253  93 L--w    0    1      0 TEST-@PREFIX@pv51                                               
| [ 0:01] ## DMINFO:   @PREFIX@pv66  253  56 L--w    0    1      0 TEST-@PREFIX@pv66                                               
| [ 0:01] ## DMINFO:   @PREFIX@pv98  253 100 L--w    0    1      0 TEST-@PREFIX@pv98                                               
| [ 0:01] ## DMINFO:   @PREFIX@pv83  253  70 L--w    0    1      0 TEST-@PREFIX@pv83                                               
| [ 0:01] ## DMINFO:   @PREFIX@pv16  253  10 L--w    0    1      0 TEST-@PREFIX@pv16                                               
| [ 0:01] ## DMINFO:   @PREFIX@pv48  253  50 L--w    0    1      0 TEST-@PREFIX@pv48                                               
| [ 0:01] ## DMINFO:   @PREFIX@pv33  253  22 L--w    0    1      0 TEST-@PREFIX@pv33                                               
| [ 0:01] ## DMINFO:   @PREFIX@pv65  253  66 L--w    0    1      0 TEST-@PREFIX@pv65                                               
| [ 0:01] ## DMINFO:   @PREFIX@pv50  253  52 L--w    0    1      0 TEST-@PREFIX@pv50                                               
| [ 0:01] ## DMINFO:   @PREFIX@pv97  253  54 L--w    0    1      0 TEST-@PREFIX@pv97                                               
| [ 0:01] ## DMINFO:   @PREFIX@pv82  253  53 L--w    0    1      0 TEST-@PREFIX@pv82                                               
| [ 0:01] ## DMINFO:   @PREFIX@pv15  253  19 L--w    0    1      0 TEST-@PREFIX@pv15                                               
| [ 0:01] ## DMINFO:   @PREFIX@pv47  253  49 L--w    0    1      0 TEST-@PREFIX@pv47                                               
| [ 0:01] ## DMINFO:   @PREFIX@pv32  253  42 L--w    0    1      0 TEST-@PREFIX@pv32                                               
| [ 0:01] ## DMINFO:   @PREFIX@pv64  253  85 L--w    0    1      0 TEST-@PREFIX@pv64                                               
| [ 0:01] ## DMINFO:   @PREFIX@pv79  253  86 L--w    0    1      0 TEST-@PREFIX@pv79                                               
| [ 0:01] ## DMINFO:   @PREFIX@pv96  253  98 L--w    0    1      0 TEST-@PREFIX@pv96                                               
| [ 0:01] ## DMINFO:   @PREFIX@pv81  253  58 L--w    0    1      0 TEST-@PREFIX@pv81                                               
| [ 0:01] ## DMINFO:   @PREFIX@pv9   253  28 L--w    0    1      0 TEST-@PREFIX@pv9                                                
| [ 0:01] ## DMINFO:   @PREFIX@pv29  253  35 L--w    0    1      0 TEST-@PREFIX@pv29                                               
| [ 0:01] ## DMINFO:   @PREFIX@pv14  253   9 L--w    0    1      0 TEST-@PREFIX@pv14                                               
| [ 0:01] ## DMINFO:   @PREFIX@pv31  253  36 L--w    0    1      0 TEST-@PREFIX@pv31                                               
| [ 0:01] ## DMINFO:   @PREFIX@pv46  253  44 L--w    0    1      0 TEST-@PREFIX@pv46                                               
| [ 0:01] ## DMINFO:   @PREFIX@pv63  253  62 L--w    0    1      0 TEST-@PREFIX@pv63                                               
| [ 0:01] ## DMINFO:   @PREFIX@pv78  253  65 L--w    0    1      0 TEST-@PREFIX@pv78                                               
| [ 0:01] ## DMINFO:   @PREFIX@pv95  253  55 L--w    0    1      0 TEST-@PREFIX@pv95                                               
| [ 0:01] ## DMINFO:   @PREFIX@pv80  253  80 L--w    0    1      0 TEST-@PREFIX@pv80                                               
| [ 0:01] ## DMINFO:   @PREFIX@pv8   253  27 L--w    0    1      0 TEST-@PREFIX@pv8                                                
| [ 0:01] ## DMINFO:   @PREFIX@pv28  253  34 L--w    0    1      0 TEST-@PREFIX@pv28                                               
| [ 0:01] ## DMINFO:   @PREFIX@pv13  253  30 L--w    0    1      0 TEST-@PREFIX@pv13                                               
| [ 0:01] ## DMINFO:   @PREFIX@pv45  253   8 L--w    0    1      0 TEST-@PREFIX@pv45                                               
| [ 0:01] ## DMINFO:   @PREFIX@pv30  253   5 L--w    0    1      0 TEST-@PREFIX@pv30                                               
| [ 0:01] ## DMINFO:   @PREFIX@pv62  253  90 L--w    0    1      0 TEST-@PREFIX@pv62                                               
| [ 0:01] ## DMINFO:   @PREFIX@pv77  253  57 L--w    0    1      0 TEST-@PREFIX@pv77                                               
| [ 0:01] ## DMINFO:   @PREFIX@pv94  253  88 L--w    0    1      0 TEST-@PREFIX@pv94                                               
| [ 0:01] ## DMINFO:   @PREFIX@pv7   253  24 L--w    0    1      0 TEST-@PREFIX@pv7                                                
| [ 0:01] ## DMINFO:   @PREFIX@pv12  253  40 L--w    0    1      0 TEST-@PREFIX@pv12                                               
| [ 0:01] ## DMINFO:   @PREFIX@pv27  253  46 L--w    0    1      0 TEST-@PREFIX@pv27                                               
| [ 0:01] <======== Active table ========>
| [ 0:01] ## DMTABLE:  @PREFIX@pv59: 0 69632 linear 7:0 4040704
| [ 0:01] ## DMTABLE:  @PREFIX@pv44: 0 69632 linear 7:0 2996224
| [ 0:01] ## DMTABLE:  @PREFIX@pv61: 0 69632 linear 7:0 4179968
| [ 0:01] ## DMTABLE:  @PREFIX@pv76: 0 69632 linear 7:0 5224448
| [ 0:01] ## DMTABLE:  @PREFIX@pv93: 0 69632 linear 7:0 6408192
| [ 0:01] ## DMTABLE:  @PREFIX@pv6: 0 69632 linear 7:0 350208
| [ 0:01] ## DMTABLE:  @PREFIX@pv26: 0 69632 linear 7:0 1742848
| [ 0:01] ## DMTABLE:  @PREFIX@pv11: 0 69632 linear 7:0 698368
| [ 0:01] ## DMTABLE:  @PREFIX@pv58: 0 69632 linear 7:0 3971072
| [ 0:01] ## DMTABLE:  @PREFIX@pv43: 0 69632 linear 7:0 2926592
| [ 0:01] ## DMTABLE:  @PREFIX@pv60: 0 69632 linear 7:0 4110336
| [ 0:01] ## DMTABLE:  @PREFIX@pv75: 0 69632 linear 7:0 5154816
| [ 0:01] ## DMTABLE:  @PREFIX@pv92: 0 69632 linear 7:0 6338560
| [ 0:01] ## DMTABLE:  @PREFIX@pv5: 0 69632 linear 7:0 280576
| [ 0:01] ## DMTABLE:  @PREFIX@pv25: 0 69632 linear 7:0 1673216
| [ 0:01] ## DMTABLE:  @PREFIX@pv10: 0 69632 linear 7:0 628736
| [ 0:01] ## DMTABLE:  @PREFIX@pv57: 0 69632 linear 7:0 3901440
| [ 0:01] ## DMTABLE:  @PREFIX@pv42: 0 69632 linear 7:0 2856960
| [ 0:01] ## DMTABLE:  @PREFIX@pv89: 0 69632 linear 7:0 6129664
| [ 0:01] ## DMTABLE:  @PREFIX@pv74: 0 69632 linear 7:0 5085184
| [ 0:01] ## DMTABLE:  @PREFIX@pv91: 0 69632 linear 7:0 6268928
| [ 0:01] ## DMTABLE:  @PREFIX@pv4: 0 69632 linear 7:0 210944
| [ 0:01] ## DMTABLE:  @PREFIX@pv39: 0 69632 linear 7:0 2648064
| [ 0:01] ## DMTABLE:  @PREFIX@pv24: 0 69632 linear 7:0 1603584
| [ 0:01] ## DMTABLE:  @PREFIX@pv56: 0 69632 linear 7:0 3831808
| [ 0:01] ## DMTABLE:  @PREFIX@pv41: 0 69632 linear 7:0 2787328
| [ 0:01] ## DMTABLE:  @PREFIX@pv88: 0 69632 linear 7:0 6060032
| [ 0:01] ## DMTABLE:  @PREFIX@pv73: 0 69632 linear 7:0 5015552
| [ 0:01] ## DMTABLE:  @PREFIX@pv90: 0 69632 linear 7:0 6199296
| [ 0:01] ## DMTABLE:  @PREFIX@pv3: 0 69632 linear 7:0 141312
| [ 0:01] ## DMTABLE:  @PREFIX@pv38: 0 69632 linear 7:0 2578432
| [ 0:01] ## DMTABLE:  @PREFIX@pv23: 0 69632 linear 7:0 1533952
| [ 0:01] ## DMTABLE:  @PREFIX@pv55: 0 69632 linear 7:0 3762176
| [ 0:01] ## DMTABLE:  @PREFIX@pv40: 0 69632 linear 7:0 2717696
| [ 0:01] ## DMTABLE:  @PREFIX@pv72: 0 69632 linear 7:0 4945920
| [ 0:01] ## DMTABLE:  @PREFIX@pv87: 0 69632 linear 7:0 5990400
| [ 0:01] ## DMTABLE:  @PREFIX@pv2: 0 69632 linear 7:0 71680
| [ 0:01] ## DMTABLE:  @PREFIX@pv22: 0 69632 linear 7:0 1464320
| [ 0:01] ## DMTABLE:  @PREFIX@pv37: 0 69632 linear 7:0 2508800
| [ 0:01] ## DMTABLE:  @PREFIX@pv69: 0 69632 linear 7:0 4737024
| [ 0:01] ## DMTABLE:  @PREFIX@pv54: 0 69632 linear 7:0 3692544
| [ 0:01] ## DMTABLE:  @PREFIX@pv71: 0 69632 linear 7:0 4876288
| [ 0:01] ## DMTABLE:  @PREFIX@pv86: 0 69632 linear 7:0 5920768
| [ 0:01] ## DMTABLE:  @PREFIX@pv1: 0 69632 linear 7:0 2048
| [ 0:01] ## DMTABLE:  @PREFIX@pv19: 0 69632 linear 7:0 1255424
| [ 0:01] ## DMTABLE:  @PREFIX@pv21: 0 69632 linear 7:0 1394688
| [ 0:01] ## DMTABLE:  @PREFIX@pv36: 0 69632 linear 7:0 2439168
| [ 0:01] ## DMTABLE:  @PREFIX@pv68: 0 69632 linear 7:0 4667392
| [ 0:01] ## DMTABLE:  @PREFIX@pv53: 0 69632 linear 7:0 3622912
| [ 0:01] ## DMTABLE:  @PREFIX@pv85: 0 69632 linear 7:0 5851136
| [ 0:01] ## DMTABLE:  @PREFIX@pv70: 0 69632 linear 7:0 4806656
| [ 0:01] ## DMTABLE:  @PREFIX@pv18: 0 69632 linear 7:0 1185792
| [ 0:01] ## DMTABLE:  @PREFIX@pv35: 0 69632 linear 7:0 2369536
| [ 0:01] ## DMTABLE:  @PREFIX@pv20: 0 69632 linear 7:0 1325056
| [ 0:01] ## DMTABLE:  @PREFIX@pv100: 0 69632 linear 7:0 6895616
| [ 0:01] ## DMTABLE:  @PREFIX@pv67: 0 69632 linear 7:0 4597760
| [ 0:01] ## DMTABLE:  @PREFIX@pv52: 0 69632 linear 7:0 3553280
| [ 0:01] ## DMTABLE:  @PREFIX@pv99: 0 69632 linear 7:0 6825984
| [ 0:01] ## DMTABLE:  @PREFIX@pv84: 0 69632 linear 7:0 5781504
| [ 0:01] ## DMTABLE:  @PREFIX@pv17: 0 69632 linear 7:0 1116160
| [ 0:01] ## DMTABLE:  @PREFIX@pv49: 0 69632 linear 7:0 3344384
| [ 0:01] ## DMTABLE:  @PREFIX@pv34: 0 69632 linear 7:0 2299904
| [ 0:01] ## DMTABLE:  @PREFIX@pv51: 0 69632 linear 7:0 3483648
| [ 0:01] ## DMTABLE:  @PREFIX@pv66: 0 69632 linear 7:0 4528128
| [ 0:01] ## DMTABLE:  @PREFIX@pv98: 0 69632 linear 7:0 6756352
| [ 0:01] ## DMTABLE:  @PREFIX@pv83: 0 69632 linear 7:0 5711872
| [ 0:01] ## DMTABLE:  @PREFIX@pv16: 0 69632 linear 7:0 1046528
| [ 0:01] ## DMTABLE:  @PREFIX@pv48: 0 69632 linear 7:0 3274752
| [ 0:01] ## DMTABLE:  @PREFIX@pv33: 0 69632 linear 7:0 2230272
| [ 0:01] ## DMTABLE:  @PREFIX@pv65: 0 69632 linear 7:0 4458496
| [ 0:01] ## DMTABLE:  @PREFIX@pv50: 0 69632 linear 7:0 3414016
| [ 0:01] ## DMTABLE:  @PREFIX@pv97: 0 69632 linear 7:0 6686720
| [ 0:01] ## DMTABLE:  @PREFIX@pv82: 0 69632 linear 7:0 5642240
| [ 0:01] ## DMTABLE:  @PREFIX@pv15: 0 69632 linear 7:0 976896
| [ 0:01] ## DMTABLE:  @PREFIX@pv47: 0 69632 linear 7:0 3205120
| [ 0:01] ## DMTABLE:  @PREFIX@pv32: 0 69632 linear 7:0 2160640
| [ 0:01] ## DMTABLE:  @PREFIX@pv64: 0 69632 linear 7:0 4388864
| [ 0:01] ## DMTABLE:  @PREFIX@pv79: 0 69632 linear 7:0 5433344
| [ 0:01] ## DMTABLE:  @PREFIX@pv96: 0 69632 linear 7:0 6617088
| [ 0:01] ## DMTABLE:  @PREFIX@pv81: 0 69632 linear 7:0 5572608
| [ 0:01] ## DMTABLE:  @PREFIX@pv9: 0 69632 linear 7:0 559104
| [ 0:01] ## DMTABLE:  @PREFIX@pv29: 0 69632 linear 7:0 1951744
| [ 0:01] ## DMTABLE:  @PREFIX@pv14: 0 69632 linear 7:0 907264
| [ 0:01] ## DMTABLE:  @PREFIX@pv31: 0 69632 linear 7:0 2091008
| [ 0:01] ## DMTABLE:  @PREFIX@pv46: 0 69632 linear 7:0 3135488
| [ 0:01] ## DMTABLE:  @PREFIX@pv63: 0 69632 linear 7:0 4319232
| [ 0:01] ## DMTABLE:  @PREFIX@pv78: 0 69632 linear 7:0 5363712
| [ 0:01] ## DMTABLE:  @PREFIX@pv95: 0 69632 linear 7:0 6547456
| [ 0:01] ## DMTABLE:  @PREFIX@pv80: 0 69632 linear 7:0 5502976
| [ 0:01] ## DMTABLE:  @PREFIX@pv8: 0 69632 linear 7:0 489472
| [ 0:01] ## DMTABLE:  @PREFIX@pv28: 0 69632 linear 7:0 1882112
| [ 0:01] ## DMTABLE:  @PREFIX@pv13: 0 69632 linear 7:0 837632
| [ 0:01] ## DMTABLE:  @PREFIX@pv45: 0 69632 linear 7:0 3065856
| [ 0:01] ## DMTABLE:  @PREFIX@pv30: 0 69632 linear 7:0 2021376
| [ 0:01] ## DMTABLE:  @PREFIX@pv62: 0 69632 linear 7:0 4249600
| [ 0:01] ## DMTABLE:  @PREFIX@pv77: 0 69632 linear 7:0 5294080
| [ 0:01] ## DMTABLE:  @PREFIX@pv94: 0 69632 linear 7:0 6477824
| [ 0:01] ## DMTABLE:  @PREFIX@pv7: 0 69632 linear 7:0 419840
| [ 0:01] ## DMTABLE:  @PREFIX@pv12: 0 69632 linear 7:0 768000
| [ 0:01] ## DMTABLE:  @PREFIX@pv27: 0 69632 linear 7:0 1812480
| [ 0:01] <======== Inactive table ========>
| [ 0:01] ## DMITABLE: @PREFIX@pv59: 
| [ 0:01] ## DMITABLE: @PREFIX@pv44: 
| [ 0:01] ## DMITABLE: @PREFIX@pv61: 
| [ 0:01] ## DMITABLE: @PREFIX@pv76: 
| [ 0:01] ## DMITABLE: @PREFIX@pv93: 
| [ 0:01] ## DMITABLE: @PREFIX@pv6: 
| [ 0:01] ## DMITABLE: @PREFIX@pv26: 
| [ 0:01] ## DMITABLE: @PREFIX@pv11: 
| [ 0:01] ## DMITABLE: @PREFIX@pv58: 
| [ 0:01] ## DMITABLE: @PREFIX@pv43: 
| [ 0:01] ## DMITABLE: @PREFIX@pv60: 
| [ 0:01] ## DMITABLE: @PREFIX@pv75: 
| [ 0:01] ## DMITABLE: @PREFIX@pv92: 
| [ 0:01] ## DMITABLE: @PREFIX@pv5: 
| [ 0:01] ## DMITABLE: @PREFIX@pv25: 
| [ 0:01] ## DMITABLE: @PREFIX@pv10: 
| [ 0:01] ## DMITABLE: @PREFIX@pv57: 
| [ 0:01] ## DMITABLE: @PREFIX@pv42: 
| [ 0:01] ## DMITABLE: @PREFIX@pv89: 
| [ 0:01] ## DMITABLE: @PREFIX@pv74: 
| [ 0:01] ## DMITABLE: @PREFIX@pv91: 
| [ 0:01] ## DMITABLE: @PREFIX@pv4: 
| [ 0:01] ## DMITABLE: @PREFIX@pv39: 
| [ 0:01] ## DMITABLE: @PREFIX@pv24: 
| [ 0:01] ## DMITABLE: @PREFIX@pv56: 
| [ 0:01] ## DMITABLE: @PREFIX@pv41: 
| [ 0:01] ## DMITABLE: @PREFIX@pv88: 
| [ 0:01] ## DMITABLE: @PREFIX@pv73: 
| [ 0:01] ## DMITABLE: @PREFIX@pv90: 
| [ 0:01] ## DMITABLE: @PREFIX@pv3: 
| [ 0:01] ## DMITABLE: @PREFIX@pv38: 
| [ 0:01] ## DMITABLE: @PREFIX@pv23: 
| [ 0:01] ## DMITABLE: @PREFIX@pv55: 
| [ 0:01] ## DMITABLE: @PREFIX@pv40: 
| [ 0:01] ## DMITABLE: @PREFIX@pv72: 
| [ 0:01] ## DMITABLE: @PREFIX@pv87: 
| [ 0:01] ## DMITABLE: @PREFIX@pv2: 
| [ 0:01] ## DMITABLE: @PREFIX@pv22: 
| [ 0:01] ## DMITABLE: @PREFIX@pv37: 
| [ 0:01] ## DMITABLE: @PREFIX@pv69: 
| [ 0:01] ## DMITABLE: @PREFIX@pv54: 
| [ 0:01] ## DMITABLE: @PREFIX@pv71: 
| [ 0:01] ## DMITABLE: @PREFIX@pv86: 
| [ 0:01] ## DMITABLE: @PREFIX@pv1: 
| [ 0:01] ## DMITABLE: @PREFIX@pv19: 
| [ 0:01] ## DMITABLE: @PREFIX@pv21: 
| [ 0:01] ## DMITABLE: @PREFIX@pv36: 
| [ 0:01] ## DMITABLE: @PREFIX@pv68: 
| [ 0:01] ## DMITABLE: @PREFIX@pv53: 
| [ 0:01] ## DMITABLE: @PREFIX@pv85: 
| [ 0:01] ## DMITABLE: @PREFIX@pv70: 
| [ 0:01] ## DMITABLE: @PREFIX@pv18: 
| [ 0:01] ## DMITABLE: @PREFIX@pv35: 
| [ 0:01] ## DMITABLE: @PREFIX@pv20: 
| [ 0:01] ## DMITABLE: @PREFIX@pv100: 
| [ 0:01] ## DMITABLE: @PREFIX@pv67: 
| [ 0:01] ## DMITABLE: @PREFIX@pv52: 
| [ 0:01] ## DMITABLE: @PREFIX@pv99: 
| [ 0:01] ## DMITABLE: @PREFIX@pv84: 
| [ 0:01] ## DMITABLE: @PREFIX@pv17: 
| [ 0:01] ## DMITABLE: @PREFIX@pv49: 
| [ 0:01] ## DMITABLE: @PREFIX@pv34: 
| [ 0:01] ## DMITABLE: @PREFIX@pv51: 
| [ 0:01] ## DMITABLE: @PREFIX@pv66: 
| [ 0:01] ## DMITABLE: @PREFIX@pv98: 
| [ 0:01] ## DMITABLE: @PREFIX@pv83: 
| [ 0:01] ## DMITABLE: @PREFIX@pv16: 
| [ 0:01] ## DMITABLE: @PREFIX@pv48: 
| [ 0:01] ## DMITABLE: @PREFIX@pv33: 
| [ 0:01] ## DMITABLE: @PREFIX@pv65: 
| [ 0:01] ## DMITABLE: @PREFIX@pv50: 
| [ 0:01] ## DMITABLE: @PREFIX@pv97: 
| [ 0:01] ## DMITABLE: @PREFIX@pv82: 
| [ 0:01] ## DMITABLE: @PREFIX@pv15: 
| [ 0:01] ## DMITABLE: @PREFIX@pv47: 
| [ 0:01] ## DMITABLE: @PREFIX@pv32: 
| [ 0:01] ## DMITABLE: @PREFIX@pv64: 
| [ 0:01] ## DMITABLE: @PREFIX@pv79: 
| [ 0:01] ## DMITABLE: @PREFIX@pv96: 
| [ 0:01] ## DMITABLE: @PREFIX@pv81: 
| [ 0:01] ## DMITABLE: @PREFIX@pv9: 
| [ 0:01] ## DMITABLE: @PREFIX@pv29: 
| [ 0:01] ## DMITABLE: @PREFIX@pv14: 
| [ 0:01] ## DMITABLE: @PREFIX@pv31: 
| [ 0:01] ## DMITABLE: @PREFIX@pv46: 
| [ 0:01] ## DMITABLE: @PREFIX@pv63: 
| [ 0:01] ## DMITABLE: @PREFIX@pv78: 
| [ 0:01] ## DMITABLE: @PREFIX@pv95: 
| [ 0:01] ## DMITABLE: @PREFIX@pv80: 
| [ 0:01] ## DMITABLE: @PREFIX@pv8: 
| [ 0:01] ## DMITABLE: @PREFIX@pv28: 
| [ 0:01] ## DMITABLE: @PREFIX@pv13: 
| [ 0:01] ## DMITABLE: @PREFIX@pv45: 
| [ 0:01] ## DMITABLE: @PREFIX@pv30: 
| [ 0:01] ## DMITABLE: @PREFIX@pv62: 
| [ 0:01] ## DMITABLE: @PREFIX@pv77: 
| [ 0:01] ## DMITABLE: @PREFIX@pv94: 
| [ 0:01] ## DMITABLE: @PREFIX@pv7: 
| [ 0:01] ## DMITABLE: @PREFIX@pv12: 
| [ 0:01] ## DMITABLE: @PREFIX@pv27: 
| [ 0:01] <======== Status ========>
| [ 0:01] ## DMSTATUS: @PREFIX@pv59: 0 69632 linear 
| [ 0:01] ## DMSTATUS: @PREFIX@pv44: 0 69632 linear 
| [ 0:01] ## DMSTATUS: @PREFIX@pv61: 0 69632 linear 
| [ 0:01] ## DMSTATUS: @PREFIX@pv76: 0 69632 linear 
| [ 0:01] ## DMSTATUS: @PREFIX@pv93: 0 69632 linear 
| [ 0:01] ## DMSTATUS: @PREFIX@pv6: 0 69632 linear 
| [ 0:01] ## DMSTATUS: @PREFIX@pv26: 0 69632 linear 
| [ 0:01] ## DMSTATUS: @PREFIX@pv11: 0 69632 linear 
| [ 0:01] ## DMSTATUS: @PREFIX@pv58: 0 69632 linear 
| [ 0:01] ## DMSTATUS: @PREFIX@pv43: 0 69632 linear 
| [ 0:01] ## DMSTATUS: @PREFIX@pv60: 0 69632 linear 
| [ 0:01] ## DMSTATUS: @PREFIX@pv75: 0 69632 linear 
| [ 0:01] ## DMSTATUS: @PREFIX@pv92: 0 69632 linear 
| [ 0:01] ## DMSTATUS: @PREFIX@pv5: 0 69632 linear 
| [ 0:01] ## DMSTATUS: @PREFIX@pv25: 0 69632 linear 
| [ 0:01] ## DMSTATUS: @PREFIX@pv10: 0 69632 linear 
| [ 0:01] ## DMSTATUS: @PREFIX@pv57: 0 69632 linear 
| [ 0:01] ## DMSTATUS: @PREFIX@pv42: 0 69632 linear 
| [ 0:01] ## DMSTATUS: @PREFIX@pv89: 0 69632 linear 
| [ 0:01] ## DMSTATUS: @PREFIX@pv74: 0 69632 linear 
| [ 0:01] ## DMSTATUS: @PREFIX@pv91: 0 69632 linear 
| [ 0:01] ## DMSTATUS: @PREFIX@pv4: 0 69632 linear 
| [ 0:01] ## DMSTATUS: @PREFIX@pv39: 0 69632 linear 
| [ 0:01] ## DMSTATUS: @PREFIX@pv24: 0 69632 linear 
| [ 0:01] ## DMSTATUS: @PREFIX@pv56: 0 69632 linear 
| [ 0:01] ## DMSTATUS: @PREFIX@pv41: 0 69632 linear 
| [ 0:01] ## DMSTATUS: @PREFIX@pv88: 0 69632 linear 
| [ 0:01] ## DMSTATUS: @PREFIX@pv73: 0 69632 linear 
| [ 0:01] ## DMSTATUS: @PREFIX@pv90: 0 69632 linear 
| [ 0:01] ## DMSTATUS: @PREFIX@pv3: 0 69632 linear 
| [ 0:01] ## DMSTATUS: @PREFIX@pv38: 0 69632 linear 
| [ 0:01] ## DMSTATUS: @PREFIX@pv23: 0 69632 linear 
| [ 0:01] ## DMSTATUS: @PREFIX@pv55: 0 69632 linear 
| [ 0:01] ## DMSTATUS: @PREFIX@pv40: 0 69632 linear 
| [ 0:01] ## DMSTATUS: @PREFIX@pv72: 0 69632 linear 
| [ 0:01] ## DMSTATUS: @PREFIX@pv87: 0 69632 linear 
| [ 0:01] ## DMSTATUS: @PREFIX@pv2: 0 69632 linear 
| [ 0:01] ## DMSTATUS: @PREFIX@pv22: 0 69632 linear 
| [ 0:01] ## DMSTATUS: @PREFIX@pv37: 0 69632 linear 
| [ 0:01] ## DMSTATUS: @PREFIX@pv69: 0 69632 linear 
| [ 0:01] ## DMSTATUS: @PREFIX@pv54: 0 69632 linear 
| [ 0:01] ## DMSTATUS: @PREFIX@pv71: 0 69632 linear 
| [ 0:01] ## DMSTATUS: @PREFIX@pv86: 0 69632 linear 
| [ 0:01] ## DMSTATUS: @PREFIX@pv1: 0 69632 linear 
| [ 0:01] ## DMSTATUS: @PREFIX@pv19: 0 69632 linear 
| [ 0:01] ## DMSTATUS: @PREFIX@pv21: 0 69632 linear 
| [ 0:01] ## DMSTATUS: @PREFIX@pv36: 0 69632 linear 
| [ 0:01] ## DMSTATUS: @PREFIX@pv68: 0 69632 linear 
| [ 0:01] ## DMSTATUS: @PREFIX@pv53: 0 69632 linear 
| [ 0:01] ## DMSTATUS: @PREFIX@pv85: 0 69632 linear 
| [ 0:01] ## DMSTATUS: @PREFIX@pv70: 0 69632 linear 
| [ 0:01] ## DMSTATUS: @PREFIX@pv18: 0 69632 linear 
| [ 0:01] ## DMSTATUS: @PREFIX@pv35: 0 69632 linear 
| [ 0:01] ## DMSTATUS: @PREFIX@pv20: 0 69632 linear 
| [ 0:01] ## DMSTATUS: @PREFIX@pv100: 0 69632 linear 
| [ 0:01] ## DMSTATUS: @PREFIX@pv67: 0 69632 linear 
| [ 0:01] ## DMSTATUS: @PREFIX@pv52: 0 69632 linear 
| [ 0:01] ## DMSTATUS: @PREFIX@pv99: 0 69632 linear 
| [ 0:01] ## DMSTATUS: @PREFIX@pv84: 0 69632 linear 
| [ 0:01] ## DMSTATUS: @PREFIX@pv17: 0 69632 linear 
| [ 0:01] ## DMSTATUS: @PREFIX@pv49: 0 69632 linear 
| [ 0:01] ## DMSTATUS: @PREFIX@pv34: 0 69632 linear 
| [ 0:01] ## DMSTATUS: @PREFIX@pv51: 0 69632 linear 
| [ 0:01] ## DMSTATUS: @PREFIX@pv66: 0 69632 linear 
| [ 0:01] ## DMSTATUS: @PREFIX@pv98: 0 69632 linear 
| [ 0:01] ## DMSTATUS: @PREFIX@pv83: 0 69632 linear 
| [ 0:01] ## DMSTATUS: @PREFIX@pv16: 0 69632 linear 
| [ 0:01] ## DMSTATUS: @PREFIX@pv48: 0 69632 linear 
| [ 0:01] ## DMSTATUS: @PREFIX@pv33: 0 69632 linear 
| [ 0:01] ## DMSTATUS: @PREFIX@pv65: 0 69632 linear 
| [ 0:01] ## DMSTATUS: @PREFIX@pv50: 0 69632 linear 
| [ 0:01] ## DMSTATUS: @PREFIX@pv97: 0 69632 linear 
| [ 0:01] ## DMSTATUS: @PREFIX@pv82: 0 69632 linear 
| [ 0:01] ## DMSTATUS: @PREFIX@pv15: 0 69632 linear 
| [ 0:01] ## DMSTATUS: @PREFIX@pv47: 0 69632 linear 
| [ 0:01] ## DMSTATUS: @PREFIX@pv32: 0 69632 linear 
| [ 0:01] ## DMSTATUS: @PREFIX@pv64: 0 69632 linear 
| [ 0:01] ## DMSTATUS: @PREFIX@pv79: 0 69632 linear 
| [ 0:01] ## DMSTATUS: @PREFIX@pv96: 0 69632 linear 
| [ 0:01] ## DMSTATUS: @PREFIX@pv81: 0 69632 linear 
| [ 0:01] ## DMSTATUS: @PREFIX@pv9: 0 69632 linear 
| [ 0:01] ## DMSTATUS: @PREFIX@pv29: 0 69632 linear 
| [ 0:01] ## DMSTATUS: @PREFIX@pv14: 0 69632 linear 
| [ 0:01] ## DMSTATUS: @PREFIX@pv31: 0 69632 linear 
| [ 0:01] ## DMSTATUS: @PREFIX@pv46: 0 69632 linear 
| [ 0:01] ## DMSTATUS: @PREFIX@pv63: 0 69632 linear 
| [ 0:01] ## DMSTATUS: @PREFIX@pv78: 0 69632 linear 
| [ 0:01] ## DMSTATUS: @PREFIX@pv95: 0 69632 linear 
| [ 0:01] ## DMSTATUS: @PREFIX@pv80: 0 69632 linear 
| [ 0:01] ## DMSTATUS: @PREFIX@pv8: 0 69632 linear 
| [ 0:01] ## DMSTATUS: @PREFIX@pv28: 0 69632 linear 
| [ 0:01] ## DMSTATUS: @PREFIX@pv13: 0 69632 linear 
| [ 0:01] ## DMSTATUS: @PREFIX@pv45: 0 69632 linear 
| [ 0:01] ## DMSTATUS: @PREFIX@pv30: 0 69632 linear 
| [ 0:01] ## DMSTATUS: @PREFIX@pv62: 0 69632 linear 
| [ 0:01] ## DMSTATUS: @PREFIX@pv77: 0 69632 linear 
| [ 0:01] ## DMSTATUS: @PREFIX@pv94: 0 69632 linear 
| [ 0:01] ## DMSTATUS: @PREFIX@pv7: 0 69632 linear 
| [ 0:01] ## DMSTATUS: @PREFIX@pv12: 0 69632 linear 
| [ 0:01] ## DMSTATUS: @PREFIX@pv27: 0 69632 linear 
| [ 0:01] <======== Tree ========>
| [ 0:01] ## DMTREE:   @PREFIX@pv59 (253:97)
| [ 0:01] ## DMTREE:    `- (7:0)
| [ 0:01] ## DMTREE:   @PREFIX@pv44 (253:7)
| [ 0:01] ## DMTREE:    `- (7:0)
| [ 0:01] ## DMTREE:   @PREFIX@pv61 (253:76)
| [ 0:01] ## DMTREE:    `- (7:0)
| [ 0:01] ## DMTREE:   @PREFIX@pv76 (253:68)
| [ 0:01] ## DMTREE:    `- (7:0)
| [ 0:01] ## DMTREE:   @PREFIX@pv93 (253:73)
| [ 0:01] ## DMTREE:    `- (7:0)
| [ 0:01] ## DMTREE:   @PREFIX@pv6 (253:23)
| [ 0:01] ## DMTREE:    `- (7:0)
| [ 0:01] ## DMTREE:   @PREFIX@pv26 (253:15)
| [ 0:01] ## DMTREE:    `- (7:0)
| [ 0:01] ## DMTREE:   @PREFIX@pv11 (253:20)
| [ 0:01] ## DMTREE:    `- (7:0)
| [ 0:01] ## DMTREE:   @PREFIX@pv58 (253:83)
| [ 0:01] ## DMTREE:    `- (7:0)
| [ 0:01] ## DMTREE:   @PREFIX@pv43 (253:4)
| [ 0:01] ## DMTREE:    `- (7:0)
| [ 0:01] ## DMTREE:   @PREFIX@pv60 (253:84)
| [ 0:01] ## DMTREE:    `- (7:0)
| [ 0:01] ## DMTREE:   @PREFIX@pv75 (253:81)
| [ 0:01] ## DMTREE:    `- (7:0)
| [ 0:01] ## DMTREE:   @PREFIX@pv92 (253:91)
| [ 0:01] ## DMTREE:    `- (7:0)
| [ 0:01] ## DMTREE:   @PREFIX@pv5 (253:39)
| [ 0:01] ## DMTREE:    `- (7:0)
| [ 0:01] ## DMTREE:   @PREFIX@pv25 (253:14)
| [ 0:01] ## DMTREE:    `- (7:0)
| [ 0:01] ## DMTREE:   @PREFIX@pv10 (253:29)
| [ 0:01] ## DMTREE:    `- (7:0)
| [ 0:01] ## DMTREE:   @PREFIX@pv57 (253:61)
| [ 0:01] ## DMTREE:    `- (7:0)
| [ 0:01] ## DMTREE:   @PREFIX@pv42 (253:38)
| [ 0:01] ## DMTREE:    `- (7:0)
| [ 0:01] ## DMTREE:   @PREFIX@pv89 (253:87)
| [ 0:01] ## DMTREE:    `- (7:0)
| [ 0:01] ## DMTREE:   @PREFIX@pv74 (253:67)
| [ 0:01] ## DMTREE:    `- (7:0)
| [ 0:01] ## DMTREE:   @PREFIX@pv91 (253:60)
| [ 0:01] ## DMTREE:    `- (7:0)
| [ 0:01] ## DMTREE:   @PREFIX@pv4 (253:26)
| [ 0:01] ## DMTREE:    `- (7:0)
| [ 0:01] ## DMTREE:   @PREFIX@pv39 (253:37)
| [ 0:01] ## DMTREE:    `- (7:0)
| [ 0:01] ## DMTREE:   @PREFIX@pv24 (253:21)
| [ 0:01] ## DMTREE:    `- (7:0)
| [ 0:01] ## DMTREE:   @PREFIX@pv56 (253:69)
| [ 0:01] ## DMTREE:    `- (7:0)
| [ 0:01] ## DMTREE:   @PREFIX@pv41 (253:3)
| [ 0:01] ## DMTREE:    `- (7:0)
| [ 0:01] ## DMTREE:   @PREFIX@pv88 (253:71)
| [ 0:01] ## DMTREE:    `- (7:0)
| [ 0:01] ## DMTREE:   @PREFIX@pv73 (253:79)
| [ 0:01] ## DMTREE:    `- (7:0)
| [ 0:01] ## DMTREE:   @PREFIX@pv90 (253:72)
| [ 0:01] ## DMTREE:    `- (7:0)
| [ 0:01] ## DMTREE:   @PREFIX@pv3 (253:25)
| [ 0:01] ## DMTREE:    `- (7:0)
| [ 0:01] ## DMTREE:   @PREFIX@pv38 (253:6)
| [ 0:01] ## DMTREE:    `- (7:0)
| [ 0:01] ## DMTREE:   @PREFIX@pv23 (253:33)
| [ 0:01] ## DMTREE:    `- (7:0)
| [ 0:01] ## DMTREE:   @PREFIX@pv55 (253:96)
| [ 0:01] ## DMTREE:    `- (7:0)
| [ 0:01] ## DMTREE:   @PREFIX@pv40 (253:18)
| [ 0:01] ## DMTREE:    `- (7:0)
| [ 0:01] ## DMTREE:   @PREFIX@pv72 (253:59)
| [ 0:01] ## DMTREE:    `- (7:0)
| [ 0:01] ## DMTREE:   @PREFIX@pv87 (253:95)
| [ 0:01] ## DMTREE:    `- (7:0)
| [ 0:01] ## DMTREE:   @PREFIX@pv2 (253:41)
| [ 0:01] ## DMTREE:    `- (7:0)
| [ 0:01] ## DMTREE:   @PREFIX@pv22 (253:13)
| [ 0:01] ## DMTREE:    `- (7:0)
| [ 0:01] ## DMTREE:   @PREFIX@pv37 (253:45)
| [ 0:01] ## DMTREE:    `- (7:0)
| [ 0:01] ## DMTREE:   @PREFIX@pv69 (253:92)
| [ 0:01] ## DMTREE:    `- (7:0)
| [ 0:01] ## DMTREE:   @PREFIX@pv54 (253:75)
| [ 0:01] ## DMTREE:    `- (7:0)
| [ 0:01] ## DMTREE:   @PREFIX@pv71 (253:78)
| [ 0:01] ## DMTREE:    `- (7:0)
| [ 0:01] ## DMTREE:   @PREFIX@pv86 (253:94)
| [ 0:01] ## DMTREE:    `- (7:0)
| [ 0:01] ## DMTREE:   @PREFIX@pv1 (253:47)
| [ 0:01] ## DMTREE:    `- (7:0)
| [ 0:01] ## DMTREE:   @PREFIX@pv19 (253:12)
| [ 0:01] ## DMTREE:    `- (7:0)
| [ 0:01] ## DMTREE:   @PREFIX@pv21 (253:48)
| [ 0:01] ## DMTREE:    `- (7:0)
| [ 0:01] ## DMTREE:   @PREFIX@pv36 (253:17)
| [ 0:01] ## DMTREE:    `- (7:0)
| [ 0:01] ## DMTREE:   @PREFIX@pv68 (253:64)
| [ 0:01] ## DMTREE:    `- (7:0)
| [ 0:01] ## DMTREE:   @PREFIX@pv53 (253:82)
| [ 0:01] ## DMTREE:    `- (7:0)
| [ 0:01] ## DMTREE:   @PREFIX@pv85 (253:99)
| [ 0:01] ## DMTREE:    `- (7:0)
| [ 0:01] ## DMTREE:   @PREFIX@pv70 (253:77)
| [ 0:01] ## DMTREE:    `- (7:0)
| [ 0:01] ## DMTREE:   @PREFIX@pv18 (253:31)
| [ 0:01] ## DMTREE:    `- (7:0)
| [ 0:01] ## DMTREE:   @PREFIX@pv35 (253:43)
| [ 0:01] ## DMTREE:    `- (7:0)
| [ 0:01] ## DMTREE:   @PREFIX@pv20 (253:32)
| [ 0:01] ## DMTREE:    `- (7:0)
| [ 0:01] ## DMTREE:   @PREFIX@pv100 (253:102)
| [ 0:01] ## DMTREE:    `- (7:0)
| [ 0:01] ## DMTREE:   @PREFIX@pv67 (253:89)
| [ 0:01] ## DMTREE:    `- (7:0)
| [ 0:01] ## DMTREE:   @PREFIX@pv52 (253:74)
| [ 0:01] ## DMTREE:    `- (7:0)
| [ 0:01] ## DMTREE:   @PREFIX@pv99 (253:101)
| [ 0:01] ## DMTREE:    `- (7:0)
| [ 0:01] ## DMTREE:   @PREFIX@pv84 (253:63)
| [ 0:01] ## DMTREE:    `- (7:0)
| [ 0:01] ## DMTREE:   @PREFIX@pv17 (253:11)
| [ 0:01] ## DMTREE:    `- (7:0)
| [ 0:01] ## DMTREE:   @PREFIX@pv49 (253:51)
| [ 0:01] ## DMTREE:    `- (7:0)
| [ 0:01] ## DMTREE:   @PREFIX@pv34 (253:16)
| [ 0:01] ## DMTREE:    `- (7:0)
| [ 0:01] ## DMTREE:   @PREFIX@pv51 (253:93)
| [ 0:01] ## DMTREE:    `- (7:0)
| [ 0:01] ## DMTREE:   @PREFIX@pv66 (253:56)
| [ 0:01] ## DMTREE:    `- (7:0)
| [ 0:01] ## DMTREE:   @PREFIX@pv98 (253:100)
| [ 0:01] ## DMTREE:    `- (7:0)
| [ 0:01] ## DMTREE:   @PREFIX@pv83 (253:70)
| [ 0:01] ## DMTREE:    `- (7:0)
| [ 0:01] ## DMTREE:   @PREFIX@pv16 (253:10)
| [ 0:01] ## DMTREE:    `- (7:0)
| [ 0:01] ## DMTREE:   @PREFIX@pv48 (253:50)
| [ 0:01] ## DMTREE:    `- (7:0)
| [ 0:01] ## DMTREE:   @PREFIX@pv33 (253:22)
| [ 0:01] ## DMTREE:    `- (7:0)
| [ 0:01] ## DMTREE:   @PREFIX@pv65 (253:66)
| [ 0:01] ## DMTREE:    `- (7:0)
| [ 0:01] ## DMTREE:   @PREFIX@pv50 (253:52)
| [ 0:01] ## DMTREE:    `- (7:0)
| [ 0:01] ## DMTREE:   @PREFIX@pv97 (253:54)
| [ 0:01] ## DMTREE:    `- (7:0)
| [ 0:01] ## DMTREE:   @PREFIX@pv82 (253:53)
| [ 0:01] ## DMTREE:    `- (7:0)
| [ 0:01] ## DMTREE:   @PREFIX@pv15 (253:19)
| [ 0:01] ## DMTREE:    `- (7:0)
| [ 0:01] ## DMTREE:   @PREFIX@pv47 (253:49)
| [ 0:01] ## DMTREE:    `- (7:0)
| [ 0:01] ## DMTREE:   @PREFIX@pv32 (253:42)
| [ 0:01] ## DMTREE:    `- (7:0)
| [ 0:01] ## DMTREE:   @PREFIX@pv64 (253:85)
| [ 0:01] ## DMTREE:    `- (7:0)
| [ 0:01] ## DMTREE:   @PREFIX@pv79 (253:86)
| [ 0:01] ## DMTREE:    `- (7:0)
| [ 0:01] ## DMTREE:   @PREFIX@pv96 (253:98)
| [ 0:01] ## DMTREE:    `- (7:0)
| [ 0:01] ## DMTREE:   @PREFIX@pv81 (253:58)
| [ 0:01] ## DMTREE:    `- (7:0)
| [ 0:01] ## DMTREE:   @PREFIX@pv9 (253:28)
| [ 0:01] ## DMTREE:    `- (7:0)
| [ 0:01] ## DMTREE:   @PREFIX@pv29 (253:35)
| [ 0:01] ## DMTREE:    `- (7:0)
| [ 0:01] ## DMTREE:   @PREFIX@pv14 (253:9)
| [ 0:01] ## DMTREE:    `- (7:0)
| [ 0:01] ## DMTREE:   @PREFIX@pv31 (253:36)
| [ 0:01] ## DMTREE:    `- (7:0)
| [ 0:01] ## DMTREE:   @PREFIX@pv46 (253:44)
| [ 0:01] ## DMTREE:    `- (7:0)
| [ 0:01] ## DMTREE:   @PREFIX@pv63 (253:62)
| [ 0:01] ## DMTREE:    `- (7:0)
| [ 0:01] ## DMTREE:   @PREFIX@pv78 (253:65)
| [ 0:01] ## DMTREE:    `- (7:0)
| [ 0:01] ## DMTREE:   @PREFIX@pv95 (253:55)
| [ 0:01] ## DMTREE:    `- (7:0)
| [ 0:01] ## DMTREE:   @PREFIX@pv80 (253:80)
| [ 0:01] ## DMTREE:    `- (7:0)
| [ 0:01] ## DMTREE:   @PREFIX@pv8 (253:27)
| [ 0:01] ## DMTREE:    `- (7:0)
| [ 0:01] ## DMTREE:   LFS_vg-lfs (253:2)
| [ 0:01] ## DMTREE:    `- (8:16)
| [ 0:01] ## DMTREE:   @PREFIX@pv28 (253:34)
| [ 0:01] ## DMTREE:    `- (7:0)
| [ 0:01] ## DMTREE:   @PREFIX@pv13 (253:30)
| [ 0:01] ## DMTREE:    `- (7:0)
| [ 0:01] ## DMTREE:   @PREFIX@pv45 (253:8)
| [ 0:01] ## DMTREE:    `- (7:0)
| [ 0:01] ## DMTREE:   @PREFIX@pv30 (253:5)
| [ 0:01] ## DMTREE:    `- (7:0)
| [ 0:01] ## DMTREE:   @PREFIX@pv62 (253:90)
| [ 0:01] ## DMTREE:    `- (7:0)
| [ 0:01] ## DMTREE:   @PREFIX@pv77 (253:57)
| [ 0:01] ## DMTREE:    `- (7:0)
| [ 0:01] ## DMTREE:   centos-swap (253:1)
| [ 0:01] ## DMTREE:    `- (8:2)
| [ 0:01] ## DMTREE:   @PREFIX@pv94 (253:88)
| [ 0:01] ## DMTREE:    `- (7:0)
| [ 0:01] ## DMTREE:   @PREFIX@pv7 (253:24)
| [ 0:01] ## DMTREE:    `- (7:0)
| [ 0:01] ## DMTREE:   centos-root (253:0)
| [ 0:01] ## DMTREE:    `- (8:2)
| [ 0:01] ## DMTREE:   @PREFIX@pv12 (253:40)
| [ 0:01] ## DMTREE:    `- (7:0)
| [ 0:01] ## DMTREE:   @PREFIX@pv27 (253:46)
| [ 0:01] ## DMTREE:    `- (7:0)
| [ 0:01] <======== Recursive list of @TESTDIR@/dev ========>
| [ 0:01] ## LSLR:	@TESTDIR@/dev:
| [ 0:01] ## LSLR:	total 4
| [ 0:01] ## LSLR:	brw-r--r-- 1 root root 7, 0 Feb 21 02:27 loop0
| [ 0:01] ## LSLR:	brw-r--r-- 1 root root 7, 1 Feb 21 02:27 loop1
| [ 0:01] ## LSLR:	brw-r--r-- 1 root root 7, 2 Feb 21 02:27 loop2
| [ 0:01] ## LSLR:	brw-r--r-- 1 root root 7, 3 Feb 21 02:27 loop3
| [ 0:01] ## LSLR:	brw-r--r-- 1 root root 7, 4 Feb 21 02:27 loop4
| [ 0:01] ## LSLR:	brw-r--r-- 1 root root 7, 5 Feb 21 02:27 loop5
| [ 0:01] ## LSLR:	brw-r--r-- 1 root root 7, 6 Feb 21 02:27 loop6
| [ 0:01] ## LSLR:	brw-r--r-- 1 root root 7, 7 Feb 21 02:27 loop7
| [ 0:01] ## LSLR:	drwxr-xr-x 2 root root 4096 Feb 21 02:27 mapper
| [ 0:01] ## LSLR:	crw-r--r-- 1 root root 1, 3 Feb 21 02:27 testnull
| [ 0:01] ## LSLR:	
| [ 0:01] ## LSLR:	@TESTDIR@/dev/mapper:
| [ 0:01] ## LSLR:	total 0
| [ 0:01] ## LSLR:	brw------- 1 root root 253,  47 Feb 21 02:27 @PREFIX@pv1
| [ 0:01] ## LSLR:	brw------- 1 root root 253,  29 Feb 21 02:27 @PREFIX@pv10
| [ 0:01] ## LSLR:	brw------- 1 root root 253, 102 Feb 21 02:27 @PREFIX@pv100
| [ 0:01] ## LSLR:	brw------- 1 root root 253,  20 Feb 21 02:27 @PREFIX@pv11
| [ 0:01] ## LSLR:	brw------- 1 root root 253,  40 Feb 21 02:27 @PREFIX@pv12
| [ 0:01] ## LSLR:	brw------- 1 root root 253,  30 Feb 21 02:27 @PREFIX@pv13
| [ 0:01] ## LSLR:	brw------- 1 root root 253,   9 Feb 21 02:27 @PREFIX@pv14
| [ 0:01] ## LSLR:	brw------- 1 root root 253,  19 Feb 21 02:27 @PREFIX@pv15
| [ 0:01] ## LSLR:	brw------- 1 root root 253,  10 Feb 21 02:27 @PREFIX@pv16
| [ 0:01] ## LSLR:	brw------- 1 root root 253,  11 Feb 21 02:27 @PREFIX@pv17
| [ 0:01] ## LSLR:	brw------- 1 root root 253,  31 Feb 21 02:27 @PREFIX@pv18
| [ 0:01] ## LSLR:	brw------- 1 root root 253,  12 Feb 21 02:27 @PREFIX@pv19
| [ 0:01] ## LSLR:	brw------- 1 root root 253,  41 Feb 21 02:27 @PREFIX@pv2
| [ 0:01] ## LSLR:	brw------- 1 root root 253,  32 Feb 21 02:27 @PREFIX@pv20
| [ 0:01] ## LSLR:	brw------- 1 root root 253,  48 Feb 21 02:27 @PREFIX@pv21
| [ 0:01] ## LSLR:	brw------- 1 root root 253,  13 Feb 21 02:27 @PREFIX@pv22
| [ 0:01] ## LSLR:	brw------- 1 root root 253,  33 Feb 21 02:27 @PREFIX@pv23
| [ 0:01] ## LSLR:	brw------- 1 root root 253,  21 Feb 21 02:27 @PREFIX@pv24
| [ 0:01] ## LSLR:	brw------- 1 root root 253,  14 Feb 21 02:27 @PREFIX@pv25
| [ 0:01] ## LSLR:	brw------- 1 root root 253,  15 Feb 21 02:27 @PREFIX@pv26
| [ 0:01] ## LSLR:	brw------- 1 root root 253,  46 Feb 21 02:27 @PREFIX@pv27
| [ 0:01] ## LSLR:	brw------- 1 root root 253,  34 Feb 21 02:27 @PREFIX@pv28
| [ 0:01] ## LSLR:	brw------- 1 root root 253,  35 Feb 21 02:27 @PREFIX@pv29
| [ 0:01] ## LSLR:	brw------- 1 root root 253,  25 Feb 21 02:27 @PREFIX@pv3
| [ 0:01] ## LSLR:	brw------- 1 root root 253,   5 Feb 21 02:27 @PREFIX@pv30
| [ 0:01] ## LSLR:	brw------- 1 root root 253,  36 Feb 21 02:27 @PREFIX@pv31
| [ 0:01] ## LSLR:	brw------- 1 root root 253,  42 Feb 21 02:27 @PREFIX@pv32
| [ 0:01] ## LSLR:	brw------- 1 root root 253,  22 Feb 21 02:27 @PREFIX@pv33
| [ 0:01] ## LSLR:	brw------- 1 root root 253,  16 Feb 21 02:27 @PREFIX@pv34
| [ 0:01] ## LSLR:	brw------- 1 root root 253,  43 Feb 21 02:27 @PREFIX@pv35
| [ 0:01] ## LSLR:	brw------- 1 root root 253,  17 Feb 21 02:27 @PREFIX@pv36
| [ 0:01] ## LSLR:	brw------- 1 root root 253,  45 Feb 21 02:27 @PREFIX@pv37
| [ 0:01] ## LSLR:	brw------- 1 root root 253,   6 Feb 21 02:27 @PREFIX@pv38
| [ 0:01] ## LSLR:	brw------- 1 root root 253,  37 Feb 21 02:27 @PREFIX@pv39
| [ 0:01] ## LSLR:	brw------- 1 root root 253,  26 Feb 21 02:27 @PREFIX@pv4
| [ 0:01] ## LSLR:	brw------- 1 root root 253,  18 Feb 21 02:27 @PREFIX@pv40
| [ 0:01] ## LSLR:	brw------- 1 root root 253,   3 Feb 21 02:27 @PREFIX@pv41
| [ 0:01] ## LSLR:	brw------- 1 root root 253,  38 Feb 21 02:27 @PREFIX@pv42
| [ 0:01] ## LSLR:	brw------- 1 root root 253,   4 Feb 21 02:27 @PREFIX@pv43
| [ 0:01] ## LSLR:	brw------- 1 root root 253,   7 Feb 21 02:27 @PREFIX@pv44
| [ 0:01] ## LSLR:	brw------- 1 root root 253,   8 Feb 21 02:27 @PREFIX@pv45
| [ 0:01] ## LSLR:	brw------- 1 root root 253,  44 Feb 21 02:27 @PREFIX@pv46
| [ 0:01] ## LSLR:	brw------- 1 root root 253,  49 Feb 21 02:27 @PREFIX@pv47
| [ 0:01] ## LSLR:	brw------- 1 root root 253,  50 Feb 21 02:27 @PREFIX@pv48
| [ 0:01] ## LSLR:	brw------- 1 root root 253,  51 Feb 21 02:27 @PREFIX@pv49
| [ 0:01] ## LSLR:	brw------- 1 root root 253,  39 Feb 21 02:27 @PREFIX@pv5
| [ 0:01] ## LSLR:	brw------- 1 root root 253,  52 Feb 21 02:27 @PREFIX@pv50
| [ 0:01] ## LSLR:	brw------- 1 root root 253,  93 Feb 21 02:27 @PREFIX@pv51
| [ 0:01] ## LSLR:	brw------- 1 root root 253,  74 Feb 21 02:27 @PREFIX@pv52
| [ 0:01] ## LSLR:	brw------- 1 root root 253,  82 Feb 21 02:27 @PREFIX@pv53
| [ 0:01] ## LSLR:	brw------- 1 root root 253,  75 Feb 21 02:27 @PREFIX@pv54
| [ 0:01] ## LSLR:	brw------- 1 root root 253,  96 Feb 21 02:27 @PREFIX@pv55
| [ 0:01] ## LSLR:	brw------- 1 root root 253,  69 Feb 21 02:27 @PREFIX@pv56
| [ 0:01] ## LSLR:	brw------- 1 root root 253,  61 Feb 21 02:27 @PREFIX@pv57
| [ 0:01] ## LSLR:	brw------- 1 root root 253,  83 Feb 21 02:27 @PREFIX@pv58
| [ 0:01] ## LSLR:	brw------- 1 root root 253,  97 Feb 21 02:27 @PREFIX@pv59
| [ 0:01] ## LSLR:	brw------- 1 root root 253,  23 Feb 21 02:27 @PREFIX@pv6
| [ 0:01] ## LSLR:	brw------- 1 root root 253,  84 Feb 21 02:27 @PREFIX@pv60
| [ 0:01] ## LSLR:	brw------- 1 root root 253,  76 Feb 21 02:27 @PREFIX@pv61
| [ 0:01] ## LSLR:	brw------- 1 root root 253,  90 Feb 21 02:27 @PREFIX@pv62
| [ 0:01] ## LSLR:	brw------- 1 root root 253,  62 Feb 21 02:27 @PREFIX@pv63
| [ 0:01] ## LSLR:	brw------- 1 root root 253,  85 Feb 21 02:27 @PREFIX@pv64
| [ 0:01] ## LSLR:	brw------- 1 root root 253,  66 Feb 21 02:27 @PREFIX@pv65
| [ 0:01] ## LSLR:	brw------- 1 root root 253,  56 Feb 21 02:27 @PREFIX@pv66
| [ 0:01] ## LSLR:	brw------- 1 root root 253,  89 Feb 21 02:27 @PREFIX@pv67
| [ 0:01] ## LSLR:	brw------- 1 root root 253,  64 Feb 21 02:27 @PREFIX@pv68
| [ 0:01] ## LSLR:	brw------- 1 root root 253,  92 Feb 21 02:27 @PREFIX@pv69
| [ 0:01] ## LSLR:	brw------- 1 root root 253,  24 Feb 21 02:27 @PREFIX@pv7
| [ 0:01] ## LSLR:	brw------- 1 root root 253,  77 Feb 21 02:27 @PREFIX@pv70
| [ 0:01] ## LSLR:	brw------- 1 root root 253,  78 Feb 21 02:27 @PREFIX@pv71
| [ 0:01] ## LSLR:	brw------- 1 root root 253,  59 Feb 21 02:27 @PREFIX@pv72
| [ 0:01] ## LSLR:	brw------- 1 root root 253,  79 Feb 21 02:27 @PREFIX@pv73
| [ 0:01] ## LSLR:	brw------- 1 root root 253,  67 Feb 21 02:27 @PREFIX@pv74
| [ 0:01] ## LSLR:	brw------- 1 root root 253,  81 Feb 21 02:27 @PREFIX@pv75
| [ 0:01] ## LSLR:	brw------- 1 root root 253,  68 Feb 21 02:27 @PREFIX@pv76
| [ 0:01] ## LSLR:	brw------- 1 root root 253,  57 Feb 21 02:27 @PREFIX@pv77
| [ 0:01] ## LSLR:	brw------- 1 root root 253,  65 Feb 21 02:27 @PREFIX@pv78
| [ 0:01] ## LSLR:	brw------- 1 root root 253,  86 Feb 21 02:27 @PREFIX@pv79
| [ 0:01] ## LSLR:	brw------- 1 root root 253,  27 Feb 21 02:27 @PREFIX@pv8
| [ 0:01] ## LSLR:	brw------- 1 root root 253,  80 Feb 21 02:27 @PREFIX@pv80
| [ 0:01] ## LSLR:	brw------- 1 root root 253,  58 Feb 21 02:27 @PREFIX@pv81
| [ 0:01] ## LSLR:	brw------- 1 root root 253,  53 Feb 21 02:27 @PREFIX@pv82
| [ 0:01] ## LSLR:	brw------- 1 root root 253,  70 Feb 21 02:27 @PREFIX@pv83
| [ 0:01] ## LSLR:	brw------- 1 root root 253,  63 Feb 21 02:27 @PREFIX@pv84
| [ 0:01] ## LSLR:	brw------- 1 root root 253,  99 Feb 21 02:27 @PREFIX@pv85
| [ 0:01] ## LSLR:	brw------- 1 root root 253,  94 Feb 21 02:27 @PREFIX@pv86
| [ 0:01] ## LSLR:	brw------- 1 root root 253,  95 Feb 21 02:27 @PREFIX@pv87
| [ 0:01] ## LSLR:	brw------- 1 root root 253,  71 Feb 21 02:27 @PREFIX@pv88
| [ 0:01] ## LSLR:	brw------- 1 root root 253,  87 Feb 21 02:27 @PREFIX@pv89
| [ 0:01] ## LSLR:	brw------- 1 root root 253,  28 Feb 21 02:27 @PREFIX@pv9
| [ 0:01] ## LSLR:	brw------- 1 root root 253,  72 Feb 21 02:27 @PREFIX@pv90
| [ 0:01] ## LSLR:	brw------- 1 root root 253,  60 Feb 21 02:27 @PREFIX@pv91
| [ 0:01] ## LSLR:	brw------- 1 root root 253,  91 Feb 21 02:27 @PREFIX@pv92
| [ 0:01] ## LSLR:	brw------- 1 root root 253,  73 Feb 21 02:27 @PREFIX@pv93
| [ 0:01] ## LSLR:	brw------- 1 root root 253,  88 Feb 21 02:27 @PREFIX@pv94
| [ 0:01] ## LSLR:	brw------- 1 root root 253,  55 Feb 21 02:27 @PREFIX@pv95
| [ 0:01] ## LSLR:	brw------- 1 root root 253,  98 Feb 21 02:27 @PREFIX@pv96
| [ 0:01] ## LSLR:	brw------- 1 root root 253,  54 Feb 21 02:27 @PREFIX@pv97
| [ 0:01] ## LSLR:	brw------- 1 root root 253, 100 Feb 21 02:27 @PREFIX@pv98
| [ 0:01] ## LSLR:	brw------- 1 root root 253, 101 Feb 21 02:27 @PREFIX@pv99
| [ 0:01] ## LSLR:	crw------- 1 root root  10, 236 Feb 21 02:27 control
| [ 0:01] <======== Udev DB content ========>
| [ 0:01] ## UDEV:	P: /devices/virtual/block/dm-0
| [ 0:02] ## UDEV:	N: dm-0
| [ 0:02] ## UDEV:	E: DEVNAME=/dev/dm-0
| [ 0:02] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-0
| [ 0:02] ## UDEV:	E: DEVTYPE=disk
| [ 0:02] ## UDEV:	E: MAJOR=253
| [ 0:02] ## UDEV:	E: MINOR=0
| [ 0:02] ## UDEV:	E: SUBSYSTEM=block
| [ 0:02] ## UDEV:	
| [ 0:02] ## UDEV:	P: /devices/virtual/block/dm-1
| [ 0:02] ## UDEV:	N: dm-1
| [ 0:02] ## UDEV:	E: DEVNAME=/dev/dm-1
| [ 0:02] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-1
| [ 0:02] ## UDEV:	E: DEVTYPE=disk
| [ 0:02] ## UDEV:	E: MAJOR=253
| [ 0:02] ## UDEV:	E: MINOR=1
| [ 0:02] ## UDEV:	E: SUBSYSTEM=block
| [ 0:02] ## UDEV:	
| [ 0:02] ## UDEV:	P: /devices/virtual/block/dm-10
| [ 0:02] ## UDEV:	N: dm-10
| [ 0:02] ## UDEV:	E: DEVNAME=/dev/dm-10
| [ 0:02] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-10
| [ 0:02] ## UDEV:	E: DEVTYPE=disk
| [ 0:02] ## UDEV:	E: MAJOR=253
| [ 0:02] ## UDEV:	E: MINOR=10
| [ 0:02] ## UDEV:	E: SUBSYSTEM=block
| [ 0:02] ## UDEV:	
| [ 0:02] ## UDEV:	P: /devices/virtual/block/dm-100
| [ 0:02] ## UDEV:	N: dm-100
| [ 0:02] ## UDEV:	E: DEVNAME=/dev/dm-100
| [ 0:02] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-100
| [ 0:02] ## UDEV:	E: DEVTYPE=disk
| [ 0:02] ## UDEV:	E: MAJOR=253
| [ 0:02] ## UDEV:	E: MINOR=100
| [ 0:02] ## UDEV:	E: SUBSYSTEM=block
| [ 0:02] ## UDEV:	
| [ 0:02] ## UDEV:	P: /devices/virtual/block/dm-101
| [ 0:02] ## UDEV:	N: dm-101
| [ 0:02] ## UDEV:	E: DEVNAME=/dev/dm-101
| [ 0:02] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-101
| [ 0:02] ## UDEV:	E: DEVTYPE=disk
| [ 0:02] ## UDEV:	E: MAJOR=253
| [ 0:02] ## UDEV:	E: MINOR=101
| [ 0:02] ## UDEV:	E: SUBSYSTEM=block
| [ 0:02] ## UDEV:	
| [ 0:02] ## UDEV:	P: /devices/virtual/block/dm-102
| [ 0:02] ## UDEV:	N: dm-102
| [ 0:02] ## UDEV:	E: DEVNAME=/dev/dm-102
| [ 0:02] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-102
| [ 0:02] ## UDEV:	E: DEVTYPE=disk
| [ 0:02] ## UDEV:	E: MAJOR=253
| [ 0:02] ## UDEV:	E: MINOR=102
| [ 0:02] ## UDEV:	E: SUBSYSTEM=block
| [ 0:02] ## UDEV:	
| [ 0:02] ## UDEV:	P: /devices/virtual/block/dm-11
| [ 0:02] ## UDEV:	N: dm-11
| [ 0:02] ## UDEV:	E: DEVNAME=/dev/dm-11
| [ 0:02] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-11
| [ 0:02] ## UDEV:	E: DEVTYPE=disk
| [ 0:02] ## UDEV:	E: MAJOR=253
| [ 0:02] ## UDEV:	E: MINOR=11
| [ 0:02] ## UDEV:	E: SUBSYSTEM=block
| [ 0:02] ## UDEV:	
| [ 0:02] ## UDEV:	P: /devices/virtual/block/dm-12
| [ 0:02] ## UDEV:	N: dm-12
| [ 0:02] ## UDEV:	E: DEVNAME=/dev/dm-12
| [ 0:02] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-12
| [ 0:02] ## UDEV:	E: DEVTYPE=disk
| [ 0:02] ## UDEV:	E: MAJOR=253
| [ 0:02] ## UDEV:	E: MINOR=12
| [ 0:02] ## UDEV:	E: SUBSYSTEM=block
| [ 0:02] ## UDEV:	
| [ 0:02] ## UDEV:	P: /devices/virtual/block/dm-13
| [ 0:02] ## UDEV:	N: dm-13
| [ 0:02] ## UDEV:	E: DEVNAME=/dev/dm-13
| [ 0:02] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-13
| [ 0:02] ## UDEV:	E: DEVTYPE=disk
| [ 0:02] ## UDEV:	E: MAJOR=253
| [ 0:02] ## UDEV:	E: MINOR=13
| [ 0:02] ## UDEV:	E: SUBSYSTEM=block
| [ 0:02] ## UDEV:	
| [ 0:02] ## UDEV:	P: /devices/virtual/block/dm-14
| [ 0:02] ## UDEV:	N: dm-14
| [ 0:02] ## UDEV:	E: DEVNAME=/dev/dm-14
| [ 0:02] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-14
| [ 0:02] ## UDEV:	E: DEVTYPE=disk
| [ 0:02] ## UDEV:	E: MAJOR=253
| [ 0:02] ## UDEV:	E: MINOR=14
| [ 0:02] ## UDEV:	E: SUBSYSTEM=block
| [ 0:02] ## UDEV:	
| [ 0:02] ## UDEV:	P: /devices/virtual/block/dm-15
| [ 0:02] ## UDEV:	N: dm-15
| [ 0:02] ## UDEV:	E: DEVNAME=/dev/dm-15
| [ 0:02] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-15
| [ 0:02] ## UDEV:	E: DEVTYPE=disk
| [ 0:02] ## UDEV:	E: MAJOR=253
| [ 0:02] ## UDEV:	E: MINOR=15
| [ 0:02] ## UDEV:	E: SUBSYSTEM=block
| [ 0:02] ## UDEV:	
| [ 0:02] ## UDEV:	P: /devices/virtual/block/dm-16
| [ 0:02] ## UDEV:	N: dm-16
| [ 0:02] ## UDEV:	E: DEVNAME=/dev/dm-16
| [ 0:02] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-16
| [ 0:02] ## UDEV:	E: DEVTYPE=disk
| [ 0:02] ## UDEV:	E: MAJOR=253
| [ 0:02] ## UDEV:	E: MINOR=16
| [ 0:02] ## UDEV:	E: SUBSYSTEM=block
| [ 0:02] ## UDEV:	
| [ 0:02] ## UDEV:	P: /devices/virtual/block/dm-17
| [ 0:02] ## UDEV:	N: dm-17
| [ 0:02] ## UDEV:	E: DEVNAME=/dev/dm-17
| [ 0:02] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-17
| [ 0:02] ## UDEV:	E: DEVTYPE=disk
| [ 0:02] ## UDEV:	E: MAJOR=253
| [ 0:02] ## UDEV:	E: MINOR=17
| [ 0:02] ## UDEV:	E: SUBSYSTEM=block
| [ 0:02] ## UDEV:	
| [ 0:02] ## UDEV:	P: /devices/virtual/block/dm-18
| [ 0:02] ## UDEV:	N: dm-18
| [ 0:02] ## UDEV:	E: DEVNAME=/dev/dm-18
| [ 0:02] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-18
| [ 0:02] ## UDEV:	E: DEVTYPE=disk
| [ 0:02] ## UDEV:	E: MAJOR=253
| [ 0:02] ## UDEV:	E: MINOR=18
| [ 0:02] ## UDEV:	E: SUBSYSTEM=block
| [ 0:02] ## UDEV:	
| [ 0:02] ## UDEV:	P: /devices/virtual/block/dm-19
| [ 0:02] ## UDEV:	N: dm-19
| [ 0:02] ## UDEV:	E: DEVNAME=/dev/dm-19
| [ 0:02] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-19
| [ 0:02] ## UDEV:	E: DEVTYPE=disk
| [ 0:02] ## UDEV:	E: MAJOR=253
| [ 0:02] ## UDEV:	E: MINOR=19
| [ 0:02] ## UDEV:	E: SUBSYSTEM=block
| [ 0:02] ## UDEV:	
| [ 0:02] ## UDEV:	P: /devices/virtual/block/dm-2
| [ 0:02] ## UDEV:	N: dm-2
| [ 0:02] ## UDEV:	E: DEVNAME=/dev/dm-2
| [ 0:02] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-2
| [ 0:02] ## UDEV:	E: DEVTYPE=disk
| [ 0:02] ## UDEV:	E: MAJOR=253
| [ 0:02] ## UDEV:	E: MINOR=2
| [ 0:02] ## UDEV:	E: SUBSYSTEM=block
| [ 0:02] ## UDEV:	
| [ 0:02] ## UDEV:	P: /devices/virtual/block/dm-20
| [ 0:02] ## UDEV:	N: dm-20
| [ 0:02] ## UDEV:	E: DEVNAME=/dev/dm-20
| [ 0:02] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-20
| [ 0:02] ## UDEV:	E: DEVTYPE=disk
| [ 0:02] ## UDEV:	E: MAJOR=253
| [ 0:02] ## UDEV:	E: MINOR=20
| [ 0:02] ## UDEV:	E: SUBSYSTEM=block
| [ 0:02] ## UDEV:	
| [ 0:02] ## UDEV:	P: /devices/virtual/block/dm-21
| [ 0:02] ## UDEV:	N: dm-21
| [ 0:02] ## UDEV:	E: DEVNAME=/dev/dm-21
| [ 0:02] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-21
| [ 0:02] ## UDEV:	E: DEVTYPE=disk
| [ 0:02] ## UDEV:	E: MAJOR=253
| [ 0:02] ## UDEV:	E: MINOR=21
| [ 0:02] ## UDEV:	E: SUBSYSTEM=block
| [ 0:02] ## UDEV:	
| [ 0:02] ## UDEV:	P: /devices/virtual/block/dm-22
| [ 0:02] ## UDEV:	N: dm-22
| [ 0:02] ## UDEV:	E: DEVNAME=/dev/dm-22
| [ 0:02] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-22
| [ 0:02] ## UDEV:	E: DEVTYPE=disk
| [ 0:02] ## UDEV:	E: MAJOR=253
| [ 0:02] ## UDEV:	E: MINOR=22
| [ 0:02] ## UDEV:	E: SUBSYSTEM=block
| [ 0:02] ## UDEV:	
| [ 0:02] ## UDEV:	P: /devices/virtual/block/dm-23
| [ 0:02] ## UDEV:	N: dm-23
| [ 0:02] ## UDEV:	E: DEVNAME=/dev/dm-23
| [ 0:02] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-23
| [ 0:02] ## UDEV:	E: DEVTYPE=disk
| [ 0:02] ## UDEV:	E: MAJOR=253
| [ 0:02] ## UDEV:	E: MINOR=23
| [ 0:02] ## UDEV:	E: SUBSYSTEM=block
| [ 0:02] ## UDEV:	
| [ 0:02] ## UDEV:	P: /devices/virtual/block/dm-24
| [ 0:02] ## UDEV:	N: dm-24
| [ 0:02] ## UDEV:	E: DEVNAME=/dev/dm-24
| [ 0:02] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-24
| [ 0:02] ## UDEV:	E: DEVTYPE=disk
| [ 0:02] ## UDEV:	E: MAJOR=253
| [ 0:02] ## UDEV:	E: MINOR=24
| [ 0:02] ## UDEV:	E: SUBSYSTEM=block
| [ 0:02] ## UDEV:	
| [ 0:02] ## UDEV:	P: /devices/virtual/block/dm-25
| [ 0:02] ## UDEV:	N: dm-25
| [ 0:02] ## UDEV:	E: DEVNAME=/dev/dm-25
| [ 0:02] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-25
| [ 0:02] ## UDEV:	E: DEVTYPE=disk
| [ 0:02] ## UDEV:	E: MAJOR=253
| [ 0:02] ## UDEV:	E: MINOR=25
| [ 0:02] ## UDEV:	E: SUBSYSTEM=block
| [ 0:02] ## UDEV:	
| [ 0:02] ## UDEV:	P: /devices/virtual/block/dm-26
| [ 0:02] ## UDEV:	N: dm-26
| [ 0:02] ## UDEV:	E: DEVNAME=/dev/dm-26
| [ 0:02] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-26
| [ 0:02] ## UDEV:	E: DEVTYPE=disk
| [ 0:02] ## UDEV:	E: MAJOR=253
| [ 0:02] ## UDEV:	E: MINOR=26
| [ 0:02] ## UDEV:	E: SUBSYSTEM=block
| [ 0:02] ## UDEV:	
| [ 0:02] ## UDEV:	P: /devices/virtual/block/dm-27
| [ 0:02] ## UDEV:	N: dm-27
| [ 0:02] ## UDEV:	E: DEVNAME=/dev/dm-27
| [ 0:02] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-27
| [ 0:02] ## UDEV:	E: DEVTYPE=disk
| [ 0:02] ## UDEV:	E: MAJOR=253
| [ 0:02] ## UDEV:	E: MINOR=27
| [ 0:02] ## UDEV:	E: SUBSYSTEM=block
| [ 0:02] ## UDEV:	
| [ 0:02] ## UDEV:	P: /devices/virtual/block/dm-28
| [ 0:02] ## UDEV:	N: dm-28
| [ 0:02] ## UDEV:	E: DEVNAME=/dev/dm-28
| [ 0:02] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-28
| [ 0:02] ## UDEV:	E: DEVTYPE=disk
| [ 0:02] ## UDEV:	E: MAJOR=253
| [ 0:02] ## UDEV:	E: MINOR=28
| [ 0:02] ## UDEV:	E: SUBSYSTEM=block
| [ 0:02] ## UDEV:	
| [ 0:02] ## UDEV:	P: /devices/virtual/block/dm-29
| [ 0:02] ## UDEV:	N: dm-29
| [ 0:02] ## UDEV:	E: DEVNAME=/dev/dm-29
| [ 0:02] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-29
| [ 0:02] ## UDEV:	E: DEVTYPE=disk
| [ 0:02] ## UDEV:	E: MAJOR=253
| [ 0:02] ## UDEV:	E: MINOR=29
| [ 0:02] ## UDEV:	E: SUBSYSTEM=block
| [ 0:02] ## UDEV:	
| [ 0:02] ## UDEV:	P: /devices/virtual/block/dm-3
| [ 0:02] ## UDEV:	N: dm-3
| [ 0:02] ## UDEV:	E: DEVNAME=/dev/dm-3
| [ 0:02] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-3
| [ 0:02] ## UDEV:	E: DEVTYPE=disk
| [ 0:02] ## UDEV:	E: MAJOR=253
| [ 0:02] ## UDEV:	E: MINOR=3
| [ 0:02] ## UDEV:	E: SUBSYSTEM=block
| [ 0:02] ## UDEV:	
| [ 0:02] ## UDEV:	P: /devices/virtual/block/dm-30
| [ 0:02] ## UDEV:	N: dm-30
| [ 0:02] ## UDEV:	E: DEVNAME=/dev/dm-30
| [ 0:02] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-30
| [ 0:02] ## UDEV:	E: DEVTYPE=disk
| [ 0:02] ## UDEV:	E: MAJOR=253
| [ 0:02] ## UDEV:	E: MINOR=30
| [ 0:02] ## UDEV:	E: SUBSYSTEM=block
| [ 0:02] ## UDEV:	
| [ 0:02] ## UDEV:	P: /devices/virtual/block/dm-31
| [ 0:02] ## UDEV:	N: dm-31
| [ 0:02] ## UDEV:	E: DEVNAME=/dev/dm-31
| [ 0:02] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-31
| [ 0:02] ## UDEV:	E: DEVTYPE=disk
| [ 0:02] ## UDEV:	E: MAJOR=253
| [ 0:02] ## UDEV:	E: MINOR=31
| [ 0:02] ## UDEV:	E: SUBSYSTEM=block
| [ 0:02] ## UDEV:	
| [ 0:02] ## UDEV:	P: /devices/virtual/block/dm-32
| [ 0:02] ## UDEV:	N: dm-32
| [ 0:02] ## UDEV:	E: DEVNAME=/dev/dm-32
| [ 0:02] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-32
| [ 0:02] ## UDEV:	E: DEVTYPE=disk
| [ 0:02] ## UDEV:	E: MAJOR=253
| [ 0:02] ## UDEV:	E: MINOR=32
| [ 0:02] ## UDEV:	E: SUBSYSTEM=block
| [ 0:02] ## UDEV:	
| [ 0:02] ## UDEV:	P: /devices/virtual/block/dm-33
| [ 0:02] ## UDEV:	N: dm-33
| [ 0:02] ## UDEV:	E: DEVNAME=/dev/dm-33
| [ 0:02] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-33
| [ 0:02] ## UDEV:	E: DEVTYPE=disk
| [ 0:02] ## UDEV:	E: MAJOR=253
| [ 0:02] ## UDEV:	E: MINOR=33
| [ 0:02] ## UDEV:	E: SUBSYSTEM=block
| [ 0:02] ## UDEV:	
| [ 0:02] ## UDEV:	P: /devices/virtual/block/dm-34
| [ 0:02] ## UDEV:	N: dm-34
| [ 0:02] ## UDEV:	E: DEVNAME=/dev/dm-34
| [ 0:02] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-34
| [ 0:02] ## UDEV:	E: DEVTYPE=disk
| [ 0:02] ## UDEV:	E: MAJOR=253
| [ 0:02] ## UDEV:	E: MINOR=34
| [ 0:02] ## UDEV:	E: SUBSYSTEM=block
| [ 0:02] ## UDEV:	
| [ 0:02] ## UDEV:	P: /devices/virtual/block/dm-35
| [ 0:02] ## UDEV:	N: dm-35
| [ 0:02] ## UDEV:	E: DEVNAME=/dev/dm-35
| [ 0:02] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-35
| [ 0:02] ## UDEV:	E: DEVTYPE=disk
| [ 0:02] ## UDEV:	E: MAJOR=253
| [ 0:02] ## UDEV:	E: MINOR=35
| [ 0:02] ## UDEV:	E: SUBSYSTEM=block
| [ 0:02] ## UDEV:	
| [ 0:02] ## UDEV:	P: /devices/virtual/block/dm-36
| [ 0:02] ## UDEV:	N: dm-36
| [ 0:02] ## UDEV:	E: DEVNAME=/dev/dm-36
| [ 0:02] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-36
| [ 0:02] ## UDEV:	E: DEVTYPE=disk
| [ 0:02] ## UDEV:	E: MAJOR=253
| [ 0:02] ## UDEV:	E: MINOR=36
| [ 0:02] ## UDEV:	E: SUBSYSTEM=block
| [ 0:02] ## UDEV:	
| [ 0:02] ## UDEV:	P: /devices/virtual/block/dm-37
| [ 0:02] ## UDEV:	N: dm-37
| [ 0:02] ## UDEV:	E: DEVNAME=/dev/dm-37
| [ 0:02] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-37
| [ 0:02] ## UDEV:	E: DEVTYPE=disk
| [ 0:02] ## UDEV:	E: MAJOR=253
| [ 0:02] ## UDEV:	E: MINOR=37
| [ 0:02] ## UDEV:	E: SUBSYSTEM=block
| [ 0:02] ## UDEV:	
| [ 0:02] ## UDEV:	P: /devices/virtual/block/dm-38
| [ 0:02] ## UDEV:	N: dm-38
| [ 0:02] ## UDEV:	E: DEVNAME=/dev/dm-38
| [ 0:02] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-38
| [ 0:02] ## UDEV:	E: DEVTYPE=disk
| [ 0:02] ## UDEV:	E: MAJOR=253
| [ 0:02] ## UDEV:	E: MINOR=38
| [ 0:02] ## UDEV:	E: SUBSYSTEM=block
| [ 0:02] ## UDEV:	
| [ 0:02] ## UDEV:	P: /devices/virtual/block/dm-39
| [ 0:02] ## UDEV:	N: dm-39
| [ 0:02] ## UDEV:	E: DEVNAME=/dev/dm-39
| [ 0:02] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-39
| [ 0:02] ## UDEV:	E: DEVTYPE=disk
| [ 0:02] ## UDEV:	E: MAJOR=253
| [ 0:02] ## UDEV:	E: MINOR=39
| [ 0:02] ## UDEV:	E: SUBSYSTEM=block
| [ 0:02] ## UDEV:	
| [ 0:02] ## UDEV:	P: /devices/virtual/block/dm-4
| [ 0:02] ## UDEV:	N: dm-4
| [ 0:02] ## UDEV:	E: DEVNAME=/dev/dm-4
| [ 0:02] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-4
| [ 0:02] ## UDEV:	E: DEVTYPE=disk
| [ 0:02] ## UDEV:	E: MAJOR=253
| [ 0:02] ## UDEV:	E: MINOR=4
| [ 0:02] ## UDEV:	E: SUBSYSTEM=block
| [ 0:02] ## UDEV:	
| [ 0:02] ## UDEV:	P: /devices/virtual/block/dm-40
| [ 0:02] ## UDEV:	N: dm-40
| [ 0:02] ## UDEV:	E: DEVNAME=/dev/dm-40
| [ 0:02] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-40
| [ 0:02] ## UDEV:	E: DEVTYPE=disk
| [ 0:02] ## UDEV:	E: MAJOR=253
| [ 0:02] ## UDEV:	E: MINOR=40
| [ 0:02] ## UDEV:	E: SUBSYSTEM=block
| [ 0:02] ## UDEV:	
| [ 0:02] ## UDEV:	P: /devices/virtual/block/dm-41
| [ 0:02] ## UDEV:	N: dm-41
| [ 0:02] ## UDEV:	E: DEVNAME=/dev/dm-41
| [ 0:02] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-41
| [ 0:02] ## UDEV:	E: DEVTYPE=disk
| [ 0:02] ## UDEV:	E: MAJOR=253
| [ 0:02] ## UDEV:	E: MINOR=41
| [ 0:02] ## UDEV:	E: SUBSYSTEM=block
| [ 0:02] ## UDEV:	
| [ 0:02] ## UDEV:	P: /devices/virtual/block/dm-42
| [ 0:02] ## UDEV:	N: dm-42
| [ 0:02] ## UDEV:	E: DEVNAME=/dev/dm-42
| [ 0:02] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-42
| [ 0:02] ## UDEV:	E: DEVTYPE=disk
| [ 0:02] ## UDEV:	E: MAJOR=253
| [ 0:02] ## UDEV:	E: MINOR=42
| [ 0:02] ## UDEV:	E: SUBSYSTEM=block
| [ 0:02] ## UDEV:	
| [ 0:02] ## UDEV:	P: /devices/virtual/block/dm-43
| [ 0:02] ## UDEV:	N: dm-43
| [ 0:02] ## UDEV:	E: DEVNAME=/dev/dm-43
| [ 0:02] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-43
| [ 0:02] ## UDEV:	E: DEVTYPE=disk
| [ 0:02] ## UDEV:	E: MAJOR=253
| [ 0:02] ## UDEV:	E: MINOR=43
| [ 0:02] ## UDEV:	E: SUBSYSTEM=block
| [ 0:02] ## UDEV:	
| [ 0:02] ## UDEV:	P: /devices/virtual/block/dm-44
| [ 0:02] ## UDEV:	N: dm-44
| [ 0:02] ## UDEV:	E: DEVNAME=/dev/dm-44
| [ 0:02] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-44
| [ 0:02] ## UDEV:	E: DEVTYPE=disk
| [ 0:02] ## UDEV:	E: MAJOR=253
| [ 0:02] ## UDEV:	E: MINOR=44
| [ 0:02] ## UDEV:	E: SUBSYSTEM=block
| [ 0:02] ## UDEV:	
| [ 0:02] ## UDEV:	P: /devices/virtual/block/dm-45
| [ 0:02] ## UDEV:	N: dm-45
| [ 0:02] ## UDEV:	E: DEVNAME=/dev/dm-45
| [ 0:02] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-45
| [ 0:02] ## UDEV:	E: DEVTYPE=disk
| [ 0:02] ## UDEV:	E: MAJOR=253
| [ 0:02] ## UDEV:	E: MINOR=45
| [ 0:02] ## UDEV:	E: SUBSYSTEM=block
| [ 0:02] ## UDEV:	
| [ 0:02] ## UDEV:	P: /devices/virtual/block/dm-46
| [ 0:02] ## UDEV:	N: dm-46
| [ 0:02] ## UDEV:	E: DEVNAME=/dev/dm-46
| [ 0:02] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-46
| [ 0:02] ## UDEV:	E: DEVTYPE=disk
| [ 0:02] ## UDEV:	E: MAJOR=253
| [ 0:02] ## UDEV:	E: MINOR=46
| [ 0:02] ## UDEV:	E: SUBSYSTEM=block
| [ 0:02] ## UDEV:	
| [ 0:02] ## UDEV:	P: /devices/virtual/block/dm-47
| [ 0:02] ## UDEV:	N: dm-47
| [ 0:02] ## UDEV:	E: DEVNAME=/dev/dm-47
| [ 0:02] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-47
| [ 0:02] ## UDEV:	E: DEVTYPE=disk
| [ 0:02] ## UDEV:	E: MAJOR=253
| [ 0:02] ## UDEV:	E: MINOR=47
| [ 0:02] ## UDEV:	E: SUBSYSTEM=block
| [ 0:02] ## UDEV:	
| [ 0:02] ## UDEV:	P: /devices/virtual/block/dm-48
| [ 0:02] ## UDEV:	N: dm-48
| [ 0:02] ## UDEV:	E: DEVNAME=/dev/dm-48
| [ 0:02] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-48
| [ 0:02] ## UDEV:	E: DEVTYPE=disk
| [ 0:02] ## UDEV:	E: MAJOR=253
| [ 0:02] ## UDEV:	E: MINOR=48
| [ 0:02] ## UDEV:	E: SUBSYSTEM=block
| [ 0:02] ## UDEV:	
| [ 0:02] ## UDEV:	P: /devices/virtual/block/dm-49
| [ 0:02] ## UDEV:	N: dm-49
| [ 0:02] ## UDEV:	E: DEVNAME=/dev/dm-49
| [ 0:02] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-49
| [ 0:02] ## UDEV:	E: DEVTYPE=disk
| [ 0:02] ## UDEV:	E: MAJOR=253
| [ 0:02] ## UDEV:	E: MINOR=49
| [ 0:02] ## UDEV:	E: SUBSYSTEM=block
| [ 0:02] ## UDEV:	
| [ 0:02] ## UDEV:	P: /devices/virtual/block/dm-5
| [ 0:02] ## UDEV:	N: dm-5
| [ 0:02] ## UDEV:	E: DEVNAME=/dev/dm-5
| [ 0:02] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-5
| [ 0:02] ## UDEV:	E: DEVTYPE=disk
| [ 0:02] ## UDEV:	E: MAJOR=253
| [ 0:02] ## UDEV:	E: MINOR=5
| [ 0:02] ## UDEV:	E: SUBSYSTEM=block
| [ 0:02] ## UDEV:	
| [ 0:02] ## UDEV:	P: /devices/virtual/block/dm-50
| [ 0:02] ## UDEV:	N: dm-50
| [ 0:02] ## UDEV:	E: DEVNAME=/dev/dm-50
| [ 0:02] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-50
| [ 0:02] ## UDEV:	E: DEVTYPE=disk
| [ 0:02] ## UDEV:	E: MAJOR=253
| [ 0:02] ## UDEV:	E: MINOR=50
| [ 0:02] ## UDEV:	E: SUBSYSTEM=block
| [ 0:02] ## UDEV:	
| [ 0:02] ## UDEV:	P: /devices/virtual/block/dm-51
| [ 0:02] ## UDEV:	N: dm-51
| [ 0:02] ## UDEV:	E: DEVNAME=/dev/dm-51
| [ 0:02] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-51
| [ 0:02] ## UDEV:	E: DEVTYPE=disk
| [ 0:02] ## UDEV:	E: MAJOR=253
| [ 0:02] ## UDEV:	E: MINOR=51
| [ 0:02] ## UDEV:	E: SUBSYSTEM=block
| [ 0:02] ## UDEV:	
| [ 0:02] ## UDEV:	P: /devices/virtual/block/dm-52
| [ 0:02] ## UDEV:	N: dm-52
| [ 0:02] ## UDEV:	E: DEVNAME=/dev/dm-52
| [ 0:02] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-52
| [ 0:02] ## UDEV:	E: DEVTYPE=disk
| [ 0:02] ## UDEV:	E: MAJOR=253
| [ 0:02] ## UDEV:	E: MINOR=52
| [ 0:02] ## UDEV:	E: SUBSYSTEM=block
| [ 0:02] ## UDEV:	
| [ 0:02] ## UDEV:	P: /devices/virtual/block/dm-53
| [ 0:02] ## UDEV:	N: dm-53
| [ 0:02] ## UDEV:	E: DEVNAME=/dev/dm-53
| [ 0:02] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-53
| [ 0:02] ## UDEV:	E: DEVTYPE=disk
| [ 0:02] ## UDEV:	E: MAJOR=253
| [ 0:02] ## UDEV:	E: MINOR=53
| [ 0:02] ## UDEV:	E: SUBSYSTEM=block
| [ 0:02] ## UDEV:	
| [ 0:02] ## UDEV:	P: /devices/virtual/block/dm-54
| [ 0:02] ## UDEV:	N: dm-54
| [ 0:02] ## UDEV:	E: DEVNAME=/dev/dm-54
| [ 0:02] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-54
| [ 0:02] ## UDEV:	E: DEVTYPE=disk
| [ 0:02] ## UDEV:	E: MAJOR=253
| [ 0:02] ## UDEV:	E: MINOR=54
| [ 0:02] ## UDEV:	E: SUBSYSTEM=block
| [ 0:02] ## UDEV:	
| [ 0:02] ## UDEV:	P: /devices/virtual/block/dm-55
| [ 0:02] ## UDEV:	N: dm-55
| [ 0:02] ## UDEV:	E: DEVNAME=/dev/dm-55
| [ 0:02] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-55
| [ 0:02] ## UDEV:	E: DEVTYPE=disk
| [ 0:02] ## UDEV:	E: MAJOR=253
| [ 0:02] ## UDEV:	E: MINOR=55
| [ 0:02] ## UDEV:	E: SUBSYSTEM=block
| [ 0:02] ## UDEV:	
| [ 0:02] ## UDEV:	P: /devices/virtual/block/dm-56
| [ 0:02] ## UDEV:	N: dm-56
| [ 0:02] ## UDEV:	E: DEVNAME=/dev/dm-56
| [ 0:02] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-56
| [ 0:02] ## UDEV:	E: DEVTYPE=disk
| [ 0:02] ## UDEV:	E: MAJOR=253
| [ 0:02] ## UDEV:	E: MINOR=56
| [ 0:02] ## UDEV:	E: SUBSYSTEM=block
| [ 0:02] ## UDEV:	
| [ 0:02] ## UDEV:	P: /devices/virtual/block/dm-57
| [ 0:02] ## UDEV:	N: dm-57
| [ 0:02] ## UDEV:	E: DEVNAME=/dev/dm-57
| [ 0:02] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-57
| [ 0:02] ## UDEV:	E: DEVTYPE=disk
| [ 0:02] ## UDEV:	E: MAJOR=253
| [ 0:02] ## UDEV:	E: MINOR=57
| [ 0:02] ## UDEV:	E: SUBSYSTEM=block
| [ 0:02] ## UDEV:	
| [ 0:02] ## UDEV:	P: /devices/virtual/block/dm-58
| [ 0:02] ## UDEV:	N: dm-58
| [ 0:02] ## UDEV:	E: DEVNAME=/dev/dm-58
| [ 0:02] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-58
| [ 0:02] ## UDEV:	E: DEVTYPE=disk
| [ 0:02] ## UDEV:	E: MAJOR=253
| [ 0:02] ## UDEV:	E: MINOR=58
| [ 0:02] ## UDEV:	E: SUBSYSTEM=block
| [ 0:02] ## UDEV:	
| [ 0:02] ## UDEV:	P: /devices/virtual/block/dm-59
| [ 0:02] ## UDEV:	N: dm-59
| [ 0:02] ## UDEV:	E: DEVNAME=/dev/dm-59
| [ 0:02] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-59
| [ 0:02] ## UDEV:	E: DEVTYPE=disk
| [ 0:02] ## UDEV:	E: MAJOR=253
| [ 0:02] ## UDEV:	E: MINOR=59
| [ 0:02] ## UDEV:	E: SUBSYSTEM=block
| [ 0:02] ## UDEV:	
| [ 0:02] ## UDEV:	P: /devices/virtual/block/dm-6
| [ 0:02] ## UDEV:	N: dm-6
| [ 0:02] ## UDEV:	E: DEVNAME=/dev/dm-6
| [ 0:02] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-6
| [ 0:02] ## UDEV:	E: DEVTYPE=disk
| [ 0:02] ## UDEV:	E: MAJOR=253
| [ 0:02] ## UDEV:	E: MINOR=6
| [ 0:02] ## UDEV:	E: SUBSYSTEM=block
| [ 0:02] ## UDEV:	
| [ 0:02] ## UDEV:	P: /devices/virtual/block/dm-60
| [ 0:02] ## UDEV:	N: dm-60
| [ 0:02] ## UDEV:	E: DEVNAME=/dev/dm-60
| [ 0:02] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-60
| [ 0:02] ## UDEV:	E: DEVTYPE=disk
| [ 0:02] ## UDEV:	E: MAJOR=253
| [ 0:02] ## UDEV:	E: MINOR=60
| [ 0:02] ## UDEV:	E: SUBSYSTEM=block
| [ 0:02] ## UDEV:	
| [ 0:02] ## UDEV:	P: /devices/virtual/block/dm-61
| [ 0:02] ## UDEV:	N: dm-61
| [ 0:02] ## UDEV:	E: DEVNAME=/dev/dm-61
| [ 0:02] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-61
| [ 0:02] ## UDEV:	E: DEVTYPE=disk
| [ 0:02] ## UDEV:	E: MAJOR=253
| [ 0:02] ## UDEV:	E: MINOR=61
| [ 0:02] ## UDEV:	E: SUBSYSTEM=block
| [ 0:02] ## UDEV:	
| [ 0:02] ## UDEV:	P: /devices/virtual/block/dm-62
| [ 0:02] ## UDEV:	N: dm-62
| [ 0:02] ## UDEV:	E: DEVNAME=/dev/dm-62
| [ 0:02] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-62
| [ 0:02] ## UDEV:	E: DEVTYPE=disk
| [ 0:02] ## UDEV:	E: MAJOR=253
| [ 0:02] ## UDEV:	E: MINOR=62
| [ 0:02] ## UDEV:	E: SUBSYSTEM=block
| [ 0:02] ## UDEV:	
| [ 0:02] ## UDEV:	P: /devices/virtual/block/dm-63
| [ 0:02] ## UDEV:	N: dm-63
| [ 0:02] ## UDEV:	E: DEVNAME=/dev/dm-63
| [ 0:02] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-63
| [ 0:02] ## UDEV:	E: DEVTYPE=disk
| [ 0:02] ## UDEV:	E: MAJOR=253
| [ 0:02] ## UDEV:	E: MINOR=63
| [ 0:02] ## UDEV:	E: SUBSYSTEM=block
| [ 0:02] ## UDEV:	
| [ 0:02] ## UDEV:	P: /devices/virtual/block/dm-64
| [ 0:02] ## UDEV:	N: dm-64
| [ 0:02] ## UDEV:	E: DEVNAME=/dev/dm-64
| [ 0:02] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-64
| [ 0:02] ## UDEV:	E: DEVTYPE=disk
| [ 0:02] ## UDEV:	E: MAJOR=253
| [ 0:02] ## UDEV:	E: MINOR=64
| [ 0:02] ## UDEV:	E: SUBSYSTEM=block
| [ 0:02] ## UDEV:	
| [ 0:02] ## UDEV:	P: /devices/virtual/block/dm-65
| [ 0:02] ## UDEV:	N: dm-65
| [ 0:02] ## UDEV:	E: DEVNAME=/dev/dm-65
| [ 0:02] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-65
| [ 0:02] ## UDEV:	E: DEVTYPE=disk
| [ 0:02] ## UDEV:	E: MAJOR=253
| [ 0:02] ## UDEV:	E: MINOR=65
| [ 0:02] ## UDEV:	E: SUBSYSTEM=block
| [ 0:02] ## UDEV:	
| [ 0:02] ## UDEV:	P: /devices/virtual/block/dm-66
| [ 0:02] ## UDEV:	N: dm-66
| [ 0:02] ## UDEV:	E: DEVNAME=/dev/dm-66
| [ 0:02] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-66
| [ 0:02] ## UDEV:	E: DEVTYPE=disk
| [ 0:02] ## UDEV:	E: MAJOR=253
| [ 0:02] ## UDEV:	E: MINOR=66
| [ 0:02] ## UDEV:	E: SUBSYSTEM=block
| [ 0:02] ## UDEV:	
| [ 0:02] ## UDEV:	P: /devices/virtual/block/dm-67
| [ 0:02] ## UDEV:	N: dm-67
| [ 0:02] ## UDEV:	E: DEVNAME=/dev/dm-67
| [ 0:02] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-67
| [ 0:02] ## UDEV:	E: DEVTYPE=disk
| [ 0:02] ## UDEV:	E: MAJOR=253
| [ 0:02] ## UDEV:	E: MINOR=67
| [ 0:02] ## UDEV:	E: SUBSYSTEM=block
| [ 0:02] ## UDEV:	
| [ 0:02] ## UDEV:	P: /devices/virtual/block/dm-68
| [ 0:02] ## UDEV:	N: dm-68
| [ 0:02] ## UDEV:	E: DEVNAME=/dev/dm-68
| [ 0:02] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-68
| [ 0:02] ## UDEV:	E: DEVTYPE=disk
| [ 0:02] ## UDEV:	E: MAJOR=253
| [ 0:02] ## UDEV:	E: MINOR=68
| [ 0:02] ## UDEV:	E: SUBSYSTEM=block
| [ 0:02] ## UDEV:	
| [ 0:02] ## UDEV:	P: /devices/virtual/block/dm-69
| [ 0:02] ## UDEV:	N: dm-69
| [ 0:02] ## UDEV:	E: DEVNAME=/dev/dm-69
| [ 0:02] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-69
| [ 0:02] ## UDEV:	E: DEVTYPE=disk
| [ 0:02] ## UDEV:	E: MAJOR=253
| [ 0:02] ## UDEV:	E: MINOR=69
| [ 0:02] ## UDEV:	E: SUBSYSTEM=block
| [ 0:02] ## UDEV:	
| [ 0:02] ## UDEV:	P: /devices/virtual/block/dm-7
| [ 0:02] ## UDEV:	N: dm-7
| [ 0:02] ## UDEV:	E: DEVNAME=/dev/dm-7
| [ 0:02] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-7
| [ 0:02] ## UDEV:	E: DEVTYPE=disk
| [ 0:02] ## UDEV:	E: MAJOR=253
| [ 0:02] ## UDEV:	E: MINOR=7
| [ 0:02] ## UDEV:	E: SUBSYSTEM=block
| [ 0:02] ## UDEV:	
| [ 0:02] ## UDEV:	P: /devices/virtual/block/dm-70
| [ 0:02] ## UDEV:	N: dm-70
| [ 0:02] ## UDEV:	E: DEVNAME=/dev/dm-70
| [ 0:02] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-70
| [ 0:02] ## UDEV:	E: DEVTYPE=disk
| [ 0:02] ## UDEV:	E: MAJOR=253
| [ 0:02] ## UDEV:	E: MINOR=70
| [ 0:02] ## UDEV:	E: SUBSYSTEM=block
| [ 0:02] ## UDEV:	
| [ 0:02] ## UDEV:	P: /devices/virtual/block/dm-71
| [ 0:02] ## UDEV:	N: dm-71
| [ 0:02] ## UDEV:	E: DEVNAME=/dev/dm-71
| [ 0:02] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-71
| [ 0:02] ## UDEV:	E: DEVTYPE=disk
| [ 0:02] ## UDEV:	E: MAJOR=253
| [ 0:02] ## UDEV:	E: MINOR=71
| [ 0:02] ## UDEV:	E: SUBSYSTEM=block
| [ 0:02] ## UDEV:	
| [ 0:02] ## UDEV:	P: /devices/virtual/block/dm-72
| [ 0:02] ## UDEV:	N: dm-72
| [ 0:02] ## UDEV:	E: DEVNAME=/dev/dm-72
| [ 0:02] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-72
| [ 0:02] ## UDEV:	E: DEVTYPE=disk
| [ 0:02] ## UDEV:	E: MAJOR=253
| [ 0:02] ## UDEV:	E: MINOR=72
| [ 0:02] ## UDEV:	E: SUBSYSTEM=block
| [ 0:02] ## UDEV:	
| [ 0:02] ## UDEV:	P: /devices/virtual/block/dm-73
| [ 0:02] ## UDEV:	N: dm-73
| [ 0:02] ## UDEV:	E: DEVNAME=/dev/dm-73
| [ 0:02] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-73
| [ 0:02] ## UDEV:	E: DEVTYPE=disk
| [ 0:02] ## UDEV:	E: MAJOR=253
| [ 0:02] ## UDEV:	E: MINOR=73
| [ 0:02] ## UDEV:	E: SUBSYSTEM=block
| [ 0:02] ## UDEV:	
| [ 0:02] ## UDEV:	P: /devices/virtual/block/dm-74
| [ 0:02] ## UDEV:	N: dm-74
| [ 0:02] ## UDEV:	E: DEVNAME=/dev/dm-74
| [ 0:02] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-74
| [ 0:02] ## UDEV:	E: DEVTYPE=disk
| [ 0:02] ## UDEV:	E: MAJOR=253
| [ 0:02] ## UDEV:	E: MINOR=74
| [ 0:02] ## UDEV:	E: SUBSYSTEM=block
| [ 0:02] ## UDEV:	
| [ 0:02] ## UDEV:	P: /devices/virtual/block/dm-75
| [ 0:02] ## UDEV:	N: dm-75
| [ 0:02] ## UDEV:	E: DEVNAME=/dev/dm-75
| [ 0:02] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-75
| [ 0:02] ## UDEV:	E: DEVTYPE=disk
| [ 0:02] ## UDEV:	E: MAJOR=253
| [ 0:02] ## UDEV:	E: MINOR=75
| [ 0:02] ## UDEV:	E: SUBSYSTEM=block
| [ 0:02] ## UDEV:	
| [ 0:02] ## UDEV:	P: /devices/virtual/block/dm-76
| [ 0:02] ## UDEV:	N: dm-76
| [ 0:02] ## UDEV:	E: DEVNAME=/dev/dm-76
| [ 0:02] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-76
| [ 0:02] ## UDEV:	E: DEVTYPE=disk
| [ 0:02] ## UDEV:	E: MAJOR=253
| [ 0:02] ## UDEV:	E: MINOR=76
| [ 0:02] ## UDEV:	E: SUBSYSTEM=block
| [ 0:02] ## UDEV:	
| [ 0:02] ## UDEV:	P: /devices/virtual/block/dm-77
| [ 0:02] ## UDEV:	N: dm-77
| [ 0:02] ## UDEV:	E: DEVNAME=/dev/dm-77
| [ 0:02] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-77
| [ 0:02] ## UDEV:	E: DEVTYPE=disk
| [ 0:02] ## UDEV:	E: MAJOR=253
| [ 0:02] ## UDEV:	E: MINOR=77
| [ 0:02] ## UDEV:	E: SUBSYSTEM=block
| [ 0:02] ## UDEV:	
| [ 0:02] ## UDEV:	P: /devices/virtual/block/dm-78
| [ 0:02] ## UDEV:	N: dm-78
| [ 0:02] ## UDEV:	E: DEVNAME=/dev/dm-78
| [ 0:02] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-78
| [ 0:02] ## UDEV:	E: DEVTYPE=disk
| [ 0:02] ## UDEV:	E: MAJOR=253
| [ 0:02] ## UDEV:	E: MINOR=78
| [ 0:02] ## UDEV:	E: SUBSYSTEM=block
| [ 0:02] ## UDEV:	
| [ 0:02] ## UDEV:	P: /devices/virtual/block/dm-79
| [ 0:02] ## UDEV:	N: dm-79
| [ 0:02] ## UDEV:	E: DEVNAME=/dev/dm-79
| [ 0:02] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-79
| [ 0:02] ## UDEV:	E: DEVTYPE=disk
| [ 0:02] ## UDEV:	E: MAJOR=253
| [ 0:02] ## UDEV:	E: MINOR=79
| [ 0:02] ## UDEV:	E: SUBSYSTEM=block
| [ 0:02] ## UDEV:	
| [ 0:02] ## UDEV:	P: /devices/virtual/block/dm-8
| [ 0:02] ## UDEV:	N: dm-8
| [ 0:02] ## UDEV:	E: DEVNAME=/dev/dm-8
| [ 0:02] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-8
| [ 0:02] ## UDEV:	E: DEVTYPE=disk
| [ 0:02] ## UDEV:	E: MAJOR=253
| [ 0:02] ## UDEV:	E: MINOR=8
| [ 0:02] ## UDEV:	E: SUBSYSTEM=block
| [ 0:02] ## UDEV:	
| [ 0:02] ## UDEV:	P: /devices/virtual/block/dm-80
| [ 0:02] ## UDEV:	N: dm-80
| [ 0:02] ## UDEV:	E: DEVNAME=/dev/dm-80
| [ 0:02] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-80
| [ 0:02] ## UDEV:	E: DEVTYPE=disk
| [ 0:02] ## UDEV:	E: MAJOR=253
| [ 0:02] ## UDEV:	E: MINOR=80
| [ 0:02] ## UDEV:	E: SUBSYSTEM=block
| [ 0:02] ## UDEV:	
| [ 0:02] ## UDEV:	P: /devices/virtual/block/dm-81
| [ 0:02] ## UDEV:	N: dm-81
| [ 0:02] ## UDEV:	E: DEVNAME=/dev/dm-81
| [ 0:02] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-81
| [ 0:02] ## UDEV:	E: DEVTYPE=disk
| [ 0:02] ## UDEV:	E: MAJOR=253
| [ 0:02] ## UDEV:	E: MINOR=81
| [ 0:02] ## UDEV:	E: SUBSYSTEM=block
| [ 0:02] ## UDEV:	
| [ 0:02] ## UDEV:	P: /devices/virtual/block/dm-82
| [ 0:02] ## UDEV:	N: dm-82
| [ 0:02] ## UDEV:	E: DEVNAME=/dev/dm-82
| [ 0:02] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-82
| [ 0:02] ## UDEV:	E: DEVTYPE=disk
| [ 0:02] ## UDEV:	E: MAJOR=253
| [ 0:02] ## UDEV:	E: MINOR=82
| [ 0:02] ## UDEV:	E: SUBSYSTEM=block
| [ 0:02] ## UDEV:	
| [ 0:02] ## UDEV:	P: /devices/virtual/block/dm-83
| [ 0:02] ## UDEV:	N: dm-83
| [ 0:02] ## UDEV:	E: DEVNAME=/dev/dm-83
| [ 0:02] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-83
| [ 0:02] ## UDEV:	E: DEVTYPE=disk
| [ 0:02] ## UDEV:	E: MAJOR=253
| [ 0:02] ## UDEV:	E: MINOR=83
| [ 0:02] ## UDEV:	E: SUBSYSTEM=block
| [ 0:02] ## UDEV:	
| [ 0:02] ## UDEV:	P: /devices/virtual/block/dm-84
| [ 0:02] ## UDEV:	N: dm-84
| [ 0:02] ## UDEV:	E: DEVNAME=/dev/dm-84
| [ 0:02] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-84
| [ 0:02] ## UDEV:	E: DEVTYPE=disk
| [ 0:02] ## UDEV:	E: MAJOR=253
| [ 0:02] ## UDEV:	E: MINOR=84
| [ 0:02] ## UDEV:	E: SUBSYSTEM=block
| [ 0:02] ## UDEV:	
| [ 0:02] ## UDEV:	P: /devices/virtual/block/dm-85
| [ 0:02] ## UDEV:	N: dm-85
| [ 0:02] ## UDEV:	E: DEVNAME=/dev/dm-85
| [ 0:02] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-85
| [ 0:02] ## UDEV:	E: DEVTYPE=disk
| [ 0:02] ## UDEV:	E: MAJOR=253
| [ 0:02] ## UDEV:	E: MINOR=85
| [ 0:02] ## UDEV:	E: SUBSYSTEM=block
| [ 0:02] ## UDEV:	
| [ 0:02] ## UDEV:	P: /devices/virtual/block/dm-86
| [ 0:02] ## UDEV:	N: dm-86
| [ 0:02] ## UDEV:	E: DEVNAME=/dev/dm-86
| [ 0:02] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-86
| [ 0:02] ## UDEV:	E: DEVTYPE=disk
| [ 0:02] ## UDEV:	E: MAJOR=253
| [ 0:02] ## UDEV:	E: MINOR=86
| [ 0:02] ## UDEV:	E: SUBSYSTEM=block
| [ 0:02] ## UDEV:	
| [ 0:02] ## UDEV:	P: /devices/virtual/block/dm-87
| [ 0:02] ## UDEV:	N: dm-87
| [ 0:02] ## UDEV:	E: DEVNAME=/dev/dm-87
| [ 0:02] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-87
| [ 0:02] ## UDEV:	E: DEVTYPE=disk
| [ 0:02] ## UDEV:	E: MAJOR=253
| [ 0:02] ## UDEV:	E: MINOR=87
| [ 0:02] ## UDEV:	E: SUBSYSTEM=block
| [ 0:02] ## UDEV:	
| [ 0:02] ## UDEV:	P: /devices/virtual/block/dm-88
| [ 0:02] ## UDEV:	N: dm-88
| [ 0:02] ## UDEV:	E: DEVNAME=/dev/dm-88
| [ 0:02] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-88
| [ 0:02] ## UDEV:	E: DEVTYPE=disk
| [ 0:02] ## UDEV:	E: MAJOR=253
| [ 0:02] ## UDEV:	E: MINOR=88
| [ 0:02] ## UDEV:	E: SUBSYSTEM=block
| [ 0:02] ## UDEV:	
| [ 0:02] ## UDEV:	P: /devices/virtual/block/dm-89
| [ 0:02] ## UDEV:	N: dm-89
| [ 0:02] ## UDEV:	E: DEVNAME=/dev/dm-89
| [ 0:02] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-89
| [ 0:02] ## UDEV:	E: DEVTYPE=disk
| [ 0:02] ## UDEV:	E: MAJOR=253
| [ 0:02] ## UDEV:	E: MINOR=89
| [ 0:02] ## UDEV:	E: SUBSYSTEM=block
| [ 0:02] ## UDEV:	
| [ 0:02] ## UDEV:	P: /devices/virtual/block/dm-9
| [ 0:02] ## UDEV:	N: dm-9
| [ 0:02] ## UDEV:	E: DEVNAME=/dev/dm-9
| [ 0:02] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-9
| [ 0:02] ## UDEV:	E: DEVTYPE=disk
| [ 0:02] ## UDEV:	E: MAJOR=253
| [ 0:02] ## UDEV:	E: MINOR=9
| [ 0:02] ## UDEV:	E: SUBSYSTEM=block
| [ 0:02] ## UDEV:	
| [ 0:02] ## UDEV:	P: /devices/virtual/block/dm-90
| [ 0:02] ## UDEV:	N: dm-90
| [ 0:02] ## UDEV:	E: DEVNAME=/dev/dm-90
| [ 0:02] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-90
| [ 0:02] ## UDEV:	E: DEVTYPE=disk
| [ 0:02] ## UDEV:	E: MAJOR=253
| [ 0:02] ## UDEV:	E: MINOR=90
| [ 0:02] ## UDEV:	E: SUBSYSTEM=block
| [ 0:02] ## UDEV:	
| [ 0:02] ## UDEV:	P: /devices/virtual/block/dm-91
| [ 0:02] ## UDEV:	N: dm-91
| [ 0:02] ## UDEV:	E: DEVNAME=/dev/dm-91
| [ 0:02] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-91
| [ 0:02] ## UDEV:	E: DEVTYPE=disk
| [ 0:02] ## UDEV:	E: MAJOR=253
| [ 0:02] ## UDEV:	E: MINOR=91
| [ 0:02] ## UDEV:	E: SUBSYSTEM=block
| [ 0:02] ## UDEV:	
| [ 0:02] ## UDEV:	P: /devices/virtual/block/dm-92
| [ 0:02] ## UDEV:	N: dm-92
| [ 0:02] ## UDEV:	E: DEVNAME=/dev/dm-92
| [ 0:02] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-92
| [ 0:02] ## UDEV:	E: DEVTYPE=disk
| [ 0:02] ## UDEV:	E: MAJOR=253
| [ 0:02] ## UDEV:	E: MINOR=92
| [ 0:02] ## UDEV:	E: SUBSYSTEM=block
| [ 0:02] ## UDEV:	
| [ 0:02] ## UDEV:	P: /devices/virtual/block/dm-93
| [ 0:02] ## UDEV:	N: dm-93
| [ 0:02] ## UDEV:	E: DEVNAME=/dev/dm-93
| [ 0:02] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-93
| [ 0:02] ## UDEV:	E: DEVTYPE=disk
| [ 0:02] ## UDEV:	E: MAJOR=253
| [ 0:02] ## UDEV:	E: MINOR=93
| [ 0:02] ## UDEV:	E: SUBSYSTEM=block
| [ 0:02] ## UDEV:	
| [ 0:02] ## UDEV:	P: /devices/virtual/block/dm-94
| [ 0:02] ## UDEV:	N: dm-94
| [ 0:02] ## UDEV:	E: DEVNAME=/dev/dm-94
| [ 0:02] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-94
| [ 0:02] ## UDEV:	E: DEVTYPE=disk
| [ 0:02] ## UDEV:	E: MAJOR=253
| [ 0:02] ## UDEV:	E: MINOR=94
| [ 0:02] ## UDEV:	E: SUBSYSTEM=block
| [ 0:02] ## UDEV:	
| [ 0:02] ## UDEV:	P: /devices/virtual/block/dm-95
| [ 0:02] ## UDEV:	N: dm-95
| [ 0:02] ## UDEV:	E: DEVNAME=/dev/dm-95
| [ 0:02] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-95
| [ 0:02] ## UDEV:	E: DEVTYPE=disk
| [ 0:02] ## UDEV:	E: MAJOR=253
| [ 0:02] ## UDEV:	E: MINOR=95
| [ 0:02] ## UDEV:	E: SUBSYSTEM=block
| [ 0:02] ## UDEV:	
| [ 0:02] ## UDEV:	P: /devices/virtual/block/dm-96
| [ 0:02] ## UDEV:	N: dm-96
| [ 0:02] ## UDEV:	E: DEVNAME=/dev/dm-96
| [ 0:02] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-96
| [ 0:02] ## UDEV:	E: DEVTYPE=disk
| [ 0:02] ## UDEV:	E: MAJOR=253
| [ 0:02] ## UDEV:	E: MINOR=96
| [ 0:02] ## UDEV:	E: SUBSYSTEM=block
| [ 0:02] ## UDEV:	
| [ 0:02] ## UDEV:	P: /devices/virtual/block/dm-97
| [ 0:02] ## UDEV:	N: dm-97
| [ 0:02] ## UDEV:	E: DEVNAME=/dev/dm-97
| [ 0:02] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-97
| [ 0:02] ## UDEV:	E: DEVTYPE=disk
| [ 0:02] ## UDEV:	E: MAJOR=253
| [ 0:02] ## UDEV:	E: MINOR=97
| [ 0:02] ## UDEV:	E: SUBSYSTEM=block
| [ 0:02] ## UDEV:	
| [ 0:02] ## UDEV:	P: /devices/virtual/block/dm-98
| [ 0:02] ## UDEV:	N: dm-98
| [ 0:02] ## UDEV:	E: DEVNAME=/dev/dm-98
| [ 0:02] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-98
| [ 0:02] ## UDEV:	E: DEVTYPE=disk
| [ 0:02] ## UDEV:	E: MAJOR=253
| [ 0:02] ## UDEV:	E: MINOR=98
| [ 0:02] ## UDEV:	E: SUBSYSTEM=block
| [ 0:02] ## UDEV:	
| [ 0:02] ## UDEV:	P: /devices/virtual/block/dm-99
| [ 0:02] ## UDEV:	N: dm-99
| [ 0:02] ## UDEV:	E: DEVNAME=/dev/dm-99
| [ 0:02] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-99
| [ 0:02] ## UDEV:	E: DEVTYPE=disk
| [ 0:02] ## UDEV:	E: MAJOR=253
| [ 0:02] ## UDEV:	E: MINOR=99
| [ 0:02] ## UDEV:	E: SUBSYSTEM=block
| [ 0:02] ## UDEV:	
| [ 0:02] ## UDEV:	P: /devices/virtual/block/loop0
| [ 0:02] ## UDEV:	N: loop0
| [ 0:02] ## UDEV:	E: DEVNAME=/dev/loop0
| [ 0:02] ## UDEV:	E: DEVPATH=/devices/virtual/block/loop0
| [ 0:02] ## UDEV:	E: DEVTYPE=disk
| [ 0:02] ## UDEV:	E: MAJOR=7
| [ 0:02] ## UDEV:	E: MINOR=0
| [ 0:02] ## UDEV:	E: SUBSYSTEM=block
| [ 0:02] ## UDEV:	
| [ 0:02] <======== Script file "vgcreate-many-pvs.sh" ========>
| [ 0:02] ## Line: 1 	 #!/usr/bin/env bash
| [ 0:02] ## Line: 2 	 
| [ 0:02] ## Line: 3 	 # Copyright (C) 2015 Red Hat, Inc. All rights reserved.
| [ 0:02] ## Line: 4 	 #
| [ 0:02] ## Line: 5 	 # This copyrighted material is made available to anyone wishing to use,
| [ 0:02] ## Line: 6 	 # modify, copy, or redistribute it subject to the terms and conditions
| [ 0:02] ## Line: 7 	 # of the GNU General Public License v.2.
| [ 0:02] ## Line: 8 	 #
| [ 0:02] ## Line: 9 	 # You should have received a copy of the GNU General Public License
| [ 0:02] ## Line: 10 	 # along with this program; if not, write to the Free Software Foundation,
| [ 0:02] ## Line: 11 	 # Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA
| [ 0:02] ## Line: 12 	 
| [ 0:02] ## Line: 13 	 SKIP_WITH_LVMLOCKD=1
| [ 0:02] ## Line: 14 	 SKIP_WITH_LVMPOLLD=1
| [ 0:02] ## Line: 15 	 
| [ 0:02] ## Line: 16 	 . lib/inittest
| [ 0:02] ## Line: 17 	 
| [ 0:02] ## Line: 18 	 #
| [ 0:02] ## Line: 19 	 # Test to exercise larger number of PVs in a VG
| [ 0:02] ## Line: 20 	 # Related to https://bugzilla.redhat.com/show_bug.cgi?id=736027
| [ 0:02] ## Line: 21 	 # 
| [ 0:02] ## Line: 22 	 # Original measured times of the whole test case before 
| [ 0:02] ## Line: 23 	 # and with the acceleration patch from my bare metal hw
| [ 0:02] ## Line: 24 	 # (Lenovo T61, 2.2GHz, 4G RAM, rawhide 2015-03-06 with ndebug kernel):
| [ 0:02] ## Line: 25 	 #
| [ 0:02] ## Line: 26 	 # export LVM_TEST_PVS=300
| [ 0:02] ## Line: 27 	 #
| [ 0:02] ## Line: 28 	 # make check_local   ~52sec  (U:29s, S:13s)
| [ 0:02] ## Line: 29 	 # make check_lvmetad ~20sec  (U: 4s, S: 5s)
| [ 0:02] ## Line: 30 	 #
| [ 0:02] ## Line: 31 	 # With patch from 2015-03-06:
| [ 0:02] ## Line: 32 	 #
| [ 0:02] ## Line: 33 	 # make check_local   ~30sec  (U:10s, S:12s)
| [ 0:02] ## Line: 34 	 # make check_lvmetad ~20sec  (U: 4s, S: 5s)
| [ 0:02] ## Line: 35 	 #
| [ 0:02] ## Line: 36 	 
| [ 0:02] ## Line: 37 	 # TODO: extend test suite to monitor performance and report regressions...
| [ 0:02] ## Line: 38 	 
| [ 0:02] ## Line: 39 	 # Use just 100 to get 'decent' speed on slow boxes
| [ 0:02] ## Line: 40 	 LVM_TEST_PVS=${LVM_TEST_PVS:-100}
| [ 0:02] ## Line: 41 	 
| [ 0:02] ## Line: 42 	 #aux prepare_devs $LVM_TEST_PVS 8
| [ 0:02] ## Line: 43 	 #vgcreate $vg $(< DEVICES)
| [ 0:02] ## Line: 44 	 
| [ 0:02] ## Line: 45 	 # prepare_vg is now directly using steps above
| [ 0:02] ## Line: 46 	 aux prepare_vg $LVM_TEST_PVS
| [ 0:02] ## Line: 47 	 
| [ 0:02] ## Line: 48 	 # Check we have decent speed with typical commands
| [ 0:02] ## Line: 49 	 vgs
| [ 0:02] ## Line: 50 	 
| [ 0:02] ## Line: 51 	 lvs
| [ 0:02] ## Line: 52 	 
| [ 0:02] ## Line: 53 	 pvs
| [ 0:02] ## Line: 54 	 
| [ 0:02] ## Line: 55 	 lvcreate -l1 -n $lv1 $vg
| [ 0:02] ## Line: 56 	 
| [ 0:02] ## Line: 57 	 lvremove -f $vg/$lv1
| [ 0:02] ## Line: 58 	 
| [ 0:02] ## Line: 59 	 vgremove -ff $vg
| [ 0:02] ## Line: 60 	 
| [ 0:02] ## Line: 61 	 # 
| [ 0:02] ## Line: 62 	 # TODO Turn this into another test case:
| [ 0:02] ## Line: 63 	 #
| [ 0:02] ## Line: 64 	 #for i in $(seq 1 $LVM_TEST_PVS); do
| [ 0:02] ## Line: 65 	 #	vgcreate ${vg}$i "$DM_DEV_DIR/mapper/${PREFIX}pv$i"
| [ 0:02] ## Line: 66 	 #done
| [ 0:02] aux teardown
| [ 0:02] #vgcreate-many-pvs.sh:1+ aux teardown
| [ 0:02] ## teardown.........ok
###       failed: [ndev-vanilla] shell/vgcreate-many-pvs.sh

| [ 0:00] Library version:   1.02.146 (2017-12-18)
| [ 0:00] Driver version:    4.35.0
| [ 0:00] Kernel is Linux localhost.localdomain 3.10.0-693.11.1.el7.x86_64 #1 SMP Mon Dec 4 23:52:40 UTC 2017 x86_64 GNU/Linux
| [ 0:00] Selinux mode is not installed.
| [ 0:00]               total        used        free      shared  buff/cache   available
| [ 0:00] Mem:           7822        1080        4140          10        2602        6435
| [ 0:00] Swap:          4095           0        4095
| [ 0:00] Filesystem      Size  Used Avail Use% Mounted on
| [ 0:00] /dev/sdc1        18G  8.4G  8.4G  50% /
| [ 0:00] /dev/sdd1        51G  6.1G   43G  13% /lfskernel
| [ 0:00] devtmpfs        3.9G     0  3.9G   0% /dev
| [ 0:00] tmpfs           3.9G     0  3.9G   0% /run
| [ 0:00] @TESTDIR=/tmp/LVMTEST28388.SZrjNwuo4P
| [ 0:00] @PREFIX=LVMTEST28388
| [ 0:00] ## LVMCONF: activation {
| [ 0:00] ## LVMCONF:     checks = 1
| [ 0:00] ## LVMCONF:     monitoring = 0
| [ 0:00] ## LVMCONF:     polling_interval = 1
| [ 0:00] ## LVMCONF:     raid_region_size = 512
| [ 0:00] ## LVMCONF:     retry_deactivation = 1
| [ 0:00] ## LVMCONF:     snapshot_autoextend_percent = 50
| [ 0:00] ## LVMCONF:     snapshot_autoextend_threshold = 50
| [ 0:00] ## LVMCONF:     udev_rules = 1
| [ 0:00] ## LVMCONF:     udev_sync = 1
| [ 0:00] ## LVMCONF:     verify_udev_operations = 1
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: allocation {
| [ 0:00] ## LVMCONF:     wipe_signatures_when_zeroing_new_lvs = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: backup {
| [ 0:00] ## LVMCONF:     archive = 0
| [ 0:00] ## LVMCONF:     backup = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: devices {
| [ 0:00] ## LVMCONF:     cache_dir = "@TESTDIR@/etc"
| [ 0:00] ## LVMCONF:     default_data_alignment = 1
| [ 0:00] ## LVMCONF:     dir = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     filter = "a|.*|"
| [ 0:00] ## LVMCONF:     global_filter = [ "a|@TESTDIR@/dev/mapper/@PREFIX@.*pv[0-9_]*$|", "r|.*|" ]
| [ 0:00] ## LVMCONF:     md_component_detection  = 0
| [ 0:00] ## LVMCONF:     scan = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     sysfs_scan = 1
| [ 0:00] ## LVMCONF:     write_cache_state = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: dmeventd {
| [ 0:00] ## LVMCONF:     executable = "/sources/boot/LVM2.2.02.177/test/lib/dmeventd"
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: global {
| [ 0:00] ## LVMCONF:     abort_on_internal_errors = 1
| [ 0:00] ## LVMCONF:     cache_check_executable = "/usr/sbin/cache_check"
| [ 0:00] ## LVMCONF:     cache_dump_executable = "/usr/sbin/cache_dump"
| [ 0:00] ## LVMCONF:     cache_repair_executable = "/usr/sbin/cache_repair"
| [ 0:00] ## LVMCONF:     detect_internal_vg_cache_corruption = 1
| [ 0:00] ## LVMCONF:     fallback_to_local_locking = 0
| [ 0:00] ## LVMCONF:     fsadm_executable = "/sources/boot/LVM2.2.02.177/test/lib/fsadm"
| [ 0:00] ## LVMCONF:     library_dir = "@TESTDIR@/lib"
| [ 0:00] ## LVMCONF:     locking_dir = "@TESTDIR@/var/lock/lvm"
| [ 0:00] ## LVMCONF:     locking_type=1
| [ 0:00] ## LVMCONF:     notify_dbus = 0
| [ 0:00] ## LVMCONF:     si_unit_consistency = 1
| [ 0:00] ## LVMCONF:     thin_check_executable = "/usr/sbin/thin_check"
| [ 0:00] ## LVMCONF:     thin_dump_executable = "/usr/sbin/thin_dump"
| [ 0:00] ## LVMCONF:     thin_repair_executable = "/usr/sbin/thin_repair"
| [ 0:00] ## LVMCONF:     use_lvmetad = 0
| [ 0:00] ## LVMCONF:     use_lvmlockd = 0
| [ 0:00] ## LVMCONF:     use_lvmpolld = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: log {
| [ 0:00] ## LVMCONF:     activation = 1
| [ 0:00] ## LVMCONF:     file = "@TESTDIR@/debug.log"
| [ 0:00] ## LVMCONF:     indent = 1
| [ 0:00] ## LVMCONF:     level = 9
| [ 0:00] ## LVMCONF:     overwrite = 1
| [ 0:00] ## LVMCONF:     syslog = 0
| [ 0:00] ## LVMCONF:     verbose = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] <======== Processing test: "vgcreate-usage.sh" ========>
| [ 0:00] 
| [ 0:00] aux prepare_devs 3
| [ 0:00] #vgcreate-usage.sh:19+ aux prepare_devs 3
| [ 0:00] ## preparing loop device....ok (/dev/loop0)
| [ 0:00] ## preparing 3 devices...lib/utils: line 212: DM_UDEV_COOKIE: unbound variable
| [ 0:00] set +vx; STACKTRACE; set -vx
| [ 0:00] ##vgcreate-usage.sh:19+ set +vx
| [ 0:00] ## - /lfskernel/sources/boot/LVM2.2.02.177/test/shell/vgcreate-usage.sh:19
| [ 0:00] ## 1 STACKTRACE() called from /lfskernel/sources/boot/LVM2.2.02.177/test/shell/vgcreate-usage.sh:19
| [ 0:00] <======== Info ========>
| [ 0:00] ## DMINFO:   Name             Maj Min Stat Open Targ Event  UUID                                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv3  253   3 L--w    0    1      0 TEST-@PREFIX@pv3                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv2  253   5 L--w    0    1      0 TEST-@PREFIX@pv2                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv1  253   4 L--w    0    1      0 TEST-@PREFIX@pv1                                                
| [ 0:00] <======== Active table ========>
| [ 0:00] ## DMTABLE:  @PREFIX@pv3: 0 69632 linear 7:0 141312
| [ 0:00] ## DMTABLE:  @PREFIX@pv2: 0 69632 linear 7:0 71680
| [ 0:00] ## DMTABLE:  @PREFIX@pv1: 0 69632 linear 7:0 2048
| [ 0:00] <======== Inactive table ========>
| [ 0:00] ## DMITABLE: @PREFIX@pv3: 
| [ 0:00] ## DMITABLE: @PREFIX@pv2: 
| [ 0:00] ## DMITABLE: @PREFIX@pv1: 
| [ 0:00] <======== Status ========>
| [ 0:00] ## DMSTATUS: @PREFIX@pv3: 0 69632 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv2: 0 69632 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv1: 0 69632 linear 
| [ 0:00] <======== Tree ========>
| [ 0:00] ## DMTREE:   @PREFIX@pv3 (253:3)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   @PREFIX@pv2 (253:5)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   @PREFIX@pv1 (253:4)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   LFS_vg-lfs (253:2)
| [ 0:00] ## DMTREE:    `- (8:16)
| [ 0:00] ## DMTREE:   centos-swap (253:1)
| [ 0:00] ## DMTREE:    `- (8:2)
| [ 0:00] ## DMTREE:   centos-root (253:0)
| [ 0:00] ## DMTREE:    `- (8:2)
| [ 0:00] <======== Recursive list of @TESTDIR@/dev ========>
| [ 0:00] ## LSLR:	@TESTDIR@/dev:
| [ 0:00] ## LSLR:	total 4
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 0 Feb 21 02:27 loop0
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 1 Feb 21 02:27 loop1
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 2 Feb 21 02:27 loop2
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 3 Feb 21 02:27 loop3
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 4 Feb 21 02:27 loop4
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 5 Feb 21 02:27 loop5
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 6 Feb 21 02:27 loop6
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 7 Feb 21 02:27 loop7
| [ 0:00] ## LSLR:	drwxr-xr-x 2 root root 4096 Feb 21 02:27 mapper
| [ 0:00] ## LSLR:	crw-r--r-- 1 root root 1, 3 Feb 21 02:27 testnull
| [ 0:00] ## LSLR:	
| [ 0:00] ## LSLR:	@TESTDIR@/dev/mapper:
| [ 0:00] ## LSLR:	total 0
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   4 Feb 21 02:27 @PREFIX@pv1
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   5 Feb 21 02:27 @PREFIX@pv2
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   3 Feb 21 02:27 @PREFIX@pv3
| [ 0:00] ## LSLR:	crw------- 1 root root  10, 236 Feb 21 02:27 control
| [ 0:00] <======== Udev DB content ========>
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-0
| [ 0:00] ## UDEV:	N: dm-0
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-0
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-0
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=0
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-1
| [ 0:00] ## UDEV:	N: dm-1
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-1
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-1
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=1
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-2
| [ 0:00] ## UDEV:	N: dm-2
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-2
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-2
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=2
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-3
| [ 0:00] ## UDEV:	N: dm-3
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-3
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-3
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=3
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-4
| [ 0:00] ## UDEV:	N: dm-4
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-4
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-4
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=4
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-5
| [ 0:00] ## UDEV:	N: dm-5
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-5
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-5
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=5
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/loop0
| [ 0:00] ## UDEV:	N: loop0
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/loop0
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/loop0
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=7
| [ 0:00] ## UDEV:	E: MINOR=0
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] <======== Script file "vgcreate-usage.sh" ========>
| [ 0:00] ## Line: 1 	 #!/usr/bin/env bash
| [ 0:00] ## Line: 2 	 
| [ 0:00] ## Line: 3 	 # Copyright (C) 2008-2012 Red Hat, Inc. All rights reserved.
| [ 0:00] ## Line: 4 	 #
| [ 0:00] ## Line: 5 	 # This copyrighted material is made available to anyone wishing to use,
| [ 0:00] ## Line: 6 	 # modify, copy, or redistribute it subject to the terms and conditions
| [ 0:00] ## Line: 7 	 # of the GNU General Public License v.2.
| [ 0:00] ## Line: 8 	 #
| [ 0:00] ## Line: 9 	 # You should have received a copy of the GNU General Public License
| [ 0:00] ## Line: 10 	 # along with this program; if not, write to the Free Software Foundation,
| [ 0:00] ## Line: 11 	 # Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA
| [ 0:00] ## Line: 12 	 
| [ 0:00] ## Line: 13 	 test_description='Exercise some vgcreate diagnostics'
| [ 0:00] ## Line: 14 	 SKIP_WITH_LVMLOCKD=1
| [ 0:00] ## Line: 15 	 SKIP_WITH_LVMPOLLD=1
| [ 0:00] ## Line: 16 	 
| [ 0:00] ## Line: 17 	 . lib/inittest
| [ 0:00] ## Line: 18 	 
| [ 0:00] ## Line: 19 	 aux prepare_devs 3
| [ 0:00] ## Line: 20 	 pvcreate "$dev1" "$dev2"
| [ 0:00] ## Line: 21 	 pvcreate --metadatacopies 0 "$dev3"
| [ 0:00] ## Line: 22 	 
| [ 0:00] ## Line: 23 	 vg=${PREFIX}vg
| [ 0:00] ## Line: 24 	 
| [ 0:00] ## Line: 25 	 #COMM 'vgcreate accepts 8.00m physicalextentsize for VG'
| [ 0:00] ## Line: 26 	 vgcreate $vg --physicalextentsize 8.00m "$dev1" "$dev2"
| [ 0:00] ## Line: 27 	 check vg_field  $vg vg_extent_size 8.00m
| [ 0:00] ## Line: 28 	 vgremove $vg
| [ 0:00] ## Line: 29 	 # try vgck and to remove it again - should fail (but not segfault)
| [ 0:00] ## Line: 30 	 not vgremove $vg
| [ 0:00] ## Line: 31 	 not vgck $vg
| [ 0:00] ## Line: 32 	 
| [ 0:00] ## Line: 33 	 #COMM 'vgcreate accepts smaller (128) maxlogicalvolumes for VG'
| [ 0:00] ## Line: 34 	 vgcreate $vg --maxlogicalvolumes 128 "$dev1" "$dev2"
| [ 0:00] ## Line: 35 	 check vg_field $vg max_lv 128 
| [ 0:00] ## Line: 36 	 vgremove $vg
| [ 0:00] ## Line: 37 	 
| [ 0:00] ## Line: 38 	 #COMM 'vgcreate accepts smaller (128) maxphysicalvolumes for VG'
| [ 0:00] ## Line: 39 	 vgcreate $vg --maxphysicalvolumes 128 "$dev1" "$dev2"
| [ 0:00] ## Line: 40 	 check vg_field $vg max_pv 128
| [ 0:00] ## Line: 41 	 vgremove $vg
| [ 0:00] ## Line: 42 	 
| [ 0:00] ## Line: 43 	 #COMM 'vgcreate rejects a zero physical extent size'
| [ 0:00] ## Line: 44 	 not vgcreate --physicalextentsize 0 $vg "$dev1" "$dev2" 2>err
| [ 0:00] ## Line: 45 	 grep "Physical extent size may not be zero" err
| [ 0:00] ## Line: 46 	 
| [ 0:00] ## Line: 47 	 #COMM 'vgcreate rejects "inherit" allocation policy'
| [ 0:00] ## Line: 48 	 not vgcreate --alloc inherit $vg "$dev1" "$dev2" 2>err
| [ 0:00] ## Line: 49 	 grep "Volume Group allocation policy cannot inherit from anything" err
| [ 0:00] ## Line: 50 	 
| [ 0:00] ## Line: 51 	 #COMM 'vgcreate rejects vgname "."'
| [ 0:00] ## Line: 52 	 vginvalid=.; 
| [ 0:00] ## Line: 53 	 not vgcreate $vginvalid "$dev1" "$dev2" 2>err
| [ 0:00] ## Line: 54 	 grep "New volume group name \"$vginvalid\" is invalid" err
| [ 0:00] ## Line: 55 	 
| [ 0:00] ## Line: 56 	 #COMM 'vgcreate rejects vgname greater than 128 characters'
| [ 0:00] ## Line: 57 	 vginvalid=thisnameisridiculouslylongtotestvalidationcodecheckingmaximumsizethisiswhathappenswhenprogrammersgetboredandorarenotcreativedonttrythisathome
| [ 0:00] ## Line: 58 	 not vgcreate $vginvalid "$dev1" "$dev2" 2>err
| [ 0:00] ## Line: 59 	 grep "New volume group name \"$vginvalid\" is invalid" err
| [ 0:00] ## Line: 60 	 
| [ 0:00] ## Line: 61 	 #COMM 'vgcreate rejects already existing vgname "/tmp/$vg"'
| [ 0:00] ## Line: 62 	 #touch /tmp/$vg
| [ 0:00] ## Line: 63 	 #not vgcreate $vg "$dev1" "$dev2" 2>err
| [ 0:00] ## Line: 64 	 #grep "New volume group name \"$vg\" is invalid\$" err
| [ 0:00] ## Line: 65 	 
| [ 0:00] ## Line: 66 	 #COMM "vgcreate rejects repeated invocation (run 2 times) (bz178216)"
| [ 0:00] ## Line: 67 	 vgcreate $vg "$dev1" "$dev2"
| [ 0:00] ## Line: 68 	 not vgcreate $vg "$dev1" "$dev2"
| [ 0:00] ## Line: 69 	 vgremove -ff $vg
| [ 0:00] ## Line: 70 	 
| [ 0:00] ## Line: 71 	 #COMM 'vgcreate rejects MaxLogicalVolumes > 255'
| [ 0:00] ## Line: 72 	 not vgcreate --metadatatype 1 --maxlogicalvolumes 1024 $vg "$dev1" "$dev2" 2>err
| [ 0:00] ## Line: 73 	 grep "Number of volumes may not exceed 255" err
| [ 0:00] ## Line: 74 	 
| [ 0:00] ## Line: 75 	 #COMM "vgcreate fails when the only pv has --metadatacopies 0"
| [ 0:00] ## Line: 76 	 not vgcreate $vg "$dev3"
| [ 0:00] ## Line: 77 	 
| [ 0:00] ## Line: 78 	 # Test default (4MB) vg_extent_size as well as limits of extent_size
| [ 0:00] ## Line: 79 	 not vgcreate --physicalextentsize 0k $vg "$dev1" "$dev2"
| [ 0:00] ## Line: 80 	 vgcreate --physicalextentsize 1k $vg "$dev1" "$dev2"
| [ 0:00] ## Line: 81 	 check vg_field $vg vg_extent_size 1.00k
| [ 0:00] ## Line: 82 	 vgremove -ff $vg
| [ 0:00] ## Line: 83 	 not vgcreate --physicalextentsize 3K $vg "$dev1" "$dev2"
| [ 0:00] ## Line: 84 	 not vgcreate --physicalextentsize 1024t $vg "$dev1" "$dev2"
| [ 0:00] ## Line: 85 	 #not vgcreate --physicalextentsize 1T $vg "$dev1" "$dev2"
| [ 0:00] ## Line: 86 	 # FIXME: vgcreate allows physicalextentsize larger than pv size!
| [ 0:00] ## Line: 87 	 
| [ 0:00] ## Line: 88 	 # Test default max_lv, max_pv, extent_size, alloc_policy, clustered
| [ 0:00] ## Line: 89 	 vgcreate $vg "$dev1" "$dev2"
| [ 0:00] ## Line: 90 	 check vg_field $vg vg_extent_size 4.00m
| [ 0:00] ## Line: 91 	 check vg_field $vg max_lv 0
| [ 0:00] ## Line: 92 	 check vg_field $vg max_pv 0
| [ 0:00] ## Line: 93 	 ATTRS="wz--n-"
| [ 0:00] ## Line: 94 	 test -e LOCAL_CLVMD && ATTRS="wz--nc"
| [ 0:00] ## Line: 95 	 check vg_field $vg vg_attr $ATTRS
| [ 0:00] ## Line: 96 	 vgremove -ff $vg
| [ 0:00] ## Line: 97 	 
| [ 0:00] ## Line: 98 	 # Implicit pvcreate tests, test pvcreate options on vgcreate
| [ 0:00] ## Line: 99 	 # --force, --yes, --metadata{size|copies|type}, --zero
| [ 0:00] ## Line: 100 	 # --dataalignment[offset]
| [ 0:00] ## Line: 101 	 pvremove "$dev1" "$dev2"
| [ 0:00] ## Line: 102 	 vgcreate --force --yes --zero y $vg "$dev1" "$dev2"
| [ 0:00] ## Line: 103 	 vgremove -f $vg
| [ 0:00] ## Line: 104 	 pvremove -f "$dev1"
| [ 0:00] ## Line: 105 	 
| [ 0:00] ## Line: 106 	 for i in 0 1 2 3
| [ 0:00] ## Line: 107 	 do
| [ 0:00] ## Line: 108 	 # vgcreate (lvm2) succeeds writing LVM label at sector $i
| [ 0:00] ## Line: 109 	     vgcreate --labelsector $i $vg "$dev1"
| [ 0:00] ## Line: 110 	     dd if="$dev1" bs=512 skip=$i count=1 2>/dev/null | strings | grep LABELONE >/dev/null
| [ 0:00] ## Line: 111 	     vgremove -f $vg
| [ 0:00] ## Line: 112 	     pvremove -f "$dev1"
| [ 0:00] ## Line: 113 	 done
| [ 0:00] ## Line: 114 	 
| [ 0:00] ## Line: 115 	 # pvmetadatacopies
| [ 0:00] ## Line: 116 	 for i in 1 2
| [ 0:00] ## Line: 117 	 do
| [ 0:00] ## Line: 118 	     vgcreate --pvmetadatacopies $i $vg "$dev1"
| [ 0:00] ## Line: 119 	     check pv_field "$dev1" pv_mda_count $i
| [ 0:00] ## Line: 120 	     vgremove -f $vg
| [ 0:00] ## Line: 121 	     pvremove -f "$dev1"
| [ 0:00] ## Line: 122 	 done
| [ 0:00] ## Line: 123 	 not vgcreate --pvmetadatacopies 0 $vg "$dev1"
| [ 0:00] ## Line: 124 	 pvcreate --metadatacopies 1 "$dev2"
| [ 0:00] ## Line: 125 	 vgcreate --pvmetadatacopies 0 $vg "$dev1" "$dev2"
| [ 0:00] ## Line: 126 	 check pv_field "$dev1" pv_mda_count 0
| [ 0:00] ## Line: 127 	 check pv_field "$dev2" pv_mda_count 1
| [ 0:00] ## Line: 128 	 vgremove -f $vg
| [ 0:00] ## Line: 129 	 pvremove -f "$dev1"
| [ 0:00] ## Line: 130 	 
| [ 0:00] ## Line: 131 	 # metadatasize, dataalignment, dataalignmentoffset
| [ 0:00] ## Line: 132 	 #COMM 'pvcreate sets data offset next to mda area'
| [ 0:00] ## Line: 133 	 vgcreate --metadatasize 100k --dataalignment 100k $vg "$dev1"
| [ 0:00] ## Line: 134 	 check pv_field "$dev1" pe_start 200.00k
| [ 0:00] ## Line: 135 	 vgremove -f $vg
| [ 0:00] ## Line: 136 	 pvremove -f "$dev1"
| [ 0:00] ## Line: 137 	 
| [ 0:00] ## Line: 138 	 # data area is aligned to 1M by default,
| [ 0:00] ## Line: 139 	 # data area start is shifted by the specified alignment_offset
| [ 0:00] ## Line: 140 	 pv_align=1052160 # 1048576 + (7*512)
| [ 0:00] ## Line: 141 	 vgcreate --metadatasize 128k --dataalignmentoffset 7s $vg "$dev1"
| [ 0:00] ## Line: 142 	 check pv_field "$dev1" pe_start ${pv_align}B --units b
| [ 0:00] ## Line: 143 	 vgremove -f $vg
| [ 0:00] ## Line: 144 	 pvremove -f "$dev1"
| [ 0:00] ## Line: 145 	 
| [ 0:00] ## Line: 146 	 if test -n "$LVM_TEST_LVM1" ; then
| [ 0:00] ## Line: 147 	 mdatypes='1 2'
| [ 0:00] ## Line: 148 	 else
| [ 0:00] ## Line: 149 	 mdatypes='2'
| [ 0:00] ## Line: 150 	 fi
| [ 0:00] ## Line: 151 	 
| [ 0:00] ## Line: 152 	 # metadatatype
| [ 0:00] ## Line: 153 	 for i in $mdatypes
| [ 0:00] ## Line: 154 	 do
| [ 0:00] ## Line: 155 	     vgcreate -M $i $vg "$dev1"
| [ 0:00] ## Line: 156 	     check vg_field $vg vg_fmt lvm$i
| [ 0:00] ## Line: 157 	     vgremove -f $vg
| [ 0:00] ## Line: 158 	     pvremove -f "$dev1"
| [ 0:00] ## Line: 159 	 done
| [ 0:00] ## Line: 160 	 
| [ 0:00] ## Line: 161 	 # vgcreate fails if pv belongs to existing vg
| [ 0:00] ## Line: 162 	 vgcreate $vg1 "$dev1" "$dev2"
| [ 0:00] ## Line: 163 	 not vgcreate $vg2 "$dev2"
| [ 0:00] ## Line: 164 	 vgremove -f $vg1
| [ 0:00] ## Line: 165 	 pvremove -f "$dev1" "$dev2"
| [ 0:00] ## Line: 166 	 
| [ 0:00] ## Line: 167 	 # all PVs exist in the VG after created
| [ 0:00] ## Line: 168 	 pvcreate "$dev1"
| [ 0:00] ## Line: 169 	 vgcreate $vg1 "$dev1" "$dev2" "$dev3"
| [ 0:00] ## Line: 170 	 check pv_field "$dev1" vg_name $vg1
| [ 0:00] ## Line: 171 	 check pv_field "$dev2" vg_name $vg1
| [ 0:00] ## Line: 172 	 check pv_field "$dev3" vg_name $vg1
| [ 0:00] ## Line: 173 	 vgremove -f $vg1
| [ 0:00] aux teardown
| [ 0:00] #vgcreate-usage.sh:1+ aux teardown
| [ 0:00] ## teardown.........ok
###       failed: [ndev-vanilla] shell/vgcreate-usage.sh

| [ 0:00] Library version:   1.02.146 (2017-12-18)
| [ 0:00] Driver version:    4.35.0
| [ 0:00] Kernel is Linux localhost.localdomain 3.10.0-693.11.1.el7.x86_64 #1 SMP Mon Dec 4 23:52:40 UTC 2017 x86_64 GNU/Linux
| [ 0:00] Selinux mode is not installed.
| [ 0:00]               total        used        free      shared  buff/cache   available
| [ 0:00] Mem:           7822        1079        4141          10        2602        6436
| [ 0:00] Swap:          4095           0        4095
| [ 0:00] Filesystem      Size  Used Avail Use% Mounted on
| [ 0:00] /dev/sdc1        18G  8.4G  8.4G  50% /
| [ 0:00] /dev/sdd1        51G  6.1G   43G  13% /lfskernel
| [ 0:00] devtmpfs        3.9G     0  3.9G   0% /dev
| [ 0:00] tmpfs           3.9G     0  3.9G   0% /run
| [ 0:00] @TESTDIR=/tmp/LVMTEST28661.bYM7RVu3oc
| [ 0:00] @PREFIX=LVMTEST28661
| [ 0:00] ## LVMCONF: activation {
| [ 0:00] ## LVMCONF:     checks = 1
| [ 0:00] ## LVMCONF:     monitoring = 0
| [ 0:00] ## LVMCONF:     polling_interval = 1
| [ 0:00] ## LVMCONF:     raid_region_size = 512
| [ 0:00] ## LVMCONF:     retry_deactivation = 1
| [ 0:00] ## LVMCONF:     snapshot_autoextend_percent = 50
| [ 0:00] ## LVMCONF:     snapshot_autoextend_threshold = 50
| [ 0:00] ## LVMCONF:     udev_rules = 1
| [ 0:00] ## LVMCONF:     udev_sync = 1
| [ 0:00] ## LVMCONF:     verify_udev_operations = 1
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: allocation {
| [ 0:00] ## LVMCONF:     wipe_signatures_when_zeroing_new_lvs = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: backup {
| [ 0:00] ## LVMCONF:     archive = 0
| [ 0:00] ## LVMCONF:     backup = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: devices {
| [ 0:00] ## LVMCONF:     cache_dir = "@TESTDIR@/etc"
| [ 0:00] ## LVMCONF:     default_data_alignment = 1
| [ 0:00] ## LVMCONF:     dir = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     filter = "a|.*|"
| [ 0:00] ## LVMCONF:     global_filter = [ "a|@TESTDIR@/dev/mapper/@PREFIX@.*pv[0-9_]*$|", "r|.*|" ]
| [ 0:00] ## LVMCONF:     md_component_detection  = 0
| [ 0:00] ## LVMCONF:     scan = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     sysfs_scan = 1
| [ 0:00] ## LVMCONF:     write_cache_state = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: dmeventd {
| [ 0:00] ## LVMCONF:     executable = "/sources/boot/LVM2.2.02.177/test/lib/dmeventd"
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: global {
| [ 0:00] ## LVMCONF:     abort_on_internal_errors = 1
| [ 0:00] ## LVMCONF:     cache_check_executable = "/usr/sbin/cache_check"
| [ 0:00] ## LVMCONF:     cache_dump_executable = "/usr/sbin/cache_dump"
| [ 0:00] ## LVMCONF:     cache_repair_executable = "/usr/sbin/cache_repair"
| [ 0:00] ## LVMCONF:     detect_internal_vg_cache_corruption = 1
| [ 0:00] ## LVMCONF:     fallback_to_local_locking = 0
| [ 0:00] ## LVMCONF:     fsadm_executable = "/sources/boot/LVM2.2.02.177/test/lib/fsadm"
| [ 0:00] ## LVMCONF:     library_dir = "@TESTDIR@/lib"
| [ 0:00] ## LVMCONF:     locking_dir = "@TESTDIR@/var/lock/lvm"
| [ 0:00] ## LVMCONF:     locking_type=1
| [ 0:00] ## LVMCONF:     notify_dbus = 0
| [ 0:00] ## LVMCONF:     si_unit_consistency = 1
| [ 0:00] ## LVMCONF:     thin_check_executable = "/usr/sbin/thin_check"
| [ 0:00] ## LVMCONF:     thin_dump_executable = "/usr/sbin/thin_dump"
| [ 0:00] ## LVMCONF:     thin_repair_executable = "/usr/sbin/thin_repair"
| [ 0:00] ## LVMCONF:     use_lvmetad = 0
| [ 0:00] ## LVMCONF:     use_lvmlockd = 0
| [ 0:00] ## LVMCONF:     use_lvmpolld = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: log {
| [ 0:00] ## LVMCONF:     activation = 1
| [ 0:00] ## LVMCONF:     file = "@TESTDIR@/debug.log"
| [ 0:00] ## LVMCONF:     indent = 1
| [ 0:00] ## LVMCONF:     level = 9
| [ 0:00] ## LVMCONF:     overwrite = 1
| [ 0:00] ## LVMCONF:     syslog = 0
| [ 0:00] ## LVMCONF:     verbose = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] <======== Processing test: "vgextend-restoremissing.sh" ========>
| [ 0:00] 
| [ 0:00] aux prepare_vg 3
| [ 0:00] #vgextend-restoremissing.sh:18+ aux prepare_vg 3
| [ 0:00] ## preparing loop device....ok (/dev/loop0)
| [ 0:00] ## preparing 3 devices...lib/utils: line 212: DM_UDEV_COOKIE: unbound variable
| [ 0:00] set +vx; STACKTRACE; set -vx
| [ 0:00] ##vgextend-restoremissing.sh:18+ set +vx
| [ 0:00] ## - /lfskernel/sources/boot/LVM2.2.02.177/test/shell/vgextend-restoremissing.sh:18
| [ 0:00] ## 1 STACKTRACE() called from /lfskernel/sources/boot/LVM2.2.02.177/test/shell/vgextend-restoremissing.sh:18
| [ 0:00] <======== Info ========>
| [ 0:00] ## DMINFO:   Name             Maj Min Stat Open Targ Event  UUID                                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv2  253   5 L--w    0    1      0 TEST-@PREFIX@pv2                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv1  253   4 L--w    0    1      0 TEST-@PREFIX@pv1                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv3  253   3 L--w    0    1      0 TEST-@PREFIX@pv3                                                
| [ 0:00] <======== Active table ========>
| [ 0:00] ## DMTABLE:  @PREFIX@pv2: 0 69632 linear 7:0 71680
| [ 0:00] ## DMTABLE:  @PREFIX@pv1: 0 69632 linear 7:0 2048
| [ 0:00] ## DMTABLE:  @PREFIX@pv3: 0 69632 linear 7:0 141312
| [ 0:00] <======== Inactive table ========>
| [ 0:00] ## DMITABLE: @PREFIX@pv2: 
| [ 0:00] ## DMITABLE: @PREFIX@pv1: 
| [ 0:00] ## DMITABLE: @PREFIX@pv3: 
| [ 0:00] <======== Status ========>
| [ 0:00] ## DMSTATUS: @PREFIX@pv2: 0 69632 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv1: 0 69632 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv3: 0 69632 linear 
| [ 0:00] <======== Tree ========>
| [ 0:00] ## DMTREE:   @PREFIX@pv2 (253:5)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   @PREFIX@pv1 (253:4)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   LFS_vg-lfs (253:2)
| [ 0:00] ## DMTREE:    `- (8:16)
| [ 0:00] ## DMTREE:   centos-swap (253:1)
| [ 0:00] ## DMTREE:    `- (8:2)
| [ 0:00] ## DMTREE:   @PREFIX@pv3 (253:3)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   centos-root (253:0)
| [ 0:00] ## DMTREE:    `- (8:2)
| [ 0:00] <======== Recursive list of @TESTDIR@/dev ========>
| [ 0:00] ## LSLR:	@TESTDIR@/dev:
| [ 0:00] ## LSLR:	total 4
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 0 Feb 21 02:27 loop0
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 1 Feb 21 02:27 loop1
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 2 Feb 21 02:27 loop2
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 3 Feb 21 02:27 loop3
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 4 Feb 21 02:27 loop4
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 5 Feb 21 02:27 loop5
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 6 Feb 21 02:27 loop6
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 7 Feb 21 02:27 loop7
| [ 0:00] ## LSLR:	drwxr-xr-x 2 root root 4096 Feb 21 02:27 mapper
| [ 0:00] ## LSLR:	crw-r--r-- 1 root root 1, 3 Feb 21 02:27 testnull
| [ 0:00] ## LSLR:	
| [ 0:00] ## LSLR:	@TESTDIR@/dev/mapper:
| [ 0:00] ## LSLR:	total 0
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   4 Feb 21 02:27 @PREFIX@pv1
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   5 Feb 21 02:27 @PREFIX@pv2
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   3 Feb 21 02:27 @PREFIX@pv3
| [ 0:00] ## LSLR:	crw------- 1 root root  10, 236 Feb 21 02:27 control
| [ 0:00] <======== Udev DB content ========>
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-0
| [ 0:00] ## UDEV:	N: dm-0
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-0
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-0
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=0
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-1
| [ 0:00] ## UDEV:	N: dm-1
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-1
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-1
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=1
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-2
| [ 0:00] ## UDEV:	N: dm-2
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-2
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-2
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=2
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-3
| [ 0:00] ## UDEV:	N: dm-3
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-3
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-3
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=3
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-4
| [ 0:00] ## UDEV:	N: dm-4
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-4
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-4
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=4
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-5
| [ 0:00] ## UDEV:	N: dm-5
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-5
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-5
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=5
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/loop0
| [ 0:00] ## UDEV:	N: loop0
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/loop0
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/loop0
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=7
| [ 0:00] ## UDEV:	E: MINOR=0
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] <======== Script file "vgextend-restoremissing.sh" ========>
| [ 0:00] ## Line: 1 	 #!/usr/bin/env bash
| [ 0:00] ## Line: 2 	 
| [ 0:00] ## Line: 3 	 # Copyright (C) 2010 Red Hat, Inc. All rights reserved.
| [ 0:00] ## Line: 4 	 #
| [ 0:00] ## Line: 5 	 # This copyrighted material is made available to anyone wishing to use,
| [ 0:00] ## Line: 6 	 # modify, copy, or redistribute it subject to the terms and conditions
| [ 0:00] ## Line: 7 	 # of the GNU General Public License v.2.
| [ 0:00] ## Line: 8 	 #
| [ 0:00] ## Line: 9 	 # You should have received a copy of the GNU General Public License
| [ 0:00] ## Line: 10 	 # along with this program; if not, write to the Free Software Foundation,
| [ 0:00] ## Line: 11 	 # Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA
| [ 0:00] ## Line: 12 	 
| [ 0:00] ## Line: 13 	 SKIP_WITH_LVMLOCKD=1
| [ 0:00] ## Line: 14 	 SKIP_WITH_LVMPOLLD=1
| [ 0:00] ## Line: 15 	 
| [ 0:00] ## Line: 16 	 . lib/inittest
| [ 0:00] ## Line: 17 	 
| [ 0:00] ## Line: 18 	 aux prepare_vg 3
| [ 0:00] ## Line: 19 	 
| [ 0:00] ## Line: 20 	 lvcreate -an -Zn --type mirror -m 1 -l 1 -n mirror $vg
| [ 0:00] ## Line: 21 	 lvcreate -l 1 -n lv1 $vg "$dev1"
| [ 0:00] ## Line: 22 	 
| [ 0:00] ## Line: 23 	 # vgextend require vgname
| [ 0:00] ## Line: 24 	 invalid vgextend
| [ 0:00] ## Line: 25 	 # --metadatacopies => use --pvmetadatacopies
| [ 0:00] ## Line: 26 	 invalid vgextend --metadatacopies 3 $vg "$dev1" 2>&1 | tee out
| [ 0:00] ## Line: 27 	 #grep -- "use --pvmetadatacopies" out
| [ 0:00] ## Line: 28 	 grep -E -- "unrecognized option.*--metadatacopies" out
| [ 0:00] ## Line: 29 	 
| [ 0:00] ## Line: 30 	 # VG name should exist
| [ 0:00] ## Line: 31 	 fail vgextend --restoremissing $vg-invalid "$dev1"
| [ 0:00] ## Line: 32 	 
| [ 0:00] ## Line: 33 	 # try to just change metadata; we expect the new version (with MISSING_PV set
| [ 0:00] ## Line: 34 	 # on the reappeared volume) to be written out to the previously missing PV
| [ 0:00] ## Line: 35 	 aux disable_dev "$dev1"
| [ 0:00] ## Line: 36 	 lvremove $vg/mirror
| [ 0:00] ## Line: 37 	 # try restore the still existing device
| [ 0:00] ## Line: 38 	 fail vgextend --restore $vg "$dev1"
| [ 0:00] ## Line: 39 	 aux enable_dev "$dev1"
| [ 0:00] ## Line: 40 	 not vgck $vg 2>&1 | tee log
| [ 0:00] ## Line: 41 	 grep "missing 1 physical volume" log
| [ 0:00] ## Line: 42 	 not lvcreate -aey --type mirror -m 1 -l 1 -n mirror $vg # write operations fail
| [ 0:00] ## Line: 43 	 # try restore the non-missing device
| [ 0:00] ## Line: 44 	 fail vgextend --restore $vg "$dev2"
| [ 0:00] ## Line: 45 	 # try restore the non-existing device
| [ 0:00] ## Line: 46 	 fail vgextend --restore $vg "$dev2-invalid"
| [ 0:00] ## Line: 47 	 # restore the missing device
| [ 0:00] ## Line: 48 	 vgextend --restore $vg "$dev1"
| [ 0:00] ## Line: 49 	 
| [ 0:00] ## Line: 50 	 vgreduce  $vg "$dev3"
| [ 0:00] ## Line: 51 	 vgchange --metadatacopies 1 $vg
| [ 0:00] ## Line: 52 	 # 'n' failing to change volume group
| [ 0:00] ## Line: 53 	 fail vgextend --metadataignore y --pvmetadatacopies 2 $vg "$dev3"
| [ 0:00] ## Line: 54 	 vgextend --yes --metadataignore y --pvmetadatacopies 2 $vg "$dev3"
| [ 0:00] ## Line: 55 	 vgck $vg
| [ 0:00] ## Line: 56 	 lvcreate -an -Zn --type mirror -m 1 -l 1 -n mirror $vg
| [ 0:00] ## Line: 57 	 
| [ 0:00] ## Line: 58 	 vgremove -ff $vg
| [ 0:00] aux teardown
| [ 0:00] #vgextend-restoremissing.sh:1+ aux teardown
| [ 0:00] ## teardown.........ok
###       failed: [ndev-vanilla] shell/vgextend-restoremissing.sh

| [ 0:00] Library version:   1.02.146 (2017-12-18)
| [ 0:00] Driver version:    4.35.0
| [ 0:00] Kernel is Linux localhost.localdomain 3.10.0-693.11.1.el7.x86_64 #1 SMP Mon Dec 4 23:52:40 UTC 2017 x86_64 GNU/Linux
| [ 0:00] Selinux mode is not installed.
| [ 0:00]               total        used        free      shared  buff/cache   available
| [ 0:00] Mem:           7822        1079        4140          10        2602        6436
| [ 0:00] Swap:          4095           0        4095
| [ 0:00] Filesystem      Size  Used Avail Use% Mounted on
| [ 0:00] /dev/sdc1        18G  8.4G  8.4G  50% /
| [ 0:00] /dev/sdd1        51G  6.1G   43G  13% /lfskernel
| [ 0:00] devtmpfs        3.9G     0  3.9G   0% /dev
| [ 0:00] tmpfs           3.9G     0  3.9G   0% /run
| [ 0:00] @TESTDIR=/tmp/LVMTEST28851.paQxYrAZj5
| [ 0:00] @PREFIX=LVMTEST28851
| [ 0:00] ## LVMCONF: activation {
| [ 0:00] ## LVMCONF:     checks = 1
| [ 0:00] ## LVMCONF:     monitoring = 0
| [ 0:00] ## LVMCONF:     polling_interval = 1
| [ 0:00] ## LVMCONF:     raid_region_size = 512
| [ 0:00] ## LVMCONF:     retry_deactivation = 1
| [ 0:00] ## LVMCONF:     snapshot_autoextend_percent = 50
| [ 0:00] ## LVMCONF:     snapshot_autoextend_threshold = 50
| [ 0:00] ## LVMCONF:     udev_rules = 1
| [ 0:00] ## LVMCONF:     udev_sync = 1
| [ 0:00] ## LVMCONF:     verify_udev_operations = 1
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: allocation {
| [ 0:00] ## LVMCONF:     wipe_signatures_when_zeroing_new_lvs = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: backup {
| [ 0:00] ## LVMCONF:     archive = 0
| [ 0:00] ## LVMCONF:     backup = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: devices {
| [ 0:00] ## LVMCONF:     cache_dir = "@TESTDIR@/etc"
| [ 0:00] ## LVMCONF:     default_data_alignment = 1
| [ 0:00] ## LVMCONF:     dir = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     filter = "a|.*|"
| [ 0:00] ## LVMCONF:     global_filter = [ "a|@TESTDIR@/dev/mapper/@PREFIX@.*pv[0-9_]*$|", "r|.*|" ]
| [ 0:00] ## LVMCONF:     md_component_detection  = 0
| [ 0:00] ## LVMCONF:     scan = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     sysfs_scan = 1
| [ 0:00] ## LVMCONF:     write_cache_state = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: dmeventd {
| [ 0:00] ## LVMCONF:     executable = "/sources/boot/LVM2.2.02.177/test/lib/dmeventd"
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: global {
| [ 0:00] ## LVMCONF:     abort_on_internal_errors = 1
| [ 0:00] ## LVMCONF:     cache_check_executable = "/usr/sbin/cache_check"
| [ 0:00] ## LVMCONF:     cache_dump_executable = "/usr/sbin/cache_dump"
| [ 0:00] ## LVMCONF:     cache_repair_executable = "/usr/sbin/cache_repair"
| [ 0:00] ## LVMCONF:     detect_internal_vg_cache_corruption = 1
| [ 0:00] ## LVMCONF:     fallback_to_local_locking = 0
| [ 0:00] ## LVMCONF:     fsadm_executable = "/sources/boot/LVM2.2.02.177/test/lib/fsadm"
| [ 0:00] ## LVMCONF:     library_dir = "@TESTDIR@/lib"
| [ 0:00] ## LVMCONF:     locking_dir = "@TESTDIR@/var/lock/lvm"
| [ 0:00] ## LVMCONF:     locking_type=1
| [ 0:00] ## LVMCONF:     notify_dbus = 0
| [ 0:00] ## LVMCONF:     si_unit_consistency = 1
| [ 0:00] ## LVMCONF:     thin_check_executable = "/usr/sbin/thin_check"
| [ 0:00] ## LVMCONF:     thin_dump_executable = "/usr/sbin/thin_dump"
| [ 0:00] ## LVMCONF:     thin_repair_executable = "/usr/sbin/thin_repair"
| [ 0:00] ## LVMCONF:     use_lvmetad = 0
| [ 0:00] ## LVMCONF:     use_lvmlockd = 0
| [ 0:00] ## LVMCONF:     use_lvmpolld = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: log {
| [ 0:00] ## LVMCONF:     activation = 1
| [ 0:00] ## LVMCONF:     file = "@TESTDIR@/debug.log"
| [ 0:00] ## LVMCONF:     indent = 1
| [ 0:00] ## LVMCONF:     level = 9
| [ 0:00] ## LVMCONF:     overwrite = 1
| [ 0:00] ## LVMCONF:     syslog = 0
| [ 0:00] ## LVMCONF:     verbose = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] <======== Processing test: "vgextend-usage.sh" ========>
| [ 0:00] 
| [ 0:00] aux prepare_devs 5
| [ 0:00] #vgextend-usage.sh:22+ aux prepare_devs 5
| [ 0:00] ## preparing loop device....ok (/dev/loop0)
| [ 0:00] ## preparing 5 devices...lib/utils: line 212: DM_UDEV_COOKIE: unbound variable
| [ 0:00] set +vx; STACKTRACE; set -vx
| [ 0:00] ##vgextend-usage.sh:22+ set +vx
| [ 0:00] ## - /lfskernel/sources/boot/LVM2.2.02.177/test/shell/vgextend-usage.sh:22
| [ 0:00] ## 1 STACKTRACE() called from /lfskernel/sources/boot/LVM2.2.02.177/test/shell/vgextend-usage.sh:22
| [ 0:00] <======== Info ========>
| [ 0:00] ## DMINFO:   Name             Maj Min Stat Open Targ Event  UUID                                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv3  253   4 L--w    0    1      0 TEST-@PREFIX@pv3                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv2  253   3 L--w    0    1      0 TEST-@PREFIX@pv2                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv1  253   7 L--w    0    1      0 TEST-@PREFIX@pv1                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv5  253   6 L--w    0    1      0 TEST-@PREFIX@pv5                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv4  253   5 L--w    0    1      0 TEST-@PREFIX@pv4                                                
| [ 0:00] <======== Active table ========>
| [ 0:00] ## DMTABLE:  @PREFIX@pv3: 0 69632 linear 7:0 141312
| [ 0:00] ## DMTABLE:  @PREFIX@pv2: 0 69632 linear 7:0 71680
| [ 0:00] ## DMTABLE:  @PREFIX@pv1: 0 69632 linear 7:0 2048
| [ 0:00] ## DMTABLE:  @PREFIX@pv5: 0 69632 linear 7:0 280576
| [ 0:00] ## DMTABLE:  @PREFIX@pv4: 0 69632 linear 7:0 210944
| [ 0:00] <======== Inactive table ========>
| [ 0:00] ## DMITABLE: @PREFIX@pv3: 
| [ 0:00] ## DMITABLE: @PREFIX@pv2: 
| [ 0:00] ## DMITABLE: @PREFIX@pv1: 
| [ 0:00] ## DMITABLE: @PREFIX@pv5: 
| [ 0:00] ## DMITABLE: @PREFIX@pv4: 
| [ 0:00] <======== Status ========>
| [ 0:00] ## DMSTATUS: @PREFIX@pv3: 0 69632 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv2: 0 69632 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv1: 0 69632 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv5: 0 69632 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv4: 0 69632 linear 
| [ 0:00] <======== Tree ========>
| [ 0:00] ## DMTREE:   @PREFIX@pv3 (253:4)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   @PREFIX@pv2 (253:3)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   @PREFIX@pv1 (253:7)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   LFS_vg-lfs (253:2)
| [ 0:00] ## DMTREE:    `- (8:16)
| [ 0:00] ## DMTREE:   @PREFIX@pv5 (253:6)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   centos-swap (253:1)
| [ 0:00] ## DMTREE:    `- (8:2)
| [ 0:00] ## DMTREE:   centos-root (253:0)
| [ 0:00] ## DMTREE:    `- (8:2)
| [ 0:00] ## DMTREE:   @PREFIX@pv4 (253:5)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] <======== Recursive list of @TESTDIR@/dev ========>
| [ 0:00] ## LSLR:	@TESTDIR@/dev:
| [ 0:00] ## LSLR:	total 4
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 0 Feb 21 02:28 loop0
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 1 Feb 21 02:28 loop1
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 2 Feb 21 02:28 loop2
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 3 Feb 21 02:28 loop3
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 4 Feb 21 02:28 loop4
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 5 Feb 21 02:28 loop5
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 6 Feb 21 02:28 loop6
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 7 Feb 21 02:28 loop7
| [ 0:00] ## LSLR:	drwxr-xr-x 2 root root 4096 Feb 21 02:28 mapper
| [ 0:00] ## LSLR:	crw-r--r-- 1 root root 1, 3 Feb 21 02:28 testnull
| [ 0:00] ## LSLR:	
| [ 0:00] ## LSLR:	@TESTDIR@/dev/mapper:
| [ 0:00] ## LSLR:	total 0
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   7 Feb 21 02:28 @PREFIX@pv1
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   3 Feb 21 02:28 @PREFIX@pv2
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   4 Feb 21 02:28 @PREFIX@pv3
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   5 Feb 21 02:28 @PREFIX@pv4
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   6 Feb 21 02:28 @PREFIX@pv5
| [ 0:00] ## LSLR:	crw------- 1 root root  10, 236 Feb 21 02:28 control
| [ 0:00] <======== Udev DB content ========>
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-0
| [ 0:00] ## UDEV:	N: dm-0
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-0
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-0
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=0
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-1
| [ 0:00] ## UDEV:	N: dm-1
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-1
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-1
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=1
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-2
| [ 0:00] ## UDEV:	N: dm-2
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-2
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-2
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=2
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-3
| [ 0:00] ## UDEV:	N: dm-3
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-3
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-3
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=3
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-4
| [ 0:00] ## UDEV:	N: dm-4
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-4
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-4
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=4
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-5
| [ 0:00] ## UDEV:	N: dm-5
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-5
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-5
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=5
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-6
| [ 0:00] ## UDEV:	N: dm-6
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-6
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-6
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=6
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-7
| [ 0:00] ## UDEV:	N: dm-7
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-7
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-7
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=7
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/loop0
| [ 0:00] ## UDEV:	N: loop0
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/loop0
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/loop0
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=7
| [ 0:00] ## UDEV:	E: MINOR=0
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] <======== Script file "vgextend-usage.sh" ========>
| [ 0:00] ## Line: 1 	 #!/usr/bin/env bash
| [ 0:00] ## Line: 2 	 
| [ 0:00] ## Line: 3 	 # Copyright (C) 2008 Red Hat, Inc. All rights reserved.
| [ 0:00] ## Line: 4 	 #
| [ 0:00] ## Line: 5 	 # This copyrighted material is made available to anyone wishing to use,
| [ 0:00] ## Line: 6 	 # modify, copy, or redistribute it subject to the terms and conditions
| [ 0:00] ## Line: 7 	 # of the GNU General Public License v.2.
| [ 0:00] ## Line: 8 	 #
| [ 0:00] ## Line: 9 	 # You should have received a copy of the GNU General Public License
| [ 0:00] ## Line: 10 	 # along with this program; if not, write to the Free Software Foundation,
| [ 0:00] ## Line: 11 	 # Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA
| [ 0:00] ## Line: 12 	 
| [ 0:00] ## Line: 13 	 #
| [ 0:00] ## Line: 14 	 # Exercise various vgextend commands
| [ 0:00] ## Line: 15 	 #
| [ 0:00] ## Line: 16 	 
| [ 0:00] ## Line: 17 	 SKIP_WITH_LVMLOCKD=1
| [ 0:00] ## Line: 18 	 SKIP_WITH_LVMPOLLD=1
| [ 0:00] ## Line: 19 	 
| [ 0:00] ## Line: 20 	 . lib/inittest
| [ 0:00] ## Line: 21 	 
| [ 0:00] ## Line: 22 	 aux prepare_devs 5
| [ 0:00] ## Line: 23 	 
| [ 0:00] ## Line: 24 	 if test -n "$LVM_TEST_LVM1" ; then
| [ 0:00] ## Line: 25 	 mdatypes='1 2'
| [ 0:00] ## Line: 26 	 else
| [ 0:00] ## Line: 27 	 mdatypes='2'
| [ 0:00] ## Line: 28 	 fi
| [ 0:00] ## Line: 29 	 
| [ 0:00] ## Line: 30 	 for mdatype in $mdatypes
| [ 0:00] ## Line: 31 	 do
| [ 0:00] ## Line: 32 	 
| [ 0:00] ## Line: 33 	 # Explicit pvcreate
| [ 0:00] ## Line: 34 	 pvcreate -M$mdatype "$dev1" "$dev2" "$dev3" "$dev4" "$dev5"
| [ 0:00] ## Line: 35 	 vgcreate -M$mdatype $vg1 "$dev1" "$dev2"
| [ 0:00] ## Line: 36 	 vgextend $vg1 "$dev3" "$dev4" "$dev5"
| [ 0:00] ## Line: 37 	 vgremove -ff $vg1
| [ 0:00] ## Line: 38 	 
| [ 0:00] ## Line: 39 	 # Implicit pvcreate
| [ 0:00] ## Line: 40 	 pvremove "$dev1" "$dev2" "$dev3" "$dev4" "$dev5"
| [ 0:00] ## Line: 41 	 vgcreate -M$mdatype $vg1 "$dev1" "$dev2"
| [ 0:00] ## Line: 42 	 vgextend -M$mdatype $vg1 "$dev3" "$dev4" "$dev5"
| [ 0:00] ## Line: 43 	 vgremove -ff $vg1
| [ 0:00] ## Line: 44 	 pvremove "$dev1" "$dev2" "$dev3" "$dev4" "$dev5"
| [ 0:00] ## Line: 45 	 
| [ 0:00] ## Line: 46 	 done
| [ 0:00] ## Line: 47 	 
| [ 0:00] ## Line: 48 	 # Implicit pvcreate tests, test pvcreate options on vgcreate
| [ 0:00] ## Line: 49 	 # --force, --yes, --metadata{size|copies|type}, --zero
| [ 0:00] ## Line: 50 	 # --dataalignment[offset]
| [ 0:00] ## Line: 51 	 vgcreate $vg "$dev2"
| [ 0:00] ## Line: 52 	 vgextend --force --yes --zero y $vg "$dev1"
| [ 0:00] ## Line: 53 	 vgreduce $vg "$dev1"
| [ 0:00] ## Line: 54 	 pvremove -f "$dev1"
| [ 0:00] ## Line: 55 	 
| [ 0:00] ## Line: 56 	 for i in 0 1 2 3
| [ 0:00] ## Line: 57 	 do
| [ 0:00] ## Line: 58 	 # vgcreate (lvm2) succeeds writing LVM label at sector $i
| [ 0:00] ## Line: 59 	     vgextend --labelsector $i $vg "$dev1"
| [ 0:00] ## Line: 60 	     dd if="$dev1" bs=512 skip=$i count=1 2>/dev/null | strings | grep LABELONE >/dev/null
| [ 0:00] ## Line: 61 	     vgreduce $vg "$dev1"
| [ 0:00] ## Line: 62 	     pvremove -f "$dev1"
| [ 0:00] ## Line: 63 	 done
| [ 0:00] ## Line: 64 	 
| [ 0:00] ## Line: 65 	 # pvmetadatacopies
| [ 0:00] ## Line: 66 	 for i in 0 1 2
| [ 0:00] ## Line: 67 	 do
| [ 0:00] ## Line: 68 	     vgextend --pvmetadatacopies $i $vg "$dev1"
| [ 0:00] ## Line: 69 	     check pv_field "$dev1" pv_mda_count $i
| [ 0:00] ## Line: 70 	     vgreduce $vg "$dev1"
| [ 0:00] ## Line: 71 	     pvremove -f "$dev1"
| [ 0:00] ## Line: 72 	 done
| [ 0:00] ## Line: 73 	 
| [ 0:00] ## Line: 74 	 # metadatasize, dataalignment, dataalignmentoffset
| [ 0:00] ## Line: 75 	 #COMM 'pvcreate sets data offset next to mda area'
| [ 0:00] ## Line: 76 	 vgextend --metadatasize 100k --dataalignment 100k $vg "$dev1"
| [ 0:00] ## Line: 77 	 check pv_field "$dev1" pe_start 200.00k
| [ 0:00] ## Line: 78 	 vgreduce $vg "$dev1"
| [ 0:00] ## Line: 79 	 pvremove -f "$dev1"
| [ 0:00] ## Line: 80 	 
| [ 0:00] ## Line: 81 	 # data area is aligned to 1M by default,
| [ 0:00] ## Line: 82 	 # data area start is shifted by the specified alignment_offset
| [ 0:00] ## Line: 83 	 pv_align=1052160B # 1048576 + (7*512)
| [ 0:00] ## Line: 84 	 vgextend --metadatasize 128k --dataalignmentoffset 7s $vg "$dev1"
| [ 0:00] ## Line: 85 	 check pv_field "$dev1" pe_start $pv_align --units b
| [ 0:00] ## Line: 86 	 vgremove -f $vg
| [ 0:00] ## Line: 87 	 pvremove -f "$dev1"
| [ 0:00] ## Line: 88 	 
| [ 0:00] ## Line: 89 	 # vgextend fails if pv belongs to existing vg
| [ 0:00] ## Line: 90 	 vgcreate $vg1 "$dev1" "$dev3"
| [ 0:00] ## Line: 91 	 vgcreate $vg2 "$dev2"
| [ 0:00] ## Line: 92 	 not vgextend $vg2 "$dev3"
| [ 0:00] ## Line: 93 	 vgremove -f $vg1
| [ 0:00] ## Line: 94 	 vgremove -f $vg2
| [ 0:00] ## Line: 95 	 pvremove -f "$dev1" "$dev2" "$dev3"
| [ 0:00] ## Line: 96 	 
| [ 0:00] ## Line: 97 	 #vgextend fails if vg is not resizeable
| [ 0:00] ## Line: 98 	 vgcreate $vg1 "$dev1" "$dev2"
| [ 0:00] ## Line: 99 	 vgchange --resizeable n $vg1
| [ 0:00] ## Line: 100 	 not vgextend $vg1 "$dev3"
| [ 0:00] ## Line: 101 	 vgremove -f $vg1
| [ 0:00] ## Line: 102 	 pvremove -f "$dev1" "$dev2"
| [ 0:00] ## Line: 103 	 
| [ 0:00] ## Line: 104 	 # all PVs exist in the VG after extended
| [ 0:00] ## Line: 105 	 pvcreate "$dev1"
| [ 0:00] ## Line: 106 	 vgcreate $vg1 "$dev2"
| [ 0:00] ## Line: 107 	 vgextend $vg1 "$dev1" "$dev3"
| [ 0:00] ## Line: 108 	 check pv_field "$dev1" vg_name $vg1
| [ 0:00] ## Line: 109 	 check pv_field "$dev2" vg_name $vg1
| [ 0:00] ## Line: 110 	 check pv_field "$dev3" vg_name $vg1
| [ 0:00] ## Line: 111 	 vgremove -f $vg1
| [ 0:00] ## Line: 112 	 pvremove -f "$dev1" "$dev2" "$dev3"
| [ 0:00] ## Line: 113 	 
| [ 0:00] ## Line: 114 	 echo test vgextend --metadataignore
| [ 0:00] ## Line: 115 	 for mdacp in 1 2; do
| [ 0:00] ## Line: 116 	 for ignore in y n; do
| [ 0:00] ## Line: 117 	 	echo vgextend --metadataignore has proper mda_count and mda_used_count
| [ 0:00] ## Line: 118 	 	vgcreate $vg "$dev3"
| [ 0:00] ## Line: 119 	 	vgextend --metadataignore $ignore --pvmetadatacopies $mdacp $vg "$dev1" "$dev2"
| [ 0:00] ## Line: 120 	 	check pv_field "$dev1" pv_mda_count $mdacp
| [ 0:00] ## Line: 121 	 	check pv_field "$dev2" pv_mda_count $mdacp
| [ 0:00] ## Line: 122 	 	if [ $ignore = y ]; then
| [ 0:00] ## Line: 123 	 		check pv_field "$dev1" pv_mda_used_count 0
| [ 0:00] ## Line: 124 	 		check pv_field "$dev2" pv_mda_used_count 0
| [ 0:00] ## Line: 125 	 	else
| [ 0:00] ## Line: 126 	 		check pv_field "$dev1" pv_mda_used_count $mdacp
| [ 0:00] ## Line: 127 	 		check pv_field "$dev2" pv_mda_used_count $mdacp
| [ 0:00] ## Line: 128 	 	fi
| [ 0:00] ## Line: 129 	 	echo vg has proper vg_mda_count and vg_mda_used_count
| [ 0:00] ## Line: 130 	 	check vg_field $vg vg_mda_count $(( mdacp * 2 + 1 ))
| [ 0:00] ## Line: 131 	 	if [ $ignore = y ]; then
| [ 0:00] ## Line: 132 	 		check vg_field $vg vg_mda_used_count 1
| [ 0:00] ## Line: 133 	 	else
| [ 0:00] ## Line: 134 	 		check vg_field $vg vg_mda_used_count $(( mdacp * 2 + 1 ))
| [ 0:00] ## Line: 135 	 	fi
| [ 0:00] ## Line: 136 	 	check vg_field $vg vg_mda_copies unmanaged
| [ 0:00] ## Line: 137 	 	vgremove $vg
| [ 0:00] ## Line: 138 	 	pvremove -ff "$dev1" "$dev2" "$dev3"
| [ 0:00] ## Line: 139 	 done
| [ 0:00] ## Line: 140 	 done
| [ 0:00] aux teardown
| [ 0:00] #vgextend-usage.sh:1+ aux teardown
| [ 0:00] ## teardown.........ok
###       failed: [ndev-vanilla] shell/vgextend-usage.sh

| [ 0:00] Library version:   1.02.146 (2017-12-18)
| [ 0:00] Driver version:    4.35.0
| [ 0:00] Kernel is Linux localhost.localdomain 3.10.0-693.11.1.el7.x86_64 #1 SMP Mon Dec 4 23:52:40 UTC 2017 x86_64 GNU/Linux
| [ 0:00] Selinux mode is not installed.
| [ 0:00]               total        used        free      shared  buff/cache   available
| [ 0:00] Mem:           7822        1079        4140          10        2602        6436
| [ 0:00] Swap:          4095           0        4095
| [ 0:00] Filesystem      Size  Used Avail Use% Mounted on
| [ 0:00] /dev/sdc1        18G  8.4G  8.4G  50% /
| [ 0:00] /dev/sdd1        51G  6.1G   43G  13% /lfskernel
| [ 0:00] devtmpfs        3.9G     0  3.9G   0% /dev
| [ 0:00] tmpfs           3.9G     0  3.9G   0% /run
| [ 0:00] @TESTDIR=/tmp/LVMTEST29056.Hl742RhpIu
| [ 0:00] @PREFIX=LVMTEST29056
| [ 0:00] ## LVMCONF: activation {
| [ 0:00] ## LVMCONF:     checks = 1
| [ 0:00] ## LVMCONF:     monitoring = 0
| [ 0:00] ## LVMCONF:     polling_interval = 1
| [ 0:00] ## LVMCONF:     raid_region_size = 512
| [ 0:00] ## LVMCONF:     retry_deactivation = 1
| [ 0:00] ## LVMCONF:     snapshot_autoextend_percent = 50
| [ 0:00] ## LVMCONF:     snapshot_autoextend_threshold = 50
| [ 0:00] ## LVMCONF:     udev_rules = 1
| [ 0:00] ## LVMCONF:     udev_sync = 1
| [ 0:00] ## LVMCONF:     verify_udev_operations = 1
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: allocation {
| [ 0:00] ## LVMCONF:     wipe_signatures_when_zeroing_new_lvs = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: backup {
| [ 0:00] ## LVMCONF:     archive = 0
| [ 0:00] ## LVMCONF:     backup = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: devices {
| [ 0:00] ## LVMCONF:     cache_dir = "@TESTDIR@/etc"
| [ 0:00] ## LVMCONF:     default_data_alignment = 1
| [ 0:00] ## LVMCONF:     dir = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     filter = "a|.*|"
| [ 0:00] ## LVMCONF:     global_filter = [ "a|@TESTDIR@/dev/mapper/@PREFIX@.*pv[0-9_]*$|", "r|.*|" ]
| [ 0:00] ## LVMCONF:     md_component_detection  = 0
| [ 0:00] ## LVMCONF:     scan = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     sysfs_scan = 1
| [ 0:00] ## LVMCONF:     write_cache_state = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: dmeventd {
| [ 0:00] ## LVMCONF:     executable = "/sources/boot/LVM2.2.02.177/test/lib/dmeventd"
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: global {
| [ 0:00] ## LVMCONF:     abort_on_internal_errors = 1
| [ 0:00] ## LVMCONF:     cache_check_executable = "/usr/sbin/cache_check"
| [ 0:00] ## LVMCONF:     cache_dump_executable = "/usr/sbin/cache_dump"
| [ 0:00] ## LVMCONF:     cache_repair_executable = "/usr/sbin/cache_repair"
| [ 0:00] ## LVMCONF:     detect_internal_vg_cache_corruption = 1
| [ 0:00] ## LVMCONF:     fallback_to_local_locking = 0
| [ 0:00] ## LVMCONF:     fsadm_executable = "/sources/boot/LVM2.2.02.177/test/lib/fsadm"
| [ 0:00] ## LVMCONF:     library_dir = "@TESTDIR@/lib"
| [ 0:00] ## LVMCONF:     locking_dir = "@TESTDIR@/var/lock/lvm"
| [ 0:00] ## LVMCONF:     locking_type=1
| [ 0:00] ## LVMCONF:     notify_dbus = 0
| [ 0:00] ## LVMCONF:     si_unit_consistency = 1
| [ 0:00] ## LVMCONF:     thin_check_executable = "/usr/sbin/thin_check"
| [ 0:00] ## LVMCONF:     thin_dump_executable = "/usr/sbin/thin_dump"
| [ 0:00] ## LVMCONF:     thin_repair_executable = "/usr/sbin/thin_repair"
| [ 0:00] ## LVMCONF:     use_lvmetad = 0
| [ 0:00] ## LVMCONF:     use_lvmlockd = 0
| [ 0:00] ## LVMCONF:     use_lvmpolld = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: log {
| [ 0:00] ## LVMCONF:     activation = 1
| [ 0:00] ## LVMCONF:     file = "@TESTDIR@/debug.log"
| [ 0:00] ## LVMCONF:     indent = 1
| [ 0:00] ## LVMCONF:     level = 9
| [ 0:00] ## LVMCONF:     overwrite = 1
| [ 0:00] ## LVMCONF:     syslog = 0
| [ 0:00] ## LVMCONF:     verbose = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] <======== Processing test: "vgimportclone.sh" ========>
| [ 0:00] 
| [ 0:00] aux prepare_devs 2
| [ 0:00] #vgimportclone.sh:18+ aux prepare_devs 2
| [ 0:00] ## preparing loop device....ok (/dev/loop0)
| [ 0:00] ## preparing 2 devices...lib/utils: line 212: DM_UDEV_COOKIE: unbound variable
| [ 0:00] set +vx; STACKTRACE; set -vx
| [ 0:00] ##vgimportclone.sh:18+ set +vx
| [ 0:00] ## - /lfskernel/sources/boot/LVM2.2.02.177/test/shell/vgimportclone.sh:18
| [ 0:00] ## 1 STACKTRACE() called from /lfskernel/sources/boot/LVM2.2.02.177/test/shell/vgimportclone.sh:18
| [ 0:00] <======== Info ========>
| [ 0:00] ## DMINFO:   Name             Maj Min Stat Open Targ Event  UUID                                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv2  253   4 L--w    0    1      0 TEST-@PREFIX@pv2                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv1  253   3 L--w    0    1      0 TEST-@PREFIX@pv1                                                
| [ 0:00] <======== Active table ========>
| [ 0:00] ## DMTABLE:  @PREFIX@pv2: 0 69632 linear 7:0 71680
| [ 0:00] ## DMTABLE:  @PREFIX@pv1: 0 69632 linear 7:0 2048
| [ 0:00] <======== Inactive table ========>
| [ 0:00] ## DMITABLE: @PREFIX@pv2: 
| [ 0:00] ## DMITABLE: @PREFIX@pv1: 
| [ 0:00] <======== Status ========>
| [ 0:00] ## DMSTATUS: @PREFIX@pv2: 0 69632 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv1: 0 69632 linear 
| [ 0:00] <======== Tree ========>
| [ 0:00] ## DMTREE:   @PREFIX@pv2 (253:4)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   @PREFIX@pv1 (253:3)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   LFS_vg-lfs (253:2)
| [ 0:00] ## DMTREE:    `- (8:16)
| [ 0:00] ## DMTREE:   centos-swap (253:1)
| [ 0:00] ## DMTREE:    `- (8:2)
| [ 0:00] ## DMTREE:   centos-root (253:0)
| [ 0:00] ## DMTREE:    `- (8:2)
| [ 0:00] <======== Recursive list of @TESTDIR@/dev ========>
| [ 0:00] ## LSLR:	@TESTDIR@/dev:
| [ 0:00] ## LSLR:	total 4
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 0 Feb 21 02:28 loop0
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 1 Feb 21 02:28 loop1
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 2 Feb 21 02:28 loop2
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 3 Feb 21 02:28 loop3
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 4 Feb 21 02:28 loop4
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 5 Feb 21 02:28 loop5
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 6 Feb 21 02:28 loop6
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 7 Feb 21 02:28 loop7
| [ 0:00] ## LSLR:	drwxr-xr-x 2 root root 4096 Feb 21 02:28 mapper
| [ 0:00] ## LSLR:	crw-r--r-- 1 root root 1, 3 Feb 21 02:28 testnull
| [ 0:00] ## LSLR:	
| [ 0:00] ## LSLR:	@TESTDIR@/dev/mapper:
| [ 0:00] ## LSLR:	total 0
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   3 Feb 21 02:28 @PREFIX@pv1
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   4 Feb 21 02:28 @PREFIX@pv2
| [ 0:00] ## LSLR:	crw------- 1 root root  10, 236 Feb 21 02:28 control
| [ 0:00] <======== Udev DB content ========>
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-0
| [ 0:00] ## UDEV:	N: dm-0
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-0
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-0
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=0
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-1
| [ 0:00] ## UDEV:	N: dm-1
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-1
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-1
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=1
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-2
| [ 0:00] ## UDEV:	N: dm-2
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-2
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-2
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=2
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-3
| [ 0:00] ## UDEV:	N: dm-3
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-3
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-3
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=3
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-4
| [ 0:00] ## UDEV:	N: dm-4
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-4
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-4
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=4
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/loop0
| [ 0:00] ## UDEV:	N: loop0
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/loop0
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/loop0
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=7
| [ 0:00] ## UDEV:	E: MINOR=0
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] <======== Script file "vgimportclone.sh" ========>
| [ 0:00] ## Line: 1 	 #!/usr/bin/env bash
| [ 0:00] ## Line: 2 	 
| [ 0:00] ## Line: 3 	 # Copyright (C) 2010-2014 Red Hat, Inc. All rights reserved.
| [ 0:00] ## Line: 4 	 #
| [ 0:00] ## Line: 5 	 # This copyrighted material is made available to anyone wishing to use,
| [ 0:00] ## Line: 6 	 # modify, copy, or redistribute it subject to the terms and conditions
| [ 0:00] ## Line: 7 	 # of the GNU General Public License v.2.
| [ 0:00] ## Line: 8 	 #
| [ 0:00] ## Line: 9 	 # You should have received a copy of the GNU General Public License
| [ 0:00] ## Line: 10 	 # along with this program; if not, write to the Free Software Foundation,
| [ 0:00] ## Line: 11 	 # Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA
| [ 0:00] ## Line: 12 	 
| [ 0:00] ## Line: 13 	 SKIP_WITH_LVMLOCKD=1
| [ 0:00] ## Line: 14 	 SKIP_WITH_LVMPOLLD=1
| [ 0:00] ## Line: 15 	 
| [ 0:00] ## Line: 16 	 . lib/inittest
| [ 0:00] ## Line: 17 	 
| [ 0:00] ## Line: 18 	 aux prepare_devs 2
| [ 0:00] ## Line: 19 	 
| [ 0:00] ## Line: 20 	 vgcreate --metadatasize 128k $vg1 "$dev1"
| [ 0:00] ## Line: 21 	 lvcreate -l100%FREE -n $lv1 $vg1
| [ 0:00] ## Line: 22 	 
| [ 0:00] ## Line: 23 	 # Test plain vgexport vgimport tools
| [ 0:00] ## Line: 24 	 
| [ 0:00] ## Line: 25 	 # Argument is needed
| [ 0:00] ## Line: 26 	 invalid vgexport
| [ 0:00] ## Line: 27 	 invalid vgimport
| [ 0:00] ## Line: 28 	 # Cannot combine -a and VG name
| [ 0:00] ## Line: 29 	 invalid vgexport -a $vg
| [ 0:00] ## Line: 30 	 invalid vgimport -a $vg1
| [ 0:00] ## Line: 31 	 # Cannot export unknonw VG
| [ 0:00] ## Line: 32 	 fail vgexport ${vg1}-non
| [ 0:00] ## Line: 33 	 fail vgimport ${vg1}-non
| [ 0:00] ## Line: 34 	 # Cannot export VG with active volumes
| [ 0:00] ## Line: 35 	 fail vgexport $vg1
| [ 0:00] ## Line: 36 	 
| [ 0:00] ## Line: 37 	 vgchange -an $vg1
| [ 0:00] ## Line: 38 	 vgexport $vg1
| [ 0:00] ## Line: 39 	 # Already exported
| [ 0:00] ## Line: 40 	 fail vgexport $vg1
| [ 0:00] ## Line: 41 	 
| [ 0:00] ## Line: 42 	 vgimport $vg1
| [ 0:00] ## Line: 43 	 # Already imported
| [ 0:00] ## Line: 44 	 fail vgimport $vg1
| [ 0:00] ## Line: 45 	 vgchange -ay $vg1
| [ 0:00] ## Line: 46 	 
| [ 0:00] ## Line: 47 	 # Clone the LUN
| [ 0:00] ## Line: 48 	 dd if="$dev1" of="$dev2" bs=256K count=1
| [ 0:00] ## Line: 49 	 aux notify_lvmetad "$dev2"
| [ 0:00] ## Line: 50 	 
| [ 0:00] ## Line: 51 	 # Verify pvs works on each device to give us vgname
| [ 0:00] ## Line: 52 	 aux hide_dev "$dev2"
| [ 0:00] ## Line: 53 	 check pv_field "$dev1" vg_name $vg1
| [ 0:00] ## Line: 54 	 aux unhide_dev "$dev2"
| [ 0:00] ## Line: 55 	 
| [ 0:00] ## Line: 56 	 aux hide_dev "$dev1"
| [ 0:00] ## Line: 57 	 check pv_field "$dev2" vg_name $vg1
| [ 0:00] ## Line: 58 	 aux unhide_dev "$dev1"
| [ 0:00] ## Line: 59 	 
| [ 0:00] ## Line: 60 	 # Import the cloned PV to a new VG
| [ 0:00] ## Line: 61 	 vgimportclone --basevgname $vg2 "$dev2"
| [ 0:00] ## Line: 62 	 
| [ 0:00] ## Line: 63 	 # We need to re-scan *both* $dev1 and $dev2 since a PV, as far as lvmetad is
| [ 0:00] ## Line: 64 	 # concerned, can only live on a single device. With the last pvscan, we told it
| [ 0:00] ## Line: 65 	 # that PV from $dev1 now lives on $dev2, but in fact this is not true anymore,
| [ 0:00] ## Line: 66 	 # since we wrote a different PV over $dev2.
| [ 0:00] ## Line: 67 	 rm -f "$TESTDIR/etc/.cache"
| [ 0:00] ## Line: 68 	 aux notify_lvmetad "$dev2"
| [ 0:00] ## Line: 69 	 aux notify_lvmetad "$dev1"
| [ 0:00] ## Line: 70 	 
| [ 0:00] ## Line: 71 	 # Verify we can activate / deactivate the LV from both VGs
| [ 0:00] ## Line: 72 	 lvchange -ay $vg1/$lv1 $vg2/$lv1
| [ 0:00] ## Line: 73 	 vgchange -an $vg1 $vg2
| [ 0:00] ## Line: 74 	 
| [ 0:00] ## Line: 75 	 vgremove -ff $vg1 $vg2
| [ 0:00] ## Line: 76 	 
| [ 0:00] ## Line: 77 	 # Verify that if we provide the -n|--basevgname,
| [ 0:00] ## Line: 78 	 # the number suffix is not added unnecessarily.
| [ 0:00] ## Line: 79 	 vgcreate --metadatasize 128k A${vg1}B "$dev1"
| [ 0:00] ## Line: 80 	 
| [ 0:00] ## Line: 81 	 # vg1B is not the same as Avg1B - we don't need number suffix
| [ 0:00] ## Line: 82 	 dd if="$dev1" of="$dev2" bs=256K count=1
| [ 0:00] ## Line: 83 	 aux notify_lvmetad "$dev2"
| [ 0:00] ## Line: 84 	 vgimportclone -n ${vg1}B "$dev2"
| [ 0:00] ## Line: 85 	 check pv_field "$dev2" vg_name ${vg1}B
| [ 0:00] ## Line: 86 	 
| [ 0:00] ## Line: 87 	 # Avg1 is not the same as Avg1B - we don't need number suffix
| [ 0:00] ## Line: 88 	 dd if="$dev1" of="$dev2" bs=256K count=1
| [ 0:00] ## Line: 89 	 aux notify_lvmetad "$dev2"
| [ 0:00] ## Line: 90 	 vgimportclone -n A${vg1} "$dev2"
| [ 0:00] ## Line: 91 	 check pv_field "$dev2" vg_name A${vg1}
| [ 0:00] ## Line: 92 	 
| [ 0:00] ## Line: 93 	 # Avg1B is the same as Avg1B - we need to add the number suffix
| [ 0:00] ## Line: 94 	 dd if="$dev1" of="$dev2" bs=256K count=1
| [ 0:00] ## Line: 95 	 aux notify_lvmetad "$dev2"
| [ 0:00] ## Line: 96 	 vgimportclone -n A${vg1}B "$dev2"
| [ 0:00] ## Line: 97 	 aux vgs
| [ 0:00] ## Line: 98 	 check pv_field "$dev2" vg_name A${vg1}B1
| [ 0:00] ## Line: 99 	 
| [ 0:00] ## Line: 100 	 vgremove -ff A${vg1}B A${vg1}B1
| [ 0:00] aux teardown
| [ 0:00] #vgimportclone.sh:1+ aux teardown
| [ 0:00] ## teardown.........ok
###       failed: [ndev-vanilla] shell/vgimportclone.sh

| [ 0:01] Library version:   1.02.146 (2017-12-18)
| [ 0:01] Driver version:    4.35.0
| [ 0:01] Kernel is Linux localhost.localdomain 3.10.0-693.11.1.el7.x86_64 #1 SMP Mon Dec 4 23:52:40 UTC 2017 x86_64 GNU/Linux
| [ 0:01] Selinux mode is not installed.
| [ 0:01]               total        used        free      shared  buff/cache   available
| [ 0:01] Mem:           7822        1079        4140          10        2602        6436
| [ 0:01] Swap:          4095           0        4095
| [ 0:01] Filesystem      Size  Used Avail Use% Mounted on
| [ 0:01] /dev/sdc1        18G  8.4G  8.4G  50% /
| [ 0:01] /dev/sdd1        51G  6.1G   43G  13% /lfskernel
| [ 0:01] devtmpfs        3.9G     0  3.9G   0% /dev
| [ 0:01] tmpfs           3.9G     0  3.9G   0% /run
| [ 0:01] @TESTDIR=/tmp/LVMTEST29224.kYE20DXfbv
| [ 0:01] @PREFIX=LVMTEST29224
| [ 0:01] ## LVMCONF: activation {
| [ 0:01] ## LVMCONF:     checks = 1
| [ 0:01] ## LVMCONF:     monitoring = 0
| [ 0:01] ## LVMCONF:     polling_interval = 1
| [ 0:01] ## LVMCONF:     raid_region_size = 512
| [ 0:01] ## LVMCONF:     retry_deactivation = 1
| [ 0:01] ## LVMCONF:     snapshot_autoextend_percent = 50
| [ 0:01] ## LVMCONF:     snapshot_autoextend_threshold = 50
| [ 0:01] ## LVMCONF:     udev_rules = 1
| [ 0:01] ## LVMCONF:     udev_sync = 1
| [ 0:01] ## LVMCONF:     verify_udev_operations = 1
| [ 0:01] ## LVMCONF: }
| [ 0:01] ## LVMCONF: allocation {
| [ 0:01] ## LVMCONF:     wipe_signatures_when_zeroing_new_lvs = 0
| [ 0:01] ## LVMCONF: }
| [ 0:01] ## LVMCONF: backup {
| [ 0:01] ## LVMCONF:     archive = 0
| [ 0:01] ## LVMCONF:     backup = 0
| [ 0:01] ## LVMCONF: }
| [ 0:01] ## LVMCONF: devices {
| [ 0:01] ## LVMCONF:     cache_dir = "@TESTDIR@/etc"
| [ 0:01] ## LVMCONF:     default_data_alignment = 1
| [ 0:01] ## LVMCONF:     dir = "@TESTDIR@/dev"
| [ 0:01] ## LVMCONF:     filter = "a|.*|"
| [ 0:01] ## LVMCONF:     global_filter = [ "a|@TESTDIR@/dev/mapper/@PREFIX@.*pv[0-9_]*$|", "r|.*|" ]
| [ 0:01] ## LVMCONF:     md_component_detection  = 0
| [ 0:01] ## LVMCONF:     scan = "@TESTDIR@/dev"
| [ 0:01] ## LVMCONF:     sysfs_scan = 1
| [ 0:01] ## LVMCONF:     write_cache_state = 0
| [ 0:01] ## LVMCONF: }
| [ 0:01] ## LVMCONF: dmeventd {
| [ 0:01] ## LVMCONF:     executable = "/sources/boot/LVM2.2.02.177/test/lib/dmeventd"
| [ 0:01] ## LVMCONF: }
| [ 0:01] ## LVMCONF: global {
| [ 0:01] ## LVMCONF:     abort_on_internal_errors = 1
| [ 0:01] ## LVMCONF:     cache_check_executable = "/usr/sbin/cache_check"
| [ 0:01] ## LVMCONF:     cache_dump_executable = "/usr/sbin/cache_dump"
| [ 0:01] ## LVMCONF:     cache_repair_executable = "/usr/sbin/cache_repair"
| [ 0:01] ## LVMCONF:     detect_internal_vg_cache_corruption = 1
| [ 0:01] ## LVMCONF:     fallback_to_local_locking = 0
| [ 0:01] ## LVMCONF:     fsadm_executable = "/sources/boot/LVM2.2.02.177/test/lib/fsadm"
| [ 0:01] ## LVMCONF:     library_dir = "@TESTDIR@/lib"
| [ 0:01] ## LVMCONF:     locking_dir = "@TESTDIR@/var/lock/lvm"
| [ 0:01] ## LVMCONF:     locking_type=1
| [ 0:01] ## LVMCONF:     notify_dbus = 0
| [ 0:01] ## LVMCONF:     si_unit_consistency = 1
| [ 0:01] ## LVMCONF:     thin_check_executable = "/usr/sbin/thin_check"
| [ 0:01] ## LVMCONF:     thin_dump_executable = "/usr/sbin/thin_dump"
| [ 0:01] ## LVMCONF:     thin_repair_executable = "/usr/sbin/thin_repair"
| [ 0:01] ## LVMCONF:     use_lvmetad = 0
| [ 0:01] ## LVMCONF:     use_lvmlockd = 0
| [ 0:01] ## LVMCONF:     use_lvmpolld = 0
| [ 0:01] ## LVMCONF: }
| [ 0:01] ## LVMCONF: log {
| [ 0:01] ## LVMCONF:     activation = 1
| [ 0:01] ## LVMCONF:     file = "@TESTDIR@/debug.log"
| [ 0:01] ## LVMCONF:     indent = 1
| [ 0:01] ## LVMCONF:     level = 9
| [ 0:01] ## LVMCONF:     overwrite = 1
| [ 0:01] ## LVMCONF:     syslog = 0
| [ 0:01] ## LVMCONF:     verbose = 0
| [ 0:01] ## LVMCONF: }
| [ 0:01] <======== Processing test: "vgmerge-operation.sh" ========>
| [ 0:01] 
| [ 0:01] aux prepare_pvs 4 64
| [ 0:01] #vgmerge-operation.sh:19+ aux prepare_pvs 4 64
| [ 0:01] ## preparing loop device....ok (/dev/loop0)
| [ 0:01] ## preparing 4 devices...lib/utils: line 212: DM_UDEV_COOKIE: unbound variable
| [ 0:01] set +vx; STACKTRACE; set -vx
| [ 0:01] ##vgmerge-operation.sh:19+ set +vx
| [ 0:01] ## - /lfskernel/sources/boot/LVM2.2.02.177/test/shell/vgmerge-operation.sh:19
| [ 0:01] ## 1 STACKTRACE() called from /lfskernel/sources/boot/LVM2.2.02.177/test/shell/vgmerge-operation.sh:19
| [ 0:01] <======== Info ========>
| [ 0:01] ## DMINFO:   Name             Maj Min Stat Open Targ Event  UUID                                                                
| [ 0:01] ## DMINFO:   @PREFIX@pv4  253   5 L--w    0    1      0 TEST-@PREFIX@pv4                                                
| [ 0:01] ## DMINFO:   @PREFIX@pv3  253   4 L--w    0    1      0 TEST-@PREFIX@pv3                                                
| [ 0:01] ## DMINFO:   @PREFIX@pv2  253   3 L--w    0    1      0 TEST-@PREFIX@pv2                                                
| [ 0:01] ## DMINFO:   @PREFIX@pv1  253   6 L--w    0    1      0 TEST-@PREFIX@pv1                                                
| [ 0:01] <======== Active table ========>
| [ 0:01] ## DMTABLE:  @PREFIX@pv4: 0 131072 linear 7:0 395264
| [ 0:01] ## DMTABLE:  @PREFIX@pv3: 0 131072 linear 7:0 264192
| [ 0:01] ## DMTABLE:  @PREFIX@pv2: 0 131072 linear 7:0 133120
| [ 0:01] ## DMTABLE:  @PREFIX@pv1: 0 131072 linear 7:0 2048
| [ 0:01] <======== Inactive table ========>
| [ 0:01] ## DMITABLE: @PREFIX@pv4: 
| [ 0:01] ## DMITABLE: @PREFIX@pv3: 
| [ 0:01] ## DMITABLE: @PREFIX@pv2: 
| [ 0:01] ## DMITABLE: @PREFIX@pv1: 
| [ 0:01] <======== Status ========>
| [ 0:01] ## DMSTATUS: @PREFIX@pv4: 0 131072 linear 
| [ 0:01] ## DMSTATUS: @PREFIX@pv3: 0 131072 linear 
| [ 0:01] ## DMSTATUS: @PREFIX@pv2: 0 131072 linear 
| [ 0:01] ## DMSTATUS: @PREFIX@pv1: 0 131072 linear 
| [ 0:01] <======== Tree ========>
| [ 0:01] ## DMTREE:   @PREFIX@pv4 (253:5)
| [ 0:01] ## DMTREE:    `- (7:0)
| [ 0:01] ## DMTREE:   @PREFIX@pv3 (253:4)
| [ 0:01] ## DMTREE:    `- (7:0)
| [ 0:01] ## DMTREE:   @PREFIX@pv2 (253:3)
| [ 0:01] ## DMTREE:    `- (7:0)
| [ 0:01] ## DMTREE:   @PREFIX@pv1 (253:6)
| [ 0:01] ## DMTREE:    `- (7:0)
| [ 0:01] ## DMTREE:   LFS_vg-lfs (253:2)
| [ 0:01] ## DMTREE:    `- (8:16)
| [ 0:01] ## DMTREE:   centos-swap (253:1)
| [ 0:01] ## DMTREE:    `- (8:2)
| [ 0:01] ## DMTREE:   centos-root (253:0)
| [ 0:01] ## DMTREE:    `- (8:2)
| [ 0:01] <======== Recursive list of @TESTDIR@/dev ========>
| [ 0:01] ## LSLR:	@TESTDIR@/dev:
| [ 0:01] ## LSLR:	total 4
| [ 0:01] ## LSLR:	brw-r--r-- 1 root root 7, 0 Feb 21 02:28 loop0
| [ 0:01] ## LSLR:	brw-r--r-- 1 root root 7, 1 Feb 21 02:28 loop1
| [ 0:01] ## LSLR:	brw-r--r-- 1 root root 7, 2 Feb 21 02:28 loop2
| [ 0:01] ## LSLR:	brw-r--r-- 1 root root 7, 3 Feb 21 02:28 loop3
| [ 0:01] ## LSLR:	brw-r--r-- 1 root root 7, 4 Feb 21 02:28 loop4
| [ 0:01] ## LSLR:	brw-r--r-- 1 root root 7, 5 Feb 21 02:28 loop5
| [ 0:01] ## LSLR:	brw-r--r-- 1 root root 7, 6 Feb 21 02:28 loop6
| [ 0:01] ## LSLR:	brw-r--r-- 1 root root 7, 7 Feb 21 02:28 loop7
| [ 0:01] ## LSLR:	drwxr-xr-x 2 root root 4096 Feb 21 02:28 mapper
| [ 0:01] ## LSLR:	crw-r--r-- 1 root root 1, 3 Feb 21 02:28 testnull
| [ 0:01] ## LSLR:	
| [ 0:01] ## LSLR:	@TESTDIR@/dev/mapper:
| [ 0:01] ## LSLR:	total 0
| [ 0:01] ## LSLR:	brw------- 1 root root 253,   6 Feb 21 02:28 @PREFIX@pv1
| [ 0:01] ## LSLR:	brw------- 1 root root 253,   3 Feb 21 02:28 @PREFIX@pv2
| [ 0:01] ## LSLR:	brw------- 1 root root 253,   4 Feb 21 02:28 @PREFIX@pv3
| [ 0:01] ## LSLR:	brw------- 1 root root 253,   5 Feb 21 02:28 @PREFIX@pv4
| [ 0:01] ## LSLR:	crw------- 1 root root  10, 236 Feb 21 02:28 control
| [ 0:01] <======== Udev DB content ========>
| [ 0:01] ## UDEV:	P: /devices/virtual/block/dm-0
| [ 0:01] ## UDEV:	N: dm-0
| [ 0:01] ## UDEV:	E: DEVNAME=/dev/dm-0
| [ 0:01] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-0
| [ 0:01] ## UDEV:	E: DEVTYPE=disk
| [ 0:01] ## UDEV:	E: MAJOR=253
| [ 0:01] ## UDEV:	E: MINOR=0
| [ 0:01] ## UDEV:	E: SUBSYSTEM=block
| [ 0:01] ## UDEV:	
| [ 0:01] ## UDEV:	P: /devices/virtual/block/dm-1
| [ 0:01] ## UDEV:	N: dm-1
| [ 0:01] ## UDEV:	E: DEVNAME=/dev/dm-1
| [ 0:01] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-1
| [ 0:01] ## UDEV:	E: DEVTYPE=disk
| [ 0:01] ## UDEV:	E: MAJOR=253
| [ 0:01] ## UDEV:	E: MINOR=1
| [ 0:01] ## UDEV:	E: SUBSYSTEM=block
| [ 0:01] ## UDEV:	
| [ 0:01] ## UDEV:	P: /devices/virtual/block/dm-2
| [ 0:01] ## UDEV:	N: dm-2
| [ 0:01] ## UDEV:	E: DEVNAME=/dev/dm-2
| [ 0:01] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-2
| [ 0:01] ## UDEV:	E: DEVTYPE=disk
| [ 0:01] ## UDEV:	E: MAJOR=253
| [ 0:01] ## UDEV:	E: MINOR=2
| [ 0:01] ## UDEV:	E: SUBSYSTEM=block
| [ 0:01] ## UDEV:	
| [ 0:01] ## UDEV:	P: /devices/virtual/block/dm-3
| [ 0:01] ## UDEV:	N: dm-3
| [ 0:01] ## UDEV:	E: DEVNAME=/dev/dm-3
| [ 0:01] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-3
| [ 0:01] ## UDEV:	E: DEVTYPE=disk
| [ 0:01] ## UDEV:	E: MAJOR=253
| [ 0:01] ## UDEV:	E: MINOR=3
| [ 0:01] ## UDEV:	E: SUBSYSTEM=block
| [ 0:01] ## UDEV:	
| [ 0:01] ## UDEV:	P: /devices/virtual/block/dm-4
| [ 0:01] ## UDEV:	N: dm-4
| [ 0:01] ## UDEV:	E: DEVNAME=/dev/dm-4
| [ 0:01] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-4
| [ 0:01] ## UDEV:	E: DEVTYPE=disk
| [ 0:01] ## UDEV:	E: MAJOR=253
| [ 0:01] ## UDEV:	E: MINOR=4
| [ 0:01] ## UDEV:	E: SUBSYSTEM=block
| [ 0:01] ## UDEV:	
| [ 0:01] ## UDEV:	P: /devices/virtual/block/dm-5
| [ 0:01] ## UDEV:	N: dm-5
| [ 0:01] ## UDEV:	E: DEVNAME=/dev/dm-5
| [ 0:01] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-5
| [ 0:01] ## UDEV:	E: DEVTYPE=disk
| [ 0:01] ## UDEV:	E: MAJOR=253
| [ 0:01] ## UDEV:	E: MINOR=5
| [ 0:01] ## UDEV:	E: SUBSYSTEM=block
| [ 0:01] ## UDEV:	
| [ 0:01] ## UDEV:	P: /devices/virtual/block/dm-6
| [ 0:01] ## UDEV:	N: dm-6
| [ 0:01] ## UDEV:	E: DEVNAME=/dev/dm-6
| [ 0:01] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-6
| [ 0:01] ## UDEV:	E: DEVTYPE=disk
| [ 0:01] ## UDEV:	E: MAJOR=253
| [ 0:01] ## UDEV:	E: MINOR=6
| [ 0:01] ## UDEV:	E: SUBSYSTEM=block
| [ 0:01] ## UDEV:	
| [ 0:01] ## UDEV:	P: /devices/virtual/block/loop0
| [ 0:01] ## UDEV:	N: loop0
| [ 0:01] ## UDEV:	E: DEVNAME=/dev/loop0
| [ 0:01] ## UDEV:	E: DEVPATH=/devices/virtual/block/loop0
| [ 0:01] ## UDEV:	E: DEVTYPE=disk
| [ 0:01] ## UDEV:	E: MAJOR=7
| [ 0:01] ## UDEV:	E: MINOR=0
| [ 0:01] ## UDEV:	E: SUBSYSTEM=block
| [ 0:01] ## UDEV:	
| [ 0:01] <======== Script file "vgmerge-operation.sh" ========>
| [ 0:01] ## Line: 1 	 #!/usr/bin/env bash
| [ 0:01] ## Line: 2 	 
| [ 0:01] ## Line: 3 	 # Copyright (C) 2007-2012 Red Hat, Inc. All rights reserved.
| [ 0:01] ## Line: 4 	 #
| [ 0:01] ## Line: 5 	 # This copyrighted material is made available to anyone wishing to use,
| [ 0:01] ## Line: 6 	 # modify, copy, or redistribute it subject to the terms and conditions
| [ 0:01] ## Line: 7 	 # of the GNU General Public License v.2.
| [ 0:01] ## Line: 8 	 #
| [ 0:01] ## Line: 9 	 # You should have received a copy of the GNU General Public License
| [ 0:01] ## Line: 10 	 # along with this program; if not, write to the Free Software Foundation,
| [ 0:01] ## Line: 11 	 # Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA
| [ 0:01] ## Line: 12 	 
| [ 0:01] ## Line: 13 	 test_description='Test vgmerge operation'
| [ 0:01] ## Line: 14 	 SKIP_WITH_LVMLOCKD=1
| [ 0:01] ## Line: 15 	 SKIP_WITH_LVMPOLLD=1
| [ 0:01] ## Line: 16 	 
| [ 0:01] ## Line: 17 	 . lib/inittest
| [ 0:01] ## Line: 18 	 
| [ 0:01] ## Line: 19 	 aux prepare_pvs 4 64
| [ 0:01] ## Line: 20 	 
| [ 0:01] ## Line: 21 	 # 'vgmerge succeeds with single linear LV in source VG'
| [ 0:01] ## Line: 22 	 vgcreate $vg1 "$dev1" "$dev2"
| [ 0:01] ## Line: 23 	 vgcreate $vg2 "$dev3" "$dev4"
| [ 0:01] ## Line: 24 	 lvcreate -l 4 -n $lv1 $vg1 "$dev1"
| [ 0:01] ## Line: 25 	 vgchange -an $vg1
| [ 0:01] ## Line: 26 	 check pvlv_counts $vg1 2 1 0
| [ 0:01] ## Line: 27 	 check pvlv_counts $vg2 2 0 0
| [ 0:01] ## Line: 28 	 vgmerge $vg2 $vg1
| [ 0:01] ## Line: 29 	 check pvlv_counts $vg2 4 1 0
| [ 0:01] ## Line: 30 	 vgremove -f $vg2
| [ 0:01] ## Line: 31 	 
| [ 0:01] ## Line: 32 	 # 'vgmerge succeeds with single linear LV in source and destination VG'
| [ 0:01] ## Line: 33 	 vgcreate $vg1 "$dev1" "$dev2"
| [ 0:01] ## Line: 34 	 vgcreate $vg2 "$dev3" "$dev4"
| [ 0:01] ## Line: 35 	 lvcreate -l 4 -n $lv1 $vg1
| [ 0:01] ## Line: 36 	 lvcreate -l 4 -n $lv2 $vg2
| [ 0:01] ## Line: 37 	 vgchange -an $vg1
| [ 0:01] ## Line: 38 	 vgchange -an $vg2
| [ 0:01] ## Line: 39 	 check pvlv_counts $vg1 2 1 0
| [ 0:01] ## Line: 40 	 check pvlv_counts $vg2 2 1 0
| [ 0:01] ## Line: 41 	 vgmerge $vg2 $vg1
| [ 0:01] ## Line: 42 	 check pvlv_counts $vg2 4 2 0
| [ 0:01] ## Line: 43 	 vgremove -f $vg2
| [ 0:01] ## Line: 44 	 
| [ 0:01] ## Line: 45 	 # 'vgmerge succeeds with linear LV + snapshots in source VG'
| [ 0:01] ## Line: 46 	 vgcreate $vg1 "$dev1" "$dev2"
| [ 0:01] ## Line: 47 	 vgcreate $vg2 "$dev3" "$dev4"
| [ 0:01] ## Line: 48 	 lvcreate -aey -l 16 -n $lv1 $vg1
| [ 0:01] ## Line: 49 	 lvcreate -l 4 -s -n $lv2 $vg1/$lv1
| [ 0:01] ## Line: 50 	 vgchange -an $vg1
| [ 0:01] ## Line: 51 	 check pvlv_counts $vg1 2 2 1
| [ 0:01] ## Line: 52 	 check pvlv_counts $vg2 2 0 0
| [ 0:01] ## Line: 53 	 vgmerge $vg2 $vg1
| [ 0:01] ## Line: 54 	 check pvlv_counts $vg2 4 2 1
| [ 0:01] ## Line: 55 	 lvremove -f $vg2/$lv2
| [ 0:01] ## Line: 56 	 vgremove -f $vg2
| [ 0:01] ## Line: 57 	 
| [ 0:01] ## Line: 58 	 # 'vgmerge succeeds with mirrored LV in source VG'
| [ 0:01] ## Line: 59 	 vgcreate $vg1 "$dev1" "$dev2" "$dev3"
| [ 0:01] ## Line: 60 	 vgcreate $vg2 "$dev4"
| [ 0:01] ## Line: 61 	 lvcreate -aey -l 4 -n $lv1 --type mirror -m1 $vg1
| [ 0:01] ## Line: 62 	 vgchange -an $vg1
| [ 0:01] ## Line: 63 	 check pvlv_counts $vg1 3 1 0
| [ 0:01] ## Line: 64 	 check pvlv_counts $vg2 1 0 0
| [ 0:01] ## Line: 65 	 vgmerge $vg2 $vg1
| [ 0:01] ## Line: 66 	 check pvlv_counts $vg2 4 1 0
| [ 0:01] ## Line: 67 	 lvremove -f $vg2/$lv1
| [ 0:01] ## Line: 68 	 vgremove -f $vg2
| [ 0:01] ## Line: 69 	 
| [ 0:01] ## Line: 70 	 # 'vgmerge rejects LV name collision'
| [ 0:01] ## Line: 71 	 vgcreate $vg1 "$dev1" "$dev2"
| [ 0:01] ## Line: 72 	 vgcreate $vg2 "$dev3" "$dev4"
| [ 0:01] ## Line: 73 	 lvcreate -l 4 -n $lv1 $vg1
| [ 0:01] ## Line: 74 	 lvcreate -l 4 -n $lv1 $vg2
| [ 0:01] ## Line: 75 	 vgchange -an $vg1
| [ 0:01] ## Line: 76 	 check pvlv_counts $vg1 2 1 0
| [ 0:01] ## Line: 77 	 check pvlv_counts $vg2 2 1 0
| [ 0:01] ## Line: 78 	 not vgmerge $vg2 $vg1 2>err
| [ 0:01] ## Line: 79 	 grep "Duplicate logical volume name \"$lv1\" in \"$vg2\" and \"$vg1" err
| [ 0:01] ## Line: 80 	 check pvlv_counts $vg1 2 1 0
| [ 0:01] ## Line: 81 	 check pvlv_counts $vg2 2 1 0
| [ 0:01] ## Line: 82 	 vgremove -f $vg1 $vg2
| [ 0:01] aux teardown
| [ 0:01] #vgmerge-operation.sh:1+ aux teardown
| [ 0:01] ## teardown.........ok
###       failed: [ndev-vanilla] shell/vgmerge-operation.sh

| [ 0:00] Library version:   1.02.146 (2017-12-18)
| [ 0:00] Driver version:    4.35.0
| [ 0:00] Kernel is Linux localhost.localdomain 3.10.0-693.11.1.el7.x86_64 #1 SMP Mon Dec 4 23:52:40 UTC 2017 x86_64 GNU/Linux
| [ 0:00] Selinux mode is not installed.
| [ 0:00]               total        used        free      shared  buff/cache   available
| [ 0:00] Mem:           7822        1081        4138          10        2602        6433
| [ 0:00] Swap:          4095           0        4095
| [ 0:00] Filesystem      Size  Used Avail Use% Mounted on
| [ 0:00] /dev/sdc1        18G  8.4G  8.4G  50% /
| [ 0:00] /dev/sdd1        51G  6.1G   43G  13% /lfskernel
| [ 0:00] devtmpfs        3.9G     0  3.9G   0% /dev
| [ 0:00] tmpfs           3.9G     0  3.9G   0% /run
| [ 0:00] @TESTDIR=/tmp/LVMTEST29417.A2xtvv6rF8
| [ 0:00] @PREFIX=LVMTEST29417
| [ 0:00] ## LVMCONF: activation {
| [ 0:00] ## LVMCONF:     checks = 1
| [ 0:00] ## LVMCONF:     monitoring = 0
| [ 0:00] ## LVMCONF:     polling_interval = 1
| [ 0:00] ## LVMCONF:     raid_region_size = 512
| [ 0:00] ## LVMCONF:     retry_deactivation = 1
| [ 0:00] ## LVMCONF:     snapshot_autoextend_percent = 50
| [ 0:00] ## LVMCONF:     snapshot_autoextend_threshold = 50
| [ 0:00] ## LVMCONF:     udev_rules = 1
| [ 0:00] ## LVMCONF:     udev_sync = 1
| [ 0:00] ## LVMCONF:     verify_udev_operations = 1
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: allocation {
| [ 0:00] ## LVMCONF:     wipe_signatures_when_zeroing_new_lvs = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: backup {
| [ 0:00] ## LVMCONF:     archive = 0
| [ 0:00] ## LVMCONF:     backup = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: devices {
| [ 0:00] ## LVMCONF:     cache_dir = "@TESTDIR@/etc"
| [ 0:00] ## LVMCONF:     default_data_alignment = 1
| [ 0:00] ## LVMCONF:     dir = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     filter = "a|.*|"
| [ 0:00] ## LVMCONF:     global_filter = [ "a|@TESTDIR@/dev/mapper/@PREFIX@.*pv[0-9_]*$|", "r|.*|" ]
| [ 0:00] ## LVMCONF:     md_component_detection  = 0
| [ 0:00] ## LVMCONF:     scan = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     sysfs_scan = 1
| [ 0:00] ## LVMCONF:     write_cache_state = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: dmeventd {
| [ 0:00] ## LVMCONF:     executable = "/sources/boot/LVM2.2.02.177/test/lib/dmeventd"
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: global {
| [ 0:00] ## LVMCONF:     abort_on_internal_errors = 1
| [ 0:00] ## LVMCONF:     cache_check_executable = "/usr/sbin/cache_check"
| [ 0:00] ## LVMCONF:     cache_dump_executable = "/usr/sbin/cache_dump"
| [ 0:00] ## LVMCONF:     cache_repair_executable = "/usr/sbin/cache_repair"
| [ 0:00] ## LVMCONF:     detect_internal_vg_cache_corruption = 1
| [ 0:00] ## LVMCONF:     fallback_to_local_locking = 0
| [ 0:00] ## LVMCONF:     fsadm_executable = "/sources/boot/LVM2.2.02.177/test/lib/fsadm"
| [ 0:00] ## LVMCONF:     library_dir = "@TESTDIR@/lib"
| [ 0:00] ## LVMCONF:     locking_dir = "@TESTDIR@/var/lock/lvm"
| [ 0:00] ## LVMCONF:     locking_type=1
| [ 0:00] ## LVMCONF:     notify_dbus = 0
| [ 0:00] ## LVMCONF:     si_unit_consistency = 1
| [ 0:00] ## LVMCONF:     thin_check_executable = "/usr/sbin/thin_check"
| [ 0:00] ## LVMCONF:     thin_dump_executable = "/usr/sbin/thin_dump"
| [ 0:00] ## LVMCONF:     thin_repair_executable = "/usr/sbin/thin_repair"
| [ 0:00] ## LVMCONF:     use_lvmetad = 0
| [ 0:00] ## LVMCONF:     use_lvmlockd = 0
| [ 0:00] ## LVMCONF:     use_lvmpolld = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: log {
| [ 0:00] ## LVMCONF:     activation = 1
| [ 0:00] ## LVMCONF:     file = "@TESTDIR@/debug.log"
| [ 0:00] ## LVMCONF:     indent = 1
| [ 0:00] ## LVMCONF:     level = 9
| [ 0:00] ## LVMCONF:     overwrite = 1
| [ 0:00] ## LVMCONF:     syslog = 0
| [ 0:00] ## LVMCONF:     verbose = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] <======== Processing test: "vgmerge-usage.sh" ========>
| [ 0:00] 
| [ 0:00] aux prepare_pvs 4
| [ 0:00] #vgmerge-usage.sh:19+ aux prepare_pvs 4
| [ 0:00] ## preparing loop device....ok (/dev/loop0)
| [ 0:00] ## preparing 4 devices...lib/utils: line 212: DM_UDEV_COOKIE: unbound variable
| [ 0:00] set +vx; STACKTRACE; set -vx
| [ 0:00] ##vgmerge-usage.sh:19+ set +vx
| [ 0:00] ## - /lfskernel/sources/boot/LVM2.2.02.177/test/shell/vgmerge-usage.sh:19
| [ 0:00] ## 1 STACKTRACE() called from /lfskernel/sources/boot/LVM2.2.02.177/test/shell/vgmerge-usage.sh:19
| [ 0:00] <======== Info ========>
| [ 0:00] ## DMINFO:   Name             Maj Min Stat Open Targ Event  UUID                                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv4  253   4 L--w    0    1      0 TEST-@PREFIX@pv4                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv3  253   3 L--w    0    1      0 TEST-@PREFIX@pv3                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv2  253   6 L--w    0    1      0 TEST-@PREFIX@pv2                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv1  253   5 L--w    0    1      0 TEST-@PREFIX@pv1                                                
| [ 0:00] <======== Active table ========>
| [ 0:00] ## DMTABLE:  @PREFIX@pv4: 0 69632 linear 7:0 210944
| [ 0:00] ## DMTABLE:  @PREFIX@pv3: 0 69632 linear 7:0 141312
| [ 0:00] ## DMTABLE:  @PREFIX@pv2: 0 69632 linear 7:0 71680
| [ 0:00] ## DMTABLE:  @PREFIX@pv1: 0 69632 linear 7:0 2048
| [ 0:00] <======== Inactive table ========>
| [ 0:00] ## DMITABLE: @PREFIX@pv4: 
| [ 0:00] ## DMITABLE: @PREFIX@pv3: 
| [ 0:00] ## DMITABLE: @PREFIX@pv2: 
| [ 0:00] ## DMITABLE: @PREFIX@pv1: 
| [ 0:00] <======== Status ========>
| [ 0:00] ## DMSTATUS: @PREFIX@pv4: 0 69632 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv3: 0 69632 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv2: 0 69632 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv1: 0 69632 linear 
| [ 0:00] <======== Tree ========>
| [ 0:00] ## DMTREE:   @PREFIX@pv4 (253:4)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   @PREFIX@pv3 (253:3)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   @PREFIX@pv2 (253:6)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   @PREFIX@pv1 (253:5)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   LFS_vg-lfs (253:2)
| [ 0:00] ## DMTREE:    `- (8:16)
| [ 0:00] ## DMTREE:   centos-swap (253:1)
| [ 0:00] ## DMTREE:    `- (8:2)
| [ 0:00] ## DMTREE:   centos-root (253:0)
| [ 0:00] ## DMTREE:    `- (8:2)
| [ 0:00] <======== Recursive list of @TESTDIR@/dev ========>
| [ 0:00] ## LSLR:	@TESTDIR@/dev:
| [ 0:00] ## LSLR:	total 4
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 0 Feb 21 02:28 loop0
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 1 Feb 21 02:28 loop1
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 2 Feb 21 02:28 loop2
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 3 Feb 21 02:28 loop3
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 4 Feb 21 02:28 loop4
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 5 Feb 21 02:28 loop5
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 6 Feb 21 02:28 loop6
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 7 Feb 21 02:28 loop7
| [ 0:00] ## LSLR:	drwxr-xr-x 2 root root 4096 Feb 21 02:28 mapper
| [ 0:00] ## LSLR:	crw-r--r-- 1 root root 1, 3 Feb 21 02:28 testnull
| [ 0:00] ## LSLR:	
| [ 0:00] ## LSLR:	@TESTDIR@/dev/mapper:
| [ 0:00] ## LSLR:	total 0
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   5 Feb 21 02:28 @PREFIX@pv1
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   6 Feb 21 02:28 @PREFIX@pv2
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   3 Feb 21 02:28 @PREFIX@pv3
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   4 Feb 21 02:28 @PREFIX@pv4
| [ 0:00] ## LSLR:	crw------- 1 root root  10, 236 Feb 21 02:28 control
| [ 0:00] <======== Udev DB content ========>
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-0
| [ 0:00] ## UDEV:	N: dm-0
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-0
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-0
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=0
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-1
| [ 0:00] ## UDEV:	N: dm-1
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-1
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-1
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=1
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-2
| [ 0:00] ## UDEV:	N: dm-2
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-2
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-2
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=2
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-3
| [ 0:00] ## UDEV:	N: dm-3
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-3
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-3
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=3
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-4
| [ 0:00] ## UDEV:	N: dm-4
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-4
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-4
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=4
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-5
| [ 0:00] ## UDEV:	N: dm-5
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-5
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-5
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=5
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-6
| [ 0:00] ## UDEV:	N: dm-6
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-6
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-6
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=6
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/loop0
| [ 0:00] ## UDEV:	N: loop0
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/loop0
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/loop0
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=7
| [ 0:00] ## UDEV:	E: MINOR=0
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] <======== Script file "vgmerge-usage.sh" ========>
| [ 0:00] ## Line: 1 	 #!/usr/bin/env bash
| [ 0:00] ## Line: 2 	 
| [ 0:00] ## Line: 3 	 # Copyright (C) 2008-2011 Red Hat, Inc. All rights reserved.
| [ 0:00] ## Line: 4 	 #
| [ 0:00] ## Line: 5 	 # This copyrighted material is made available to anyone wishing to use,
| [ 0:00] ## Line: 6 	 # modify, copy, or redistribute it subject to the terms and conditions
| [ 0:00] ## Line: 7 	 # of the GNU General Public License v.2.
| [ 0:00] ## Line: 8 	 #
| [ 0:00] ## Line: 9 	 # You should have received a copy of the GNU General Public License
| [ 0:00] ## Line: 10 	 # along with this program; if not, write to the Free Software Foundation,
| [ 0:00] ## Line: 11 	 # Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA
| [ 0:00] ## Line: 12 	 
| [ 0:00] ## Line: 13 	 # 'Test vgmerge command options for validity'
| [ 0:00] ## Line: 14 	 SKIP_WITH_LVMLOCKD=1
| [ 0:00] ## Line: 15 	 SKIP_WITH_LVMPOLLD=1
| [ 0:00] ## Line: 16 	 
| [ 0:00] ## Line: 17 	 . lib/inittest
| [ 0:00] ## Line: 18 	 
| [ 0:00] ## Line: 19 	 aux prepare_pvs 4
| [ 0:00] ## Line: 20 	 
| [ 0:00] ## Line: 21 	 # 'vgmerge normal operation'
| [ 0:00] ## Line: 22 	 # ensure ordering does not matter
| [ 0:00] ## Line: 23 	 vgcreate  $vg1 "$dev1" "$dev2"
| [ 0:00] ## Line: 24 	 vgcreate  $vg2 "$dev3" "$dev4"
| [ 0:00] ## Line: 25 	 vgmerge $vg1 $vg2
| [ 0:00] ## Line: 26 	 vgremove $vg1
| [ 0:00] ## Line: 27 	 vgcreate $vg2 "$dev1" "$dev2"
| [ 0:00] ## Line: 28 	 vgcreate $vg1 "$dev3" "$dev4"
| [ 0:00] ## Line: 29 	 vgmerge $vg2 $vg1
| [ 0:00] ## Line: 30 	 vgremove $vg2
| [ 0:00] ## Line: 31 	 
| [ 0:00] ## Line: 32 	 # 'vgmerge rejects duplicate vg name'
| [ 0:00] ## Line: 33 	 vgcreate  $vg1 "$dev1" "$dev2"
| [ 0:00] ## Line: 34 	 vgcreate  $vg2 "$dev3" "$dev4"
| [ 0:00] ## Line: 35 	 not vgmerge $vg1 $vg1 2>err
| [ 0:00] ## Line: 36 	 grep "Duplicate volume group name \"$vg1\"\$" err
| [ 0:00] ## Line: 37 	 vgremove $vg1 $vg2
| [ 0:00] ## Line: 38 	 
| [ 0:00] ## Line: 39 	 # 'vgmerge rejects vgs with incompatible extent_size'
| [ 0:00] ## Line: 40 	 vgcreate  --physicalextentsize 4M $vg1 "$dev1" "$dev2"
| [ 0:00] ## Line: 41 	 vgcreate  --physicalextentsize 8M $vg2 "$dev3" "$dev4"
| [ 0:00] ## Line: 42 	 not vgmerge $vg1 $vg2 2>err
| [ 0:00] ## Line: 43 	 grep "Extent sizes differ" err
| [ 0:00] ## Line: 44 	 vgremove $vg1 $vg2
| [ 0:00] ## Line: 45 	 
| [ 0:00] ## Line: 46 	 # 'vgmerge rejects vgmerge because max_pv is exceeded'
| [ 0:00] ## Line: 47 	 vgcreate  --maxphysicalvolumes 2 $vg1 "$dev1" "$dev2"
| [ 0:00] ## Line: 48 	 vgcreate  --maxphysicalvolumes 2 $vg2 "$dev3" "$dev4"
| [ 0:00] ## Line: 49 	 not vgmerge $vg1 $vg2 2>err
| [ 0:00] ## Line: 50 	 grep "Maximum number of physical volumes (2) exceeded" err
| [ 0:00] ## Line: 51 	 vgremove $vg1 $vg2
| [ 0:00] ## Line: 52 	 
| [ 0:00] ## Line: 53 	 # 'vgmerge rejects vg with active lv'
| [ 0:00] ## Line: 54 	 vgcreate $vg1 "$dev1" "$dev2"
| [ 0:00] ## Line: 55 	 vgcreate $vg2 "$dev3" "$dev4"
| [ 0:00] ## Line: 56 	 lvcreate -l 4 -n lv1 $vg2
| [ 0:00] ## Line: 57 	 not vgmerge $vg1 $vg2 2>err
| [ 0:00] ## Line: 58 	 grep "Logical volumes in \"$vg2\" must be inactive" err
| [ 0:00] ## Line: 59 	 vgremove -f $vg1 $vg2
| [ 0:00] ## Line: 60 	 
| [ 0:00] ## Line: 61 	 # 'vgmerge rejects vgmerge because max_lv is exceeded'
| [ 0:00] ## Line: 62 	 vgcreate --maxlogicalvolumes 2 $vg1 "$dev1" "$dev2"
| [ 0:00] ## Line: 63 	 vgcreate --maxlogicalvolumes 2 $vg2 "$dev3" "$dev4"
| [ 0:00] ## Line: 64 	 lvcreate -l 4 -n lv1 $vg1
| [ 0:00] ## Line: 65 	 lvcreate -l 4 -n lv2 $vg1
| [ 0:00] ## Line: 66 	 lvcreate -l 4 -n lv3 $vg2
| [ 0:00] ## Line: 67 	 vgchange -an $vg1 $vg2
| [ 0:00] ## Line: 68 	 not vgmerge $vg1 $vg2 2>err
| [ 0:00] ## Line: 69 	 grep "Maximum number of logical volumes (2) exceeded" err
| [ 0:00] ## Line: 70 	 vgremove -f $vg1 $vg2
| [ 0:00] aux teardown
| [ 0:00] #vgmerge-usage.sh:1+ aux teardown
| [ 0:00] ## teardown.........ok
###       failed: [ndev-vanilla] shell/vgmerge-usage.sh

| [ 0:00] Library version:   1.02.146 (2017-12-18)
| [ 0:00] Driver version:    4.35.0
| [ 0:00] Kernel is Linux localhost.localdomain 3.10.0-693.11.1.el7.x86_64 #1 SMP Mon Dec 4 23:52:40 UTC 2017 x86_64 GNU/Linux
| [ 0:00] Selinux mode is not installed.
| [ 0:00]               total        used        free      shared  buff/cache   available
| [ 0:00] Mem:           7822        1082        4138          10        2602        6433
| [ 0:00] Swap:          4095           0        4095
| [ 0:00] Filesystem      Size  Used Avail Use% Mounted on
| [ 0:00] /dev/sdc1        18G  8.4G  8.4G  50% /
| [ 0:00] /dev/sdd1        51G  6.1G   43G  13% /lfskernel
| [ 0:00] devtmpfs        3.9G     0  3.9G   0% /dev
| [ 0:00] tmpfs           3.9G     0  3.9G   0% /run
| [ 0:00] @TESTDIR=/tmp/LVMTEST29609.tOyeAFqpvQ
| [ 0:00] @PREFIX=LVMTEST29609
| [ 0:00] ## LVMCONF: activation {
| [ 0:00] ## LVMCONF:     checks = 1
| [ 0:00] ## LVMCONF:     monitoring = 0
| [ 0:00] ## LVMCONF:     polling_interval = 1
| [ 0:00] ## LVMCONF:     raid_region_size = 512
| [ 0:00] ## LVMCONF:     retry_deactivation = 1
| [ 0:00] ## LVMCONF:     snapshot_autoextend_percent = 50
| [ 0:00] ## LVMCONF:     snapshot_autoextend_threshold = 50
| [ 0:00] ## LVMCONF:     udev_rules = 1
| [ 0:00] ## LVMCONF:     udev_sync = 1
| [ 0:00] ## LVMCONF:     verify_udev_operations = 1
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: allocation {
| [ 0:00] ## LVMCONF:     wipe_signatures_when_zeroing_new_lvs = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: backup {
| [ 0:00] ## LVMCONF:     archive = 0
| [ 0:00] ## LVMCONF:     backup = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: devices {
| [ 0:00] ## LVMCONF:     cache_dir = "@TESTDIR@/etc"
| [ 0:00] ## LVMCONF:     default_data_alignment = 1
| [ 0:00] ## LVMCONF:     dir = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     filter = "a|.*|"
| [ 0:00] ## LVMCONF:     global_filter = [ "a|@TESTDIR@/dev/mapper/@PREFIX@.*pv[0-9_]*$|", "r|.*|" ]
| [ 0:00] ## LVMCONF:     md_component_detection  = 0
| [ 0:00] ## LVMCONF:     scan = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     sysfs_scan = 1
| [ 0:00] ## LVMCONF:     write_cache_state = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: dmeventd {
| [ 0:00] ## LVMCONF:     executable = "/sources/boot/LVM2.2.02.177/test/lib/dmeventd"
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: global {
| [ 0:00] ## LVMCONF:     abort_on_internal_errors = 1
| [ 0:00] ## LVMCONF:     cache_check_executable = "/usr/sbin/cache_check"
| [ 0:00] ## LVMCONF:     cache_dump_executable = "/usr/sbin/cache_dump"
| [ 0:00] ## LVMCONF:     cache_repair_executable = "/usr/sbin/cache_repair"
| [ 0:00] ## LVMCONF:     detect_internal_vg_cache_corruption = 1
| [ 0:00] ## LVMCONF:     fallback_to_local_locking = 0
| [ 0:00] ## LVMCONF:     fsadm_executable = "/sources/boot/LVM2.2.02.177/test/lib/fsadm"
| [ 0:00] ## LVMCONF:     library_dir = "@TESTDIR@/lib"
| [ 0:00] ## LVMCONF:     locking_dir = "@TESTDIR@/var/lock/lvm"
| [ 0:00] ## LVMCONF:     locking_type=1
| [ 0:00] ## LVMCONF:     notify_dbus = 0
| [ 0:00] ## LVMCONF:     si_unit_consistency = 1
| [ 0:00] ## LVMCONF:     thin_check_executable = "/usr/sbin/thin_check"
| [ 0:00] ## LVMCONF:     thin_dump_executable = "/usr/sbin/thin_dump"
| [ 0:00] ## LVMCONF:     thin_repair_executable = "/usr/sbin/thin_repair"
| [ 0:00] ## LVMCONF:     use_lvmetad = 0
| [ 0:00] ## LVMCONF:     use_lvmlockd = 0
| [ 0:00] ## LVMCONF:     use_lvmpolld = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: log {
| [ 0:00] ## LVMCONF:     activation = 1
| [ 0:00] ## LVMCONF:     file = "@TESTDIR@/debug.log"
| [ 0:00] ## LVMCONF:     indent = 1
| [ 0:00] ## LVMCONF:     level = 9
| [ 0:00] ## LVMCONF:     overwrite = 1
| [ 0:00] ## LVMCONF:     syslog = 0
| [ 0:00] ## LVMCONF:     verbose = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] <======== Processing test: "vgreduce-removemissing-snapshot.sh" ========>
| [ 0:00] 
| [ 0:00] #
| [ 0:00] # Snapshots of 'mirrors' are not supported.  They can no longer be created.
| [ 0:00] # This file could be used to test some aspect of vgreduce, snapshot, and
| [ 0:00] # RAID at some point though...
| [ 0:00] #
| [ 0:00] 
| [ 0:00] aux prepare_vg 5
| [ 0:00] #vgreduce-removemissing-snapshot.sh:25+ aux prepare_vg 5
| [ 0:00] ## preparing loop device....ok (/dev/loop0)
| [ 0:01] ## preparing 5 devices...lib/utils: line 212: DM_UDEV_COOKIE: unbound variable
| [ 0:01] set +vx; STACKTRACE; set -vx
| [ 0:01] ##vgreduce-removemissing-snapshot.sh:25+ set +vx
| [ 0:01] ## - /lfskernel/sources/boot/LVM2.2.02.177/test/shell/vgreduce-removemissing-snapshot.sh:25
| [ 0:01] ## 1 STACKTRACE() called from /lfskernel/sources/boot/LVM2.2.02.177/test/shell/vgreduce-removemissing-snapshot.sh:25
| [ 0:01] <======== Info ========>
| [ 0:01] ## DMINFO:   Name             Maj Min Stat Open Targ Event  UUID                                                                
| [ 0:01] ## DMINFO:   @PREFIX@pv5  253   6 L--w    0    1      0 TEST-@PREFIX@pv5                                                
| [ 0:01] ## DMINFO:   @PREFIX@pv4  253   4 L--w    0    1      0 TEST-@PREFIX@pv4                                                
| [ 0:01] ## DMINFO:   @PREFIX@pv3  253   3 L--w    0    1      0 TEST-@PREFIX@pv3                                                
| [ 0:01] ## DMINFO:   @PREFIX@pv2  253   7 L--w    0    1      0 TEST-@PREFIX@pv2                                                
| [ 0:01] ## DMINFO:   @PREFIX@pv1  253   5 L--w    0    1      0 TEST-@PREFIX@pv1                                                
| [ 0:01] <======== Active table ========>
| [ 0:01] ## DMTABLE:  @PREFIX@pv5: 0 69632 linear 7:0 280576
| [ 0:01] ## DMTABLE:  @PREFIX@pv4: 0 69632 linear 7:0 210944
| [ 0:01] ## DMTABLE:  @PREFIX@pv3: 0 69632 linear 7:0 141312
| [ 0:01] ## DMTABLE:  @PREFIX@pv2: 0 69632 linear 7:0 71680
| [ 0:01] ## DMTABLE:  @PREFIX@pv1: 0 69632 linear 7:0 2048
| [ 0:01] <======== Inactive table ========>
| [ 0:01] ## DMITABLE: @PREFIX@pv5: 
| [ 0:01] ## DMITABLE: @PREFIX@pv4: 
| [ 0:01] ## DMITABLE: @PREFIX@pv3: 
| [ 0:01] ## DMITABLE: @PREFIX@pv2: 
| [ 0:01] ## DMITABLE: @PREFIX@pv1: 
| [ 0:01] <======== Status ========>
| [ 0:01] ## DMSTATUS: @PREFIX@pv5: 0 69632 linear 
| [ 0:01] ## DMSTATUS: @PREFIX@pv4: 0 69632 linear 
| [ 0:01] ## DMSTATUS: @PREFIX@pv3: 0 69632 linear 
| [ 0:01] ## DMSTATUS: @PREFIX@pv2: 0 69632 linear 
| [ 0:01] ## DMSTATUS: @PREFIX@pv1: 0 69632 linear 
| [ 0:01] <======== Tree ========>
| [ 0:01] ## DMTREE:   @PREFIX@pv5 (253:6)
| [ 0:01] ## DMTREE:    `- (7:0)
| [ 0:01] ## DMTREE:   @PREFIX@pv4 (253:4)
| [ 0:01] ## DMTREE:    `- (7:0)
| [ 0:01] ## DMTREE:   @PREFIX@pv3 (253:3)
| [ 0:01] ## DMTREE:    `- (7:0)
| [ 0:01] ## DMTREE:   @PREFIX@pv2 (253:7)
| [ 0:01] ## DMTREE:    `- (7:0)
| [ 0:01] ## DMTREE:   @PREFIX@pv1 (253:5)
| [ 0:01] ## DMTREE:    `- (7:0)
| [ 0:01] ## DMTREE:   LFS_vg-lfs (253:2)
| [ 0:01] ## DMTREE:    `- (8:16)
| [ 0:01] ## DMTREE:   centos-swap (253:1)
| [ 0:01] ## DMTREE:    `- (8:2)
| [ 0:01] ## DMTREE:   centos-root (253:0)
| [ 0:01] ## DMTREE:    `- (8:2)
| [ 0:01] <======== Recursive list of @TESTDIR@/dev ========>
| [ 0:01] ## LSLR:	@TESTDIR@/dev:
| [ 0:01] ## LSLR:	total 4
| [ 0:01] ## LSLR:	brw-r--r-- 1 root root 7, 0 Feb 21 02:28 loop0
| [ 0:01] ## LSLR:	brw-r--r-- 1 root root 7, 1 Feb 21 02:28 loop1
| [ 0:01] ## LSLR:	brw-r--r-- 1 root root 7, 2 Feb 21 02:28 loop2
| [ 0:01] ## LSLR:	brw-r--r-- 1 root root 7, 3 Feb 21 02:28 loop3
| [ 0:01] ## LSLR:	brw-r--r-- 1 root root 7, 4 Feb 21 02:28 loop4
| [ 0:01] ## LSLR:	brw-r--r-- 1 root root 7, 5 Feb 21 02:28 loop5
| [ 0:01] ## LSLR:	brw-r--r-- 1 root root 7, 6 Feb 21 02:28 loop6
| [ 0:01] ## LSLR:	brw-r--r-- 1 root root 7, 7 Feb 21 02:28 loop7
| [ 0:01] ## LSLR:	drwxr-xr-x 2 root root 4096 Feb 21 02:28 mapper
| [ 0:01] ## LSLR:	crw-r--r-- 1 root root 1, 3 Feb 21 02:28 testnull
| [ 0:01] ## LSLR:	
| [ 0:01] ## LSLR:	@TESTDIR@/dev/mapper:
| [ 0:01] ## LSLR:	total 0
| [ 0:01] ## LSLR:	brw------- 1 root root 253,   5 Feb 21 02:28 @PREFIX@pv1
| [ 0:01] ## LSLR:	brw------- 1 root root 253,   7 Feb 21 02:28 @PREFIX@pv2
| [ 0:01] ## LSLR:	brw------- 1 root root 253,   3 Feb 21 02:28 @PREFIX@pv3
| [ 0:01] ## LSLR:	brw------- 1 root root 253,   4 Feb 21 02:28 @PREFIX@pv4
| [ 0:01] ## LSLR:	brw------- 1 root root 253,   6 Feb 21 02:28 @PREFIX@pv5
| [ 0:01] ## LSLR:	crw------- 1 root root  10, 236 Feb 21 02:28 control
| [ 0:01] <======== Udev DB content ========>
| [ 0:01] ## UDEV:	P: /devices/virtual/block/dm-0
| [ 0:01] ## UDEV:	N: dm-0
| [ 0:01] ## UDEV:	E: DEVNAME=/dev/dm-0
| [ 0:01] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-0
| [ 0:01] ## UDEV:	E: DEVTYPE=disk
| [ 0:01] ## UDEV:	E: MAJOR=253
| [ 0:01] ## UDEV:	E: MINOR=0
| [ 0:01] ## UDEV:	E: SUBSYSTEM=block
| [ 0:01] ## UDEV:	
| [ 0:01] ## UDEV:	P: /devices/virtual/block/dm-1
| [ 0:01] ## UDEV:	N: dm-1
| [ 0:01] ## UDEV:	E: DEVNAME=/dev/dm-1
| [ 0:01] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-1
| [ 0:01] ## UDEV:	E: DEVTYPE=disk
| [ 0:01] ## UDEV:	E: MAJOR=253
| [ 0:01] ## UDEV:	E: MINOR=1
| [ 0:01] ## UDEV:	E: SUBSYSTEM=block
| [ 0:01] ## UDEV:	
| [ 0:01] ## UDEV:	P: /devices/virtual/block/dm-2
| [ 0:01] ## UDEV:	N: dm-2
| [ 0:01] ## UDEV:	E: DEVNAME=/dev/dm-2
| [ 0:01] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-2
| [ 0:01] ## UDEV:	E: DEVTYPE=disk
| [ 0:01] ## UDEV:	E: MAJOR=253
| [ 0:01] ## UDEV:	E: MINOR=2
| [ 0:01] ## UDEV:	E: SUBSYSTEM=block
| [ 0:01] ## UDEV:	
| [ 0:01] ## UDEV:	P: /devices/virtual/block/dm-3
| [ 0:01] ## UDEV:	N: dm-3
| [ 0:01] ## UDEV:	E: DEVNAME=/dev/dm-3
| [ 0:01] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-3
| [ 0:01] ## UDEV:	E: DEVTYPE=disk
| [ 0:01] ## UDEV:	E: MAJOR=253
| [ 0:01] ## UDEV:	E: MINOR=3
| [ 0:01] ## UDEV:	E: SUBSYSTEM=block
| [ 0:01] ## UDEV:	
| [ 0:01] ## UDEV:	P: /devices/virtual/block/dm-4
| [ 0:01] ## UDEV:	N: dm-4
| [ 0:01] ## UDEV:	E: DEVNAME=/dev/dm-4
| [ 0:01] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-4
| [ 0:01] ## UDEV:	E: DEVTYPE=disk
| [ 0:01] ## UDEV:	E: MAJOR=253
| [ 0:01] ## UDEV:	E: MINOR=4
| [ 0:01] ## UDEV:	E: SUBSYSTEM=block
| [ 0:01] ## UDEV:	
| [ 0:01] ## UDEV:	P: /devices/virtual/block/dm-5
| [ 0:01] ## UDEV:	N: dm-5
| [ 0:01] ## UDEV:	E: DEVNAME=/dev/dm-5
| [ 0:01] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-5
| [ 0:01] ## UDEV:	E: DEVTYPE=disk
| [ 0:01] ## UDEV:	E: MAJOR=253
| [ 0:01] ## UDEV:	E: MINOR=5
| [ 0:01] ## UDEV:	E: SUBSYSTEM=block
| [ 0:01] ## UDEV:	
| [ 0:01] ## UDEV:	P: /devices/virtual/block/dm-6
| [ 0:01] ## UDEV:	N: dm-6
| [ 0:01] ## UDEV:	E: DEVNAME=/dev/dm-6
| [ 0:01] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-6
| [ 0:01] ## UDEV:	E: DEVTYPE=disk
| [ 0:01] ## UDEV:	E: MAJOR=253
| [ 0:01] ## UDEV:	E: MINOR=6
| [ 0:01] ## UDEV:	E: SUBSYSTEM=block
| [ 0:01] ## UDEV:	
| [ 0:01] ## UDEV:	P: /devices/virtual/block/dm-7
| [ 0:01] ## UDEV:	N: dm-7
| [ 0:01] ## UDEV:	E: DEVNAME=/dev/dm-7
| [ 0:01] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-7
| [ 0:01] ## UDEV:	E: DEVTYPE=disk
| [ 0:01] ## UDEV:	E: MAJOR=253
| [ 0:01] ## UDEV:	E: MINOR=7
| [ 0:01] ## UDEV:	E: SUBSYSTEM=block
| [ 0:01] ## UDEV:	
| [ 0:01] ## UDEV:	P: /devices/virtual/block/loop0
| [ 0:01] ## UDEV:	N: loop0
| [ 0:01] ## UDEV:	E: DEVNAME=/dev/loop0
| [ 0:01] ## UDEV:	E: DEVPATH=/devices/virtual/block/loop0
| [ 0:01] ## UDEV:	E: DEVTYPE=disk
| [ 0:01] ## UDEV:	E: MAJOR=7
| [ 0:01] ## UDEV:	E: MINOR=0
| [ 0:01] ## UDEV:	E: SUBSYSTEM=block
| [ 0:01] ## UDEV:	
| [ 0:01] <======== Script file "vgreduce-removemissing-snapshot.sh" ========>
| [ 0:01] ## Line: 1 	 #!/usr/bin/env bash
| [ 0:01] ## Line: 2 	 
| [ 0:01] ## Line: 3 	 # Copyright (C) 2011 Red Hat, Inc. All rights reserved.
| [ 0:01] ## Line: 4 	 #
| [ 0:01] ## Line: 5 	 # This copyrighted material is made available to anyone wishing to use,
| [ 0:01] ## Line: 6 	 # modify, copy, or redistribute it subject to the terms and conditions
| [ 0:01] ## Line: 7 	 # of the GNU General Public License v.2.
| [ 0:01] ## Line: 8 	 #
| [ 0:01] ## Line: 9 	 # You should have received a copy of the GNU General Public License
| [ 0:01] ## Line: 10 	 # along with this program; if not, write to the Free Software Foundation,
| [ 0:01] ## Line: 11 	 # Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA
| [ 0:01] ## Line: 12 	 
| [ 0:01] ## Line: 13 	 SKIP_WITH_LVMLOCKD=1
| [ 0:01] ## Line: 14 	 SKIP_WITH_CLVMD=1
| [ 0:01] ## Line: 15 	 SKIP_WITH_LVMPOLLD=1
| [ 0:01] ## Line: 16 	 
| [ 0:01] ## Line: 17 	 . lib/inittest
| [ 0:01] ## Line: 18 	 
| [ 0:01] ## Line: 19 	 #
| [ 0:01] ## Line: 20 	 # Snapshots of 'mirrors' are not supported.  They can no longer be created.
| [ 0:01] ## Line: 21 	 # This file could be used to test some aspect of vgreduce, snapshot, and
| [ 0:01] ## Line: 22 	 # RAID at some point though...
| [ 0:01] ## Line: 23 	 #
| [ 0:01] ## Line: 24 	 
| [ 0:01] ## Line: 25 	 aux prepare_vg 5
| [ 0:01] ## Line: 26 	 
| [ 0:01] ## Line: 27 	 lvcreate --type mirror -m 3 -L 2M -n 4way $vg "$dev1" "$dev2" "$dev3" "$dev4" "$dev5":0
| [ 0:01] ## Line: 28 	 lvcreate -s $vg/4way -L 2M -n snap
| [ 0:01] ## Line: 29 	 lvcreate -i 2 -L 2M $vg "$dev1" "$dev2" -n stripe
| [ 0:01] ## Line: 30 	 
| [ 0:01] ## Line: 31 	 aux disable_dev "$dev2" "$dev4"
| [ 0:01] ## Line: 32 	 echo n | lvconvert --repair $vg/4way
| [ 0:01] ## Line: 33 	 aux enable_dev "$dev2" "$dev4"
| [ 0:01] ## Line: 34 	 #not vgreduce --removemissing $vg
| [ 0:01] ## Line: 35 	 vgreduce -v --removemissing --force $vg # "$dev2" "$dev4"
| [ 0:01] ## Line: 36 	 lvs -a -o +devices $vg | not grep unknown
| [ 0:01] ## Line: 37 	 lvs -a -o +devices $vg
| [ 0:01] ## Line: 38 	 check mirror $vg 4way "$dev5"
| [ 0:01] ## Line: 39 	 
| [ 0:01] ## Line: 40 	 vgremove -ff $vg
| [ 0:01] aux teardown
| [ 0:01] #vgreduce-removemissing-snapshot.sh:1+ aux teardown
| [ 0:01] ## teardown.........ok
###       failed: [ndev-vanilla] shell/vgreduce-removemissing-snapshot.sh

| [ 0:00] Library version:   1.02.146 (2017-12-18)
| [ 0:00] Driver version:    4.35.0
| [ 0:00] Kernel is Linux localhost.localdomain 3.10.0-693.11.1.el7.x86_64 #1 SMP Mon Dec 4 23:52:40 UTC 2017 x86_64 GNU/Linux
| [ 0:00] Selinux mode is not installed.
| [ 0:00]               total        used        free      shared  buff/cache   available
| [ 0:00] Mem:           7822        1082        4138          10        2602        6433
| [ 0:00] Swap:          4095           0        4095
| [ 0:00] Filesystem      Size  Used Avail Use% Mounted on
| [ 0:00] /dev/sdc1        18G  8.4G  8.4G  50% /
| [ 0:00] /dev/sdd1        51G  6.1G   43G  13% /lfskernel
| [ 0:00] devtmpfs        3.9G     0  3.9G   0% /dev
| [ 0:00] tmpfs           3.9G     0  3.9G   0% /run
| [ 0:00] @TESTDIR=/tmp/LVMTEST29823.qlc1yWZ0QB
| [ 0:00] @PREFIX=LVMTEST29823
| [ 0:00] ## LVMCONF: activation {
| [ 0:00] ## LVMCONF:     checks = 1
| [ 0:00] ## LVMCONF:     monitoring = 0
| [ 0:00] ## LVMCONF:     polling_interval = 1
| [ 0:00] ## LVMCONF:     raid_region_size = 512
| [ 0:00] ## LVMCONF:     retry_deactivation = 1
| [ 0:00] ## LVMCONF:     snapshot_autoextend_percent = 50
| [ 0:00] ## LVMCONF:     snapshot_autoextend_threshold = 50
| [ 0:00] ## LVMCONF:     udev_rules = 1
| [ 0:00] ## LVMCONF:     udev_sync = 1
| [ 0:00] ## LVMCONF:     verify_udev_operations = 1
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: allocation {
| [ 0:00] ## LVMCONF:     wipe_signatures_when_zeroing_new_lvs = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: backup {
| [ 0:00] ## LVMCONF:     archive = 0
| [ 0:00] ## LVMCONF:     backup = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: devices {
| [ 0:00] ## LVMCONF:     cache_dir = "@TESTDIR@/etc"
| [ 0:00] ## LVMCONF:     default_data_alignment = 1
| [ 0:00] ## LVMCONF:     dir = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     filter = "a|.*|"
| [ 0:00] ## LVMCONF:     global_filter = [ "a|@TESTDIR@/dev/mapper/@PREFIX@.*pv[0-9_]*$|", "r|.*|" ]
| [ 0:00] ## LVMCONF:     md_component_detection  = 0
| [ 0:00] ## LVMCONF:     scan = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     sysfs_scan = 1
| [ 0:00] ## LVMCONF:     write_cache_state = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: dmeventd {
| [ 0:00] ## LVMCONF:     executable = "/sources/boot/LVM2.2.02.177/test/lib/dmeventd"
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: global {
| [ 0:00] ## LVMCONF:     abort_on_internal_errors = 1
| [ 0:00] ## LVMCONF:     cache_check_executable = "/usr/sbin/cache_check"
| [ 0:00] ## LVMCONF:     cache_dump_executable = "/usr/sbin/cache_dump"
| [ 0:00] ## LVMCONF:     cache_repair_executable = "/usr/sbin/cache_repair"
| [ 0:00] ## LVMCONF:     detect_internal_vg_cache_corruption = 1
| [ 0:00] ## LVMCONF:     fallback_to_local_locking = 0
| [ 0:00] ## LVMCONF:     fsadm_executable = "/sources/boot/LVM2.2.02.177/test/lib/fsadm"
| [ 0:00] ## LVMCONF:     library_dir = "@TESTDIR@/lib"
| [ 0:00] ## LVMCONF:     locking_dir = "@TESTDIR@/var/lock/lvm"
| [ 0:00] ## LVMCONF:     locking_type=1
| [ 0:00] ## LVMCONF:     notify_dbus = 0
| [ 0:00] ## LVMCONF:     si_unit_consistency = 1
| [ 0:00] ## LVMCONF:     thin_check_executable = "/usr/sbin/thin_check"
| [ 0:00] ## LVMCONF:     thin_dump_executable = "/usr/sbin/thin_dump"
| [ 0:00] ## LVMCONF:     thin_repair_executable = "/usr/sbin/thin_repair"
| [ 0:00] ## LVMCONF:     use_lvmetad = 0
| [ 0:00] ## LVMCONF:     use_lvmlockd = 0
| [ 0:00] ## LVMCONF:     use_lvmpolld = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: log {
| [ 0:00] ## LVMCONF:     activation = 1
| [ 0:00] ## LVMCONF:     file = "@TESTDIR@/debug.log"
| [ 0:00] ## LVMCONF:     indent = 1
| [ 0:00] ## LVMCONF:     level = 9
| [ 0:00] ## LVMCONF:     overwrite = 1
| [ 0:00] ## LVMCONF:     syslog = 0
| [ 0:00] ## LVMCONF:     verbose = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] <======== Processing test: "vgreduce-usage.sh" ========>
| [ 0:00] 
| [ 0:00] aux prepare_devs 4
| [ 0:00] #vgreduce-usage.sh:18+ aux prepare_devs 4
| [ 0:00] ## preparing loop device....ok (/dev/loop0)
| [ 0:00] ## preparing 4 devices...lib/utils: line 212: DM_UDEV_COOKIE: unbound variable
| [ 0:00] set +vx; STACKTRACE; set -vx
| [ 0:00] ##vgreduce-usage.sh:18+ set +vx
| [ 0:00] ## - /lfskernel/sources/boot/LVM2.2.02.177/test/shell/vgreduce-usage.sh:18
| [ 0:00] ## 1 STACKTRACE() called from /lfskernel/sources/boot/LVM2.2.02.177/test/shell/vgreduce-usage.sh:18
| [ 0:00] <======== Info ========>
| [ 0:00] ## DMINFO:   Name             Maj Min Stat Open Targ Event  UUID                                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv4  253   5 L--w    0    1      0 TEST-@PREFIX@pv4                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv3  253   4 L--w    0    1      0 TEST-@PREFIX@pv3                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv2  253   3 L--w    0    1      0 TEST-@PREFIX@pv2                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv1  253   6 L--w    0    1      0 TEST-@PREFIX@pv1                                                
| [ 0:00] <======== Active table ========>
| [ 0:00] ## DMTABLE:  @PREFIX@pv4: 0 69632 linear 7:0 210944
| [ 0:00] ## DMTABLE:  @PREFIX@pv3: 0 69632 linear 7:0 141312
| [ 0:00] ## DMTABLE:  @PREFIX@pv2: 0 69632 linear 7:0 71680
| [ 0:00] ## DMTABLE:  @PREFIX@pv1: 0 69632 linear 7:0 2048
| [ 0:00] <======== Inactive table ========>
| [ 0:00] ## DMITABLE: @PREFIX@pv4: 
| [ 0:00] ## DMITABLE: @PREFIX@pv3: 
| [ 0:00] ## DMITABLE: @PREFIX@pv2: 
| [ 0:00] ## DMITABLE: @PREFIX@pv1: 
| [ 0:00] <======== Status ========>
| [ 0:00] ## DMSTATUS: @PREFIX@pv4: 0 69632 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv3: 0 69632 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv2: 0 69632 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv1: 0 69632 linear 
| [ 0:00] <======== Tree ========>
| [ 0:00] ## DMTREE:   @PREFIX@pv4 (253:5)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   @PREFIX@pv3 (253:4)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   @PREFIX@pv2 (253:3)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   @PREFIX@pv1 (253:6)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   LFS_vg-lfs (253:2)
| [ 0:00] ## DMTREE:    `- (8:16)
| [ 0:00] ## DMTREE:   centos-swap (253:1)
| [ 0:00] ## DMTREE:    `- (8:2)
| [ 0:00] ## DMTREE:   centos-root (253:0)
| [ 0:00] ## DMTREE:    `- (8:2)
| [ 0:00] <======== Recursive list of @TESTDIR@/dev ========>
| [ 0:00] ## LSLR:	@TESTDIR@/dev:
| [ 0:00] ## LSLR:	total 4
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 0 Feb 21 02:28 loop0
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 1 Feb 21 02:28 loop1
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 2 Feb 21 02:28 loop2
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 3 Feb 21 02:28 loop3
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 4 Feb 21 02:28 loop4
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 5 Feb 21 02:28 loop5
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 6 Feb 21 02:28 loop6
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 7 Feb 21 02:28 loop7
| [ 0:00] ## LSLR:	drwxr-xr-x 2 root root 4096 Feb 21 02:28 mapper
| [ 0:00] ## LSLR:	crw-r--r-- 1 root root 1, 3 Feb 21 02:28 testnull
| [ 0:00] ## LSLR:	
| [ 0:00] ## LSLR:	@TESTDIR@/dev/mapper:
| [ 0:00] ## LSLR:	total 0
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   6 Feb 21 02:28 @PREFIX@pv1
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   3 Feb 21 02:28 @PREFIX@pv2
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   4 Feb 21 02:28 @PREFIX@pv3
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   5 Feb 21 02:28 @PREFIX@pv4
| [ 0:00] ## LSLR:	crw------- 1 root root  10, 236 Feb 21 02:28 control
| [ 0:00] <======== Udev DB content ========>
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-0
| [ 0:00] ## UDEV:	N: dm-0
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-0
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-0
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=0
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-1
| [ 0:00] ## UDEV:	N: dm-1
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-1
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-1
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=1
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-2
| [ 0:00] ## UDEV:	N: dm-2
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-2
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-2
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=2
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-3
| [ 0:00] ## UDEV:	N: dm-3
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-3
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-3
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=3
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-4
| [ 0:00] ## UDEV:	N: dm-4
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-4
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-4
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=4
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-5
| [ 0:00] ## UDEV:	N: dm-5
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-5
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-5
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=5
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-6
| [ 0:00] ## UDEV:	N: dm-6
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-6
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-6
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=6
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/loop0
| [ 0:00] ## UDEV:	N: loop0
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/loop0
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/loop0
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=7
| [ 0:00] ## UDEV:	E: MINOR=0
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] <======== Script file "vgreduce-usage.sh" ========>
| [ 0:00] ## Line: 1 	 #!/usr/bin/env bash
| [ 0:00] ## Line: 2 	 
| [ 0:00] ## Line: 3 	 # Copyright (C) 2008 Red Hat, Inc. All rights reserved.
| [ 0:00] ## Line: 4 	 #
| [ 0:00] ## Line: 5 	 # This copyrighted material is made available to anyone wishing to use,
| [ 0:00] ## Line: 6 	 # modify, copy, or redistribute it subject to the terms and conditions
| [ 0:00] ## Line: 7 	 # of the GNU General Public License v.2.
| [ 0:00] ## Line: 8 	 #
| [ 0:00] ## Line: 9 	 # You should have received a copy of the GNU General Public License
| [ 0:00] ## Line: 10 	 # along with this program; if not, write to the Free Software Foundation,
| [ 0:00] ## Line: 11 	 # Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA
| [ 0:00] ## Line: 12 	 
| [ 0:00] ## Line: 13 	 SKIP_WITH_LVMLOCKD=1
| [ 0:00] ## Line: 14 	 SKIP_WITH_LVMPOLLD=1
| [ 0:00] ## Line: 15 	 
| [ 0:00] ## Line: 16 	 . lib/inittest
| [ 0:00] ## Line: 17 	 
| [ 0:00] ## Line: 18 	 aux prepare_devs 4
| [ 0:00] ## Line: 19 	 get_devs
| [ 0:00] ## Line: 20 	 
| [ 0:00] ## Line: 21 	 if test -n "$LVM_TEST_LVM1" ; then
| [ 0:00] ## Line: 22 	 mdatypes='1 2'
| [ 0:00] ## Line: 23 	 else
| [ 0:00] ## Line: 24 	 mdatypes='2'
| [ 0:00] ## Line: 25 	 fi
| [ 0:00] ## Line: 26 	 
| [ 0:00] ## Line: 27 	 for mdatype in $mdatypes
| [ 0:00] ## Line: 28 	 do
| [ 0:00] ## Line: 29 	     # setup PVs
| [ 0:00] ## Line: 30 	     pvcreate -M$mdatype "$dev1" "$dev2"
| [ 0:00] ## Line: 31 	 
| [ 0:00] ## Line: 32 	     # (lvm$mdatype) vgreduce removes only the specified pv from vg (bz427382)" '
| [ 0:00] ## Line: 33 	     vgcreate -M$mdatype $vg1 "$dev1" "$dev2"
| [ 0:00] ## Line: 34 	     vgreduce $vg1 "$dev1"
| [ 0:00] ## Line: 35 	     check pv_field "$dev2" vg_name $vg1
| [ 0:00] ## Line: 36 	     vgremove -f $vg1
| [ 0:00] ## Line: 37 	 
| [ 0:00] ## Line: 38 	     # (lvm$mdatype) vgreduce rejects removing the last pv (--all)
| [ 0:00] ## Line: 39 	     vgcreate -M$mdatype $vg1 "$dev1" "$dev2"
| [ 0:00] ## Line: 40 	     not vgreduce --all $vg1
| [ 0:00] ## Line: 41 	     vgremove -f $vg1
| [ 0:00] ## Line: 42 	 
| [ 0:00] ## Line: 43 	     # (lvm$mdatype) vgreduce rejects removing the last pv
| [ 0:00] ## Line: 44 	     vgcreate -M$mdatype $vg1 "$dev1" "$dev2"
| [ 0:00] ## Line: 45 	     not vgreduce $vg1 "$dev1" "$dev2"
| [ 0:00] ## Line: 46 	     vgremove -f $vg1
| [ 0:00] ## Line: 47 	 
| [ 0:00] ## Line: 48 	     pvremove -ff "$dev1" "$dev2"
| [ 0:00] ## Line: 49 	 done
| [ 0:00] ## Line: 50 	 
| [ 0:00] ## Line: 51 	 mdatype=2 # we only expect the following to work for lvm2 metadata
| [ 0:00] ## Line: 52 	 
| [ 0:00] ## Line: 53 	 # (lvm$mdatype) setup PVs (--metadatacopies 0)
| [ 0:00] ## Line: 54 	 pvcreate -M$mdatype "$dev1" "$dev2"
| [ 0:00] ## Line: 55 	 pvcreate --metadatacopies 0 -M$mdatype "$dev3" "$dev4"
| [ 0:00] ## Line: 56 	 
| [ 0:00] ## Line: 57 	 # (lvm$mdatype) vgreduce rejects removing pv with the last mda copy (bz247448)
| [ 0:00] ## Line: 58 	 vgcreate -M$mdatype $vg1 "$dev1" "$dev3"
| [ 0:00] ## Line: 59 	 not vgreduce $vg1 "$dev1"
| [ 0:00] ## Line: 60 	 vgremove -f $vg1
| [ 0:00] ## Line: 61 	 
| [ 0:00] ## Line: 62 	 #COMM "(lvm$mdatype) vgreduce --removemissing --force repares to linear (bz221921)"
| [ 0:00] ## Line: 63 	 # (lvm$mdatype) setup: create mirror & damage one pv
| [ 0:00] ## Line: 64 	 vgcreate -M$mdatype $vg1 "$dev1" "$dev2" "$dev3"
| [ 0:00] ## Line: 65 	 lvcreate -aey -n $lv1 --type mirror -m1 -l 4 $vg1
| [ 0:00] ## Line: 66 	 lvcreate -n $lv2  -l 4 $vg1 "$dev2"
| [ 0:00] ## Line: 67 	 lvcreate -n $lv3 -l 4 $vg1 "$dev3"
| [ 0:00] ## Line: 68 	 vgchange -an $vg1
| [ 0:00] ## Line: 69 	 aux disable_dev "$dev1"
| [ 0:00] ## Line: 70 	 # (lvm$mdatype) vgreduce --removemissing --force repares to linear
| [ 0:00] ## Line: 71 	 vgreduce --removemissing --force $vg1
| [ 0:00] ## Line: 72 	 check lv_field $vg1/$lv1 segtype linear
| [ 0:00] ## Line: 73 	 check pvlv_counts $vg1 2 3 0
| [ 0:00] ## Line: 74 	 # cleanup
| [ 0:00] ## Line: 75 	 aux enable_dev "$dev1"
| [ 0:00] ## Line: 76 	 pvscan
| [ 0:00] ## Line: 77 	 vgremove -f $vg1
| [ 0:00] ## Line: 78 	 not vgs $vg1 # just double-check it's really gone
| [ 0:00] ## Line: 79 	 
| [ 0:00] ## Line: 80 	 #COMM "vgreduce rejects --removemissing --mirrorsonly --force when nonmirror lv lost too"
| [ 0:00] ## Line: 81 	 # (lvm$mdatype) setup: create mirror + linear lvs
| [ 0:00] ## Line: 82 	 vgcreate -M$mdatype "$vg1" "${DEVICES[@]}"
| [ 0:00] ## Line: 83 	 lvcreate -n $lv2 -l 4 $vg1
| [ 0:00] ## Line: 84 	 lvcreate -aey --type mirror -m1 -n $lv1 -l 4 $vg1 "$dev1" "$dev2" "$dev3"
| [ 0:00] ## Line: 85 	 lvcreate -n $lv3 -l 4 $vg1 "$dev3"
| [ 0:00] ## Line: 86 	 pvs --segments -o +lv_name "${DEVICES[@]}" # for record only
| [ 0:00] ## Line: 87 	 # (lvm$mdatype) setup: damage one pv
| [ 0:00] ## Line: 88 	 vgchange -an $vg1
| [ 0:00] ## Line: 89 	 aux disable_dev "$dev1"
| [ 0:00] ## Line: 90 	 #pvcreate -ff -y "$dev1"
| [ 0:00] ## Line: 91 	 # vgreduce rejects --removemissing --mirrorsonly --force when nonmirror lv lost too
| [ 0:00] ## Line: 92 	 #not vgreduce -c n --removemissing --mirrorsonly --force $vg1
| [ 0:00] ## Line: 93 	 # CHECKME - command above was rejected becuase of '-c n'
| [ 0:00] ## Line: 94 	 vgreduce --removemissing --mirrorsonly --force $vg1
| [ 0:00] ## Line: 95 	 
| [ 0:00] ## Line: 96 	 aux enable_dev "$dev1"
| [ 0:00] ## Line: 97 	 
| [ 0:00] ## Line: 98 	 pvs -P "${DEVICES[@]}" # for record
| [ 0:00] ## Line: 99 	 lvs -P $vg1           # for record
| [ 0:00] ## Line: 100 	 vgs -P $vg1           # for record
| [ 0:00] ## Line: 101 	 
| [ 0:00] ## Line: 102 	 vgremove -ff $vg1
| [ 0:00] aux teardown
| [ 0:00] #vgreduce-usage.sh:1+ aux teardown
| [ 0:00] ## teardown.........ok
###       failed: [ndev-vanilla] shell/vgreduce-usage.sh

| [ 0:00] Library version:   1.02.146 (2017-12-18)
| [ 0:00] Driver version:    4.35.0
| [ 0:00] Kernel is Linux localhost.localdomain 3.10.0-693.11.1.el7.x86_64 #1 SMP Mon Dec 4 23:52:40 UTC 2017 x86_64 GNU/Linux
| [ 0:00] Selinux mode is not installed.
| [ 0:00]               total        used        free      shared  buff/cache   available
| [ 0:00] Mem:           7822        1082        4138          10        2602        6433
| [ 0:00] Swap:          4095           0        4095
| [ 0:00] Filesystem      Size  Used Avail Use% Mounted on
| [ 0:00] /dev/sdc1        18G  8.4G  8.4G  50% /
| [ 0:00] /dev/sdd1        51G  6.1G   43G  13% /lfskernel
| [ 0:00] devtmpfs        3.9G     0  3.9G   0% /dev
| [ 0:00] tmpfs           3.9G     0  3.9G   0% /run
| [ 0:00] @TESTDIR=/tmp/LVMTEST30016.PO7tuVRle1
| [ 0:00] @PREFIX=LVMTEST30016
| [ 0:00] ## LVMCONF: activation {
| [ 0:00] ## LVMCONF:     checks = 1
| [ 0:00] ## LVMCONF:     monitoring = 0
| [ 0:00] ## LVMCONF:     polling_interval = 1
| [ 0:00] ## LVMCONF:     raid_region_size = 512
| [ 0:00] ## LVMCONF:     retry_deactivation = 1
| [ 0:00] ## LVMCONF:     snapshot_autoextend_percent = 50
| [ 0:00] ## LVMCONF:     snapshot_autoextend_threshold = 50
| [ 0:00] ## LVMCONF:     udev_rules = 1
| [ 0:00] ## LVMCONF:     udev_sync = 1
| [ 0:00] ## LVMCONF:     verify_udev_operations = 1
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: allocation {
| [ 0:00] ## LVMCONF:     wipe_signatures_when_zeroing_new_lvs = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: backup {
| [ 0:00] ## LVMCONF:     archive = 0
| [ 0:00] ## LVMCONF:     backup = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: devices {
| [ 0:00] ## LVMCONF:     cache_dir = "@TESTDIR@/etc"
| [ 0:00] ## LVMCONF:     default_data_alignment = 1
| [ 0:00] ## LVMCONF:     dir = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     filter = "a|.*|"
| [ 0:00] ## LVMCONF:     global_filter = [ "a|@TESTDIR@/dev/mapper/@PREFIX@.*pv[0-9_]*$|", "r|.*|" ]
| [ 0:00] ## LVMCONF:     md_component_detection  = 0
| [ 0:00] ## LVMCONF:     scan = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     sysfs_scan = 1
| [ 0:00] ## LVMCONF:     write_cache_state = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: dmeventd {
| [ 0:00] ## LVMCONF:     executable = "/sources/boot/LVM2.2.02.177/test/lib/dmeventd"
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: global {
| [ 0:00] ## LVMCONF:     abort_on_internal_errors = 1
| [ 0:00] ## LVMCONF:     cache_check_executable = "/usr/sbin/cache_check"
| [ 0:00] ## LVMCONF:     cache_dump_executable = "/usr/sbin/cache_dump"
| [ 0:00] ## LVMCONF:     cache_repair_executable = "/usr/sbin/cache_repair"
| [ 0:00] ## LVMCONF:     detect_internal_vg_cache_corruption = 1
| [ 0:00] ## LVMCONF:     fallback_to_local_locking = 0
| [ 0:00] ## LVMCONF:     fsadm_executable = "/sources/boot/LVM2.2.02.177/test/lib/fsadm"
| [ 0:00] ## LVMCONF:     library_dir = "@TESTDIR@/lib"
| [ 0:00] ## LVMCONF:     locking_dir = "@TESTDIR@/var/lock/lvm"
| [ 0:00] ## LVMCONF:     locking_type=1
| [ 0:00] ## LVMCONF:     notify_dbus = 0
| [ 0:00] ## LVMCONF:     si_unit_consistency = 1
| [ 0:00] ## LVMCONF:     thin_check_executable = "/usr/sbin/thin_check"
| [ 0:00] ## LVMCONF:     thin_dump_executable = "/usr/sbin/thin_dump"
| [ 0:00] ## LVMCONF:     thin_repair_executable = "/usr/sbin/thin_repair"
| [ 0:00] ## LVMCONF:     use_lvmetad = 0
| [ 0:00] ## LVMCONF:     use_lvmlockd = 0
| [ 0:00] ## LVMCONF:     use_lvmpolld = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: log {
| [ 0:00] ## LVMCONF:     activation = 1
| [ 0:00] ## LVMCONF:     file = "@TESTDIR@/debug.log"
| [ 0:00] ## LVMCONF:     indent = 1
| [ 0:00] ## LVMCONF:     level = 9
| [ 0:00] ## LVMCONF:     overwrite = 1
| [ 0:00] ## LVMCONF:     syslog = 0
| [ 0:00] ## LVMCONF:     verbose = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] <======== Processing test: "vgremove-corrupt-vg.sh" ========>
| [ 0:00] 
| [ 0:00] aux prepare_vg 3
| [ 0:00] #vgremove-corrupt-vg.sh:18+ aux prepare_vg 3
| [ 0:00] ## preparing loop device....ok (/dev/loop0)
| [ 0:00] ## preparing 3 devices...lib/utils: line 212: DM_UDEV_COOKIE: unbound variable
| [ 0:00] set +vx; STACKTRACE; set -vx
| [ 0:00] ##vgremove-corrupt-vg.sh:18+ set +vx
| [ 0:00] ## - /lfskernel/sources/boot/LVM2.2.02.177/test/shell/vgremove-corrupt-vg.sh:18
| [ 0:00] ## 1 STACKTRACE() called from /lfskernel/sources/boot/LVM2.2.02.177/test/shell/vgremove-corrupt-vg.sh:18
| [ 0:00] <======== Info ========>
| [ 0:00] ## DMINFO:   Name             Maj Min Stat Open Targ Event  UUID                                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv3  253   4 L--w    0    1      0 TEST-@PREFIX@pv3                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv2  253   3 L--w    0    1      0 TEST-@PREFIX@pv2                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv1  253   5 L--w    0    1      0 TEST-@PREFIX@pv1                                                
| [ 0:00] <======== Active table ========>
| [ 0:00] ## DMTABLE:  @PREFIX@pv3: 0 69632 linear 7:0 141312
| [ 0:00] ## DMTABLE:  @PREFIX@pv2: 0 69632 linear 7:0 71680
| [ 0:00] ## DMTABLE:  @PREFIX@pv1: 0 69632 linear 7:0 2048
| [ 0:00] <======== Inactive table ========>
| [ 0:00] ## DMITABLE: @PREFIX@pv3: 
| [ 0:00] ## DMITABLE: @PREFIX@pv2: 
| [ 0:00] ## DMITABLE: @PREFIX@pv1: 
| [ 0:00] <======== Status ========>
| [ 0:00] ## DMSTATUS: @PREFIX@pv3: 0 69632 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv2: 0 69632 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv1: 0 69632 linear 
| [ 0:00] <======== Tree ========>
| [ 0:00] ## DMTREE:   @PREFIX@pv3 (253:4)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   @PREFIX@pv2 (253:3)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   @PREFIX@pv1 (253:5)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   LFS_vg-lfs (253:2)
| [ 0:00] ## DMTREE:    `- (8:16)
| [ 0:00] ## DMTREE:   centos-swap (253:1)
| [ 0:00] ## DMTREE:    `- (8:2)
| [ 0:00] ## DMTREE:   centos-root (253:0)
| [ 0:00] ## DMTREE:    `- (8:2)
| [ 0:00] <======== Recursive list of @TESTDIR@/dev ========>
| [ 0:00] ## LSLR:	@TESTDIR@/dev:
| [ 0:00] ## LSLR:	total 4
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 0 Feb 21 02:28 loop0
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 1 Feb 21 02:28 loop1
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 2 Feb 21 02:28 loop2
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 3 Feb 21 02:28 loop3
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 4 Feb 21 02:28 loop4
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 5 Feb 21 02:28 loop5
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 6 Feb 21 02:28 loop6
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 7 Feb 21 02:28 loop7
| [ 0:00] ## LSLR:	drwxr-xr-x 2 root root 4096 Feb 21 02:28 mapper
| [ 0:00] ## LSLR:	crw-r--r-- 1 root root 1, 3 Feb 21 02:28 testnull
| [ 0:00] ## LSLR:	
| [ 0:00] ## LSLR:	@TESTDIR@/dev/mapper:
| [ 0:00] ## LSLR:	total 0
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   5 Feb 21 02:28 @PREFIX@pv1
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   3 Feb 21 02:28 @PREFIX@pv2
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   4 Feb 21 02:28 @PREFIX@pv3
| [ 0:00] ## LSLR:	crw------- 1 root root  10, 236 Feb 21 02:28 control
| [ 0:00] <======== Udev DB content ========>
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-0
| [ 0:00] ## UDEV:	N: dm-0
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-0
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-0
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=0
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-1
| [ 0:00] ## UDEV:	N: dm-1
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-1
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-1
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=1
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-2
| [ 0:00] ## UDEV:	N: dm-2
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-2
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-2
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=2
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-3
| [ 0:00] ## UDEV:	N: dm-3
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-3
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-3
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=3
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-4
| [ 0:00] ## UDEV:	N: dm-4
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-4
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-4
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=4
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-5
| [ 0:00] ## UDEV:	N: dm-5
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-5
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-5
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=5
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/loop0
| [ 0:00] ## UDEV:	N: loop0
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/loop0
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/loop0
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=7
| [ 0:00] ## UDEV:	E: MINOR=0
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] <======== Script file "vgremove-corrupt-vg.sh" ========>
| [ 0:00] ## Line: 1 	 #!/usr/bin/env bash
| [ 0:00] ## Line: 2 	 
| [ 0:00] ## Line: 3 	 # Copyright (C) 2013 Red Hat, Inc. All rights reserved.
| [ 0:00] ## Line: 4 	 #
| [ 0:00] ## Line: 5 	 # This copyrighted material is made available to anyone wishing to use,
| [ 0:00] ## Line: 6 	 # modify, copy, or redistribute it subject to the terms and conditions
| [ 0:00] ## Line: 7 	 # of the GNU General Public License v.2.
| [ 0:00] ## Line: 8 	 #
| [ 0:00] ## Line: 9 	 # You should have received a copy of the GNU General Public License
| [ 0:00] ## Line: 10 	 # along with this program; if not, write to the Free Software Foundation,
| [ 0:00] ## Line: 11 	 # Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA
| [ 0:00] ## Line: 12 	 
| [ 0:00] ## Line: 13 	 SKIP_WITH_LVMLOCKD=1
| [ 0:00] ## Line: 14 	 SKIP_WITH_LVMPOLLD=1
| [ 0:00] ## Line: 15 	 
| [ 0:00] ## Line: 16 	 . lib/inittest
| [ 0:00] ## Line: 17 	 
| [ 0:00] ## Line: 18 	 aux prepare_vg 3
| [ 0:00] ## Line: 19 	 lvcreate -n blabla -L 1 $vg -an --zero n
| [ 0:00] ## Line: 20 	 
| [ 0:00] ## Line: 21 	 dd if=/dev/urandom bs=512 seek=2 count=32 of="$dev2"
| [ 0:00] ## Line: 22 	 aux notify_lvmetad "$dev2"
| [ 0:00] ## Line: 23 	 
| [ 0:00] ## Line: 24 	 vgremove -f $vg
| [ 0:00] aux teardown
| [ 0:00] #vgremove-corrupt-vg.sh:1+ aux teardown
| [ 0:00] ## teardown.........ok
###       failed: [ndev-vanilla] shell/vgremove-corrupt-vg.sh

| [ 0:00] Library version:   1.02.146 (2017-12-18)
| [ 0:00] Driver version:    4.35.0
| [ 0:00] Kernel is Linux localhost.localdomain 3.10.0-693.11.1.el7.x86_64 #1 SMP Mon Dec 4 23:52:40 UTC 2017 x86_64 GNU/Linux
| [ 0:00] Selinux mode is not installed.
| [ 0:00]               total        used        free      shared  buff/cache   available
| [ 0:00] Mem:           7822        1082        4138          10        2602        6433
| [ 0:00] Swap:          4095           0        4095
| [ 0:00] Filesystem      Size  Used Avail Use% Mounted on
| [ 0:00] /dev/sdc1        18G  8.4G  8.4G  50% /
| [ 0:00] /dev/sdd1        51G  6.1G   43G  13% /lfskernel
| [ 0:00] devtmpfs        3.9G     0  3.9G   0% /dev
| [ 0:00] tmpfs           3.9G     0  3.9G   0% /run
| [ 0:00] @TESTDIR=/tmp/LVMTEST30206.YYhbNaHU7e
| [ 0:00] @PREFIX=LVMTEST30206
| [ 0:00] ## LVMCONF: activation {
| [ 0:00] ## LVMCONF:     checks = 1
| [ 0:00] ## LVMCONF:     monitoring = 0
| [ 0:00] ## LVMCONF:     polling_interval = 1
| [ 0:00] ## LVMCONF:     raid_region_size = 512
| [ 0:00] ## LVMCONF:     retry_deactivation = 1
| [ 0:00] ## LVMCONF:     snapshot_autoextend_percent = 50
| [ 0:00] ## LVMCONF:     snapshot_autoextend_threshold = 50
| [ 0:00] ## LVMCONF:     udev_rules = 1
| [ 0:00] ## LVMCONF:     udev_sync = 1
| [ 0:00] ## LVMCONF:     verify_udev_operations = 1
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: allocation {
| [ 0:00] ## LVMCONF:     wipe_signatures_when_zeroing_new_lvs = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: backup {
| [ 0:00] ## LVMCONF:     archive = 0
| [ 0:00] ## LVMCONF:     backup = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: devices {
| [ 0:00] ## LVMCONF:     cache_dir = "@TESTDIR@/etc"
| [ 0:00] ## LVMCONF:     default_data_alignment = 1
| [ 0:00] ## LVMCONF:     dir = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     filter = "a|.*|"
| [ 0:00] ## LVMCONF:     global_filter = [ "a|@TESTDIR@/dev/mapper/@PREFIX@.*pv[0-9_]*$|", "r|.*|" ]
| [ 0:00] ## LVMCONF:     md_component_detection  = 0
| [ 0:00] ## LVMCONF:     scan = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     sysfs_scan = 1
| [ 0:00] ## LVMCONF:     write_cache_state = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: dmeventd {
| [ 0:00] ## LVMCONF:     executable = "/sources/boot/LVM2.2.02.177/test/lib/dmeventd"
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: global {
| [ 0:00] ## LVMCONF:     abort_on_internal_errors = 1
| [ 0:00] ## LVMCONF:     cache_check_executable = "/usr/sbin/cache_check"
| [ 0:00] ## LVMCONF:     cache_dump_executable = "/usr/sbin/cache_dump"
| [ 0:00] ## LVMCONF:     cache_repair_executable = "/usr/sbin/cache_repair"
| [ 0:00] ## LVMCONF:     detect_internal_vg_cache_corruption = 1
| [ 0:00] ## LVMCONF:     fallback_to_local_locking = 0
| [ 0:00] ## LVMCONF:     fsadm_executable = "/sources/boot/LVM2.2.02.177/test/lib/fsadm"
| [ 0:00] ## LVMCONF:     library_dir = "@TESTDIR@/lib"
| [ 0:00] ## LVMCONF:     locking_dir = "@TESTDIR@/var/lock/lvm"
| [ 0:00] ## LVMCONF:     locking_type=1
| [ 0:00] ## LVMCONF:     notify_dbus = 0
| [ 0:00] ## LVMCONF:     si_unit_consistency = 1
| [ 0:00] ## LVMCONF:     thin_check_executable = "/usr/sbin/thin_check"
| [ 0:00] ## LVMCONF:     thin_dump_executable = "/usr/sbin/thin_dump"
| [ 0:00] ## LVMCONF:     thin_repair_executable = "/usr/sbin/thin_repair"
| [ 0:00] ## LVMCONF:     use_lvmetad = 0
| [ 0:00] ## LVMCONF:     use_lvmlockd = 0
| [ 0:00] ## LVMCONF:     use_lvmpolld = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: log {
| [ 0:00] ## LVMCONF:     activation = 1
| [ 0:00] ## LVMCONF:     file = "@TESTDIR@/debug.log"
| [ 0:00] ## LVMCONF:     indent = 1
| [ 0:00] ## LVMCONF:     level = 9
| [ 0:00] ## LVMCONF:     overwrite = 1
| [ 0:00] ## LVMCONF:     syslog = 0
| [ 0:00] ## LVMCONF:     verbose = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] <======== Processing test: "vgrename-usage.sh" ========>
| [ 0:00] 
| [ 0:00] aux prepare_devs 4
| [ 0:00] #vgrename-usage.sh:18+ aux prepare_devs 4
| [ 0:00] ## preparing loop device....ok (/dev/loop0)
| [ 0:00] ## preparing 4 devices...lib/utils: line 212: DM_UDEV_COOKIE: unbound variable
| [ 0:00] set +vx; STACKTRACE; set -vx
| [ 0:00] ##vgrename-usage.sh:18+ set +vx
| [ 0:00] ## - /lfskernel/sources/boot/LVM2.2.02.177/test/shell/vgrename-usage.sh:18
| [ 0:00] ## 1 STACKTRACE() called from /lfskernel/sources/boot/LVM2.2.02.177/test/shell/vgrename-usage.sh:18
| [ 0:00] <======== Info ========>
| [ 0:00] ## DMINFO:   Name             Maj Min Stat Open Targ Event  UUID                                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv4  253   4 L--w    0    1      0 TEST-@PREFIX@pv4                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv3  253   3 L--w    0    1      0 TEST-@PREFIX@pv3                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv2  253   6 L--w    0    1      0 TEST-@PREFIX@pv2                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv1  253   5 L--w    0    1      0 TEST-@PREFIX@pv1                                                
| [ 0:00] <======== Active table ========>
| [ 0:00] ## DMTABLE:  @PREFIX@pv4: 0 69632 linear 7:0 210944
| [ 0:00] ## DMTABLE:  @PREFIX@pv3: 0 69632 linear 7:0 141312
| [ 0:00] ## DMTABLE:  @PREFIX@pv2: 0 69632 linear 7:0 71680
| [ 0:00] ## DMTABLE:  @PREFIX@pv1: 0 69632 linear 7:0 2048
| [ 0:00] <======== Inactive table ========>
| [ 0:00] ## DMITABLE: @PREFIX@pv4: 
| [ 0:00] ## DMITABLE: @PREFIX@pv3: 
| [ 0:00] ## DMITABLE: @PREFIX@pv2: 
| [ 0:00] ## DMITABLE: @PREFIX@pv1: 
| [ 0:00] <======== Status ========>
| [ 0:00] ## DMSTATUS: @PREFIX@pv4: 0 69632 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv3: 0 69632 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv2: 0 69632 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv1: 0 69632 linear 
| [ 0:00] <======== Tree ========>
| [ 0:00] ## DMTREE:   @PREFIX@pv4 (253:4)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   @PREFIX@pv3 (253:3)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   @PREFIX@pv2 (253:6)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   @PREFIX@pv1 (253:5)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   LFS_vg-lfs (253:2)
| [ 0:00] ## DMTREE:    `- (8:16)
| [ 0:00] ## DMTREE:   centos-swap (253:1)
| [ 0:00] ## DMTREE:    `- (8:2)
| [ 0:00] ## DMTREE:   centos-root (253:0)
| [ 0:00] ## DMTREE:    `- (8:2)
| [ 0:00] <======== Recursive list of @TESTDIR@/dev ========>
| [ 0:00] ## LSLR:	@TESTDIR@/dev:
| [ 0:00] ## LSLR:	total 4
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 0 Feb 21 02:28 loop0
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 1 Feb 21 02:28 loop1
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 2 Feb 21 02:28 loop2
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 3 Feb 21 02:28 loop3
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 4 Feb 21 02:28 loop4
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 5 Feb 21 02:28 loop5
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 6 Feb 21 02:28 loop6
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 7 Feb 21 02:28 loop7
| [ 0:00] ## LSLR:	drwxr-xr-x 2 root root 4096 Feb 21 02:28 mapper
| [ 0:00] ## LSLR:	crw-r--r-- 1 root root 1, 3 Feb 21 02:28 testnull
| [ 0:00] ## LSLR:	
| [ 0:00] ## LSLR:	@TESTDIR@/dev/mapper:
| [ 0:00] ## LSLR:	total 0
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   5 Feb 21 02:28 @PREFIX@pv1
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   6 Feb 21 02:28 @PREFIX@pv2
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   3 Feb 21 02:28 @PREFIX@pv3
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   4 Feb 21 02:28 @PREFIX@pv4
| [ 0:00] ## LSLR:	crw------- 1 root root  10, 236 Feb 21 02:28 control
| [ 0:00] <======== Udev DB content ========>
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-0
| [ 0:00] ## UDEV:	N: dm-0
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-0
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-0
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=0
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-1
| [ 0:00] ## UDEV:	N: dm-1
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-1
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-1
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=1
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-2
| [ 0:00] ## UDEV:	N: dm-2
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-2
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-2
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=2
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-3
| [ 0:00] ## UDEV:	N: dm-3
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-3
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-3
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=3
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-4
| [ 0:00] ## UDEV:	N: dm-4
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-4
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-4
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=4
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-5
| [ 0:00] ## UDEV:	N: dm-5
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-5
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-5
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=5
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-6
| [ 0:00] ## UDEV:	N: dm-6
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-6
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-6
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=6
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/loop0
| [ 0:00] ## UDEV:	N: loop0
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/loop0
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/loop0
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=7
| [ 0:00] ## UDEV:	E: MINOR=0
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] <======== Script file "vgrename-usage.sh" ========>
| [ 0:00] ## Line: 1 	 #!/usr/bin/env bash
| [ 0:00] ## Line: 2 	 
| [ 0:00] ## Line: 3 	 # Copyright (C) 2008 Red Hat, Inc. All rights reserved.
| [ 0:00] ## Line: 4 	 #
| [ 0:00] ## Line: 5 	 # This copyrighted material is made available to anyone wishing to use,
| [ 0:00] ## Line: 6 	 # modify, copy, or redistribute it subject to the terms and conditions
| [ 0:00] ## Line: 7 	 # of the GNU General Public License v.2.
| [ 0:00] ## Line: 8 	 #
| [ 0:00] ## Line: 9 	 # You should have received a copy of the GNU General Public License
| [ 0:00] ## Line: 10 	 # along with this program; if not, write to the Free Software Foundation,
| [ 0:00] ## Line: 11 	 # Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA
| [ 0:00] ## Line: 12 	 
| [ 0:00] ## Line: 13 	 SKIP_WITH_LVMLOCKD=1
| [ 0:00] ## Line: 14 	 SKIP_WITH_LVMPOLLD=1
| [ 0:00] ## Line: 15 	 
| [ 0:00] ## Line: 16 	 . lib/inittest
| [ 0:00] ## Line: 17 	 
| [ 0:00] ## Line: 18 	 aux prepare_devs 4
| [ 0:00] ## Line: 19 	 pvcreate "$dev1" "$dev2"
| [ 0:00] ## Line: 20 	 pvcreate --metadatacopies 0 "$dev3" "$dev4"
| [ 0:00] ## Line: 21 	 
| [ 0:00] ## Line: 22 	 # vgrename normal operation - rename vg1 to vg2
| [ 0:00] ## Line: 23 	 # vgrename normal operation - rename vg2 to vg1
| [ 0:00] ## Line: 24 	 # ensure name ordering does not matter
| [ 0:00] ## Line: 25 	 vgcreate $vg1 "$dev1" "$dev2"
| [ 0:00] ## Line: 26 	 vgrename $vg1 $vg2
| [ 0:00] ## Line: 27 	 check vg_field $vg2 vg_name $vg2
| [ 0:00] ## Line: 28 	 vgrename $vg2 $vg1
| [ 0:00] ## Line: 29 	 check vg_field $vg1 vg_name $vg1
| [ 0:00] ## Line: 30 	 vgremove $vg1
| [ 0:00] ## Line: 31 	 
| [ 0:00] ## Line: 32 	 # vgrename by uuid (bz231187)
| [ 0:00] ## Line: 33 	 vgcreate $vg1 "$dev1" "$dev3"
| [ 0:00] ## Line: 34 	 UUID=$(vgs --noheading -o vg_uuid $vg1)
| [ 0:00] ## Line: 35 	 check vg_field $vg1 vg_uuid $UUID
| [ 0:00] ## Line: 36 	 vgrename $UUID $vg2
| [ 0:00] ## Line: 37 	 check vg_field $vg2 vg_name $vg2
| [ 0:00] ## Line: 38 	 vgremove $vg2
| [ 0:00] ## Line: 39 	 
| [ 0:00] ## Line: 40 	 # vgrename fails - new vg already exists
| [ 0:00] ## Line: 41 	 vgcreate $vg1 "$dev1"
| [ 0:00] ## Line: 42 	 vgcreate $vg2 "$dev2"
| [ 0:00] ## Line: 43 	 not vgrename $vg1 $vg2
| [ 0:00] ## Line: 44 	 vgremove $vg1 $vg2
| [ 0:00] ## Line: 45 	 
| [ 0:00] ## Line: 46 	 # vgrename duplicate name
| [ 0:00] ## Line: 47 	 vgcreate $vg1 "$dev1"
| [ 0:00] ## Line: 48 	 aux disable_dev "$dev1"
| [ 0:00] ## Line: 49 	 vgcreate $vg1 "$dev2"
| [ 0:00] ## Line: 50 	 UUID=$(vgs --noheading -o vg_uuid $vg1)
| [ 0:00] ## Line: 51 	 aux enable_dev "$dev1"
| [ 0:00] ## Line: 52 	 
| [ 0:00] ## Line: 53 	 not vgrename $vg1 $vg2
| [ 0:00] ## Line: 54 	 vgrename $UUID $vg2
| [ 0:00] ## Line: 55 	 not vgrename $UUID $vg1
| [ 0:00] ## Line: 56 	 
| [ 0:00] ## Line: 57 	 vgs
| [ 0:00] ## Line: 58 	 
| [ 0:00] ## Line: 59 	 vgremove $vg1 $vg2
| [ 0:00] aux teardown
| [ 0:00] #vgrename-usage.sh:1+ aux teardown
| [ 0:00] ## teardown.........ok
###       failed: [ndev-vanilla] shell/vgrename-usage.sh

| [ 0:00] Library version:   1.02.146 (2017-12-18)
| [ 0:00] Driver version:    4.35.0
| [ 0:00] Kernel is Linux localhost.localdomain 3.10.0-693.11.1.el7.x86_64 #1 SMP Mon Dec 4 23:52:40 UTC 2017 x86_64 GNU/Linux
| [ 0:00] Selinux mode is not installed.
| [ 0:00]               total        used        free      shared  buff/cache   available
| [ 0:00] Mem:           7822        1082        4138          10        2602        6433
| [ 0:00] Swap:          4095           0        4095
| [ 0:00] Filesystem      Size  Used Avail Use% Mounted on
| [ 0:00] /dev/sdc1        18G  8.4G  8.4G  50% /
| [ 0:00] /dev/sdd1        51G  6.1G   43G  13% /lfskernel
| [ 0:00] devtmpfs        3.9G     0  3.9G   0% /dev
| [ 0:00] tmpfs           3.9G     0  3.9G   0% /run
| [ 0:00] @TESTDIR=/tmp/LVMTEST30399.O1EieTPnq6
| [ 0:00] @PREFIX=LVMTEST30399
| [ 0:00] ## LVMCONF: activation {
| [ 0:00] ## LVMCONF:     checks = 1
| [ 0:00] ## LVMCONF:     monitoring = 0
| [ 0:00] ## LVMCONF:     polling_interval = 1
| [ 0:00] ## LVMCONF:     raid_region_size = 512
| [ 0:00] ## LVMCONF:     retry_deactivation = 1
| [ 0:00] ## LVMCONF:     snapshot_autoextend_percent = 50
| [ 0:00] ## LVMCONF:     snapshot_autoextend_threshold = 50
| [ 0:00] ## LVMCONF:     udev_rules = 1
| [ 0:00] ## LVMCONF:     udev_sync = 1
| [ 0:00] ## LVMCONF:     verify_udev_operations = 1
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: allocation {
| [ 0:00] ## LVMCONF:     wipe_signatures_when_zeroing_new_lvs = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: backup {
| [ 0:00] ## LVMCONF:     archive = 0
| [ 0:00] ## LVMCONF:     backup = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: devices {
| [ 0:00] ## LVMCONF:     cache_dir = "@TESTDIR@/etc"
| [ 0:00] ## LVMCONF:     default_data_alignment = 1
| [ 0:00] ## LVMCONF:     dir = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     filter = "a|.*|"
| [ 0:00] ## LVMCONF:     global_filter = [ "a|@TESTDIR@/dev/mapper/@PREFIX@.*pv[0-9_]*$|", "r|.*|" ]
| [ 0:00] ## LVMCONF:     md_component_detection  = 0
| [ 0:00] ## LVMCONF:     scan = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     sysfs_scan = 1
| [ 0:00] ## LVMCONF:     write_cache_state = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: dmeventd {
| [ 0:00] ## LVMCONF:     executable = "/sources/boot/LVM2.2.02.177/test/lib/dmeventd"
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: global {
| [ 0:00] ## LVMCONF:     abort_on_internal_errors = 1
| [ 0:00] ## LVMCONF:     cache_check_executable = "/usr/sbin/cache_check"
| [ 0:00] ## LVMCONF:     cache_dump_executable = "/usr/sbin/cache_dump"
| [ 0:00] ## LVMCONF:     cache_repair_executable = "/usr/sbin/cache_repair"
| [ 0:00] ## LVMCONF:     detect_internal_vg_cache_corruption = 1
| [ 0:00] ## LVMCONF:     fallback_to_local_locking = 0
| [ 0:00] ## LVMCONF:     fsadm_executable = "/sources/boot/LVM2.2.02.177/test/lib/fsadm"
| [ 0:00] ## LVMCONF:     library_dir = "@TESTDIR@/lib"
| [ 0:00] ## LVMCONF:     locking_dir = "@TESTDIR@/var/lock/lvm"
| [ 0:00] ## LVMCONF:     locking_type=1
| [ 0:00] ## LVMCONF:     notify_dbus = 0
| [ 0:00] ## LVMCONF:     si_unit_consistency = 1
| [ 0:00] ## LVMCONF:     thin_check_executable = "/usr/sbin/thin_check"
| [ 0:00] ## LVMCONF:     thin_dump_executable = "/usr/sbin/thin_dump"
| [ 0:00] ## LVMCONF:     thin_repair_executable = "/usr/sbin/thin_repair"
| [ 0:00] ## LVMCONF:     use_lvmetad = 0
| [ 0:00] ## LVMCONF:     use_lvmlockd = 0
| [ 0:00] ## LVMCONF:     use_lvmpolld = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: log {
| [ 0:00] ## LVMCONF:     activation = 1
| [ 0:00] ## LVMCONF:     file = "@TESTDIR@/debug.log"
| [ 0:00] ## LVMCONF:     indent = 1
| [ 0:00] ## LVMCONF:     level = 9
| [ 0:00] ## LVMCONF:     overwrite = 1
| [ 0:00] ## LVMCONF:     syslog = 0
| [ 0:00] ## LVMCONF:     verbose = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] <======== Processing test: "vgsplit-operation.sh" ========>
| [ 0:00] 
| [ 0:00] COMM() {
| [ 0:00] 	LAST_TEST="$*"
| [ 0:00] }
| [ 0:00] 
| [ 0:00] create_vg_() {
| [ 0:00] 	vgcreate -s 64k "$@"
| [ 0:00] }
| [ 0:00] 
| [ 0:00] aux prepare_pvs 5 10
| [ 0:00] #vgsplit-operation.sh:31+ aux prepare_pvs 5 10
| [ 0:00] ## preparing loop device....ok (/dev/loop0)
| [ 0:00] ## preparing 5 devices...lib/utils: line 212: DM_UDEV_COOKIE: unbound variable
| [ 0:00] set +vx; STACKTRACE; set -vx
| [ 0:00] ##vgsplit-operation.sh:31+ set +vx
| [ 0:00] ## - /lfskernel/sources/boot/LVM2.2.02.177/test/shell/vgsplit-operation.sh:31
| [ 0:00] ## 1 STACKTRACE() called from /lfskernel/sources/boot/LVM2.2.02.177/test/shell/vgsplit-operation.sh:31
| [ 0:00] <======== Info ========>
| [ 0:00] ## DMINFO:   Name             Maj Min Stat Open Targ Event  UUID                                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv5  253   6 L--w    0    1      0 TEST-@PREFIX@pv5                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv4  253   5 L--w    0    1      0 TEST-@PREFIX@pv4                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv3  253   3 L--w    0    1      0 TEST-@PREFIX@pv3                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv2  253   4 L--w    0    1      0 TEST-@PREFIX@pv2                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv1  253   7 L--w    0    1      0 TEST-@PREFIX@pv1                                                
| [ 0:00] <======== Active table ========>
| [ 0:00] ## DMTABLE:  @PREFIX@pv5: 0 20480 linear 7:0 83968
| [ 0:00] ## DMTABLE:  @PREFIX@pv4: 0 20480 linear 7:0 63488
| [ 0:00] ## DMTABLE:  @PREFIX@pv3: 0 20480 linear 7:0 43008
| [ 0:00] ## DMTABLE:  @PREFIX@pv2: 0 20480 linear 7:0 22528
| [ 0:00] ## DMTABLE:  @PREFIX@pv1: 0 20480 linear 7:0 2048
| [ 0:00] <======== Inactive table ========>
| [ 0:00] ## DMITABLE: @PREFIX@pv5: 
| [ 0:00] ## DMITABLE: @PREFIX@pv4: 
| [ 0:00] ## DMITABLE: @PREFIX@pv3: 
| [ 0:00] ## DMITABLE: @PREFIX@pv2: 
| [ 0:00] ## DMITABLE: @PREFIX@pv1: 
| [ 0:00] <======== Status ========>
| [ 0:00] ## DMSTATUS: @PREFIX@pv5: 0 20480 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv4: 0 20480 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv3: 0 20480 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv2: 0 20480 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv1: 0 20480 linear 
| [ 0:00] <======== Tree ========>
| [ 0:00] ## DMTREE:   @PREFIX@pv5 (253:6)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   @PREFIX@pv4 (253:5)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   @PREFIX@pv3 (253:3)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   @PREFIX@pv2 (253:4)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   @PREFIX@pv1 (253:7)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   LFS_vg-lfs (253:2)
| [ 0:00] ## DMTREE:    `- (8:16)
| [ 0:00] ## DMTREE:   centos-swap (253:1)
| [ 0:00] ## DMTREE:    `- (8:2)
| [ 0:00] ## DMTREE:   centos-root (253:0)
| [ 0:00] ## DMTREE:    `- (8:2)
| [ 0:00] <======== Recursive list of @TESTDIR@/dev ========>
| [ 0:00] ## LSLR:	@TESTDIR@/dev:
| [ 0:00] ## LSLR:	total 4
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 0 Feb 21 02:28 loop0
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 1 Feb 21 02:28 loop1
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 2 Feb 21 02:28 loop2
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 3 Feb 21 02:28 loop3
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 4 Feb 21 02:28 loop4
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 5 Feb 21 02:28 loop5
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 6 Feb 21 02:28 loop6
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 7 Feb 21 02:28 loop7
| [ 0:00] ## LSLR:	drwxr-xr-x 2 root root 4096 Feb 21 02:28 mapper
| [ 0:00] ## LSLR:	crw-r--r-- 1 root root 1, 3 Feb 21 02:28 testnull
| [ 0:00] ## LSLR:	
| [ 0:00] ## LSLR:	@TESTDIR@/dev/mapper:
| [ 0:00] ## LSLR:	total 0
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   7 Feb 21 02:28 @PREFIX@pv1
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   4 Feb 21 02:28 @PREFIX@pv2
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   3 Feb 21 02:28 @PREFIX@pv3
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   5 Feb 21 02:28 @PREFIX@pv4
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   6 Feb 21 02:28 @PREFIX@pv5
| [ 0:00] ## LSLR:	crw------- 1 root root  10, 236 Feb 21 02:28 control
| [ 0:00] <======== Udev DB content ========>
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-0
| [ 0:00] ## UDEV:	N: dm-0
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-0
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-0
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=0
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-1
| [ 0:00] ## UDEV:	N: dm-1
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-1
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-1
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=1
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-2
| [ 0:00] ## UDEV:	N: dm-2
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-2
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-2
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=2
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-3
| [ 0:00] ## UDEV:	N: dm-3
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-3
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-3
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=3
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-4
| [ 0:00] ## UDEV:	N: dm-4
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-4
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-4
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=4
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-5
| [ 0:00] ## UDEV:	N: dm-5
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-5
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-5
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=5
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-6
| [ 0:00] ## UDEV:	N: dm-6
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-6
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-6
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=6
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-7
| [ 0:00] ## UDEV:	N: dm-7
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-7
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-7
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=7
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/loop0
| [ 0:00] ## UDEV:	N: loop0
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/loop0
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/loop0
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=7
| [ 0:00] ## UDEV:	E: MINOR=0
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] <======== Script file "vgsplit-operation.sh" ========>
| [ 0:00] ## Line: 1 	 #!/usr/bin/env bash
| [ 0:00] ## Line: 2 	 
| [ 0:00] ## Line: 3 	 # Copyright (C) 2007 Red Hat, Inc. All rights reserved.
| [ 0:00] ## Line: 4 	 #
| [ 0:00] ## Line: 5 	 # This copyrighted material is made available to anyone wishing to use,
| [ 0:00] ## Line: 6 	 # modify, copy, or redistribute it subject to the terms and conditions
| [ 0:00] ## Line: 7 	 # of the GNU General Public License v.2.
| [ 0:00] ## Line: 8 	 #
| [ 0:00] ## Line: 9 	 # You should have received a copy of the GNU General Public License
| [ 0:00] ## Line: 10 	 # along with this program; if not, write to the Free Software Foundation,
| [ 0:00] ## Line: 11 	 # Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA
| [ 0:00] ## Line: 12 	 
| [ 0:00] ## Line: 13 	 # Test vgsplit operation, including different LV types
| [ 0:00] ## Line: 14 	 
| [ 0:00] ## Line: 15 	 # disable lvmetad logging as it bogs down test systems
| [ 0:00] ## Line: 16 	 SKIP_WITH_LVMLOCKD=1
| [ 0:00] ## Line: 17 	 SKIP_WITH_LVMPOLLD=1
| [ 0:00] ## Line: 18 	 
| [ 0:00] ## Line: 19 	 export LVM_TEST_LVMETAD_DEBUG_OPTS=${LVM_TEST_LVMETAD_DEBUG_OPTS-}
| [ 0:00] ## Line: 20 	 
| [ 0:00] ## Line: 21 	 . lib/inittest
| [ 0:00] ## Line: 22 	 
| [ 0:00] ## Line: 23 	 COMM() {
| [ 0:00] ## Line: 24 	 	LAST_TEST="$*"
| [ 0:00] ## Line: 25 	 }
| [ 0:00] ## Line: 26 	 
| [ 0:00] ## Line: 27 	 create_vg_() {
| [ 0:00] ## Line: 28 	 	vgcreate -s 64k "$@"
| [ 0:00] ## Line: 29 	 }
| [ 0:00] ## Line: 30 	 
| [ 0:00] ## Line: 31 	 aux prepare_pvs 5 10
| [ 0:00] ## Line: 32 	 # FIXME: paramaterize lvm1 vs lvm2 metadata; most of these tests should run
| [ 0:00] ## Line: 33 	 # fine with lvm1 metadata as well; for now, just add disks 5 and 6 as lvm1
| [ 0:00] ## Line: 34 	 # metadata
| [ 0:00] ## Line: 35 	 
| [ 0:00] ## Line: 36 	 #
| [ 0:00] ## Line: 37 	 # vgsplit can be done into a new or existing VG
| [ 0:00] ## Line: 38 	 #
| [ 0:00] ## Line: 39 	 for i in new existing
| [ 0:00] ## Line: 40 	 do
| [ 0:00] ## Line: 41 	 	#
| [ 0:00] ## Line: 42 	 	# We can have PVs or LVs on the cmdline
| [ 0:00] ## Line: 43 	 	#
| [ 0:00] ## Line: 44 	 	for j in PV LV
| [ 0:00] ## Line: 45 	 	do
| [ 0:00] ## Line: 46 	 COMM "vgsplit correctly splits single linear LV into $i VG ($j args)"
| [ 0:00] ## Line: 47 	 		create_vg_ $vg1 "$dev1" "$dev2"
| [ 0:00] ## Line: 48 	 		test $i = existing && create_vg_ $vg2 "$dev3" "$dev4"
| [ 0:00] ## Line: 49 	 
| [ 0:00] ## Line: 50 	 		lvcreate -an -Zn -l 4 -n $lv1 $vg1 "$dev1"
| [ 0:00] ## Line: 51 	 		if [ $j = PV ]; then
| [ 0:00] ## Line: 52 	 		  vgsplit $vg1 $vg2 "$dev1"
| [ 0:00] ## Line: 53 	 		else
| [ 0:00] ## Line: 54 	 		  vgsplit -n $lv1 $vg1 $vg2
| [ 0:00] ## Line: 55 	 		fi
| [ 0:00] ## Line: 56 	 		check pvlv_counts $vg1 1 0 0
| [ 0:00] ## Line: 57 	 		if [ $i = existing ]; then
| [ 0:00] ## Line: 58 	 		   check pvlv_counts $vg2 3 1 0
| [ 0:00] ## Line: 59 	 		else
| [ 0:00] ## Line: 60 	 		   check pvlv_counts $vg2 1 1 0
| [ 0:00] ## Line: 61 	 		fi
| [ 0:00] ## Line: 62 	 		lvremove -f $vg2/$lv1
| [ 0:00] ## Line: 63 	 		vgremove -f $vg2 $vg1
| [ 0:00] ## Line: 64 	 
| [ 0:00] ## Line: 65 	 COMM "vgsplit correctly splits single striped LV into $i VG ($j args)"
| [ 0:00] ## Line: 66 	 		create_vg_ $vg1 "$dev1" "$dev2"
| [ 0:00] ## Line: 67 	 		test $i = existing && create_vg_ $vg2 "$dev3" "$dev4"
| [ 0:00] ## Line: 68 	 
| [ 0:00] ## Line: 69 	 		lvcreate -an -Zn -l 4 -i 2 -n $lv1 $vg1 "$dev1" "$dev2"
| [ 0:00] ## Line: 70 	 		if [ $j = PV ]; then
| [ 0:00] ## Line: 71 	 		  vgsplit $vg1 $vg2 "$dev1" "$dev2"
| [ 0:00] ## Line: 72 	 		else
| [ 0:00] ## Line: 73 	 		  vgsplit -n $lv1 $vg1 $vg2
| [ 0:00] ## Line: 74 	 		fi
| [ 0:00] ## Line: 75 	 		if [ $i = existing ]; then
| [ 0:00] ## Line: 76 	 		  check pvlv_counts $vg2 4 1 0
| [ 0:00] ## Line: 77 	 		else
| [ 0:00] ## Line: 78 	 		  check pvlv_counts $vg2 2 1 0
| [ 0:00] ## Line: 79 	 		fi
| [ 0:00] ## Line: 80 	 		lvremove -f $vg2/$lv1
| [ 0:00] ## Line: 81 	 		vgremove -f $vg2
| [ 0:00] ## Line: 82 	 
| [ 0:00] ## Line: 83 	 COMM "vgsplit correctly splits mirror LV into $i VG ($j args)"
| [ 0:00] ## Line: 84 	 		create_vg_ $vg1 "$dev1" "$dev2" "$dev3"
| [ 0:00] ## Line: 85 	 		test $i = existing && create_vg_ $vg2 "$dev4"
| [ 0:00] ## Line: 86 	 
| [ 0:00] ## Line: 87 	 		lvcreate -an -Zn -l 64 --type mirror -m1 -n $lv1 $vg1 "$dev1" "$dev2" "$dev3"
| [ 0:00] ## Line: 88 	 		if [ $j = PV ]; then
| [ 0:00] ## Line: 89 	 		  # FIXME: Not an exhaustive check of possible bad combinations
| [ 0:00] ## Line: 90 	 		  not vgsplit $vg1 $vg2 "$dev1" "$dev2"
| [ 0:00] ## Line: 91 	 		  not vgsplit $vg1 $vg2 "$dev1" "$dev3"
| [ 0:00] ## Line: 92 	 		  not vgsplit $vg1 $vg2 "$dev2" "$dev3"
| [ 0:00] ## Line: 93 	 		  vgsplit $vg1 $vg2 "$dev1" "$dev2" "$dev3"
| [ 0:00] ## Line: 94 	 		else
| [ 0:00] ## Line: 95 	 		  vgsplit -n $lv1 $vg1 $vg2
| [ 0:00] ## Line: 96 	 		fi
| [ 0:00] ## Line: 97 	 		if [ $i = existing ]; then
| [ 0:00] ## Line: 98 	 		  check pvlv_counts $vg2 4 1 0
| [ 0:00] ## Line: 99 	 		else
| [ 0:00] ## Line: 100 	 		  check pvlv_counts $vg2 3 1 0
| [ 0:00] ## Line: 101 	 		fi
| [ 0:00] ## Line: 102 	 		lvremove -f $vg2/$lv1
| [ 0:00] ## Line: 103 	 		vgremove -f $vg2
| [ 0:00] ## Line: 104 	 
| [ 0:00] ## Line: 105 	 # RHBZ 875903
| [ 0:00] ## Line: 106 	 COMM "vgsplit correctly splits mirror (log+leg on same dev) into $i VG ($j args)"
| [ 0:00] ## Line: 107 	 		create_vg_ $vg1 "$dev1" "$dev2" "$dev3"
| [ 0:00] ## Line: 108 	 		test $i = existing && create_vg_ $vg2 "$dev4"
| [ 0:00] ## Line: 109 	 
| [ 0:00] ## Line: 110 	 		lvcreate -an -Zn -l 64 --type mirror -m1 -n $lv1 $vg1 "$dev1" "$dev2"
| [ 0:00] ## Line: 111 	 		if [ $j = PV ]; then
| [ 0:00] ## Line: 112 	 		  not vgsplit $vg1 $vg2 "$dev1"
| [ 0:00] ## Line: 113 	 		  not vgsplit $vg1 $vg2 "$dev2"
| [ 0:00] ## Line: 114 	 		  vgsplit $vg1 $vg2 "$dev1" "$dev2"
| [ 0:00] ## Line: 115 	 		else
| [ 0:00] ## Line: 116 	 		  vgsplit -n $lv1 $vg1 $vg2
| [ 0:00] ## Line: 117 	 		fi
| [ 0:00] ## Line: 118 	 		if [ $i = existing ]; then
| [ 0:00] ## Line: 119 	 		  check pvlv_counts $vg2 3 1 0
| [ 0:00] ## Line: 120 	 		else
| [ 0:00] ## Line: 121 	 		  check pvlv_counts $vg2 2 1 0
| [ 0:00] ## Line: 122 	 		fi
| [ 0:00] ## Line: 123 	 		lvremove -f $vg2/$lv1
| [ 0:00] ## Line: 124 	 		vgremove -f $vg1 $vg2
| [ 0:00] ## Line: 125 	 
| [ 0:00] ## Line: 126 	 # Can't use mirrored log without cmirrord
| [ 0:00] ## Line: 127 	 # TODO: Should work for inactive device, needs some fixes....
| [ 0:00] ## Line: 128 	 if test ! -e LOCAL_CLVMD ; then
| [ 0:00] ## Line: 129 	 COMM "vgsplit correctly splits mirror LV with mirrored log into $i VG ($j args)"
| [ 0:00] ## Line: 130 	 		create_vg_ $vg1 "$dev1" "$dev2" "$dev3" "$dev4"
| [ 0:00] ## Line: 131 	 		test $i = existing && create_vg_ $vg2 "$dev5"
| [ 0:00] ## Line: 132 	 
| [ 0:00] ## Line: 133 	 		lvcreate -an -Zn -l 64 --mirrorlog mirrored --type mirror -m1 -n $lv1 $vg1 \
| [ 0:00] ## Line: 134 	 		    "$dev1" "$dev2" "$dev3" "$dev4"
| [ 0:00] ## Line: 135 	 
| [ 0:00] ## Line: 136 	 		if [ $j = PV ]; then
| [ 0:00] ## Line: 137 	 		  # FIXME: Not an exhaustive check of possible bad combinations
| [ 0:00] ## Line: 138 	 		  not vgsplit $vg1 $vg2 "$dev1" "$dev2"
| [ 0:00] ## Line: 139 	 		  not vgsplit $vg1 $vg2 "$dev3" "$dev4"
| [ 0:00] ## Line: 140 	 		  not vgsplit $vg1 $vg2 "$dev1" "$dev3"
| [ 0:00] ## Line: 141 	 		  not vgsplit $vg1 $vg2 "$dev2" "$dev4"
| [ 0:00] ## Line: 142 	 		  vgsplit $vg1 $vg2 "$dev1" "$dev2" "$dev3" "$dev4"
| [ 0:00] ## Line: 143 	 		else
| [ 0:00] ## Line: 144 	 		  vgsplit -n $lv1 $vg1 $vg2
| [ 0:00] ## Line: 145 	 		fi
| [ 0:00] ## Line: 146 	 		if [ $i = existing ]; then
| [ 0:00] ## Line: 147 	 		  check pvlv_counts $vg2 5 1 0
| [ 0:00] ## Line: 148 	 		else
| [ 0:00] ## Line: 149 	 		  check pvlv_counts $vg2 4 1 0
| [ 0:00] ## Line: 150 	 		fi
| [ 0:00] ## Line: 151 	 		lvremove -f $vg2/$lv1
| [ 0:00] ## Line: 152 	 		vgremove -f $vg2
| [ 0:00] ## Line: 153 	 
| [ 0:00] ## Line: 154 	 # RHBZ 875903
| [ 0:00] ## Line: 155 	 COMM "vgsplit correctly splits mirror LV with mirrored log on same devs into $i VG ($j args)"
| [ 0:00] ## Line: 156 	 		create_vg_ $vg1 "$dev1" "$dev2" "$dev3" "$dev4"
| [ 0:00] ## Line: 157 	 		test $i = existing && create_vg_ $vg2 "$dev5"
| [ 0:00] ## Line: 158 	 
| [ 0:00] ## Line: 159 	 		lvcreate -an -Zn -l 64 --mirrorlog mirrored --type mirror -m1 -n $lv1 $vg1 \
| [ 0:00] ## Line: 160 	 		    "$dev1" "$dev2"
| [ 0:00] ## Line: 161 	 
| [ 0:00] ## Line: 162 	 		if [ $j = PV ]; then
| [ 0:00] ## Line: 163 	 		  not vgsplit $vg1 $vg2 "$dev1"
| [ 0:00] ## Line: 164 	 		  not vgsplit $vg1 $vg2 "$dev2"
| [ 0:00] ## Line: 165 	 		  vgsplit $vg1 $vg2 "$dev1" "$dev2"
| [ 0:00] ## Line: 166 	 		else
| [ 0:00] ## Line: 167 	 		  vgsplit -n $lv1 $vg1 $vg2
| [ 0:00] ## Line: 168 	 		fi
| [ 0:00] ## Line: 169 	 		if [ $i = existing ]; then
| [ 0:00] ## Line: 170 	 		  check pvlv_counts $vg2 3 1 0
| [ 0:00] ## Line: 171 	 		else
| [ 0:00] ## Line: 172 	 		  check pvlv_counts $vg2 2 1 0
| [ 0:00] ## Line: 173 	 		fi
| [ 0:00] ## Line: 174 	 		lvremove -f $vg2/$lv1
| [ 0:00] ## Line: 175 	 		vgremove -f $vg1 $vg2
| [ 0:00] ## Line: 176 	 fi
| [ 0:00] ## Line: 177 	 
| [ 0:00] ## Line: 178 	 COMM "vgsplit correctly splits origin and snapshot LV into $i VG ($j args)"
| [ 0:00] ## Line: 179 	 		create_vg_ $vg1 "$dev1" "$dev2"
| [ 0:00] ## Line: 180 	 		test $i = existing && create_vg_ $vg2 "$dev3" "$dev4"
| [ 0:00] ## Line: 181 	 
| [ 0:00] ## Line: 182 	 		lvcreate -aey -l 64 -i 2 -n $lv1 $vg1 "$dev1" "$dev2"
| [ 0:00] ## Line: 183 	 		lvcreate -l 4 -i 2 -s -n $lv2 $vg1/$lv1
| [ 0:00] ## Line: 184 	 		vgchange -an $vg1
| [ 0:00] ## Line: 185 	 		if [ $j = PV ]; then
| [ 0:00] ## Line: 186 	 		  vgsplit $vg1 $vg2 "$dev1" "$dev2"
| [ 0:00] ## Line: 187 	 		else
| [ 0:00] ## Line: 188 	 		  vgsplit -n $lv1 $vg1 $vg2
| [ 0:00] ## Line: 189 	 		fi
| [ 0:00] ## Line: 190 	 		if [ $i = existing ]; then
| [ 0:00] ## Line: 191 	 		  check pvlv_counts $vg2 4 2 1
| [ 0:00] ## Line: 192 	 		else
| [ 0:00] ## Line: 193 	 		  check pvlv_counts $vg2 2 2 1
| [ 0:00] ## Line: 194 	 		fi
| [ 0:00] ## Line: 195 	 		lvremove -f $vg2/$lv2
| [ 0:00] ## Line: 196 	 		lvremove -f $vg2/$lv1
| [ 0:00] ## Line: 197 	 		vgremove -f $vg2
| [ 0:00] ## Line: 198 	 
| [ 0:00] ## Line: 199 	 COMM "vgsplit correctly splits linear LV but not snap+origin LV into $i VG ($j args)"
| [ 0:00] ## Line: 200 	 		create_vg_ $vg1 "$dev1" "$dev2"
| [ 0:00] ## Line: 201 	 		test $i = existing && create_vg_ $vg2 "$dev3"
| [ 0:00] ## Line: 202 	 
| [ 0:00] ## Line: 203 	 		lvcreate -aey -l 64 -i 2 -n $lv1 $vg1
| [ 0:00] ## Line: 204 	 		lvcreate -l 4 -i 2 -s -n $lv2 $vg1/$lv1
| [ 0:00] ## Line: 205 	 		vgextend $vg1 "$dev4"
| [ 0:00] ## Line: 206 	 		lvcreate -l 64 -n $lv3 $vg1 "$dev4"
| [ 0:00] ## Line: 207 	 		vgchange -an $vg1
| [ 0:00] ## Line: 208 	 		if [ $j = PV ]; then
| [ 0:00] ## Line: 209 	 		  vgsplit $vg1 $vg2 "$dev4"
| [ 0:00] ## Line: 210 	 		else
| [ 0:00] ## Line: 211 	 		  vgsplit -n $lv3 $vg1 $vg2
| [ 0:00] ## Line: 212 	 		fi
| [ 0:00] ## Line: 213 	 		if [ $i = existing ]; then
| [ 0:00] ## Line: 214 	 		  check pvlv_counts $vg2 2 1 0
| [ 0:00] ## Line: 215 	 		  check pvlv_counts $vg1 2 2 1
| [ 0:00] ## Line: 216 	 		else
| [ 0:00] ## Line: 217 	 		  check pvlv_counts $vg2 1 1 0
| [ 0:00] ## Line: 218 	 		  check pvlv_counts $vg1 2 2 1
| [ 0:00] ## Line: 219 	 		fi
| [ 0:00] ## Line: 220 	 		lvremove -f $vg1/$lv2
| [ 0:00] ## Line: 221 	 		lvremove -f $vg1/$lv1 $vg2/$lv3
| [ 0:00] ## Line: 222 	 		vgremove -f $vg1 $vg2
| [ 0:00] ## Line: 223 	 
| [ 0:00] ## Line: 224 	 COMM "vgsplit correctly splits linear LV but not mirror LV into $i VG ($j args)"
| [ 0:00] ## Line: 225 	 		create_vg_ $vg1 "$dev1" "$dev2" "$dev3"
| [ 0:00] ## Line: 226 	 		test $i = existing && create_vg_ $vg2 "$dev5"
| [ 0:00] ## Line: 227 	 
| [ 0:00] ## Line: 228 	 		lvcreate -an -Zn -l 64 --type mirror -m1 -n $lv1 $vg1 "$dev1" "$dev2" "$dev3"
| [ 0:00] ## Line: 229 	 		vgextend $vg1 "$dev4"
| [ 0:00] ## Line: 230 	 		lvcreate -an -Zn -l 64 -n $lv2 $vg1 "$dev4"
| [ 0:00] ## Line: 231 	 		if [ $j = PV ]; then
| [ 0:00] ## Line: 232 	 		  vgsplit $vg1 $vg2 "$dev4"
| [ 0:00] ## Line: 233 	 		else
| [ 0:00] ## Line: 234 	 		  vgsplit -n $lv2 $vg1 $vg2
| [ 0:00] ## Line: 235 	 		fi
| [ 0:00] ## Line: 236 	 		if [ $i = existing ]; then
| [ 0:00] ## Line: 237 	 		  check pvlv_counts $vg1 3 1 0
| [ 0:00] ## Line: 238 	 		  check pvlv_counts $vg2 2 1 0
| [ 0:00] ## Line: 239 	 		else
| [ 0:00] ## Line: 240 	 		  check pvlv_counts $vg1 3 1 0
| [ 0:00] ## Line: 241 	 		  check pvlv_counts $vg2 1 1 0
| [ 0:00] ## Line: 242 	 		fi
| [ 0:00] ## Line: 243 	 		vgremove -f $vg1 $vg2
| [ 0:00] ## Line: 244 	 	done
| [ 0:00] ## Line: 245 	 done
| [ 0:00] ## Line: 246 	 
| [ 0:00] ## Line: 247 	 #
| [ 0:00] ## Line: 248 	 # Test more complex setups where the code has to find associated PVs and
| [ 0:00] ## Line: 249 	 # LVs to split the VG correctly
| [ 0:00] ## Line: 250 	 #
| [ 0:00] ## Line: 251 	 COMM "vgsplit fails splitting 3 striped LVs into VG when only 1 LV specified"
| [ 0:00] ## Line: 252 	 create_vg_ $vg1 "$dev1" "$dev2" "$dev3" "$dev4"
| [ 0:00] ## Line: 253 	 lvcreate -an -Zn -l 4 -n $lv1 -i 2 $vg1 "$dev1" "$dev2"
| [ 0:00] ## Line: 254 	 lvcreate -an -Zn -l 4 -n $lv2 -i 2 $vg1 "$dev2" "$dev3"
| [ 0:00] ## Line: 255 	 lvcreate -an -Zn -l 4 -n $lv3 -i 2 $vg1 "$dev3" "$dev4"
| [ 0:00] ## Line: 256 	 not vgsplit -n $lv1 $vg1 $vg2
| [ 0:00] ## Line: 257 	 vgremove -f $vg1
| [ 0:00] ## Line: 258 	 
| [ 0:00] ## Line: 259 	 COMM "vgsplit fails splitting one LV with 2 snapshots, only origin LV specified"
| [ 0:00] ## Line: 260 	 create_vg_ $vg1 "$dev1" "$dev2" "$dev3" "$dev4"
| [ 0:00] ## Line: 261 	 lvcreate -aey -l 16 -n $lv1 $vg1 "$dev1" "$dev2"
| [ 0:00] ## Line: 262 	 lvcreate -l 4 -n $lv2 -s $vg1/$lv1 "$dev3"
| [ 0:00] ## Line: 263 	 lvcreate -l 4 -n $lv3 -s $vg1/$lv1 "$dev4"
| [ 0:00] ## Line: 264 	 check pvlv_counts $vg1 4 3 2
| [ 0:00] ## Line: 265 	 vgchange -an $vg1
| [ 0:00] ## Line: 266 	 not vgsplit -n $lv1 $vg1 $vg2;
| [ 0:00] ## Line: 267 	 lvremove -f $vg1/$lv2 $vg1/$lv3
| [ 0:00] ## Line: 268 	 lvremove -f $vg1/$lv1
| [ 0:00] ## Line: 269 	 vgremove -f $vg1
| [ 0:00] ## Line: 270 	 
| [ 0:00] ## Line: 271 	 COMM "vgsplit fails splitting one LV with 2 snapshots, only snapshot LV specified"
| [ 0:00] ## Line: 272 	 create_vg_ $vg1 "$dev1" "$dev2" "$dev3" "$dev4"
| [ 0:00] ## Line: 273 	 lvcreate -aey -l 16 -n $lv1 $vg1 "$dev1" "$dev2"
| [ 0:00] ## Line: 274 	 lvcreate -l 4 -n $lv2 -s $vg1/$lv1 "$dev3"
| [ 0:00] ## Line: 275 	 lvcreate -l 4 -n $lv3 -s $vg1/$lv1 "$dev4"
| [ 0:00] ## Line: 276 	 check pvlv_counts $vg1 4 3 2
| [ 0:00] ## Line: 277 	 vgchange -an $vg1
| [ 0:00] ## Line: 278 	 not vgsplit -n $lv2 $vg1 $vg2
| [ 0:00] ## Line: 279 	 lvremove -f $vg1/$lv2 $vg1/$lv3
| [ 0:00] ## Line: 280 	 lvremove -f $vg1/$lv1
| [ 0:00] ## Line: 281 	 vgremove -f $vg1
| [ 0:00] ## Line: 282 	 
| [ 0:00] ## Line: 283 	 COMM "vgsplit fails splitting one mirror LV, only one PV specified"
| [ 0:00] ## Line: 284 	 create_vg_ $vg1 "$dev1" "$dev2" "$dev3" "$dev4"
| [ 0:00] ## Line: 285 	 lvcreate -an -Zn -l 16 -n $lv1 --type mirror -m1 $vg1 "$dev1" "$dev2" "$dev3"
| [ 0:00] ## Line: 286 	 check pvlv_counts $vg1 4 1 0
| [ 0:00] ## Line: 287 	 not vgsplit $vg1 $vg2 "$dev2"
| [ 0:00] ## Line: 288 	 vgremove -ff $vg1
| [ 0:00] ## Line: 289 	 
| [ 0:00] ## Line: 290 	 COMM "vgsplit fails splitting 1 mirror + 1 striped LV, only striped LV specified"
| [ 0:00] ## Line: 291 	 create_vg_ $vg1 "$dev1" "$dev2" "$dev3" "$dev4"
| [ 0:00] ## Line: 292 	 lvcreate -an -Zn -l 16 -n $lv1 --type mirror --nosync -m1 $vg1 "$dev1" "$dev2" "$dev3"
| [ 0:00] ## Line: 293 	 lvcreate -an -Zn -l 16 -n $lv2 -i 2 $vg1 "$dev3" "$dev4"
| [ 0:00] ## Line: 294 	 check pvlv_counts $vg1 4 2 0
| [ 0:00] ## Line: 295 	 not vgsplit -n $lv2 $vg1 $vg2 2>err
| [ 0:00] ## Line: 296 	 vgremove -f $vg1
| [ 0:00] ## Line: 297 	 
| [ 0:00] ## Line: 298 	 #
| [ 0:00] ## Line: 299 	 # Verify vgsplit rejects active LVs only when active LVs involved in split
| [ 0:00] ## Line: 300 	 #
| [ 0:00] ## Line: 301 	 COMM "vgsplit fails, active mirror involved in split"
| [ 0:00] ## Line: 302 	 create_vg_ $vg1 "$dev1" "$dev2" "$dev3" "$dev4"
| [ 0:00] ## Line: 303 	 lvcreate -aey -l 16 -n $lv1 --type mirror --nosync -m1 $vg1 "$dev1" "$dev2" "$dev3"
| [ 0:00] ## Line: 304 	 lvcreate -l 16 -n $lv2 $vg1 "$dev4"
| [ 0:00] ## Line: 305 	 lvchange -an $vg1/$lv2
| [ 0:00] ## Line: 306 	 check pvlv_counts $vg1 4 2 0
| [ 0:00] ## Line: 307 	 not vgsplit -n $lv1 $vg1 $vg2;
| [ 0:00] ## Line: 308 	 check pvlv_counts $vg1 4 2 0
| [ 0:00] ## Line: 309 	 vgremove -f $vg1
| [ 0:00] ## Line: 310 	 
| [ 0:00] ## Line: 311 	 COMM "vgsplit succeeds, active mirror not involved in split"
| [ 0:00] ## Line: 312 	 create_vg_ $vg1 "$dev1" "$dev2" "$dev3" "$dev4"
| [ 0:00] ## Line: 313 	 lvcreate -aey -l 16 -n $lv1 --type mirror --nosync -m1 $vg1 "$dev1" "$dev2" "$dev3"
| [ 0:00] ## Line: 314 	 lvcreate -l 16 -n $lv2 $vg1 "$dev4"
| [ 0:00] ## Line: 315 	 lvchange -an $vg1/$lv2
| [ 0:00] ## Line: 316 	 check pvlv_counts $vg1 4 2 0
| [ 0:00] ## Line: 317 	 vgsplit -n $lv2 $vg1 $vg2
| [ 0:00] ## Line: 318 	 check pvlv_counts $vg1 3 1 0
| [ 0:00] ## Line: 319 	 check pvlv_counts $vg2 1 1 0
| [ 0:00] ## Line: 320 	 vgremove -f $vg1 $vg2
| [ 0:00] ## Line: 321 	 
| [ 0:00] ## Line: 322 	 COMM "vgsplit fails, active snapshot involved in split"
| [ 0:00] ## Line: 323 	 create_vg_ $vg1 "$dev1" "$dev2" "$dev3" "$dev4"
| [ 0:00] ## Line: 324 	 lvcreate -aey -l 64 -i 2 -n $lv1 $vg1 "$dev1" "$dev2"
| [ 0:00] ## Line: 325 	 lvcreate -l 4 -i 2 -s -n $lv2 $vg1/$lv1
| [ 0:00] ## Line: 326 	 lvcreate -an -Zn -l 64 -i 2 -n $lv3 $vg1 "$dev3" "$dev4"
| [ 0:00] ## Line: 327 	 check pvlv_counts $vg1 4 3 1
| [ 0:00] ## Line: 328 	 not vgsplit -n $lv2 $vg1 $vg2;
| [ 0:00] ## Line: 329 	 check pvlv_counts $vg1 4 3 1
| [ 0:00] ## Line: 330 	 lvremove -f $vg1/$lv2
| [ 0:00] ## Line: 331 	 vgremove -f $vg1
| [ 0:00] ## Line: 332 	 
| [ 0:00] ## Line: 333 	 COMM "vgsplit succeeds, active snapshot not involved in split"
| [ 0:00] ## Line: 334 	 create_vg_ $vg1 "$dev1" "$dev2" "$dev3"
| [ 0:00] ## Line: 335 	 lvcreate -aey -l 64 -i 2 -n $lv1 $vg1 "$dev1" "$dev2"
| [ 0:00] ## Line: 336 	 lvcreate -l 4 -s -n $lv2 $vg1/$lv1
| [ 0:00] ## Line: 337 	 vgextend $vg1 "$dev4"
| [ 0:00] ## Line: 338 	 lvcreate -an -Zn -l 64 -n $lv3 $vg1 "$dev4"
| [ 0:00] ## Line: 339 	 check pvlv_counts $vg1 4 3 1
| [ 0:00] ## Line: 340 	 vgsplit -n $lv3 $vg1 $vg2
| [ 0:00] ## Line: 341 	 check pvlv_counts $vg1 3 2 1
| [ 0:00] ## Line: 342 	 check pvlv_counts $vg2 1 1 0
| [ 0:00] ## Line: 343 	 vgchange -an $vg1
| [ 0:00] ## Line: 344 	 lvremove -f $vg1/$lv2
| [ 0:00] ## Line: 345 	 vgremove -f $vg1 $vg2
| [ 0:00] aux teardown
| [ 0:00] #vgsplit-operation.sh:1+ aux teardown
| [ 0:00] ## teardown.........ok
###       failed: [ndev-vanilla] shell/vgsplit-operation.sh
###      skipped: [ndev-vanilla] shell/vgsplit-raid.sh

| [ 0:00] Library version:   1.02.146 (2017-12-18)
| [ 0:00] Driver version:    4.35.0
| [ 0:00] Kernel is Linux localhost.localdomain 3.10.0-693.11.1.el7.x86_64 #1 SMP Mon Dec 4 23:52:40 UTC 2017 x86_64 GNU/Linux
| [ 0:00] Selinux mode is not installed.
| [ 0:00]               total        used        free      shared  buff/cache   available
| [ 0:00] Mem:           7822        1082        4138          10        2602        6433
| [ 0:00] Swap:          4095           0        4095
| [ 0:00] Filesystem      Size  Used Avail Use% Mounted on
| [ 0:00] /dev/sdc1        18G  8.4G  8.4G  50% /
| [ 0:00] /dev/sdd1        51G  6.1G   43G  13% /lfskernel
| [ 0:00] devtmpfs        3.9G     0  3.9G   0% /dev
| [ 0:00] tmpfs           3.9G     0  3.9G   0% /run
| [ 0:00] @TESTDIR=/tmp/LVMTEST30673.QhASYRrrNm
| [ 0:00] @PREFIX=LVMTEST30673
| [ 0:00] ## LVMCONF: activation {
| [ 0:00] ## LVMCONF:     checks = 1
| [ 0:00] ## LVMCONF:     monitoring = 0
| [ 0:00] ## LVMCONF:     polling_interval = 1
| [ 0:00] ## LVMCONF:     raid_region_size = 512
| [ 0:00] ## LVMCONF:     retry_deactivation = 1
| [ 0:00] ## LVMCONF:     snapshot_autoextend_percent = 50
| [ 0:00] ## LVMCONF:     snapshot_autoextend_threshold = 50
| [ 0:00] ## LVMCONF:     udev_rules = 1
| [ 0:00] ## LVMCONF:     udev_sync = 1
| [ 0:00] ## LVMCONF:     verify_udev_operations = 1
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: allocation {
| [ 0:00] ## LVMCONF:     wipe_signatures_when_zeroing_new_lvs = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: backup {
| [ 0:00] ## LVMCONF:     archive = 0
| [ 0:00] ## LVMCONF:     backup = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: devices {
| [ 0:00] ## LVMCONF:     cache_dir = "@TESTDIR@/etc"
| [ 0:00] ## LVMCONF:     default_data_alignment = 1
| [ 0:00] ## LVMCONF:     dir = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     filter = "a|.*|"
| [ 0:00] ## LVMCONF:     global_filter = [ "a|@TESTDIR@/dev/mapper/@PREFIX@.*pv[0-9_]*$|", "r|.*|" ]
| [ 0:00] ## LVMCONF:     md_component_detection  = 0
| [ 0:00] ## LVMCONF:     scan = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     sysfs_scan = 1
| [ 0:00] ## LVMCONF:     write_cache_state = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: dmeventd {
| [ 0:00] ## LVMCONF:     executable = "/sources/boot/LVM2.2.02.177/test/lib/dmeventd"
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: global {
| [ 0:00] ## LVMCONF:     abort_on_internal_errors = 1
| [ 0:00] ## LVMCONF:     cache_check_executable = "/usr/sbin/cache_check"
| [ 0:00] ## LVMCONF:     cache_dump_executable = "/usr/sbin/cache_dump"
| [ 0:00] ## LVMCONF:     cache_repair_executable = "/usr/sbin/cache_repair"
| [ 0:00] ## LVMCONF:     detect_internal_vg_cache_corruption = 1
| [ 0:00] ## LVMCONF:     fallback_to_local_locking = 0
| [ 0:00] ## LVMCONF:     fsadm_executable = "/sources/boot/LVM2.2.02.177/test/lib/fsadm"
| [ 0:00] ## LVMCONF:     library_dir = "@TESTDIR@/lib"
| [ 0:00] ## LVMCONF:     locking_dir = "@TESTDIR@/var/lock/lvm"
| [ 0:00] ## LVMCONF:     locking_type=1
| [ 0:00] ## LVMCONF:     notify_dbus = 0
| [ 0:00] ## LVMCONF:     si_unit_consistency = 1
| [ 0:00] ## LVMCONF:     thin_check_executable = "/usr/sbin/thin_check"
| [ 0:00] ## LVMCONF:     thin_dump_executable = "/usr/sbin/thin_dump"
| [ 0:00] ## LVMCONF:     thin_repair_executable = "/usr/sbin/thin_repair"
| [ 0:00] ## LVMCONF:     use_lvmetad = 0
| [ 0:00] ## LVMCONF:     use_lvmlockd = 0
| [ 0:00] ## LVMCONF:     use_lvmpolld = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: log {
| [ 0:00] ## LVMCONF:     activation = 1
| [ 0:00] ## LVMCONF:     file = "@TESTDIR@/debug.log"
| [ 0:00] ## LVMCONF:     indent = 1
| [ 0:00] ## LVMCONF:     level = 9
| [ 0:00] ## LVMCONF:     overwrite = 1
| [ 0:00] ## LVMCONF:     syslog = 0
| [ 0:00] ## LVMCONF:     verbose = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] <======== Processing test: "vgsplit-stacked.sh" ========>
| [ 0:00] 
| [ 0:00] aux extend_filter_LVMTEST
| [ 0:00] #vgsplit-stacked.sh:18+ aux extend_filter_LVMTEST
| [ 0:00] ## LVMCONF: activation {
| [ 0:00] ## LVMCONF:     checks = 1
| [ 0:00] ## LVMCONF:     monitoring = 0
| [ 0:00] ## LVMCONF:     polling_interval = 1
| [ 0:00] ## LVMCONF:     raid_region_size = 512
| [ 0:00] ## LVMCONF:     retry_deactivation = 1
| [ 0:00] ## LVMCONF:     snapshot_autoextend_percent = 50
| [ 0:00] ## LVMCONF:     snapshot_autoextend_threshold = 50
| [ 0:00] ## LVMCONF:     udev_rules = 1
| [ 0:00] ## LVMCONF:     udev_sync = 1
| [ 0:00] ## LVMCONF:     verify_udev_operations = 1
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: allocation {
| [ 0:00] ## LVMCONF:     wipe_signatures_when_zeroing_new_lvs = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: backup {
| [ 0:00] ## LVMCONF:     archive = 0
| [ 0:00] ## LVMCONF:     backup = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: devices {
| [ 0:00] ## LVMCONF:     cache_dir = "@TESTDIR@/etc"
| [ 0:00] ## LVMCONF:     default_data_alignment = 1
| [ 0:00] ## LVMCONF:     dir = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     filter = "a|.*|"
| [ 0:00] ## LVMCONF:     global_filter = [ "a|@TESTDIR@/dev/@PREFIX@|",  "a|@TESTDIR@/dev/mapper/@PREFIX@.*pv[0-9_]*$|", "r|.*|" ]
| [ 0:00] ## LVMCONF:     md_component_detection  = 0
| [ 0:00] ## LVMCONF:     scan = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     sysfs_scan = 1
| [ 0:00] ## LVMCONF:     write_cache_state = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: dmeventd {
| [ 0:00] ## LVMCONF:     executable = "/sources/boot/LVM2.2.02.177/test/lib/dmeventd"
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: global {
| [ 0:00] ## LVMCONF:     abort_on_internal_errors = 1
| [ 0:00] ## LVMCONF:     cache_check_executable = "/usr/sbin/cache_check"
| [ 0:00] ## LVMCONF:     cache_dump_executable = "/usr/sbin/cache_dump"
| [ 0:00] ## LVMCONF:     cache_repair_executable = "/usr/sbin/cache_repair"
| [ 0:00] ## LVMCONF:     detect_internal_vg_cache_corruption = 1
| [ 0:00] ## LVMCONF:     fallback_to_local_locking = 0
| [ 0:00] ## LVMCONF:     fsadm_executable = "/sources/boot/LVM2.2.02.177/test/lib/fsadm"
| [ 0:00] ## LVMCONF:     library_dir = "@TESTDIR@/lib"
| [ 0:00] ## LVMCONF:     locking_dir = "@TESTDIR@/var/lock/lvm"
| [ 0:00] ## LVMCONF:     locking_type=1
| [ 0:00] ## LVMCONF:     notify_dbus = 0
| [ 0:00] ## LVMCONF:     si_unit_consistency = 1
| [ 0:00] ## LVMCONF:     thin_check_executable = "/usr/sbin/thin_check"
| [ 0:00] ## LVMCONF:     thin_dump_executable = "/usr/sbin/thin_dump"
| [ 0:00] ## LVMCONF:     thin_repair_executable = "/usr/sbin/thin_repair"
| [ 0:00] ## LVMCONF:     use_lvmetad = 0
| [ 0:00] ## LVMCONF:     use_lvmlockd = 0
| [ 0:00] ## LVMCONF:     use_lvmpolld = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: log {
| [ 0:00] ## LVMCONF:     activation = 1
| [ 0:00] ## LVMCONF:     file = "@TESTDIR@/debug.log"
| [ 0:00] ## LVMCONF:     indent = 1
| [ 0:00] ## LVMCONF:     level = 9
| [ 0:00] ## LVMCONF:     overwrite = 1
| [ 0:00] ## LVMCONF:     syslog = 0
| [ 0:00] ## LVMCONF:     verbose = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] aux prepare_pvs 3
| [ 0:00] #vgsplit-stacked.sh:19+ aux prepare_pvs 3
| [ 0:00] ## preparing loop device....ok (/dev/loop0)
| [ 0:00] ## preparing 3 devices...lib/utils: line 212: DM_UDEV_COOKIE: unbound variable
| [ 0:00] set +vx; STACKTRACE; set -vx
| [ 0:00] ##vgsplit-stacked.sh:19+ set +vx
| [ 0:00] ## - /lfskernel/sources/boot/LVM2.2.02.177/test/shell/vgsplit-stacked.sh:19
| [ 0:00] ## 1 STACKTRACE() called from /lfskernel/sources/boot/LVM2.2.02.177/test/shell/vgsplit-stacked.sh:19
| [ 0:00] <======== Info ========>
| [ 0:00] ## DMINFO:   Name             Maj Min Stat Open Targ Event  UUID                                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv3  253   3 L--w    0    1      0 TEST-@PREFIX@pv3                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv2  253   5 L--w    0    1      0 TEST-@PREFIX@pv2                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv1  253   4 L--w    0    1      0 TEST-@PREFIX@pv1                                                
| [ 0:00] <======== Active table ========>
| [ 0:00] ## DMTABLE:  @PREFIX@pv3: 0 69632 linear 7:0 141312
| [ 0:00] ## DMTABLE:  @PREFIX@pv2: 0 69632 linear 7:0 71680
| [ 0:00] ## DMTABLE:  @PREFIX@pv1: 0 69632 linear 7:0 2048
| [ 0:00] <======== Inactive table ========>
| [ 0:00] ## DMITABLE: @PREFIX@pv3: 
| [ 0:00] ## DMITABLE: @PREFIX@pv2: 
| [ 0:00] ## DMITABLE: @PREFIX@pv1: 
| [ 0:00] <======== Status ========>
| [ 0:00] ## DMSTATUS: @PREFIX@pv3: 0 69632 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv2: 0 69632 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv1: 0 69632 linear 
| [ 0:00] <======== Tree ========>
| [ 0:00] ## DMTREE:   @PREFIX@pv3 (253:3)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   @PREFIX@pv2 (253:5)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   LFS_vg-lfs (253:2)
| [ 0:00] ## DMTREE:    `- (8:16)
| [ 0:00] ## DMTREE:   centos-swap (253:1)
| [ 0:00] ## DMTREE:    `- (8:2)
| [ 0:00] ## DMTREE:   @PREFIX@pv1 (253:4)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   centos-root (253:0)
| [ 0:00] ## DMTREE:    `- (8:2)
| [ 0:00] <======== Recursive list of @TESTDIR@/dev ========>
| [ 0:00] ## LSLR:	@TESTDIR@/dev:
| [ 0:00] ## LSLR:	total 4
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 0 Feb 21 02:28 loop0
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 1 Feb 21 02:28 loop1
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 2 Feb 21 02:28 loop2
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 3 Feb 21 02:28 loop3
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 4 Feb 21 02:28 loop4
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 5 Feb 21 02:28 loop5
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 6 Feb 21 02:28 loop6
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 7 Feb 21 02:28 loop7
| [ 0:00] ## LSLR:	drwxr-xr-x 2 root root 4096 Feb 21 02:28 mapper
| [ 0:00] ## LSLR:	crw-r--r-- 1 root root 1, 3 Feb 21 02:28 testnull
| [ 0:00] ## LSLR:	
| [ 0:00] ## LSLR:	@TESTDIR@/dev/mapper:
| [ 0:00] ## LSLR:	total 0
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   4 Feb 21 02:28 @PREFIX@pv1
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   5 Feb 21 02:28 @PREFIX@pv2
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   3 Feb 21 02:28 @PREFIX@pv3
| [ 0:00] ## LSLR:	crw------- 1 root root  10, 236 Feb 21 02:28 control
| [ 0:00] <======== Udev DB content ========>
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-0
| [ 0:00] ## UDEV:	N: dm-0
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-0
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-0
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=0
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-1
| [ 0:00] ## UDEV:	N: dm-1
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-1
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-1
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=1
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-2
| [ 0:00] ## UDEV:	N: dm-2
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-2
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-2
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=2
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-3
| [ 0:00] ## UDEV:	N: dm-3
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-3
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-3
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=3
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-4
| [ 0:00] ## UDEV:	N: dm-4
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-4
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-4
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=4
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-5
| [ 0:00] ## UDEV:	N: dm-5
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-5
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-5
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=5
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/loop0
| [ 0:00] ## UDEV:	N: loop0
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/loop0
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/loop0
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=7
| [ 0:00] ## UDEV:	E: MINOR=0
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] <======== Script file "vgsplit-stacked.sh" ========>
| [ 0:00] ## Line: 1 	 #!/usr/bin/env bash
| [ 0:00] ## Line: 2 	 
| [ 0:00] ## Line: 3 	 # Copyright (C) 2010 Red Hat, Inc. All rights reserved.
| [ 0:00] ## Line: 4 	 #
| [ 0:00] ## Line: 5 	 # This copyrighted material is made available to anyone wishing to use,
| [ 0:00] ## Line: 6 	 # modify, copy, or redistribute it subject to the terms and conditions
| [ 0:00] ## Line: 7 	 # of the GNU General Public License v.2.
| [ 0:00] ## Line: 8 	 #
| [ 0:00] ## Line: 9 	 # You should have received a copy of the GNU General Public License
| [ 0:00] ## Line: 10 	 # along with this program; if not, write to the Free Software Foundation,
| [ 0:00] ## Line: 11 	 # Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA
| [ 0:00] ## Line: 12 	 
| [ 0:00] ## Line: 13 	 SKIP_WITH_LVMLOCKD=1
| [ 0:00] ## Line: 14 	 SKIP_WITH_LVMPOLLD=1
| [ 0:00] ## Line: 15 	 
| [ 0:00] ## Line: 16 	 . lib/inittest
| [ 0:00] ## Line: 17 	 
| [ 0:00] ## Line: 18 	 aux extend_filter_LVMTEST
| [ 0:00] ## Line: 19 	 aux prepare_pvs 3
| [ 0:00] ## Line: 20 	 
| [ 0:00] ## Line: 21 	 vgcreate $vg1 "$dev1" "$dev2"
| [ 0:00] ## Line: 22 	 lvcreate -n $lv1 -l 100%FREE $vg1
| [ 0:00] ## Line: 23 	 
| [ 0:00] ## Line: 24 	 #top VG
| [ 0:00] ## Line: 25 	 pvcreate "$DM_DEV_DIR/$vg1/$lv1"
| [ 0:00] ## Line: 26 	 vgcreate $vg "$DM_DEV_DIR/$vg1/$lv1" "$dev3"
| [ 0:00] ## Line: 27 	 
| [ 0:00] ## Line: 28 	 vgchange -a n $vg $vg1
| [ 0:00] ## Line: 29 	 
| [ 0:00] ## Line: 30 	 # this should fail but not segfault, RHBZ 481793.
| [ 0:00] ## Line: 31 	 not vgsplit $vg $vg1 "$dev3"
| [ 0:00] ## Line: 32 	 
| [ 0:00] ## Line: 33 	 vgremove -ff $vg $vg1
| [ 0:00] aux teardown
| [ 0:00] #vgsplit-stacked.sh:1+ aux teardown
| [ 0:00] ## teardown.........ok
###       failed: [ndev-vanilla] shell/vgsplit-stacked.sh
###      skipped: [ndev-vanilla] shell/vgsplit-thin.sh

| [ 0:00] Library version:   1.02.146 (2017-12-18)
| [ 0:00] Driver version:    4.35.0
| [ 0:00] Kernel is Linux localhost.localdomain 3.10.0-693.11.1.el7.x86_64 #1 SMP Mon Dec 4 23:52:40 UTC 2017 x86_64 GNU/Linux
| [ 0:00] Selinux mode is not installed.
| [ 0:00]               total        used        free      shared  buff/cache   available
| [ 0:00] Mem:           7822        1082        4138          10        2602        6433
| [ 0:00] Swap:          4095           0        4095
| [ 0:00] Filesystem      Size  Used Avail Use% Mounted on
| [ 0:00] /dev/sdc1        18G  8.4G  8.4G  50% /
| [ 0:00] /dev/sdd1        51G  6.1G   43G  13% /lfskernel
| [ 0:00] devtmpfs        3.9G     0  3.9G   0% /dev
| [ 0:00] tmpfs           3.9G     0  3.9G   0% /run
| [ 0:00] @TESTDIR=/tmp/LVMTEST30938.mexSmQj7dQ
| [ 0:00] @PREFIX=LVMTEST30938
| [ 0:00] ## LVMCONF: activation {
| [ 0:00] ## LVMCONF:     checks = 1
| [ 0:00] ## LVMCONF:     monitoring = 0
| [ 0:00] ## LVMCONF:     polling_interval = 1
| [ 0:00] ## LVMCONF:     raid_region_size = 512
| [ 0:00] ## LVMCONF:     retry_deactivation = 1
| [ 0:00] ## LVMCONF:     snapshot_autoextend_percent = 50
| [ 0:00] ## LVMCONF:     snapshot_autoextend_threshold = 50
| [ 0:00] ## LVMCONF:     udev_rules = 1
| [ 0:00] ## LVMCONF:     udev_sync = 1
| [ 0:00] ## LVMCONF:     verify_udev_operations = 1
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: allocation {
| [ 0:00] ## LVMCONF:     wipe_signatures_when_zeroing_new_lvs = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: backup {
| [ 0:00] ## LVMCONF:     archive = 0
| [ 0:00] ## LVMCONF:     backup = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: devices {
| [ 0:00] ## LVMCONF:     cache_dir = "@TESTDIR@/etc"
| [ 0:00] ## LVMCONF:     default_data_alignment = 1
| [ 0:00] ## LVMCONF:     dir = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     filter = "a|.*|"
| [ 0:00] ## LVMCONF:     global_filter = [ "a|@TESTDIR@/dev/mapper/@PREFIX@.*pv[0-9_]*$|", "r|.*|" ]
| [ 0:00] ## LVMCONF:     md_component_detection  = 0
| [ 0:00] ## LVMCONF:     scan = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     sysfs_scan = 1
| [ 0:00] ## LVMCONF:     write_cache_state = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: dmeventd {
| [ 0:00] ## LVMCONF:     executable = "/sources/boot/LVM2.2.02.177/test/lib/dmeventd"
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: global {
| [ 0:00] ## LVMCONF:     abort_on_internal_errors = 1
| [ 0:00] ## LVMCONF:     cache_check_executable = "/usr/sbin/cache_check"
| [ 0:00] ## LVMCONF:     cache_dump_executable = "/usr/sbin/cache_dump"
| [ 0:00] ## LVMCONF:     cache_repair_executable = "/usr/sbin/cache_repair"
| [ 0:00] ## LVMCONF:     detect_internal_vg_cache_corruption = 1
| [ 0:00] ## LVMCONF:     fallback_to_local_locking = 0
| [ 0:00] ## LVMCONF:     fsadm_executable = "/sources/boot/LVM2.2.02.177/test/lib/fsadm"
| [ 0:00] ## LVMCONF:     library_dir = "@TESTDIR@/lib"
| [ 0:00] ## LVMCONF:     locking_dir = "@TESTDIR@/var/lock/lvm"
| [ 0:00] ## LVMCONF:     locking_type=1
| [ 0:00] ## LVMCONF:     notify_dbus = 0
| [ 0:00] ## LVMCONF:     si_unit_consistency = 1
| [ 0:00] ## LVMCONF:     thin_check_executable = "/usr/sbin/thin_check"
| [ 0:00] ## LVMCONF:     thin_dump_executable = "/usr/sbin/thin_dump"
| [ 0:00] ## LVMCONF:     thin_repair_executable = "/usr/sbin/thin_repair"
| [ 0:00] ## LVMCONF:     use_lvmetad = 0
| [ 0:00] ## LVMCONF:     use_lvmlockd = 0
| [ 0:00] ## LVMCONF:     use_lvmpolld = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: log {
| [ 0:00] ## LVMCONF:     activation = 1
| [ 0:00] ## LVMCONF:     file = "@TESTDIR@/debug.log"
| [ 0:00] ## LVMCONF:     indent = 1
| [ 0:00] ## LVMCONF:     level = 9
| [ 0:00] ## LVMCONF:     overwrite = 1
| [ 0:00] ## LVMCONF:     syslog = 0
| [ 0:00] ## LVMCONF:     verbose = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] <======== Processing test: "vgsplit-usage.sh" ========>
| [ 0:00] 
| [ 0:00] aux prepare_devs 5
| [ 0:00] #vgsplit-usage.sh:20+ aux prepare_devs 5
| [ 0:00] ## preparing loop device....ok (/dev/loop0)
| [ 0:00] ## preparing 5 devices...lib/utils: line 212: DM_UDEV_COOKIE: unbound variable
| [ 0:00] set +vx; STACKTRACE; set -vx
| [ 0:00] ##vgsplit-usage.sh:20+ set +vx
| [ 0:00] ## - /lfskernel/sources/boot/LVM2.2.02.177/test/shell/vgsplit-usage.sh:20
| [ 0:00] ## 1 STACKTRACE() called from /lfskernel/sources/boot/LVM2.2.02.177/test/shell/vgsplit-usage.sh:20
| [ 0:00] <======== Info ========>
| [ 0:00] ## DMINFO:   Name             Maj Min Stat Open Targ Event  UUID                                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv5  253   7 L--w    0    1      0 TEST-@PREFIX@pv5                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv4  253   5 L--w    0    1      0 TEST-@PREFIX@pv4                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv3  253   4 L--w    0    1      0 TEST-@PREFIX@pv3                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv2  253   3 L--w    0    1      0 TEST-@PREFIX@pv2                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv1  253   6 L--w    0    1      0 TEST-@PREFIX@pv1                                                
| [ 0:00] <======== Active table ========>
| [ 0:00] ## DMTABLE:  @PREFIX@pv5: 0 69632 linear 7:0 280576
| [ 0:00] ## DMTABLE:  @PREFIX@pv4: 0 69632 linear 7:0 210944
| [ 0:00] ## DMTABLE:  @PREFIX@pv3: 0 69632 linear 7:0 141312
| [ 0:00] ## DMTABLE:  @PREFIX@pv2: 0 69632 linear 7:0 71680
| [ 0:00] ## DMTABLE:  @PREFIX@pv1: 0 69632 linear 7:0 2048
| [ 0:00] <======== Inactive table ========>
| [ 0:00] ## DMITABLE: @PREFIX@pv5: 
| [ 0:00] ## DMITABLE: @PREFIX@pv4: 
| [ 0:00] ## DMITABLE: @PREFIX@pv3: 
| [ 0:00] ## DMITABLE: @PREFIX@pv2: 
| [ 0:00] ## DMITABLE: @PREFIX@pv1: 
| [ 0:00] <======== Status ========>
| [ 0:00] ## DMSTATUS: @PREFIX@pv5: 0 69632 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv4: 0 69632 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv3: 0 69632 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv2: 0 69632 linear 
| [ 0:00] ## DMSTATUS: @PREFIX@pv1: 0 69632 linear 
| [ 0:00] <======== Tree ========>
| [ 0:00] ## DMTREE:   @PREFIX@pv5 (253:7)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   @PREFIX@pv4 (253:5)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   @PREFIX@pv3 (253:4)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   @PREFIX@pv2 (253:3)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   @PREFIX@pv1 (253:6)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   LFS_vg-lfs (253:2)
| [ 0:00] ## DMTREE:    `- (8:16)
| [ 0:00] ## DMTREE:   centos-swap (253:1)
| [ 0:00] ## DMTREE:    `- (8:2)
| [ 0:00] ## DMTREE:   centos-root (253:0)
| [ 0:00] ## DMTREE:    `- (8:2)
| [ 0:00] <======== Recursive list of @TESTDIR@/dev ========>
| [ 0:00] ## LSLR:	@TESTDIR@/dev:
| [ 0:00] ## LSLR:	total 4
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 0 Feb 21 02:28 loop0
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 1 Feb 21 02:28 loop1
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 2 Feb 21 02:28 loop2
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 3 Feb 21 02:28 loop3
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 4 Feb 21 02:28 loop4
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 5 Feb 21 02:28 loop5
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 6 Feb 21 02:28 loop6
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 7 Feb 21 02:28 loop7
| [ 0:00] ## LSLR:	drwxr-xr-x 2 root root 4096 Feb 21 02:28 mapper
| [ 0:00] ## LSLR:	crw-r--r-- 1 root root 1, 3 Feb 21 02:28 testnull
| [ 0:00] ## LSLR:	
| [ 0:00] ## LSLR:	@TESTDIR@/dev/mapper:
| [ 0:00] ## LSLR:	total 0
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   6 Feb 21 02:28 @PREFIX@pv1
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   3 Feb 21 02:28 @PREFIX@pv2
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   4 Feb 21 02:28 @PREFIX@pv3
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   5 Feb 21 02:28 @PREFIX@pv4
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   7 Feb 21 02:28 @PREFIX@pv5
| [ 0:00] ## LSLR:	crw------- 1 root root  10, 236 Feb 21 02:28 control
| [ 0:00] <======== Udev DB content ========>
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-0
| [ 0:00] ## UDEV:	N: dm-0
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-0
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-0
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=0
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-1
| [ 0:00] ## UDEV:	N: dm-1
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-1
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-1
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=1
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-2
| [ 0:00] ## UDEV:	N: dm-2
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-2
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-2
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=2
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-3
| [ 0:00] ## UDEV:	N: dm-3
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-3
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-3
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=3
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-4
| [ 0:00] ## UDEV:	N: dm-4
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-4
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-4
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=4
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-5
| [ 0:00] ## UDEV:	N: dm-5
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-5
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-5
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=5
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-6
| [ 0:00] ## UDEV:	N: dm-6
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-6
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-6
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=6
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-7
| [ 0:00] ## UDEV:	N: dm-7
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-7
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-7
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=7
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/loop0
| [ 0:00] ## UDEV:	N: loop0
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/loop0
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/loop0
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=7
| [ 0:00] ## UDEV:	E: MINOR=0
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] <======== Script file "vgsplit-usage.sh" ========>
| [ 0:00] ## Line: 1 	 #!/usr/bin/env bash
| [ 0:00] ## Line: 2 	 
| [ 0:00] ## Line: 3 	 # Copyright (C) 2007-2011 Red Hat, Inc. All rights reserved.
| [ 0:00] ## Line: 4 	 #
| [ 0:00] ## Line: 5 	 # This copyrighted material is made available to anyone wishing to use,
| [ 0:00] ## Line: 6 	 # modify, copy, or redistribute it subject to the terms and conditions
| [ 0:00] ## Line: 7 	 # of the GNU General Public License v.2.
| [ 0:00] ## Line: 8 	 #
| [ 0:00] ## Line: 9 	 # You should have received a copy of the GNU General Public License
| [ 0:00] ## Line: 10 	 # along with this program; if not, write to the Free Software Foundation,
| [ 0:00] ## Line: 11 	 # Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA
| [ 0:00] ## Line: 12 	 
| [ 0:00] ## Line: 13 	 # Test vgsplit command options for validity
| [ 0:00] ## Line: 14 	 
| [ 0:00] ## Line: 15 	 SKIP_WITH_LVMLOCKD=1
| [ 0:00] ## Line: 16 	 SKIP_WITH_LVMPOLLD=1
| [ 0:00] ## Line: 17 	 
| [ 0:00] ## Line: 18 	 . lib/inittest
| [ 0:00] ## Line: 19 	 
| [ 0:00] ## Line: 20 	 aux prepare_devs 5
| [ 0:00] ## Line: 21 	 get_devs
| [ 0:00] ## Line: 22 	 
| [ 0:00] ## Line: 23 	 if test -n "$LVM_TEST_LVM1" ; then
| [ 0:00] ## Line: 24 	 mdatypes='1 2'
| [ 0:00] ## Line: 25 	 else
| [ 0:00] ## Line: 26 	 mdatypes='2'
| [ 0:00] ## Line: 27 	 fi
| [ 0:00] ## Line: 28 	 
| [ 0:00] ## Line: 29 	 for mdatype in $mdatypes
| [ 0:00] ## Line: 30 	 do
| [ 0:00] ## Line: 31 	 
| [ 0:00] ## Line: 32 	 pvcreate -M$mdatype "${DEVICES[@]}"
| [ 0:00] ## Line: 33 	 
| [ 0:00] ## Line: 34 	 # ensure name order does not matter
| [ 0:00] ## Line: 35 	 # NOTE: if we're using lvm1, we must use -M on vgsplit
| [ 0:00] ## Line: 36 	 vgcreate -M$mdatype "$vg1" "${DEVICES[@]}"
| [ 0:00] ## Line: 37 	 vgsplit -M$mdatype $vg1 $vg2 "$dev1"
| [ 0:00] ## Line: 38 	 vgremove $vg1 $vg2
| [ 0:00] ## Line: 39 	 
| [ 0:00] ## Line: 40 	 vgcreate -M$mdatype "$vg2" "${DEVICES[@]}"
| [ 0:00] ## Line: 41 	 vgsplit -M$mdatype $vg2 $vg1 "$dev1"
| [ 0:00] ## Line: 42 	 vgremove $vg1 $vg2
| [ 0:00] ## Line: 43 	 
| [ 0:00] ## Line: 44 	 # vgsplit accepts new vg as destination of split
| [ 0:00] ## Line: 45 	 # lvm1 -- bz244792
| [ 0:00] ## Line: 46 	 vgcreate -M$mdatype "$vg1" "${DEVICES[@]}"
| [ 0:00] ## Line: 47 	 vgsplit $vg1 $vg2 "$dev1" 1>err
| [ 0:00] ## Line: 48 	 grep "New volume group \"$vg2\" successfully split from \"$vg1\"" err
| [ 0:00] ## Line: 49 	 vgremove $vg1 $vg2
| [ 0:00] ## Line: 50 	 
| [ 0:00] ## Line: 51 	 # vgsplit accepts existing vg as destination of split
| [ 0:00] ## Line: 52 	 vgcreate -M$mdatype $vg1 "$dev1" "$dev2"
| [ 0:00] ## Line: 53 	 vgcreate -M$mdatype $vg2 "$dev3" "$dev4"
| [ 0:00] ## Line: 54 	 vgsplit $vg1 $vg2 "$dev1" 1>err
| [ 0:00] ## Line: 55 	 grep "Existing volume group \"$vg2\" successfully split from \"$vg1\"" err
| [ 0:00] ## Line: 56 	 vgremove $vg1 $vg2
| [ 0:00] ## Line: 57 	 
| [ 0:00] ## Line: 58 	 # vgsplit accepts --maxphysicalvolumes 128 on new VG
| [ 0:00] ## Line: 59 	 vgcreate -M$mdatype $vg1 "$dev1" "$dev2"
| [ 0:00] ## Line: 60 	 vgsplit --maxphysicalvolumes 128 $vg1 $vg2 "$dev1"
| [ 0:00] ## Line: 61 	 check vg_field $vg2 max_pv 128
| [ 0:00] ## Line: 62 	 vgremove $vg1 $vg2
| [ 0:00] ## Line: 63 	 
| [ 0:00] ## Line: 64 	 # vgsplit accepts --maxlogicalvolumes 128 on new VG
| [ 0:00] ## Line: 65 	 vgcreate -M$mdatype $vg1 "$dev1" "$dev2"
| [ 0:00] ## Line: 66 	 vgsplit --maxlogicalvolumes 128 $vg1 $vg2 "$dev1"
| [ 0:00] ## Line: 67 	 check vg_field $vg2 max_lv 128
| [ 0:00] ## Line: 68 	 vgremove $vg1 $vg2
| [ 0:00] ## Line: 69 	 
| [ 0:00] ## Line: 70 	 # vgsplit rejects split because max_pv of destination would be exceeded
| [ 0:00] ## Line: 71 	 vgcreate -M$mdatype --maxphysicalvolumes 2 $vg1 "$dev1" "$dev2"
| [ 0:00] ## Line: 72 	 vgcreate -M$mdatype --maxphysicalvolumes 2 $vg2 "$dev3" "$dev4"
| [ 0:00] ## Line: 73 	 not vgsplit $vg1 $vg2 "$dev1" 2>err;
| [ 0:00] ## Line: 74 	 grep "Maximum number of physical volumes (2) exceeded" err
| [ 0:00] ## Line: 75 	 vgremove $vg1 $vg2
| [ 0:00] ## Line: 76 	 
| [ 0:00] ## Line: 77 	 # vgsplit rejects split because maxphysicalvolumes given with existing vg
| [ 0:00] ## Line: 78 	 vgcreate -M$mdatype --maxphysicalvolumes 2 $vg1 "$dev1" "$dev2"
| [ 0:00] ## Line: 79 	 vgcreate -M$mdatype --maxphysicalvolumes 2 $vg2 "$dev3" "$dev4"
| [ 0:00] ## Line: 80 	 not vgsplit --maxphysicalvolumes 2 $vg1 $vg2 "$dev1" 2>err;
| [ 0:00] ## Line: 81 	 grep "Volume group \"$vg2\" exists, but new VG option specified" err
| [ 0:00] ## Line: 82 	 vgremove $vg1 $vg2
| [ 0:00] ## Line: 83 	 
| [ 0:00] ## Line: 84 	 # vgsplit rejects split because maxlogicalvolumes given with existing vg
| [ 0:00] ## Line: 85 	 vgcreate -M$mdatype --maxlogicalvolumes 2 $vg1 "$dev1" "$dev2"
| [ 0:00] ## Line: 86 	 vgcreate -M$mdatype --maxlogicalvolumes 2 $vg2 "$dev3" "$dev4"
| [ 0:00] ## Line: 87 	 not vgsplit --maxlogicalvolumes 2 $vg1 $vg2 "$dev1" 2>err
| [ 0:00] ## Line: 88 	 grep "Volume group \"$vg2\" exists, but new VG option specified" err
| [ 0:00] ## Line: 89 	 vgremove $vg1 $vg2
| [ 0:00] ## Line: 90 	 
| [ 0:00] ## Line: 91 	 # vgsplit rejects split because alloc given with existing vg
| [ 0:00] ## Line: 92 	 vgcreate -M$mdatype --alloc cling $vg1 "$dev1" "$dev2"
| [ 0:00] ## Line: 93 	 vgcreate -M$mdatype --alloc cling $vg2 "$dev3" "$dev4"
| [ 0:00] ## Line: 94 	 not vgsplit --alloc cling $vg1 $vg2 "$dev1" 2>err;
| [ 0:00] ## Line: 95 	 grep "Volume group \"$vg2\" exists, but new VG option specified" err
| [ 0:00] ## Line: 96 	 vgremove $vg1 $vg2
| [ 0:00] ## Line: 97 	 
| [ 0:00] ## Line: 98 	 # vgsplit rejects split because clustered given with existing vg
| [ 0:00] ## Line: 99 	 vgcreate -M$mdatype --clustered n $vg1 "$dev1" "$dev2"
| [ 0:00] ## Line: 100 	 vgcreate -M$mdatype --clustered n $vg2 "$dev3" "$dev4"
| [ 0:00] ## Line: 101 	 not vgsplit --clustered n $vg1 $vg2 "$dev1" 2>err
| [ 0:00] ## Line: 102 	 grep "Volume group \"$vg2\" exists, but new VG option specified" err
| [ 0:00] ## Line: 103 	 vgremove $vg1 $vg2
| [ 0:00] ## Line: 104 	 
| [ 0:00] ## Line: 105 	 # vgsplit rejects vg with active lv
| [ 0:00] ## Line: 106 	 pvcreate -M$mdatype -ff "$dev3" "$dev4"
| [ 0:00] ## Line: 107 	 vgcreate -M$mdatype $vg1 "$dev1" "$dev2"
| [ 0:00] ## Line: 108 	 vgcreate -M$mdatype $vg2 "$dev3" "$dev4"
| [ 0:00] ## Line: 109 	 lvcreate -l 4 -n $lv1 $vg1
| [ 0:00] ## Line: 110 	 not vgsplit $vg1 $vg2 "$dev1" 2>err;
| [ 0:00] ## Line: 111 	 grep "Logical volumes in \"$vg1\" must be inactive\$" err
| [ 0:00] ## Line: 112 	 vgremove -f $vg1 $vg2
| [ 0:00] ## Line: 113 	 
| [ 0:00] ## Line: 114 	 # vgsplit rejects split because max_lv is exceeded
| [ 0:00] ## Line: 115 	 vgcreate -M$mdatype --maxlogicalvolumes 2 $vg1 "$dev1" "$dev2"
| [ 0:00] ## Line: 116 	 vgcreate -M$mdatype --maxlogicalvolumes 2 $vg2 "$dev3" "$dev4"
| [ 0:00] ## Line: 117 	 lvcreate -l 4 -n $lv1 $vg1
| [ 0:00] ## Line: 118 	 lvcreate -l 4 -n $lv2 $vg1
| [ 0:00] ## Line: 119 	 lvcreate -l 4 -n $lv3 $vg2
| [ 0:00] ## Line: 120 	 vgchange -an $vg1 $vg2
| [ 0:00] ## Line: 121 	 not vgsplit $vg1 $vg2 "$dev1" 2>err;
| [ 0:00] ## Line: 122 	 grep "Maximum number of logical volumes (2) exceeded" err
| [ 0:00] ## Line: 123 	 vgremove -f $vg1 $vg2
| [ 0:00] ## Line: 124 	 
| [ 0:00] ## Line: 125 	 # vgsplit verify default - max_lv attribute from new VG is same as source VG" \
| [ 0:00] ## Line: 126 	 vgcreate -M$mdatype $vg1 "$dev1" "$dev2"
| [ 0:00] ## Line: 127 	 lvcreate -l 4 -n $lv1 $vg1
| [ 0:00] ## Line: 128 	 vgchange -an $vg1
| [ 0:00] ## Line: 129 	 vgsplit $vg1 $vg2 "$dev1"
| [ 0:00] ## Line: 130 	 check compare_vg_field $vg1 $vg2 max_lv
| [ 0:00] ## Line: 131 	 vgremove -f $vg1 $vg2
| [ 0:00] ## Line: 132 	 
| [ 0:00] ## Line: 133 	 # vgsplit verify default - max_pv attribute from new VG is same as source VG" \
| [ 0:00] ## Line: 134 	 vgcreate -M$mdatype $vg1 "$dev1" "$dev2"
| [ 0:00] ## Line: 135 	 lvcreate -l 4 -n $lv1 $vg1
| [ 0:00] ## Line: 136 	 vgchange -an $vg1
| [ 0:00] ## Line: 137 	 vgsplit $vg1 $vg2 "$dev1"
| [ 0:00] ## Line: 138 	 check compare_vg_field $vg1 $vg2 max_pv
| [ 0:00] ## Line: 139 	 vgremove -f $vg1 $vg2
| [ 0:00] ## Line: 140 	 
| [ 0:00] ## Line: 141 	 # vgsplit verify default - vg_fmt attribute from new VG is same as source VG" \
| [ 0:00] ## Line: 142 	 vgcreate -M$mdatype $vg1 "$dev1" "$dev2"
| [ 0:00] ## Line: 143 	 lvcreate -l 4 -n $lv1 $vg1
| [ 0:00] ## Line: 144 	 vgchange -an $vg1
| [ 0:00] ## Line: 145 	 vgsplit $vg1 $vg2 "$dev1"
| [ 0:00] ## Line: 146 	 check compare_vg_field $vg1 $vg2 vg_fmt
| [ 0:00] ## Line: 147 	 vgremove -f $vg2 $vg1
| [ 0:00] ## Line: 148 	 
| [ 0:00] ## Line: 149 	 # vgsplit rejects split because PV not in VG
| [ 0:00] ## Line: 150 	 vgcreate -M$mdatype $vg1 "$dev1" "$dev2"
| [ 0:00] ## Line: 151 	 vgcreate -M$mdatype $vg2 "$dev3" "$dev4"
| [ 0:00] ## Line: 152 	 lvcreate -l 4 -n $lv1 $vg1
| [ 0:00] ## Line: 153 	 lvcreate -l 4 -n $lv2 $vg1
| [ 0:00] ## Line: 154 	 vgchange -an $vg1
| [ 0:00] ## Line: 155 	 not vgsplit $vg1 $vg2 "$dev3" 2>err;
| [ 0:00] ## Line: 156 	 vgremove -f $vg2 $vg1
| [ 0:00] ## Line: 157 	 
| [ 0:00] ## Line: 158 	 # Restart clvm because using the same
| [ 0:00] ## Line: 159 	 # devs as lvm1 and then lvm2 causes problems.
| [ 0:00] ## Line: 160 	 if test -e LOCAL_CLVMD ; then
| [ 0:00] ## Line: 161 	 	kill "$(< LOCAL_CLVMD)"
| [ 0:00] ## Line: 162 	 	for i in $(seq 1 100) ; do
| [ 0:00] ## Line: 163 	 		test $i -eq 100 && die "Shutdown of clvmd is too slow."
| [ 0:00] ## Line: 164 	 		pgrep clvmd || break
| [ 0:00] ## Line: 165 	 		sleep .1
| [ 0:00] ## Line: 166 	 	done # wait for the pid removal
| [ 0:00] ## Line: 167 	 	aux prepare_clvmd
| [ 0:00] ## Line: 168 	 fi
| [ 0:00] ## Line: 169 	 
| [ 0:00] ## Line: 170 	 done
| [ 0:00] ## Line: 171 	 
| [ 0:00] ## Line: 172 	 if test -z "$LVM_TEST_LVM1" ; then
| [ 0:00] ## Line: 173 	 # ONLY LVM2 metadata
| [ 0:00] ## Line: 174 	 # setup PVs" '
| [ 0:00] ## Line: 175 	 pvcreate --metadatacopies 0 "$dev5"
| [ 0:00] ## Line: 176 	 
| [ 0:00] ## Line: 177 	 # vgsplit rejects to give away pv with the last mda copy
| [ 0:00] ## Line: 178 	 vgcreate $vg1 "$dev5" "$dev2"
| [ 0:00] ## Line: 179 	 lvcreate -l 10 -n $lv1  $vg1
| [ 0:00] ## Line: 180 	 lvchange -an $vg1/$lv1
| [ 0:00] ## Line: 181 	 check pvlv_counts $vg1 2 1 0
| [ 0:00] ## Line: 182 	 not vgsplit  $vg1 $vg2 "$dev5";
| [ 0:00] ## Line: 183 	 check pvlv_counts $vg1 2 1 0
| [ 0:00] ## Line: 184 	 vgremove -f $vg1
| [ 0:00] ## Line: 185 	 
| [ 0:00] ## Line: 186 	 # vgsplit rejects split because metadata types differ
| [ 0:00] ## Line: 187 	 pvcreate -ff -M1 "$dev3" "$dev4"
| [ 0:00] ## Line: 188 	 pvcreate -ff "$dev1" "$dev2"
| [ 0:00] ## Line: 189 	 vgcreate -M1 $vg1 "$dev3" "$dev4"
| [ 0:00] ## Line: 190 	 vgcreate $vg2 "$dev1" "$dev2"
| [ 0:00] ## Line: 191 	 not vgsplit $vg1 $vg2 "$dev3" 2>err;
| [ 0:00] ## Line: 192 	 grep "Metadata types differ" err
| [ 0:00] ## Line: 193 	 vgremove -f $vg1 $vg2
| [ 0:00] ## Line: 194 	 fi
| [ 0:00] aux teardown
| [ 0:00] #vgsplit-usage.sh:1+ aux teardown
| [ 0:00] ## teardown.........ok
###       failed: [ndev-vanilla] shell/vgsplit-usage.sh

| [ 0:00] Library version:   1.02.146 (2017-12-18)
| [ 0:00] Driver version:    4.35.0
| [ 0:00] Kernel is Linux localhost.localdomain 3.10.0-693.11.1.el7.x86_64 #1 SMP Mon Dec 4 23:52:40 UTC 2017 x86_64 GNU/Linux
| [ 0:00] Selinux mode is not installed.
| [ 0:00]               total        used        free      shared  buff/cache   available
| [ 0:00] Mem:           7822        1082        4137          10        2602        6433
| [ 0:00] Swap:          4095           0        4095
| [ 0:00] Filesystem      Size  Used Avail Use% Mounted on
| [ 0:00] /dev/sdc1        18G  8.4G  8.4G  50% /
| [ 0:00] /dev/sdd1        51G  6.1G   43G  13% /lfskernel
| [ 0:00] devtmpfs        3.9G     0  3.9G   0% /dev
| [ 0:00] tmpfs           3.9G     0  3.9G   0% /run
| [ 0:00] @TESTDIR=/tmp/LVMTEST31142.vorrfV9qrZ
| [ 0:00] @PREFIX=LVMTEST31142
| [ 0:00] ## LVMCONF: activation {
| [ 0:00] ## LVMCONF:     checks = 1
| [ 0:00] ## LVMCONF:     monitoring = 0
| [ 0:00] ## LVMCONF:     polling_interval = 1
| [ 0:00] ## LVMCONF:     raid_region_size = 512
| [ 0:00] ## LVMCONF:     retry_deactivation = 1
| [ 0:00] ## LVMCONF:     snapshot_autoextend_percent = 50
| [ 0:00] ## LVMCONF:     snapshot_autoextend_threshold = 50
| [ 0:00] ## LVMCONF:     udev_rules = 1
| [ 0:00] ## LVMCONF:     udev_sync = 1
| [ 0:00] ## LVMCONF:     verify_udev_operations = 1
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: allocation {
| [ 0:00] ## LVMCONF:     wipe_signatures_when_zeroing_new_lvs = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: backup {
| [ 0:00] ## LVMCONF:     archive = 0
| [ 0:00] ## LVMCONF:     backup = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: devices {
| [ 0:00] ## LVMCONF:     cache_dir = "@TESTDIR@/etc"
| [ 0:00] ## LVMCONF:     default_data_alignment = 1
| [ 0:00] ## LVMCONF:     dir = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     filter = "a|.*|"
| [ 0:00] ## LVMCONF:     global_filter = [ "a|@TESTDIR@/dev/mapper/@PREFIX@.*pv[0-9_]*$|", "r|.*|" ]
| [ 0:00] ## LVMCONF:     md_component_detection  = 0
| [ 0:00] ## LVMCONF:     scan = "@TESTDIR@/dev"
| [ 0:00] ## LVMCONF:     sysfs_scan = 1
| [ 0:00] ## LVMCONF:     write_cache_state = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: dmeventd {
| [ 0:00] ## LVMCONF:     executable = "/sources/boot/LVM2.2.02.177/test/lib/dmeventd"
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: global {
| [ 0:00] ## LVMCONF:     abort_on_internal_errors = 1
| [ 0:00] ## LVMCONF:     cache_check_executable = "/usr/sbin/cache_check"
| [ 0:00] ## LVMCONF:     cache_dump_executable = "/usr/sbin/cache_dump"
| [ 0:00] ## LVMCONF:     cache_repair_executable = "/usr/sbin/cache_repair"
| [ 0:00] ## LVMCONF:     detect_internal_vg_cache_corruption = 1
| [ 0:00] ## LVMCONF:     fallback_to_local_locking = 0
| [ 0:00] ## LVMCONF:     fsadm_executable = "/sources/boot/LVM2.2.02.177/test/lib/fsadm"
| [ 0:00] ## LVMCONF:     library_dir = "@TESTDIR@/lib"
| [ 0:00] ## LVMCONF:     locking_dir = "@TESTDIR@/var/lock/lvm"
| [ 0:00] ## LVMCONF:     locking_type=1
| [ 0:00] ## LVMCONF:     notify_dbus = 0
| [ 0:00] ## LVMCONF:     si_unit_consistency = 1
| [ 0:00] ## LVMCONF:     thin_check_executable = "/usr/sbin/thin_check"
| [ 0:00] ## LVMCONF:     thin_dump_executable = "/usr/sbin/thin_dump"
| [ 0:00] ## LVMCONF:     thin_repair_executable = "/usr/sbin/thin_repair"
| [ 0:00] ## LVMCONF:     use_lvmetad = 0
| [ 0:00] ## LVMCONF:     use_lvmlockd = 0
| [ 0:00] ## LVMCONF:     use_lvmpolld = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] ## LVMCONF: log {
| [ 0:00] ## LVMCONF:     activation = 1
| [ 0:00] ## LVMCONF:     file = "@TESTDIR@/debug.log"
| [ 0:00] ## LVMCONF:     indent = 1
| [ 0:00] ## LVMCONF:     level = 9
| [ 0:00] ## LVMCONF:     overwrite = 1
| [ 0:00] ## LVMCONF:     syslog = 0
| [ 0:00] ## LVMCONF:     verbose = 0
| [ 0:00] ## LVMCONF: }
| [ 0:00] <======== Processing test: "zero-usage.sh" ========>
| [ 0:00] 
| [ 0:00] which md5sum || skip
| [ 0:00] #zero-usage.sh:19+ which md5sum
| [ 0:00] /usr/bin/md5sum
| [ 0:00] 
| [ 0:00] aux prepare_vg 1
| [ 0:00] #zero-usage.sh:21+ aux prepare_vg 1
| [ 0:00] ## preparing loop device....ok (/dev/loop0)
| [ 0:00] ## preparing 1 devices...lib/utils: line 212: DM_UDEV_COOKIE: unbound variable
| [ 0:00] set +vx; STACKTRACE; set -vx
| [ 0:00] ##zero-usage.sh:21+ set +vx
| [ 0:00] ## - /lfskernel/sources/boot/LVM2.2.02.177/test/shell/zero-usage.sh:21
| [ 0:00] ## 1 STACKTRACE() called from /lfskernel/sources/boot/LVM2.2.02.177/test/shell/zero-usage.sh:21
| [ 0:00] <======== Info ========>
| [ 0:00] ## DMINFO:   Name             Maj Min Stat Open Targ Event  UUID                                                                
| [ 0:00] ## DMINFO:   @PREFIX@pv1  253   3 L--w    0    1      0 TEST-@PREFIX@pv1                                                
| [ 0:00] <======== Active table ========>
| [ 0:00] ## DMTABLE:  @PREFIX@pv1: 0 69632 linear 7:0 2048
| [ 0:00] <======== Inactive table ========>
| [ 0:00] ## DMITABLE: @PREFIX@pv1: 
| [ 0:00] <======== Status ========>
| [ 0:00] ## DMSTATUS: @PREFIX@pv1: 0 69632 linear 
| [ 0:00] <======== Tree ========>
| [ 0:00] ## DMTREE:   @PREFIX@pv1 (253:3)
| [ 0:00] ## DMTREE:    `- (7:0)
| [ 0:00] ## DMTREE:   LFS_vg-lfs (253:2)
| [ 0:00] ## DMTREE:    `- (8:16)
| [ 0:00] ## DMTREE:   centos-swap (253:1)
| [ 0:00] ## DMTREE:    `- (8:2)
| [ 0:00] ## DMTREE:   centos-root (253:0)
| [ 0:00] ## DMTREE:    `- (8:2)
| [ 0:00] <======== Recursive list of @TESTDIR@/dev ========>
| [ 0:00] ## LSLR:	@TESTDIR@/dev:
| [ 0:00] ## LSLR:	total 4
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 0 Feb 21 02:28 loop0
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 1 Feb 21 02:28 loop1
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 2 Feb 21 02:28 loop2
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 3 Feb 21 02:28 loop3
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 4 Feb 21 02:28 loop4
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 5 Feb 21 02:28 loop5
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 6 Feb 21 02:28 loop6
| [ 0:00] ## LSLR:	brw-r--r-- 1 root root 7, 7 Feb 21 02:28 loop7
| [ 0:00] ## LSLR:	drwxr-xr-x 2 root root 4096 Feb 21 02:28 mapper
| [ 0:00] ## LSLR:	crw-r--r-- 1 root root 1, 3 Feb 21 02:28 testnull
| [ 0:00] ## LSLR:	
| [ 0:00] ## LSLR:	@TESTDIR@/dev/mapper:
| [ 0:00] ## LSLR:	total 0
| [ 0:00] ## LSLR:	brw------- 1 root root 253,   3 Feb 21 02:28 @PREFIX@pv1
| [ 0:00] ## LSLR:	crw------- 1 root root  10, 236 Feb 21 02:28 control
| [ 0:00] <======== Udev DB content ========>
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-0
| [ 0:00] ## UDEV:	N: dm-0
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-0
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-0
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=0
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-1
| [ 0:00] ## UDEV:	N: dm-1
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-1
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-1
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=1
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-2
| [ 0:00] ## UDEV:	N: dm-2
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-2
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-2
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=2
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/dm-3
| [ 0:00] ## UDEV:	N: dm-3
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/dm-3
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/dm-3
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=253
| [ 0:00] ## UDEV:	E: MINOR=3
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] ## UDEV:	P: /devices/virtual/block/loop0
| [ 0:00] ## UDEV:	N: loop0
| [ 0:00] ## UDEV:	E: DEVNAME=/dev/loop0
| [ 0:00] ## UDEV:	E: DEVPATH=/devices/virtual/block/loop0
| [ 0:00] ## UDEV:	E: DEVTYPE=disk
| [ 0:00] ## UDEV:	E: MAJOR=7
| [ 0:00] ## UDEV:	E: MINOR=0
| [ 0:00] ## UDEV:	E: SUBSYSTEM=block
| [ 0:00] ## UDEV:	
| [ 0:00] <======== Script file "zero-usage.sh" ========>
| [ 0:00] ## Line: 1 	 #!/bin/bash
| [ 0:00] ## Line: 2 	 # Copyright (C) 2014 Red Hat, Inc. All rights reserved.
| [ 0:00] ## Line: 3 	 #
| [ 0:00] ## Line: 4 	 # This copyrighted material is made available to anyone wishing to use,
| [ 0:00] ## Line: 5 	 # modify, copy, or redistribute it subject to the terms and conditions
| [ 0:00] ## Line: 6 	 # of the GNU General Public License v.2.
| [ 0:00] ## Line: 7 	 #
| [ 0:00] ## Line: 8 	 # You should have received a copy of the GNU General Public License
| [ 0:00] ## Line: 9 	 # along with this program; if not, write to the Free Software Foundation,
| [ 0:00] ## Line: 10 	 # Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA
| [ 0:00] ## Line: 11 	 
| [ 0:00] ## Line: 12 	 # Basic usage of zero target
| [ 0:00] ## Line: 13 	 
| [ 0:00] ## Line: 14 	 SKIP_WITH_LVMLOCKD=1
| [ 0:00] ## Line: 15 	 SKIP_WITH_LVMPOLLD=1
| [ 0:00] ## Line: 16 	 
| [ 0:00] ## Line: 17 	 . lib/inittest
| [ 0:00] ## Line: 18 	 
| [ 0:00] ## Line: 19 	 which md5sum || skip
| [ 0:00] ## Line: 20 	 
| [ 0:00] ## Line: 21 	 aux prepare_vg 1
| [ 0:00] ## Line: 22 	 
| [ 0:00] ## Line: 23 	 lvcreate --type zero -L1 -n $lv1 $vg
| [ 0:00] ## Line: 24 	 lvextend -L+1 $vg/$lv1
| [ 0:00] ## Line: 25 	 
| [ 0:00] ## Line: 26 	 sum1=$(dd if=/dev/zero bs=2M count=1 | md5sum | cut -f1 -d' ')
| [ 0:00] ## Line: 27 	 sum2=$(dd if="$DM_DEV_DIR/$vg/$lv1" bs=2M count=1 | md5sum | cut -f1 -d' ')
| [ 0:00] ## Line: 28 	 
| [ 0:00] ## Line: 29 	 # has to match
| [ 0:00] ## Line: 30 	 test "$sum1" = "$sum2"
| [ 0:00] ## Line: 31 	 
| [ 0:00] ## Line: 32 	 check lv_field $vg/$lv1 lv_modules "zero"
| [ 0:00] ## Line: 33 	 check lv_field $vg/$lv1 segtype "zero"
| [ 0:00] ## Line: 34 	 check lv_field $vg/$lv1 seg_count "1"
| [ 0:00] ## Line: 35 	 check lv_field $vg/$lv1 seg_size_pe "4"   # 4 * 512
| [ 0:00] ## Line: 36 	 
| [ 0:00] ## Line: 37 	 vgremove -ff $vg
| [ 0:00] aux teardown
| [ 0:00] #zero-usage.sh:1+ aux teardown
| [ 0:00] ## teardown.........ok
###       failed: [ndev-vanilla] shell/zero-usage.sh
###      skipped: [ndev-vanilla] shell/zz-lvmlockd-dlm-remove.sh
###      skipped: [ndev-vanilla] shell/zz-lvmlockd-sanlock-remove.sh

### 298 tests: 3 passed, 140 skipped, 0 timed out, 0 warned, 155 failed
make[1]: *** [Makefile:138: check_local] Error 1
rm lib/not.o
make[1]: Leaving directory '/lfskernel/sources/boot/LVM2.2.02.177/test'
make: *** [Makefile:101: check_local] Error 2
