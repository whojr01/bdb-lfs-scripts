*** malformed-restore.test ***
[4] $ cp malformed-restore-double-owner.acl tmp.acl -- ok
[5] $ sed -i "s/USER/root/g" tmp.acl -- ok
[6] $ sed -i "s/GROUP/root/g" tmp.acl -- ok
[7] $ touch tmp -- ok
[8] $ setfacl --restore tmp.acl -- ok
[10] $ rm tmp.acl tmp -- ok
[12] $ mkdir tmp -- ok
[13] $ chmod 1777 tmp -- ok
[14] $ getfacl tmp > tmp.acl -- ok
[15] $ sed -i 's/--t/--x/g' tmp.acl -- ok
[16] $ setfacl --restore tmp.acl -- ok
[18] $ rmdir tmp -- ok
[19] $ rm tmp.acl -- ok
13 commands (13 passed, 0 failed)
*** sbits-restore.test ***
[3] $ umask 022 -- ok
[4] $ mkdir d -- ok
[5] $ touch d/g -- ok
[6] $ touch d/u -- ok
[7] $ chmod u+s d/u -- ok
[8] $ chmod g+s d/g -- ok
[9] $ chmod +t d -- ok
[10] $ getfacl -R d > d.acl -- ok
[11] $ rm -R d -- ok
[12] $ mkdir d -- ok
[13] $ touch d/g -- ok
[14] $ touch d/u -- ok
[15] $ setfacl --restore d.acl -- ok
[16] $ ls -dl d | awk '{print $1}' -- ok
[18] $ ls -dl d/u | awk '{print $1}' -- ok
[20] $ ls -dl d/g | awk '{print $1}' -- ok
[22] $ rm -Rf d -- ok
17 commands (17 passed, 0 failed)
*** utf8-filenames.test ***
[8] $ export UPATH="官官話官話官話官話官話官話官話官話官話官話官話官話官話官話官話官話官話官話官話官話官話官話官話官話官話官話官話官話官話官話官話官話官話官話話官話官話官話>官話官話話官話官" -- ok
[9] $ mkdir -p $UPATH/$UPATH/$UPATH -- ok
[10] $ touch $UPATH/$UPATH/$UPATH/$UPATH -- ok
[11] $ getfacl $UPATH/$UPATH/$UPATH/$UPATH > utf8-filenames.acl -- ok
[12] $ setfacl --restore=utf8-filenames.acl -- ok
[13] $ rm -R $UPATH -- ok
[14] $ rm utf8-filenames.acl -- ok
7 commands (7 passed, 0 failed)
*** setfacl-X.test ***
[1] $ umask 022 -- ok
[2] $ mkdir d -- ok
[3] $ cd d -- ok
[5] $ setfacl -dm u:bin:rwx . -- ok
[7] $ touch f g -- ok
[8] $ chmod ugo+x f -- ok
[9] $ setfacl -m u:bin:rw,g::r g -- ok
[10] $ setfacl -m u:root:rwX f g -- ok
[11] $ getfacl --omit-header --no-effective f g -- ok
[27] $ rm f g -- ok
[28] $ touch f g -- ok
[29] $ mkdir d e -- ok
[30] $ setfacl -n -m u:root:rwX d f e g -- ok
[31] $ getfacl --omit-header --no-effective d e f g -- ok
[71] $ rm f g -- ok
[72] $ rmdir d e -- ok
[73] $ touch f g -- ok
[74] $ mkdir d e -- ok
[75] $ setfacl -n -m u:root:rwX f d g e -- ok
[76] $ getfacl --omit-header --no-effective d e f g -- ok
[116] $ rm f g -- ok
[117] $ rmdir d e -- ok
[118] $ cd .. -- ok
[119] $ rm -rf d -- ok
24 commands (24 passed, 0 failed)
*** getfacl-noacl.test ***
[4] $ mkdir test -- ok
[5] $ cd test -- ok
[6] $ umask 027 -- ok
[7] $ touch x -- ok
[8] $ getfacl --omit-header x -- ok
[14] $ getfacl --omit-header --access x -- ok
[20] $ getfacl --omit-header -d x -- ok
[21] $ getfacl --omit-header -d . -- ok
[22] $ getfacl --omit-header -d / -- ok
[25] $ getfacl --skip-base x -- ok
[26] $ getfacl --omit-header --all-effective x -- ok
[32] $ getfacl --omit-header --no-effective x -- ok
[38] $ mkdir d -- ok
[39] $ touch d/y -- ok
[40] $ ln -s d l -- ok
[41] $ getfacl -dR . | grep file | sort -- ok
[47] $ ln -s l ll -- ok
[48] $ getfacl -dLR ll | grep file | sort -- ok
[52] $ rm l ll x -- ok
[53] $ rm -rf d -- ok
[54] $ cd .. -- ok
[55] $ rmdir test -- ok
22 commands (22 passed, 0 failed)
*** getfacl-recursive.test ***
[3] $ umask 022 -- ok
[4] $ mkdir -p 1/2/3 -- ok
[5] $ mkdir 1/link -- ok
[6] $ touch 1/link/file -- ok
[7] $ ln -s `pwd`/1/link 1/2/link -- ok
[8] $ getfacl -P -R 1/2 | ./sort-getfacl-output -- ok
[24] $ getfacl -R 1/2 | ./sort-getfacl-output -- ok
[40] $ getfacl -R -L 1/2 | ./sort-getfacl-output -- ok
[70] $ getfacl -P -R 1 | ./sort-getfacl-output -- ok
[107] $ getfacl -R 1 | ./sort-getfacl-output -- ok
[144] $ getfacl -R -L 1 | ./sort-getfacl-output -- ok
[195] $ rm -R 1/ -- ok
12 commands (12 passed, 0 failed)
*** cp.test ***
[3] $ umask 022 -- ok
[4] $ mkdir d -- ok
[5] $ cd d -- ok
[6] $ touch f -- ok
[7] $ setfacl -m u:bin:rw f -- ok
[8] $ ls -l f | awk -- '{ print $1 }' -- failed
-rw-rw-r--                            != -rw-rw-r--+
[11] $ cp f g -- ok
[12] $ ls -l g | awk -- '{ print $1 }' -- ok
[15] $ rm g -- ok
[16] $ cp -p f g -- ok
[17] $ ls -l f | awk -- '{ print $1 }' -- failed
-rw-rw-r--                            != -rw-rw-r--+
[20] $ mkdir h -- ok
[21] $ echo blubb > h/x -- ok
[22] $ cp -rp h i -- ok
[23] $ cat i/x -- ok
[26] $ rm -r i -- ok
[27] $ setfacl -R -m u:bin:rwx h -- ok
[28] $ getfacl --omit-header h/x -- ok
[36] $ cp -rp h i -- ok
[37] $ getfacl --omit-header i/x -- failed
user::rw-                             == user::rw-
group::rwx                            != user:bin:rwx
other::r--                            != group::r--
                                      != mask::rwx
~                                     != other::r--
~                                     != 
[45] $ cd .. -- ok
[46] $ rm -r d -- ok
22 commands (19 passed, 3 failed)
make: *** [Makefile:39: cp.test] Error 3
